var dC=Object.defineProperty;var hC=(e,t,n)=>t in e?dC(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var $h=(e,t,n)=>hC(e,typeof t!="symbol"?t+"":t,n);function fC(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const a in r)if(a!=="default"&&!(a in e)){const l=Object.getOwnPropertyDescriptor(r,a);l&&Object.defineProperty(e,a,l.get?l:{enumerable:!0,get:()=>r[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var Sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function eh(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function mC(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}),n}var Xy={exports:{}},th={},Qy={exports:{}},mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),gC=Symbol.for("react.portal"),pC=Symbol.for("react.fragment"),xC=Symbol.for("react.strict_mode"),yC=Symbol.for("react.profiler"),vC=Symbol.for("react.provider"),wC=Symbol.for("react.context"),bC=Symbol.for("react.forward_ref"),EC=Symbol.for("react.suspense"),CC=Symbol.for("react.memo"),NC=Symbol.for("react.lazy"),_1=Symbol.iterator;function SC(e){return e===null||typeof e!="object"?null:(e=_1&&e[_1]||e["@@iterator"],typeof e=="function"?e:null)}var Zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Jy=Object.assign,ev={};function gl(e,t,n){this.props=e,this.context=t,this.refs=ev,this.updater=n||Zy}gl.prototype.isReactComponent={};gl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};gl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tv(){}tv.prototype=gl.prototype;function Tm(e,t,n){this.props=e,this.context=t,this.refs=ev,this.updater=n||Zy}var Im=Tm.prototype=new tv;Im.constructor=Tm;Jy(Im,gl.prototype);Im.isPureReactComponent=!0;var A1=Array.isArray,nv=Object.prototype.hasOwnProperty,jm={current:null},rv={key:!0,ref:!0,__self:!0,__source:!0};function sv(e,t,n){var r,a={},l=null,h=null;if(t!=null)for(r in t.ref!==void 0&&(h=t.ref),t.key!==void 0&&(l=""+t.key),t)nv.call(t,r)&&!rv.hasOwnProperty(r)&&(a[r]=t[r]);var g=arguments.length-2;if(g===1)a.children=n;else if(1<g){for(var y=Array(g),x=0;x<g;x++)y[x]=arguments[x+2];a.children=y}if(e&&e.defaultProps)for(r in g=e.defaultProps,g)a[r]===void 0&&(a[r]=g[r]);return{$$typeof:Xc,type:e,key:l,ref:h,props:a,_owner:jm.current}}function _C(e,t){return{$$typeof:Xc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function km(e){return typeof e=="object"&&e!==null&&e.$$typeof===Xc}function AC(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var T1=/\/+/g;function Hh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?AC(""+e.key):t.toString(36)}function Yu(e,t,n,r,a){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var h=!1;if(e===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(e.$$typeof){case Xc:case gC:h=!0}}if(h)return h=e,a=a(h),e=r===""?"."+Hh(h,0):r,A1(a)?(n="",e!=null&&(n=e.replace(T1,"$&/")+"/"),Yu(a,t,n,"",function(x){return x})):a!=null&&(km(a)&&(a=_C(a,n+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(T1,"$&/")+"/")+e)),t.push(a)),1;if(h=0,r=r===""?".":r+":",A1(e))for(var g=0;g<e.length;g++){l=e[g];var y=r+Hh(l,g);h+=Yu(l,t,n,y,a)}else if(y=SC(e),typeof y=="function")for(e=y.call(e),g=0;!(l=e.next()).done;)l=l.value,y=r+Hh(l,g++),h+=Yu(l,t,n,y,a);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return h}function bu(e,t,n){if(e==null)return e;var r=[],a=0;return Yu(e,r,"","",function(l){return t.call(n,l,a++)}),r}function TC(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ir={current:null},Xu={transition:null},IC={ReactCurrentDispatcher:ir,ReactCurrentBatchConfig:Xu,ReactCurrentOwner:jm};mt.Children={map:bu,forEach:function(e,t,n){bu(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bu(e,function(){t++}),t},toArray:function(e){return bu(e,function(t){return t})||[]},only:function(e){if(!km(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};mt.Component=gl;mt.Fragment=pC;mt.Profiler=yC;mt.PureComponent=Tm;mt.StrictMode=xC;mt.Suspense=EC;mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=IC;mt.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Jy({},e.props),a=e.key,l=e.ref,h=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,h=jm.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var g=e.type.defaultProps;for(y in t)nv.call(t,y)&&!rv.hasOwnProperty(y)&&(r[y]=t[y]===void 0&&g!==void 0?g[y]:t[y])}var y=arguments.length-2;if(y===1)r.children=n;else if(1<y){g=Array(y);for(var x=0;x<y;x++)g[x]=arguments[x+2];r.children=g}return{$$typeof:Xc,type:e.type,key:a,ref:l,props:r,_owner:h}};mt.createContext=function(e){return e={$$typeof:wC,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:vC,_context:e},e.Consumer=e};mt.createElement=sv;mt.createFactory=function(e){var t=sv.bind(null,e);return t.type=e,t};mt.createRef=function(){return{current:null}};mt.forwardRef=function(e){return{$$typeof:bC,render:e}};mt.isValidElement=km;mt.lazy=function(e){return{$$typeof:NC,_payload:{_status:-1,_result:e},_init:TC}};mt.memo=function(e,t){return{$$typeof:CC,type:e,compare:t===void 0?null:t}};mt.startTransition=function(e){var t=Xu.transition;Xu.transition={};try{e()}finally{Xu.transition=t}};mt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};mt.useCallback=function(e,t){return ir.current.useCallback(e,t)};mt.useContext=function(e){return ir.current.useContext(e)};mt.useDebugValue=function(){};mt.useDeferredValue=function(e){return ir.current.useDeferredValue(e)};mt.useEffect=function(e,t){return ir.current.useEffect(e,t)};mt.useId=function(){return ir.current.useId()};mt.useImperativeHandle=function(e,t,n){return ir.current.useImperativeHandle(e,t,n)};mt.useInsertionEffect=function(e,t){return ir.current.useInsertionEffect(e,t)};mt.useLayoutEffect=function(e,t){return ir.current.useLayoutEffect(e,t)};mt.useMemo=function(e,t){return ir.current.useMemo(e,t)};mt.useReducer=function(e,t,n){return ir.current.useReducer(e,t,n)};mt.useRef=function(e){return ir.current.useRef(e)};mt.useState=function(e){return ir.current.useState(e)};mt.useSyncExternalStore=function(e,t,n){return ir.current.useSyncExternalStore(e,t,n)};mt.useTransition=function(){return ir.current.useTransition()};mt.version="18.2.0";Qy.exports=mt;var R=Qy.exports;const Rm=eh(R);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC=R,kC=Symbol.for("react.element"),RC=Symbol.for("react.fragment"),MC=Object.prototype.hasOwnProperty,DC=jC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,OC={key:!0,ref:!0,__self:!0,__source:!0};function iv(e,t,n){var r,a={},l=null,h=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(h=t.ref);for(r in t)MC.call(t,r)&&!OC.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:kC,type:e,key:l,ref:h,props:a,_owner:DC.current}}th.Fragment=RC;th.jsx=iv;th.jsxs=iv;Xy.exports=th;var d=Xy.exports,Kf={},av={exports:{}},Or={},ov={exports:{}},lv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Q,ce){var J=Q.length;Q.push(ce);e:for(;0<J;){var pe=J-1>>>1,ye=Q[pe];if(0<a(ye,ce))Q[pe]=ce,Q[J]=ye,J=pe;else break e}}function n(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ce=Q[0],J=Q.pop();if(J!==ce){Q[0]=J;e:for(var pe=0,ye=Q.length,We=ye>>>1;pe<We;){var $e=2*(pe+1)-1,Ct=Q[$e],_e=$e+1,It=Q[_e];if(0>a(Ct,J))_e<ye&&0>a(It,Ct)?(Q[pe]=It,Q[_e]=J,pe=_e):(Q[pe]=Ct,Q[$e]=J,pe=$e);else if(_e<ye&&0>a(It,J))Q[pe]=It,Q[_e]=J,pe=_e;else break e}}return ce}function a(Q,ce){var J=Q.sortIndex-ce.sortIndex;return J!==0?J:Q.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var h=Date,g=h.now();e.unstable_now=function(){return h.now()-g}}var y=[],x=[],w=1,E=null,N=3,I=!1,D=!1,O=!1,V=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function _(Q){for(var ce=n(x);ce!==null;){if(ce.callback===null)r(x);else if(ce.startTime<=Q)r(x),ce.sortIndex=ce.expirationTime,t(y,ce);else break;ce=n(x)}}function M(Q){if(O=!1,_(Q),!D)if(n(y)!==null)D=!0,te(H);else{var ce=n(x);ce!==null&&se(M,ce.startTime-Q)}}function H(Q,ce){D=!1,O&&(O=!1,T(U),U=-1),I=!0;var J=N;try{for(_(ce),E=n(y);E!==null&&(!(E.expirationTime>ce)||Q&&!he());){var pe=E.callback;if(typeof pe=="function"){E.callback=null,N=E.priorityLevel;var ye=pe(E.expirationTime<=ce);ce=e.unstable_now(),typeof ye=="function"?E.callback=ye:E===n(y)&&r(y),_(ce)}else r(y);E=n(y)}if(E!==null)var We=!0;else{var $e=n(x);$e!==null&&se(M,$e.startTime-ce),We=!1}return We}finally{E=null,N=J,I=!1}}var $=!1,F=null,U=-1,q=5,ne=-1;function he(){return!(e.unstable_now()-ne<q)}function me(){if(F!==null){var Q=e.unstable_now();ne=Q;var ce=!0;try{ce=F(!0,Q)}finally{ce?re():($=!1,F=null)}}else $=!1}var re;if(typeof A=="function")re=function(){A(me)};else if(typeof MessageChannel<"u"){var ae=new MessageChannel,Y=ae.port2;ae.port1.onmessage=me,re=function(){Y.postMessage(null)}}else re=function(){V(me,0)};function te(Q){F=Q,$||($=!0,re())}function se(Q,ce){U=V(function(){Q(e.unstable_now())},ce)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Q){Q.callback=null},e.unstable_continueExecution=function(){D||I||(D=!0,te(H))},e.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<Q?Math.floor(1e3/Q):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(y)},e.unstable_next=function(Q){switch(N){case 1:case 2:case 3:var ce=3;break;default:ce=N}var J=N;N=ce;try{return Q()}finally{N=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Q,ce){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var J=N;N=Q;try{return ce()}finally{N=J}},e.unstable_scheduleCallback=function(Q,ce,J){var pe=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?pe+J:pe):J=pe,Q){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=J+ye,Q={id:w++,callback:ce,priorityLevel:Q,startTime:J,expirationTime:ye,sortIndex:-1},J>pe?(Q.sortIndex=J,t(x,Q),n(y)===null&&Q===n(x)&&(O?(T(U),U=-1):O=!0,se(M,J-pe))):(Q.sortIndex=ye,t(y,Q),D||I||(D=!0,te(H))),Q},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(Q){var ce=N;return function(){var J=N;N=ce;try{return Q.apply(this,arguments)}finally{N=J}}}})(lv);ov.exports=lv;var PC=ov.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cv=R,Dr=PC;function Se(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uv=new Set,Ec={};function Xa(e,t){Zo(e,t),Zo(e+"Capture",t)}function Zo(e,t){for(Ec[e]=t,e=0;e<t.length;e++)uv.add(t[e])}var hi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yf=Object.prototype.hasOwnProperty,LC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I1={},j1={};function BC(e){return Yf.call(j1,e)?!0:Yf.call(I1,e)?!1:LC.test(e)?j1[e]=!0:(I1[e]=!0,!1)}function FC(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function UC(e,t,n,r){if(t===null||typeof t>"u"||FC(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ar(e,t,n,r,a,l,h){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=h}var Ln={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ln[e]=new ar(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ln[t]=new ar(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ln[e]=new ar(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ln[e]=new ar(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ln[e]=new ar(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ln[e]=new ar(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ln[e]=new ar(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ln[e]=new ar(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ln[e]=new ar(e,5,!1,e.toLowerCase(),null,!1,!1)});var Mm=/[\-:]([a-z])/g;function Dm(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Mm,Dm);Ln[t]=new ar(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Mm,Dm);Ln[t]=new ar(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Mm,Dm);Ln[t]=new ar(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ln[e]=new ar(e,1,!1,e.toLowerCase(),null,!1,!1)});Ln.xlinkHref=new ar("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ln[e]=new ar(e,1,!1,e.toLowerCase(),null,!0,!0)});function Om(e,t,n,r){var a=Ln.hasOwnProperty(t)?Ln[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(UC(t,n,a,r)&&(n=null),r||a===null?BC(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var wi=cv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Eu=Symbol.for("react.element"),Ao=Symbol.for("react.portal"),To=Symbol.for("react.fragment"),Pm=Symbol.for("react.strict_mode"),Xf=Symbol.for("react.profiler"),dv=Symbol.for("react.provider"),hv=Symbol.for("react.context"),Lm=Symbol.for("react.forward_ref"),Qf=Symbol.for("react.suspense"),Zf=Symbol.for("react.suspense_list"),Bm=Symbol.for("react.memo"),Di=Symbol.for("react.lazy"),fv=Symbol.for("react.offscreen"),k1=Symbol.iterator;function Vl(e){return e===null||typeof e!="object"?null:(e=k1&&e[k1]||e["@@iterator"],typeof e=="function"?e:null)}var nn=Object.assign,Wh;function Zl(e){if(Wh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wh=t&&t[1]||""}return`
`+Wh+e}var Gh=!1;function qh(e,t){if(!e||Gh)return"";Gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var r=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){r=x}e.call(t.prototype)}else{try{throw Error()}catch(x){r=x}e()}}catch(x){if(x&&r&&typeof x.stack=="string"){for(var a=x.stack.split(`
`),l=r.stack.split(`
`),h=a.length-1,g=l.length-1;1<=h&&0<=g&&a[h]!==l[g];)g--;for(;1<=h&&0<=g;h--,g--)if(a[h]!==l[g]){if(h!==1||g!==1)do if(h--,g--,0>g||a[h]!==l[g]){var y=`
`+a[h].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=h&&0<=g);break}}}finally{Gh=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Zl(e):""}function VC(e){switch(e.tag){case 5:return Zl(e.type);case 16:return Zl("Lazy");case 13:return Zl("Suspense");case 19:return Zl("SuspenseList");case 0:case 2:case 15:return e=qh(e.type,!1),e;case 11:return e=qh(e.type.render,!1),e;case 1:return e=qh(e.type,!0),e;default:return""}}function Jf(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case To:return"Fragment";case Ao:return"Portal";case Xf:return"Profiler";case Pm:return"StrictMode";case Qf:return"Suspense";case Zf:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case hv:return(e.displayName||"Context")+".Consumer";case dv:return(e._context.displayName||"Context")+".Provider";case Lm:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Bm:return t=e.displayName||null,t!==null?t:Jf(e.type)||"Memo";case Di:t=e._payload,e=e._init;try{return Jf(e(t))}catch{}}return null}function zC(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jf(t);case 8:return t===Pm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Ji(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function mv(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function $C(e){var t=mv(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(h){r=""+h,l.call(this,h)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(h){r=""+h},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Cu(e){e._valueTracker||(e._valueTracker=$C(e))}function gv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=mv(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function md(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function e0(e,t){var n=t.checked;return nn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function R1(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Ji(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function pv(e,t){t=t.checked,t!=null&&Om(e,"checked",t,!1)}function t0(e,t){pv(e,t);var n=Ji(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?n0(e,t.type,n):t.hasOwnProperty("defaultValue")&&n0(e,t.type,Ji(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function M1(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function n0(e,t,n){(t!=="number"||md(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Jl=Array.isArray;function Go(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Ji(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function r0(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Se(91));return nn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function D1(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Se(92));if(Jl(n)){if(1<n.length)throw Error(Se(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Ji(n)}}function xv(e,t){var n=Ji(t.value),r=Ji(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function O1(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function yv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function s0(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?yv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Nu,vv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Nu=Nu||document.createElement("div"),Nu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Nu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Cc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var sc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},HC=["Webkit","ms","Moz","O"];Object.keys(sc).forEach(function(e){HC.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),sc[t]=sc[e]})});function wv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||sc.hasOwnProperty(e)&&sc[e]?(""+t).trim():t+"px"}function bv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=wv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var WC=nn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i0(e,t){if(t){if(WC[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Se(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Se(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Se(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Se(62))}}function a0(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var o0=null;function Fm(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var l0=null,qo=null,Ko=null;function P1(e){if(e=Jc(e)){if(typeof l0!="function")throw Error(Se(280));var t=e.stateNode;t&&(t=ah(t),l0(e.stateNode,e.type,t))}}function Ev(e){qo?Ko?Ko.push(e):Ko=[e]:qo=e}function Cv(){if(qo){var e=qo,t=Ko;if(Ko=qo=null,P1(e),t)for(e=0;e<t.length;e++)P1(t[e])}}function Nv(e,t){return e(t)}function Sv(){}var Kh=!1;function _v(e,t,n){if(Kh)return e(t,n);Kh=!0;try{return Nv(e,t,n)}finally{Kh=!1,(qo!==null||Ko!==null)&&(Sv(),Cv())}}function Nc(e,t){var n=e.stateNode;if(n===null)return null;var r=ah(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Se(231,t,typeof n));return n}var c0=!1;if(hi)try{var zl={};Object.defineProperty(zl,"passive",{get:function(){c0=!0}}),window.addEventListener("test",zl,zl),window.removeEventListener("test",zl,zl)}catch{c0=!1}function GC(e,t,n,r,a,l,h,g,y){var x=Array.prototype.slice.call(arguments,3);try{t.apply(n,x)}catch(w){this.onError(w)}}var ic=!1,gd=null,pd=!1,u0=null,qC={onError:function(e){ic=!0,gd=e}};function KC(e,t,n,r,a,l,h,g,y){ic=!1,gd=null,GC.apply(qC,arguments)}function YC(e,t,n,r,a,l,h,g,y){if(KC.apply(this,arguments),ic){if(ic){var x=gd;ic=!1,gd=null}else throw Error(Se(198));pd||(pd=!0,u0=x)}}function Qa(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Av(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function L1(e){if(Qa(e)!==e)throw Error(Se(188))}function XC(e){var t=e.alternate;if(!t){if(t=Qa(e),t===null)throw Error(Se(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return L1(a),e;if(l===r)return L1(a),t;l=l.sibling}throw Error(Se(188))}if(n.return!==r.return)n=a,r=l;else{for(var h=!1,g=a.child;g;){if(g===n){h=!0,n=a,r=l;break}if(g===r){h=!0,r=a,n=l;break}g=g.sibling}if(!h){for(g=l.child;g;){if(g===n){h=!0,n=l,r=a;break}if(g===r){h=!0,r=l,n=a;break}g=g.sibling}if(!h)throw Error(Se(189))}}if(n.alternate!==r)throw Error(Se(190))}if(n.tag!==3)throw Error(Se(188));return n.stateNode.current===n?e:t}function Tv(e){return e=XC(e),e!==null?Iv(e):null}function Iv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Iv(e);if(t!==null)return t;e=e.sibling}return null}var jv=Dr.unstable_scheduleCallback,B1=Dr.unstable_cancelCallback,QC=Dr.unstable_shouldYield,ZC=Dr.unstable_requestPaint,gn=Dr.unstable_now,JC=Dr.unstable_getCurrentPriorityLevel,Um=Dr.unstable_ImmediatePriority,kv=Dr.unstable_UserBlockingPriority,xd=Dr.unstable_NormalPriority,e3=Dr.unstable_LowPriority,Rv=Dr.unstable_IdlePriority,nh=null,Vs=null;function t3(e){if(Vs&&typeof Vs.onCommitFiberRoot=="function")try{Vs.onCommitFiberRoot(nh,e,void 0,(e.current.flags&128)===128)}catch{}}var ps=Math.clz32?Math.clz32:s3,n3=Math.log,r3=Math.LN2;function s3(e){return e>>>=0,e===0?32:31-(n3(e)/r3|0)|0}var Su=64,_u=4194304;function ec(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function yd(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,l=e.pingedLanes,h=n&268435455;if(h!==0){var g=h&~a;g!==0?r=ec(g):(l&=h,l!==0&&(r=ec(l)))}else h=n&~a,h!==0?r=ec(h):l!==0&&(r=ec(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&a)&&(a=r&-r,l=t&-t,a>=l||a===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-ps(t),a=1<<n,r|=e[n],t&=~a;return r}function i3(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function a3(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,l=e.pendingLanes;0<l;){var h=31-ps(l),g=1<<h,y=a[h];y===-1?(!(g&n)||g&r)&&(a[h]=i3(g,t)):y<=t&&(e.expiredLanes|=g),l&=~g}}function d0(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Mv(){var e=Su;return Su<<=1,!(Su&4194240)&&(Su=64),e}function Yh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Qc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ps(t),e[t]=n}function o3(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-ps(n),l=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~l}}function Vm(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ps(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Dt=0;function Dv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Ov,zm,Pv,Lv,Bv,h0=!1,Au=[],Hi=null,Wi=null,Gi=null,Sc=new Map,_c=new Map,Li=[],l3="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function F1(e,t){switch(e){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Wi=null;break;case"mouseover":case"mouseout":Gi=null;break;case"pointerover":case"pointerout":Sc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_c.delete(t.pointerId)}}function $l(e,t,n,r,a,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[a]},t!==null&&(t=Jc(t),t!==null&&zm(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function c3(e,t,n,r,a){switch(t){case"focusin":return Hi=$l(Hi,e,t,n,r,a),!0;case"dragenter":return Wi=$l(Wi,e,t,n,r,a),!0;case"mouseover":return Gi=$l(Gi,e,t,n,r,a),!0;case"pointerover":var l=a.pointerId;return Sc.set(l,$l(Sc.get(l)||null,e,t,n,r,a)),!0;case"gotpointercapture":return l=a.pointerId,_c.set(l,$l(_c.get(l)||null,e,t,n,r,a)),!0}return!1}function Fv(e){var t=Ma(e.target);if(t!==null){var n=Qa(t);if(n!==null){if(t=n.tag,t===13){if(t=Av(n),t!==null){e.blockedOn=t,Bv(e.priority,function(){Pv(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Qu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=f0(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);o0=r,n.target.dispatchEvent(r),o0=null}else return t=Jc(n),t!==null&&zm(t),e.blockedOn=n,!1;t.shift()}return!0}function U1(e,t,n){Qu(e)&&n.delete(t)}function u3(){h0=!1,Hi!==null&&Qu(Hi)&&(Hi=null),Wi!==null&&Qu(Wi)&&(Wi=null),Gi!==null&&Qu(Gi)&&(Gi=null),Sc.forEach(U1),_c.forEach(U1)}function Hl(e,t){e.blockedOn===t&&(e.blockedOn=null,h0||(h0=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,u3)))}function Ac(e){function t(a){return Hl(a,e)}if(0<Au.length){Hl(Au[0],e);for(var n=1;n<Au.length;n++){var r=Au[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Hi!==null&&Hl(Hi,e),Wi!==null&&Hl(Wi,e),Gi!==null&&Hl(Gi,e),Sc.forEach(t),_c.forEach(t),n=0;n<Li.length;n++)r=Li[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Li.length&&(n=Li[0],n.blockedOn===null);)Fv(n),n.blockedOn===null&&Li.shift()}var Yo=wi.ReactCurrentBatchConfig,vd=!0;function d3(e,t,n,r){var a=Dt,l=Yo.transition;Yo.transition=null;try{Dt=1,$m(e,t,n,r)}finally{Dt=a,Yo.transition=l}}function h3(e,t,n,r){var a=Dt,l=Yo.transition;Yo.transition=null;try{Dt=4,$m(e,t,n,r)}finally{Dt=a,Yo.transition=l}}function $m(e,t,n,r){if(vd){var a=f0(e,t,n,r);if(a===null)af(e,t,r,wd,n),F1(e,r);else if(c3(a,e,t,n,r))r.stopPropagation();else if(F1(e,r),t&4&&-1<l3.indexOf(e)){for(;a!==null;){var l=Jc(a);if(l!==null&&Ov(l),l=f0(e,t,n,r),l===null&&af(e,t,r,wd,n),l===a)break;a=l}a!==null&&r.stopPropagation()}else af(e,t,r,null,n)}}var wd=null;function f0(e,t,n,r){if(wd=null,e=Fm(r),e=Ma(e),e!==null)if(t=Qa(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Av(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return wd=e,null}function Uv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(JC()){case Um:return 1;case kv:return 4;case xd:case e3:return 16;case Rv:return 536870912;default:return 16}default:return 16}}var Vi=null,Hm=null,Zu=null;function Vv(){if(Zu)return Zu;var e,t=Hm,n=t.length,r,a="value"in Vi?Vi.value:Vi.textContent,l=a.length;for(e=0;e<n&&t[e]===a[e];e++);var h=n-e;for(r=1;r<=h&&t[n-r]===a[l-r];r++);return Zu=a.slice(e,1<r?1-r:void 0)}function Ju(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Tu(){return!0}function V1(){return!1}function Pr(e){function t(n,r,a,l,h){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(n=e[g],this[g]=n?n(l):l[g]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Tu:V1,this.isPropagationStopped=V1,this}return nn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Tu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Tu)},persist:function(){},isPersistent:Tu}),t}var pl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Wm=Pr(pl),Zc=nn({},pl,{view:0,detail:0}),f3=Pr(Zc),Xh,Qh,Wl,rh=nn({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gm,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Wl&&(Wl&&e.type==="mousemove"?(Xh=e.screenX-Wl.screenX,Qh=e.screenY-Wl.screenY):Qh=Xh=0,Wl=e),Xh)},movementY:function(e){return"movementY"in e?e.movementY:Qh}}),z1=Pr(rh),m3=nn({},rh,{dataTransfer:0}),g3=Pr(m3),p3=nn({},Zc,{relatedTarget:0}),Zh=Pr(p3),x3=nn({},pl,{animationName:0,elapsedTime:0,pseudoElement:0}),y3=Pr(x3),v3=nn({},pl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),w3=Pr(v3),b3=nn({},pl,{data:0}),$1=Pr(b3),E3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},C3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},N3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S3(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=N3[e])?!!t[e]:!1}function Gm(){return S3}var _3=nn({},Zc,{key:function(e){if(e.key){var t=E3[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ju(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?C3[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gm,charCode:function(e){return e.type==="keypress"?Ju(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ju(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),A3=Pr(_3),T3=nn({},rh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),H1=Pr(T3),I3=nn({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gm}),j3=Pr(I3),k3=nn({},pl,{propertyName:0,elapsedTime:0,pseudoElement:0}),R3=Pr(k3),M3=nn({},rh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),D3=Pr(M3),O3=[9,13,27,32],qm=hi&&"CompositionEvent"in window,ac=null;hi&&"documentMode"in document&&(ac=document.documentMode);var P3=hi&&"TextEvent"in window&&!ac,zv=hi&&(!qm||ac&&8<ac&&11>=ac),W1=" ",G1=!1;function $v(e,t){switch(e){case"keyup":return O3.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Hv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Io=!1;function L3(e,t){switch(e){case"compositionend":return Hv(t);case"keypress":return t.which!==32?null:(G1=!0,W1);case"textInput":return e=t.data,e===W1&&G1?null:e;default:return null}}function B3(e,t){if(Io)return e==="compositionend"||!qm&&$v(e,t)?(e=Vv(),Zu=Hm=Vi=null,Io=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return zv&&t.locale!=="ko"?null:t.data;default:return null}}var F3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!F3[e.type]:t==="textarea"}function Wv(e,t,n,r){Ev(r),t=bd(t,"onChange"),0<t.length&&(n=new Wm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var oc=null,Tc=null;function U3(e){nw(e,0)}function sh(e){var t=Ro(e);if(gv(t))return e}function V3(e,t){if(e==="change")return t}var Gv=!1;if(hi){var Jh;if(hi){var ef="oninput"in document;if(!ef){var K1=document.createElement("div");K1.setAttribute("oninput","return;"),ef=typeof K1.oninput=="function"}Jh=ef}else Jh=!1;Gv=Jh&&(!document.documentMode||9<document.documentMode)}function Y1(){oc&&(oc.detachEvent("onpropertychange",qv),Tc=oc=null)}function qv(e){if(e.propertyName==="value"&&sh(Tc)){var t=[];Wv(t,Tc,e,Fm(e)),_v(U3,t)}}function z3(e,t,n){e==="focusin"?(Y1(),oc=t,Tc=n,oc.attachEvent("onpropertychange",qv)):e==="focusout"&&Y1()}function $3(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return sh(Tc)}function H3(e,t){if(e==="click")return sh(t)}function W3(e,t){if(e==="input"||e==="change")return sh(t)}function G3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bs=typeof Object.is=="function"?Object.is:G3;function Ic(e,t){if(bs(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Yf.call(t,a)||!bs(e[a],t[a]))return!1}return!0}function X1(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Q1(e,t){var n=X1(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=X1(n)}}function Kv(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Kv(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Yv(){for(var e=window,t=md();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=md(e.document)}return t}function Km(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function q3(e){var t=Yv(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Kv(n.ownerDocument.documentElement,n)){if(r!==null&&Km(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,l=Math.min(r.start,a);r=r.end===void 0?l:Math.min(r.end,a),!e.extend&&l>r&&(a=r,r=l,l=a),a=Q1(n,l);var h=Q1(n,r);a&&h&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==h.node||e.focusOffset!==h.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(h.node,h.offset)):(t.setEnd(h.node,h.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var K3=hi&&"documentMode"in document&&11>=document.documentMode,jo=null,m0=null,lc=null,g0=!1;function Z1(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;g0||jo==null||jo!==md(r)||(r=jo,"selectionStart"in r&&Km(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),lc&&Ic(lc,r)||(lc=r,r=bd(m0,"onSelect"),0<r.length&&(t=new Wm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=jo)))}function Iu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ko={animationend:Iu("Animation","AnimationEnd"),animationiteration:Iu("Animation","AnimationIteration"),animationstart:Iu("Animation","AnimationStart"),transitionend:Iu("Transition","TransitionEnd")},tf={},Xv={};hi&&(Xv=document.createElement("div").style,"AnimationEvent"in window||(delete ko.animationend.animation,delete ko.animationiteration.animation,delete ko.animationstart.animation),"TransitionEvent"in window||delete ko.transitionend.transition);function ih(e){if(tf[e])return tf[e];if(!ko[e])return e;var t=ko[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Xv)return tf[e]=t[n];return e}var Qv=ih("animationend"),Zv=ih("animationiteration"),Jv=ih("animationstart"),ew=ih("transitionend"),tw=new Map,J1="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ia(e,t){tw.set(e,t),Xa(t,[e])}for(var nf=0;nf<J1.length;nf++){var rf=J1[nf],Y3=rf.toLowerCase(),X3=rf[0].toUpperCase()+rf.slice(1);ia(Y3,"on"+X3)}ia(Qv,"onAnimationEnd");ia(Zv,"onAnimationIteration");ia(Jv,"onAnimationStart");ia("dblclick","onDoubleClick");ia("focusin","onFocus");ia("focusout","onBlur");ia(ew,"onTransitionEnd");Zo("onMouseEnter",["mouseout","mouseover"]);Zo("onMouseLeave",["mouseout","mouseover"]);Zo("onPointerEnter",["pointerout","pointerover"]);Zo("onPointerLeave",["pointerout","pointerover"]);Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Q3=new Set("cancel close invalid load scroll toggle".split(" ").concat(tc));function ep(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,YC(r,t,void 0,e),e.currentTarget=null}function nw(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var h=r.length-1;0<=h;h--){var g=r[h],y=g.instance,x=g.currentTarget;if(g=g.listener,y!==l&&a.isPropagationStopped())break e;ep(a,g,x),l=y}else for(h=0;h<r.length;h++){if(g=r[h],y=g.instance,x=g.currentTarget,g=g.listener,y!==l&&a.isPropagationStopped())break e;ep(a,g,x),l=y}}}if(pd)throw e=u0,pd=!1,u0=null,e}function Wt(e,t){var n=t[w0];n===void 0&&(n=t[w0]=new Set);var r=e+"__bubble";n.has(r)||(rw(t,e,2,!1),n.add(r))}function sf(e,t,n){var r=0;t&&(r|=4),rw(n,e,r,t)}var ju="_reactListening"+Math.random().toString(36).slice(2);function jc(e){if(!e[ju]){e[ju]=!0,uv.forEach(function(n){n!=="selectionchange"&&(Q3.has(n)||sf(n,!1,e),sf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ju]||(t[ju]=!0,sf("selectionchange",!1,t))}}function rw(e,t,n,r){switch(Uv(t)){case 1:var a=d3;break;case 4:a=h3;break;default:a=$m}n=a.bind(null,t,n,e),a=void 0,!c0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function af(e,t,n,r,a){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var h=r.tag;if(h===3||h===4){var g=r.stateNode.containerInfo;if(g===a||g.nodeType===8&&g.parentNode===a)break;if(h===4)for(h=r.return;h!==null;){var y=h.tag;if((y===3||y===4)&&(y=h.stateNode.containerInfo,y===a||y.nodeType===8&&y.parentNode===a))return;h=h.return}for(;g!==null;){if(h=Ma(g),h===null)return;if(y=h.tag,y===5||y===6){r=l=h;continue e}g=g.parentNode}}r=r.return}_v(function(){var x=l,w=Fm(n),E=[];e:{var N=tw.get(e);if(N!==void 0){var I=Wm,D=e;switch(e){case"keypress":if(Ju(n)===0)break e;case"keydown":case"keyup":I=A3;break;case"focusin":D="focus",I=Zh;break;case"focusout":D="blur",I=Zh;break;case"beforeblur":case"afterblur":I=Zh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":I=z1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":I=g3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":I=j3;break;case Qv:case Zv:case Jv:I=y3;break;case ew:I=R3;break;case"scroll":I=f3;break;case"wheel":I=D3;break;case"copy":case"cut":case"paste":I=w3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":I=H1}var O=(t&4)!==0,V=!O&&e==="scroll",T=O?N!==null?N+"Capture":null:N;O=[];for(var A=x,_;A!==null;){_=A;var M=_.stateNode;if(_.tag===5&&M!==null&&(_=M,T!==null&&(M=Nc(A,T),M!=null&&O.push(kc(A,M,_)))),V)break;A=A.return}0<O.length&&(N=new I(N,D,null,n,w),E.push({event:N,listeners:O}))}}if(!(t&7)){e:{if(N=e==="mouseover"||e==="pointerover",I=e==="mouseout"||e==="pointerout",N&&n!==o0&&(D=n.relatedTarget||n.fromElement)&&(Ma(D)||D[fi]))break e;if((I||N)&&(N=w.window===w?w:(N=w.ownerDocument)?N.defaultView||N.parentWindow:window,I?(D=n.relatedTarget||n.toElement,I=x,D=D?Ma(D):null,D!==null&&(V=Qa(D),D!==V||D.tag!==5&&D.tag!==6)&&(D=null)):(I=null,D=x),I!==D)){if(O=z1,M="onMouseLeave",T="onMouseEnter",A="mouse",(e==="pointerout"||e==="pointerover")&&(O=H1,M="onPointerLeave",T="onPointerEnter",A="pointer"),V=I==null?N:Ro(I),_=D==null?N:Ro(D),N=new O(M,A+"leave",I,n,w),N.target=V,N.relatedTarget=_,M=null,Ma(w)===x&&(O=new O(T,A+"enter",D,n,w),O.target=_,O.relatedTarget=V,M=O),V=M,I&&D)t:{for(O=I,T=D,A=0,_=O;_;_=yo(_))A++;for(_=0,M=T;M;M=yo(M))_++;for(;0<A-_;)O=yo(O),A--;for(;0<_-A;)T=yo(T),_--;for(;A--;){if(O===T||T!==null&&O===T.alternate)break t;O=yo(O),T=yo(T)}O=null}else O=null;I!==null&&tp(E,N,I,O,!1),D!==null&&V!==null&&tp(E,V,D,O,!0)}}e:{if(N=x?Ro(x):window,I=N.nodeName&&N.nodeName.toLowerCase(),I==="select"||I==="input"&&N.type==="file")var H=V3;else if(q1(N))if(Gv)H=W3;else{H=$3;var $=z3}else(I=N.nodeName)&&I.toLowerCase()==="input"&&(N.type==="checkbox"||N.type==="radio")&&(H=H3);if(H&&(H=H(e,x))){Wv(E,H,n,w);break e}$&&$(e,N,x),e==="focusout"&&($=N._wrapperState)&&$.controlled&&N.type==="number"&&n0(N,"number",N.value)}switch($=x?Ro(x):window,e){case"focusin":(q1($)||$.contentEditable==="true")&&(jo=$,m0=x,lc=null);break;case"focusout":lc=m0=jo=null;break;case"mousedown":g0=!0;break;case"contextmenu":case"mouseup":case"dragend":g0=!1,Z1(E,n,w);break;case"selectionchange":if(K3)break;case"keydown":case"keyup":Z1(E,n,w)}var F;if(qm)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else Io?$v(e,n)&&(U="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(U="onCompositionStart");U&&(zv&&n.locale!=="ko"&&(Io||U!=="onCompositionStart"?U==="onCompositionEnd"&&Io&&(F=Vv()):(Vi=w,Hm="value"in Vi?Vi.value:Vi.textContent,Io=!0)),$=bd(x,U),0<$.length&&(U=new $1(U,e,null,n,w),E.push({event:U,listeners:$}),F?U.data=F:(F=Hv(n),F!==null&&(U.data=F)))),(F=P3?L3(e,n):B3(e,n))&&(x=bd(x,"onBeforeInput"),0<x.length&&(w=new $1("onBeforeInput","beforeinput",null,n,w),E.push({event:w,listeners:x}),w.data=F))}nw(E,t)})}function kc(e,t,n){return{instance:e,listener:t,currentTarget:n}}function bd(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=Nc(e,n),l!=null&&r.unshift(kc(e,l,a)),l=Nc(e,t),l!=null&&r.push(kc(e,l,a))),e=e.return}return r}function yo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function tp(e,t,n,r,a){for(var l=t._reactName,h=[];n!==null&&n!==r;){var g=n,y=g.alternate,x=g.stateNode;if(y!==null&&y===r)break;g.tag===5&&x!==null&&(g=x,a?(y=Nc(n,l),y!=null&&h.unshift(kc(n,y,g))):a||(y=Nc(n,l),y!=null&&h.push(kc(n,y,g)))),n=n.return}h.length!==0&&e.push({event:t,listeners:h})}var Z3=/\r\n?/g,J3=/\u0000|\uFFFD/g;function np(e){return(typeof e=="string"?e:""+e).replace(Z3,`
`).replace(J3,"")}function ku(e,t,n){if(t=np(t),np(e)!==t&&n)throw Error(Se(425))}function Ed(){}var p0=null,x0=null;function y0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var v0=typeof setTimeout=="function"?setTimeout:void 0,eN=typeof clearTimeout=="function"?clearTimeout:void 0,rp=typeof Promise=="function"?Promise:void 0,tN=typeof queueMicrotask=="function"?queueMicrotask:typeof rp<"u"?function(e){return rp.resolve(null).then(e).catch(nN)}:v0;function nN(e){setTimeout(function(){throw e})}function of(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Ac(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Ac(t)}function qi(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var xl=Math.random().toString(36).slice(2),Bs="__reactFiber$"+xl,Rc="__reactProps$"+xl,fi="__reactContainer$"+xl,w0="__reactEvents$"+xl,rN="__reactListeners$"+xl,sN="__reactHandles$"+xl;function Ma(e){var t=e[Bs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fi]||n[Bs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sp(e);e!==null;){if(n=e[Bs])return n;e=sp(e)}return t}e=n,n=e.parentNode}return null}function Jc(e){return e=e[Bs]||e[fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Ro(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Se(33))}function ah(e){return e[Rc]||null}var b0=[],Mo=-1;function aa(e){return{current:e}}function qt(e){0>Mo||(e.current=b0[Mo],b0[Mo]=null,Mo--)}function zt(e,t){Mo++,b0[Mo]=e.current,e.current=t}var ea={},Kn=aa(ea),yr=aa(!1),Wa=ea;function Jo(e,t){var n=e.type.contextTypes;if(!n)return ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function vr(e){return e=e.childContextTypes,e!=null}function Cd(){qt(yr),qt(Kn)}function ip(e,t,n){if(Kn.current!==ea)throw Error(Se(168));zt(Kn,t),zt(yr,n)}function sw(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(Se(108,zC(e)||"Unknown",a));return nn({},n,r)}function Nd(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ea,Wa=Kn.current,zt(Kn,e),zt(yr,yr.current),!0}function ap(e,t,n){var r=e.stateNode;if(!r)throw Error(Se(169));n?(e=sw(e,t,Wa),r.__reactInternalMemoizedMergedChildContext=e,qt(yr),qt(Kn),zt(Kn,e)):qt(yr),zt(yr,n)}var ai=null,oh=!1,lf=!1;function iw(e){ai===null?ai=[e]:ai.push(e)}function iN(e){oh=!0,iw(e)}function oa(){if(!lf&&ai!==null){lf=!0;var e=0,t=Dt;try{var n=ai;for(Dt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ai=null,oh=!1}catch(a){throw ai!==null&&(ai=ai.slice(e+1)),jv(Um,oa),a}finally{Dt=t,lf=!1}}return null}var Do=[],Oo=0,Sd=null,_d=0,Yr=[],Xr=0,Ga=null,oi=1,li="";function Ta(e,t){Do[Oo++]=_d,Do[Oo++]=Sd,Sd=e,_d=t}function aw(e,t,n){Yr[Xr++]=oi,Yr[Xr++]=li,Yr[Xr++]=Ga,Ga=e;var r=oi;e=li;var a=32-ps(r)-1;r&=~(1<<a),n+=1;var l=32-ps(t)+a;if(30<l){var h=a-a%5;l=(r&(1<<h)-1).toString(32),r>>=h,a-=h,oi=1<<32-ps(t)+a|n<<a|r,li=l+e}else oi=1<<l|n<<a|r,li=e}function Ym(e){e.return!==null&&(Ta(e,1),aw(e,1,0))}function Xm(e){for(;e===Sd;)Sd=Do[--Oo],Do[Oo]=null,_d=Do[--Oo],Do[Oo]=null;for(;e===Ga;)Ga=Yr[--Xr],Yr[Xr]=null,li=Yr[--Xr],Yr[Xr]=null,oi=Yr[--Xr],Yr[Xr]=null}var Mr=null,kr=null,Xt=!1,gs=null;function ow(e,t){var n=Qr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function op(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mr=e,kr=qi(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mr=e,kr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Ga!==null?{id:oi,overflow:li}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Qr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mr=e,kr=null,!0):!1;default:return!1}}function E0(e){return(e.mode&1)!==0&&(e.flags&128)===0}function C0(e){if(Xt){var t=kr;if(t){var n=t;if(!op(e,t)){if(E0(e))throw Error(Se(418));t=qi(n.nextSibling);var r=Mr;t&&op(e,t)?ow(r,n):(e.flags=e.flags&-4097|2,Xt=!1,Mr=e)}}else{if(E0(e))throw Error(Se(418));e.flags=e.flags&-4097|2,Xt=!1,Mr=e}}}function lp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mr=e}function Ru(e){if(e!==Mr)return!1;if(!Xt)return lp(e),Xt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!y0(e.type,e.memoizedProps)),t&&(t=kr)){if(E0(e))throw lw(),Error(Se(418));for(;t;)ow(e,t),t=qi(t.nextSibling)}if(lp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Se(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){kr=qi(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}kr=null}}else kr=Mr?qi(e.stateNode.nextSibling):null;return!0}function lw(){for(var e=kr;e;)e=qi(e.nextSibling)}function el(){kr=Mr=null,Xt=!1}function Qm(e){gs===null?gs=[e]:gs.push(e)}var aN=wi.ReactCurrentBatchConfig;function ds(e,t){if(e&&e.defaultProps){t=nn({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Ad=aa(null),Td=null,Po=null,Zm=null;function Jm(){Zm=Po=Td=null}function eg(e){var t=Ad.current;qt(Ad),e._currentValue=t}function N0(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Xo(e,t){Td=e,Zm=Po=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(gr=!0),e.firstContext=null)}function es(e){var t=e._currentValue;if(Zm!==e)if(e={context:e,memoizedValue:t,next:null},Po===null){if(Td===null)throw Error(Se(308));Po=e,Td.dependencies={lanes:0,firstContext:e}}else Po=Po.next=e;return t}var Da=null;function tg(e){Da===null?Da=[e]:Da.push(e)}function cw(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,tg(t)):(n.next=a.next,a.next=n),t.interleaved=n,mi(e,r)}function mi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Oi=!1;function ng(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uw(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ui(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ki(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,mi(e,n)}return a=r.interleaved,a===null?(t.next=t,tg(r)):(t.next=a.next,a.next=t),r.interleaved=t,mi(e,n)}function ed(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vm(e,n)}}function cp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=h:l=l.next=h,n=n.next}while(n!==null);l===null?a=l=t:l=l.next=t}else a=l=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Id(e,t,n,r){var a=e.updateQueue;Oi=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,g=a.shared.pending;if(g!==null){a.shared.pending=null;var y=g,x=y.next;y.next=null,h===null?l=x:h.next=x,h=y;var w=e.alternate;w!==null&&(w=w.updateQueue,g=w.lastBaseUpdate,g!==h&&(g===null?w.firstBaseUpdate=x:g.next=x,w.lastBaseUpdate=y))}if(l!==null){var E=a.baseState;h=0,w=x=y=null,g=l;do{var N=g.lane,I=g.eventTime;if((r&N)===N){w!==null&&(w=w.next={eventTime:I,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var D=e,O=g;switch(N=t,I=n,O.tag){case 1:if(D=O.payload,typeof D=="function"){E=D.call(I,E,N);break e}E=D;break e;case 3:D.flags=D.flags&-65537|128;case 0:if(D=O.payload,N=typeof D=="function"?D.call(I,E,N):D,N==null)break e;E=nn({},E,N);break e;case 2:Oi=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,N=a.effects,N===null?a.effects=[g]:N.push(g))}else I={eventTime:I,lane:N,tag:g.tag,payload:g.payload,callback:g.callback,next:null},w===null?(x=w=I,y=E):w=w.next=I,h|=N;if(g=g.next,g===null){if(g=a.shared.pending,g===null)break;N=g,g=N.next,N.next=null,a.lastBaseUpdate=N,a.shared.pending=null}}while(!0);if(w===null&&(y=E),a.baseState=y,a.firstBaseUpdate=x,a.lastBaseUpdate=w,t=a.shared.interleaved,t!==null){a=t;do h|=a.lane,a=a.next;while(a!==t)}else l===null&&(a.shared.lanes=0);Ka|=h,e.lanes=h,e.memoizedState=E}}function up(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(Se(191,a));a.call(r)}}}var dw=new cv.Component().refs;function S0(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:nn({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var lh={isMounted:function(e){return(e=e._reactInternals)?Qa(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=sr(),a=Xi(e),l=ui(r,a);l.payload=t,n!=null&&(l.callback=n),t=Ki(e,l,a),t!==null&&(xs(t,e,a,r),ed(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=sr(),a=Xi(e),l=ui(r,a);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=Ki(e,l,a),t!==null&&(xs(t,e,a,r),ed(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=sr(),r=Xi(e),a=ui(n,r);a.tag=2,t!=null&&(a.callback=t),t=Ki(e,a,r),t!==null&&(xs(t,e,r,n),ed(t,e,r))}};function dp(e,t,n,r,a,l,h){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,h):t.prototype&&t.prototype.isPureReactComponent?!Ic(n,r)||!Ic(a,l):!0}function hw(e,t,n){var r=!1,a=ea,l=t.contextType;return typeof l=="object"&&l!==null?l=es(l):(a=vr(t)?Wa:Kn.current,r=t.contextTypes,l=(r=r!=null)?Jo(e,a):ea),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=lh,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=l),t}function hp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&lh.enqueueReplaceState(t,t.state,null)}function _0(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=dw,ng(e);var l=t.contextType;typeof l=="object"&&l!==null?a.context=es(l):(l=vr(t)?Wa:Kn.current,a.context=Jo(e,l)),a.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(S0(e,t,l,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&lh.enqueueReplaceState(a,a.state,null),Id(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Gl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Se(309));var r=n.stateNode}if(!r)throw Error(Se(147,e));var a=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(h){var g=a.refs;g===dw&&(g=a.refs={}),h===null?delete g[l]:g[l]=h},t._stringRef=l,t)}if(typeof e!="string")throw Error(Se(284));if(!n._owner)throw Error(Se(290,e))}return e}function Mu(e,t){throw e=Object.prototype.toString.call(t),Error(Se(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fp(e){var t=e._init;return t(e._payload)}function fw(e){function t(T,A){if(e){var _=T.deletions;_===null?(T.deletions=[A],T.flags|=16):_.push(A)}}function n(T,A){if(!e)return null;for(;A!==null;)t(T,A),A=A.sibling;return null}function r(T,A){for(T=new Map;A!==null;)A.key!==null?T.set(A.key,A):T.set(A.index,A),A=A.sibling;return T}function a(T,A){return T=Qi(T,A),T.index=0,T.sibling=null,T}function l(T,A,_){return T.index=_,e?(_=T.alternate,_!==null?(_=_.index,_<A?(T.flags|=2,A):_):(T.flags|=2,A)):(T.flags|=1048576,A)}function h(T){return e&&T.alternate===null&&(T.flags|=2),T}function g(T,A,_,M){return A===null||A.tag!==6?(A=gf(_,T.mode,M),A.return=T,A):(A=a(A,_),A.return=T,A)}function y(T,A,_,M){var H=_.type;return H===To?w(T,A,_.props.children,M,_.key):A!==null&&(A.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Di&&fp(H)===A.type)?(M=a(A,_.props),M.ref=Gl(T,A,_),M.return=T,M):(M=ad(_.type,_.key,_.props,null,T.mode,M),M.ref=Gl(T,A,_),M.return=T,M)}function x(T,A,_,M){return A===null||A.tag!==4||A.stateNode.containerInfo!==_.containerInfo||A.stateNode.implementation!==_.implementation?(A=pf(_,T.mode,M),A.return=T,A):(A=a(A,_.children||[]),A.return=T,A)}function w(T,A,_,M,H){return A===null||A.tag!==7?(A=za(_,T.mode,M,H),A.return=T,A):(A=a(A,_),A.return=T,A)}function E(T,A,_){if(typeof A=="string"&&A!==""||typeof A=="number")return A=gf(""+A,T.mode,_),A.return=T,A;if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Eu:return _=ad(A.type,A.key,A.props,null,T.mode,_),_.ref=Gl(T,null,A),_.return=T,_;case Ao:return A=pf(A,T.mode,_),A.return=T,A;case Di:var M=A._init;return E(T,M(A._payload),_)}if(Jl(A)||Vl(A))return A=za(A,T.mode,_,null),A.return=T,A;Mu(T,A)}return null}function N(T,A,_,M){var H=A!==null?A.key:null;if(typeof _=="string"&&_!==""||typeof _=="number")return H!==null?null:g(T,A,""+_,M);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Eu:return _.key===H?y(T,A,_,M):null;case Ao:return _.key===H?x(T,A,_,M):null;case Di:return H=_._init,N(T,A,H(_._payload),M)}if(Jl(_)||Vl(_))return H!==null?null:w(T,A,_,M,null);Mu(T,_)}return null}function I(T,A,_,M,H){if(typeof M=="string"&&M!==""||typeof M=="number")return T=T.get(_)||null,g(A,T,""+M,H);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case Eu:return T=T.get(M.key===null?_:M.key)||null,y(A,T,M,H);case Ao:return T=T.get(M.key===null?_:M.key)||null,x(A,T,M,H);case Di:var $=M._init;return I(T,A,_,$(M._payload),H)}if(Jl(M)||Vl(M))return T=T.get(_)||null,w(A,T,M,H,null);Mu(A,M)}return null}function D(T,A,_,M){for(var H=null,$=null,F=A,U=A=0,q=null;F!==null&&U<_.length;U++){F.index>U?(q=F,F=null):q=F.sibling;var ne=N(T,F,_[U],M);if(ne===null){F===null&&(F=q);break}e&&F&&ne.alternate===null&&t(T,F),A=l(ne,A,U),$===null?H=ne:$.sibling=ne,$=ne,F=q}if(U===_.length)return n(T,F),Xt&&Ta(T,U),H;if(F===null){for(;U<_.length;U++)F=E(T,_[U],M),F!==null&&(A=l(F,A,U),$===null?H=F:$.sibling=F,$=F);return Xt&&Ta(T,U),H}for(F=r(T,F);U<_.length;U++)q=I(F,T,U,_[U],M),q!==null&&(e&&q.alternate!==null&&F.delete(q.key===null?U:q.key),A=l(q,A,U),$===null?H=q:$.sibling=q,$=q);return e&&F.forEach(function(he){return t(T,he)}),Xt&&Ta(T,U),H}function O(T,A,_,M){var H=Vl(_);if(typeof H!="function")throw Error(Se(150));if(_=H.call(_),_==null)throw Error(Se(151));for(var $=H=null,F=A,U=A=0,q=null,ne=_.next();F!==null&&!ne.done;U++,ne=_.next()){F.index>U?(q=F,F=null):q=F.sibling;var he=N(T,F,ne.value,M);if(he===null){F===null&&(F=q);break}e&&F&&he.alternate===null&&t(T,F),A=l(he,A,U),$===null?H=he:$.sibling=he,$=he,F=q}if(ne.done)return n(T,F),Xt&&Ta(T,U),H;if(F===null){for(;!ne.done;U++,ne=_.next())ne=E(T,ne.value,M),ne!==null&&(A=l(ne,A,U),$===null?H=ne:$.sibling=ne,$=ne);return Xt&&Ta(T,U),H}for(F=r(T,F);!ne.done;U++,ne=_.next())ne=I(F,T,U,ne.value,M),ne!==null&&(e&&ne.alternate!==null&&F.delete(ne.key===null?U:ne.key),A=l(ne,A,U),$===null?H=ne:$.sibling=ne,$=ne);return e&&F.forEach(function(me){return t(T,me)}),Xt&&Ta(T,U),H}function V(T,A,_,M){if(typeof _=="object"&&_!==null&&_.type===To&&_.key===null&&(_=_.props.children),typeof _=="object"&&_!==null){switch(_.$$typeof){case Eu:e:{for(var H=_.key,$=A;$!==null;){if($.key===H){if(H=_.type,H===To){if($.tag===7){n(T,$.sibling),A=a($,_.props.children),A.return=T,T=A;break e}}else if($.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===Di&&fp(H)===$.type){n(T,$.sibling),A=a($,_.props),A.ref=Gl(T,$,_),A.return=T,T=A;break e}n(T,$);break}else t(T,$);$=$.sibling}_.type===To?(A=za(_.props.children,T.mode,M,_.key),A.return=T,T=A):(M=ad(_.type,_.key,_.props,null,T.mode,M),M.ref=Gl(T,A,_),M.return=T,T=M)}return h(T);case Ao:e:{for($=_.key;A!==null;){if(A.key===$)if(A.tag===4&&A.stateNode.containerInfo===_.containerInfo&&A.stateNode.implementation===_.implementation){n(T,A.sibling),A=a(A,_.children||[]),A.return=T,T=A;break e}else{n(T,A);break}else t(T,A);A=A.sibling}A=pf(_,T.mode,M),A.return=T,T=A}return h(T);case Di:return $=_._init,V(T,A,$(_._payload),M)}if(Jl(_))return D(T,A,_,M);if(Vl(_))return O(T,A,_,M);Mu(T,_)}return typeof _=="string"&&_!==""||typeof _=="number"?(_=""+_,A!==null&&A.tag===6?(n(T,A.sibling),A=a(A,_),A.return=T,T=A):(n(T,A),A=gf(_,T.mode,M),A.return=T,T=A),h(T)):n(T,A)}return V}var tl=fw(!0),mw=fw(!1),eu={},zs=aa(eu),Mc=aa(eu),Dc=aa(eu);function Oa(e){if(e===eu)throw Error(Se(174));return e}function rg(e,t){switch(zt(Dc,t),zt(Mc,e),zt(zs,eu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:s0(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=s0(t,e)}qt(zs),zt(zs,t)}function nl(){qt(zs),qt(Mc),qt(Dc)}function gw(e){Oa(Dc.current);var t=Oa(zs.current),n=s0(t,e.type);t!==n&&(zt(Mc,e),zt(zs,n))}function sg(e){Mc.current===e&&(qt(zs),qt(Mc))}var Jt=aa(0);function jd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cf=[];function ig(){for(var e=0;e<cf.length;e++)cf[e]._workInProgressVersionPrimary=null;cf.length=0}var td=wi.ReactCurrentDispatcher,uf=wi.ReactCurrentBatchConfig,qa=0,tn=null,Nn=null,kn=null,kd=!1,cc=!1,Oc=0,oN=0;function $n(){throw Error(Se(321))}function ag(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!bs(e[n],t[n]))return!1;return!0}function og(e,t,n,r,a,l){if(qa=l,tn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,td.current=e===null||e.memoizedState===null?dN:hN,e=n(r,a),cc){l=0;do{if(cc=!1,Oc=0,25<=l)throw Error(Se(301));l+=1,kn=Nn=null,t.updateQueue=null,td.current=fN,e=n(r,a)}while(cc)}if(td.current=Rd,t=Nn!==null&&Nn.next!==null,qa=0,kn=Nn=tn=null,kd=!1,t)throw Error(Se(300));return e}function lg(){var e=Oc!==0;return Oc=0,e}function Ps(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kn===null?tn.memoizedState=kn=e:kn=kn.next=e,kn}function ts(){if(Nn===null){var e=tn.alternate;e=e!==null?e.memoizedState:null}else e=Nn.next;var t=kn===null?tn.memoizedState:kn.next;if(t!==null)kn=t,Nn=e;else{if(e===null)throw Error(Se(310));Nn=e,e={memoizedState:Nn.memoizedState,baseState:Nn.baseState,baseQueue:Nn.baseQueue,queue:Nn.queue,next:null},kn===null?tn.memoizedState=kn=e:kn=kn.next=e}return kn}function Pc(e,t){return typeof t=="function"?t(e):t}function df(e){var t=ts(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=Nn,a=r.baseQueue,l=n.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}r.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,r=r.baseState;var g=h=null,y=null,x=l;do{var w=x.lane;if((qa&w)===w)y!==null&&(y=y.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),r=x.hasEagerState?x.eagerState:e(r,x.action);else{var E={lane:w,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};y===null?(g=y=E,h=r):y=y.next=E,tn.lanes|=w,Ka|=w}x=x.next}while(x!==null&&x!==l);y===null?h=r:y.next=g,bs(r,t.memoizedState)||(gr=!0),t.memoizedState=r,t.baseState=h,t.baseQueue=y,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do l=a.lane,tn.lanes|=l,Ka|=l,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function hf(e){var t=ts(),n=t.queue;if(n===null)throw Error(Se(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,l=t.memoizedState;if(a!==null){n.pending=null;var h=a=a.next;do l=e(l,h.action),h=h.next;while(h!==a);bs(l,t.memoizedState)||(gr=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function pw(){}function xw(e,t){var n=tn,r=ts(),a=t(),l=!bs(r.memoizedState,a);if(l&&(r.memoizedState=a,gr=!0),r=r.queue,cg(ww.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||kn!==null&&kn.memoizedState.tag&1){if(n.flags|=2048,Lc(9,vw.bind(null,n,r,a,t),void 0,null),Rn===null)throw Error(Se(349));qa&30||yw(n,t,a)}return a}function yw(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function vw(e,t,n,r){t.value=n,t.getSnapshot=r,bw(t)&&Ew(e)}function ww(e,t,n){return n(function(){bw(t)&&Ew(e)})}function bw(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bs(e,n)}catch{return!0}}function Ew(e){var t=mi(e,1);t!==null&&xs(t,e,1,-1)}function mp(e){var t=Ps();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pc,lastRenderedState:e},t.queue=e,e=e.dispatch=uN.bind(null,tn,e),[t.memoizedState,e]}function Lc(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=tn.updateQueue,t===null?(t={lastEffect:null,stores:null},tn.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cw(){return ts().memoizedState}function nd(e,t,n,r){var a=Ps();tn.flags|=e,a.memoizedState=Lc(1|t,n,void 0,r===void 0?null:r)}function ch(e,t,n,r){var a=ts();r=r===void 0?null:r;var l=void 0;if(Nn!==null){var h=Nn.memoizedState;if(l=h.destroy,r!==null&&ag(r,h.deps)){a.memoizedState=Lc(t,n,l,r);return}}tn.flags|=e,a.memoizedState=Lc(1|t,n,l,r)}function gp(e,t){return nd(8390656,8,e,t)}function cg(e,t){return ch(2048,8,e,t)}function Nw(e,t){return ch(4,2,e,t)}function Sw(e,t){return ch(4,4,e,t)}function _w(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Aw(e,t,n){return n=n!=null?n.concat([e]):null,ch(4,4,_w.bind(null,t,e),n)}function ug(){}function Tw(e,t){var n=ts();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ag(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Iw(e,t){var n=ts();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ag(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function jw(e,t,n){return qa&21?(bs(n,t)||(n=Mv(),tn.lanes|=n,Ka|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,gr=!0),e.memoizedState=n)}function lN(e,t){var n=Dt;Dt=n!==0&&4>n?n:4,e(!0);var r=uf.transition;uf.transition={};try{e(!1),t()}finally{Dt=n,uf.transition=r}}function kw(){return ts().memoizedState}function cN(e,t,n){var r=Xi(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Rw(e))Mw(t,n);else if(n=cw(e,t,n,r),n!==null){var a=sr();xs(n,e,r,a),Dw(n,t,r)}}function uN(e,t,n){var r=Xi(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Rw(e))Mw(t,a);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var h=t.lastRenderedState,g=l(h,n);if(a.hasEagerState=!0,a.eagerState=g,bs(g,h)){var y=t.interleaved;y===null?(a.next=a,tg(t)):(a.next=y.next,y.next=a),t.interleaved=a;return}}catch{}finally{}n=cw(e,t,a,r),n!==null&&(a=sr(),xs(n,e,r,a),Dw(n,t,r))}}function Rw(e){var t=e.alternate;return e===tn||t!==null&&t===tn}function Mw(e,t){cc=kd=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Dw(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Vm(e,n)}}var Rd={readContext:es,useCallback:$n,useContext:$n,useEffect:$n,useImperativeHandle:$n,useInsertionEffect:$n,useLayoutEffect:$n,useMemo:$n,useReducer:$n,useRef:$n,useState:$n,useDebugValue:$n,useDeferredValue:$n,useTransition:$n,useMutableSource:$n,useSyncExternalStore:$n,useId:$n,unstable_isNewReconciler:!1},dN={readContext:es,useCallback:function(e,t){return Ps().memoizedState=[e,t===void 0?null:t],e},useContext:es,useEffect:gp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,nd(4194308,4,_w.bind(null,t,e),n)},useLayoutEffect:function(e,t){return nd(4194308,4,e,t)},useInsertionEffect:function(e,t){return nd(4,2,e,t)},useMemo:function(e,t){var n=Ps();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ps();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=cN.bind(null,tn,e),[r.memoizedState,e]},useRef:function(e){var t=Ps();return e={current:e},t.memoizedState=e},useState:mp,useDebugValue:ug,useDeferredValue:function(e){return Ps().memoizedState=e},useTransition:function(){var e=mp(!1),t=e[0];return e=lN.bind(null,e[1]),Ps().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=tn,a=Ps();if(Xt){if(n===void 0)throw Error(Se(407));n=n()}else{if(n=t(),Rn===null)throw Error(Se(349));qa&30||yw(r,t,n)}a.memoizedState=n;var l={value:n,getSnapshot:t};return a.queue=l,gp(ww.bind(null,r,l,e),[e]),r.flags|=2048,Lc(9,vw.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Ps(),t=Rn.identifierPrefix;if(Xt){var n=li,r=oi;n=(r&~(1<<32-ps(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Oc++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=oN++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hN={readContext:es,useCallback:Tw,useContext:es,useEffect:cg,useImperativeHandle:Aw,useInsertionEffect:Nw,useLayoutEffect:Sw,useMemo:Iw,useReducer:df,useRef:Cw,useState:function(){return df(Pc)},useDebugValue:ug,useDeferredValue:function(e){var t=ts();return jw(t,Nn.memoizedState,e)},useTransition:function(){var e=df(Pc)[0],t=ts().memoizedState;return[e,t]},useMutableSource:pw,useSyncExternalStore:xw,useId:kw,unstable_isNewReconciler:!1},fN={readContext:es,useCallback:Tw,useContext:es,useEffect:cg,useImperativeHandle:Aw,useInsertionEffect:Nw,useLayoutEffect:Sw,useMemo:Iw,useReducer:hf,useRef:Cw,useState:function(){return hf(Pc)},useDebugValue:ug,useDeferredValue:function(e){var t=ts();return Nn===null?t.memoizedState=e:jw(t,Nn.memoizedState,e)},useTransition:function(){var e=hf(Pc)[0],t=ts().memoizedState;return[e,t]},useMutableSource:pw,useSyncExternalStore:xw,useId:kw,unstable_isNewReconciler:!1};function rl(e,t){try{var n="",r=t;do n+=VC(r),r=r.return;while(r);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:a,digest:null}}function ff(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function A0(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var mN=typeof WeakMap=="function"?WeakMap:Map;function Ow(e,t,n){n=ui(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Dd||(Dd=!0,L0=r),A0(e,t)},n}function Pw(e,t,n){n=ui(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){A0(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){A0(e,t),typeof r!="function"&&(Yi===null?Yi=new Set([this]):Yi.add(this));var h=t.stack;this.componentDidCatch(t.value,{componentStack:h!==null?h:""})}),n}function pp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new mN;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=TN.bind(null,e,t,n),t.then(e,e))}function xp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function yp(e,t,n,r,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ui(-1,1),t.tag=2,Ki(n,t,1))),n.lanes|=1),e)}var gN=wi.ReactCurrentOwner,gr=!1;function tr(e,t,n,r){t.child=e===null?mw(t,null,n,r):tl(t,e.child,n,r)}function vp(e,t,n,r,a){n=n.render;var l=t.ref;return Xo(t,a),r=og(e,t,n,r,l,a),n=lg(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gi(e,t,a)):(Xt&&n&&Ym(t),t.flags|=1,tr(e,t,r,a),t.child)}function wp(e,t,n,r,a){if(e===null){var l=n.type;return typeof l=="function"&&!yg(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Lw(e,t,l,r,a)):(e=ad(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&a)){var h=l.memoizedProps;if(n=n.compare,n=n!==null?n:Ic,n(h,r)&&e.ref===t.ref)return gi(e,t,a)}return t.flags|=1,e=Qi(l,r),e.ref=t.ref,e.return=t,t.child=e}function Lw(e,t,n,r,a){if(e!==null){var l=e.memoizedProps;if(Ic(l,r)&&e.ref===t.ref)if(gr=!1,t.pendingProps=r=l,(e.lanes&a)!==0)e.flags&131072&&(gr=!0);else return t.lanes=e.lanes,gi(e,t,a)}return T0(e,t,n,r,a)}function Bw(e,t,n){var r=t.pendingProps,a=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},zt(Bo,Ir),Ir|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,zt(Bo,Ir),Ir|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,zt(Bo,Ir),Ir|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,zt(Bo,Ir),Ir|=r;return tr(e,t,a,n),t.child}function Fw(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function T0(e,t,n,r,a){var l=vr(n)?Wa:Kn.current;return l=Jo(t,l),Xo(t,a),n=og(e,t,n,r,l,a),r=lg(),e!==null&&!gr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,gi(e,t,a)):(Xt&&r&&Ym(t),t.flags|=1,tr(e,t,n,a),t.child)}function bp(e,t,n,r,a){if(vr(n)){var l=!0;Nd(t)}else l=!1;if(Xo(t,a),t.stateNode===null)rd(e,t),hw(t,n,r),_0(t,n,r,a),r=!0;else if(e===null){var h=t.stateNode,g=t.memoizedProps;h.props=g;var y=h.context,x=n.contextType;typeof x=="object"&&x!==null?x=es(x):(x=vr(n)?Wa:Kn.current,x=Jo(t,x));var w=n.getDerivedStateFromProps,E=typeof w=="function"||typeof h.getSnapshotBeforeUpdate=="function";E||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==r||y!==x)&&hp(t,h,r,x),Oi=!1;var N=t.memoizedState;h.state=N,Id(t,r,h,a),y=t.memoizedState,g!==r||N!==y||yr.current||Oi?(typeof w=="function"&&(S0(t,n,w,r),y=t.memoizedState),(g=Oi||dp(t,n,g,r,N,y,x))?(E||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(t.flags|=4194308)):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=y),h.props=r,h.state=y,h.context=x,r=g):(typeof h.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{h=t.stateNode,uw(e,t),g=t.memoizedProps,x=t.type===t.elementType?g:ds(t.type,g),h.props=x,E=t.pendingProps,N=h.context,y=n.contextType,typeof y=="object"&&y!==null?y=es(y):(y=vr(n)?Wa:Kn.current,y=Jo(t,y));var I=n.getDerivedStateFromProps;(w=typeof I=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(g!==E||N!==y)&&hp(t,h,r,y),Oi=!1,N=t.memoizedState,h.state=N,Id(t,r,h,a);var D=t.memoizedState;g!==E||N!==D||yr.current||Oi?(typeof I=="function"&&(S0(t,n,I,r),D=t.memoizedState),(x=Oi||dp(t,n,x,r,N,D,y)||!1)?(w||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(r,D,y),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(r,D,y)),typeof h.componentDidUpdate=="function"&&(t.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=D),h.props=r,h.state=D,h.context=y,r=x):(typeof h.componentDidUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&N===e.memoizedState||(t.flags|=1024),r=!1)}return I0(e,t,n,r,l,a)}function I0(e,t,n,r,a,l){Fw(e,t);var h=(t.flags&128)!==0;if(!r&&!h)return a&&ap(t,n,!1),gi(e,t,l);r=t.stateNode,gN.current=t;var g=h&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&h?(t.child=tl(t,e.child,null,l),t.child=tl(t,null,g,l)):tr(e,t,g,l),t.memoizedState=r.state,a&&ap(t,n,!0),t.child}function Uw(e){var t=e.stateNode;t.pendingContext?ip(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ip(e,t.context,!1),rg(e,t.containerInfo)}function Ep(e,t,n,r,a){return el(),Qm(a),t.flags|=256,tr(e,t,n,r),t.child}var j0={dehydrated:null,treeContext:null,retryLane:0};function k0(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vw(e,t,n){var r=t.pendingProps,a=Jt.current,l=!1,h=(t.flags&128)!==0,g;if((g=h)||(g=e!==null&&e.memoizedState===null?!1:(a&2)!==0),g?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),zt(Jt,a&1),e===null)return C0(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(h=r.children,e=r.fallback,l?(r=t.mode,l=t.child,h={mode:"hidden",children:h},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=hh(h,r,0,null),e=za(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=k0(n),t.memoizedState=j0,e):dg(t,h));if(a=e.memoizedState,a!==null&&(g=a.dehydrated,g!==null))return pN(e,t,h,r,g,a,n);if(l){l=r.fallback,h=t.mode,a=e.child,g=a.sibling;var y={mode:"hidden",children:r.children};return!(h&1)&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=y,t.deletions=null):(r=Qi(a,y),r.subtreeFlags=a.subtreeFlags&14680064),g!==null?l=Qi(g,l):(l=za(l,h,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,h=e.child.memoizedState,h=h===null?k0(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=e.childLanes&~n,t.memoizedState=j0,r}return l=e.child,e=l.sibling,r=Qi(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function dg(e,t){return t=hh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Du(e,t,n,r){return r!==null&&Qm(r),tl(t,e.child,null,n),e=dg(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pN(e,t,n,r,a,l,h){if(n)return t.flags&256?(t.flags&=-257,r=ff(Error(Se(422))),Du(e,t,h,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,a=t.mode,r=hh({mode:"visible",children:r.children},a,0,null),l=za(l,a,h,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&tl(t,e.child,null,h),t.child.memoizedState=k0(h),t.memoizedState=j0,l);if(!(t.mode&1))return Du(e,t,h,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var g=r.dgst;return r=g,l=Error(Se(419)),r=ff(l,r,void 0),Du(e,t,h,r)}if(g=(h&e.childLanes)!==0,gr||g){if(r=Rn,r!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(r.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,mi(e,a),xs(r,e,a,-1))}return xg(),r=ff(Error(Se(421))),Du(e,t,h,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=IN.bind(null,e),a._reactRetry=t,null):(e=l.treeContext,kr=qi(a.nextSibling),Mr=t,Xt=!0,gs=null,e!==null&&(Yr[Xr++]=oi,Yr[Xr++]=li,Yr[Xr++]=Ga,oi=e.id,li=e.overflow,Ga=t),t=dg(t,r.children),t.flags|=4096,t)}function Cp(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),N0(e.return,t,n)}function mf(e,t,n,r,a){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=a)}function zw(e,t,n){var r=t.pendingProps,a=r.revealOrder,l=r.tail;if(tr(e,t,r.children,n),r=Jt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Cp(e,n,t);else if(e.tag===19)Cp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(zt(Jt,r),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&jd(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),mf(t,!1,a,n,l);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&jd(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}mf(t,!0,n,null,l);break;case"together":mf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function rd(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function gi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Ka|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Se(153));if(t.child!==null){for(e=t.child,n=Qi(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Qi(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function xN(e,t,n){switch(t.tag){case 3:Uw(t),el();break;case 5:gw(t);break;case 1:vr(t.type)&&Nd(t);break;case 4:rg(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;zt(Ad,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(zt(Jt,Jt.current&1),t.flags|=128,null):n&t.child.childLanes?Vw(e,t,n):(zt(Jt,Jt.current&1),e=gi(e,t,n),e!==null?e.sibling:null);zt(Jt,Jt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return zw(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),zt(Jt,Jt.current),r)break;return null;case 22:case 23:return t.lanes=0,Bw(e,t,n)}return gi(e,t,n)}var $w,R0,Hw,Ww;$w=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};R0=function(){};Hw=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Oa(zs.current);var l=null;switch(n){case"input":a=e0(e,a),r=e0(e,r),l=[];break;case"select":a=nn({},a,{value:void 0}),r=nn({},r,{value:void 0}),l=[];break;case"textarea":a=r0(e,a),r=r0(e,r),l=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ed)}i0(n,r);var h;n=null;for(x in a)if(!r.hasOwnProperty(x)&&a.hasOwnProperty(x)&&a[x]!=null)if(x==="style"){var g=a[x];for(h in g)g.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Ec.hasOwnProperty(x)?l||(l=[]):(l=l||[]).push(x,null));for(x in r){var y=r[x];if(g=a!=null?a[x]:void 0,r.hasOwnProperty(x)&&y!==g&&(y!=null||g!=null))if(x==="style")if(g){for(h in g)!g.hasOwnProperty(h)||y&&y.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in y)y.hasOwnProperty(h)&&g[h]!==y[h]&&(n||(n={}),n[h]=y[h])}else n||(l||(l=[]),l.push(x,n)),n=y;else x==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,g=g?g.__html:void 0,y!=null&&g!==y&&(l=l||[]).push(x,y)):x==="children"?typeof y!="string"&&typeof y!="number"||(l=l||[]).push(x,""+y):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Ec.hasOwnProperty(x)?(y!=null&&x==="onScroll"&&Wt("scroll",e),l||g===y||(l=[])):(l=l||[]).push(x,y))}n&&(l=l||[]).push("style",n);var x=l;(t.updateQueue=x)&&(t.flags|=4)}};Ww=function(e,t,n,r){n!==r&&(t.flags|=4)};function ql(e,t){if(!Xt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Hn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function yN(e,t,n){var r=t.pendingProps;switch(Xm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(t),null;case 1:return vr(t.type)&&Cd(),Hn(t),null;case 3:return r=t.stateNode,nl(),qt(yr),qt(Kn),ig(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ru(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,gs!==null&&(U0(gs),gs=null))),R0(e,t),Hn(t),null;case 5:sg(t);var a=Oa(Dc.current);if(n=t.type,e!==null&&t.stateNode!=null)Hw(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Se(166));return Hn(t),null}if(e=Oa(zs.current),Ru(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Bs]=t,r[Rc]=l,e=(t.mode&1)!==0,n){case"dialog":Wt("cancel",r),Wt("close",r);break;case"iframe":case"object":case"embed":Wt("load",r);break;case"video":case"audio":for(a=0;a<tc.length;a++)Wt(tc[a],r);break;case"source":Wt("error",r);break;case"img":case"image":case"link":Wt("error",r),Wt("load",r);break;case"details":Wt("toggle",r);break;case"input":R1(r,l),Wt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Wt("invalid",r);break;case"textarea":D1(r,l),Wt("invalid",r)}i0(n,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var g=l[h];h==="children"?typeof g=="string"?r.textContent!==g&&(l.suppressHydrationWarning!==!0&&ku(r.textContent,g,e),a=["children",g]):typeof g=="number"&&r.textContent!==""+g&&(l.suppressHydrationWarning!==!0&&ku(r.textContent,g,e),a=["children",""+g]):Ec.hasOwnProperty(h)&&g!=null&&h==="onScroll"&&Wt("scroll",r)}switch(n){case"input":Cu(r),M1(r,l,!0);break;case"textarea":Cu(r),O1(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=Ed)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=yv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=h.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=h.createElement(n,{is:r.is}):(e=h.createElement(n),n==="select"&&(h=e,r.multiple?h.multiple=!0:r.size&&(h.size=r.size))):e=h.createElementNS(e,n),e[Bs]=t,e[Rc]=r,$w(e,t,!1,!1),t.stateNode=e;e:{switch(h=a0(n,r),n){case"dialog":Wt("cancel",e),Wt("close",e),a=r;break;case"iframe":case"object":case"embed":Wt("load",e),a=r;break;case"video":case"audio":for(a=0;a<tc.length;a++)Wt(tc[a],e);a=r;break;case"source":Wt("error",e),a=r;break;case"img":case"image":case"link":Wt("error",e),Wt("load",e),a=r;break;case"details":Wt("toggle",e),a=r;break;case"input":R1(e,r),a=e0(e,r),Wt("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=nn({},r,{value:void 0}),Wt("invalid",e);break;case"textarea":D1(e,r),a=r0(e,r),Wt("invalid",e);break;default:a=r}i0(n,a),g=a;for(l in g)if(g.hasOwnProperty(l)){var y=g[l];l==="style"?bv(e,y):l==="dangerouslySetInnerHTML"?(y=y?y.__html:void 0,y!=null&&vv(e,y)):l==="children"?typeof y=="string"?(n!=="textarea"||y!=="")&&Cc(e,y):typeof y=="number"&&Cc(e,""+y):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(Ec.hasOwnProperty(l)?y!=null&&l==="onScroll"&&Wt("scroll",e):y!=null&&Om(e,l,y,h))}switch(n){case"input":Cu(e),M1(e,r,!1);break;case"textarea":Cu(e),O1(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Ji(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?Go(e,!!r.multiple,l,!1):r.defaultValue!=null&&Go(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Ed)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Hn(t),null;case 6:if(e&&t.stateNode!=null)Ww(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Se(166));if(n=Oa(Dc.current),Oa(zs.current),Ru(t)){if(r=t.stateNode,n=t.memoizedProps,r[Bs]=t,(l=r.nodeValue!==n)&&(e=Mr,e!==null))switch(e.tag){case 3:ku(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&ku(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Bs]=t,t.stateNode=r}return Hn(t),null;case 13:if(qt(Jt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Xt&&kr!==null&&t.mode&1&&!(t.flags&128))lw(),el(),t.flags|=98560,l=!1;else if(l=Ru(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(Se(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(Se(317));l[Bs]=t}else el(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Hn(t),l=!1}else gs!==null&&(U0(gs),gs=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Jt.current&1?_n===0&&(_n=3):xg())),t.updateQueue!==null&&(t.flags|=4),Hn(t),null);case 4:return nl(),R0(e,t),e===null&&jc(t.stateNode.containerInfo),Hn(t),null;case 10:return eg(t.type._context),Hn(t),null;case 17:return vr(t.type)&&Cd(),Hn(t),null;case 19:if(qt(Jt),l=t.memoizedState,l===null)return Hn(t),null;if(r=(t.flags&128)!==0,h=l.rendering,h===null)if(r)ql(l,!1);else{if(_n!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(h=jd(e),h!==null){for(t.flags|=128,ql(l,!1),r=h.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,e=h.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return zt(Jt,Jt.current&1|2),t.child}e=e.sibling}l.tail!==null&&gn()>sl&&(t.flags|=128,r=!0,ql(l,!1),t.lanes=4194304)}else{if(!r)if(e=jd(h),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ql(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!Xt)return Hn(t),null}else 2*gn()-l.renderingStartTime>sl&&n!==1073741824&&(t.flags|=128,r=!0,ql(l,!1),t.lanes=4194304);l.isBackwards?(h.sibling=t.child,t.child=h):(n=l.last,n!==null?n.sibling=h:t.child=h,l.last=h)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=gn(),t.sibling=null,n=Jt.current,zt(Jt,r?n&1|2:n&1),t):(Hn(t),null);case 22:case 23:return pg(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ir&1073741824&&(Hn(t),t.subtreeFlags&6&&(t.flags|=8192)):Hn(t),null;case 24:return null;case 25:return null}throw Error(Se(156,t.tag))}function vN(e,t){switch(Xm(t),t.tag){case 1:return vr(t.type)&&Cd(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return nl(),qt(yr),qt(Kn),ig(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return sg(t),null;case 13:if(qt(Jt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Se(340));el()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return qt(Jt),null;case 4:return nl(),null;case 10:return eg(t.type._context),null;case 22:case 23:return pg(),null;case 24:return null;default:return null}}var Ou=!1,Gn=!1,wN=typeof WeakSet=="function"?WeakSet:Set,Ue=null;function Lo(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){cn(e,t,r)}else n.current=null}function M0(e,t,n){try{n()}catch(r){cn(e,t,r)}}var Np=!1;function bN(e,t){if(p0=vd,e=Yv(),Km(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var h=0,g=-1,y=-1,x=0,w=0,E=e,N=null;t:for(;;){for(var I;E!==n||a!==0&&E.nodeType!==3||(g=h+a),E!==l||r!==0&&E.nodeType!==3||(y=h+r),E.nodeType===3&&(h+=E.nodeValue.length),(I=E.firstChild)!==null;)N=E,E=I;for(;;){if(E===e)break t;if(N===n&&++x===a&&(g=h),N===l&&++w===r&&(y=h),(I=E.nextSibling)!==null)break;E=N,N=E.parentNode}E=I}n=g===-1||y===-1?null:{start:g,end:y}}else n=null}n=n||{start:0,end:0}}else n=null;for(x0={focusedElem:e,selectionRange:n},vd=!1,Ue=t;Ue!==null;)if(t=Ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ue=e;else for(;Ue!==null;){t=Ue;try{var D=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(D!==null){var O=D.memoizedProps,V=D.memoizedState,T=t.stateNode,A=T.getSnapshotBeforeUpdate(t.elementType===t.type?O:ds(t.type,O),V);T.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var _=t.stateNode.containerInfo;_.nodeType===1?_.textContent="":_.nodeType===9&&_.documentElement&&_.removeChild(_.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Se(163))}}catch(M){cn(t,t.return,M)}if(e=t.sibling,e!==null){e.return=t.return,Ue=e;break}Ue=t.return}return D=Np,Np=!1,D}function uc(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var l=a.destroy;a.destroy=void 0,l!==void 0&&M0(t,n,l)}a=a.next}while(a!==r)}}function uh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function D0(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Gw(e){var t=e.alternate;t!==null&&(e.alternate=null,Gw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Bs],delete t[Rc],delete t[w0],delete t[rN],delete t[sN])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qw(e){return e.tag===5||e.tag===3||e.tag===4}function Sp(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function O0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ed));else if(r!==4&&(e=e.child,e!==null))for(O0(e,t,n),e=e.sibling;e!==null;)O0(e,t,n),e=e.sibling}function P0(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(P0(e,t,n),e=e.sibling;e!==null;)P0(e,t,n),e=e.sibling}var Dn=null,hs=!1;function Ii(e,t,n){for(n=n.child;n!==null;)Kw(e,t,n),n=n.sibling}function Kw(e,t,n){if(Vs&&typeof Vs.onCommitFiberUnmount=="function")try{Vs.onCommitFiberUnmount(nh,n)}catch{}switch(n.tag){case 5:Gn||Lo(n,t);case 6:var r=Dn,a=hs;Dn=null,Ii(e,t,n),Dn=r,hs=a,Dn!==null&&(hs?(e=Dn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Dn.removeChild(n.stateNode));break;case 18:Dn!==null&&(hs?(e=Dn,n=n.stateNode,e.nodeType===8?of(e.parentNode,n):e.nodeType===1&&of(e,n),Ac(e)):of(Dn,n.stateNode));break;case 4:r=Dn,a=hs,Dn=n.stateNode.containerInfo,hs=!0,Ii(e,t,n),Dn=r,hs=a;break;case 0:case 11:case 14:case 15:if(!Gn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&M0(n,t,h),a=a.next}while(a!==r)}Ii(e,t,n);break;case 1:if(!Gn&&(Lo(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(g){cn(n,t,g)}Ii(e,t,n);break;case 21:Ii(e,t,n);break;case 22:n.mode&1?(Gn=(r=Gn)||n.memoizedState!==null,Ii(e,t,n),Gn=r):Ii(e,t,n);break;default:Ii(e,t,n)}}function _p(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wN),t.forEach(function(r){var a=jN.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function ls(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var l=e,h=t,g=h;e:for(;g!==null;){switch(g.tag){case 5:Dn=g.stateNode,hs=!1;break e;case 3:Dn=g.stateNode.containerInfo,hs=!0;break e;case 4:Dn=g.stateNode.containerInfo,hs=!0;break e}g=g.return}if(Dn===null)throw Error(Se(160));Kw(l,h,a),Dn=null,hs=!1;var y=a.alternate;y!==null&&(y.return=null),a.return=null}catch(x){cn(a,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Yw(t,e),t=t.sibling}function Yw(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ls(t,e),Os(e),r&4){try{uc(3,e,e.return),uh(3,e)}catch(O){cn(e,e.return,O)}try{uc(5,e,e.return)}catch(O){cn(e,e.return,O)}}break;case 1:ls(t,e),Os(e),r&512&&n!==null&&Lo(n,n.return);break;case 5:if(ls(t,e),Os(e),r&512&&n!==null&&Lo(n,n.return),e.flags&32){var a=e.stateNode;try{Cc(a,"")}catch(O){cn(e,e.return,O)}}if(r&4&&(a=e.stateNode,a!=null)){var l=e.memoizedProps,h=n!==null?n.memoizedProps:l,g=e.type,y=e.updateQueue;if(e.updateQueue=null,y!==null)try{g==="input"&&l.type==="radio"&&l.name!=null&&pv(a,l),a0(g,h);var x=a0(g,l);for(h=0;h<y.length;h+=2){var w=y[h],E=y[h+1];w==="style"?bv(a,E):w==="dangerouslySetInnerHTML"?vv(a,E):w==="children"?Cc(a,E):Om(a,w,E,x)}switch(g){case"input":t0(a,l);break;case"textarea":xv(a,l);break;case"select":var N=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var I=l.value;I!=null?Go(a,!!l.multiple,I,!1):N!==!!l.multiple&&(l.defaultValue!=null?Go(a,!!l.multiple,l.defaultValue,!0):Go(a,!!l.multiple,l.multiple?[]:"",!1))}a[Rc]=l}catch(O){cn(e,e.return,O)}}break;case 6:if(ls(t,e),Os(e),r&4){if(e.stateNode===null)throw Error(Se(162));a=e.stateNode,l=e.memoizedProps;try{a.nodeValue=l}catch(O){cn(e,e.return,O)}}break;case 3:if(ls(t,e),Os(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ac(t.containerInfo)}catch(O){cn(e,e.return,O)}break;case 4:ls(t,e),Os(e);break;case 13:ls(t,e),Os(e),a=e.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(mg=gn())),r&4&&_p(e);break;case 22:if(w=n!==null&&n.memoizedState!==null,e.mode&1?(Gn=(x=Gn)||w,ls(t,e),Gn=x):ls(t,e),Os(e),r&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!w&&e.mode&1)for(Ue=e,w=e.child;w!==null;){for(E=Ue=w;Ue!==null;){switch(N=Ue,I=N.child,N.tag){case 0:case 11:case 14:case 15:uc(4,N,N.return);break;case 1:Lo(N,N.return);var D=N.stateNode;if(typeof D.componentWillUnmount=="function"){r=N,n=N.return;try{t=r,D.props=t.memoizedProps,D.state=t.memoizedState,D.componentWillUnmount()}catch(O){cn(r,n,O)}}break;case 5:Lo(N,N.return);break;case 22:if(N.memoizedState!==null){Tp(E);continue}}I!==null?(I.return=N,Ue=I):Tp(E)}w=w.sibling}e:for(w=null,E=e;;){if(E.tag===5){if(w===null){w=E;try{a=E.stateNode,x?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(g=E.stateNode,y=E.memoizedProps.style,h=y!=null&&y.hasOwnProperty("display")?y.display:null,g.style.display=wv("display",h))}catch(O){cn(e,e.return,O)}}}else if(E.tag===6){if(w===null)try{E.stateNode.nodeValue=x?"":E.memoizedProps}catch(O){cn(e,e.return,O)}}else if((E.tag!==22&&E.tag!==23||E.memoizedState===null||E===e)&&E.child!==null){E.child.return=E,E=E.child;continue}if(E===e)break e;for(;E.sibling===null;){if(E.return===null||E.return===e)break e;w===E&&(w=null),E=E.return}w===E&&(w=null),E.sibling.return=E.return,E=E.sibling}}break;case 19:ls(t,e),Os(e),r&4&&_p(e);break;case 21:break;default:ls(t,e),Os(e)}}function Os(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qw(n)){var r=n;break e}n=n.return}throw Error(Se(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Cc(a,""),r.flags&=-33);var l=Sp(e);P0(e,l,a);break;case 3:case 4:var h=r.stateNode.containerInfo,g=Sp(e);O0(e,g,h);break;default:throw Error(Se(161))}}catch(y){cn(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function EN(e,t,n){Ue=e,Xw(e)}function Xw(e,t,n){for(var r=(e.mode&1)!==0;Ue!==null;){var a=Ue,l=a.child;if(a.tag===22&&r){var h=a.memoizedState!==null||Ou;if(!h){var g=a.alternate,y=g!==null&&g.memoizedState!==null||Gn;g=Ou;var x=Gn;if(Ou=h,(Gn=y)&&!x)for(Ue=a;Ue!==null;)h=Ue,y=h.child,h.tag===22&&h.memoizedState!==null?Ip(a):y!==null?(y.return=h,Ue=y):Ip(a);for(;l!==null;)Ue=l,Xw(l),l=l.sibling;Ue=a,Ou=g,Gn=x}Ap(e)}else a.subtreeFlags&8772&&l!==null?(l.return=a,Ue=l):Ap(e)}}function Ap(e){for(;Ue!==null;){var t=Ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Gn||uh(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Gn)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ds(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&up(t,l,r);break;case 3:var h=t.updateQueue;if(h!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}up(t,h,n)}break;case 5:var g=t.stateNode;if(n===null&&t.flags&4){n=g;var y=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":y.autoFocus&&n.focus();break;case"img":y.src&&(n.src=y.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var w=x.memoizedState;if(w!==null){var E=w.dehydrated;E!==null&&Ac(E)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Se(163))}Gn||t.flags&512&&D0(t)}catch(N){cn(t,t.return,N)}}if(t===e){Ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function Tp(e){for(;Ue!==null;){var t=Ue;if(t===e){Ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ue=n;break}Ue=t.return}}function Ip(e){for(;Ue!==null;){var t=Ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{uh(4,t)}catch(y){cn(t,n,y)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(y){cn(t,a,y)}}var l=t.return;try{D0(t)}catch(y){cn(t,l,y)}break;case 5:var h=t.return;try{D0(t)}catch(y){cn(t,h,y)}}}catch(y){cn(t,t.return,y)}if(t===e){Ue=null;break}var g=t.sibling;if(g!==null){g.return=t.return,Ue=g;break}Ue=t.return}}var CN=Math.ceil,Md=wi.ReactCurrentDispatcher,hg=wi.ReactCurrentOwner,Zr=wi.ReactCurrentBatchConfig,wt=0,Rn=null,yn=null,Pn=0,Ir=0,Bo=aa(0),_n=0,Bc=null,Ka=0,dh=0,fg=0,dc=null,fr=null,mg=0,sl=1/0,si=null,Dd=!1,L0=null,Yi=null,Pu=!1,zi=null,Od=0,hc=0,B0=null,sd=-1,id=0;function sr(){return wt&6?gn():sd!==-1?sd:sd=gn()}function Xi(e){return e.mode&1?wt&2&&Pn!==0?Pn&-Pn:aN.transition!==null?(id===0&&(id=Mv()),id):(e=Dt,e!==0||(e=window.event,e=e===void 0?16:Uv(e.type)),e):1}function xs(e,t,n,r){if(50<hc)throw hc=0,B0=null,Error(Se(185));Qc(e,n,r),(!(wt&2)||e!==Rn)&&(e===Rn&&(!(wt&2)&&(dh|=n),_n===4&&Bi(e,Pn)),wr(e,r),n===1&&wt===0&&!(t.mode&1)&&(sl=gn()+500,oh&&oa()))}function wr(e,t){var n=e.callbackNode;a3(e,t);var r=yd(e,e===Rn?Pn:0);if(r===0)n!==null&&B1(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&B1(n),t===1)e.tag===0?iN(jp.bind(null,e)):iw(jp.bind(null,e)),tN(function(){!(wt&6)&&oa()}),n=null;else{switch(Dv(r)){case 1:n=Um;break;case 4:n=kv;break;case 16:n=xd;break;case 536870912:n=Rv;break;default:n=xd}n=s2(n,Qw.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Qw(e,t){if(sd=-1,id=0,wt&6)throw Error(Se(327));var n=e.callbackNode;if(Qo()&&e.callbackNode!==n)return null;var r=yd(e,e===Rn?Pn:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=Pd(e,r);else{t=r;var a=wt;wt|=2;var l=Jw();(Rn!==e||Pn!==t)&&(si=null,sl=gn()+500,Va(e,t));do try{_N();break}catch(g){Zw(e,g)}while(!0);Jm(),Md.current=l,wt=a,yn!==null?t=0:(Rn=null,Pn=0,t=_n)}if(t!==0){if(t===2&&(a=d0(e),a!==0&&(r=a,t=F0(e,a))),t===1)throw n=Bc,Va(e,0),Bi(e,r),wr(e,gn()),n;if(t===6)Bi(e,r);else{if(a=e.current.alternate,!(r&30)&&!NN(a)&&(t=Pd(e,r),t===2&&(l=d0(e),l!==0&&(r=l,t=F0(e,l))),t===1))throw n=Bc,Va(e,0),Bi(e,r),wr(e,gn()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(Se(345));case 2:Ia(e,fr,si);break;case 3:if(Bi(e,r),(r&130023424)===r&&(t=mg+500-gn(),10<t)){if(yd(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){sr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=v0(Ia.bind(null,e,fr,si),t);break}Ia(e,fr,si);break;case 4:if(Bi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var h=31-ps(r);l=1<<h,h=t[h],h>a&&(a=h),r&=~l}if(r=a,r=gn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*CN(r/1960))-r,10<r){e.timeoutHandle=v0(Ia.bind(null,e,fr,si),r);break}Ia(e,fr,si);break;case 5:Ia(e,fr,si);break;default:throw Error(Se(329))}}}return wr(e,gn()),e.callbackNode===n?Qw.bind(null,e):null}function F0(e,t){var n=dc;return e.current.memoizedState.isDehydrated&&(Va(e,t).flags|=256),e=Pd(e,t),e!==2&&(t=fr,fr=n,t!==null&&U0(t)),e}function U0(e){fr===null?fr=e:fr.push.apply(fr,e)}function NN(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],l=a.getSnapshot;a=a.value;try{if(!bs(l(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bi(e,t){for(t&=~fg,t&=~dh,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ps(t),r=1<<n;e[n]=-1,t&=~r}}function jp(e){if(wt&6)throw Error(Se(327));Qo();var t=yd(e,0);if(!(t&1))return wr(e,gn()),null;var n=Pd(e,t);if(e.tag!==0&&n===2){var r=d0(e);r!==0&&(t=r,n=F0(e,r))}if(n===1)throw n=Bc,Va(e,0),Bi(e,t),wr(e,gn()),n;if(n===6)throw Error(Se(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ia(e,fr,si),wr(e,gn()),null}function gg(e,t){var n=wt;wt|=1;try{return e(t)}finally{wt=n,wt===0&&(sl=gn()+500,oh&&oa())}}function Ya(e){zi!==null&&zi.tag===0&&!(wt&6)&&Qo();var t=wt;wt|=1;var n=Zr.transition,r=Dt;try{if(Zr.transition=null,Dt=1,e)return e()}finally{Dt=r,Zr.transition=n,wt=t,!(wt&6)&&oa()}}function pg(){Ir=Bo.current,qt(Bo)}function Va(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,eN(n)),yn!==null)for(n=yn.return;n!==null;){var r=n;switch(Xm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Cd();break;case 3:nl(),qt(yr),qt(Kn),ig();break;case 5:sg(r);break;case 4:nl();break;case 13:qt(Jt);break;case 19:qt(Jt);break;case 10:eg(r.type._context);break;case 22:case 23:pg()}n=n.return}if(Rn=e,yn=e=Qi(e.current,null),Pn=Ir=t,_n=0,Bc=null,fg=dh=Ka=0,fr=dc=null,Da!==null){for(t=0;t<Da.length;t++)if(n=Da[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,l=n.pending;if(l!==null){var h=l.next;l.next=a,r.next=h}n.pending=r}Da=null}return e}function Zw(e,t){do{var n=yn;try{if(Jm(),td.current=Rd,kd){for(var r=tn.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}kd=!1}if(qa=0,kn=Nn=tn=null,cc=!1,Oc=0,hg.current=null,n===null||n.return===null){_n=1,Bc=t,yn=null;break}e:{var l=e,h=n.return,g=n,y=t;if(t=Pn,g.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){var x=y,w=g,E=w.tag;if(!(w.mode&1)&&(E===0||E===11||E===15)){var N=w.alternate;N?(w.updateQueue=N.updateQueue,w.memoizedState=N.memoizedState,w.lanes=N.lanes):(w.updateQueue=null,w.memoizedState=null)}var I=xp(h);if(I!==null){I.flags&=-257,yp(I,h,g,l,t),I.mode&1&&pp(l,x,t),t=I,y=x;var D=t.updateQueue;if(D===null){var O=new Set;O.add(y),t.updateQueue=O}else D.add(y);break e}else{if(!(t&1)){pp(l,x,t),xg();break e}y=Error(Se(426))}}else if(Xt&&g.mode&1){var V=xp(h);if(V!==null){!(V.flags&65536)&&(V.flags|=256),yp(V,h,g,l,t),Qm(rl(y,g));break e}}l=y=rl(y,g),_n!==4&&(_n=2),dc===null?dc=[l]:dc.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var T=Ow(l,y,t);cp(l,T);break e;case 1:g=y;var A=l.type,_=l.stateNode;if(!(l.flags&128)&&(typeof A.getDerivedStateFromError=="function"||_!==null&&typeof _.componentDidCatch=="function"&&(Yi===null||!Yi.has(_)))){l.flags|=65536,t&=-t,l.lanes|=t;var M=Pw(l,g,t);cp(l,M);break e}}l=l.return}while(l!==null)}t2(n)}catch(H){t=H,yn===n&&n!==null&&(yn=n=n.return);continue}break}while(!0)}function Jw(){var e=Md.current;return Md.current=Rd,e===null?Rd:e}function xg(){(_n===0||_n===3||_n===2)&&(_n=4),Rn===null||!(Ka&268435455)&&!(dh&268435455)||Bi(Rn,Pn)}function Pd(e,t){var n=wt;wt|=2;var r=Jw();(Rn!==e||Pn!==t)&&(si=null,Va(e,t));do try{SN();break}catch(a){Zw(e,a)}while(!0);if(Jm(),wt=n,Md.current=r,yn!==null)throw Error(Se(261));return Rn=null,Pn=0,_n}function SN(){for(;yn!==null;)e2(yn)}function _N(){for(;yn!==null&&!QC();)e2(yn)}function e2(e){var t=r2(e.alternate,e,Ir);e.memoizedProps=e.pendingProps,t===null?t2(e):yn=t,hg.current=null}function t2(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=vN(n,t),n!==null){n.flags&=32767,yn=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{_n=6,yn=null;return}}else if(n=yN(n,t,Ir),n!==null){yn=n;return}if(t=t.sibling,t!==null){yn=t;return}yn=t=e}while(t!==null);_n===0&&(_n=5)}function Ia(e,t,n){var r=Dt,a=Zr.transition;try{Zr.transition=null,Dt=1,AN(e,t,n,r)}finally{Zr.transition=a,Dt=r}return null}function AN(e,t,n,r){do Qo();while(zi!==null);if(wt&6)throw Error(Se(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Se(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(o3(e,l),e===Rn&&(yn=Rn=null,Pn=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pu||(Pu=!0,s2(xd,function(){return Qo(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Zr.transition,Zr.transition=null;var h=Dt;Dt=1;var g=wt;wt|=4,hg.current=null,bN(e,n),Yw(n,e),q3(x0),vd=!!p0,x0=p0=null,e.current=n,EN(n),ZC(),wt=g,Dt=h,Zr.transition=l}else e.current=n;if(Pu&&(Pu=!1,zi=e,Od=a),l=e.pendingLanes,l===0&&(Yi=null),t3(n.stateNode),wr(e,gn()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Dd)throw Dd=!1,e=L0,L0=null,e;return Od&1&&e.tag!==0&&Qo(),l=e.pendingLanes,l&1?e===B0?hc++:(hc=0,B0=e):hc=0,oa(),null}function Qo(){if(zi!==null){var e=Dv(Od),t=Zr.transition,n=Dt;try{if(Zr.transition=null,Dt=16>e?16:e,zi===null)var r=!1;else{if(e=zi,zi=null,Od=0,wt&6)throw Error(Se(331));var a=wt;for(wt|=4,Ue=e.current;Ue!==null;){var l=Ue,h=l.child;if(Ue.flags&16){var g=l.deletions;if(g!==null){for(var y=0;y<g.length;y++){var x=g[y];for(Ue=x;Ue!==null;){var w=Ue;switch(w.tag){case 0:case 11:case 15:uc(8,w,l)}var E=w.child;if(E!==null)E.return=w,Ue=E;else for(;Ue!==null;){w=Ue;var N=w.sibling,I=w.return;if(Gw(w),w===x){Ue=null;break}if(N!==null){N.return=I,Ue=N;break}Ue=I}}}var D=l.alternate;if(D!==null){var O=D.child;if(O!==null){D.child=null;do{var V=O.sibling;O.sibling=null,O=V}while(O!==null)}}Ue=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,Ue=h;else e:for(;Ue!==null;){if(l=Ue,l.flags&2048)switch(l.tag){case 0:case 11:case 15:uc(9,l,l.return)}var T=l.sibling;if(T!==null){T.return=l.return,Ue=T;break e}Ue=l.return}}var A=e.current;for(Ue=A;Ue!==null;){h=Ue;var _=h.child;if(h.subtreeFlags&2064&&_!==null)_.return=h,Ue=_;else e:for(h=A;Ue!==null;){if(g=Ue,g.flags&2048)try{switch(g.tag){case 0:case 11:case 15:uh(9,g)}}catch(H){cn(g,g.return,H)}if(g===h){Ue=null;break e}var M=g.sibling;if(M!==null){M.return=g.return,Ue=M;break e}Ue=g.return}}if(wt=a,oa(),Vs&&typeof Vs.onPostCommitFiberRoot=="function")try{Vs.onPostCommitFiberRoot(nh,e)}catch{}r=!0}return r}finally{Dt=n,Zr.transition=t}}return!1}function kp(e,t,n){t=rl(n,t),t=Ow(e,t,1),e=Ki(e,t,1),t=sr(),e!==null&&(Qc(e,1,t),wr(e,t))}function cn(e,t,n){if(e.tag===3)kp(e,e,n);else for(;t!==null;){if(t.tag===3){kp(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Yi===null||!Yi.has(r))){e=rl(n,e),e=Pw(t,e,1),t=Ki(t,e,1),e=sr(),t!==null&&(Qc(t,1,e),wr(t,e));break}}t=t.return}}function TN(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=sr(),e.pingedLanes|=e.suspendedLanes&n,Rn===e&&(Pn&n)===n&&(_n===4||_n===3&&(Pn&130023424)===Pn&&500>gn()-mg?Va(e,0):fg|=n),wr(e,t)}function n2(e,t){t===0&&(e.mode&1?(t=_u,_u<<=1,!(_u&130023424)&&(_u=4194304)):t=1);var n=sr();e=mi(e,t),e!==null&&(Qc(e,t,n),wr(e,n))}function IN(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),n2(e,n)}function jN(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Se(314))}r!==null&&r.delete(t),n2(e,n)}var r2;r2=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||yr.current)gr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return gr=!1,xN(e,t,n);gr=!!(e.flags&131072)}else gr=!1,Xt&&t.flags&1048576&&aw(t,_d,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;rd(e,t),e=t.pendingProps;var a=Jo(t,Kn.current);Xo(t,n),a=og(null,t,r,e,a,n);var l=lg();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,vr(r)?(l=!0,Nd(t)):l=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ng(t),a.updater=lh,t.stateNode=a,a._reactInternals=t,_0(t,r,e,n),t=I0(null,t,r,!0,l,n)):(t.tag=0,Xt&&l&&Ym(t),tr(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(rd(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=RN(r),e=ds(r,e),a){case 0:t=T0(null,t,r,e,n);break e;case 1:t=bp(null,t,r,e,n);break e;case 11:t=vp(null,t,r,e,n);break e;case 14:t=wp(null,t,r,ds(r.type,e),n);break e}throw Error(Se(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ds(r,a),T0(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ds(r,a),bp(e,t,r,a,n);case 3:e:{if(Uw(t),e===null)throw Error(Se(387));r=t.pendingProps,l=t.memoizedState,a=l.element,uw(e,t),Id(t,r,null,n);var h=t.memoizedState;if(r=h.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){a=rl(Error(Se(423)),t),t=Ep(e,t,r,n,a);break e}else if(r!==a){a=rl(Error(Se(424)),t),t=Ep(e,t,r,n,a);break e}else for(kr=qi(t.stateNode.containerInfo.firstChild),Mr=t,Xt=!0,gs=null,n=mw(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(el(),r===a){t=gi(e,t,n);break e}tr(e,t,r,n)}t=t.child}return t;case 5:return gw(t),e===null&&C0(t),r=t.type,a=t.pendingProps,l=e!==null?e.memoizedProps:null,h=a.children,y0(r,a)?h=null:l!==null&&y0(r,l)&&(t.flags|=32),Fw(e,t),tr(e,t,h,n),t.child;case 6:return e===null&&C0(t),null;case 13:return Vw(e,t,n);case 4:return rg(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=tl(t,null,r,n):tr(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ds(r,a),vp(e,t,r,a,n);case 7:return tr(e,t,t.pendingProps,n),t.child;case 8:return tr(e,t,t.pendingProps.children,n),t.child;case 12:return tr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,l=t.memoizedProps,h=a.value,zt(Ad,r._currentValue),r._currentValue=h,l!==null)if(bs(l.value,h)){if(l.children===a.children&&!yr.current){t=gi(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var g=l.dependencies;if(g!==null){h=l.child;for(var y=g.firstContext;y!==null;){if(y.context===r){if(l.tag===1){y=ui(-1,n&-n),y.tag=2;var x=l.updateQueue;if(x!==null){x=x.shared;var w=x.pending;w===null?y.next=y:(y.next=w.next,w.next=y),x.pending=y}}l.lanes|=n,y=l.alternate,y!==null&&(y.lanes|=n),N0(l.return,n,t),g.lanes|=n;break}y=y.next}}else if(l.tag===10)h=l.type===t.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(Se(341));h.lanes|=n,g=h.alternate,g!==null&&(g.lanes|=n),N0(h,n,t),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===t){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}tr(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Xo(t,n),a=es(a),r=r(a),t.flags|=1,tr(e,t,r,n),t.child;case 14:return r=t.type,a=ds(r,t.pendingProps),a=ds(r.type,a),wp(e,t,r,a,n);case 15:return Lw(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ds(r,a),rd(e,t),t.tag=1,vr(r)?(e=!0,Nd(t)):e=!1,Xo(t,n),hw(t,r,a),_0(t,r,a,n),I0(null,t,r,!0,e,n);case 19:return zw(e,t,n);case 22:return Bw(e,t,n)}throw Error(Se(156,t.tag))};function s2(e,t){return jv(e,t)}function kN(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(e,t,n,r){return new kN(e,t,n,r)}function yg(e){return e=e.prototype,!(!e||!e.isReactComponent)}function RN(e){if(typeof e=="function")return yg(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Lm)return 11;if(e===Bm)return 14}return 2}function Qi(e,t){var n=e.alternate;return n===null?(n=Qr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ad(e,t,n,r,a,l){var h=2;if(r=e,typeof e=="function")yg(e)&&(h=1);else if(typeof e=="string")h=5;else e:switch(e){case To:return za(n.children,a,l,t);case Pm:h=8,a|=8;break;case Xf:return e=Qr(12,n,t,a|2),e.elementType=Xf,e.lanes=l,e;case Qf:return e=Qr(13,n,t,a),e.elementType=Qf,e.lanes=l,e;case Zf:return e=Qr(19,n,t,a),e.elementType=Zf,e.lanes=l,e;case fv:return hh(n,a,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case dv:h=10;break e;case hv:h=9;break e;case Lm:h=11;break e;case Bm:h=14;break e;case Di:h=16,r=null;break e}throw Error(Se(130,e==null?e:typeof e,""))}return t=Qr(h,n,t,a),t.elementType=e,t.type=r,t.lanes=l,t}function za(e,t,n,r){return e=Qr(7,e,r,t),e.lanes=n,e}function hh(e,t,n,r){return e=Qr(22,e,r,t),e.elementType=fv,e.lanes=n,e.stateNode={isHidden:!1},e}function gf(e,t,n){return e=Qr(6,e,null,t),e.lanes=n,e}function pf(e,t,n){return t=Qr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function MN(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Yh(0),this.expirationTimes=Yh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Yh(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vg(e,t,n,r,a,l,h,g,y){return e=new MN(e,t,n,g,y),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Qr(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ng(l),e}function DN(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ao,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function i2(e){if(!e)return ea;e=e._reactInternals;e:{if(Qa(e)!==e||e.tag!==1)throw Error(Se(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(vr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Se(171))}if(e.tag===1){var n=e.type;if(vr(n))return sw(e,n,t)}return t}function a2(e,t,n,r,a,l,h,g,y){return e=vg(n,r,!0,e,a,l,h,g,y),e.context=i2(null),n=e.current,r=sr(),a=Xi(n),l=ui(r,a),l.callback=t??null,Ki(n,l,a),e.current.lanes=a,Qc(e,a,r),wr(e,r),e}function fh(e,t,n,r){var a=t.current,l=sr(),h=Xi(a);return n=i2(n),t.context===null?t.context=n:t.pendingContext=n,t=ui(l,h),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Ki(a,t,h),e!==null&&(xs(e,a,h,l),ed(e,a,h)),h}function Ld(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Rp(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function wg(e,t){Rp(e,t),(e=e.alternate)&&Rp(e,t)}function ON(){return null}var o2=typeof reportError=="function"?reportError:function(e){console.error(e)};function bg(e){this._internalRoot=e}mh.prototype.render=bg.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Se(409));fh(e,t,null,null)};mh.prototype.unmount=bg.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ya(function(){fh(null,e,null,null)}),t[fi]=null}};function mh(e){this._internalRoot=e}mh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Lv();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Li.length&&t!==0&&t<Li[n].priority;n++);Li.splice(n,0,e),n===0&&Fv(e)}};function Eg(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function gh(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Mp(){}function PN(e,t,n,r,a){if(a){if(typeof r=="function"){var l=r;r=function(){var x=Ld(h);l.call(x)}}var h=a2(t,r,e,0,null,!1,!1,"",Mp);return e._reactRootContainer=h,e[fi]=h.current,jc(e.nodeType===8?e.parentNode:e),Ya(),h}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var g=r;r=function(){var x=Ld(y);g.call(x)}}var y=vg(e,0,!1,null,null,!1,!1,"",Mp);return e._reactRootContainer=y,e[fi]=y.current,jc(e.nodeType===8?e.parentNode:e),Ya(function(){fh(t,y,n,r)}),y}function ph(e,t,n,r,a){var l=n._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var g=a;a=function(){var y=Ld(h);g.call(y)}}fh(t,h,e,a)}else h=PN(n,t,e,a,r);return Ld(h)}Ov=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ec(t.pendingLanes);n!==0&&(Vm(t,n|1),wr(t,gn()),!(wt&6)&&(sl=gn()+500,oa()))}break;case 13:Ya(function(){var r=mi(e,1);if(r!==null){var a=sr();xs(r,e,1,a)}}),wg(e,1)}};zm=function(e){if(e.tag===13){var t=mi(e,134217728);if(t!==null){var n=sr();xs(t,e,134217728,n)}wg(e,134217728)}};Pv=function(e){if(e.tag===13){var t=Xi(e),n=mi(e,t);if(n!==null){var r=sr();xs(n,e,t,r)}wg(e,t)}};Lv=function(){return Dt};Bv=function(e,t){var n=Dt;try{return Dt=e,t()}finally{Dt=n}};l0=function(e,t,n){switch(t){case"input":if(t0(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=ah(r);if(!a)throw Error(Se(90));gv(r),t0(r,a)}}}break;case"textarea":xv(e,n);break;case"select":t=n.value,t!=null&&Go(e,!!n.multiple,t,!1)}};Nv=gg;Sv=Ya;var LN={usingClientEntryPoint:!1,Events:[Jc,Ro,ah,Ev,Cv,gg]},Kl={findFiberByHostInstance:Ma,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},BN={bundleType:Kl.bundleType,version:Kl.version,rendererPackageName:Kl.rendererPackageName,rendererConfig:Kl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:wi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Tv(e),e===null?null:e.stateNode},findFiberByHostInstance:Kl.findFiberByHostInstance||ON,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{nh=Lu.inject(BN),Vs=Lu}catch{}}Or.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LN;Or.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eg(t))throw Error(Se(200));return DN(e,t,null,n)};Or.createRoot=function(e,t){if(!Eg(e))throw Error(Se(299));var n=!1,r="",a=o2;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=vg(e,1,!1,null,null,n,!1,r,a),e[fi]=t.current,jc(e.nodeType===8?e.parentNode:e),new bg(t)};Or.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Se(188)):(e=Object.keys(e).join(","),Error(Se(268,e)));return e=Tv(t),e=e===null?null:e.stateNode,e};Or.flushSync=function(e){return Ya(e)};Or.hydrate=function(e,t,n){if(!gh(t))throw Error(Se(200));return ph(null,e,t,!0,n)};Or.hydrateRoot=function(e,t,n){if(!Eg(e))throw Error(Se(405));var r=n!=null&&n.hydratedSources||null,a=!1,l="",h=o2;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),t=a2(t,null,e,1,n??null,a,!1,l,h),e[fi]=t.current,jc(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new mh(t)};Or.render=function(e,t,n){if(!gh(t))throw Error(Se(200));return ph(null,e,t,!1,n)};Or.unmountComponentAtNode=function(e){if(!gh(e))throw Error(Se(40));return e._reactRootContainer?(Ya(function(){ph(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0):!1};Or.unstable_batchedUpdates=gg;Or.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!gh(n))throw Error(Se(200));if(e==null||e._reactInternals===void 0)throw Error(Se(38));return ph(e,t,n,!1,r)};Or.version="18.2.0-next-9e3b772b8-20220608";function l2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l2)}catch(e){console.error(e)}}l2(),av.exports=Or;var FN=av.exports,Dp=FN;Kf.createRoot=Dp.createRoot,Kf.hydrateRoot=Dp.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Op="popstate";function UN(e={}){function t(r,a){let{pathname:l,search:h,hash:g}=r.location;return V0("",{pathname:l,search:h,hash:g},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(r,a){return typeof a=="string"?a:Fc(a)}return zN(t,n,null,e)}function Zt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Es(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function VN(){return Math.random().toString(36).substring(2,10)}function Pp(e,t){return{usr:e.state,key:e.key,idx:t}}function V0(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?yl(t):t,state:n,key:t&&t.key||r||VN()}}function Fc({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function yl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function zN(e,t,n,r={}){let{window:a=document.defaultView,v5Compat:l=!1}=r,h=a.history,g="POP",y=null,x=w();x==null&&(x=0,h.replaceState({...h.state,idx:x},""));function w(){return(h.state||{idx:null}).idx}function E(){g="POP";let V=w(),T=V==null?null:V-x;x=V,y&&y({action:g,location:O.location,delta:T})}function N(V,T){g="PUSH";let A=V0(O.location,V,T);x=w()+1;let _=Pp(A,x),M=O.createHref(A);try{h.pushState(_,"",M)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;a.location.assign(M)}l&&y&&y({action:g,location:O.location,delta:1})}function I(V,T){g="REPLACE";let A=V0(O.location,V,T);x=w();let _=Pp(A,x),M=O.createHref(A);h.replaceState(_,"",M),l&&y&&y({action:g,location:O.location,delta:0})}function D(V){return $N(V)}let O={get action(){return g},get location(){return e(a,h)},listen(V){if(y)throw new Error("A history only accepts one active listener");return a.addEventListener(Op,E),y=V,()=>{a.removeEventListener(Op,E),y=null}},createHref(V){return t(a,V)},createURL:D,encodeLocation(V){let T=D(V);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:N,replace:I,go(V){return h.go(V)}};return O}function $N(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Zt(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Fc(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function c2(e,t,n="/"){return HN(e,t,n,!1)}function HN(e,t,n,r){let a=typeof t=="string"?yl(t):t,l=pi(a.pathname||"/",n);if(l==null)return null;let h=u2(e);WN(h);let g=null;for(let y=0;g==null&&y<h.length;++y){let x=nS(l);g=eS(h[y],x,r)}return g}function u2(e,t=[],n=[],r=""){let a=(l,h,g)=>{let y={relativePath:g===void 0?l.path||"":g,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};y.relativePath.startsWith("/")&&(Zt(y.relativePath.startsWith(r),`Absolute route path "${y.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),y.relativePath=y.relativePath.slice(r.length));let x=di([r,y.relativePath]),w=n.concat(y);l.children&&l.children.length>0&&(Zt(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),u2(l.children,t,w,x)),!(l.path==null&&!l.index)&&t.push({path:x,score:ZN(x,l.index),routesMeta:w})};return e.forEach((l,h)=>{var g;if(l.path===""||!((g=l.path)!=null&&g.includes("?")))a(l,h);else for(let y of d2(l.path))a(l,h,y)}),t}function d2(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(r.length===0)return a?[l,""]:[l];let h=d2(r.join("/")),g=[];return g.push(...h.map(y=>y===""?l:[l,y].join("/"))),a&&g.push(...h),g.map(y=>e.startsWith("/")&&y===""?"/":y)}function WN(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:JN(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var GN=/^:[\w-]+$/,qN=3,KN=2,YN=1,XN=10,QN=-2,Lp=e=>e==="*";function ZN(e,t){let n=e.split("/"),r=n.length;return n.some(Lp)&&(r+=QN),t&&(r+=KN),n.filter(a=>!Lp(a)).reduce((a,l)=>a+(GN.test(l)?qN:l===""?YN:XN),r)}function JN(e,t){return e.length===t.length&&e.slice(0,-1).every((r,a)=>r===t[a])?e[e.length-1]-t[t.length-1]:0}function eS(e,t,n=!1){let{routesMeta:r}=e,a={},l="/",h=[];for(let g=0;g<r.length;++g){let y=r[g],x=g===r.length-1,w=l==="/"?t:t.slice(l.length)||"/",E=Bd({path:y.relativePath,caseSensitive:y.caseSensitive,end:x},w),N=y.route;if(!E&&x&&n&&!r[r.length-1].route.index&&(E=Bd({path:y.relativePath,caseSensitive:y.caseSensitive,end:!1},w)),!E)return null;Object.assign(a,E.params),h.push({params:a,pathname:di([l,E.pathname]),pathnameBase:aS(di([l,E.pathnameBase])),route:N}),E.pathnameBase!=="/"&&(l=di([l,E.pathnameBase]))}return h}function Bd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=tS(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),g=a.slice(1);return{params:r.reduce((x,{paramName:w,isOptional:E},N)=>{if(w==="*"){let D=g[N]||"";h=l.slice(0,l.length-D.length).replace(/(.)\/+$/,"$1")}const I=g[N];return E&&!I?x[w]=void 0:x[w]=(I||"").replace(/%2F/g,"/"),x},{}),pathname:l,pathnameBase:h,pattern:e}}function tS(e,t=!1,n=!0){Es(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,y)=>(r.push({paramName:g,isOptional:y!=null}),y?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),r]}function nS(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Es(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function pi(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function rS(e,t="/"){let{pathname:n,search:r="",hash:a=""}=typeof e=="string"?yl(e):e;return{pathname:n?n.startsWith("/")?n:sS(n,t):t,search:oS(r),hash:lS(a)}}function sS(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function xf(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function iS(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Cg(e){let t=iS(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function Ng(e,t,n,r=!1){let a;typeof e=="string"?a=yl(e):(a={...e},Zt(!a.pathname||!a.pathname.includes("?"),xf("?","pathname","search",a)),Zt(!a.pathname||!a.pathname.includes("#"),xf("#","pathname","hash",a)),Zt(!a.search||!a.search.includes("#"),xf("#","search","hash",a)));let l=e===""||a.pathname==="",h=l?"/":a.pathname,g;if(h==null)g=n;else{let E=t.length-1;if(!r&&h.startsWith("..")){let N=h.split("/");for(;N[0]==="..";)N.shift(),E-=1;a.pathname=N.join("/")}g=E>=0?t[E]:"/"}let y=rS(a,g),x=h&&h!=="/"&&h.endsWith("/"),w=(l||h===".")&&n.endsWith("/");return!y.pathname.endsWith("/")&&(x||w)&&(y.pathname+="/"),y}var di=e=>e.join("/").replace(/\/\/+/g,"/"),aS=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),oS=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,lS=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function cS(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var h2=["POST","PUT","PATCH","DELETE"];new Set(h2);var uS=["GET",...h2];new Set(uS);var vl=R.createContext(null);vl.displayName="DataRouter";var xh=R.createContext(null);xh.displayName="DataRouterState";R.createContext(!1);var f2=R.createContext({isTransitioning:!1});f2.displayName="ViewTransition";var dS=R.createContext(new Map);dS.displayName="Fetchers";var hS=R.createContext(null);hS.displayName="Await";var Ns=R.createContext(null);Ns.displayName="Navigation";var tu=R.createContext(null);tu.displayName="Location";var Ss=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ss.displayName="Route";var Sg=R.createContext(null);Sg.displayName="RouteError";function fS(e,{relative:t}={}){Zt(wl(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=R.useContext(Ns),{hash:a,pathname:l,search:h}=nu(e,{relative:t}),g=l;return n!=="/"&&(g=l==="/"?n:di([n,l])),r.createHref({pathname:g,search:h,hash:a})}function wl(){return R.useContext(tu)!=null}function bi(){return Zt(wl(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(tu).location}var m2="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function g2(e){R.useContext(Ns).static||R.useLayoutEffect(e)}function bl(){let{isDataRoute:e}=R.useContext(Ss);return e?_S():mS()}function mS(){Zt(wl(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(vl),{basename:t,navigator:n}=R.useContext(Ns),{matches:r}=R.useContext(Ss),{pathname:a}=bi(),l=JSON.stringify(Cg(r)),h=R.useRef(!1);return g2(()=>{h.current=!0}),R.useCallback((y,x={})=>{if(Es(h.current,m2),!h.current)return;if(typeof y=="number"){n.go(y);return}let w=Ng(y,JSON.parse(l),a,x.relative==="path");e==null&&t!=="/"&&(w.pathname=w.pathname==="/"?t:di([t,w.pathname])),(x.replace?n.replace:n.push)(w,x.state,x)},[t,n,l,a,e])}R.createContext(null);function El(){let{matches:e}=R.useContext(Ss),t=e[e.length-1];return t?t.params:{}}function nu(e,{relative:t}={}){let{matches:n}=R.useContext(Ss),{pathname:r}=bi(),a=JSON.stringify(Cg(n));return R.useMemo(()=>Ng(e,JSON.parse(a),r,t==="path"),[e,a,r,t])}function gS(e,t){return p2(e,t)}function p2(e,t,n,r){var T;Zt(wl(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=R.useContext(Ns),{matches:l}=R.useContext(Ss),h=l[l.length-1],g=h?h.params:{},y=h?h.pathname:"/",x=h?h.pathnameBase:"/",w=h&&h.route;{let A=w&&w.path||"";x2(y,!w||A.endsWith("*")||A.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${A}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${A}"> to <Route path="${A==="/"?"*":`${A}/*`}">.`)}let E=bi(),N;if(t){let A=typeof t=="string"?yl(t):t;Zt(x==="/"||((T=A.pathname)==null?void 0:T.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${A.pathname}" was given in the \`location\` prop.`),N=A}else N=E;let I=N.pathname||"/",D=I;if(x!=="/"){let A=x.replace(/^\//,"").split("/");D="/"+I.replace(/^\//,"").split("/").slice(A.length).join("/")}let O=c2(e,{pathname:D});Es(w||O!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Es(O==null||O[O.length-1].route.element!==void 0||O[O.length-1].route.Component!==void 0||O[O.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=wS(O&&O.map(A=>Object.assign({},A,{params:Object.assign({},g,A.params),pathname:di([x,a.encodeLocation?a.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?x:di([x,a.encodeLocation?a.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),l,n,r);return t&&V?R.createElement(tu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},V):V}function pS(){let e=SS(),t=cS(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:l},"ErrorBoundary")," or"," ",R.createElement("code",{style:l},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),n?R.createElement("pre",{style:a},n):null,h)}var xS=R.createElement(pS,null),yS=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(Ss.Provider,{value:this.props.routeContext},R.createElement(Sg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function vS({routeContext:e,match:t,children:n}){let r=R.useContext(vl);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Ss.Provider,{value:e},n)}function wS(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=n==null?void 0:n.errors;if(l!=null){let y=a.findIndex(x=>x.route.id&&(l==null?void 0:l[x.route.id])!==void 0);Zt(y>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,y+1))}let h=!1,g=-1;if(n)for(let y=0;y<a.length;y++){let x=a[y];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(g=y),x.route.id){let{loaderData:w,errors:E}=n,N=x.route.loader&&!w.hasOwnProperty(x.route.id)&&(!E||E[x.route.id]===void 0);if(x.route.lazy||N){h=!0,g>=0?a=a.slice(0,g+1):a=[a[0]];break}}}return a.reduceRight((y,x,w)=>{let E,N=!1,I=null,D=null;n&&(E=l&&x.route.id?l[x.route.id]:void 0,I=x.route.errorElement||xS,h&&(g<0&&w===0?(x2("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),N=!0,D=null):g===w&&(N=!0,D=x.route.hydrateFallbackElement||null)));let O=t.concat(a.slice(0,w+1)),V=()=>{let T;return E?T=I:N?T=D:x.route.Component?T=R.createElement(x.route.Component,null):x.route.element?T=x.route.element:T=y,R.createElement(vS,{match:x,routeContext:{outlet:y,matches:O,isDataRoute:n!=null},children:T})};return n&&(x.route.ErrorBoundary||x.route.errorElement||w===0)?R.createElement(yS,{location:n.location,revalidation:n.revalidation,component:I,error:E,children:V(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):V()},null)}function _g(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bS(e){let t=R.useContext(vl);return Zt(t,_g(e)),t}function ES(e){let t=R.useContext(xh);return Zt(t,_g(e)),t}function CS(e){let t=R.useContext(Ss);return Zt(t,_g(e)),t}function Ag(e){let t=CS(e),n=t.matches[t.matches.length-1];return Zt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function NS(){return Ag("useRouteId")}function SS(){var r;let e=R.useContext(Sg),t=ES("useRouteError"),n=Ag("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function _S(){let{router:e}=bS("useNavigate"),t=Ag("useNavigate"),n=R.useRef(!1);return g2(()=>{n.current=!0}),R.useCallback(async(a,l={})=>{Es(n.current,m2),n.current&&(typeof a=="number"?e.navigate(a):await e.navigate(a,{fromRouteId:t,...l}))},[e,t])}var Bp={};function x2(e,t,n){!t&&!Bp[e]&&(Bp[e]=!0,Es(!1,n))}R.memo(AS);function AS({routes:e,future:t,state:n}){return p2(e,void 0,n,t)}function yf({to:e,replace:t,state:n,relative:r}){Zt(wl(),"<Navigate> may be used only in the context of a <Router> component.");let{static:a}=R.useContext(Ns);Es(!a,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=R.useContext(Ss),{pathname:h}=bi(),g=bl(),y=Ng(e,Cg(l),h,r==="path"),x=JSON.stringify(y);return R.useEffect(()=>{g(JSON.parse(x),{replace:t,state:n,relative:r})},[g,x,r,t,n]),null}function Kt(e){Zt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function TS({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:a,static:l=!1}){Zt(!wl(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),g=R.useMemo(()=>({basename:h,navigator:a,static:l,future:{}}),[h,a,l]);typeof n=="string"&&(n=yl(n));let{pathname:y="/",search:x="",hash:w="",state:E=null,key:N="default"}=n,I=R.useMemo(()=>{let D=pi(y,h);return D==null?null:{location:{pathname:D,search:x,hash:w,state:E,key:N},navigationType:r}},[h,y,x,w,E,N,r]);return Es(I!=null,`<Router basename="${h}"> is not able to match the URL "${y}${x}${w}" because it does not start with the basename, so the <Router> won't render anything.`),I==null?null:R.createElement(Ns.Provider,{value:g},R.createElement(tu.Provider,{children:t,value:I}))}function Fp({children:e,location:t}){return gS(z0(e),t)}function z0(e,t=[]){let n=[];return R.Children.forEach(e,(r,a)=>{if(!R.isValidElement(r))return;let l=[...t,a];if(r.type===R.Fragment){n.push.apply(n,z0(r.props.children,l));return}Zt(r.type===Kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Zt(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=z0(r.props.children,l)),n.push(h)}),n}var od="get",ld="application/x-www-form-urlencoded";function yh(e){return e!=null&&typeof e.tagName=="string"}function IS(e){return yh(e)&&e.tagName.toLowerCase()==="button"}function jS(e){return yh(e)&&e.tagName.toLowerCase()==="form"}function kS(e){return yh(e)&&e.tagName.toLowerCase()==="input"}function RS(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function MS(e,t){return e.button===0&&(!t||t==="_self")&&!RS(e)}var Bu=null;function DS(){if(Bu===null)try{new FormData(document.createElement("form"),0),Bu=!1}catch{Bu=!0}return Bu}var OS=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function vf(e){return e!=null&&!OS.has(e)?(Es(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ld}"`),null):e}function PS(e,t){let n,r,a,l,h;if(jS(e)){let g=e.getAttribute("action");r=g?pi(g,t):null,n=e.getAttribute("method")||od,a=vf(e.getAttribute("enctype"))||ld,l=new FormData(e)}else if(IS(e)||kS(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let y=e.getAttribute("formaction")||g.getAttribute("action");if(r=y?pi(y,t):null,n=e.getAttribute("formmethod")||g.getAttribute("method")||od,a=vf(e.getAttribute("formenctype"))||vf(g.getAttribute("enctype"))||ld,l=new FormData(g,e),!DS()){let{name:x,type:w,value:E}=e;if(w==="image"){let N=x?`${x}.`:"";l.append(`${N}x`,"0"),l.append(`${N}y`,"0")}else x&&l.append(x,E)}}else{if(yh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=od,r=null,a=ld,h=e}return l&&a==="text/plain"&&(h=l,l=void 0),{action:r,method:n.toLowerCase(),encType:a,formData:l,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Tg(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function LS(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&pi(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function BS(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function FS(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function US(e,t,n){let r=await Promise.all(e.map(async a=>{let l=t.routes[a.route.id];if(l){let h=await BS(l,n);return h.links?h.links():[]}return[]}));return HS(r.flat(1).filter(FS).filter(a=>a.rel==="stylesheet"||a.rel==="preload").map(a=>a.rel==="stylesheet"?{...a,rel:"prefetch",as:"style"}:{...a,rel:"prefetch"}))}function Up(e,t,n,r,a,l){let h=(y,x)=>n[x]?y.route.id!==n[x].route.id:!0,g=(y,x)=>{var w;return n[x].pathname!==y.pathname||((w=n[x].route.path)==null?void 0:w.endsWith("*"))&&n[x].params["*"]!==y.params["*"]};return l==="assets"?t.filter((y,x)=>h(y,x)||g(y,x)):l==="data"?t.filter((y,x)=>{var E;let w=r.routes[y.route.id];if(!w||!w.hasLoader)return!1;if(h(y,x)||g(y,x))return!0;if(y.route.shouldRevalidate){let N=y.route.shouldRevalidate({currentUrl:new URL(a.pathname+a.search+a.hash,window.origin),currentParams:((E=n[0])==null?void 0:E.params)||{},nextUrl:new URL(e,window.origin),nextParams:y.params,defaultShouldRevalidate:!0});if(typeof N=="boolean")return N}return!0}):[]}function VS(e,t,{includeHydrateFallback:n}={}){return zS(e.map(r=>{let a=t.routes[r.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),n&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1))}function zS(e){return[...new Set(e)]}function $S(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function HS(e,t){let n=new Set;return new Set(t),e.reduce((r,a)=>{let l=JSON.stringify($S(a));return n.has(l)||(n.add(l),r.push({key:l,link:a})),r},[])}function y2(){let e=R.useContext(vl);return Tg(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function WS(){let e=R.useContext(xh);return Tg(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ig=R.createContext(void 0);Ig.displayName="FrameworkContext";function v2(){let e=R.useContext(Ig);return Tg(e,"You must render this element inside a <HydratedRouter> element"),e}function GS(e,t){let n=R.useContext(Ig),[r,a]=R.useState(!1),[l,h]=R.useState(!1),{onFocus:g,onBlur:y,onMouseEnter:x,onMouseLeave:w,onTouchStart:E}=t,N=R.useRef(null);R.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let O=T=>{T.forEach(A=>{h(A.isIntersecting)})},V=new IntersectionObserver(O,{threshold:.5});return N.current&&V.observe(N.current),()=>{V.disconnect()}}},[e]),R.useEffect(()=>{if(r){let O=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(O)}}},[r]);let I=()=>{a(!0)},D=()=>{a(!1),h(!1)};return n?e!=="intent"?[l,N,{}]:[l,N,{onFocus:Yl(g,I),onBlur:Yl(y,D),onMouseEnter:Yl(x,I),onMouseLeave:Yl(w,D),onTouchStart:Yl(E,I)}]:[!1,N,{}]}function Yl(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function qS({page:e,...t}){let{router:n}=y2(),r=R.useMemo(()=>c2(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?R.createElement(YS,{page:e,matches:r,...t}):null}function KS(e){let{manifest:t,routeModules:n}=v2(),[r,a]=R.useState([]);return R.useEffect(()=>{let l=!1;return US(e,t,n).then(h=>{l||a(h)}),()=>{l=!0}},[e,t,n]),r}function YS({page:e,matches:t,...n}){let r=bi(),{manifest:a,routeModules:l}=v2(),{basename:h}=y2(),{loaderData:g,matches:y}=WS(),x=R.useMemo(()=>Up(e,t,y,a,r,"data"),[e,t,y,a,r]),w=R.useMemo(()=>Up(e,t,y,a,r,"assets"),[e,t,y,a,r]),E=R.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let D=new Set,O=!1;if(t.forEach(T=>{var _;let A=a.routes[T.route.id];!A||!A.hasLoader||(!x.some(M=>M.route.id===T.route.id)&&T.route.id in g&&((_=l[T.route.id])!=null&&_.shouldRevalidate)||A.hasClientLoader?O=!0:D.add(T.route.id))}),D.size===0)return[];let V=LS(e,h,"data");return O&&D.size>0&&V.searchParams.set("_routes",t.filter(T=>D.has(T.route.id)).map(T=>T.route.id).join(",")),[V.pathname+V.search]},[h,g,r,a,x,t,e,l]),N=R.useMemo(()=>VS(w,a),[w,a]),I=KS(w);return R.createElement(R.Fragment,null,E.map(D=>R.createElement("link",{key:D,rel:"prefetch",as:"fetch",href:D,...n})),N.map(D=>R.createElement("link",{key:D,rel:"modulepreload",href:D,...n})),I.map(({key:D,link:O})=>R.createElement("link",{key:D,...O})))}function XS(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var w2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{w2&&(window.__reactRouterVersion="7.7.0")}catch{}function QS({basename:e,children:t,window:n}){let r=R.useRef();r.current==null&&(r.current=UN({window:n,v5Compat:!0}));let a=r.current,[l,h]=R.useState({action:a.action,location:a.location}),g=R.useCallback(y=>{R.startTransition(()=>h(y))},[h]);return R.useLayoutEffect(()=>a.listen(g),[a,g]),R.createElement(TS,{basename:e,children:t,location:l.location,navigationType:l.action,navigator:a})}var b2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,er=R.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:a,reloadDocument:l,replace:h,state:g,target:y,to:x,preventScrollReset:w,viewTransition:E,...N},I){let{basename:D}=R.useContext(Ns),O=typeof x=="string"&&b2.test(x),V,T=!1;if(typeof x=="string"&&O&&(V=x,w2))try{let q=new URL(window.location.href),ne=x.startsWith("//")?new URL(q.protocol+x):new URL(x),he=pi(ne.pathname,D);ne.origin===q.origin&&he!=null?x=he+ne.search+ne.hash:T=!0}catch{Es(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=fS(x,{relative:a}),[_,M,H]=GS(r,N),$=t_(x,{replace:h,state:g,target:y,preventScrollReset:w,relative:a,viewTransition:E});function F(q){t&&t(q),q.defaultPrevented||$(q)}let U=R.createElement("a",{...N,...H,href:V||A,onClick:T||l?t:F,ref:XS(I,M),target:y,"data-discover":!O&&n==="render"?"true":void 0});return _&&!O?R.createElement(R.Fragment,null,U,R.createElement(qS,{page:A})):U});er.displayName="Link";var ZS=R.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:a=!1,style:l,to:h,viewTransition:g,children:y,...x},w){let E=nu(h,{relative:x.relative}),N=bi(),I=R.useContext(xh),{navigator:D,basename:O}=R.useContext(Ns),V=I!=null&&a_(E)&&g===!0,T=D.encodeLocation?D.encodeLocation(E).pathname:E.pathname,A=N.pathname,_=I&&I.navigation&&I.navigation.location?I.navigation.location.pathname:null;n||(A=A.toLowerCase(),_=_?_.toLowerCase():null,T=T.toLowerCase()),_&&O&&(_=pi(_,O)||_);const M=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let H=A===T||!a&&A.startsWith(T)&&A.charAt(M)==="/",$=_!=null&&(_===T||!a&&_.startsWith(T)&&_.charAt(T.length)==="/"),F={isActive:H,isPending:$,isTransitioning:V},U=H?t:void 0,q;typeof r=="function"?q=r(F):q=[r,H?"active":null,$?"pending":null,V?"transitioning":null].filter(Boolean).join(" ");let ne=typeof l=="function"?l(F):l;return R.createElement(er,{...x,"aria-current":U,className:q,ref:w,style:ne,to:h,viewTransition:g},typeof y=="function"?y(F):y)});ZS.displayName="NavLink";var JS=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:a,state:l,method:h=od,action:g,onSubmit:y,relative:x,preventScrollReset:w,viewTransition:E,...N},I)=>{let D=s_(),O=i_(g,{relative:x}),V=h.toLowerCase()==="get"?"get":"post",T=typeof g=="string"&&b2.test(g),A=_=>{if(y&&y(_),_.defaultPrevented)return;_.preventDefault();let M=_.nativeEvent.submitter,H=(M==null?void 0:M.getAttribute("formmethod"))||h;D(M||_.currentTarget,{fetcherKey:t,method:H,navigate:n,replace:a,state:l,relative:x,preventScrollReset:w,viewTransition:E})};return R.createElement("form",{ref:I,method:V,action:O,onSubmit:r?y:A,...N,"data-discover":!T&&e==="render"?"true":void 0})});JS.displayName="Form";function e_(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function E2(e){let t=R.useContext(vl);return Zt(t,e_(e)),t}function t_(e,{target:t,replace:n,state:r,preventScrollReset:a,relative:l,viewTransition:h}={}){let g=bl(),y=bi(),x=nu(e,{relative:l});return R.useCallback(w=>{if(MS(w,t)){w.preventDefault();let E=n!==void 0?n:Fc(y)===Fc(x);g(e,{replace:E,state:r,preventScrollReset:a,relative:l,viewTransition:h})}},[y,g,x,n,r,t,e,a,l,h])}var n_=0,r_=()=>`__${String(++n_)}__`;function s_(){let{router:e}=E2("useSubmit"),{basename:t}=R.useContext(Ns),n=NS();return R.useCallback(async(r,a={})=>{let{action:l,method:h,encType:g,formData:y,body:x}=PS(r,t);if(a.navigate===!1){let w=a.fetcherKey||r_();await e.fetch(w,n,a.action||l,{preventScrollReset:a.preventScrollReset,formData:y,body:x,formMethod:a.method||h,formEncType:a.encType||g,flushSync:a.flushSync})}else await e.navigate(a.action||l,{preventScrollReset:a.preventScrollReset,formData:y,body:x,formMethod:a.method||h,formEncType:a.encType||g,replace:a.replace,state:a.state,fromRouteId:n,flushSync:a.flushSync,viewTransition:a.viewTransition})},[e,t,n])}function i_(e,{relative:t}={}){let{basename:n}=R.useContext(Ns),r=R.useContext(Ss);Zt(r,"useFormAction must be used inside a RouteContext");let[a]=r.matches.slice(-1),l={...nu(e||".",{relative:t})},h=bi();if(e==null){l.search=h.search;let g=new URLSearchParams(l.search),y=g.getAll("index");if(y.some(w=>w==="")){g.delete("index"),y.filter(E=>E).forEach(E=>g.append("index",E));let w=g.toString();l.search=w?`?${w}`:""}}return(!e||e===".")&&a.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(l.pathname=l.pathname==="/"?n:di([n,l.pathname])),Fc(l)}function a_(e,t={}){let n=R.useContext(f2);Zt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=E2("useViewTransitionState"),a=nu(e,{relative:t.relative});if(!n.isTransitioning)return!1;let l=pi(n.currentLocation.pathname,r)||n.currentLocation.pathname,h=pi(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Bd(a.pathname,h)!=null||Bd(a.pathname,l)!=null}let o_={data:""},l_=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||o_,c_=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,u_=/\/\*[^]*?\*\/|  +/g,Vp=/\n+/g,Fi=(e,t)=>{let n="",r="",a="";for(let l in e){let h=e[l];l[0]=="@"?l[1]=="i"?n=l+" "+h+";":r+=l[1]=="f"?Fi(h,l):l+"{"+Fi(h,l[1]=="k"?"":t)+"}":typeof h=="object"?r+=Fi(h,t?t.replace(/([^,])+/g,g=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,y=>/&/.test(y)?y.replace(/&/g,g):g?g+" "+y:y)):l):h!=null&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Fi.p?Fi.p(l,h):l+":"+h+";")}return n+(t&&a?t+"{"+a+"}":a)+r},ni={},C2=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+C2(e[n]);return t}return e},d_=(e,t,n,r,a)=>{let l=C2(e),h=ni[l]||(ni[l]=(y=>{let x=0,w=11;for(;x<y.length;)w=101*w+y.charCodeAt(x++)>>>0;return"go"+w})(l));if(!ni[h]){let y=l!==e?e:(x=>{let w,E,N=[{}];for(;w=c_.exec(x.replace(u_,""));)w[4]?N.shift():w[3]?(E=w[3].replace(Vp," ").trim(),N.unshift(N[0][E]=N[0][E]||{})):N[0][w[1]]=w[2].replace(Vp," ").trim();return N[0]})(e);ni[h]=Fi(a?{["@keyframes "+h]:y}:y,n?"":"."+h)}let g=n&&ni.g?ni.g:null;return n&&(ni.g=ni[h]),((y,x,w,E)=>{E?x.data=x.data.replace(E,y):x.data.indexOf(y)===-1&&(x.data=w?y+x.data:x.data+y)})(ni[h],t,r,g),h},h_=(e,t,n)=>e.reduce((r,a,l)=>{let h=t[l];if(h&&h.call){let g=h(n),y=g&&g.props&&g.props.className||/^go/.test(g)&&g;h=y?"."+y:g&&typeof g=="object"?g.props?"":Fi(g,""):g===!1?"":g}return r+a+(h??"")},"");function vh(e){let t=this||{},n=e.call?e(t.p):e;return d_(n.unshift?n.raw?h_(n,[].slice.call(arguments,1),t.p):n.reduce((r,a)=>Object.assign(r,a&&a.call?a(t.p):a),{}):n,l_(t.target),t.g,t.o,t.k)}let N2,$0,H0;vh.bind({g:1});let xi=vh.bind({k:1});function f_(e,t,n,r){Fi.p=t,N2=e,$0=n,H0=r}function la(e,t){let n=this||{};return function(){let r=arguments;function a(l,h){let g=Object.assign({},l),y=g.className||a.className;n.p=Object.assign({theme:$0&&$0()},g),n.o=/ *go\d+/.test(y),g.className=vh.apply(n,r)+(y?" "+y:"");let x=e;return e[0]&&(x=g.as||e,delete g.as),H0&&x[0]&&H0(g),N2(x,g)}return a}}var m_=e=>typeof e=="function",Fd=(e,t)=>m_(e)?e(t):e,g_=(()=>{let e=0;return()=>(++e).toString()})(),S2=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),p_=20,_2=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,p_)};case 1:return{...e,toasts:e.toasts.map(l=>l.id===t.toast.id?{...l,...t.toast}:l)};case 2:let{toast:n}=t;return _2(e,{type:e.toasts.find(l=>l.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(l=>l.id===r||r===void 0?{...l,dismissed:!0,visible:!1}:l)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(l=>l.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(l=>({...l,pauseDuration:l.pauseDuration+a}))}}},cd=[],Pa={toasts:[],pausedAt:void 0},Za=e=>{Pa=_2(Pa,e),cd.forEach(t=>{t(Pa)})},x_={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},y_=(e={})=>{let[t,n]=R.useState(Pa),r=R.useRef(Pa);R.useEffect(()=>(r.current!==Pa&&n(Pa),cd.push(n),()=>{let l=cd.indexOf(n);l>-1&&cd.splice(l,1)}),[]);let a=t.toasts.map(l=>{var h,g,y;return{...e,...e[l.type],...l,removeDelay:l.removeDelay||((h=e[l.type])==null?void 0:h.removeDelay)||(e==null?void 0:e.removeDelay),duration:l.duration||((g=e[l.type])==null?void 0:g.duration)||(e==null?void 0:e.duration)||x_[l.type],style:{...e.style,...(y=e[l.type])==null?void 0:y.style,...l.style}}});return{...t,toasts:a}},v_=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||g_()}),ru=e=>(t,n)=>{let r=v_(t,e,n);return Za({type:2,toast:r}),r.id},nr=(e,t)=>ru("blank")(e,t);nr.error=ru("error");nr.success=ru("success");nr.loading=ru("loading");nr.custom=ru("custom");nr.dismiss=e=>{Za({type:3,toastId:e})};nr.remove=e=>Za({type:4,toastId:e});nr.promise=(e,t,n)=>{let r=nr.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let l=t.success?Fd(t.success,a):void 0;return l?nr.success(l,{id:r,...n,...n==null?void 0:n.success}):nr.dismiss(r),a}).catch(a=>{let l=t.error?Fd(t.error,a):void 0;l?nr.error(l,{id:r,...n,...n==null?void 0:n.error}):nr.dismiss(r)}),e};var w_=(e,t)=>{Za({type:1,toast:{id:e,height:t}})},b_=()=>{Za({type:5,time:Date.now()})},fc=new Map,E_=1e3,C_=(e,t=E_)=>{if(fc.has(e))return;let n=setTimeout(()=>{fc.delete(e),Za({type:4,toastId:e})},t);fc.set(e,n)},N_=e=>{let{toasts:t,pausedAt:n}=y_(e);R.useEffect(()=>{if(n)return;let l=Date.now(),h=t.map(g=>{if(g.duration===1/0)return;let y=(g.duration||0)+g.pauseDuration-(l-g.createdAt);if(y<0){g.visible&&nr.dismiss(g.id);return}return setTimeout(()=>nr.dismiss(g.id),y)});return()=>{h.forEach(g=>g&&clearTimeout(g))}},[t,n]);let r=R.useCallback(()=>{n&&Za({type:6,time:Date.now()})},[n]),a=R.useCallback((l,h)=>{let{reverseOrder:g=!1,gutter:y=8,defaultPosition:x}=h||{},w=t.filter(I=>(I.position||x)===(l.position||x)&&I.height),E=w.findIndex(I=>I.id===l.id),N=w.filter((I,D)=>D<E&&I.visible).length;return w.filter(I=>I.visible).slice(...g?[N+1]:[0,N]).reduce((I,D)=>I+(D.height||0)+y,0)},[t]);return R.useEffect(()=>{t.forEach(l=>{if(l.dismissed)C_(l.id,l.removeDelay);else{let h=fc.get(l.id);h&&(clearTimeout(h),fc.delete(l.id))}})},[t]),{toasts:t,handlers:{updateHeight:w_,startPause:b_,endPause:r,calculateOffset:a}}},S_=xi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,__=xi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,A_=xi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,T_=la("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${S_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${__} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${A_} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,I_=xi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,j_=la("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${I_} 1s linear infinite;
`,k_=xi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,R_=xi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,M_=la("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${k_} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${R_} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,D_=la("div")`
  position: absolute;
`,O_=la("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,P_=xi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,L_=la("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${P_} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,B_=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?R.createElement(L_,null,t):t:n==="blank"?null:R.createElement(O_,null,R.createElement(j_,{...r}),n!=="loading"&&R.createElement(D_,null,n==="error"?R.createElement(T_,{...r}):R.createElement(M_,{...r})))},F_=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,U_=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,V_="0%{opacity:0;} 100%{opacity:1;}",z_="0%{opacity:1;} 100%{opacity:0;}",$_=la("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,H_=la("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,W_=(e,t)=>{let n=e.includes("top")?1:-1,[r,a]=S2()?[V_,z_]:[F_(n),U_(n)];return{animation:t?`${xi(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${xi(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},G_=R.memo(({toast:e,position:t,style:n,children:r})=>{let a=e.height?W_(e.position||t||"top-center",e.visible):{opacity:0},l=R.createElement(B_,{toast:e}),h=R.createElement(H_,{...e.ariaProps},Fd(e.message,e));return R.createElement($_,{className:e.className,style:{...a,...n,...e.style}},typeof r=="function"?r({icon:l,message:h}):R.createElement(R.Fragment,null,l,h))});f_(R.createElement);var q_=({id:e,className:t,style:n,onHeightUpdate:r,children:a})=>{let l=R.useCallback(h=>{if(h){let g=()=>{let y=h.getBoundingClientRect().height;r(e,y)};g(),new MutationObserver(g).observe(h,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return R.createElement("div",{ref:l,className:t,style:n},a)},K_=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:S2()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...a}},Y_=vh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Fu=16,X_=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:a,containerStyle:l,containerClassName:h})=>{let{toasts:g,handlers:y}=N_(n);return R.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Fu,left:Fu,right:Fu,bottom:Fu,pointerEvents:"none",...l},className:h,onMouseEnter:y.startPause,onMouseLeave:y.endPause},g.map(x=>{let w=x.position||t,E=y.calculateOffset(x,{reverseOrder:e,gutter:r,defaultPosition:t}),N=K_(w,E);return R.createElement(q_,{id:x.id,key:x.id,onHeightUpdate:y.updateHeight,className:x.visible?Y_:"",style:N},x.type==="custom"?Fd(x.message,x):a?a(x):R.createElement(G_,{toast:x,position:w}))}))},ue=nr;const Q_="modulepreload",Z_=function(e){return"/"+e},zp={},su=function(t,n,r){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const h=document.querySelector("meta[property=csp-nonce]"),g=(h==null?void 0:h.nonce)||(h==null?void 0:h.getAttribute("nonce"));a=Promise.allSettled(n.map(y=>{if(y=Z_(y),y in zp)return;zp[y]=!0;const x=y.endsWith(".css"),w=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${y}"]${w}`))return;const E=document.createElement("link");if(E.rel=x?"stylesheet":Q_,x||(E.as="script"),E.crossOrigin="",E.href=y,g&&E.setAttribute("nonce",g),document.head.appendChild(E),x)return new Promise((N,I)=>{E.addEventListener("load",N),E.addEventListener("error",()=>I(new Error(`Unable to preload CSS for ${y}`)))})}))}function l(h){const g=new Event("vite:preloadError",{cancelable:!0});if(g.payload=h,window.dispatchEvent(g),!g.defaultPrevented)throw h}return a.then(h=>{for(const g of h||[])g.status==="rejected"&&l(g.reason);return t().catch(l)})},J_=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>su(async()=>{const{default:r}=await Promise.resolve().then(()=>Cl);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class jg extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class eA extends jg{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class $p extends jg{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Hp extends jg{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var W0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(W0||(W0={}));var tA=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};class nA{constructor(t,{headers:n={},customFetch:r,region:a=W0.Any}={}){this.url=t,this.headers=n,this.region=a,this.fetch=J_(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return tA(this,void 0,void 0,function*(){try{const{headers:a,method:l,body:h}=n;let g={},{region:y}=n;y||(y=this.region);const x=new URL(`${this.url}/${t}`);y&&y!=="any"&&(g["x-region"]=y,x.searchParams.set("forceFunctionRegion",y));let w;h&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&h instanceof Blob||h instanceof ArrayBuffer?(g["Content-Type"]="application/octet-stream",w=h):typeof h=="string"?(g["Content-Type"]="text/plain",w=h):typeof FormData<"u"&&h instanceof FormData?w=h:(g["Content-Type"]="application/json",w=JSON.stringify(h)));const E=yield this.fetch(x.toString(),{method:l||"POST",headers:Object.assign(Object.assign(Object.assign({},g),this.headers),a),body:w}).catch(O=>{throw new eA(O)}),N=E.headers.get("x-relay-error");if(N&&N==="true")throw new $p(E);if(!E.ok)throw new Hp(E);let I=((r=E.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),D;return I==="application/json"?D=yield E.json():I==="application/octet-stream"?D=yield E.blob():I==="text/event-stream"?D=E:I==="multipart/form-data"?D=yield E.formData():D=yield E.text(),{data:D,error:null,response:E}}catch(a){return{data:null,error:a,response:a instanceof Hp||a instanceof $p?a.context:void 0}}})}}var mr={},kg={},wh={},iu={},bh={},Eh={},rA=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},il=rA();const sA=il.fetch,A2=il.fetch.bind(il),T2=il.Headers,iA=il.Request,aA=il.Response,Cl=Object.freeze(Object.defineProperty({__proto__:null,Headers:T2,Request:iA,Response:aA,default:A2,fetch:sA},Symbol.toStringTag,{value:"Module"})),oA=mC(Cl);var Ch={};Object.defineProperty(Ch,"__esModule",{value:!0});let lA=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Ch.default=lA;var I2=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Eh,"__esModule",{value:!0});const cA=I2(oA),uA=I2(Ch);let dA=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=cA.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let a=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var h,g,y;let x=null,w=null,E=null,N=l.status,I=l.statusText;if(l.ok){if(this.method!=="HEAD"){const T=await l.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?w=T:w=JSON.parse(T))}const O=(h=this.headers.Prefer)===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),V=(g=l.headers.get("content-range"))===null||g===void 0?void 0:g.split("/");O&&V&&V.length>1&&(E=parseInt(V[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(x={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,E=null,N=406,I="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const O=await l.text();try{x=JSON.parse(O),Array.isArray(x)&&l.status===404&&(w=[],x=null,N=200,I="OK")}catch{l.status===404&&O===""?(N=204,I="No Content"):x={message:O}}if(x&&this.isMaybeSingle&&(!((y=x==null?void 0:x.details)===null||y===void 0)&&y.includes("0 rows"))&&(x=null,N=200,I="OK"),x&&this.shouldThrowOnError)throw new uA.default(x)}return{error:x,data:w,count:E,status:N,statusText:I}});return this.shouldThrowOnError||(a=a.catch(l=>{var h,g,y;return{error:{message:`${(h=l==null?void 0:l.name)!==null&&h!==void 0?h:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(g=l==null?void 0:l.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=l==null?void 0:l.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,n)}returns(){return this}overrideTypes(){return this}};Eh.default=dA;var hA=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(bh,"__esModule",{value:!0});const fA=hA(Eh);let mA=class extends fA.default{select(t){let n=!1;const r=(t??"*").split("").map(a=>/\s/.test(a)&&!n?"":(a==='"'&&(n=!n),a)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:a,referencedTable:l=a}={}){const h=l?`${l}.order`:"order",g=this.url.searchParams.get(h);return this.url.searchParams.set(h,`${g?`${g},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:a=r}={}){const l=typeof a>"u"?"offset":`${a}.offset`,h=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(l,`${t}`),this.url.searchParams.set(h,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:a=!1,wal:l=!1,format:h="text"}={}){var g;const y=[t?"analyze":null,n?"verbose":null,r?"settings":null,a?"buffers":null,l?"wal":null].filter(Boolean).join("|"),x=(g=this.headers.Accept)!==null&&g!==void 0?g:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${h}; for="${x}"; options=${y};`,h==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};bh.default=mA;var gA=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(iu,"__esModule",{value:!0});const pA=gA(bh);let xA=class extends pA.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:a}={}){let l="";a==="plain"?l="pl":a==="phrase"?l="ph":a==="websearch"&&(l="w");const h=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${l}fts${h}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const a=r?`${r}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};iu.default=xA;var yA=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(wh,"__esModule",{value:!0});const Xl=yA(iu);let vA=class{constructor(t,{headers:n={},schema:r,fetch:a}){this.url=t,this.headers=n,this.schema=r,this.fetch=a}select(t,{head:n=!1,count:r}={}){const a=n?"HEAD":"GET";let l=!1;const h=(t??"*").split("").map(g=>/\s/.test(g)&&!l?"":(g==='"'&&(l=!l),g)).join("");return this.url.searchParams.set("select",h),r&&(this.headers.Prefer=`count=${r}`),new Xl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const a="POST",l=[];if(this.headers.Prefer&&l.push(this.headers.Prefer),n&&l.push(`count=${n}`),r||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const h=t.reduce((g,y)=>g.concat(Object.keys(y)),[]);if(h.length>0){const g=[...new Set(h)].map(y=>`"${y}"`);this.url.searchParams.set("columns",g.join(","))}}return new Xl.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:a,defaultToNull:l=!0}={}){const h="POST",g=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&g.push(this.headers.Prefer),a&&g.push(`count=${a}`),l||g.push("missing=default"),this.headers.Prefer=g.join(","),Array.isArray(t)){const y=t.reduce((x,w)=>x.concat(Object.keys(w)),[]);if(y.length>0){const x=[...new Set(y)].map(w=>`"${w}"`);this.url.searchParams.set("columns",x.join(","))}}return new Xl.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),this.headers.Prefer=a.join(","),new Xl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new Xl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};wh.default=vA;var Nh={},Sh={};Object.defineProperty(Sh,"__esModule",{value:!0});Sh.version=void 0;Sh.version="0.0.0-automated";Object.defineProperty(Nh,"__esModule",{value:!0});Nh.DEFAULT_HEADERS=void 0;const wA=Sh;Nh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${wA.version}`};var j2=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(kg,"__esModule",{value:!0});const bA=j2(wh),EA=j2(iu),CA=Nh;let NA=class k2{constructor(t,{headers:n={},schema:r,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},CA.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=a}from(t){const n=new URL(`${this.url}/${t}`);return new bA.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new k2(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:a=!1,count:l}={}){let h;const g=new URL(`${this.url}/rpc/${t}`);let y;r||a?(h=r?"HEAD":"GET",Object.entries(n).filter(([w,E])=>E!==void 0).map(([w,E])=>[w,Array.isArray(E)?`{${E.join(",")}}`:`${E}`]).forEach(([w,E])=>{g.searchParams.append(w,E)})):(h="POST",y=n);const x=Object.assign({},this.headers);return l&&(x.Prefer=`count=${l}`),new EA.default({method:h,url:g,headers:x,schema:this.schemaName,body:y,fetch:this.fetch,allowEmpty:!1})}};kg.default=NA;var Nl=Sn&&Sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(mr,"__esModule",{value:!0});mr.PostgrestError=mr.PostgrestBuilder=mr.PostgrestTransformBuilder=mr.PostgrestFilterBuilder=mr.PostgrestQueryBuilder=mr.PostgrestClient=void 0;const R2=Nl(kg);mr.PostgrestClient=R2.default;const M2=Nl(wh);mr.PostgrestQueryBuilder=M2.default;const D2=Nl(iu);mr.PostgrestFilterBuilder=D2.default;const O2=Nl(bh);mr.PostgrestTransformBuilder=O2.default;const P2=Nl(Eh);mr.PostgrestBuilder=P2.default;const L2=Nl(Ch);mr.PostgrestError=L2.default;var SA=mr.default={PostgrestClient:R2.default,PostgrestQueryBuilder:M2.default,PostgrestFilterBuilder:D2.default,PostgrestTransformBuilder:O2.default,PostgrestBuilder:P2.default,PostgrestError:L2.default};const{PostgrestClient:_A,PostgrestQueryBuilder:XM,PostgrestFilterBuilder:QM,PostgrestTransformBuilder:ZM,PostgrestBuilder:JM,PostgrestError:eD}=SA;function AA(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const TA=AA(),IA="2.11.15",jA=`realtime-js/${IA}`,kA="1.0.0",B2=1e4,RA=1e3;var mc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(mc||(mc={}));var Wn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Wn||(Wn={}));var fs;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(fs||(fs={}));var G0;(function(e){e.websocket="websocket"})(G0||(G0={}));var Ra;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Ra||(Ra={}));class MA{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const a=n.getUint8(1),l=n.getUint8(2);let h=this.HEADER_LENGTH+2;const g=r.decode(t.slice(h,h+a));h=h+a;const y=r.decode(t.slice(h,h+l));h=h+l;const x=JSON.parse(r.decode(t.slice(h,t.byteLength)));return{ref:null,topic:g,event:y,payload:x}}}class F2{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Vt;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Vt||(Vt={}));const Wp=(e,t,n={})=>{var r;const a=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((l,h)=>(l[h]=DA(h,e,t,a),l),{})},DA=(e,t,n,r)=>{const a=t.find(g=>g.name===e),l=a==null?void 0:a.type,h=n[e];return l&&!r.includes(l)?U2(l,h):q0(h)},U2=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return BA(t,n)}switch(e){case Vt.bool:return OA(t);case Vt.float4:case Vt.float8:case Vt.int2:case Vt.int4:case Vt.int8:case Vt.numeric:case Vt.oid:return PA(t);case Vt.json:case Vt.jsonb:return LA(t);case Vt.timestamp:return FA(t);case Vt.abstime:case Vt.date:case Vt.daterange:case Vt.int4range:case Vt.int8range:case Vt.money:case Vt.reltime:case Vt.text:case Vt.time:case Vt.timestamptz:case Vt.timetz:case Vt.tsrange:case Vt.tstzrange:return q0(t);default:return q0(t)}},q0=e=>e,OA=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},PA=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},LA=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},BA=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let l;const h=e.slice(1,n);try{l=JSON.parse("["+h+"]")}catch{l=h?h.split(","):[]}return l.map(g=>U2(t,g))}return e},FA=e=>typeof e=="string"?e.replace(" ","T"):e,V2=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class wf{constructor(t,n,r={},a=B2){this.channel=t,this.event=n,this.payload=r,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Gp;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Gp||(Gp={}));class gc{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},a=>{const{onJoin:l,onLeave:h,onSync:g}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gc.syncState(this.state,a,l,h),this.pendingDiffs.forEach(y=>{this.state=gc.syncDiff(this.state,y,l,h)}),this.pendingDiffs=[],g()}),this.channel._on(r.diff,{},a=>{const{onJoin:l,onLeave:h,onSync:g}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=gc.syncDiff(this.state,a,l,h),g())}),this.onJoin((a,l,h)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:l,newPresences:h})}),this.onLeave((a,l,h)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:l,leftPresences:h})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,a){const l=this.cloneDeep(t),h=this.transformState(n),g={},y={};return this.map(l,(x,w)=>{h[x]||(y[x]=w)}),this.map(h,(x,w)=>{const E=l[x];if(E){const N=w.map(V=>V.presence_ref),I=E.map(V=>V.presence_ref),D=w.filter(V=>I.indexOf(V.presence_ref)<0),O=E.filter(V=>N.indexOf(V.presence_ref)<0);D.length>0&&(g[x]=D),O.length>0&&(y[x]=O)}else g[x]=w}),this.syncDiff(l,{joins:g,leaves:y},r,a)}static syncDiff(t,n,r,a){const{joins:l,leaves:h}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),a||(a=()=>{}),this.map(l,(g,y)=>{var x;const w=(x=t[g])!==null&&x!==void 0?x:[];if(t[g]=this.cloneDeep(y),w.length>0){const E=t[g].map(I=>I.presence_ref),N=w.filter(I=>E.indexOf(I.presence_ref)<0);t[g].unshift(...N)}r(g,w,y)}),this.map(h,(g,y)=>{let x=t[g];if(!x)return;const w=y.map(E=>E.presence_ref);x=x.filter(E=>w.indexOf(E.presence_ref)<0),t[g]=x,a(g,x,y),x.length===0&&delete t[g]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const a=t[r];return"metas"in a?n[r]=a.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):n[r]=a,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var qp;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(qp||(qp={}));var Kp;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Kp||(Kp={}));var ii;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ii||(ii={}));class Rg{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=Wn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new wf(this,fs.join,this.params,this.timeout),this.rejoinTimer=new F2(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Wn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Wn.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Wn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fs.reply,{},(a,l)=>{this._trigger(this._replyEventName(l),a)}),this.presence=new gc(this),this.broadcastEndpointURL=V2(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Wn.closed){const{config:{broadcast:l,presence:h,private:g}}=this.params;this._onError(w=>t==null?void 0:t(ii.CHANNEL_ERROR,w)),this._onClose(()=>t==null?void 0:t(ii.CLOSED));const y={},x={broadcast:l,presence:h,postgres_changes:(a=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(w=>w.filter))!==null&&a!==void 0?a:[],private:g};this.socket.accessTokenValue&&(y.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},y)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:w})=>{var E;if(this.socket.setAuth(),w===void 0){t==null||t(ii.SUBSCRIBED);return}else{const N=this.bindings.postgres_changes,I=(E=N==null?void 0:N.length)!==null&&E!==void 0?E:0,D=[];for(let O=0;O<I;O++){const V=N[O],{filter:{event:T,schema:A,table:_,filter:M}}=V,H=w&&w[O];if(H&&H.event===T&&H.schema===A&&H.table===_&&H.filter===M)D.push(Object.assign(Object.assign({},V),{id:H.id}));else{this.unsubscribe(),this.state=Wn.errored,t==null||t(ii.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=D,t&&t(ii.SUBSCRIBED);return}}).receive("error",w=>{this.state=Wn.errored,t==null||t(ii.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(w).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ii.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,a;if(!this._canPush()&&t.type==="broadcast"){const{event:l,payload:h}=t,y={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:h,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,y,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((a=x.body)===null||a===void 0?void 0:a.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var h,g,y;const x=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((y=(g=(h=this.params)===null||h===void 0?void 0:h.config)===null||g===void 0?void 0:g.broadcast)===null||y===void 0)&&y.ack)&&l("ok"),x.receive("ok",()=>l("ok")),x.receive("error",()=>l("error")),x.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Wn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(a=>{r=new wf(this,fs.leave,{},t),r.receive("ok",()=>{n(),a("ok")}).receive("timeout",()=>{n(),a("timed out")}).receive("error",()=>{a("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const a=new AbortController,l=setTimeout(()=>a.abort(),r),h=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:a.signal}));return clearTimeout(l),h}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new wf(this,t,n,r);return this._canPush()?a.send():(a.startTimeout(),this.pushBuffer.push(a)),a}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var a,l;const h=t.toLocaleLowerCase(),{close:g,error:y,leave:x,join:w}=fs;if(r&&[g,y,x,w].indexOf(h)>=0&&r!==this._joinRef())return;let N=this._onMessage(h,n,r);if(n&&!N)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(h)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(I=>{var D,O,V;return((D=I.filter)===null||D===void 0?void 0:D.event)==="*"||((V=(O=I.filter)===null||O===void 0?void 0:O.event)===null||V===void 0?void 0:V.toLocaleLowerCase())===h}).map(I=>I.callback(N,r)):(l=this.bindings[h])===null||l===void 0||l.filter(I=>{var D,O,V,T,A,_;if(["broadcast","presence","postgres_changes"].includes(h))if("id"in I){const M=I.id,H=(D=I.filter)===null||D===void 0?void 0:D.event;return M&&((O=n.ids)===null||O===void 0?void 0:O.includes(M))&&(H==="*"||(H==null?void 0:H.toLocaleLowerCase())===((V=n.data)===null||V===void 0?void 0:V.type.toLocaleLowerCase()))}else{const M=(A=(T=I==null?void 0:I.filter)===null||T===void 0?void 0:T.event)===null||A===void 0?void 0:A.toLocaleLowerCase();return M==="*"||M===((_=n==null?void 0:n.event)===null||_===void 0?void 0:_.toLocaleLowerCase())}else return I.type.toLocaleLowerCase()===h}).map(I=>{if(typeof N=="object"&&"ids"in N){const D=N.data,{schema:O,table:V,commit_timestamp:T,type:A,errors:_}=D;N=Object.assign(Object.assign({},{schema:O,table:V,commit_timestamp:T,eventType:A,new:{},old:{},errors:_}),this._getPayloadRecords(D))}I.callback(N,r)})}_isClosed(){return this.state===Wn.closed}_isJoined(){return this.state===Wn.joined}_isJoining(){return this.state===Wn.joining}_isLeaving(){return this.state===Wn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const a=t.toLocaleLowerCase(),l={type:a,filter:n,callback:r};return this.bindings[a]?this.bindings[a].push(l):this.bindings[a]=[l],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(a=>{var l;return!(((l=a.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===r&&Rg.isEqual(a.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fs.close,{},t)}_onError(t){this._on(fs.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Wn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Wp(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Wp(t.columns,t.old_record)),n}}const Yp=()=>{},UA=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class VA{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=B2,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Yp,this.ref=0,this.logger=Yp,this.conn=null,this.sendBuffer=[],this.serializer=new MA,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=l=>{let h;return l?h=l:typeof fetch>"u"?h=(...g)=>su(async()=>{const{default:y}=await Promise.resolve().then(()=>Cl);return{default:y}},void 0).then(({default:y})=>y(...g)):h=fetch,(...g)=>h(...g)},this.endPoint=`${t}/${G0.websocket}`,this.httpEndpoint=V2(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const a=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(a&&(this.accessTokenValue=a,this.apiKey=a),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:l=>[1e3,2e3,5e3,1e4][l-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(l,h)=>h(JSON.stringify(l)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new F2(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=TA),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:kA}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case mc.connecting:return Ra.Connecting;case mc.open:return Ra.Open;case mc.closing:return Ra.Closing;default:return Ra.Closed}}isConnected(){return this.connectionState()===Ra.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,a=this.getChannels().find(l=>l.topic===r);if(a)return a;{const l=new Rg(`realtime:${t}`,n,this);return this.channels.push(l),l}}push(t){const{topic:n,event:r,payload:a,ref:l}=t,h=()=>{this.encode(t,g=>{var y;(y=this.conn)===null||y===void 0||y.send(g)})};this.log("push",`${n} ${r} (${l})`,a),this.isConnected()?h():this.sendBuffer.push(h)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const a={access_token:n,version:jA};n&&r.updateJoinPayload(a),r.joinedOnce&&r._isJoined()&&r._push(fs.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(RA,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:a,payload:l,ref:h}=n;r==="phoenix"&&a==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),h&&h===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${l.status||""} ${r} ${a} ${h&&"("+h+")"||""}`,l),Array.from(this.channels).filter(g=>g._isMember(r)).forEach(g=>g._trigger(a,l,h)),this.stateChangeCallbacks.message.forEach(g=>g(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(fs.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",a=new URLSearchParams(n);return`${t}${r}${a}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([UA],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Mg extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function jn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class zA extends Mg{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class K0 extends Mg{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var $A=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};const z2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>su(async()=>{const{default:r}=await Promise.resolve().then(()=>Cl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},HA=()=>$A(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield su(()=>Promise.resolve().then(()=>Cl),void 0)).Response:Response}),Y0=e=>{if(Array.isArray(e))return e.map(n=>Y0(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const a=n.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[a]=Y0(r)}),t};var Ja=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};const bf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),WA=(e,t,n)=>Ja(void 0,void 0,void 0,function*(){const r=yield HA();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(a=>{t(new zA(bf(a),e.status||500))}).catch(a=>{t(new K0(bf(a),a))}):t(new K0(bf(e),e))}),GA=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(a.body=JSON.stringify(r)),Object.assign(Object.assign({},a),n))};function au(e,t,n,r,a,l){return Ja(this,void 0,void 0,function*(){return new Promise((h,g)=>{e(n,GA(t,r,a,l)).then(y=>{if(!y.ok)throw y;return r!=null&&r.noResolveJson?y:y.json()}).then(y=>h(y)).catch(y=>WA(y,g,r))})})}function Ud(e,t,n,r){return Ja(this,void 0,void 0,function*(){return au(e,"GET",t,n,r)})}function Pi(e,t,n,r,a){return Ja(this,void 0,void 0,function*(){return au(e,"POST",t,r,a,n)})}function qA(e,t,n,r,a){return Ja(this,void 0,void 0,function*(){return au(e,"PUT",t,r,a,n)})}function KA(e,t,n,r){return Ja(this,void 0,void 0,function*(){return au(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function $2(e,t,n,r,a){return Ja(this,void 0,void 0,function*(){return au(e,"DELETE",t,r,a,n)})}var hr=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};const YA={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Xp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class XA{constructor(t,n={},r,a){this.url=t,this.headers=n,this.bucketId=r,this.fetch=z2(a)}uploadOrUpdate(t,n,r,a){return hr(this,void 0,void 0,function*(){try{let l;const h=Object.assign(Object.assign({},Xp),a);let g=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(h.upsert)});const y=h.metadata;typeof Blob<"u"&&r instanceof Blob?(l=new FormData,l.append("cacheControl",h.cacheControl),y&&l.append("metadata",this.encodeMetadata(y)),l.append("",r)):typeof FormData<"u"&&r instanceof FormData?(l=r,l.append("cacheControl",h.cacheControl),y&&l.append("metadata",this.encodeMetadata(y))):(l=r,g["cache-control"]=`max-age=${h.cacheControl}`,g["content-type"]=h.contentType,y&&(g["x-metadata"]=this.toBase64(this.encodeMetadata(y)))),a!=null&&a.headers&&(g=Object.assign(Object.assign({},g),a.headers));const x=this._removeEmptyFolders(n),w=this._getFinalPath(x),E=yield this.fetch(`${this.url}/object/${w}`,Object.assign({method:t,body:l,headers:g},h!=null&&h.duplex?{duplex:h.duplex}:{})),N=yield E.json();return E.ok?{data:{path:x,id:N.Id,fullPath:N.Key},error:null}:{data:null,error:N}}catch(l){if(jn(l))return{data:null,error:l};throw l}})}upload(t,n,r){return hr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,a){return hr(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),h=this._getFinalPath(l),g=new URL(this.url+`/object/upload/sign/${h}`);g.searchParams.set("token",n);try{let y;const x=Object.assign({upsert:Xp.upsert},a),w=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&r instanceof Blob?(y=new FormData,y.append("cacheControl",x.cacheControl),y.append("",r)):typeof FormData<"u"&&r instanceof FormData?(y=r,y.append("cacheControl",x.cacheControl)):(y=r,w["cache-control"]=`max-age=${x.cacheControl}`,w["content-type"]=x.contentType);const E=yield this.fetch(g.toString(),{method:"PUT",body:y,headers:w}),N=yield E.json();return E.ok?{data:{path:l,fullPath:N.Key},error:null}:{data:null,error:N}}catch(y){if(jn(y))return{data:null,error:y};throw y}})}createSignedUploadUrl(t,n){return hr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const a=Object.assign({},this.headers);n!=null&&n.upsert&&(a["x-upsert"]="true");const l=yield Pi(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:a}),h=new URL(this.url+l.url),g=h.searchParams.get("token");if(!g)throw new Mg("No token returned by API");return{data:{signedUrl:h.toString(),path:t,token:g},error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}update(t,n,r){return hr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return hr(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(jn(a))return{data:null,error:a};throw a}})}copy(t,n,r){return hr(this,void 0,void 0,function*(){try{return{data:{path:(yield Pi(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(jn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,n,r){return hr(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),l=yield Pi(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const h=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${h}`)},{data:l,error:null}}catch(a){if(jn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,n,r){return hr(this,void 0,void 0,function*(){try{const a=yield Pi(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),l=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:a.map(h=>Object.assign(Object.assign({},h),{signedUrl:h.signedURL?encodeURI(`${this.url}${h.signedURL}${l}`):null})),error:null}}catch(a){if(jn(a))return{data:null,error:a};throw a}})}download(t,n){return hr(this,void 0,void 0,function*(){const a=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),h=l?`?${l}`:"";try{const g=this._getFinalPath(t);return{data:yield(yield Ud(this.fetch,`${this.url}/${a}/${g}${h}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(g){if(jn(g))return{data:null,error:g};throw g}})}info(t){return hr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield Ud(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Y0(r),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}exists(t){return hr(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield KA(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(jn(r)&&r instanceof K0){const a=r.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),a=[],l=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";l!==""&&a.push(l);const g=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",y=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});y!==""&&a.push(y);let x=a.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${g}/public/${r}${x}`)}}}remove(t){return hr(this,void 0,void 0,function*(){try{return{data:yield $2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}list(t,n,r){return hr(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},YA),n),{prefix:t||""});return{data:yield Pi(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},r),error:null}}catch(a){if(jn(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const QA="2.7.1",ZA={"X-Client-Info":`storage-js/${QA}`};var vo=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};class JA{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},ZA),n),this.fetch=z2(r)}listBuckets(){return vo(this,void 0,void 0,function*(){try{return{data:yield Ud(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(jn(t))return{data:null,error:t};throw t}})}getBucket(t){return vo(this,void 0,void 0,function*(){try{return{data:yield Ud(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return vo(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return vo(this,void 0,void 0,function*(){try{return{data:yield qA(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}})}emptyBucket(t){return vo(this,void 0,void 0,function*(){try{return{data:yield Pi(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}deleteBucket(t){return vo(this,void 0,void 0,function*(){try{return{data:yield $2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(jn(n))return{data:null,error:n};throw n}})}}class e4 extends JA{constructor(t,n={},r){super(t,n,r)}from(t){return new XA(this.url,this.headers,t,this.fetch)}}const t4="2.52.0";let nc="";typeof Deno<"u"?nc="deno":typeof document<"u"?nc="web":typeof navigator<"u"&&navigator.product==="ReactNative"?nc="react-native":nc="node";const n4={"X-Client-Info":`supabase-js-${nc}/${t4}`},r4={headers:n4},s4={schema:"public"},i4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},a4={};var o4=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};const l4=e=>{let t;return e?t=e:typeof fetch>"u"?t=A2:t=fetch,(...n)=>t(...n)},c4=()=>typeof Headers>"u"?T2:Headers,u4=(e,t,n)=>{const r=l4(n),a=c4();return(l,h)=>o4(void 0,void 0,void 0,function*(){var g;const y=(g=yield t())!==null&&g!==void 0?g:e;let x=new a(h==null?void 0:h.headers);return x.has("apikey")||x.set("apikey",e),x.has("Authorization")||x.set("Authorization",`Bearer ${y}`),r(l,Object.assign(Object.assign({},h),{headers:x}))})};var d4=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};function h4(e){return e.endsWith("/")?e:e+"/"}function f4(e,t){var n,r;const{db:a,auth:l,realtime:h,global:g}=e,{db:y,auth:x,realtime:w,global:E}=t,N={db:Object.assign(Object.assign({},y),a),auth:Object.assign(Object.assign({},x),l),realtime:Object.assign(Object.assign({},w),h),global:Object.assign(Object.assign(Object.assign({},E),g),{headers:Object.assign(Object.assign({},(n=E==null?void 0:E.headers)!==null&&n!==void 0?n:{}),(r=g==null?void 0:g.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>d4(this,void 0,void 0,function*(){return""})};return e.accessToken?N.accessToken=e.accessToken:delete N.accessToken,N}const H2="2.71.1",No=30*1e3,X0=3,Ef=X0*No,m4="http://localhost:9999",g4="supabase.auth.token",p4={"X-Client-Info":`gotrue-js/${H2}`},Q0="X-Supabase-Api-Version",W2={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},x4=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,y4=10*60*1e3;class Dg extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function rt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class v4 extends Dg{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function w4(e){return rt(e)&&e.name==="AuthApiError"}class G2 extends Dg{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class ca extends Dg{constructor(t,n,r,a){super(t,r,a),this.name=n,this.status=r}}class Ri extends ca{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function b4(e){return rt(e)&&e.name==="AuthSessionMissingError"}class Uu extends ca{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vu extends ca{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class zu extends ca{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function E4(e){return rt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Qp extends ca{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Z0 extends ca{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Cf(e){return rt(e)&&e.name==="AuthRetryableFetchError"}class Zp extends ca{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class J0 extends ca{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Vd="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Jp=` 	
\r=`.split(""),C4=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Jp.length;t+=1)e[Jp[t].charCodeAt(0)]=-2;for(let t=0;t<Vd.length;t+=1)e[Vd[t].charCodeAt(0)]=t;return e})();function ex(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vd[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(Vd[r]),t.queuedBits-=6}}function q2(e,t,n){const r=C4[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function tx(e){const t=[],n=h=>{t.push(String.fromCodePoint(h))},r={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},l=h=>{_4(h,r,n)};for(let h=0;h<e.length;h+=1)q2(e.charCodeAt(h),a,l);return t.join("")}function N4(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function S4(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const a=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|a)+65536,n+=1}N4(r,t)}}function _4(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function A4(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)q2(e.charCodeAt(a),n,r);return new Uint8Array(t)}function T4(e){const t=[];return S4(e,n=>t.push(n)),new Uint8Array(t)}function I4(e){const t=[],n={queue:0,queuedBits:0},r=a=>{t.push(a)};return e.forEach(a=>ex(a,n,r)),ex(null,n,r),t.join("")}function j4(e){return Math.round(Date.now()/1e3)+e}function k4(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const cs=()=>typeof window<"u"&&typeof document<"u",Sa={tested:!1,writable:!1},K2=()=>{if(!cs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sa.tested)return Sa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sa.tested=!0,Sa.writable=!0}catch{Sa.tested=!0,Sa.writable=!1}return Sa.writable};function R4(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((a,l)=>{t[l]=a})}catch{}return n.searchParams.forEach((r,a)=>{t[a]=r}),t}const Y2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>su(async()=>{const{default:r}=await Promise.resolve().then(()=>Cl);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},M4=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",So=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},_a=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ji=async(e,t)=>{await e.removeItem(t)};class _h{constructor(){this.promise=new _h.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}_h.promiseConstructor=Promise;function Nf(e){const t=e.split(".");if(t.length!==3)throw new J0("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!x4.test(t[r]))throw new J0("JWT not in base64url format");return{header:JSON.parse(tx(t[0])),payload:JSON.parse(tx(t[1])),signature:A4(t[2]),raw:{header:t[0],payload:t[1]}}}async function D4(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function O4(e,t){return new Promise((r,a)=>{(async()=>{for(let l=0;l<1/0;l++)try{const h=await e(l);if(!t(l,null,h)){r(h);return}}catch(h){if(!t(l,h)){a(h);return}}})()})}function P4(e){return("0"+e.toString(16)).substr(-2)}function L4(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let a="";for(let l=0;l<56;l++)a+=n.charAt(Math.floor(Math.random()*r));return a}return crypto.getRandomValues(t),Array.from(t,P4).join("")}async function B4(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),a=new Uint8Array(r);return Array.from(a).map(l=>String.fromCharCode(l)).join("")}async function F4(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await B4(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wo(e,t,n=!1){const r=L4();let a=r;n&&(a+="/PASSWORD_RECOVERY"),await So(e,`${t}-code-verifier`,a);const l=await F4(r);return[l,r===l?"plain":"s256"]}const U4=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function V4(e){const t=e.headers.get(Q0);if(!t||!t.match(U4))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function z4(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function $4(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const H4=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bo(e){if(!H4.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Sf(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function nx(e){return JSON.parse(JSON.stringify(e))}var W4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};const ja=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),G4=[502,503,504];async function rx(e){var t;if(!M4(e))throw new Z0(ja(e),0);if(G4.includes(e.status))throw new Z0(ja(e),e.status);let n;try{n=await e.json()}catch(l){throw new G2(ja(l),l)}let r;const a=V4(e);if(a&&a.getTime()>=W2["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Zp(ja(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Ri}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((l,h)=>l&&typeof h=="string",!0))throw new Zp(ja(n),e.status,n.weak_password.reasons);throw new v4(ja(n),e.status||500,r)}const q4=(e,t,n,r)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(r),Object.assign(Object.assign({},a),n))};async function ht(e,t,n,r){var a;const l=Object.assign({},r==null?void 0:r.headers);l[Q0]||(l[Q0]=W2["2024-01-01"].name),r!=null&&r.jwt&&(l.Authorization=`Bearer ${r.jwt}`);const h=(a=r==null?void 0:r.query)!==null&&a!==void 0?a:{};r!=null&&r.redirectTo&&(h.redirect_to=r.redirectTo);const g=Object.keys(h).length?"?"+new URLSearchParams(h).toString():"",y=await K4(e,t,n+g,{headers:l,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(y):{data:Object.assign({},y),error:null}}async function K4(e,t,n,r,a,l){const h=q4(t,r,a,l);let g;try{g=await e(n,Object.assign({},h))}catch(y){throw console.error(y),new Z0(ja(y),0)}if(g.ok||await rx(g),r!=null&&r.noResolveJson)return g;try{return await g.json()}catch(y){await rx(y)}}function ri(e){var t;let n=null;Z4(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=j4(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function sx(e){const t=ri(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Ui(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function Y4(e){return{data:e,error:null}}function X4(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:l}=e,h=W4(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),g={action_link:t,email_otp:n,hashed_token:r,redirect_to:a,verification_type:l},y=Object.assign({},h);return{data:{properties:g,user:y},error:null}}function Q4(e){return e}function Z4(e){return e.access_token&&e.refresh_token&&e.expires_in}const _f=["global","local","others"];var J4=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};class eT{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=Y2(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=_f[0]){if(_f.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${_f.join(", ")}`);try{return await ht(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ht(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Ui})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=J4(t,["options"]),a=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(a.new_email=r==null?void 0:r.newEmail,delete a.newEmail),await ht(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:X4,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(rt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ht(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Ui})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,a,l,h,g,y;try{const x={nextPage:null,lastPage:0,total:0},w=await ht(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(l=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&l!==void 0?l:""},xform:Q4});if(w.error)throw w.error;const E=await w.json(),N=(h=w.headers.get("x-total-count"))!==null&&h!==void 0?h:0,I=(y=(g=w.headers.get("link"))===null||g===void 0?void 0:g.split(","))!==null&&y!==void 0?y:[];return I.length>0&&(I.forEach(D=>{const O=parseInt(D.split(";")[0].split("=")[1].substring(0,1)),V=JSON.parse(D.split(";")[1].split("=")[1]);x[`${V}Page`]=O}),x.total=parseInt(N)),{data:Object.assign(Object.assign({},E),x),error:null}}catch(x){if(rt(x))return{data:{users:[]},error:x};throw x}}async getUserById(t){bo(t);try{return await ht(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Ui})}catch(n){if(rt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){bo(t);try{return await ht(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:Ui})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){bo(t);try{return await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:Ui})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){bo(t.userId);try{const{data:n,error:r}=await ht(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:n,error:r}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){bo(t.userId),bo(t.id);try{return{data:await ht(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}}function ix(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function tT(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Eo={debug:!!(globalThis&&K2()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class X2 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class nT extends X2{}async function rT(e,t,n){Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async a=>{if(a){Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await n()}finally{Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Eo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new nT(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Eo.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}tT();const sT={url:m4,storageKey:g4,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:p4,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function ax(e,t,n){return await n()}const Co={};class Uc{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Uc.nextInstanceID,Uc.nextInstanceID+=1,this.instanceID>0&&cs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},sT),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new eT({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=Y2(a.fetch),this.lock=a.lock||ax,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:cs()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=rT:this.lock=ax,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:K2()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ix(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=ix(this.memoryStorage)),cs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(l){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",l)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async l=>{this._debug("received broadcast notification from other tab or client",l),await this._notifyAllSubscribers(l.data.event,l.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Co[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Co[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Co[this.storageKey]=Object.assign(Object.assign({},Co[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${H2}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=R4(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),cs()&&this.detectSessionInUrl&&r!=="none"){const{data:a,error:l}=await this._getSessionFromURL(n,r);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),E4(l)){const y=(t=l.details)===null||t===void 0?void 0:t.code;if(y==="identity_already_exists"||y==="identity_not_found"||y==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:h,redirectType:g}=a;return this._debug("#_initialize()","detected session in URL",h,"redirect type",g),await this._saveSession(h),setTimeout(async()=>{g==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",h):await this._notifyAllSubscribers("SIGNED_IN",h)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return rt(n)?{error:n}:{error:new G2("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,a;try{const l=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:ri}),{data:h,error:g}=l;if(g||!h)return{data:{user:null,session:null},error:g};const y=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:x,session:y},error:null}}catch(l){if(rt(l))return{data:{user:null,session:null},error:l};throw l}}async signUp(t){var n,r,a;try{let l;if("email"in t){const{email:w,password:E,options:N}=t;let I=null,D=null;this.flowType==="pkce"&&([I,D]=await wo(this.storage,this.storageKey)),l=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:N==null?void 0:N.emailRedirectTo,body:{email:w,password:E,data:(n=N==null?void 0:N.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken},code_challenge:I,code_challenge_method:D},xform:ri})}else if("phone"in t){const{phone:w,password:E,options:N}=t;l=await ht(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:w,password:E,data:(r=N==null?void 0:N.data)!==null&&r!==void 0?r:{},channel:(a=N==null?void 0:N.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:N==null?void 0:N.captchaToken}},xform:ri})}else throw new Vu("You must provide either an email or phone number and a password");const{data:h,error:g}=l;if(g||!h)return{data:{user:null,session:null},error:g};const y=h.session,x=h.user;return h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",y)),{data:{user:x,session:y},error:null}}catch(l){if(rt(l))return{data:{user:null,session:null},error:l};throw l}}async signInWithPassword(t){try{let n;if("email"in t){const{email:l,password:h,options:g}=t;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:sx})}else if("phone"in t){const{phone:l,password:h,options:g}=t;n=await ht(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:h,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken}},xform:sx})}else throw new Vu("You must provide either an email or phone number and a password");const{data:r,error:a}=n;return a?{data:{user:null,session:null},error:a}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new Uu}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:a})}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,a,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,a,l,h,g,y,x,w,E,N,I;let D,O;if("message"in t)D=t.message,O=t.signature;else{const{chain:V,wallet:T,statement:A,options:_}=t;let M;if(cs())if(typeof T=="object")M=T;else{const $=window;if("solana"in $&&typeof $.solana=="object"&&("signIn"in $.solana&&typeof $.solana.signIn=="function"||"signMessage"in $.solana&&typeof $.solana.signMessage=="function"))M=$.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(_!=null&&_.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=T}const H=new URL((n=_==null?void 0:_.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in M&&M.signIn){const $=await M.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},_==null?void 0:_.signInWithSolana),{version:"1",domain:H.host,uri:H.href}),A?{statement:A}:null));let F;if(Array.isArray($)&&$[0]&&typeof $[0]=="object")F=$[0];else if($&&typeof $=="object"&&"signedMessage"in $&&"signature"in $)F=$;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)D=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),O=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in M)||typeof M.signMessage!="function"||!("publicKey"in M)||typeof M!="object"||!M.publicKey||!("toBase58"in M.publicKey)||typeof M.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");D=[`${H.host} wants you to sign in with your Solana account:`,M.publicKey.toBase58(),...A?["",A,""]:[""],"Version: 1",`URI: ${H.href}`,`Issued At: ${(a=(r=_==null?void 0:_.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((l=_==null?void 0:_.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${_.signInWithSolana.notBefore}`]:[],...!((h=_==null?void 0:_.signInWithSolana)===null||h===void 0)&&h.expirationTime?[`Expiration Time: ${_.signInWithSolana.expirationTime}`]:[],...!((g=_==null?void 0:_.signInWithSolana)===null||g===void 0)&&g.chainId?[`Chain ID: ${_.signInWithSolana.chainId}`]:[],...!((y=_==null?void 0:_.signInWithSolana)===null||y===void 0)&&y.nonce?[`Nonce: ${_.signInWithSolana.nonce}`]:[],...!((x=_==null?void 0:_.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${_.signInWithSolana.requestId}`]:[],...!((E=(w=_==null?void 0:_.signInWithSolana)===null||w===void 0?void 0:w.resources)===null||E===void 0)&&E.length?["Resources",..._.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const $=await M.signMessage(new TextEncoder().encode(D),"utf8");if(!$||!($ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=$}}try{const{data:V,error:T}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:D,signature:I4(O)},!((N=t.options)===null||N===void 0)&&N.captchaToken?{gotrue_meta_security:{captcha_token:(I=t.options)===null||I===void 0?void 0:I.captchaToken}}:null),xform:ri});if(T)throw T;return!V||!V.session||!V.user?{data:{user:null,session:null},error:new Uu}:(V.session&&(await this._saveSession(V.session),await this._notifyAllSubscribers("SIGNED_IN",V.session)),{data:Object.assign({},V),error:T})}catch(V){if(rt(V))return{data:{user:null,session:null},error:V};throw V}}async _exchangeCodeForSession(t){const n=await _a(this.storage,`${this.storageKey}-code-verifier`),[r,a]=(n??"").split("/");try{const{data:l,error:h}=await ht(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:ri});if(await ji(this.storage,`${this.storageKey}-code-verifier`),h)throw h;return!l||!l.session||!l.user?{data:{user:null,session:null,redirectType:null},error:new Uu}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:Object.assign(Object.assign({},l),{redirectType:a??null}),error:h})}catch(l){if(rt(l))return{data:{user:null,session:null,redirectType:null},error:l};throw l}}async signInWithIdToken(t){try{const{options:n,provider:r,token:a,access_token:l,nonce:h}=t,g=await ht(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:a,access_token:l,nonce:h,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:ri}),{data:y,error:x}=g;return x?{data:{user:null,session:null},error:x}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new Uu}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:y,error:x})}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,a,l,h;try{if("email"in t){const{email:g,options:y}=t;let x=null,w=null;this.flowType==="pkce"&&([x,w]=await wo(this.storage,this.storageKey));const{error:E}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},create_user:(r=y==null?void 0:y.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:x,code_challenge_method:w},redirectTo:y==null?void 0:y.emailRedirectTo});return{data:{user:null,session:null},error:E}}if("phone"in t){const{phone:g,options:y}=t,{data:x,error:w}=await ht(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:g,data:(a=y==null?void 0:y.data)!==null&&a!==void 0?a:{},create_user:(l=y==null?void 0:y.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},channel:(h=y==null?void 0:y.channel)!==null&&h!==void 0?h:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:w}}throw new Vu("You must provide either an email or phone number.")}catch(g){if(rt(g))return{data:{user:null,session:null},error:g};throw g}}async verifyOtp(t){var n,r;try{let a,l;"options"in t&&(a=(n=t.options)===null||n===void 0?void 0:n.redirectTo,l=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:h,error:g}=await ht(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:a,xform:ri});if(g)throw g;if(!h)throw new Error("An error occurred on token verification.");const y=h.session,x=h.user;return y!=null&&y.access_token&&(await this._saveSession(y),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",y)),{data:{user:x,session:y},error:null}}catch(a){if(rt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var n,r,a;try{let l=null,h=null;return this.flowType==="pkce"&&([l,h]=await wo(this.storage,this.storageKey)),await ht(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:l,code_challenge_method:h}),headers:this.headers,xform:Y4})}catch(l){if(rt(l))return{data:null,error:l};throw l}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Ri;const{error:a}=await ht(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(rt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:a,options:l}=t,{error:h}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:h}}else if("phone"in t){const{phone:r,type:a,options:l}=t,{data:h,error:g}=await ht(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:a,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return{data:{user:null,session:null,messageId:h==null?void 0:h.message_id},error:g}}throw new Vu("You must provide either an email or phone number and a type")}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await _a(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<Ef:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const h=await _a(this.userStorage,this.storageKey+"-user");h!=null&&h.user?t.user=h.user:t.user=Sf()}if(this.storage.isServer&&t.user){let h=this.suppressGetSessionWarning;t=new Proxy(t,{get:(y,x,w)=>(!h&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),h=!0,this.suppressGetSessionWarning=!0),Reflect.get(y,x,w))})}return{data:{session:t},error:null}}const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{session:null},error:l}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Ui}):await this._useSession(async n=>{var r,a,l;const{data:h,error:g}=n;if(g)throw g;return!(!((r=h.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ri}:await ht(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(a=h.session)===null||a===void 0?void 0:a.access_token)!==null&&l!==void 0?l:void 0,xform:Ui})})}catch(n){if(rt(n))return b4(n)&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:a,error:l}=r;if(l)throw l;if(!a.session)throw new Ri;const h=a.session;let g=null,y=null;this.flowType==="pkce"&&t.email!=null&&([g,y]=await wo(this.storage,this.storageKey));const{data:x,error:w}=await ht(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:g,code_challenge_method:y}),jwt:h.access_token,xform:Ui});if(w)throw w;return h.user=x.user,await this._saveSession(h),await this._notifyAllSubscribers("USER_UPDATED",h),{data:{user:h.user},error:null}})}catch(r){if(rt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ri;const n=Date.now()/1e3;let r=n,a=!0,l=null;const{payload:h}=Nf(t.access_token);if(h.exp&&(r=h.exp,a=r<=n),a){const{session:g,error:y}=await this._callRefreshToken(t.refresh_token);if(y)return{data:{user:null,session:null},error:y};if(!g)return{data:{user:null,session:null},error:null};l=g}else{const{data:g,error:y}=await this._getUser(t.access_token);if(y)throw y;l={access_token:t.access_token,refresh_token:t.refresh_token,user:g.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return{data:{user:l.user,session:l},error:null}}catch(n){if(rt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:h,error:g}=n;if(g)throw g;t=(r=h.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Ri;const{session:a,error:l}=await this._callRefreshToken(t.refresh_token);return l?{data:{user:null,session:null},error:l}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(rt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!cs())throw new zu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new zu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Qp("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new zu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Qp("No code detected.");const{data:A,error:_}=await this._exchangeCodeForSession(t.code);if(_)throw _;const M=new URL(window.location.href);return M.searchParams.delete("code"),window.history.replaceState(window.history.state,"",M.toString()),{data:{session:A.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:a,access_token:l,refresh_token:h,expires_in:g,expires_at:y,token_type:x}=t;if(!l||!g||!h||!x)throw new zu("No session defined in URL");const w=Math.round(Date.now()/1e3),E=parseInt(g);let N=w+E;y&&(N=parseInt(y));const I=N-w;I*1e3<=No&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${I}s, should have been closer to ${E}s`);const D=N-E;w-D>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",D,N,w):w-D<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",D,N,w);const{data:O,error:V}=await this._getUser(l);if(V)throw V;const T={provider_token:r,provider_refresh_token:a,access_token:l,expires_in:E,expires_at:N,refresh_token:h,token_type:x,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:t.type},error:null}}catch(r){if(rt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await _a(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:a,error:l}=n;if(l)return{error:l};const h=(r=a.session)===null||r===void 0?void 0:r.access_token;if(h){const{error:g}=await this.admin.signOut(h,t);if(g&&!(w4(g)&&(g.status===404||g.status===401||g.status===403)))return{error:g}}return t!=="others"&&(await this._removeSession(),await ji(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=k4(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,a;try{const{data:{session:l},error:h}=n;if(h)throw h;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,n={}){let r=null,a=null;this.flowType==="pkce"&&([r,a]=await wo(this.storage,this.storageKey,!0));try{return await ht(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:a,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(l){if(rt(l))return{data:null,error:l};throw l}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(rt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:a}=await this._useSession(async l=>{var h,g,y,x,w;const{data:E,error:N}=l;if(N)throw N;const I=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(h=t.options)===null||h===void 0?void 0:h.redirectTo,scopes:(g=t.options)===null||g===void 0?void 0:g.scopes,queryParams:(y=t.options)===null||y===void 0?void 0:y.queryParams,skipBrowserRedirect:!0});return await ht(this.fetch,"GET",I,{headers:this.headers,jwt:(w=(x=E.session)===null||x===void 0?void 0:x.access_token)!==null&&w!==void 0?w:void 0})});if(a)throw a;return cs()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(rt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,a;const{data:l,error:h}=n;if(h)throw h;return await ht(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(r=l.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await O4(async a=>(a>0&&await D4(200*Math.pow(2,a-1)),this._debug(n,"refreshing attempt",a),await ht(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:ri})),(a,l)=>{const h=200*Math.pow(2,a);return l&&Cf(l)&&Date.now()+h-r<No})}catch(r){if(this._debug(n,"error",r),rt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),cs()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const a=await _a(this.storage,this.storageKey);if(a&&this.userStorage){let h=await _a(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!h&&(h={user:a.user},await So(this.userStorage,this.storageKey+"-user",h)),a.user=(t=h==null?void 0:h.user)!==null&&t!==void 0?t:Sf()}else if(a&&!a.user&&!a.user){const h=await _a(this.storage,this.storageKey+"-user");h&&(h!=null&&h.user)?(a.user=h.user,await ji(this.storage,this.storageKey+"-user"),await So(this.storage,this.storageKey,a)):a.user=Sf()}if(this._debug(r,"session from storage",a),!this._isValidSession(a)){this._debug(r,"session is not valid"),a!==null&&await this._removeSession();return}const l=((n=a.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Ef;if(this._debug(r,`session has${l?"":" not"} expired with margin of ${Ef}s`),l){if(this.autoRefreshToken&&a.refresh_token){const{error:h}=await this._callRefreshToken(a.refresh_token);h&&(console.error(h),Cf(h)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",h),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:h,error:g}=await this._getUser(a.access_token);!g&&(h!=null&&h.user)?(a.user=h.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(h){console.error("Error getting user data:",h),this._debug(r,"error getting user data, skipping SIGNED_IN notification",h)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(r,"error",a),console.error(a);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Ri;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new _h;const{data:l,error:h}=await this._refreshAccessToken(t);if(h)throw h;if(!l.session)throw new Ri;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const g={session:l.session,error:null};return this.refreshingDeferred.resolve(g),g}catch(l){if(this._debug(a,"error",l),rt(l)){const h={session:null,error:l};return Cf(l)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(h),h}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(l),l}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,n,r=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const l=[],h=Array.from(this.stateChangeEmitters.values()).map(async g=>{try{await g.callback(t,n)}catch(y){l.push(y)}});if(await Promise.all(h),l.length>0){for(let g=0;g<l.length;g+=1)console.error(l[g]);throw l[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await So(this.userStorage,this.storageKey+"-user",{user:n.user});const a=Object.assign({},n);delete a.user;const l=nx(a);await So(this.storage,this.storageKey,l)}else{const a=nx(n);await So(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await ji(this.storage,this.storageKey),await ji(this.storage,this.storageKey+"-code-verifier"),await ji(this.storage,this.storageKey+"-user"),this.userStorage&&await ji(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&cs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),No);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((r.expires_at*1e3-t)/No);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${No}ms, refresh threshold is ${X0} ticks`),a<=X0&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof X2)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!cs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const a=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&a.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&a.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[l,h]=await wo(this.storage,this.storageKey),g=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(h)}`});a.push(g.toString())}if(r!=null&&r.queryParams){const l=new URLSearchParams(r.queryParams);a.push(l.toString())}return r!=null&&r.skipBrowserRedirect&&a.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;return l?{data:null,error:l}:await ht(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,a;const{data:l,error:h}=n;if(h)return{data:null,error:h};const g=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:y,error:x}=await ht(this.fetch,"POST",`${this.url}/factors`,{body:g,headers:this.headers,jwt:(r=l==null?void 0:l.session)===null||r===void 0?void 0:r.access_token});return x?{data:null,error:x}:(t.factorType==="totp"&&(!((a=y==null?void 0:y.totp)===null||a===void 0)&&a.qr_code)&&(y.totp.qr_code=`data:image/svg+xml;utf-8,${y.totp.qr_code}`),{data:y,error:null})})}catch(n){if(rt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;if(l)return{data:null,error:l};const{data:h,error:g}=await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return g?{data:null,error:g}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+h.expires_in},h)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",h),{data:h,error:g})})}catch(n){if(rt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:a,error:l}=n;return l?{data:null,error:l}:await ht(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(rt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],a=r.filter(h=>h.factor_type==="totp"&&h.status==="verified"),l=r.filter(h=>h.factor_type==="phone"&&h.status==="verified");return{data:{all:r,totp:a,phone:l},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:a},error:l}=t;if(l)return{data:null,error:l};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:h}=Nf(a.access_token);let g=null;h.aal&&(g=h.aal);let y=g;((r=(n=a.user.factors)===null||n===void 0?void 0:n.filter(E=>E.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(y="aal2");const w=h.amr||[];return{data:{currentLevel:g,nextLevel:y,currentAuthenticationMethods:w},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(g=>g.kid===t);if(r)return r;const a=Date.now();if(r=this.jwks.keys.find(g=>g.kid===t),r&&this.jwks_cached_at+y4>a)return r;const{data:l,error:h}=await ht(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(h)throw h;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=a,r=l.keys.find(g=>g.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:I,error:D}=await this.getSession();if(D||!I.session)return{data:null,error:D};r=I.session.access_token}const{header:a,payload:l,signature:h,raw:{header:g,payload:y}}=Nf(r);n!=null&&n.allowExpired||z4(l.exp);const x=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!x){const{error:I}=await this.getUser(r);if(I)throw I;return{data:{claims:l,header:a,signature:h},error:null}}const w=$4(a.alg),E=await crypto.subtle.importKey("jwk",x,w,!0,["verify"]);if(!await crypto.subtle.verify(w,E,h,T4(`${g}.${y}`)))throw new J0("Invalid JWT signature");return{data:{claims:l,header:a,signature:h},error:null}}catch(r){if(rt(r))return{data:null,error:r};throw r}}}Uc.nextInstanceID=0;const iT=Uc;class aT extends iT{constructor(t){super(t)}}var oT=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})};class lT{constructor(t,n,r){var a,l,h;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const g=h4(t),y=new URL(g);this.realtimeUrl=new URL("realtime/v1",y),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",y),this.storageUrl=new URL("storage/v1",y),this.functionsUrl=new URL("functions/v1",y);const x=`sb-${y.hostname.split(".")[0]}-auth-token`,w={db:s4,realtime:a4,auth:Object.assign(Object.assign({},i4),{storageKey:x}),global:r4},E=f4(r??{},w);this.storageKey=(a=E.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(l=E.global.headers)!==null&&l!==void 0?l:{},E.accessToken?(this.accessToken=E.accessToken,this.auth=new Proxy({},{get:(N,I)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(I)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((h=E.auth)!==null&&h!==void 0?h:{},this.headers,E.global.fetch),this.fetch=u4(n,this._getAccessToken.bind(this),E.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},E.realtime)),this.rest=new _A(new URL("rest/v1",y).href,{headers:this.headers,schema:E.db.schema,fetch:this.fetch}),E.accessToken||this._listenForAuthEvents()}get functions(){return new nA(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new e4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return oT(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,storageKey:l,flowType:h,lock:g,debug:y},x,w){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new aT({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),x),storageKey:l,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:a,flowType:h,lock:g,debug:y,fetch:w,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new VA(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const cT=(e,t,n)=>new lT(e,t,n),Q2="https://fylfbymwfymtcumpfcvf.supabase.co",uT="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5bGZieW13ZnltdGN1bXBmY3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODkyOTAsImV4cCI6MjA2OTM2NTI5MH0.k7sy5m9jucYj_8NRBXCFkOm17rVjAKLAR12dAv59pP4",xe=cT(Q2,uT,{auth:{persistSession:!0,autoRefreshToken:!0}}),Cs=(e,t="images")=>e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("blob:")||e.startsWith("data:")?e:`${Q2}/storage/v1/object/public/${t}/${e}`:"";/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dT=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),hT=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),ox=e=>{const t=hT(e);return t.charAt(0).toUpperCase()+t.slice(1)},Z2=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),fT=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=R.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:a="",children:l,iconNode:h,...g},y)=>R.createElement("svg",{ref:y,...mT,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:Z2("lucide",a),...!l&&!fT(g)&&{"aria-hidden":"true"},...g},[...h.map(([x,w])=>R.createElement(x,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=(e,t)=>{const n=R.forwardRef(({className:r,...a},l)=>R.createElement(gT,{ref:l,iconNode:t,className:Z2(`lucide-${dT(ox(e))}`,`lucide-${e}`,r),...a}));return n.displayName=ox(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],xT=Ke("activity",pT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Af=Ke("arrow-right",yT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],wT=Ke("award",vT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Rr=Ke("building-2",bT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mn=Ke("calendar",ET);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],La=Ke("camera",CT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],al=Ke("chart-column",NT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],_T=Ke("circle-alert",ST);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Zi=Ke("circle-check-big",AT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],J2=Ke("clock",TT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],jT=Ke("copy",IT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],RT=Ke("database",kT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ah=Ke("download",MT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],OT=Ke("external-link",DT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],LT=Ke("eye",PT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Ba=Ke("gift",BT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],UT=Ke("globe",FT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],ys=Ke("image",VT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],lx=Ke("log-out",zT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],pr=Ke("map-pin",$T);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],WT=Ke("maximize-2",HT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],qT=Ke("maximize",GT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],YT=Ke("minimize-2",KT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ol=Ke("monitor",XT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],cx=Ke("move",QT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],JT=Ke("pause",ZT);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eI=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],eb=Ke("play",eI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tI=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Fs=Ke("plus",tI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nI=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],vs=Ke("qr-code",nI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rI=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],sI=Ke("rocket",rI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iI=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],aI=Ke("rotate-ccw",iI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oI=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],lI=Ke("rotate-cw",oI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cI=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Fo=Ke("search",cI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uI=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Og=Ke("settings",uI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dI=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],tb=Ke("shuffle",dI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hI=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],zd=Ke("sparkles",hI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fI=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ou=Ke("square-pen",fI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mI=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],gI=Ke("star",mI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pI=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],xI=Ke("target",pI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yI=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ta=Ke("trash-2",yI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vI=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],_o=Ke("trending-up",vI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],em=Ke("trophy",wI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bI=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Th=Ke("upload",bI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Vc=Ke("user-check",EI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],ux=Ke("user-plus",CI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Yt=Ke("users",NI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SI=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],ws=Ke("vote",SI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _I=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],AI=Ke("wifi",_I);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],$d=Ke("x",TI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const II=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],jI=Ke("zap",II);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],RI=Ke("zoom-in",kI);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],DI=Ke("zoom-out",MI);function OI(){return console.log("DemoNotice component rendered"),d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:d.jsx("div",{className:"max-w-2xl w-full",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("div",{className:"flex justify-center mb-4",children:d.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:d.jsx(RT,{className:"h-12 w-12 text-blue-600"})})}),d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Management System"}),d.jsx("p",{className:"text-gray-600",children:"A comprehensive solution for managing events, attendees, and more"})]}),d.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx(_T,{className:"h-6 w-6 text-yellow-600 mr-3 mt-0.5"}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Database Configuration Required"}),d.jsx("p",{className:"text-yellow-700 mb-4",children:"This application requires a Supabase database to function. To get started:"}),d.jsxs("ol",{className:"list-decimal list-inside text-yellow-700 space-y-2 text-sm",children:[d.jsxs("li",{children:["Create a free account at ",d.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),d.jsx("li",{children:"Create a new project"}),d.jsx("li",{children:"Get your project URL and anon key from the API settings"}),d.jsx("li",{children:"Configure the environment variables in your deployment"})]})]})]})}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[d.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"✨ Features"}),d.jsxs("ul",{className:"text-gray-600 space-y-2 text-sm",children:[d.jsx("li",{children:"• Company & Event Management"}),d.jsx("li",{children:"• Attendee Registration & Check-in"}),d.jsx("li",{children:"• QR Code Generation"}),d.jsx("li",{children:"• Seating Arrangements"}),d.jsx("li",{children:"• Photo Gallery & Voting"}),d.jsx("li",{children:"• Lucky Draw System"}),d.jsx("li",{children:"• Real-time Monitoring"})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"🛠️ Tech Stack"}),d.jsxs("ul",{className:"text-gray-600 space-y-2 text-sm",children:[d.jsx("li",{children:"• React + TypeScript"}),d.jsx("li",{children:"• Tailwind CSS"}),d.jsx("li",{children:"• Supabase (Database & Auth)"}),d.jsx("li",{children:"• QR Code Generation"}),d.jsx("li",{children:"• Real-time Updates"}),d.jsx("li",{children:"• Responsive Design"}),d.jsx("li",{children:"• PWA Ready"})]})]})]}),d.jsx("div",{className:"text-center",children:d.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[d.jsx(Og,{className:"h-8 w-8 text-blue-600 mx-auto mb-3"}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to Deploy?"}),d.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Set up your Supabase database and configure the environment variables to start using this application."}),d.jsxs("div",{className:"text-xs text-gray-500",children:[d.jsx("p",{children:"Environment variables needed:"}),d.jsx("p",{className:"font-mono bg-gray-100 px-2 py-1 rounded mt-1",children:"VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY"})]})]})})]})})})}const PI={},dx=e=>{let t;const n=new Set,r=(w,E)=>{const N=typeof w=="function"?w(t):w;if(!Object.is(N,t)){const I=t;t=E??(typeof N!="object"||N===null)?N:Object.assign({},t,N),n.forEach(D=>D(t,I))}},a=()=>t,y={setState:r,getState:a,getInitialState:()=>x,subscribe:w=>(n.add(w),()=>n.delete(w)),destroy:()=>{(PI?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},x=t=e(r,a,y);return y},LI=e=>e?dx(e):dx;var nb={exports:{}},rb={},sb={exports:{}},ib={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ll=R;function BI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var FI=typeof Object.is=="function"?Object.is:BI,UI=ll.useState,VI=ll.useEffect,zI=ll.useLayoutEffect,$I=ll.useDebugValue;function HI(e,t){var n=t(),r=UI({inst:{value:n,getSnapshot:t}}),a=r[0].inst,l=r[1];return zI(function(){a.value=n,a.getSnapshot=t,Tf(a)&&l({inst:a})},[e,n,t]),VI(function(){return Tf(a)&&l({inst:a}),e(function(){Tf(a)&&l({inst:a})})},[e]),$I(n),n}function Tf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!FI(e,n)}catch{return!0}}function WI(e,t){return t()}var GI=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?WI:HI;ib.useSyncExternalStore=ll.useSyncExternalStore!==void 0?ll.useSyncExternalStore:GI;sb.exports=ib;var qI=sb.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ih=R,KI=qI;function YI(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var XI=typeof Object.is=="function"?Object.is:YI,QI=KI.useSyncExternalStore,ZI=Ih.useRef,JI=Ih.useEffect,e6=Ih.useMemo,t6=Ih.useDebugValue;rb.useSyncExternalStoreWithSelector=function(e,t,n,r,a){var l=ZI(null);if(l.current===null){var h={hasValue:!1,value:null};l.current=h}else h=l.current;l=e6(function(){function y(I){if(!x){if(x=!0,w=I,I=r(I),a!==void 0&&h.hasValue){var D=h.value;if(a(D,I))return E=D}return E=I}if(D=E,XI(w,I))return D;var O=r(I);return a!==void 0&&a(D,O)?(w=I,D):(w=I,E=O)}var x=!1,w,E,N=n===void 0?null:n;return[function(){return y(t())},N===null?void 0:function(){return y(N())}]},[t,n,r,a]);var g=QI(e,l[0],l[1]);return JI(function(){h.hasValue=!0,h.value=g},[g]),t6(g),g};nb.exports=rb;var n6=nb.exports;const r6=eh(n6),ab={},{useDebugValue:s6}=Rm,{useSyncExternalStoreWithSelector:i6}=r6;let hx=!1;const a6=e=>e;function o6(e,t=a6,n){(ab?"production":void 0)!=="production"&&n&&!hx&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),hx=!0);const r=i6(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return s6(r),r}const fx=e=>{(ab?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?LI(e):e,n=(r,a)=>o6(t,r,a);return Object.assign(n,t),n},ob=e=>e?fx(e):fx,l6=()=>{const e=localStorage.getItem("hybridMode");return e==="offline"||e==="online"||e==="hybrid"?e:"online"},Pg=ob(e=>({mode:l6(),setMode:t=>{localStorage.setItem("hybridMode",t),e({mode:t})}})),mx=[{key:"events",label:"Events",icon:mn,color:"text-green-600",route:"/admin/events"},{key:"attendees",label:"Attendees",icon:Yt,color:"text-blue-600",route:"/admin/attendees"},{key:"companies",label:"Companies",icon:Rr,color:"text-purple-600",route:"/admin/companies"},{key:"checkin",label:"Check-in",icon:vs,color:"text-indigo-600",route:"/admin/checkin"},{key:"gallery",label:"Gallery",icon:ys,color:"text-teal-600",route:"/admin/gallery"},{key:"voting",label:"Voting",icon:ws,color:"text-violet-600",route:"/admin/voting"},{key:"luckydraw",label:"Lucky Draw",icon:Ba,color:"text-orange-600",route:"/admin/lucky-draw"},{key:"seating",label:"Seating",icon:pr,color:"text-pink-600",route:"/admin/seating"}];function c6({userCompany:e}){const[t,n]=R.useState(!1),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState(!1),x=R.useRef(null),w=R.useRef(null),E=bl();R.useEffect(()=>{const O=V=>{x.current&&!x.current.contains(V.target)&&n(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[]),R.useEffect(()=>{t&&w.current&&w.current.focus()},[t]),R.useEffect(()=>{r.trim()?N():h([])},[r]);const N=async()=>{y(!0);const O=r.toLowerCase().trim(),V=[];try{if(O.length>=2){let T=xe.from("events").select("id, name, company:companies(name)").ilike("name",`%${O}%`);e&&(T=T.eq("company_id",e.company_id));const{data:A}=await T;A&&A.forEach(_=>{var H,$;const M=Array.isArray(_.company)?(H=_.company[0])==null?void 0:H.name:($=_.company)==null?void 0:$.name;V.push({id:_.id,type:"event",title:_.name,subtitle:`Event • ${M||"Unknown Company"}`,route:"/admin/events",icon:mn,color:"text-green-600"})})}if(O.length>=2){let T=xe.from("attendees").select("id, name, event:events(name, company:companies(name))").ilike("name",`%${O}%`);e&&(T=T.eq("event.company_id",e.company_id));const{data:A}=await T;A&&A.forEach(_=>{var H,$;const M=Array.isArray(_.event)?(H=_.event[0])==null?void 0:H.name:($=_.event)==null?void 0:$.name;V.push({id:_.id,type:"attendee",title:_.name,subtitle:`Attendee • ${M||"Unknown Event"}`,route:"/admin/attendees",icon:Yt,color:"text-blue-600"})})}if(!e&&O.length>=2){const{data:T}=await xe.from("companies").select("id, name").ilike("name",`%${O}%`);T&&T.forEach(A=>{V.push({id:A.id,type:"company",title:A.name,subtitle:"Company",route:"/admin/companies",icon:Rr,color:"text-purple-600"})})}mx.forEach(T=>{T.label.toLowerCase().includes(O)&&V.push({id:T.key,type:"section",title:T.label,subtitle:"Navigation Section",route:T.route,icon:T.icon,color:T.color})}),h(V.slice(0,10))}catch(T){ue.error("Search error: "+T.message)}finally{y(!1)}},I=O=>{E(O.route),n(!1),a("")},D=O=>{O.key==="Escape"&&(n(!1),a(""))};return d.jsxs("div",{className:"relative",ref:x,children:[d.jsxs("button",{onClick:()=>n(!0),className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[d.jsx(Fo,{className:"h-5 w-5 mr-2"}),d.jsx("span",{className:"hidden md:inline",children:"Search..."})]}),t&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20",children:d.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden",children:[d.jsx("div",{className:"p-4 border-b border-gray-200",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Fo,{className:"h-5 w-5 text-gray-400 mr-3"}),d.jsx("input",{ref:w,type:"text",value:r,onChange:O=>a(O.target.value),onKeyDown:D,placeholder:"Search events, attendees, companies, or sections...",className:"flex-1 outline-none text-lg"}),d.jsx("button",{onClick:()=>n(!1),className:"ml-3 p-1 hover:bg-gray-100 rounded-lg transition-colors",children:d.jsx($d,{className:"h-5 w-5 text-gray-400"})})]})}),d.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:g?d.jsxs("div",{className:"p-8 text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),d.jsx("p",{className:"text-gray-500 mt-2",children:"Searching..."})]}):l.length>0?d.jsx("div",{className:"p-2",children:l.map((O,V)=>{const T=O.icon;return d.jsx("button",{onClick:()=>I(O),className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors group",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:`p-2 rounded-lg mr-3 ${O.color} bg-gray-100 group-hover:bg-gray-200`,children:d.jsx(T,{className:"h-5 w-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-semibold text-gray-900",children:O.title}),d.jsx("div",{className:"text-sm text-gray-500",children:O.subtitle})]}),d.jsx("div",{className:"text-xs text-gray-400 group-hover:text-gray-600",children:O.type})]})},`${O.type}-${O.id}-${V}`)})}):r?d.jsxs("div",{className:"p-8 text-center",children:[d.jsx(Fo,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),d.jsxs("p",{className:"text-gray-500",children:['No results found for "',r,'"']}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try different keywords"})]}):d.jsxs("div",{className:"p-8 text-center",children:[d.jsx(Fo,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-500",children:"Start typing to search..."}),d.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Search events, attendees, companies, or sections"})]})}),!r&&d.jsxs("div",{className:"p-4 border-t border-gray-200",children:[d.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Quick Actions"}),d.jsx("div",{className:"grid grid-cols-2 gap-2",children:mx.map(O=>{const V=O.icon;return d.jsxs("button",{onClick:()=>I({id:O.key,title:O.label,route:O.route,icon:O.icon,color:O.color}),className:"flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[d.jsx(V,{className:`h-4 w-4 mr-2 ${O.color}`}),d.jsx("span",{className:"text-sm font-medium",children:O.label})]},O.key)})})]})]})})]})}const gx=[{name:"Dashboard",href:"/admin",icon:al,color:"from-purple-500 to-pink-500"},{name:"Companies",href:"/admin/companies",icon:Rr,color:"from-blue-500 to-cyan-500"},{name:"Events",href:"/admin/events",icon:mn,color:"from-green-500 to-emerald-500"},{name:"Attendees",href:"/admin/attendees",icon:Yt,color:"from-orange-500 to-red-500"},{name:"Check-in",href:"/admin/checkin",icon:vs,color:"from-indigo-500 to-purple-500"},{name:"QR Generator",href:"/admin/qr-generator",icon:vs,color:"from-emerald-500 to-green-500"},{name:"Seating",href:"/admin/seating",icon:pr,color:"from-pink-500 to-rose-500"},{name:"Voting",href:"/admin/voting",icon:ws,color:"from-violet-500 to-purple-500"},{name:"Lucky Draw",href:"/admin/lucky-draw",icon:Ba,color:"from-yellow-500 to-orange-500"},{name:"Gallery",href:"/admin/gallery",icon:ys,color:"from-teal-500 to-cyan-500"},{name:"Welcome Monitor",href:"/admin/welcome-monitor",icon:ol,color:"from-blue-500 to-indigo-500"},{name:"Voting Monitor",href:"/admin/voting-monitor",icon:ol,color:"from-purple-500 to-indigo-500"}];function u6({children:e,userCompany:t}){const n=bi(),r=bl(),{mode:a,setMode:l}=Pg(),h=async()=>{await xe.auth.signOut(),r("/")};return d.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[d.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-50 lg:w-72 lg:block",children:d.jsxs("div",{className:"flex h-full flex-col bg-white border-r border-gray-200 shadow-lg",children:[d.jsx("div",{className:"flex h-20 items-center justify-center border-b border-gray-200 bg-blue-600",children:d.jsxs("div",{className:"text-center w-full",children:[d.jsxs("div",{className:"flex items-center justify-center mb-1",children:[d.jsx(zd,{className:"h-8 w-8 text-white mr-2"}),d.jsxs("a",{href:"/",children:[" ",d.jsx("h1",{className:"text-2xl font-bold text-white",children:"EventPro"})]})]}),t&&d.jsx("p",{className:"text-sm text-blue-100 truncate px-2 font-medium",children:t.company.name}),d.jsxs("h6",{className:"text-sm text-blue-100 truncate px-10 font-small",children:["powered by ",d.jsx("i",{children:"sangtenuk"})]})]})}),!t&&d.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-white",children:[d.jsx("label",{htmlFor:"hybrid-mode-select",className:"block text-xs font-bold text-gray-700 mb-1",children:"Data Mode"}),d.jsxs("select",{id:"hybrid-mode-select",value:a,onChange:g=>l(g.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-gray-900 text-xs",children:[d.jsx("option",{value:"online",children:"Online (Supabase)"}),d.jsx("option",{value:"offline",children:"Offline (Local Only)"}),d.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),d.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:d.jsx(c6,{userCompany:t})}),d.jsx("nav",{className:"flex-1 space-y-2 p-4 overflow-y-auto",children:gx.filter(g=>!(t&&g.href==="/admin/companies")).map(g=>{const y=g.icon,x=n.pathname===g.href||g.href!=="/admin"&&n.pathname.startsWith(g.href);return d.jsxs(er,{to:g.href,className:`group flex items-center px-4 py-3 text-sm font-semibold rounded-xl transition-all duration-300 ${x?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[d.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${x?"bg-white bg-opacity-20":"bg-gray-100 group-hover:bg-white"}`,children:d.jsx(y,{className:`h-5 w-5 ${x?"text-white":"text-gray-600 group-hover:text-gray-800"}`})}),d.jsx("span",{className:"truncate",children:g.name})]},g.name)})}),d.jsx("div",{className:"p-4 border-t border-gray-200/50",children:d.jsxs("button",{onClick:h,className:"flex items-center w-full px-4 py-3 text-sm font-semibold text-gray-700 rounded-xl hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 hover:text-red-600 transition-all duration-300 group",children:[d.jsx("div",{className:"p-2 rounded-lg mr-3 bg-gray-100 group-hover:bg-red-100 transition-all duration-300",children:d.jsx(lx,{className:"h-5 w-5 text-gray-600 group-hover:text-red-600"})}),"Sign Out"]})})]})}),d.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-white shadow-lg border-b border-gray-200",children:[d.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(zd,{className:"h-6 w-6 text-blue-600 mr-2"}),d.jsxs("div",{children:[d.jsx("a",{href:"/",children:d.jsx("h1",{className:"text-lg font-bold text-blue-600",children:"EventPro"})}),t&&d.jsx("p",{className:"text-xs text-blue-600 font-medium truncate",children:t.company.name})]})]}),d.jsxs("button",{onClick:h,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all duration-300",children:[d.jsx(lx,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),d.jsx("div",{className:"px-4 pb-4 border-t border-gray-200 bg-gray-50",children:d.jsx("div",{className:"grid grid-cols-3 gap-2 mt-3",children:gx.filter(g=>!(t&&g.href==="/admin/companies")).slice(0,9).map(g=>{const y=g.icon,x=n.pathname===g.href||g.href!=="/admin"&&n.pathname.startsWith(g.href);return d.jsxs(er,{to:g.href,className:`flex flex-col items-center px-2 py-3 text-xs font-semibold rounded-xl transition-all duration-300 ${x?"bg-blue-600 text-white":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[d.jsx(y,{className:"h-5 w-5 mb-1"}),d.jsx("span",{className:"truncate text-center leading-tight",children:g.name})]},g.name)})})})]}),d.jsx("div",{className:"flex-1 lg:ml-72",children:d.jsx("main",{className:"flex-1 p-4 md:p-8 pt-32 lg:pt-8",children:e})})]})}function d6(){const[e,t]=R.useState(""),[n,r]=R.useState(""),[a,l]=R.useState(!1),[h,g]=R.useState(!1),y=bl(),x=async w=>{w.preventDefault(),l(!0);try{if(h){const{error:E}=await xe.auth.signUp({email:e,password:n});if(E)throw E;ue.success("Account created successfully!")}else{const{error:E}=await xe.auth.signInWithPassword({email:e,password:n});if(E)throw E;y("/admin")}}catch(E){ue.error(E.message)}finally{l(!1)}};return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:d.jsxs("div",{className:"max-w-md w-full space-y-8",children:[d.jsxs("div",{children:[d.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:h?"Create your account":"Sign in to your account"}),d.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Event Management System"})]}),d.jsxs("form",{className:"mt-8 space-y-6",onSubmit:x,children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),d.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address",value:e,onChange:w=>t(w.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),d.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Password",value:n,onChange:w=>r(w.target.value)})]})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:a?"Loading...":h?"Sign up":"Sign in"})}),d.jsx("div",{className:"text-center",children:d.jsx("button",{type:"button",onClick:()=>g(!h),className:"text-blue-600 hover:text-blue-500 text-sm",children:h?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}var lb={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Sn,function(){var n=function(i,c){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var v in p)Object.prototype.hasOwnProperty.call(p,v)&&(m[v]=p[v])})(i,c)},r=function(){return(r=Object.assign||function(i){for(var c,m=1,p=arguments.length;m<p;m++)for(var v in c=arguments[m])Object.prototype.hasOwnProperty.call(c,v)&&(i[v]=c[v]);return i}).apply(this,arguments)};function a(i,c,m){for(var p,v=0,b=c.length;v<b;v++)!p&&v in c||((p=p||Array.prototype.slice.call(c,0,v))[v]=c[v]);return i.concat(p||Array.prototype.slice.call(c))}var l=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Sn,h=Object.keys,g=Array.isArray;function y(i,c){return typeof c!="object"||h(c).forEach(function(m){i[m]=c[m]}),i}typeof Promise>"u"||l.Promise||(l.Promise=Promise);var x=Object.getPrototypeOf,w={}.hasOwnProperty;function E(i,c){return w.call(i,c)}function N(i,c){typeof c=="function"&&(c=c(x(i))),(typeof Reflect>"u"?h:Reflect.ownKeys)(c).forEach(function(m){D(i,m,c[m])})}var I=Object.defineProperty;function D(i,c,m,p){I(i,c,y(m&&E(m,"get")&&typeof m.get=="function"?{get:m.get,set:m.set,configurable:!0}:{value:m,configurable:!0,writable:!0},p))}function O(i){return{from:function(c){return i.prototype=Object.create(c.prototype),D(i.prototype,"constructor",i),{extend:N.bind(null,i.prototype)}}}}var V=Object.getOwnPropertyDescriptor,T=[].slice;function A(i,c,m){return T.call(i,c,m)}function _(i,c){return c(i)}function M(i){if(!i)throw new Error("Assertion Failed")}function H(i){l.setImmediate?setImmediate(i):setTimeout(i,0)}function $(i,c){if(typeof c=="string"&&E(i,c))return i[c];if(!c)return i;if(typeof c!="string"){for(var m=[],p=0,v=c.length;p<v;++p){var b=$(i,c[p]);m.push(b)}return m}var C=c.indexOf(".");if(C!==-1){var S=i[c.substr(0,C)];return S==null?void 0:$(S,c.substr(C+1))}}function F(i,c,m){if(i&&c!==void 0&&!("isFrozen"in Object&&Object.isFrozen(i)))if(typeof c!="string"&&"length"in c){M(typeof m!="string"&&"length"in m);for(var p=0,v=c.length;p<v;++p)F(i,c[p],m[p])}else{var b,C,S=c.indexOf(".");S!==-1?(b=c.substr(0,S),(C=c.substr(S+1))===""?m===void 0?g(i)&&!isNaN(parseInt(b))?i.splice(b,1):delete i[b]:i[b]=m:F(S=!(S=i[b])||!E(i,b)?i[b]={}:S,C,m)):m===void 0?g(i)&&!isNaN(parseInt(c))?i.splice(c,1):delete i[c]:i[c]=m}}function U(i){var c,m={};for(c in i)E(i,c)&&(m[c]=i[c]);return m}var q=[].concat;function ne(i){return q.apply([],i)}var Te="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(ne([8,16,32,64].map(function(i){return["Int","Uint","Float"].map(function(c){return c+i+"Array"})}))).filter(function(i){return l[i]}),he=new Set(Te.map(function(i){return l[i]})),me=null;function re(i){return me=new WeakMap,i=function c(m){if(!m||typeof m!="object")return m;var p=me.get(m);if(p)return p;if(g(m)){p=[],me.set(m,p);for(var v=0,b=m.length;v<b;++v)p.push(c(m[v]))}else if(he.has(m.constructor))p=m;else{var C,S=x(m);for(C in p=S===Object.prototype?{}:Object.create(S),me.set(m,p),m)E(m,C)&&(p[C]=c(m[C]))}return p}(i),me=null,i}var ae={}.toString;function Y(i){return ae.call(i).slice(8,-1)}var te=typeof Symbol<"u"?Symbol.iterator:"@@iterator",se=typeof te=="symbol"?function(i){var c;return i!=null&&(c=i[te])&&c.apply(i)}:function(){return null};function Q(i,c){return c=i.indexOf(c),0<=c&&i.splice(c,1),0<=c}var ce={};function J(i){var c,m,p,v;if(arguments.length===1){if(g(i))return i.slice();if(this===ce&&typeof i=="string")return[i];if(v=se(i)){for(m=[];!(p=v.next()).done;)m.push(p.value);return m}if(i==null)return[i];if(typeof(c=i.length)!="number")return[i];for(m=new Array(c);c--;)m[c]=i[c];return m}for(c=arguments.length,m=new Array(c);c--;)m[c]=arguments[c];return m}var pe=typeof Symbol<"u"?function(i){return i[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},fe=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Un=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(fe),ye={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function We(i,c){this.name=i,this.message=c}function $e(i,c){return i+". Errors: "+Object.keys(c).map(function(m){return c[m].toString()}).filter(function(m,p,v){return v.indexOf(m)===p}).join(`
`)}function Ct(i,c,m,p){this.failures=c,this.failedKeys=p,this.successCount=m,this.message=$e(i,c)}function _e(i,c){this.name="BulkError",this.failures=Object.keys(c).map(function(m){return c[m]}),this.failuresByPos=c,this.message=$e(i,this.failures)}O(We).from(Error).extend({toString:function(){return this.name+": "+this.message}}),O(Ct).from(We),O(_e).from(We);var It=Un.reduce(function(i,c){return i[c]=c+"Error",i},{}),Je=We,Be=Un.reduce(function(i,c){var m=c+"Error";function p(v,b){this.name=m,v?typeof v=="string"?(this.message="".concat(v).concat(b?`
 `+b:""),this.inner=b||null):typeof v=="object"&&(this.message="".concat(v.name," ").concat(v.message),this.inner=v):(this.message=ye[c]||m,this.inner=null)}return O(p).from(Je),i[c]=p,i},{});Be.Syntax=SyntaxError,Be.Type=TypeError,Be.Range=RangeError;var be=fe.reduce(function(i,c){return i[c+"Error"]=Be[c],i},{}),Oe=Un.reduce(function(i,c){return["Syntax","Type","Range"].indexOf(c)===-1&&(i[c+"Error"]=Be[c]),i},{});function Fe(){}function Ve(i){return i}function At(i,c){return i==null||i===Ve?c:function(m){return c(i(m))}}function jt(i,c){return function(){i.apply(this,arguments),c.apply(this,arguments)}}function ns(i,c){return i===Fe?c:function(){var m=i.apply(this,arguments);m!==void 0&&(arguments[0]=m);var p=this.onsuccess,v=this.onerror;this.onsuccess=null,this.onerror=null;var b=c.apply(this,arguments);return p&&(this.onsuccess=this.onsuccess?jt(p,this.onsuccess):p),v&&(this.onerror=this.onerror?jt(v,this.onerror):v),b!==void 0?b:m}}function $t(i,c){return i===Fe?c:function(){i.apply(this,arguments);var m=this.onsuccess,p=this.onerror;this.onsuccess=this.onerror=null,c.apply(this,arguments),m&&(this.onsuccess=this.onsuccess?jt(m,this.onsuccess):m),p&&(this.onerror=this.onerror?jt(p,this.onerror):p)}}function Tt(i,c){return i===Fe?c:function(m){var p=i.apply(this,arguments);y(m,p);var v=this.onsuccess,b=this.onerror;return this.onsuccess=null,this.onerror=null,m=c.apply(this,arguments),v&&(this.onsuccess=this.onsuccess?jt(v,this.onsuccess):v),b&&(this.onerror=this.onerror?jt(b,this.onerror):b),p===void 0?m===void 0?void 0:m:y(p,m)}}function st(i,c){return i===Fe?c:function(){return c.apply(this,arguments)!==!1&&i.apply(this,arguments)}}function rs(i,c){return i===Fe?c:function(){var m=i.apply(this,arguments);if(m&&typeof m.then=="function"){for(var p=this,v=arguments.length,b=new Array(v);v--;)b[v]=arguments[v];return m.then(function(){return c.apply(p,b)})}return c.apply(this,arguments)}}Oe.ModifyError=Ct,Oe.DexieError=We,Oe.BulkError=_e;var Me=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function _s(i){Me=i}var As={},or=100,Te=typeof Promise>"u"?[]:function(){var i=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[i,x(i),i];var c=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[c,x(c),i]}(),fe=Te[0],Un=Te[1],Te=Te[2],Un=Un&&Un.then,pt=fe&&fe.constructor,Xe=!!Te,ct=function(i,c){Lt.push([i,c]),Bn&&(queueMicrotask(An),Bn=!1)},Ks=!0,Bn=!0,Br=[],Ot=[],Ie=Ve,Pt={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:Fe,pgp:!1,env:{},finalize:Fe},Ae=Pt,Lt=[],br=0,Ei=[];function Re(i){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var c=this._PSD=Ae;if(typeof i!="function"){if(i!==As)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&eo(this,this._value))}this._state=null,this._value=null,++c.ref,function m(p,v){try{v(function(b){if(p._state===null){if(b===p)throw new TypeError("A promise cannot be resolved with itself.");var C=p._lib&&Er();b&&typeof b.then=="function"?m(p,function(S,j){b instanceof Re?b._then(S,j):b.then(S,j)}):(p._state=!0,p._value=b,Tl(p)),C&&ss()}},eo.bind(null,p))}catch(b){eo(p,b)}}(this,i)}var gt={get:function(){var i=Ae,c=De;function m(p,v){var b=this,C=!i.global&&(i!==Ae||c!==De),S=C&&!Xn(),j=new Re(function(P,B){Yn(b,new Ts(Cr(p,i,C,S),Cr(v,i,C,S),P,B,i))});return this._consoleTask&&(j._consoleTask=this._consoleTask),j}return m.prototype=As,m},set:function(i){D(this,"then",i&&i.prototype===As?gt:{get:function(){return i},set:gt.set})}};function Ts(i,c,m,p,v){this.onFulfilled=typeof i=="function"?i:null,this.onRejected=typeof c=="function"?c:null,this.resolve=m,this.reject=p,this.psd=v}function eo(i,c){var m,p;Ot.push(c),i._state===null&&(m=i._lib&&Er(),c=Ie(c),i._state=!1,i._value=c,p=i,Br.some(function(v){return v._value===p._value})||Br.push(p),Tl(i),m&&ss())}function Tl(i){var c=i._listeners;i._listeners=[];for(var m=0,p=c.length;m<p;++m)Yn(i,c[m]);var v=i._PSD;--v.ref||v.finalize(),br===0&&(++br,ct(function(){--br==0&&lr()},[]))}function Yn(i,c){if(i._state!==null){var m=i._state?c.onFulfilled:c.onRejected;if(m===null)return(i._state?c.resolve:c.reject)(i._value);++c.psd.ref,++br,ct(Il,[m,i,c])}else i._listeners.push(c)}function Il(i,c,m){try{var p,v=c._value;!c._state&&Ot.length&&(Ot=[]),p=Me&&c._consoleTask?c._consoleTask.run(function(){return i(v)}):i(v),c._state||Ot.indexOf(v)!==-1||function(b){for(var C=Br.length;C;)if(Br[--C]._value===b._value)return Br.splice(C,1)}(c),m.resolve(p)}catch(b){m.reject(b)}finally{--br==0&&lr(),--m.psd.ref||m.psd.finalize()}}function An(){Xs(Pt,function(){Er()&&ss()})}function Er(){var i=Ks;return Bn=Ks=!1,i}function ss(){var i,c,m;do for(;0<Lt.length;)for(i=Lt,Lt=[],m=i.length,c=0;c<m;++c){var p=i[c];p[0].apply(null,p[1])}while(0<Lt.length);Bn=Ks=!0}function lr(){var i=Br;Br=[],i.forEach(function(p){p._PSD.onunhandled.call(null,p._value,p)});for(var c=Ei.slice(0),m=c.length;m;)c[--m]()}function to(i){return new Re(As,!1,i)}function bt(i,c){var m=Ae;return function(){var p=Er(),v=Ae;try{return vn(m,!0),i.apply(this,arguments)}catch(b){c&&c(b)}finally{vn(v,!1),p&&ss()}}}N(Re.prototype,{then:gt,_then:function(i,c){Yn(this,new Ts(null,null,i,c,Ae))},catch:function(i){if(arguments.length===1)return this.then(null,i);var c=i,m=arguments[1];return typeof c=="function"?this.then(null,function(p){return(p instanceof c?m:to)(p)}):this.then(null,function(p){return(p&&p.name===c?m:to)(p)})},finally:function(i){return this.then(function(c){return Re.resolve(i()).then(function(){return c})},function(c){return Re.resolve(i()).then(function(){return to(c)})})},timeout:function(i,c){var m=this;return i<1/0?new Re(function(p,v){var b=setTimeout(function(){return v(new Be.Timeout(c))},i);m.then(p,v).finally(clearTimeout.bind(null,b))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&D(Re.prototype,Symbol.toStringTag,"Dexie.Promise"),Pt.env=fu(),N(Re,{all:function(){var i=J.apply(null,arguments).map(Ys);return new Re(function(c,m){i.length===0&&c([]);var p=i.length;i.forEach(function(v,b){return Re.resolve(v).then(function(C){i[b]=C,--p||c(i)},m)})})},resolve:function(i){return i instanceof Re?i:i&&typeof i.then=="function"?new Re(function(c,m){i.then(c,m)}):new Re(As,!0,i)},reject:to,race:function(){var i=J.apply(null,arguments).map(Ys);return new Re(function(c,m){i.map(function(p){return Re.resolve(p).then(c,m)})})},PSD:{get:function(){return Ae},set:function(i){return Ae=i}},totalEchoes:{get:function(){return De}},newPSD:Ur,usePSD:Xs,scheduler:{get:function(){return ct},set:function(i){ct=i}},rejectionMapper:{get:function(){return Ie},set:function(i){Ie=i}},follow:function(i,c){return new Re(function(m,p){return Ur(function(v,b){var C=Ae;C.unhandleds=[],C.onunhandled=b,C.finalize=jt(function(){var S,j=this;S=function(){j.unhandleds.length===0?v():b(j.unhandleds[0])},Ei.push(function P(){S(),Ei.splice(Ei.indexOf(P),1)}),++br,ct(function(){--br==0&&lr()},[])},C.finalize),i()},c,m,p)})}}),pt&&(pt.allSettled&&D(Re,"allSettled",function(){var i=J.apply(null,arguments).map(Ys);return new Re(function(c){i.length===0&&c([]);var m=i.length,p=new Array(m);i.forEach(function(v,b){return Re.resolve(v).then(function(C){return p[b]={status:"fulfilled",value:C}},function(C){return p[b]={status:"rejected",reason:C}}).then(function(){return--m||c(p)})})})}),pt.any&&typeof AggregateError<"u"&&D(Re,"any",function(){var i=J.apply(null,arguments).map(Ys);return new Re(function(c,m){i.length===0&&m(new AggregateError([]));var p=i.length,v=new Array(p);i.forEach(function(b,C){return Re.resolve(b).then(function(S){return c(S)},function(S){v[C]=S,--p||m(new AggregateError(v))})})})}),pt.withResolvers&&(Re.withResolvers=pt.withResolvers));var rn={awaits:0,echoes:0,id:0},Fn=0,Fr=[],Mn=0,De=0,Ci=0;function Ur(i,c,m,p){var v=Ae,b=Object.create(v);return b.parent=v,b.ref=0,b.global=!1,b.id=++Ci,Pt.env,b.env=Xe?{Promise:Re,PromiseProp:{value:Re,configurable:!0,writable:!0},all:Re.all,race:Re.race,allSettled:Re.allSettled,any:Re.any,resolve:Re.resolve,reject:Re.reject}:{},c&&y(b,c),++v.ref,b.finalize=function(){--this.parent.ref||this.parent.finalize()},p=Xs(b,i,m,p),b.ref===0&&b.finalize(),p}function un(){return rn.id||(rn.id=++Fn),++rn.awaits,rn.echoes+=or,rn.id}function Xn(){return!!rn.awaits&&(--rn.awaits==0&&(rn.id=0),rn.echoes=rn.awaits*or,!0)}function Ys(i){return rn.echoes&&i&&i.constructor===pt?(un(),i.then(function(c){return Xn(),c},function(c){return Xn(),Qe(c)})):i}function no(){var i=Fr[Fr.length-1];Fr.pop(),vn(i,!1)}function vn(i,c){var m,p=Ae;(c?!rn.echoes||Mn++&&i===Ae:!Mn||--Mn&&i===Ae)||queueMicrotask(c?(function(v){++De,rn.echoes&&--rn.echoes!=0||(rn.echoes=rn.awaits=rn.id=0),Fr.push(Ae),vn(v,!0)}).bind(null,i):no),i!==Ae&&(Ae=i,p===Pt&&(Pt.env=fu()),Xe&&(m=Pt.env.Promise,c=i.env,(p.global||i.global)&&(Object.defineProperty(l,"Promise",c.PromiseProp),m.all=c.all,m.race=c.race,m.resolve=c.resolve,m.reject=c.reject,c.allSettled&&(m.allSettled=c.allSettled),c.any&&(m.any=c.any))))}function fu(){var i=l.Promise;return Xe?{Promise:i,PromiseProp:Object.getOwnPropertyDescriptor(l,"Promise"),all:i.all,race:i.race,allSettled:i.allSettled,any:i.any,resolve:i.resolve,reject:i.reject}:{}}function Xs(i,c,m,p,v){var b=Ae;try{return vn(i,!0),c(m,p,v)}finally{vn(b,!1)}}function Cr(i,c,m,p){return typeof i!="function"?i:function(){var v=Ae;m&&un(),vn(c,!0);try{return i.apply(this,arguments)}finally{vn(v,!1),p&&queueMicrotask(Xn)}}}function wn(i){Promise===pt&&rn.echoes===0?Mn===0?i():enqueueNativeMicroTask(i):setTimeout(i,0)}(""+Un).indexOf("[native code]")===-1&&(un=Xn=Fe);var Qe=Re.reject,Is="￿",Tn="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ro="String expected.",we=[],so="__dbnames",Ut="readonly",js="readwrite";function Qs(i,c){return i?c?function(){return i.apply(this,arguments)&&c.apply(this,arguments)}:i:c}var vt={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function ft(i){return typeof i!="string"||/\./.test(i)?function(c){return c}:function(c){return c[i]===void 0&&i in c&&delete(c=re(c))[i],c}}function at(){throw Be.Type()}function it(i,c){try{var m=io(i),p=io(c);if(m!==p)return m==="Array"?1:p==="Array"?-1:m==="binary"?1:p==="binary"?-1:m==="string"?1:p==="string"?-1:m==="Date"?1:p!=="Date"?NaN:-1;switch(m){case"number":case"Date":case"string":return c<i?1:i<c?-1:0;case"binary":return function(v,b){for(var C=v.length,S=b.length,j=C<S?C:S,P=0;P<j;++P)if(v[P]!==b[P])return v[P]<b[P]?-1:1;return C===S?0:C<S?-1:1}(ao(i),ao(c));case"Array":return function(v,b){for(var C=v.length,S=b.length,j=C<S?C:S,P=0;P<j;++P){var B=it(v[P],b[P]);if(B!==0)return B}return C===S?0:C<S?-1:1}(i,c)}}catch{}return NaN}function io(i){var c=typeof i;return c!="object"?c:ArrayBuffer.isView(i)?"binary":(i=Y(i),i==="ArrayBuffer"?"binary":i)}function ao(i){return i instanceof Uint8Array?i:ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):new Uint8Array(i)}var sn=(xt.prototype._trans=function(i,c,m){var p=this._tx||Ae.trans,v=this.name,b=Me&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(i==="readonly"?"read":"write"," ").concat(this.name));function C(P,B,L){if(!L.schema[v])throw new Be.NotFound("Table "+v+" not part of transaction");return c(L.idbtrans,L)}var S=Er();try{var j=p&&p.db._novip===this.db._novip?p===Ae.trans?p._promise(i,C,m):Ur(function(){return p._promise(i,C,m)},{trans:p,transless:Ae.transless||Ae}):function P(B,L,z,G){if(B.idbdb&&(B._state.openComplete||Ae.letThrough||B._vip)){var K=B._createTransaction(L,z,B._dbSchema);try{K.create(),B._state.PR1398_maxLoop=3}catch(X){return X.name===It.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return P(B,L,z,G)})):Qe(X)}return K._promise(L,function(X,Z){return Ur(function(){return Ae.trans=K,G(X,Z,K)})}).then(function(X){if(L==="readwrite")try{K.idbtrans.commit()}catch{}return L==="readonly"?X:K._completion.then(function(){return X})})}if(B._state.openComplete)return Qe(new Be.DatabaseClosed(B._state.dbOpenError));if(!B._state.isBeingOpened){if(!B._state.autoOpen)return Qe(new Be.DatabaseClosed);B.open().catch(Fe)}return B._state.dbReadyPromise.then(function(){return P(B,L,z,G)})}(this.db,i,[this.name],C);return b&&(j._consoleTask=b,j=j.catch(function(P){return console.trace(P),Qe(P)})),j}finally{S&&ss()}},xt.prototype.get=function(i,c){var m=this;return i&&i.constructor===Object?this.where(i).first(c):i==null?Qe(new Be.Type("Invalid argument to Table.get()")):this._trans("readonly",function(p){return m.core.get({trans:p,key:i}).then(function(v){return m.hook.reading.fire(v)})}).then(c)},xt.prototype.where=function(i){if(typeof i=="string")return new this.db.WhereClause(this,i);if(g(i))return new this.db.WhereClause(this,"[".concat(i.join("+"),"]"));var c=h(i);if(c.length===1)return this.where(c[0]).equals(i[c[0]]);var m=this.schema.indexes.concat(this.schema.primKey).filter(function(S){if(S.compound&&c.every(function(P){return 0<=S.keyPath.indexOf(P)})){for(var j=0;j<c.length;++j)if(c.indexOf(S.keyPath[j])===-1)return!1;return!0}return!1}).sort(function(S,j){return S.keyPath.length-j.keyPath.length})[0];if(m&&this.db._maxKey!==Is){var b=m.keyPath.slice(0,c.length);return this.where(b).equals(b.map(function(j){return i[j]}))}!m&&Me&&console.warn("The query ".concat(JSON.stringify(i)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(c.join("+"),"]"));var p=this.schema.idxByName;function v(S,j){return it(S,j)===0}var C=c.reduce(function(L,j){var P=L[0],B=L[1],L=p[j],z=i[j];return[P||L,P||!L?Qs(B,L&&L.multi?function(G){return G=$(G,j),g(G)&&G.some(function(K){return v(z,K)})}:function(G){return v(z,$(G,j))}):B]},[null,null]),b=C[0],C=C[1];return b?this.where(b.name).equals(i[b.keyPath]).filter(C):m?this.filter(C):this.where(c).equals("")},xt.prototype.filter=function(i){return this.toCollection().and(i)},xt.prototype.count=function(i){return this.toCollection().count(i)},xt.prototype.offset=function(i){return this.toCollection().offset(i)},xt.prototype.limit=function(i){return this.toCollection().limit(i)},xt.prototype.each=function(i){return this.toCollection().each(i)},xt.prototype.toArray=function(i){return this.toCollection().toArray(i)},xt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},xt.prototype.orderBy=function(i){return new this.db.Collection(new this.db.WhereClause(this,g(i)?"[".concat(i.join("+"),"]"):i))},xt.prototype.reverse=function(){return this.toCollection().reverse()},xt.prototype.mapToClass=function(i){var c,m=this.db,p=this.name;function v(){return c!==null&&c.apply(this,arguments)||this}(this.schema.mappedClass=i).prototype instanceof at&&(function(j,P){if(typeof P!="function"&&P!==null)throw new TypeError("Class extends value "+String(P)+" is not a constructor or null");function B(){this.constructor=j}n(j,P),j.prototype=P===null?Object.create(P):(B.prototype=P.prototype,new B)}(v,c=i),Object.defineProperty(v.prototype,"db",{get:function(){return m},enumerable:!1,configurable:!0}),v.prototype.table=function(){return p},i=v);for(var b=new Set,C=i.prototype;C;C=x(C))Object.getOwnPropertyNames(C).forEach(function(j){return b.add(j)});function S(j){if(!j)return j;var P,B=Object.create(i.prototype);for(P in j)if(!b.has(P))try{B[P]=j[P]}catch{}return B}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=S,this.hook("reading",S),i},xt.prototype.defineClass=function(){return this.mapToClass(function(i){y(this,i)})},xt.prototype.add=function(i,c){var m=this,p=this.schema.primKey,v=p.auto,b=p.keyPath,C=i;return b&&v&&(C=ft(b)(i)),this._trans("readwrite",function(S){return m.core.mutate({trans:S,type:"add",keys:c!=null?[c]:null,values:[C]})}).then(function(S){return S.numFailures?Re.reject(S.failures[0]):S.lastResult}).then(function(S){if(b)try{F(i,b,S)}catch{}return S})},xt.prototype.update=function(i,c){return typeof i!="object"||g(i)?this.where(":id").equals(i).modify(c):(i=$(i,this.schema.primKey.keyPath),i===void 0?Qe(new Be.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(i).modify(c))},xt.prototype.put=function(i,c){var m=this,p=this.schema.primKey,v=p.auto,b=p.keyPath,C=i;return b&&v&&(C=ft(b)(i)),this._trans("readwrite",function(S){return m.core.mutate({trans:S,type:"put",values:[C],keys:c!=null?[c]:null})}).then(function(S){return S.numFailures?Re.reject(S.failures[0]):S.lastResult}).then(function(S){if(b)try{F(i,b,S)}catch{}return S})},xt.prototype.delete=function(i){var c=this;return this._trans("readwrite",function(m){return c.core.mutate({trans:m,type:"delete",keys:[i]})}).then(function(m){return m.numFailures?Re.reject(m.failures[0]):void 0})},xt.prototype.clear=function(){var i=this;return this._trans("readwrite",function(c){return i.core.mutate({trans:c,type:"deleteRange",range:vt})}).then(function(c){return c.numFailures?Re.reject(c.failures[0]):void 0})},xt.prototype.bulkGet=function(i){var c=this;return this._trans("readonly",function(m){return c.core.getMany({keys:i,trans:m}).then(function(p){return p.map(function(v){return c.hook.reading.fire(v)})})})},xt.prototype.bulkAdd=function(i,c,m){var p=this,v=Array.isArray(c)?c:void 0,b=(m=m||(v?void 0:c))?m.allKeys:void 0;return this._trans("readwrite",function(C){var P=p.schema.primKey,S=P.auto,P=P.keyPath;if(P&&v)throw new Be.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(v&&v.length!==i.length)throw new Be.InvalidArgument("Arguments objects and keys must have the same length");var j=i.length,P=P&&S?i.map(ft(P)):i;return p.core.mutate({trans:C,type:"add",keys:v,values:P,wantResults:b}).then(function(K){var L=K.numFailures,z=K.results,G=K.lastResult,K=K.failures;if(L===0)return b?z:G;throw new _e("".concat(p.name,".bulkAdd(): ").concat(L," of ").concat(j," operations failed"),K)})})},xt.prototype.bulkPut=function(i,c,m){var p=this,v=Array.isArray(c)?c:void 0,b=(m=m||(v?void 0:c))?m.allKeys:void 0;return this._trans("readwrite",function(C){var P=p.schema.primKey,S=P.auto,P=P.keyPath;if(P&&v)throw new Be.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(v&&v.length!==i.length)throw new Be.InvalidArgument("Arguments objects and keys must have the same length");var j=i.length,P=P&&S?i.map(ft(P)):i;return p.core.mutate({trans:C,type:"put",keys:v,values:P,wantResults:b}).then(function(K){var L=K.numFailures,z=K.results,G=K.lastResult,K=K.failures;if(L===0)return b?z:G;throw new _e("".concat(p.name,".bulkPut(): ").concat(L," of ").concat(j," operations failed"),K)})})},xt.prototype.bulkUpdate=function(i){var c=this,m=this.core,p=i.map(function(C){return C.key}),v=i.map(function(C){return C.changes}),b=[];return this._trans("readwrite",function(C){return m.getMany({trans:C,keys:p,cache:"clone"}).then(function(S){var j=[],P=[];i.forEach(function(L,z){var G=L.key,K=L.changes,X=S[z];if(X){for(var Z=0,ee=Object.keys(K);Z<ee.length;Z++){var oe=ee[Z],le=K[oe];if(oe===c.schema.primKey.keyPath){if(it(le,G)!==0)throw new Be.Constraint("Cannot update primary key in bulkUpdate()")}else F(X,oe,le)}b.push(z),j.push(G),P.push(X)}});var B=j.length;return m.mutate({trans:C,type:"put",keys:j,values:P,updates:{keys:p,changeSpecs:v}}).then(function(L){var z=L.numFailures,G=L.failures;if(z===0)return B;for(var K=0,X=Object.keys(G);K<X.length;K++){var Z,ee=X[K],oe=b[Number(ee)];oe!=null&&(Z=G[ee],delete G[ee],G[oe]=Z)}throw new _e("".concat(c.name,".bulkUpdate(): ").concat(z," of ").concat(B," operations failed"),G)})})})},xt.prototype.bulkDelete=function(i){var c=this,m=i.length;return this._trans("readwrite",function(p){return c.core.mutate({trans:p,type:"delete",keys:i})}).then(function(C){var v=C.numFailures,b=C.lastResult,C=C.failures;if(v===0)return b;throw new _e("".concat(c.name,".bulkDelete(): ").concat(v," of ").concat(m," operations failed"),C)})},xt);function xt(){}function ha(i){function c(C,S){if(S){for(var j=arguments.length,P=new Array(j-1);--j;)P[j-1]=arguments[j];return m[C].subscribe.apply(null,P),i}if(typeof C=="string")return m[C]}var m={};c.addEventType=b;for(var p=1,v=arguments.length;p<v;++p)b(arguments[p]);return c;function b(C,S,j){if(typeof C!="object"){var P;S=S||st;var B={subscribers:[],fire:j=j||Fe,subscribe:function(L){B.subscribers.indexOf(L)===-1&&(B.subscribers.push(L),B.fire=S(B.fire,L))},unsubscribe:function(L){B.subscribers=B.subscribers.filter(function(z){return z!==L}),B.fire=B.subscribers.reduce(S,j)}};return m[C]=c[C]=B}h(P=C).forEach(function(L){var z=P[L];if(g(z))b(L,P[L][0],P[L][1]);else{if(z!=="asap")throw new Be.InvalidArgument("Invalid event config");var G=b(L,Ve,function(){for(var K=arguments.length,X=new Array(K);K--;)X[K]=arguments[K];G.subscribers.forEach(function(Z){H(function(){Z.apply(null,X)})})})}})}}function Ft(i,c){return O(c).from({prototype:i}),c}function Qn(i,c){return!(i.filter||i.algorithm||i.or)&&(c?i.justLimit:!i.replayFilter)}function jl(i,c){i.filter=Qs(i.filter,c)}function ks(i,c,m){var p=i.replayFilter;i.replayFilter=p?function(){return Qs(p(),c())}:c,i.justLimit=m&&!p}function Nt(i,c){if(i.isPrimKey)return c.primaryKey;var m=c.getIndexByKeyPath(i.index);if(!m)throw new Be.Schema("KeyPath "+i.index+" on object store "+c.name+" is not indexed");return m}function bn(i,c,m){var p=Nt(i,c.schema);return c.openCursor({trans:m,values:!i.keysOnly,reverse:i.dir==="prev",unique:!!i.unique,query:{index:p,range:i.range}})}function ie(i,c,m,p){var v=i.replayFilter?Qs(i.filter,i.replayFilter()):i.filter;if(i.or){var b={},C=function(S,j,P){var B,L;v&&!v(j,P,function(z){return j.stop(z)},function(z){return j.fail(z)})||((L=""+(B=j.primaryKey))=="[object ArrayBuffer]"&&(L=""+new Uint8Array(B)),E(b,L)||(b[L]=!0,c(S,j,P)))};return Promise.all([i.or._iterate(C,m),W(bn(i,p,m),i.algorithm,C,!i.keysOnly&&i.valueMapper)])}return W(bn(i,p,m),Qs(i.algorithm,v),c,!i.keysOnly&&i.valueMapper)}function W(i,c,m,p){var v=bt(p?function(b,C,S){return m(p(b),C,S)}:m);return i.then(function(b){if(b)return b.start(function(){var C=function(){return b.continue()};c&&!c(b,function(S){return C=S},function(S){b.stop(S),C=Fe},function(S){b.fail(S),C=Fe})||v(b.value,b,function(S){return C=S}),C()})})}var ze=(dn.prototype.execute=function(i){var c=this["@@propmod"];if(c.add!==void 0){var m=c.add;if(g(m))return a(a([],g(i)?i:[],!0),m).sort();if(typeof m=="number")return(Number(i)||0)+m;if(typeof m=="bigint")try{return BigInt(i)+m}catch{return BigInt(0)+m}throw new TypeError("Invalid term ".concat(m))}if(c.remove!==void 0){var p=c.remove;if(g(p))return g(i)?i.filter(function(v){return!p.includes(v)}).sort():[];if(typeof p=="number")return Number(i)-p;if(typeof p=="bigint")try{return BigInt(i)-p}catch{return BigInt(0)-p}throw new TypeError("Invalid subtrahend ".concat(p))}return m=(m=c.replacePrefix)===null||m===void 0?void 0:m[0],m&&typeof i=="string"&&i.startsWith(m)?c.replacePrefix[1]+i.substring(m.length):i},dn);function dn(i){this["@@propmod"]=i}var cr=(yt.prototype._read=function(i,c){var m=this._ctx;return m.error?m.table._trans(null,Qe.bind(null,m.error)):m.table._trans("readonly",i).then(c)},yt.prototype._write=function(i){var c=this._ctx;return c.error?c.table._trans(null,Qe.bind(null,c.error)):c.table._trans("readwrite",i,"locked")},yt.prototype._addAlgorithm=function(i){var c=this._ctx;c.algorithm=Qs(c.algorithm,i)},yt.prototype._iterate=function(i,c){return ie(this._ctx,i,c,this._ctx.table.core)},yt.prototype.clone=function(i){var c=Object.create(this.constructor.prototype),m=Object.create(this._ctx);return i&&y(m,i),c._ctx=m,c},yt.prototype.raw=function(){return this._ctx.valueMapper=null,this},yt.prototype.each=function(i){var c=this._ctx;return this._read(function(m){return ie(c,i,m,c.table.core)})},yt.prototype.count=function(i){var c=this;return this._read(function(m){var p=c._ctx,v=p.table.core;if(Qn(p,!0))return v.count({trans:m,query:{index:Nt(p,v.schema),range:p.range}}).then(function(C){return Math.min(C,p.limit)});var b=0;return ie(p,function(){return++b,!1},m,v).then(function(){return b})}).then(i)},yt.prototype.sortBy=function(i,c){var m=i.split(".").reverse(),p=m[0],v=m.length-1;function b(j,P){return P?b(j[m[P]],P-1):j[p]}var C=this._ctx.dir==="next"?1:-1;function S(j,P){return it(b(j,v),b(P,v))*C}return this.toArray(function(j){return j.sort(S)}).then(c)},yt.prototype.toArray=function(i){var c=this;return this._read(function(m){var p=c._ctx;if(p.dir==="next"&&Qn(p,!0)&&0<p.limit){var v=p.valueMapper,b=Nt(p,p.table.core.schema);return p.table.core.query({trans:m,limit:p.limit,values:!0,query:{index:b,range:p.range}}).then(function(S){return S=S.result,v?S.map(v):S})}var C=[];return ie(p,function(S){return C.push(S)},m,p.table.core).then(function(){return C})},i)},yt.prototype.offset=function(i){var c=this._ctx;return i<=0||(c.offset+=i,Qn(c)?ks(c,function(){var m=i;return function(p,v){return m===0||(m===1?--m:v(function(){p.advance(m),m=0}),!1)}}):ks(c,function(){var m=i;return function(){return--m<0}})),this},yt.prototype.limit=function(i){return this._ctx.limit=Math.min(this._ctx.limit,i),ks(this._ctx,function(){var c=i;return function(m,p,v){return--c<=0&&p(v),0<=c}},!0),this},yt.prototype.until=function(i,c){return jl(this._ctx,function(m,p,v){return!i(m.value)||(p(v),c)}),this},yt.prototype.first=function(i){return this.limit(1).toArray(function(c){return c[0]}).then(i)},yt.prototype.last=function(i){return this.reverse().first(i)},yt.prototype.filter=function(i){var c;return jl(this._ctx,function(m){return i(m.value)}),(c=this._ctx).isMatch=Qs(c.isMatch,i),this},yt.prototype.and=function(i){return this.filter(i)},yt.prototype.or=function(i){return new this.db.WhereClause(this._ctx.table,i,this)},yt.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},yt.prototype.desc=function(){return this.reverse()},yt.prototype.eachKey=function(i){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(m,p){i(p.key,p)})},yt.prototype.eachUniqueKey=function(i){return this._ctx.unique="unique",this.eachKey(i)},yt.prototype.eachPrimaryKey=function(i){var c=this._ctx;return c.keysOnly=!c.isMatch,this.each(function(m,p){i(p.primaryKey,p)})},yt.prototype.keys=function(i){var c=this._ctx;c.keysOnly=!c.isMatch;var m=[];return this.each(function(p,v){m.push(v.key)}).then(function(){return m}).then(i)},yt.prototype.primaryKeys=function(i){var c=this._ctx;if(c.dir==="next"&&Qn(c,!0)&&0<c.limit)return this._read(function(p){var v=Nt(c,c.table.core.schema);return c.table.core.query({trans:p,values:!1,limit:c.limit,query:{index:v,range:c.range}})}).then(function(p){return p.result}).then(i);c.keysOnly=!c.isMatch;var m=[];return this.each(function(p,v){m.push(v.primaryKey)}).then(function(){return m}).then(i)},yt.prototype.uniqueKeys=function(i){return this._ctx.unique="unique",this.keys(i)},yt.prototype.firstKey=function(i){return this.limit(1).keys(function(c){return c[0]}).then(i)},yt.prototype.lastKey=function(i){return this.reverse().firstKey(i)},yt.prototype.distinct=function(){var i=this._ctx,i=i.index&&i.table.schema.idxByName[i.index];if(!i||!i.multi)return this;var c={};return jl(this._ctx,function(v){var p=v.primaryKey.toString(),v=E(c,p);return c[p]=!0,!v}),this},yt.prototype.modify=function(i){var c=this,m=this._ctx;return this._write(function(p){var v,b,C;C=typeof i=="function"?i:(v=h(i),b=v.length,function(Z){for(var ee=!1,oe=0;oe<b;++oe){var le=v[oe],ge=i[le],ve=$(Z,le);ge instanceof ze?(F(Z,le,ge.execute(ve)),ee=!0):ve!==ge&&(F(Z,le,ge),ee=!0)}return ee});var S=m.table.core,L=S.schema.primaryKey,j=L.outbound,P=L.extractKey,B=200,L=c.db._options.modifyChunkSize;L&&(B=typeof L=="object"?L[S.name]||L["*"]||200:L);function z(Z,le){var oe=le.failures,le=le.numFailures;K+=Z-le;for(var ge=0,ve=h(oe);ge<ve.length;ge++){var Ce=ve[ge];G.push(oe[Ce])}}var G=[],K=0,X=[];return c.clone().primaryKeys().then(function(Z){function ee(le){var ge=Math.min(B,Z.length-le);return S.getMany({trans:p,keys:Z.slice(le,le+ge),cache:"immutable"}).then(function(ve){for(var Ce=[],Ee=[],Ne=j?[]:null,je=[],ke=0;ke<ge;++ke){var Pe=ve[ke],nt={value:re(Pe),primKey:Z[le+ke]};C.call(nt,nt.value,nt)!==!1&&(nt.value==null?je.push(Z[le+ke]):j||it(P(Pe),P(nt.value))===0?(Ee.push(nt.value),j&&Ne.push(Z[le+ke])):(je.push(Z[le+ke]),Ce.push(nt.value)))}return Promise.resolve(0<Ce.length&&S.mutate({trans:p,type:"add",values:Ce}).then(function(ot){for(var lt in ot.failures)je.splice(parseInt(lt),1);z(Ce.length,ot)})).then(function(){return(0<Ee.length||oe&&typeof i=="object")&&S.mutate({trans:p,type:"put",keys:Ne,values:Ee,criteria:oe,changeSpec:typeof i!="function"&&i,isAdditionalChunk:0<le}).then(function(ot){return z(Ee.length,ot)})}).then(function(){return(0<je.length||oe&&i===fa)&&S.mutate({trans:p,type:"delete",keys:je,criteria:oe,isAdditionalChunk:0<le}).then(function(ot){return z(je.length,ot)})}).then(function(){return Z.length>le+ge&&ee(le+B)})})}var oe=Qn(m)&&m.limit===1/0&&(typeof i!="function"||i===fa)&&{index:m.index,range:m.range};return ee(0).then(function(){if(0<G.length)throw new Ct("Error modifying one or more objects",G,K,X);return Z.length})})})},yt.prototype.delete=function(){var i=this._ctx,c=i.range;return Qn(i)&&(i.isPrimKey||c.type===3)?this._write(function(m){var p=i.table.core.schema.primaryKey,v=c;return i.table.core.count({trans:m,query:{index:p,range:v}}).then(function(b){return i.table.core.mutate({trans:m,type:"deleteRange",range:v}).then(function(C){var S=C.failures;if(C.lastResult,C.results,C=C.numFailures,C)throw new Ct("Could not delete some values",Object.keys(S).map(function(j){return S[j]}),b-C);return b-C})})}):this.modify(fa)},yt);function yt(){}var fa=function(i,c){return c.value=null};function ur(i,c){return i<c?-1:i===c?0:1}function Ge(i,c){return c<i?-1:i===c?0:1}function ut(i,c,m){return i=i instanceof lo?new i.Collection(i):i,i._ctx.error=new(m||TypeError)(c),i}function Zs(i){return new i.Collection(i,function(){return ma("")}).limit(0)}function oo(i,c,m,p){var v,b,C,S,j,P,B,L=m.length;if(!m.every(function(K){return typeof K=="string"}))return ut(i,ro);function z(K){v=K==="next"?function(Z){return Z.toUpperCase()}:function(Z){return Z.toLowerCase()},b=K==="next"?function(Z){return Z.toLowerCase()}:function(Z){return Z.toUpperCase()},C=K==="next"?ur:Ge;var X=m.map(function(Z){return{lower:b(Z),upper:v(Z)}}).sort(function(Z,ee){return C(Z.lower,ee.lower)});S=X.map(function(Z){return Z.upper}),j=X.map(function(Z){return Z.lower}),B=(P=K)==="next"?"":p}z("next"),i=new i.Collection(i,function(){return Vr(S[0],j[L-1]+p)}),i._ondirectionchange=function(K){z(K)};var G=0;return i._addAlgorithm(function(K,X,Z){var ee=K.key;if(typeof ee!="string")return!1;var oe=b(ee);if(c(oe,j,G))return!0;for(var le=null,ge=G;ge<L;++ge){var ve=function(Ce,Ee,Ne,je,ke,Pe){for(var nt=Math.min(Ce.length,je.length),ot=-1,lt=0;lt<nt;++lt){var _r=Ee[lt];if(_r!==je[lt])return ke(Ce[lt],Ne[lt])<0?Ce.substr(0,lt)+Ne[lt]+Ne.substr(lt+1):ke(Ce[lt],je[lt])<0?Ce.substr(0,lt)+je[lt]+Ne.substr(lt+1):0<=ot?Ce.substr(0,ot)+Ee[ot]+Ne.substr(ot+1):null;ke(Ce[lt],_r)<0&&(ot=lt)}return nt<je.length&&Pe==="next"?Ce+Ne.substr(Ce.length):nt<Ce.length&&Pe==="prev"?Ce.substr(0,Ne.length):ot<0?null:Ce.substr(0,ot)+je[ot]+Ne.substr(ot+1)}(ee,oe,S[ge],j[ge],C,P);ve===null&&le===null?G=ge+1:(le===null||0<C(le,ve))&&(le=ve)}return X(le!==null?function(){K.continue(le+B)}:Z),!1}),i}function Vr(i,c,m,p){return{type:2,lower:i,upper:c,lowerOpen:m,upperOpen:p}}function ma(i){return{type:1,lower:i,upper:i}}var lo=(Object.defineProperty(pn.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),pn.prototype.between=function(i,c,m,p){m=m!==!1,p=p===!0;try{return 0<this._cmp(i,c)||this._cmp(i,c)===0&&(m||p)&&(!m||!p)?Zs(this):new this.Collection(this,function(){return Vr(i,c,!m,!p)})}catch{return ut(this,Tn)}},pn.prototype.equals=function(i){return i==null?ut(this,Tn):new this.Collection(this,function(){return ma(i)})},pn.prototype.above=function(i){return i==null?ut(this,Tn):new this.Collection(this,function(){return Vr(i,void 0,!0)})},pn.prototype.aboveOrEqual=function(i){return i==null?ut(this,Tn):new this.Collection(this,function(){return Vr(i,void 0,!1)})},pn.prototype.below=function(i){return i==null?ut(this,Tn):new this.Collection(this,function(){return Vr(void 0,i,!1,!0)})},pn.prototype.belowOrEqual=function(i){return i==null?ut(this,Tn):new this.Collection(this,function(){return Vr(void 0,i)})},pn.prototype.startsWith=function(i){return typeof i!="string"?ut(this,ro):this.between(i,i+Is,!0,!0)},pn.prototype.startsWithIgnoreCase=function(i){return i===""?this.startsWith(i):oo(this,function(c,m){return c.indexOf(m[0])===0},[i],Is)},pn.prototype.equalsIgnoreCase=function(i){return oo(this,function(c,m){return c===m[0]},[i],"")},pn.prototype.anyOfIgnoreCase=function(){var i=J.apply(ce,arguments);return i.length===0?Zs(this):oo(this,function(c,m){return m.indexOf(c)!==-1},i,"")},pn.prototype.startsWithAnyOfIgnoreCase=function(){var i=J.apply(ce,arguments);return i.length===0?Zs(this):oo(this,function(c,m){return m.some(function(p){return c.indexOf(p)===0})},i,Is)},pn.prototype.anyOf=function(){var i=this,c=J.apply(ce,arguments),m=this._cmp;try{c.sort(m)}catch{return ut(this,Tn)}if(c.length===0)return Zs(this);var p=new this.Collection(this,function(){return Vr(c[0],c[c.length-1])});p._ondirectionchange=function(b){m=b==="next"?i._ascending:i._descending,c.sort(m)};var v=0;return p._addAlgorithm(function(b,C,S){for(var j=b.key;0<m(j,c[v]);)if(++v===c.length)return C(S),!1;return m(j,c[v])===0||(C(function(){b.continue(c[v])}),!1)}),p},pn.prototype.notEqual=function(i){return this.inAnyRange([[-1/0,i],[i,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},pn.prototype.noneOf=function(){var i=J.apply(ce,arguments);if(i.length===0)return new this.Collection(this);try{i.sort(this._ascending)}catch{return ut(this,Tn)}var c=i.reduce(function(m,p){return m?m.concat([[m[m.length-1][1],p]]):[[-1/0,p]]},null);return c.push([i[i.length-1],this.db._maxKey]),this.inAnyRange(c,{includeLowers:!1,includeUppers:!1})},pn.prototype.inAnyRange=function(ee,c){var m=this,p=this._cmp,v=this._ascending,b=this._descending,C=this._min,S=this._max;if(ee.length===0)return Zs(this);if(!ee.every(function(oe){return oe[0]!==void 0&&oe[1]!==void 0&&v(oe[0],oe[1])<=0}))return ut(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Be.InvalidArgument);var j=!c||c.includeLowers!==!1,P=c&&c.includeUppers===!0,B,L=v;function z(oe,le){return L(oe[0],le[0])}try{(B=ee.reduce(function(oe,le){for(var ge=0,ve=oe.length;ge<ve;++ge){var Ce=oe[ge];if(p(le[0],Ce[1])<0&&0<p(le[1],Ce[0])){Ce[0]=C(Ce[0],le[0]),Ce[1]=S(Ce[1],le[1]);break}}return ge===ve&&oe.push(le),oe},[])).sort(z)}catch{return ut(this,Tn)}var G=0,K=P?function(oe){return 0<v(oe,B[G][1])}:function(oe){return 0<=v(oe,B[G][1])},X=j?function(oe){return 0<b(oe,B[G][0])}:function(oe){return 0<=b(oe,B[G][0])},Z=K,ee=new this.Collection(this,function(){return Vr(B[0][0],B[B.length-1][1],!j,!P)});return ee._ondirectionchange=function(oe){L=oe==="next"?(Z=K,v):(Z=X,b),B.sort(z)},ee._addAlgorithm(function(oe,le,ge){for(var ve,Ce=oe.key;Z(Ce);)if(++G===B.length)return le(ge),!1;return!K(ve=Ce)&&!X(ve)||(m._cmp(Ce,B[G][1])===0||m._cmp(Ce,B[G][0])===0||le(function(){L===v?oe.continue(B[G][0]):oe.continue(B[G][1])}),!1)}),ee},pn.prototype.startsWithAnyOf=function(){var i=J.apply(ce,arguments);return i.every(function(c){return typeof c=="string"})?i.length===0?Zs(this):this.inAnyRange(i.map(function(c){return[c,c+Is]})):ut(this,"startsWithAnyOf() only works with strings")},pn);function pn(){}function kt(i){return bt(function(c){return is(c),i(c.target.error),!1})}function is(i){i.stopPropagation&&i.stopPropagation(),i.preventDefault&&i.preventDefault()}var dr="storagemutated",qe="x-storagemutated-1",Rs=ha(null,dr),tt=(Bt.prototype._lock=function(){return M(!Ae.global),++this._reculock,this._reculock!==1||Ae.global||(Ae.lockOwnerFor=this),this},Bt.prototype._unlock=function(){if(M(!Ae.global),--this._reculock==0)for(Ae.global||(Ae.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var i=this._blockedFuncs.shift();try{Xs(i[1],i[0])}catch{}}return this},Bt.prototype._locked=function(){return this._reculock&&Ae.lockOwnerFor!==this},Bt.prototype.create=function(i){var c=this;if(!this.mode)return this;var m=this.db.idbdb,p=this.db._state.dbOpenError;if(M(!this.idbtrans),!i&&!m)switch(p&&p.name){case"DatabaseClosedError":throw new Be.DatabaseClosed(p);case"MissingAPIError":throw new Be.MissingAPI(p.message,p);default:throw new Be.OpenFailed(p)}if(!this.active)throw new Be.TransactionInactive;return M(this._completion._state===null),(i=this.idbtrans=i||(this.db.core||m).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=bt(function(v){is(v),c._reject(i.error)}),i.onabort=bt(function(v){is(v),c.active&&c._reject(new Be.Abort(i.error)),c.active=!1,c.on("abort").fire(v)}),i.oncomplete=bt(function(){c.active=!1,c._resolve(),"mutatedParts"in i&&Rs.storagemutated.fire(i.mutatedParts)}),this},Bt.prototype._promise=function(i,c,m){var p=this;if(i==="readwrite"&&this.mode!=="readwrite")return Qe(new Be.ReadOnly("Transaction is readonly"));if(!this.active)return Qe(new Be.TransactionInactive);if(this._locked())return new Re(function(b,C){p._blockedFuncs.push([function(){p._promise(i,c,m).then(b,C)},Ae])});if(m)return Ur(function(){var b=new Re(function(C,S){p._lock();var j=c(C,S,p);j&&j.then&&j.then(C,S)});return b.finally(function(){return p._unlock()}),b._lib=!0,b});var v=new Re(function(b,C){var S=c(b,C,p);S&&S.then&&S.then(b,C)});return v._lib=!0,v},Bt.prototype._root=function(){return this.parent?this.parent._root():this},Bt.prototype.waitFor=function(i){var c,m=this._root(),p=Re.resolve(i);m._waitingFor?m._waitingFor=m._waitingFor.then(function(){return p}):(m._waitingFor=p,m._waitingQueue=[],c=m.idbtrans.objectStore(m.storeNames[0]),function b(){for(++m._spinCount;m._waitingQueue.length;)m._waitingQueue.shift()();m._waitingFor&&(c.get(-1/0).onsuccess=b)}());var v=m._waitingFor;return new Re(function(b,C){p.then(function(S){return m._waitingQueue.push(bt(b.bind(null,S)))},function(S){return m._waitingQueue.push(bt(C.bind(null,S)))}).finally(function(){m._waitingFor===v&&(m._waitingFor=null)})})},Bt.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Be.Abort))},Bt.prototype.table=function(i){var c=this._memoizedTables||(this._memoizedTables={});if(E(c,i))return c[i];var m=this.schema[i];if(!m)throw new Be.NotFound("Table "+i+" not part of transaction");return m=new this.db.Table(i,m,this),m.core=this.db.core.table(i),c[i]=m},Bt);function Bt(){}function kl(i,c,m,p,v,b,C){return{name:i,keyPath:c,unique:m,multi:p,auto:v,compound:b,src:(m&&!C?"&":"")+(p?"*":"")+(v?"++":"")+co(c)}}function co(i){return typeof i=="string"?i:i?"["+[].join.call(i,"+")+"]":""}function uo(i,c,m){return{name:i,primKey:c,indexes:m,mappedClass:null,idxByName:(p=function(v){return[v.name,v]},m.reduce(function(v,b,C){return C=p(b,C),C&&(v[C[0]]=C[1]),v},{}))};var p}var Nr=function(i){try{return i.only([[]]),Nr=function(){return[[]]},[[]]}catch{return Nr=function(){return Is},Is}};function Rl(i){return i==null?function(){}:typeof i=="string"?(c=i).split(".").length===1?function(m){return m[c]}:function(m){return $(m,c)}:function(m){return $(m,i)};var c}function Ni(i){return[].slice.call(i)}var ga=0;function as(i){return i==null?":id":typeof i=="string"?i:"[".concat(i.join("+"),"]")}function mu(i,c,j){function p(Z){if(Z.type===3)return null;if(Z.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var G=Z.lower,K=Z.upper,X=Z.lowerOpen,Z=Z.upperOpen;return G===void 0?K===void 0?null:c.upperBound(K,!!Z):K===void 0?c.lowerBound(G,!!X):c.bound(G,K,!!X,!!Z)}function v(z){var G,K=z.name;return{name:K,schema:z,mutate:function(X){var Z=X.trans,ee=X.type,oe=X.keys,le=X.values,ge=X.range;return new Promise(function(ve,Ce){ve=bt(ve);var Ee=Z.objectStore(K),Ne=Ee.keyPath==null,je=ee==="put"||ee==="add";if(!je&&ee!=="delete"&&ee!=="deleteRange")throw new Error("Invalid operation type: "+ee);var ke,Pe=(oe||le||{length:1}).length;if(oe&&le&&oe.length!==le.length)throw new Error("Given keys array must have same length as given values array.");if(Pe===0)return ve({numFailures:0,failures:{},results:[],lastResult:void 0});function nt(Jn){++_r,is(Jn)}var ot=[],lt=[],_r=0;if(ee==="deleteRange"){if(ge.type===4)return ve({numFailures:_r,failures:lt,results:[],lastResult:void 0});ge.type===3?ot.push(ke=Ee.clear()):ot.push(ke=Ee.delete(p(ge)))}else{var Ne=je?Ne?[le,oe]:[le,null]:[oe,null],et=Ne[0],Vn=Ne[1];if(je)for(var zn=0;zn<Pe;++zn)ot.push(ke=Vn&&Vn[zn]!==void 0?Ee[ee](et[zn],Vn[zn]):Ee[ee](et[zn])),ke.onerror=nt;else for(zn=0;zn<Pe;++zn)ot.push(ke=Ee[ee](et[zn])),ke.onerror=nt}function wu(Jn){Jn=Jn.target.result,ot.forEach(function(Na,zh){return Na.error!=null&&(lt[zh]=Na.error)}),ve({numFailures:_r,failures:lt,results:ee==="delete"?oe:ot.map(function(Na){return Na.result}),lastResult:Jn})}ke.onerror=function(Jn){nt(Jn),wu(Jn)},ke.onsuccess=wu})},getMany:function(X){var Z=X.trans,ee=X.keys;return new Promise(function(oe,le){oe=bt(oe);for(var ge,ve=Z.objectStore(K),Ce=ee.length,Ee=new Array(Ce),Ne=0,je=0,ke=function(ot){ot=ot.target,Ee[ot._pos]=ot.result,++je===Ne&&oe(Ee)},Pe=kt(le),nt=0;nt<Ce;++nt)ee[nt]!=null&&((ge=ve.get(ee[nt]))._pos=nt,ge.onsuccess=ke,ge.onerror=Pe,++Ne);Ne===0&&oe(Ee)})},get:function(X){var Z=X.trans,ee=X.key;return new Promise(function(oe,le){oe=bt(oe);var ge=Z.objectStore(K).get(ee);ge.onsuccess=function(ve){return oe(ve.target.result)},ge.onerror=kt(le)})},query:(G=P,function(X){return new Promise(function(Z,ee){Z=bt(Z);var oe,le,ge,Ne=X.trans,ve=X.values,Ce=X.limit,ke=X.query,Ee=Ce===1/0?void 0:Ce,je=ke.index,ke=ke.range,Ne=Ne.objectStore(K),je=je.isPrimaryKey?Ne:Ne.index(je.name),ke=p(ke);if(Ce===0)return Z({result:[]});G?((Ee=ve?je.getAll(ke,Ee):je.getAllKeys(ke,Ee)).onsuccess=function(Pe){return Z({result:Pe.target.result})},Ee.onerror=kt(ee)):(oe=0,le=!ve&&"openKeyCursor"in je?je.openKeyCursor(ke):je.openCursor(ke),ge=[],le.onsuccess=function(Pe){var nt=le.result;return nt?(ge.push(ve?nt.value:nt.primaryKey),++oe===Ce?Z({result:ge}):void nt.continue()):Z({result:ge})},le.onerror=kt(ee))})}),openCursor:function(X){var Z=X.trans,ee=X.values,oe=X.query,le=X.reverse,ge=X.unique;return new Promise(function(ve,Ce){ve=bt(ve);var je=oe.index,Ee=oe.range,Ne=Z.objectStore(K),Ne=je.isPrimaryKey?Ne:Ne.index(je.name),je=le?ge?"prevunique":"prev":ge?"nextunique":"next",ke=!ee&&"openKeyCursor"in Ne?Ne.openKeyCursor(p(Ee),je):Ne.openCursor(p(Ee),je);ke.onerror=kt(Ce),ke.onsuccess=bt(function(Pe){var nt,ot,lt,_r,et=ke.result;et?(et.___id=++ga,et.done=!1,nt=et.continue.bind(et),ot=(ot=et.continuePrimaryKey)&&ot.bind(et),lt=et.advance.bind(et),_r=function(){throw new Error("Cursor not stopped")},et.trans=Z,et.stop=et.continue=et.continuePrimaryKey=et.advance=function(){throw new Error("Cursor not started")},et.fail=bt(Ce),et.next=function(){var Vn=this,zn=1;return this.start(function(){return zn--?Vn.continue():Vn.stop()}).then(function(){return Vn})},et.start=function(Vn){function zn(){if(ke.result)try{Vn()}catch(Jn){et.fail(Jn)}else et.done=!0,et.start=function(){throw new Error("Cursor behind last entry")},et.stop()}var wu=new Promise(function(Jn,Na){Jn=bt(Jn),ke.onerror=kt(Na),et.fail=Na,et.stop=function(zh){et.stop=et.continue=et.continuePrimaryKey=et.advance=_r,Jn(zh)}});return ke.onsuccess=bt(function(Jn){ke.onsuccess=zn,zn()}),et.continue=nt,et.continuePrimaryKey=ot,et.advance=lt,zn(),wu},ve(et)):ve(null)},Ce)})},count:function(X){var Z=X.query,ee=X.trans,oe=Z.index,le=Z.range;return new Promise(function(ge,ve){var Ce=ee.objectStore(K),Ee=oe.isPrimaryKey?Ce:Ce.index(oe.name),Ce=p(le),Ee=Ce?Ee.count(Ce):Ee.count();Ee.onsuccess=bt(function(Ne){return ge(Ne.target.result)}),Ee.onerror=kt(ve)})}}}var b,C,S,B=(C=j,S=Ni((b=i).objectStoreNames),{schema:{name:b.name,tables:S.map(function(z){return C.objectStore(z)}).map(function(z){var G=z.keyPath,Z=z.autoIncrement,K=g(G),X={},Z={name:z.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:G==null,compound:K,keyPath:G,autoIncrement:Z,unique:!0,extractKey:Rl(G)},indexes:Ni(z.indexNames).map(function(ee){return z.index(ee)}).map(function(ge){var oe=ge.name,le=ge.unique,ve=ge.multiEntry,ge=ge.keyPath,ve={name:oe,compound:g(ge),keyPath:ge,unique:le,multiEntry:ve,extractKey:Rl(ge)};return X[as(ge)]=ve}),getIndexByKeyPath:function(ee){return X[as(ee)]}};return X[":id"]=Z.primaryKey,G!=null&&(X[as(G)]=Z.primaryKey),Z})},hasGetAll:0<S.length&&"getAll"in C.objectStore(S[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),j=B.schema,P=B.hasGetAll,B=j.tables.map(v),L={};return B.forEach(function(z){return L[z.name]=z}),{stack:"dbcore",transaction:i.transaction.bind(i),table:function(z){if(!L[z])throw new Error("Table '".concat(z,"' not found"));return L[z]},MIN_KEY:-1/0,MAX_KEY:Nr(c),schema:j}}function pa(i,c,m,p){var v=m.IDBKeyRange;return m.indexedDB,{dbcore:(p=mu(c,v,p),i.dbcore.reduce(function(b,C){return C=C.create,r(r({},b),C(b))},p))}}function Ms(i,p){var m=p.db,p=pa(i._middlewares,m,i._deps,p);i.core=p.dbcore,i.tables.forEach(function(v){var b=v.name;i.core.schema.tables.some(function(C){return C.name===b})&&(v.core=i.core.table(b),i[b]instanceof i.Table&&(i[b].core=v.core))})}function En(i,c,m,p){m.forEach(function(v){var b=p[v];c.forEach(function(C){var S=function j(P,B){return V(P,B)||(P=x(P))&&j(P,B)}(C,v);(!S||"value"in S&&S.value===void 0)&&(C===i.Transaction.prototype||C instanceof i.Transaction?D(C,v,{get:function(){return this.table(v)},set:function(j){I(this,v,{value:j,writable:!0,configurable:!0,enumerable:!0})}}):C[v]=new i.Table(v,b))})})}function ho(i,c){c.forEach(function(m){for(var p in m)m[p]instanceof i.Table&&delete m[p]})}function gu(i,c){return i._cfg.version-c._cfg.version}function pu(i,c,m,p){var v=i._dbSchema;m.objectStoreNames.contains("$meta")&&!v.$meta&&(v.$meta=uo("$meta",xu("")[0],[]),i._storeNames.push("$meta"));var b=i._createTransaction("readwrite",i._storeNames,v);b.create(m),b._completion.catch(p);var C=b._reject.bind(b),S=Ae.transless||Ae;Ur(function(){return Ae.trans=b,Ae.transless=S,c!==0?(Ms(i,m),P=c,((j=b).storeNames.includes("$meta")?j.table("$meta").get("version").then(function(B){return B??P}):Re.resolve(P)).then(function(B){return z=B,G=b,K=m,X=[],B=(L=i)._versions,Z=L._dbSchema=Js(0,L.idbdb,K),(B=B.filter(function(ee){return ee._cfg.version>=z})).length!==0?(B.forEach(function(ee){X.push(function(){var oe=Z,le=ee._cfg.dbschema;Sr(L,oe,K),Sr(L,le,K),Z=L._dbSchema=le;var ge=Ml(oe,le);ge.add.forEach(function(je){Dl(K,je[0],je[1].primKey,je[1].indexes)}),ge.change.forEach(function(je){if(je.recreate)throw new Be.Upgrade("Not yet support for changing primary key");var ke=K.objectStore(je.name);je.add.forEach(function(Pe){return xa(ke,Pe)}),je.change.forEach(function(Pe){ke.deleteIndex(Pe.name),xa(ke,Pe)}),je.del.forEach(function(Pe){return ke.deleteIndex(Pe)})});var ve=ee._cfg.contentUpgrade;if(ve&&ee._cfg.version>z){Ms(L,K),G._memoizedTables={};var Ce=U(le);ge.del.forEach(function(je){Ce[je]=oe[je]}),ho(L,[L.Transaction.prototype]),En(L,[L.Transaction.prototype],h(Ce),Ce),G.schema=Ce;var Ee,Ne=pe(ve);return Ne&&un(),ge=Re.follow(function(){var je;(Ee=ve(G))&&Ne&&(je=Xn.bind(null,null),Ee.then(je,je))}),Ee&&typeof Ee.then=="function"?Re.resolve(Ee):ge.then(function(){return Ee})}}),X.push(function(oe){var le,ge,ve=ee._cfg.dbschema;le=ve,ge=oe,[].slice.call(ge.db.objectStoreNames).forEach(function(Ce){return le[Ce]==null&&ge.db.deleteObjectStore(Ce)}),ho(L,[L.Transaction.prototype]),En(L,[L.Transaction.prototype],L._storeNames,L._dbSchema),G.schema=L._dbSchema}),X.push(function(oe){L.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(L.idbdb.version/10)===ee._cfg.version?(L.idbdb.deleteObjectStore("$meta"),delete L._dbSchema.$meta,L._storeNames=L._storeNames.filter(function(le){return le!=="$meta"})):oe.objectStore("$meta").put(ee._cfg.version,"version"))})}),function ee(){return X.length?Re.resolve(X.shift()(G.idbtrans)).then(ee):Re.resolve()}().then(function(){St(Z,K)})):Re.resolve();var L,z,G,K,X,Z}).catch(C)):(h(v).forEach(function(B){Dl(m,B,v[B].primKey,v[B].indexes)}),Ms(i,m),void Re.follow(function(){return i.on.populate.fire(b)}).catch(C));var j,P})}function Bh(i,c){St(i._dbSchema,c),c.db.version%10!=0||c.objectStoreNames.contains("$meta")||c.db.createObjectStore("$meta").add(Math.ceil(c.db.version/10-1),"version");var m=Js(0,i.idbdb,c);Sr(i,i._dbSchema,c);for(var p=0,v=Ml(m,i._dbSchema).change;p<v.length;p++){var b=function(C){if(C.change.length||C.recreate)return console.warn("Unable to patch indexes of table ".concat(C.name," because it has changes on the type of index or primary key.")),{value:void 0};var S=c.objectStore(C.name);C.add.forEach(function(j){Me&&console.debug("Dexie upgrade patch: Creating missing index ".concat(C.name,".").concat(j.src)),xa(S,j)})}(v[p]);if(typeof b=="object")return b.value}}function Ml(i,c){var m,p={del:[],add:[],change:[]};for(m in i)c[m]||p.del.push(m);for(m in c){var v=i[m],b=c[m];if(v){var C={name:m,def:b,recreate:!1,del:[],add:[],change:[]};if(""+(v.primKey.keyPath||"")!=""+(b.primKey.keyPath||"")||v.primKey.auto!==b.primKey.auto)C.recreate=!0,p.change.push(C);else{var S=v.idxByName,j=b.idxByName,P=void 0;for(P in S)j[P]||C.del.push(P);for(P in j){var B=S[P],L=j[P];B?B.src!==L.src&&C.change.push(L):C.add.push(L)}(0<C.del.length||0<C.add.length||0<C.change.length)&&p.change.push(C)}}else p.add.push([m,b])}return p}function Dl(i,c,m,p){var v=i.db.createObjectStore(c,m.keyPath?{keyPath:m.keyPath,autoIncrement:m.auto}:{autoIncrement:m.auto});return p.forEach(function(b){return xa(v,b)}),v}function St(i,c){h(i).forEach(function(m){c.db.objectStoreNames.contains(m)||(Me&&console.debug("Dexie: Creating missing table",m),Dl(c,m,i[m].primKey,i[m].indexes))})}function xa(i,c){i.createIndex(c.name,c.keyPath,{unique:c.unique,multiEntry:c.multi})}function Js(i,c,m){var p={};return A(c.objectStoreNames,0).forEach(function(v){for(var b=m.objectStore(v),C=kl(co(P=b.keyPath),P||"",!0,!1,!!b.autoIncrement,P&&typeof P!="string",!0),S=[],j=0;j<b.indexNames.length;++j){var B=b.index(b.indexNames[j]),P=B.keyPath,B=kl(B.name,P,!!B.unique,!!B.multiEntry,!1,P&&typeof P!="string",!1);S.push(B)}p[v]=uo(v,C,S)}),p}function Sr(i,c,m){for(var p=m.db.objectStoreNames,v=0;v<p.length;++v){var b=p[v],C=m.objectStore(b);i._hasGetAll="getAll"in C;for(var S=0;S<C.indexNames.length;++S){var j=C.indexNames[S],P=C.index(j).keyPath,B=typeof P=="string"?P:"["+A(P).join("+")+"]";!c[b]||(P=c[b].idxByName[B])&&(P.name=j,delete c[b].idxByName[B],c[b].idxByName[j]=P)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&l.WorkerGlobalScope&&l instanceof l.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(i._hasGetAll=!1)}function xu(i){return i.split(",").map(function(c,m){var p=(c=c.trim()).replace(/([&*]|\+\+)/g,""),v=/^\[/.test(p)?p.match(/^\[(.*)\]$/)[1].split("+"):p;return kl(p,v||null,/\&/.test(c),/\*/.test(c),/\+\+/.test(c),g(v),m===0)})}var de=(Ze.prototype._parseStoresSpec=function(i,c){h(i).forEach(function(m){if(i[m]!==null){var p=xu(i[m]),v=p.shift();if(v.unique=!0,v.multi)throw new Be.Schema("Primary key cannot be multi-valued");p.forEach(function(b){if(b.auto)throw new Be.Schema("Only primary key can be marked as autoIncrement (++)");if(!b.keyPath)throw new Be.Schema("Index must have a name and cannot be an empty string")}),c[m]=uo(m,v,p)}})},Ze.prototype.stores=function(m){var c=this.db;this._cfg.storesSource=this._cfg.storesSource?y(this._cfg.storesSource,m):m;var m=c._versions,p={},v={};return m.forEach(function(b){y(p,b._cfg.storesSource),v=b._cfg.dbschema={},b._parseStoresSpec(p,v)}),c._dbSchema=v,ho(c,[c._allTables,c,c.Transaction.prototype]),En(c,[c._allTables,c,c.Transaction.prototype,this._cfg.tables],h(v),v),c._storeNames=h(v),this},Ze.prototype.upgrade=function(i){return this._cfg.contentUpgrade=rs(this._cfg.contentUpgrade||Fe,i),this},Ze);function Ze(){}function hn(i,c){var m=i._dbNamesDB;return m||(m=i._dbNamesDB=new Gr(so,{addons:[],indexedDB:i,IDBKeyRange:c})).version(1).stores({dbnames:"name"}),m.table("dbnames")}function Si(i){return i&&typeof i.databases=="function"}function fo(i){return Ur(function(){return Ae.letThrough=!0,i()})}function Ol(i){return!("from"in i)}var In=function(i,c){if(!this){var m=new In;return i&&"d"in i&&y(m,i),m}y(this,arguments.length?{d:1,from:i,to:1<arguments.length?c:i}:{d:0})};function ya(i,c,m){var p=it(c,m);if(!isNaN(p)){if(0<p)throw RangeError();if(Ol(i))return y(i,{from:c,to:m,d:1});var v=i.l,p=i.r;if(it(m,i.from)<0)return v?ya(v,c,m):i.l={from:c,to:m,d:1,l:null,r:null},Ht(i);if(0<it(c,i.to))return p?ya(p,c,m):i.r={from:c,to:m,d:1,l:null,r:null},Ht(i);it(c,i.from)<0&&(i.from=c,i.l=null,i.d=p?p.d+1:1),0<it(m,i.to)&&(i.to=m,i.r=null,i.d=i.l?i.l.d+1:1),m=!i.r,v&&!i.l&&ei(i,v),p&&m&&ei(i,p)}}function ei(i,c){Ol(c)||function m(p,j){var b=j.from,C=j.to,S=j.l,j=j.r;ya(p,b,C),S&&m(p,S),j&&m(p,j)}(i,c)}function an(i,c){var m=_i(c),p=m.next();if(p.done)return!1;for(var v=p.value,b=_i(i),C=b.next(v.from),S=C.value;!p.done&&!C.done;){if(it(S.from,v.to)<=0&&0<=it(S.to,v.from))return!0;it(v.from,S.from)<0?v=(p=m.next(S.from)).value:S=(C=b.next(v.from)).value}return!1}function _i(i){var c=Ol(i)?null:{s:0,n:i};return{next:function(m){for(var p=0<arguments.length;c;)switch(c.s){case 0:if(c.s=1,p)for(;c.n.l&&it(m,c.n.from)<0;)c={up:c,n:c.n.l,s:1};else for(;c.n.l;)c={up:c,n:c.n.l,s:1};case 1:if(c.s=2,!p||it(m,c.n.to)<=0)return{value:c.n,done:!1};case 2:if(c.n.r){c.s=3,c={up:c,n:c.n.r,s:0};continue}case 3:c=c.up}return{done:!0}}}}function Ht(i){var c,m,p=(((c=i.r)===null||c===void 0?void 0:c.d)||0)-(((m=i.l)===null||m===void 0?void 0:m.d)||0),v=1<p?"r":p<-1?"l":"";v&&(c=v=="r"?"l":"r",m=r({},i),p=i[v],i.from=p.from,i.to=p.to,i[v]=p[v],m[v]=p[c],(i[c]=m).d=va(m)),i.d=va(i)}function va(m){var c=m.r,m=m.l;return(c?m?Math.max(c.d,m.d):c.d:m?m.d:0)+1}function zr(i,c){return h(c).forEach(function(m){i[m]?ei(i[m],c[m]):i[m]=function p(v){var b,C,S={};for(b in v)E(v,b)&&(C=v[b],S[b]=!C||typeof C!="object"||he.has(C.constructor)?C:p(C));return S}(c[m])}),i}function _t(i,c){return i.all||c.all||Object.keys(i).some(function(m){return c[m]&&an(c[m],i[m])})}N(In.prototype,((Un={add:function(i){return ei(this,i),this},addKey:function(i){return ya(this,i,i),this},addKeys:function(i){var c=this;return i.forEach(function(m){return ya(c,m,m)}),this},hasKey:function(i){var c=_i(this).next(i).value;return c&&it(c.from,i)<=0&&0<=it(c.to,i)}})[te]=function(){return _i(this)},Un));var He={},Pl={},Rt=!1;function $r(i){zr(Pl,i),Rt||(Rt=!0,setTimeout(function(){Rt=!1,Ds(Pl,!(Pl={}))},0))}function Ds(i,c){c===void 0&&(c=!1);var m=new Set;if(i.all)for(var p=0,v=Object.values(He);p<v.length;p++)yu(C=v[p],i,m,c);else for(var b in i){var C,S=/^idb\:\/\/(.*)\/(.*)\//.exec(b);S&&(b=S[1],S=S[2],(C=He["idb://".concat(b,"/").concat(S)])&&yu(C,i,m,c))}m.forEach(function(j){return j()})}function yu(i,c,m,p){for(var v=[],b=0,C=Object.entries(i.queries.query);b<C.length;b++){for(var S=C[b],j=S[0],P=[],B=0,L=S[1];B<L.length;B++){var z=L[B];_t(c,z.obsSet)?z.subscribers.forEach(function(Z){return m.add(Z)}):p&&P.push(z)}p&&v.push([j,P])}if(p)for(var G=0,K=v;G<K.length;G++){var X=K[G],j=X[0],P=X[1];i.queries.query[j]=P}}function Hr(i){var c=i._state,m=i._deps.indexedDB;if(c.isBeingOpened||i.idbdb)return c.dbReadyPromise.then(function(){return c.dbOpenError?Qe(c.dbOpenError):i});c.isBeingOpened=!0,c.dbOpenError=null,c.openComplete=!1;var p=c.openCanceller,v=Math.round(10*i.verno),b=!1;function C(){if(c.openCanceller!==p)throw new Be.DatabaseClosed("db.open() was cancelled")}function S(){return new Re(function(z,G){if(C(),!m)throw new Be.MissingAPI;var K=i.name,X=c.autoSchema||!v?m.open(K):m.open(K,v);if(!X)throw new Be.MissingAPI;X.onerror=kt(G),X.onblocked=bt(i._fireOnBlocked),X.onupgradeneeded=bt(function(Z){var ee;B=X.transaction,c.autoSchema&&!i._options.allowEmptyDB?(X.onerror=is,B.abort(),X.result.close(),(ee=m.deleteDatabase(K)).onsuccess=ee.onerror=bt(function(){G(new Be.NoSuchDatabase("Database ".concat(K," doesnt exist")))})):(B.onerror=kt(G),Z=Z.oldVersion>Math.pow(2,62)?0:Z.oldVersion,L=Z<1,i.idbdb=X.result,b&&Bh(i,B),pu(i,Z/10,B,G))},G),X.onsuccess=bt(function(){B=null;var Z,ee,oe,le,ge,ve=i.idbdb=X.result,Ce=A(ve.objectStoreNames);if(0<Ce.length)try{var Ee=ve.transaction((le=Ce).length===1?le[0]:le,"readonly");if(c.autoSchema)ee=ve,oe=Ee,(Z=i).verno=ee.version/10,oe=Z._dbSchema=Js(0,ee,oe),Z._storeNames=A(ee.objectStoreNames,0),En(Z,[Z._allTables],h(oe),oe);else if(Sr(i,i._dbSchema,Ee),((ge=Ml(Js(0,(ge=i).idbdb,Ee),ge._dbSchema)).add.length||ge.change.some(function(Ne){return Ne.add.length||Ne.change.length}))&&!b)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),ve.close(),v=ve.version+1,b=!0,z(S());Ms(i,Ee)}catch{}we.push(i),ve.onversionchange=bt(function(Ne){c.vcFired=!0,i.on("versionchange").fire(Ne)}),ve.onclose=bt(function(Ne){i.on("close").fire(Ne)}),L&&(ge=i._deps,Ee=K,ve=ge.indexedDB,ge=ge.IDBKeyRange,Si(ve)||Ee===so||hn(ve,ge).put({name:Ee}).catch(Fe)),z()},G)}).catch(function(z){switch(z==null?void 0:z.name){case"UnknownError":if(0<c.PR1398_maxLoop)return c.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),S();break;case"VersionError":if(0<v)return v=0,S()}return Re.reject(z)})}var j,P=c.dbReadyResolve,B=null,L=!1;return Re.race([p,(typeof navigator>"u"?Re.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(z){function G(){return indexedDB.databases().finally(z)}j=setInterval(G,100),G()}).finally(function(){return clearInterval(j)}):Promise.resolve()).then(S)]).then(function(){return C(),c.onReadyBeingFired=[],Re.resolve(fo(function(){return i.on.ready.fire(i.vip)})).then(function z(){if(0<c.onReadyBeingFired.length){var G=c.onReadyBeingFired.reduce(rs,Fe);return c.onReadyBeingFired=[],Re.resolve(fo(function(){return G(i.vip)})).then(z)}})}).finally(function(){c.openCanceller===p&&(c.onReadyBeingFired=null,c.isBeingOpened=!1)}).catch(function(z){c.dbOpenError=z;try{B&&B.abort()}catch{}return p===c.openCanceller&&i._close(),Qe(z)}).finally(function(){c.openComplete=!0,P()}).then(function(){var z;return L&&(z={},i.tables.forEach(function(G){G.schema.indexes.forEach(function(K){K.name&&(z["idb://".concat(i.name,"/").concat(G.name,"/").concat(K.name)]=new In(-1/0,[[[]]]))}),z["idb://".concat(i.name,"/").concat(G.name,"/")]=z["idb://".concat(i.name,"/").concat(G.name,"/:dels")]=new In(-1/0,[[[]]])}),Rs(dr).fire(z),Ds(z,!0)),i})}function wa(i){function c(b){return i.next(b)}var m=v(c),p=v(function(b){return i.throw(b)});function v(b){return function(j){var S=b(j),j=S.value;return S.done?j:j&&typeof j.then=="function"?j.then(m,p):g(j)?Promise.all(j).then(m,p):m(j)}}return v(c)()}function ba(i,c,m){for(var p=g(i)?i.slice():[i],v=0;v<m;++v)p.push(c);return p}var Ll={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(i){return r(r({},i),{table:function(c){var m=i.table(c),p=m.schema,v={},b=[];function C(L,z,G){var K=as(L),X=v[K]=v[K]||[],Z=L==null?0:typeof L=="string"?1:L.length,ee=0<z,ee=r(r({},G),{name:ee?"".concat(K,"(virtual-from:").concat(G.name,")"):G.name,lowLevelIndex:G,isVirtual:ee,keyTail:z,keyLength:Z,extractKey:Rl(L),unique:!ee&&G.unique});return X.push(ee),ee.isPrimaryKey||b.push(ee),1<Z&&C(Z===2?L[0]:L.slice(0,Z-1),z+1,G),X.sort(function(oe,le){return oe.keyTail-le.keyTail}),ee}c=C(p.primaryKey.keyPath,0,p.primaryKey),v[":id"]=[c];for(var S=0,j=p.indexes;S<j.length;S++){var P=j[S];C(P.keyPath,0,P)}function B(L){var z,G=L.query.index;return G.isVirtual?r(r({},L),{query:{index:G.lowLevelIndex,range:(z=L.query.range,G=G.keyTail,{type:z.type===1?2:z.type,lower:ba(z.lower,z.lowerOpen?i.MAX_KEY:i.MIN_KEY,G),lowerOpen:!0,upper:ba(z.upper,z.upperOpen?i.MIN_KEY:i.MAX_KEY,G),upperOpen:!0})}}):L}return r(r({},m),{schema:r(r({},p),{primaryKey:c,indexes:b,getIndexByKeyPath:function(L){return(L=v[as(L)])&&L[0]}}),count:function(L){return m.count(B(L))},query:function(L){return m.query(B(L))},openCursor:function(L){var z=L.query.index,G=z.keyTail,K=z.isVirtual,X=z.keyLength;return K?m.openCursor(B(L)).then(function(ee){return ee&&Z(ee)}):m.openCursor(L);function Z(ee){return Object.create(ee,{continue:{value:function(oe){oe!=null?ee.continue(ba(oe,L.reverse?i.MAX_KEY:i.MIN_KEY,G)):L.unique?ee.continue(ee.key.slice(0,X).concat(L.reverse?i.MIN_KEY:i.MAX_KEY,G)):ee.continue()}},continuePrimaryKey:{value:function(oe,le){ee.continuePrimaryKey(ba(oe,i.MAX_KEY,G),le)}},primaryKey:{get:function(){return ee.primaryKey}},key:{get:function(){var oe=ee.key;return X===1?oe[0]:oe.slice(0,X)}},value:{get:function(){return ee.value}}})}}})}})}};function mo(i,c,m,p){return m=m||{},p=p||"",h(i).forEach(function(v){var b,C,S;E(c,v)?(b=i[v],C=c[v],typeof b=="object"&&typeof C=="object"&&b&&C?(S=Y(b))!==Y(C)?m[p+v]=c[v]:S==="Object"?mo(b,C,m,p+v+"."):b!==C&&(m[p+v]=c[v]):b!==C&&(m[p+v]=c[v])):m[p+v]=void 0}),h(c).forEach(function(v){E(i,v)||(m[p+v]=c[v])}),m}function go(i,c){return c.type==="delete"?c.keys:c.keys||c.values.map(i.extractKey)}var Fh={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(i){return r(r({},i),{table:function(c){var m=i.table(c),p=m.schema.primaryKey;return r(r({},m),{mutate:function(v){var b=Ae.trans,C=b.table(c).hook,S=C.deleting,j=C.creating,P=C.updating;switch(v.type){case"add":if(j.fire===Fe)break;return b._promise("readwrite",function(){return B(v)},!0);case"put":if(j.fire===Fe&&P.fire===Fe)break;return b._promise("readwrite",function(){return B(v)},!0);case"delete":if(S.fire===Fe)break;return b._promise("readwrite",function(){return B(v)},!0);case"deleteRange":if(S.fire===Fe)break;return b._promise("readwrite",function(){return function L(z,G,K){return m.query({trans:z,values:!1,query:{index:p,range:G},limit:K}).then(function(X){var Z=X.result;return B({type:"delete",keys:Z,trans:z}).then(function(ee){return 0<ee.numFailures?Promise.reject(ee.failures[0]):Z.length<K?{failures:[],numFailures:0,lastResult:void 0}:L(z,r(r({},G),{lower:Z[Z.length-1],lowerOpen:!0}),K)})})}(v.trans,v.range,1e4)},!0)}return m.mutate(v);function B(L){var z,G,K,X=Ae.trans,Z=L.keys||go(p,L);if(!Z)throw new Error("Keys missing");return(L=L.type==="add"||L.type==="put"?r(r({},L),{keys:Z}):r({},L)).type!=="delete"&&(L.values=a([],L.values)),L.keys&&(L.keys=a([],L.keys)),z=m,K=Z,((G=L).type==="add"?Promise.resolve([]):z.getMany({trans:G.trans,keys:K,cache:"immutable"})).then(function(ee){var oe=Z.map(function(le,ge){var ve,Ce,Ee,Ne=ee[ge],je={onerror:null,onsuccess:null};return L.type==="delete"?S.fire.call(je,le,Ne,X):L.type==="add"||Ne===void 0?(ve=j.fire.call(je,le,L.values[ge],X),le==null&&ve!=null&&(L.keys[ge]=le=ve,p.outbound||F(L.values[ge],p.keyPath,le))):(ve=mo(Ne,L.values[ge]),(Ce=P.fire.call(je,ve,le,Ne,X))&&(Ee=L.values[ge],Object.keys(Ce).forEach(function(ke){E(Ee,ke)?Ee[ke]=Ce[ke]:F(Ee,ke,Ce[ke])}))),je});return m.mutate(L).then(function(le){for(var ge=le.failures,ve=le.results,Ce=le.numFailures,le=le.lastResult,Ee=0;Ee<Z.length;++Ee){var Ne=(ve||Z)[Ee],je=oe[Ee];Ne==null?je.onerror&&je.onerror(ge[Ee]):je.onsuccess&&je.onsuccess(L.type==="put"&&ee[Ee]?L.values[Ee]:Ne)}return{failures:ge,results:ve,numFailures:Ce,lastResult:le}}).catch(function(le){return oe.forEach(function(ge){return ge.onerror&&ge.onerror(le)}),Promise.reject(le)})})}}})}})}};function ti(i,c,m){try{if(!c||c.keys.length<i.length)return null;for(var p=[],v=0,b=0;v<c.keys.length&&b<i.length;++v)it(c.keys[v],i[b])===0&&(p.push(m?re(c.values[v]):c.values[v]),++b);return p.length===i.length?p:null}catch{return null}}var Bl={stack:"dbcore",level:-1,create:function(i){return{table:function(c){var m=i.table(c);return r(r({},m),{getMany:function(p){if(!p.cache)return m.getMany(p);var v=ti(p.keys,p.trans._cache,p.cache==="clone");return v?Re.resolve(v):m.getMany(p).then(function(b){return p.trans._cache={keys:p.keys,values:p.cache==="clone"?re(b):b},b})},mutate:function(p){return p.type!=="add"&&(p.trans._cache=null),m.mutate(p)}})}}}};function vu(i,c){return i.trans.mode==="readonly"&&!!i.subscr&&!i.trans.explicit&&i.trans.db._options.cache!=="disabled"&&!c.schema.primaryKey.outbound}function Ai(i,c){switch(i){case"query":return c.values&&!c.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Uh={stack:"dbcore",level:0,name:"Observability",create:function(i){var c=i.schema.name,m=new In(i.MIN_KEY,i.MAX_KEY);return r(r({},i),{transaction:function(p,v,b){if(Ae.subscr&&v!=="readonly")throw new Be.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Ae.querier));return i.transaction(p,v,b)},table:function(p){var v=i.table(p),b=v.schema,C=b.primaryKey,L=b.indexes,S=C.extractKey,j=C.outbound,P=C.autoIncrement&&L.filter(function(G){return G.compound&&G.keyPath.includes(C.keyPath)}),B=r(r({},v),{mutate:function(G){function K(ke){return ke="idb://".concat(c,"/").concat(p,"/").concat(ke),le[ke]||(le[ke]=new In)}var X,Z,ee,oe=G.trans,le=G.mutatedParts||(G.mutatedParts={}),ge=K(""),ve=K(":dels"),Ce=G.type,je=G.type==="deleteRange"?[G.range]:G.type==="delete"?[G.keys]:G.values.length<50?[go(C,G).filter(function(ke){return ke}),G.values]:[],Ee=je[0],Ne=je[1],je=G.trans._cache;return g(Ee)?(ge.addKeys(Ee),(je=Ce==="delete"||Ee.length===Ne.length?ti(Ee,je):null)||ve.addKeys(Ee),(je||Ne)&&(X=K,Z=je,ee=Ne,b.indexes.forEach(function(ke){var Pe=X(ke.name||"");function nt(lt){return lt!=null?ke.extractKey(lt):null}function ot(lt){return ke.multiEntry&&g(lt)?lt.forEach(function(_r){return Pe.addKey(_r)}):Pe.addKey(lt)}(Z||ee).forEach(function(lt,Vn){var et=Z&&nt(Z[Vn]),Vn=ee&&nt(ee[Vn]);it(et,Vn)!==0&&(et!=null&&ot(et),Vn!=null&&ot(Vn))})}))):Ee?(Ne={from:(Ne=Ee.lower)!==null&&Ne!==void 0?Ne:i.MIN_KEY,to:(Ne=Ee.upper)!==null&&Ne!==void 0?Ne:i.MAX_KEY},ve.add(Ne),ge.add(Ne)):(ge.add(m),ve.add(m),b.indexes.forEach(function(ke){return K(ke.name).add(m)})),v.mutate(G).then(function(ke){return!Ee||G.type!=="add"&&G.type!=="put"||(ge.addKeys(ke.results),P&&P.forEach(function(Pe){for(var nt=G.values.map(function(et){return Pe.extractKey(et)}),ot=Pe.keyPath.findIndex(function(et){return et===C.keyPath}),lt=0,_r=ke.results.length;lt<_r;++lt)nt[lt][ot]=ke.results[lt];K(Pe.name).addKeys(nt)})),oe.mutatedParts=zr(oe.mutatedParts||{},le),ke})}}),L=function(K){var X=K.query,K=X.index,X=X.range;return[K,new In((K=X.lower)!==null&&K!==void 0?K:i.MIN_KEY,(X=X.upper)!==null&&X!==void 0?X:i.MAX_KEY)]},z={get:function(G){return[C,new In(G.key)]},getMany:function(G){return[C,new In().addKeys(G.keys)]},count:L,query:L,openCursor:L};return h(z).forEach(function(G){B[G]=function(K){var X=Ae.subscr,Z=!!X,ee=vu(Ae,v)&&Ai(G,K)?K.obsSet={}:X;if(Z){var oe=function(Ne){return Ne="idb://".concat(c,"/").concat(p,"/").concat(Ne),ee[Ne]||(ee[Ne]=new In)},le=oe(""),ge=oe(":dels"),X=z[G](K),Z=X[0],X=X[1];if((G==="query"&&Z.isPrimaryKey&&!K.values?ge:oe(Z.name||"")).add(X),!Z.isPrimaryKey){if(G!=="count"){var ve=G==="query"&&j&&K.values&&v.query(r(r({},K),{values:!1}));return v[G].apply(this,arguments).then(function(Ne){if(G==="query"){if(j&&K.values)return ve.then(function(nt){return nt=nt.result,le.addKeys(nt),Ne});var je=K.values?Ne.result.map(S):Ne.result;(K.values?le:ge).addKeys(je)}else if(G==="openCursor"){var ke=Ne,Pe=K.values;return ke&&Object.create(ke,{key:{get:function(){return ge.addKey(ke.primaryKey),ke.key}},primaryKey:{get:function(){var nt=ke.primaryKey;return ge.addKey(nt),nt}},value:{get:function(){return Pe&&le.addKey(ke.primaryKey),ke.value}}})}return Ne})}ge.add(m)}}return v[G].apply(this,arguments)}}),B}})}};function os(i,c,m){if(m.numFailures===0)return c;if(c.type==="deleteRange")return null;var p=c.keys?c.keys.length:"values"in c&&c.values?c.values.length:1;return m.numFailures===p?null:(c=r({},c),g(c.keys)&&(c.keys=c.keys.filter(function(v,b){return!(b in m.failures)})),"values"in c&&g(c.values)&&(c.values=c.values.filter(function(v,b){return!(b in m.failures)})),c)}function Ti(i,c){return m=i,((p=c).lower===void 0||(p.lowerOpen?0<it(m,p.lower):0<=it(m,p.lower)))&&(i=i,(c=c).upper===void 0||(c.upperOpen?it(i,c.upper)<0:it(i,c.upper)<=0));var m,p}function Zn(i,c,z,p,v,b){if(!z||z.length===0)return i;var C=c.query.index,S=C.multiEntry,j=c.query.range,P=p.schema.primaryKey.extractKey,B=C.extractKey,L=(C.lowLevelIndex||C).extractKey,z=z.reduce(function(G,K){var X=G,Z=[];if(K.type==="add"||K.type==="put")for(var ee=new In,oe=K.values.length-1;0<=oe;--oe){var le,ge=K.values[oe],ve=P(ge);ee.hasKey(ve)||(le=B(ge),(S&&g(le)?le.some(function(ke){return Ti(ke,j)}):Ti(le,j))&&(ee.addKey(ve),Z.push(ge)))}switch(K.type){case"add":var Ce=new In().addKeys(c.values?G.map(function(Pe){return P(Pe)}):G),X=G.concat(c.values?Z.filter(function(Pe){return Pe=P(Pe),!Ce.hasKey(Pe)&&(Ce.addKey(Pe),!0)}):Z.map(function(Pe){return P(Pe)}).filter(function(Pe){return!Ce.hasKey(Pe)&&(Ce.addKey(Pe),!0)}));break;case"put":var Ee=new In().addKeys(K.values.map(function(Pe){return P(Pe)}));X=G.filter(function(Pe){return!Ee.hasKey(c.values?P(Pe):Pe)}).concat(c.values?Z:Z.map(function(Pe){return P(Pe)}));break;case"delete":var Ne=new In().addKeys(K.keys);X=G.filter(function(Pe){return!Ne.hasKey(c.values?P(Pe):Pe)});break;case"deleteRange":var je=K.range;X=G.filter(function(Pe){return!Ti(P(Pe),je)})}return X},i);return z===i?i:(z.sort(function(G,K){return it(L(G),L(K))||it(P(G),P(K))}),c.limit&&c.limit<1/0&&(z.length>c.limit?z.length=c.limit:i.length===c.limit&&z.length<c.limit&&(v.dirty=!0)),b?Object.freeze(z):z)}function Fl(i,c){return it(i.lower,c.lower)===0&&it(i.upper,c.upper)===0&&!!i.lowerOpen==!!c.lowerOpen&&!!i.upperOpen==!!c.upperOpen}function Wr(i,c){return function(m,p,v,b){if(m===void 0)return p!==void 0?-1:0;if(p===void 0)return 1;if((p=it(m,p))===0){if(v&&b)return 0;if(v)return 1;if(b)return-1}return p}(i.lower,c.lower,i.lowerOpen,c.lowerOpen)<=0&&0<=function(m,p,v,b){if(m===void 0)return p!==void 0?1:0;if(p===void 0)return-1;if((p=it(m,p))===0){if(v&&b)return 0;if(v)return-1;if(b)return 1}return p}(i.upper,c.upper,i.upperOpen,c.upperOpen)}function Vh(i,c,m,p){i.subscribers.add(m),p.addEventListener("abort",function(){var v,b;i.subscribers.delete(m),i.subscribers.size===0&&(v=i,b=c,setTimeout(function(){v.subscribers.size===0&&Q(b,v)},3e3))})}var Ul={stack:"dbcore",level:0,name:"Cache",create:function(i){var c=i.schema.name;return r(r({},i),{transaction:function(m,p,v){var b,C,S=i.transaction(m,p,v);return p==="readwrite"&&(C=(b=new AbortController).signal,v=function(j){return function(){if(b.abort(),p==="readwrite"){for(var P=new Set,B=0,L=m;B<L.length;B++){var z=L[B],G=He["idb://".concat(c,"/").concat(z)];if(G){var K=i.table(z),X=G.optimisticOps.filter(function(Pe){return Pe.trans===S});if(S._explicit&&j&&S.mutatedParts)for(var Z=0,ee=Object.values(G.queries.query);Z<ee.length;Z++)for(var oe=0,le=(Ce=ee[Z]).slice();oe<le.length;oe++)_t((Ee=le[oe]).obsSet,S.mutatedParts)&&(Q(Ce,Ee),Ee.subscribers.forEach(function(Pe){return P.add(Pe)}));else if(0<X.length){G.optimisticOps=G.optimisticOps.filter(function(Pe){return Pe.trans!==S});for(var ge=0,ve=Object.values(G.queries.query);ge<ve.length;ge++)for(var Ce,Ee,Ne,je=0,ke=(Ce=ve[ge]).slice();je<ke.length;je++)(Ee=ke[je]).res!=null&&S.mutatedParts&&(j&&!Ee.dirty?(Ne=Object.isFrozen(Ee.res),Ne=Zn(Ee.res,Ee.req,X,K,Ee,Ne),Ee.dirty?(Q(Ce,Ee),Ee.subscribers.forEach(function(Pe){return P.add(Pe)})):Ne!==Ee.res&&(Ee.res=Ne,Ee.promise=Re.resolve({result:Ne}))):(Ee.dirty&&Q(Ce,Ee),Ee.subscribers.forEach(function(Pe){return P.add(Pe)})))}}}P.forEach(function(Pe){return Pe()})}}},S.addEventListener("abort",v(!1),{signal:C}),S.addEventListener("error",v(!1),{signal:C}),S.addEventListener("complete",v(!0),{signal:C})),S},table:function(m){var p=i.table(m),v=p.schema.primaryKey;return r(r({},p),{mutate:function(b){var C=Ae.trans;if(v.outbound||C.db._options.cache==="disabled"||C.explicit||C.idbtrans.mode!=="readwrite")return p.mutate(b);var S=He["idb://".concat(c,"/").concat(m)];return S?(C=p.mutate(b),b.type!=="add"&&b.type!=="put"||!(50<=b.values.length||go(v,b).some(function(j){return j==null}))?(S.optimisticOps.push(b),b.mutatedParts&&$r(b.mutatedParts),C.then(function(j){0<j.numFailures&&(Q(S.optimisticOps,b),(j=os(0,b,j))&&S.optimisticOps.push(j),b.mutatedParts&&$r(b.mutatedParts))}),C.catch(function(){Q(S.optimisticOps,b),b.mutatedParts&&$r(b.mutatedParts)})):C.then(function(j){var P=os(0,r(r({},b),{values:b.values.map(function(B,L){var z;return j.failures[L]?B:(B=(z=v.keyPath)!==null&&z!==void 0&&z.includes(".")?re(B):r({},B),F(B,v.keyPath,j.results[L]),B)})}),j);S.optimisticOps.push(P),queueMicrotask(function(){return b.mutatedParts&&$r(b.mutatedParts)})}),C):p.mutate(b)},query:function(b){if(!vu(Ae,p)||!Ai("query",b))return p.query(b);var C=((P=Ae.trans)===null||P===void 0?void 0:P.db._options.cache)==="immutable",L=Ae,S=L.requery,j=L.signal,P=function(K,X,Z,ee){var oe=He["idb://".concat(K,"/").concat(X)];if(!oe)return[];if(!(X=oe.queries[Z]))return[null,!1,oe,null];var le=X[(ee.query?ee.query.index.name:null)||""];if(!le)return[null,!1,oe,null];switch(Z){case"query":var ge=le.find(function(ve){return ve.req.limit===ee.limit&&ve.req.values===ee.values&&Fl(ve.req.query.range,ee.query.range)});return ge?[ge,!0,oe,le]:[le.find(function(ve){return("limit"in ve.req?ve.req.limit:1/0)>=ee.limit&&(!ee.values||ve.req.values)&&Wr(ve.req.query.range,ee.query.range)}),!1,oe,le];case"count":return ge=le.find(function(ve){return Fl(ve.req.query.range,ee.query.range)}),[ge,!!ge,oe,le]}}(c,m,"query",b),B=P[0],L=P[1],z=P[2],G=P[3];return B&&L?B.obsSet=b.obsSet:(L=p.query(b).then(function(K){var X=K.result;if(B&&(B.res=X),C){for(var Z=0,ee=X.length;Z<ee;++Z)Object.freeze(X[Z]);Object.freeze(X)}else K.result=re(X);return K}).catch(function(K){return G&&B&&Q(G,B),Promise.reject(K)}),B={obsSet:b.obsSet,promise:L,subscribers:new Set,type:"query",req:b,dirty:!1},G?G.push(B):(G=[B],(z=z||(He["idb://".concat(c,"/").concat(m)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[b.query.index.name||""]=G)),Vh(B,G,S,j),B.promise.then(function(K){return{result:Zn(K.result,b,z==null?void 0:z.optimisticOps,p,B,C)}})}})}})}};function po(i,c){return new Proxy(i,{get:function(m,p,v){return p==="db"?c:Reflect.get(m,p,v)}})}var Gr=(Et.prototype.version=function(i){if(isNaN(i)||i<.1)throw new Be.Type("Given version is not a positive number");if(i=Math.round(10*i)/10,this.idbdb||this._state.isBeingOpened)throw new Be.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,i);var c=this._versions,m=c.filter(function(p){return p._cfg.version===i})[0];return m||(m=new this.Version(i),c.push(m),c.sort(gu),m.stores({}),this._state.autoSchema=!1,m)},Et.prototype._whenReady=function(i){var c=this;return this.idbdb&&(this._state.openComplete||Ae.letThrough||this._vip)?i():new Re(function(m,p){if(c._state.openComplete)return p(new Be.DatabaseClosed(c._state.dbOpenError));if(!c._state.isBeingOpened){if(!c._state.autoOpen)return void p(new Be.DatabaseClosed);c.open().catch(Fe)}c._state.dbReadyPromise.then(m,p)}).then(i)},Et.prototype.use=function(i){var c=i.stack,m=i.create,p=i.level,v=i.name;return v&&this.unuse({stack:c,name:v}),i=this._middlewares[c]||(this._middlewares[c]=[]),i.push({stack:c,create:m,level:p??10,name:v}),i.sort(function(b,C){return b.level-C.level}),this},Et.prototype.unuse=function(i){var c=i.stack,m=i.name,p=i.create;return c&&this._middlewares[c]&&(this._middlewares[c]=this._middlewares[c].filter(function(v){return p?v.create!==p:!!m&&v.name!==m})),this},Et.prototype.open=function(){var i=this;return Xs(Pt,function(){return Hr(i)})},Et.prototype._close=function(){var i=this._state,c=we.indexOf(this);if(0<=c&&we.splice(c,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}i.isBeingOpened||(i.dbReadyPromise=new Re(function(m){i.dbReadyResolve=m}),i.openCanceller=new Re(function(m,p){i.cancelOpen=p}))},Et.prototype.close=function(m){var c=(m===void 0?{disableAutoOpen:!0}:m).disableAutoOpen,m=this._state;c?(m.isBeingOpened&&m.cancelOpen(new Be.DatabaseClosed),this._close(),m.autoOpen=!1,m.dbOpenError=new Be.DatabaseClosed):(this._close(),m.autoOpen=this._options.autoOpen||m.isBeingOpened,m.openComplete=!1,m.dbOpenError=null)},Et.prototype.delete=function(i){var c=this;i===void 0&&(i={disableAutoOpen:!0});var m=0<arguments.length&&typeof arguments[0]!="object",p=this._state;return new Re(function(v,b){function C(){c.close(i);var S=c._deps.indexedDB.deleteDatabase(c.name);S.onsuccess=bt(function(){var j,P,B;j=c._deps,P=c.name,B=j.indexedDB,j=j.IDBKeyRange,Si(B)||P===so||hn(B,j).delete(P).catch(Fe),v()}),S.onerror=kt(b),S.onblocked=c._fireOnBlocked}if(m)throw new Be.InvalidArgument("Invalid closeOptions argument to db.delete()");p.isBeingOpened?p.dbReadyPromise.then(C):C()})},Et.prototype.backendDB=function(){return this.idbdb},Et.prototype.isOpen=function(){return this.idbdb!==null},Et.prototype.hasBeenClosed=function(){var i=this._state.dbOpenError;return i&&i.name==="DatabaseClosed"},Et.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Et.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Et.prototype,"tables",{get:function(){var i=this;return h(this._allTables).map(function(c){return i._allTables[c]})},enumerable:!1,configurable:!0}),Et.prototype.transaction=function(){var i=(function(c,m,p){var v=arguments.length;if(v<2)throw new Be.InvalidArgument("Too few arguments");for(var b=new Array(v-1);--v;)b[v-1]=arguments[v];return p=b.pop(),[c,ne(b),p]}).apply(this,arguments);return this._transaction.apply(this,i)},Et.prototype._transaction=function(i,c,m){var p=this,v=Ae.trans;v&&v.db===this&&i.indexOf("!")===-1||(v=null);var b,C,S=i.indexOf("?")!==-1;i=i.replace("!","").replace("?","");try{if(C=c.map(function(P){if(P=P instanceof p.Table?P.name:P,typeof P!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return P}),i=="r"||i===Ut)b=Ut;else{if(i!="rw"&&i!=js)throw new Be.InvalidArgument("Invalid transaction mode: "+i);b=js}if(v){if(v.mode===Ut&&b===js){if(!S)throw new Be.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");v=null}v&&C.forEach(function(P){if(v&&v.storeNames.indexOf(P)===-1){if(!S)throw new Be.SubTransaction("Table "+P+" not included in parent transaction.");v=null}}),S&&v&&!v.active&&(v=null)}}catch(P){return v?v._promise(null,function(B,L){L(P)}):Qe(P)}var j=(function P(B,L,z,G,K){return Re.resolve().then(function(){var X=Ae.transless||Ae,Z=B._createTransaction(L,z,B._dbSchema,G);if(Z.explicit=!0,X={trans:Z,transless:X},G)Z.idbtrans=G.idbtrans;else try{Z.create(),Z.idbtrans._explicit=!0,B._state.PR1398_maxLoop=3}catch(le){return le.name===It.InvalidState&&B.isOpen()&&0<--B._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),B.close({disableAutoOpen:!1}),B.open().then(function(){return P(B,L,z,null,K)})):Qe(le)}var ee,oe=pe(K);return oe&&un(),X=Re.follow(function(){var le;(ee=K.call(Z,Z))&&(oe?(le=Xn.bind(null,null),ee.then(le,le)):typeof ee.next=="function"&&typeof ee.throw=="function"&&(ee=wa(ee)))},X),(ee&&typeof ee.then=="function"?Re.resolve(ee).then(function(le){return Z.active?le:Qe(new Be.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):X.then(function(){return ee})).then(function(le){return G&&Z._resolve(),Z._completion.then(function(){return le})}).catch(function(le){return Z._reject(le),Qe(le)})})}).bind(null,this,b,C,v,m);return v?v._promise(b,j,"lock"):Ae.trans?Xs(Ae.transless,function(){return p._whenReady(j)}):this._whenReady(j)},Et.prototype.table=function(i){if(!E(this._allTables,i))throw new Be.InvalidTable("Table ".concat(i," does not exist"));return this._allTables[i]},Et);function Et(i,c){var m=this;this._middlewares={},this.verno=0;var p=Et.dependencies;this._options=c=r({addons:Et.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange,cache:"cloned"},c),this._deps={indexedDB:c.indexedDB,IDBKeyRange:c.IDBKeyRange},p=c.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var v,b,C,S,j,P={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:Fe,dbReadyPromise:null,cancelOpen:Fe,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:c.autoOpen};P.dbReadyPromise=new Re(function(L){P.dbReadyResolve=L}),P.openCanceller=new Re(function(L,z){P.cancelOpen=z}),this._state=P,this.name=i,this.on=ha(this,"populate","blocked","versionchange","close",{ready:[rs,Fe]}),this.on.ready.subscribe=_(this.on.ready.subscribe,function(L){return function(z,G){Et.vip(function(){var K,X=m._state;X.openComplete?(X.dbOpenError||Re.resolve().then(z),G&&L(z)):X.onReadyBeingFired?(X.onReadyBeingFired.push(z),G&&L(z)):(L(z),K=m,G||L(function Z(){K.on.ready.unsubscribe(z),K.on.ready.unsubscribe(Z)}))})}}),this.Collection=(v=this,Ft(cr.prototype,function(ee,Z){this.db=v;var G=vt,K=null;if(Z)try{G=Z()}catch(oe){K=oe}var X=ee._ctx,Z=X.table,ee=Z.hook.reading.fire;this._ctx={table:Z,index:X.index,isPrimKey:!X.index||Z.schema.primKey.keyPath&&X.index===Z.schema.primKey.name,range:G,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:K,or:X.or,valueMapper:ee!==Ve?ee:null}})),this.Table=(b=this,Ft(sn.prototype,function(L,z,G){this.db=b,this._tx=G,this.name=L,this.schema=z,this.hook=b._allTables[L]?b._allTables[L].hook:ha(null,{creating:[ns,Fe],reading:[At,Ve],updating:[Tt,Fe],deleting:[$t,Fe]})})),this.Transaction=(C=this,Ft(tt.prototype,function(L,z,G,K,X){var Z=this;this.db=C,this.mode=L,this.storeNames=z,this.schema=G,this.chromeTransactionDurability=K,this.idbtrans=null,this.on=ha(this,"complete","error","abort"),this.parent=X||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new Re(function(ee,oe){Z._resolve=ee,Z._reject=oe}),this._completion.then(function(){Z.active=!1,Z.on.complete.fire()},function(ee){var oe=Z.active;return Z.active=!1,Z.on.error.fire(ee),Z.parent?Z.parent._reject(ee):oe&&Z.idbtrans&&Z.idbtrans.abort(),Qe(ee)})})),this.Version=(S=this,Ft(de.prototype,function(L){this.db=S,this._cfg={version:L,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(j=this,Ft(lo.prototype,function(L,z,G){if(this.db=j,this._ctx={table:L,index:z===":id"?null:z,or:G},this._cmp=this._ascending=it,this._descending=function(K,X){return it(X,K)},this._max=function(K,X){return 0<it(K,X)?K:X},this._min=function(K,X){return it(K,X)<0?K:X},this._IDBKeyRange=j._deps.IDBKeyRange,!this._IDBKeyRange)throw new Be.MissingAPI})),this.on("versionchange",function(L){0<L.newVersion?console.warn("Another connection wants to upgrade database '".concat(m.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(m.name,"'. Closing db now to resume the delete request.")),m.close({disableAutoOpen:!1})}),this.on("blocked",function(L){!L.newVersion||L.newVersion<L.oldVersion?console.warn("Dexie.delete('".concat(m.name,"') was blocked")):console.warn("Upgrade '".concat(m.name,"' blocked by other connection holding version ").concat(L.oldVersion/10))}),this._maxKey=Nr(c.IDBKeyRange),this._createTransaction=function(L,z,G,K){return new m.Transaction(L,z,G,m._options.chromeTransactionDurability,K)},this._fireOnBlocked=function(L){m.on("blocked").fire(L),we.filter(function(z){return z.name===m.name&&z!==m&&!z._state.vcFired}).map(function(z){return z.on("versionchange").fire(L)})},this.use(Bl),this.use(Ul),this.use(Uh),this.use(Ll),this.use(Fh);var B=new Proxy(this,{get:function(L,z,G){if(z==="_vip")return!0;if(z==="table")return function(X){return po(m.table(X),B)};var K=Reflect.get(L,z,G);return K instanceof sn?po(K,B):z==="tables"?K.map(function(X){return po(X,B)}):z==="_createTransaction"?function(){return po(K.apply(this,arguments),B)}:K}});this.vip=B,p.forEach(function(L){return L(m)})}var xo,Un=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Ea=(dt.prototype.subscribe=function(i,c,m){return this._subscribe(i&&typeof i!="function"?i:{next:i,error:c,complete:m})},dt.prototype[Un]=function(){return this},dt);function dt(i){this._subscribe=i}try{xo={indexedDB:l.indexedDB||l.mozIndexedDB||l.webkitIndexedDB||l.msIndexedDB,IDBKeyRange:l.IDBKeyRange||l.webkitIDBKeyRange}}catch{xo={indexedDB:null,IDBKeyRange:null}}function Ca(i){var c,m=!1,p=new Ea(function(v){var b=pe(i),C,S=!1,j={},P={},B={get closed(){return S},unsubscribe:function(){S||(S=!0,C&&C.abort(),L&&Rs.storagemutated.unsubscribe(G))}};v.start&&v.start(B);var L=!1,z=function(){return wn(K)},G=function(X){zr(j,X),_t(P,j)&&z()},K=function(){var X,Z,ee;!S&&xo.indexedDB&&(j={},X={},C&&C.abort(),C=new AbortController,ee=function(oe){var le=Er();try{b&&un();var ge=Ur(i,oe);return ge=b?ge.finally(Xn):ge}finally{le&&ss()}}(Z={subscr:X,signal:C.signal,requery:z,querier:i,trans:null}),Promise.resolve(ee).then(function(oe){m=!0,c=oe,S||Z.signal.aborted||(j={},function(le){for(var ge in le)if(E(le,ge))return;return 1}(P=X)||L||(Rs(dr,G),L=!0),wn(function(){return!S&&v.next&&v.next(oe)}))},function(oe){m=!1,["DatabaseClosedError","AbortError"].includes(oe==null?void 0:oe.name)||S||wn(function(){S||v.error&&v.error(oe)})}))};return setTimeout(z,0),B});return p.hasValue=function(){return m},p.getValue=function(){return c},p}var k=Gr;function s(i){var c=u;try{u=!0,Rs.storagemutated.fire(i),Ds(i,!0)}finally{u=c}}N(k,r(r({},Oe),{delete:function(i){return new k(i,{addons:[]}).delete()},exists:function(i){return new k(i,{addons:[]}).open().then(function(c){return c.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(i){try{return c=k.dependencies,m=c.indexedDB,c=c.IDBKeyRange,(Si(m)?Promise.resolve(m.databases()).then(function(p){return p.map(function(v){return v.name}).filter(function(v){return v!==so})}):hn(m,c).toCollection().primaryKeys()).then(i)}catch{return Qe(new Be.MissingAPI)}var c,m},defineClass:function(){return function(i){y(this,i)}},ignoreTransaction:function(i){return Ae.trans?Xs(Ae.transless,i):i()},vip:fo,async:function(i){return function(){try{var c=wa(i.apply(this,arguments));return c&&typeof c.then=="function"?c:Re.resolve(c)}catch(m){return Qe(m)}}},spawn:function(i,c,m){try{var p=wa(i.apply(m,c||[]));return p&&typeof p.then=="function"?p:Re.resolve(p)}catch(v){return Qe(v)}},currentTransaction:{get:function(){return Ae.trans||null}},waitFor:function(i,c){return c=Re.resolve(typeof i=="function"?k.ignoreTransaction(i):i).timeout(c||6e4),Ae.trans?Ae.trans.waitFor(c):c},Promise:Re,debug:{get:function(){return Me},set:function(i){_s(i)}},derive:O,extend:y,props:N,override:_,Events:ha,on:Rs,liveQuery:Ca,extendObservabilitySet:zr,getByKeyPath:$,setByKeyPath:F,delByKeyPath:function(i,c){typeof c=="string"?F(i,c,void 0):"length"in c&&[].map.call(c,function(m){F(i,m,void 0)})},shallowClone:U,deepClone:re,getObjectDiff:mo,cmp:it,asap:H,minKey:-1/0,addons:[],connections:we,errnames:It,dependencies:xo,cache:He,semVer:"4.0.11",version:"4.0.11".split(".").map(function(i){return parseInt(i)}).reduce(function(i,c,m){return i+c/Math.pow(10,2*m)})})),k.maxKey=Nr(k.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Rs(dr,function(i){u||(i=new CustomEvent(qe,{detail:i}),u=!0,dispatchEvent(i),u=!1)}),addEventListener(qe,function(i){i=i.detail,u||s(i)}));var o,u=!1,f=function(){};return typeof BroadcastChannel<"u"&&((f=function(){(o=new BroadcastChannel(qe)).onmessage=function(i){return i.data&&s(i.data)}})(),typeof o.unref=="function"&&o.unref(),Rs(dr,function(i){u||o.postMessage(i)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(i){if(!Gr.disableBfCache&&i.persisted){Me&&console.debug("Dexie: handling persisted pagehide"),o!=null&&o.close();for(var c=0,m=we;c<m.length;c++)m[c].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(i){!Gr.disableBfCache&&i.persisted&&(Me&&console.debug("Dexie: handling persisted pageshow"),f(),s({all:new In(-1/0,[[]])}))})),Re.rejectionMapper=function(i,c){return!i||i instanceof We||i instanceof TypeError||i instanceof SyntaxError||!i.name||!be[i.name]?i:(c=new be[i.name](c||i.message,i),"stack"in i&&D(c,"stack",{get:function(){return this.inner.stack}}),c)},_s(Me),r(Gr,Object.freeze({__proto__:null,Dexie:Gr,liveQuery:Ca,Entity:at,cmp:it,PropModification:ze,replacePrefix:function(i,c){return new ze({replacePrefix:[i,c]})},add:function(i){return new ze({add:i})},remove:function(i){return new ze({remove:i})},default:Gr,RangeSet:In,mergeRanges:ei,rangesOverlap:an}),{default:Gr}),Gr})})(lb);var h6=lb.exports;const tm=eh(h6),px=Symbol.for("Dexie"),Hd=globalThis[px]||(globalThis[px]=tm);if(tm.semVer!==Hd.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${tm.semVer} and ${Hd.semVer}`);const{liveQuery:tD,mergeRanges:nD,rangesOverlap:rD,RangeSet:sD,cmp:iD,Entity:aD,PropModification:oD,replacePrefix:lD,add:cD,remove:uD}=Hd,cb=ob(e=>({status:"idle",lastSync:null,setSyncStatus:t=>e({status:t}),setLastSyncTime:t=>e({lastSync:t})}));class f6 extends Hd{constructor(){super("HybridDB");$h(this,"events");$h(this,"company_logos");this.version(3).stores({events:"id, company_id, name, date, mode, lastSynced",company_logos:"id"})}}const Us=new f6,Lg=async()=>{const{data:e,error:t}=await xe.from("events").select("*");if(t)throw t;return e||[]},m6=async()=>{const e=await Us.events.toArray(),t=await Lg(),n=new Map(t.map(r=>[r.id,r]));for(const r of e){const a=n.get(r.id);(!a||r.lastSynced&&(!a.lastSynced||r.lastSynced>a.lastSynced))&&(await xe.from("events").upsert([{...r}]),await Us.events.update(r.id,{lastSynced:new Date().toISOString()}))}},g6=async()=>{const e=await Lg();for(const t of e){const n=await Us.events.get(t.id);(!n||t.lastSynced&&(!n.lastSynced||t.lastSynced>n.lastSynced))&&await Us.events.put({...t})}},xx=async()=>{const{setSyncStatus:e,setLastSyncTime:t}=cb.getState();e("syncing");try{await m6(),await g6(),e("success"),t(new Date().toISOString())}catch{e("error")}},p6=()=>{const{mode:e}=Pg();return{getEvents:async n=>{if(e==="offline"){const r=await Us.events.toArray();return n?r.filter(a=>a.company_id===n):r}if(e==="online")try{const r=await Lg();return n?r.filter(a=>a.company_id===n):r}catch{console.warn("Supabase unavailable, falling back to local DB");const a=await Us.events.toArray();return n?a.filter(l=>l.company_id===n):a}try{await xx();const r=await Us.events.toArray();return n?r.filter(a=>a.company_id===n):r}catch{console.warn("Supabase unavailable in hybrid mode, using local DB only");const a=await Us.events.toArray();return n?a.filter(l=>l.company_id===n):a}},syncEvents:xx}};function x6({userCompany:e}){const[t,n]=R.useState(null),[r,a]=R.useState(null),[l,h]=R.useState(!0),[g,y]=R.useState(""),[x,w]=R.useState(null),[E,N]=R.useState(!1),{mode:I,setMode:D}=Pg(),{status:O,lastSync:V}=cb();R.useEffect(()=>{e?_():A()},[e]),R.useEffect(()=>{if(g&&!e){const M=setTimeout(()=>{T()},300);return()=>clearTimeout(M)}else w(null)},[g,e]);const T=async()=>{if(!g.trim()){w(null);return}N(!0);try{const M=`%${g.toLowerCase()}%`,{data:H}=await xe.from("companies").select("id, name, created_at").ilike("name",M).limit(5),{data:$}=await xe.from("company_users").select(`
          id,
          email,
          company:companies(name)
        `).ilike("email",M).limit(5),{data:F}=await xe.from("events").select(`
          id,
          name,
          date,
          company:companies(name)
        `).ilike("name",M).limit(5);w({companies:H||[],users:($||[]).map(U=>({...U,company:Array.isArray(U.company)?U.company[0]:U.company})),events:(F||[]).map(U=>({...U,company:Array.isArray(U.company)?U.company[0]:U.company}))})}catch(M){console.error("Search error:",M)}finally{N(!1)}},A=async()=>{try{h(!0);const{data:M}=await xe.from("companies").select("id, created_at"),{data:H}=await xe.from("events").select(`
          id,
          name,
          date,
          created_at,
          company:companies(name)
        `).order("created_at",{ascending:!1}),{data:$}=await xe.from("attendees").select("id, event_id, checked_in, created_at"),{data:F}=await xe.from("company_users").select(`
          id,
          email,
          created_at,
          company:companies(name)
        `).order("created_at",{ascending:!1}),U=(M==null?void 0:M.length)||0,q=(H==null?void 0:H.length)||0,ne=($==null?void 0:$.length)||0,he=($==null?void 0:$.filter(se=>se.checked_in).length)||0,me=(F==null?void 0:F.length)||0,re=await Promise.all(((H==null?void 0:H.slice(0,5))||[]).map(async se=>{const Q=($==null?void 0:$.filter(ce=>ce.event_id===se.id))||[];return{...se,company:Array.isArray(se.company)?se.company[0]:se.company,attendee_count:Q.length,checked_in_count:Q.filter(ce=>ce.checked_in).length}})),ae=((F==null?void 0:F.slice(0,5))||[]).map(se=>({...se,company:Array.isArray(se.company)?se.company[0]:se.company,last_sign_in_at:null})),Y=new Date;Y.setDate(Y.getDate()-30);const te={companies:(M==null?void 0:M.filter(se=>new Date(se.created_at)>Y).length)||0,events:(H==null?void 0:H.filter(se=>new Date(se.created_at)>Y).length)||0,attendees:($==null?void 0:$.filter(se=>new Date(se.created_at)>Y).length)||0,users:(F==null?void 0:F.filter(se=>new Date(se.created_at)>Y).length)||0};n({totalCompanies:U,totalEvents:q,totalAttendees:ne,totalCheckedIn:he,totalUsers:me,recentEvents:re,recentUsers:ae,monthlyGrowth:te,searchResults:{companies:[],users:[],events:[]}})}catch(M){console.error("Error fetching admin stats:",M)}finally{h(!1)}},_=async()=>{try{h(!0);const{data:M}=await xe.from("events").select("id, name, date, created_at").eq("company_id",e.company_id).order("created_at",{ascending:!1}),H=(M==null?void 0:M.map(Y=>Y.id))||[],{data:$}=await xe.from("attendees").select("id, event_id, checked_in, created_at").in("event_id",H),F=(M==null?void 0:M.length)||0,U=($==null?void 0:$.length)||0,q=($==null?void 0:$.filter(Y=>Y.checked_in).length)||0,ne=new Date,he=(M==null?void 0:M.filter(Y=>Y.date&&new Date(Y.date)>ne).length)||0,me=((M==null?void 0:M.slice(0,5))||[]).map(Y=>{const te=($==null?void 0:$.filter(se=>se.event_id===Y.id))||[];return{...Y,attendee_count:te.length,checked_in_count:te.filter(se=>se.checked_in).length}}),re=[];for(let Y=5;Y>=0;Y--){const te=new Date;te.setMonth(te.getMonth()-Y);const se=new Date(te.getFullYear(),te.getMonth(),1),Q=new Date(te.getFullYear(),te.getMonth()+1,0),ce=(M==null?void 0:M.filter(pe=>{const ye=new Date(pe.created_at);return ye>=se&&ye<=Q}))||[],J=($==null?void 0:$.filter(pe=>{const ye=new Date(pe.created_at);return ye>=se&&ye<=Q}))||[];re.push({month:te.toLocaleDateString("en-US",{month:"short"}),events:ce.length,attendees:J.length,checkedIn:J.filter(pe=>pe.checked_in).length})}a({totalEvents:F,totalAttendees:U,totalCheckedIn:q,upcomingEvents:he,recentEvents:me,quickActions:[{name:"Create Event",path:"/admin/events",icon:mn,description:"Set up a new event",color:"bg-gradient-to-br from-blue-500 to-cyan-500",gradient:"from-blue-500 to-cyan-500"},{name:"Manage Attendees",path:"/admin/attendees",icon:Yt,description:"View and manage registrations",color:"bg-gradient-to-br from-green-500 to-emerald-500",gradient:"from-green-500 to-emerald-500"},{name:"Seating Arrangement",path:"/admin/seating",icon:pr,description:"Arrange tables and seats",color:"bg-gradient-to-br from-orange-500 to-red-500",gradient:"from-orange-500 to-red-500"},{name:"Check-in System",path:"/admin/checkin",icon:vs,description:"Scan QR codes for check-in",color:"bg-gradient-to-br from-purple-500 to-indigo-500",gradient:"from-purple-500 to-indigo-500"},{name:"Event Gallery",path:"/admin/gallery",icon:ys,description:"Manage photo uploads",color:"bg-gradient-to-br from-pink-500 to-rose-500",gradient:"from-pink-500 to-rose-500"},{name:"Voting System",path:"/admin/voting",icon:ws,description:"Create voting sessions",color:"bg-gradient-to-br from-violet-500 to-purple-500",gradient:"from-violet-500 to-purple-500"}],monthlyData:re})}catch(M){console.error("Error fetching company stats:",M)}finally{h(!1)}};return l?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin"}),d.jsx(zd,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-purple-600 animate-pulse"})]})}):!e&&t?d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"flex items-center justify-center mb-4",children:d.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-lg",children:d.jsx(al,{className:"h-8 w-8 text-white"})})}),d.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 bg-clip-text text-transparent mb-2",children:"Admin Dashboard"}),d.jsx("p",{className:"text-gray-600 text-lg",children:"System-wide analytics and management overview"})]}),d.jsxs("div",{style:{marginBottom:16},children:[d.jsx("label",{htmlFor:"hybrid-mode-select",style:{fontWeight:"bold",marginRight:8},children:"Data Mode:"}),d.jsxs("select",{id:"hybrid-mode-select",value:I,onChange:M=>D(M.target.value),style:{padding:4,borderRadius:4},children:[d.jsx("option",{value:"online",children:"Online (Supabase)"}),d.jsx("option",{value:"offline",children:"Offline (Local Only)"}),d.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),d.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[d.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-white font-semibold text-xs ${O==="idle"?"bg-gray-400":O==="syncing"?"bg-blue-500":O==="success"?"bg-green-500":"bg-red-500"}`,title:`Sync status: ${O}`,children:["Sync: ",O.charAt(0).toUpperCase()+O.slice(1)]}),d.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-white font-semibold text-xs ${I==="online"?"bg-blue-500":I==="offline"?"bg-yellow-500":"bg-green-500"}`,title:`Database mode: ${I}`,children:["DB: ",I.charAt(0).toUpperCase()+I.slice(1)]}),V&&d.jsxs("div",{className:"text-xs text-gray-500",children:["Last Sync: ",new Date(V).toLocaleString()]})]}),d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:d.jsx(Fo,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{type:"text",value:g,onChange:M=>y(M.target.value),className:"block w-full pl-12 pr-12 py-4 border-0 rounded-xl bg-gray-50/50 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:bg-white transition-all duration-300 text-lg",placeholder:"Search companies, users, or events..."}),E&&d.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:d.jsx("div",{className:"w-5 h-5 border-2 border-purple-300 border-t-purple-600 rounded-full animate-spin"})})]}),x&&d.jsxs("div",{className:"mt-6 space-y-6",children:[x.companies.length>0&&d.jsxs("div",{className:"animate-fade-in",children:[d.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[d.jsx(Rr,{className:"h-5 w-5 text-blue-500 mr-2"}),"Companies"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.companies.map(M=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl border border-blue-100 hover:shadow-md transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg mr-3",children:d.jsx(Rr,{className:"h-4 w-4 text-white"})}),d.jsx("span",{className:"font-medium text-gray-900",children:M.name})]}),d.jsx("span",{className:"text-sm text-gray-500 bg-white px-3 py-1 rounded-full",children:new Date(M.created_at).toLocaleDateString()})]},M.id))})]}),x.users.length>0&&d.jsxs("div",{className:"animate-fade-in",children:[d.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[d.jsx(Yt,{className:"h-5 w-5 text-green-500 mr-2"}),"Users"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.users.map(M=>d.jsx("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 hover:shadow-md transition-all duration-300",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg mr-3",children:d.jsx(Yt,{className:"h-4 w-4 text-white"})}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-900 block",children:M.email}),d.jsx("span",{className:"text-sm text-gray-500",children:M.company.name})]})]})},M.id))})]}),x.events.length>0&&d.jsxs("div",{className:"animate-fade-in",children:[d.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[d.jsx(mn,{className:"h-5 w-5 text-purple-500 mr-2"}),"Events"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:x.events.map(M=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-100 hover:shadow-md transition-all duration-300",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg mr-3",children:d.jsx(mn,{className:"h-4 w-4 text-white"})}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium text-gray-900 block",children:M.name}),d.jsx("span",{className:"text-sm text-gray-500",children:M.company.name})]})]}),M.date&&d.jsx("span",{className:"text-sm text-gray-500 bg-white px-3 py-1 rounded-full",children:new Date(M.date).toLocaleDateString()})]},M.id))})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-blue-600 rounded-lg mr-4",children:d.jsx(Rr,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.totalCompanies}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Companies"}),t.monthlyGrowth.companies>0&&d.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[d.jsx(_o,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.companies," this month"]})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-green-600 rounded-lg mr-4",children:d.jsx(mn,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.totalEvents}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Events"}),t.monthlyGrowth.events>0&&d.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[d.jsx(_o,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.events," this month"]})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-purple-600 rounded-lg mr-4",children:d.jsx(Yt,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.totalAttendees}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Attendees"}),t.monthlyGrowth.attendees>0&&d.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[d.jsx(_o,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.attendees," this month"]})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-orange-600 rounded-lg mr-4",children:d.jsx(Vc,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.totalCheckedIn}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Check-ins"}),d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.totalAttendees>0?`${Math.round(t.totalCheckedIn/t.totalAttendees*100)}% rate`:"0% rate"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg mr-4",children:d.jsx(LT,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:t.totalUsers}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Users"}),t.monthlyGrowth.users>0&&d.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[d.jsx(_o,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.users," this month"]})]})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-500 rounded-lg mr-3",children:d.jsx(sI,{className:"h-6 w-6 text-white"})}),"System Management"]}),d.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[d.jsx(er,{to:"/admin/companies",className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-blue-300 hover:bg-gradient-to-br hover:from-blue-50 hover:to-cyan-50 transition-all duration-300 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg mr-4 group-hover:scale-110 transition-transform duration-300",children:d.jsx(Rr,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:"Companies"}),d.jsx("div",{className:"text-sm text-gray-600",children:"Manage organizations"})]})]})}),d.jsx(er,{to:"/admin/progress",className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-green-300 hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50 transition-all duration-300 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl shadow-lg mr-4 group-hover:scale-110 transition-transform duration-300",children:d.jsx(xT,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:"Analytics"}),d.jsx("div",{className:"text-sm text-gray-600",children:"Monthly progress"})]})]})})]})]}),d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg mr-3",children:d.jsx(mn,{className:"h-6 w-6 text-white"})}),"Recent Events"]}),d.jsxs(er,{to:"/admin/events",className:"text-purple-600 hover:text-purple-700 flex items-center text-sm font-medium bg-purple-50 px-3 py-2 rounded-lg hover:bg-purple-100 transition-all duration-300",children:["View All ",d.jsx(Af,{className:"h-4 w-4 ml-1"})]})]}),d.jsxs("div",{className:"space-y-3",children:[t.recentEvents.map((M,H)=>d.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${H*.1}s`},children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-gray-900",children:M.name}),d.jsx("div",{className:"text-sm text-gray-600",children:M.company.name}),M.date&&d.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full mt-1 inline-block",children:new Date(M.date).toLocaleDateString()})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[M.checked_in_count,"/",M.attendee_count]}),d.jsx("div",{className:"text-xs text-gray-500",children:"checked in"}),d.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1",children:d.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${M.attendee_count>0?M.checked_in_count/M.attendee_count*100:0}%`}})})]})]},M.id)),t.recentEvents.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(mn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),d.jsx("p",{className:"font-medium",children:"No recent events"})]})]})]}),d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg mr-3",children:d.jsx(Yt,{className:"h-6 w-6 text-white"})}),"Recent Users"]}),d.jsxs(er,{to:"/admin/companies",className:"text-indigo-600 hover:text-indigo-700 flex items-center text-sm font-medium bg-indigo-50 px-3 py-2 rounded-lg hover:bg-indigo-100 transition-all duration-300",children:["View All ",d.jsx(Af,{className:"h-4 w-4 ml-1"})]})]}),d.jsxs("div",{className:"space-y-3",children:[t.recentUsers.map((M,H)=>d.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${H*.1}s`},children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-gray-900",children:M.email}),d.jsx("div",{className:"text-sm text-gray-600",children:M.company.name})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:new Date(M.created_at).toLocaleDateString()}),M.last_sign_in_at&&d.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[d.jsx(J2,{className:"h-3 w-3 mr-1"}),"Active"]})]})]},M.id)),t.recentUsers.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Yt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),d.jsx("p",{className:"font-medium",children:"No recent users"})]})]})]})]})]}):e&&r?d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"flex items-center justify-center mb-4",children:d.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl shadow-lg",children:d.jsx(gI,{className:"h-8 w-8 text-white"})})}),d.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Welcome Back!"}),d.jsxs("p",{className:"text-gray-600 text-lg",children:[d.jsx("span",{className:"font-semibold text-indigo-600",children:e.company.name})," Dashboard"]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-blue-600 rounded-lg mr-4",children:d.jsx(mn,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:r.totalEvents}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Events"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-green-600 rounded-lg mr-4",children:d.jsx(Yt,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:r.totalAttendees}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Attendees"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-purple-600 rounded-lg mr-4",children:d.jsx(Vc,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:r.totalCheckedIn}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Check-ins"}),d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:r.totalAttendees>0?`${Math.round(r.totalCheckedIn/r.totalAttendees*100)}% rate`:"0% rate"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"p-3 bg-orange-600 rounded-lg mr-4",children:d.jsx(_o,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-gray-900",children:r.upcomingEvents}),d.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Upcoming Events"})]})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg mr-3",children:d.jsx(jI,{className:"h-6 w-6 text-white"})}),"Quick Actions"]}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:r.quickActions.map((M,H)=>{const $=M.icon;return d.jsxs(er,{to:M.path,className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-transparent hover:shadow-xl transition-all duration-300 card-hover animate-scale-in",style:{animationDelay:`${H*.1}s`},children:[d.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${M.gradient} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:d.jsx($,{className:"h-6 w-6 text-white"})}),d.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:M.name}),d.jsx("div",{className:"text-sm text-gray-600",children:M.description})]},M.name)})})]}),d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg mr-3",children:d.jsx(mn,{className:"h-6 w-6 text-white"})}),"Recent Events"]}),d.jsxs(er,{to:"/admin/events",className:"text-green-600 hover:text-green-700 flex items-center text-sm font-medium bg-green-50 px-3 py-2 rounded-lg hover:bg-green-100 transition-all duration-300",children:["View All ",d.jsx(Af,{className:"h-4 w-4 ml-1"})]})]}),d.jsxs("div",{className:"space-y-4",children:[r.recentEvents.map((M,H)=>d.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${H*.1}s`},children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:M.name}),M.date&&d.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full mt-1 inline-block",children:new Date(M.date).toLocaleDateString()})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[M.checked_in_count,"/",M.attendee_count]}),d.jsx("div",{className:"text-xs text-gray-500",children:"attendees"}),d.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1",children:d.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${M.attendee_count>0?M.checked_in_count/M.attendee_count*100:0}%`}})})]})]},M.id)),r.recentEvents.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(mn,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),d.jsx("p",{className:"font-medium",children:"No events yet"}),d.jsx(er,{to:"/admin/events",className:"text-green-600 hover:text-green-700 text-sm font-medium bg-green-50 px-4 py-2 rounded-lg hover:bg-green-100 transition-all duration-300 inline-block mt-2",children:"Create your first event"})]})]})]})]}),d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[d.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[d.jsx("div",{className:"p-2 bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg mr-3",children:d.jsx(xI,{className:"h-6 w-6 text-white"})}),"Event Tools & Monitors"]}),d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[d.jsxs(er,{to:"/admin/lucky-draw",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-yellow-300 hover:bg-gradient-to-br hover:from-yellow-50 hover:to-orange-50 transition-all duration-300 card-hover",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:d.jsx(Ba,{className:"h-8 w-8 text-white"})}),d.jsx("div",{className:"font-semibold text-gray-900",children:"Lucky Draw"}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Random winner selection"})]}),d.jsxs(er,{to:"/admin/welcome-monitor",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-blue-300 hover:bg-gradient-to-br hover:from-blue-50 hover:to-cyan-50 transition-all duration-300 card-hover",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:d.jsx(ol,{className:"h-8 w-8 text-white"})}),d.jsx("div",{className:"font-semibold text-gray-900",children:"Welcome Monitor"}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Live check-in display"})]}),d.jsxs(er,{to:"/admin/voting-monitor",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-purple-300 hover:bg-gradient-to-br hover:from-purple-50 hover:to-pink-50 transition-all duration-300 card-hover",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:d.jsx(al,{className:"h-8 w-8 text-white"})}),d.jsx("div",{className:"font-semibold text-gray-900",children:"Voting Monitor"}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Live voting results"})]}),d.jsxs(er,{to:"/admin/progress",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-green-300 hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50 transition-all duration-300 card-hover",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:d.jsx(wT,{className:"h-8 w-8 text-white"})}),d.jsx("div",{className:"font-semibold text-gray-900",children:"Analytics"}),d.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Performance insights"})]})]})]})]}):null}function y6(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return`#${(t>>24&255).toString(16).padStart(2,"0")}${(t>>16&255).toString(16).padStart(2,"0")}${(t>>8&255).toString(16).padStart(2,"0")}`}function v6(){const[e,t]=R.useState([]),[n,r]=R.useState([]),[a,l]=R.useState(!1),[h,g]=R.useState(!1),[y,x]=R.useState(null),[w,E]=R.useState(""),[N,I]=R.useState({email:"",password:"",company_id:""}),[D,O]=R.useState(!0),[V,T]=R.useState({name:"",person_in_charge:"",contact_number:"",email:"",logo:""}),[A,_]=R.useState(!1);R.useEffect(()=>{M(),H()},[]);const M=async()=>{try{const{data:ae,error:Y}=await xe.from("companies").select("*").order("created_at",{ascending:!1});if(Y)throw Y;const te=await Promise.all(ae.map(async se=>{const{data:Q}=await xe.from("events").select("id").eq("company_id",se.id),{data:ce}=await xe.from("attendees").select("id").in("event_id",(Q==null?void 0:Q.map(J=>J.id))||[]);return{...se,event_count:(Q==null?void 0:Q.length)||0,attendee_count:(ce==null?void 0:ce.length)||0}}));t(te)}catch(ae){ue.error("Error fetching companies: "+ae.message)}finally{O(!1)}},H=async()=>{try{const{data:ae,error:Y}=await xe.from("company_users").select(`
          *,
          company:companies(name)
        `).order("created_at",{ascending:!1});if(Y)throw Y;r(ae||[])}catch(ae){console.error("Error fetching company users:",ae)}},$=async ae=>{if(ae.preventDefault(),!!V.name.trim())try{const{error:Y}=await xe.from("companies").insert([{...V}]);if(Y)throw Y;ue.success("Company created successfully!"),T({name:"",person_in_charge:"",contact_number:"",email:"",logo:""}),l(!1),M()}catch(Y){ue.error("Error creating company: "+Y.message)}},F=async ae=>{if(ae.preventDefault(),!(!V.name.trim()||!y))try{const{error:Y}=await xe.from("companies").update({...V}).eq("id",y.id);if(Y)throw Y;ue.success("Company updated successfully!"),T({name:"",person_in_charge:"",contact_number:"",email:"",logo:""}),x(null),l(!1),M()}catch(Y){ue.error("Error updating company: "+Y.message)}},U=async ae=>{if(confirm("Are you sure you want to delete this company? This will also delete all events and attendees."))try{const{error:Y}=await xe.from("companies").delete().eq("id",ae);if(Y)throw Y;ue.success("Company deleted successfully!"),M(),H()}catch(Y){ue.error("Error deleting company: "+Y.message)}},q=ae=>{x(ae),T({name:ae.name||"",person_in_charge:ae.person_in_charge||"",contact_number:ae.contact_number||"",email:ae.email||"",logo:ae.logo||""}),l(!0)},ne=async ae=>{if(ae.preventDefault(),!(!N.email.trim()||!N.password.trim()||!N.company_id))try{const{data:{session:Y}}=await xe.auth.getSession();if(!Y)throw new Error("Not authenticated");const te=await fetch("https://fylfbymwfymtcumpfcvf.supabase.co/functions/v1/create-company-user",{method:"POST",headers:{Authorization:`Bearer ${Y.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:N.email,password:N.password,company_id:N.company_id})}),se=await te.json();if(!te.ok)throw new Error(se.error||"Failed to create user");ue.success("Company user created successfully!"),I({email:"",password:"",company_id:""}),g(!1),H()}catch(Y){ue.error("Error creating user: "+Y.message)}},he=async ae=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:Y}=await xe.from("company_users").delete().eq("id",ae);if(Y)throw Y;ue.success("User deleted successfully!"),H()}catch(Y){ue.error("Error deleting user: "+Y.message)}},me=()=>{E(""),x(null),l(!1)},re=async ae=>{var te;const Y=(te=ae.target.files)==null?void 0:te[0];if(Y){_(!0);try{const se=Y.name.split(".").pop(),Q=`logo/${crypto.randomUUID()}.${se}`,{data:ce,error:J}=await xe.storage.from("bucket").upload(Q,Y,{cacheControl:"3600",upsert:!0});if(J)throw J;const{data:pe}=xe.storage.from("bucket").getPublicUrl(Q),ye=pe.publicUrl;T({...V,logo:ye});const We=new FileReader;We.onload=async $e=>{var _e;const Ct=(_e=$e.target)==null?void 0:_e.result;await Us.table("company_logos").put({id:Q,base64:Ct})},We.readAsDataURL(Y),ue.success("Logo uploaded!")}catch(se){ue.error("Error uploading logo: "+se.message)}finally{_(!1)}}};return D?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Company Management"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Manage companies, events, and user access"})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("button",{onClick:()=>g(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[d.jsx(ux,{className:"h-5 w-5 mr-2"}),"Add User"]}),d.jsxs("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[d.jsx(Fs,{className:"h-5 w-5 mr-2"}),"Add Company"]})]})]}),d.jsx("div",{className:"space-y-6",children:d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:["        ",e.map(ae=>{const Y=n.filter(te=>te.company_id===ae.id);return d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex justify-between items-start mb-4",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Rr,{className:"h-8 w-8 text-blue-600 mr-3"}),d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-center mb-2",children:[d.jsx("span",{className:"inline-block w-4 h-4 rounded-full mr-2 border border-gray-300",style:{backgroundColor:y6(ae.id)},title:"Company Color"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:ae.name})]}),d.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(ae.created_at).toLocaleDateString()]})]})]}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>q(ae),className:"text-gray-400 hover:text-blue-600 transition-colors",children:d.jsx(ou,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>U(ae.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:d.jsx(ta,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(mn,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{children:[ae.event_count," Events"]})]}),d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(Yt,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{children:[ae.attendee_count," Total Attendees"]})]}),d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(ux,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{children:[Y.length," Users"]})]})]}),Y.length>0&&d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Company Users"}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Y.map(te=>d.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:d.jsxs("div",{className:"flex justify-between items-start",children:[d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-gray-900 text-sm",children:te.email}),d.jsx("div",{className:"text-xs text-gray-500",children:new Date(te.created_at).toLocaleDateString()})]}),d.jsx("button",{onClick:()=>he(te.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:d.jsx(ta,{className:"h-3 w-3"})})]})},te.id))})]})]},ae.id)})]})}),e.length===0&&n.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(Rr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No companies found"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first company"}),d.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Company"})]}),h&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Company User"}),d.jsxs("form",{onSubmit:ne,children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company *"}),d.jsxs("select",{value:N.company_id,onChange:ae=>I({...N,company_id:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[d.jsx("option",{value:"",children:"Select a company"}),e.map(ae=>d.jsx("option",{value:ae.id,children:ae.name},ae.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),d.jsx("input",{type:"email",value:N.email,onChange:ae=>I({...N,email:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),d.jsx("input",{type:"password",value:N.password,onChange:ae=>I({...N,password:ae.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password",required:!0,minLength:6})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx("button",{type:"button",onClick:()=>g(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create User"})]})]})]})}),d.jsx("div",{className:"hidden",children:e.map(ae=>d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx(Rr,{className:"h-8 w-8 text-blue-600 mr-3"}),d.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:ae.name})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(mn,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{children:[ae.event_count," Events"]})]}),d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(Yt,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{children:[ae.attendee_count," Total Attendees"]})]})]}),d.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:d.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(ae.created_at).toLocaleDateString()]})})]},ae.id))}),a&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:y?"Edit Company":"Create New Company"}),d.jsxs("form",{onSubmit:y?F:$,children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),d.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded",value:V.name,onChange:ae=>T({...V,name:ae.target.value}),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Person in Charge"}),d.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded",value:V.person_in_charge,onChange:ae=>T({...V,person_in_charge:ae.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Number"}),d.jsx("input",{type:"text",className:"w-full px-3 py-2 border rounded",value:V.contact_number,onChange:ae=>T({...V,contact_number:ae.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),d.jsx("input",{type:"email",className:"w-full px-3 py-2 border rounded",value:V.email,onChange:ae=>T({...V,email:ae.target.value})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Logo"}),d.jsx("input",{type:"file",accept:"image/*",onChange:re,disabled:A}),A&&d.jsx("div",{className:"text-xs text-blue-500 mt-1",children:"Uploading..."}),V.logo&&d.jsx("img",{src:Cs(V.logo),alt:"Logo Preview",className:"w-12 h-12 rounded-full object-cover mt-2"})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[d.jsx("button",{type:"button",onClick:me,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:y?"Update Company":"Create Company"})]})]})]})})]})}var Gs={},w6=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},ub={},Lr={};let Bg;const b6=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Lr.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Lr.getSymbolTotalCodewords=function(t){return b6[t]};Lr.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Lr.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Bg=t};Lr.isKanjiModeEnabled=function(){return typeof Bg<"u"};Lr.toSJIS=function(t){return Bg(t)};var jh={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,a){if(e.isValid(r))return r;try{return t(r)}catch{return a}}})(jh);function db(){this.buffer=[],this.length=0}db.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var E6=db;function lu(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}lu.prototype.set=function(e,t,n,r){const a=e*this.size+t;this.data[a]=n,r&&(this.reservedBit[a]=!0)};lu.prototype.get=function(e,t){return this.data[e*this.size+t]};lu.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};lu.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var C6=lu,hb={};(function(e){const t=Lr.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const a=Math.floor(r/7)+2,l=t(r),h=l===145?26:Math.ceil((l-13)/(2*a-2))*2,g=[l-7];for(let y=1;y<a-1;y++)g[y]=g[y-1]-h;return g.push(6),g.reverse()},e.getPositions=function(r){const a=[],l=e.getRowColCoords(r),h=l.length;for(let g=0;g<h;g++)for(let y=0;y<h;y++)g===0&&y===0||g===0&&y===h-1||g===h-1&&y===0||a.push([l[g],l[y]]);return a}})(hb);var fb={};const N6=Lr.getSymbolSize,yx=7;fb.getPositions=function(t){const n=N6(t);return[[0,0],[n-yx,0],[0,n-yx]]};var mb={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const l=a.size;let h=0,g=0,y=0,x=null,w=null;for(let E=0;E<l;E++){g=y=0,x=w=null;for(let N=0;N<l;N++){let I=a.get(E,N);I===x?g++:(g>=5&&(h+=t.N1+(g-5)),x=I,g=1),I=a.get(N,E),I===w?y++:(y>=5&&(h+=t.N1+(y-5)),w=I,y=1)}g>=5&&(h+=t.N1+(g-5)),y>=5&&(h+=t.N1+(y-5))}return h},e.getPenaltyN2=function(a){const l=a.size;let h=0;for(let g=0;g<l-1;g++)for(let y=0;y<l-1;y++){const x=a.get(g,y)+a.get(g,y+1)+a.get(g+1,y)+a.get(g+1,y+1);(x===4||x===0)&&h++}return h*t.N2},e.getPenaltyN3=function(a){const l=a.size;let h=0,g=0,y=0;for(let x=0;x<l;x++){g=y=0;for(let w=0;w<l;w++)g=g<<1&2047|a.get(x,w),w>=10&&(g===1488||g===93)&&h++,y=y<<1&2047|a.get(w,x),w>=10&&(y===1488||y===93)&&h++}return h*t.N3},e.getPenaltyN4=function(a){let l=0;const h=a.data.length;for(let y=0;y<h;y++)l+=a.data[y];return Math.abs(Math.ceil(l*100/h/5)-10)*t.N4};function n(r,a,l){switch(r){case e.Patterns.PATTERN000:return(a+l)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return l%3===0;case e.Patterns.PATTERN011:return(a+l)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(l/3))%2===0;case e.Patterns.PATTERN101:return a*l%2+a*l%3===0;case e.Patterns.PATTERN110:return(a*l%2+a*l%3)%2===0;case e.Patterns.PATTERN111:return(a*l%3+(a+l)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(a,l){const h=l.size;for(let g=0;g<h;g++)for(let y=0;y<h;y++)l.isReserved(y,g)||l.xor(y,g,n(a,y,g))},e.getBestMask=function(a,l){const h=Object.keys(e.Patterns).length;let g=0,y=1/0;for(let x=0;x<h;x++){l(x),e.applyMask(x,a);const w=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(x,a),w<y&&(y=w,g=x)}return g}})(mb);var kh={};const $i=jh,$u=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Hu=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];kh.getBlocksCount=function(t,n){switch(n){case $i.L:return $u[(t-1)*4+0];case $i.M:return $u[(t-1)*4+1];case $i.Q:return $u[(t-1)*4+2];case $i.H:return $u[(t-1)*4+3];default:return}};kh.getTotalCodewordsCount=function(t,n){switch(n){case $i.L:return Hu[(t-1)*4+0];case $i.M:return Hu[(t-1)*4+1];case $i.Q:return Hu[(t-1)*4+2];case $i.H:return Hu[(t-1)*4+3];default:return}};var gb={},Rh={};const pc=new Uint8Array(512),Wd=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)pc[n]=t,Wd[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)pc[n]=pc[n-255]})();Rh.log=function(t){if(t<1)throw new Error("log("+t+")");return Wd[t]};Rh.exp=function(t){return pc[t]};Rh.mul=function(t,n){return t===0||n===0?0:pc[Wd[t]+Wd[n]]};(function(e){const t=Rh;e.mul=function(r,a){const l=new Uint8Array(r.length+a.length-1);for(let h=0;h<r.length;h++)for(let g=0;g<a.length;g++)l[h+g]^=t.mul(r[h],a[g]);return l},e.mod=function(r,a){let l=new Uint8Array(r);for(;l.length-a.length>=0;){const h=l[0];for(let y=0;y<a.length;y++)l[y]^=t.mul(a[y],h);let g=0;for(;g<l.length&&l[g]===0;)g++;l=l.slice(g)}return l},e.generateECPolynomial=function(r){let a=new Uint8Array([1]);for(let l=0;l<r;l++)a=e.mul(a,new Uint8Array([1,t.exp(l)]));return a}})(gb);const pb=gb;function Fg(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Fg.prototype.initialize=function(t){this.degree=t,this.genPoly=pb.generateECPolynomial(this.degree)};Fg.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=pb.mod(n,this.genPoly),a=this.degree-r.length;if(a>0){const l=new Uint8Array(this.degree);return l.set(r,a),l}return r};var S6=Fg,xb={},ua={},Ug={};Ug.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var qs={};const yb="[0-9]+",_6="[A-Z $%*+\\-./:]+";let zc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";zc=zc.replace(/u/g,"\\u");const A6="(?:(?![A-Z0-9 $%*+\\-./:]|"+zc+`)(?:.|[\r
]))+`;qs.KANJI=new RegExp(zc,"g");qs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");qs.BYTE=new RegExp(A6,"g");qs.NUMERIC=new RegExp(yb,"g");qs.ALPHANUMERIC=new RegExp(_6,"g");const T6=new RegExp("^"+zc+"$"),I6=new RegExp("^"+yb+"$"),j6=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");qs.testKanji=function(t){return T6.test(t)};qs.testNumeric=function(t){return I6.test(t)};qs.testAlphanumeric=function(t){return j6.test(t)};(function(e){const t=Ug,n=qs;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(l,h){if(!l.ccBits)throw new Error("Invalid mode: "+l);if(!t.isValid(h))throw new Error("Invalid version: "+h);return h>=1&&h<10?l.ccBits[0]:h<27?l.ccBits[1]:l.ccBits[2]},e.getBestModeForData=function(l){return n.testNumeric(l)?e.NUMERIC:n.testAlphanumeric(l)?e.ALPHANUMERIC:n.testKanji(l)?e.KANJI:e.BYTE},e.toString=function(l){if(l&&l.id)return l.id;throw new Error("Invalid mode")},e.isValid=function(l){return l&&l.bit&&l.ccBits};function r(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(l,h){if(e.isValid(l))return l;try{return r(l)}catch{return h}}})(ua);(function(e){const t=Lr,n=kh,r=jh,a=ua,l=Ug,h=7973,g=t.getBCHDigit(h);function y(N,I,D){for(let O=1;O<=40;O++)if(I<=e.getCapacity(O,D,N))return O}function x(N,I){return a.getCharCountIndicator(N,I)+4}function w(N,I){let D=0;return N.forEach(function(O){const V=x(O.mode,I);D+=V+O.getBitsLength()}),D}function E(N,I){for(let D=1;D<=40;D++)if(w(N,D)<=e.getCapacity(D,I,a.MIXED))return D}e.from=function(I,D){return l.isValid(I)?parseInt(I,10):D},e.getCapacity=function(I,D,O){if(!l.isValid(I))throw new Error("Invalid QR Code version");typeof O>"u"&&(O=a.BYTE);const V=t.getSymbolTotalCodewords(I),T=n.getTotalCodewordsCount(I,D),A=(V-T)*8;if(O===a.MIXED)return A;const _=A-x(O,I);switch(O){case a.NUMERIC:return Math.floor(_/10*3);case a.ALPHANUMERIC:return Math.floor(_/11*2);case a.KANJI:return Math.floor(_/13);case a.BYTE:default:return Math.floor(_/8)}},e.getBestVersionForData=function(I,D){let O;const V=r.from(D,r.M);if(Array.isArray(I)){if(I.length>1)return E(I,V);if(I.length===0)return 1;O=I[0]}else O=I;return y(O.mode,O.getLength(),V)},e.getEncodedBits=function(I){if(!l.isValid(I)||I<7)throw new Error("Invalid QR Code version");let D=I<<12;for(;t.getBCHDigit(D)-g>=0;)D^=h<<t.getBCHDigit(D)-g;return I<<12|D}})(xb);var vb={};const nm=Lr,wb=1335,k6=21522,vx=nm.getBCHDigit(wb);vb.getEncodedBits=function(t,n){const r=t.bit<<3|n;let a=r<<10;for(;nm.getBCHDigit(a)-vx>=0;)a^=wb<<nm.getBCHDigit(a)-vx;return(r<<10|a)^k6};var bb={};const R6=ua;function cl(e){this.mode=R6.NUMERIC,this.data=e.toString()}cl.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};cl.prototype.getLength=function(){return this.data.length};cl.prototype.getBitsLength=function(){return cl.getBitsLength(this.data.length)};cl.prototype.write=function(t){let n,r,a;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),a=parseInt(r,10),t.put(a,10);const l=this.data.length-n;l>0&&(r=this.data.substr(n),a=parseInt(r,10),t.put(a,l*3+1))};var M6=cl;const D6=ua,If=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ul(e){this.mode=D6.ALPHANUMERIC,this.data=e}ul.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};ul.prototype.getLength=function(){return this.data.length};ul.prototype.getBitsLength=function(){return ul.getBitsLength(this.data.length)};ul.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=If.indexOf(this.data[n])*45;r+=If.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(If.indexOf(this.data[n]),6)};var O6=ul;const P6=ua;function dl(e){this.mode=P6.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}dl.getBitsLength=function(t){return t*8};dl.prototype.getLength=function(){return this.data.length};dl.prototype.getBitsLength=function(){return dl.getBitsLength(this.data.length)};dl.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var L6=dl;const B6=ua,F6=Lr;function hl(e){this.mode=B6.KANJI,this.data=e}hl.getBitsLength=function(t){return t*13};hl.prototype.getLength=function(){return this.data.length};hl.prototype.getBitsLength=function(){return hl.getBitsLength(this.data.length)};hl.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=F6.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var U6=hl,Eb={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,a){var l={},h={};h[r]=0;var g=t.PriorityQueue.make();g.push(r,0);for(var y,x,w,E,N,I,D,O,V;!g.empty();){y=g.pop(),x=y.value,E=y.cost,N=n[x]||{};for(w in N)N.hasOwnProperty(w)&&(I=N[w],D=E+I,O=h[w],V=typeof h[w]>"u",(V||O>D)&&(h[w]=D,g.push(w,D),l[w]=x))}if(typeof a<"u"&&typeof h[a]>"u"){var T=["Could not find a path from ",r," to ",a,"."].join("");throw new Error(T)}return l},extract_shortest_path_from_predecessor_list:function(n,r){for(var a=[],l=r;l;)a.push(l),n[l],l=n[l];return a.reverse(),a},find_path:function(n,r,a){var l=t.single_source_shortest_paths(n,r,a);return t.extract_shortest_path_from_predecessor_list(l,a)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,a={},l;n=n||{};for(l in r)r.hasOwnProperty(l)&&(a[l]=r[l]);return a.queue=[],a.sorter=n.sorter||r.default_sorter,a},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var a={value:n,cost:r};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Eb);var V6=Eb.exports;(function(e){const t=ua,n=M6,r=O6,a=L6,l=U6,h=qs,g=Lr,y=V6;function x(T){return unescape(encodeURIComponent(T)).length}function w(T,A,_){const M=[];let H;for(;(H=T.exec(_))!==null;)M.push({data:H[0],index:H.index,mode:A,length:H[0].length});return M}function E(T){const A=w(h.NUMERIC,t.NUMERIC,T),_=w(h.ALPHANUMERIC,t.ALPHANUMERIC,T);let M,H;return g.isKanjiModeEnabled()?(M=w(h.BYTE,t.BYTE,T),H=w(h.KANJI,t.KANJI,T)):(M=w(h.BYTE_KANJI,t.BYTE,T),H=[]),A.concat(_,M,H).sort(function(F,U){return F.index-U.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function N(T,A){switch(A){case t.NUMERIC:return n.getBitsLength(T);case t.ALPHANUMERIC:return r.getBitsLength(T);case t.KANJI:return l.getBitsLength(T);case t.BYTE:return a.getBitsLength(T)}}function I(T){return T.reduce(function(A,_){const M=A.length-1>=0?A[A.length-1]:null;return M&&M.mode===_.mode?(A[A.length-1].data+=_.data,A):(A.push(_),A)},[])}function D(T){const A=[];for(let _=0;_<T.length;_++){const M=T[_];switch(M.mode){case t.NUMERIC:A.push([M,{data:M.data,mode:t.ALPHANUMERIC,length:M.length},{data:M.data,mode:t.BYTE,length:M.length}]);break;case t.ALPHANUMERIC:A.push([M,{data:M.data,mode:t.BYTE,length:M.length}]);break;case t.KANJI:A.push([M,{data:M.data,mode:t.BYTE,length:x(M.data)}]);break;case t.BYTE:A.push([{data:M.data,mode:t.BYTE,length:x(M.data)}])}}return A}function O(T,A){const _={},M={start:{}};let H=["start"];for(let $=0;$<T.length;$++){const F=T[$],U=[];for(let q=0;q<F.length;q++){const ne=F[q],he=""+$+q;U.push(he),_[he]={node:ne,lastCount:0},M[he]={};for(let me=0;me<H.length;me++){const re=H[me];_[re]&&_[re].node.mode===ne.mode?(M[re][he]=N(_[re].lastCount+ne.length,ne.mode)-N(_[re].lastCount,ne.mode),_[re].lastCount+=ne.length):(_[re]&&(_[re].lastCount=ne.length),M[re][he]=N(ne.length,ne.mode)+4+t.getCharCountIndicator(ne.mode,A))}}H=U}for(let $=0;$<H.length;$++)M[H[$]].end=0;return{map:M,table:_}}function V(T,A){let _;const M=t.getBestModeForData(T);if(_=t.from(A,M),_!==t.BYTE&&_.bit<M.bit)throw new Error('"'+T+'" cannot be encoded with mode '+t.toString(_)+`.
 Suggested mode is: `+t.toString(M));switch(_===t.KANJI&&!g.isKanjiModeEnabled()&&(_=t.BYTE),_){case t.NUMERIC:return new n(T);case t.ALPHANUMERIC:return new r(T);case t.KANJI:return new l(T);case t.BYTE:return new a(T)}}e.fromArray=function(A){return A.reduce(function(_,M){return typeof M=="string"?_.push(V(M,null)):M.data&&_.push(V(M.data,M.mode)),_},[])},e.fromString=function(A,_){const M=E(A,g.isKanjiModeEnabled()),H=D(M),$=O(H,_),F=y.find_path($.map,"start","end"),U=[];for(let q=1;q<F.length-1;q++)U.push($.table[F[q]].node);return e.fromArray(I(U))},e.rawSplit=function(A){return e.fromArray(E(A,g.isKanjiModeEnabled()))}})(bb);const Mh=Lr,jf=jh,z6=E6,$6=C6,H6=hb,W6=fb,rm=mb,sm=kh,G6=S6,Gd=xb,q6=vb,K6=ua,kf=bb;function Y6(e,t){const n=e.size,r=W6.getPositions(t);for(let a=0;a<r.length;a++){const l=r[a][0],h=r[a][1];for(let g=-1;g<=7;g++)if(!(l+g<=-1||n<=l+g))for(let y=-1;y<=7;y++)h+y<=-1||n<=h+y||(g>=0&&g<=6&&(y===0||y===6)||y>=0&&y<=6&&(g===0||g===6)||g>=2&&g<=4&&y>=2&&y<=4?e.set(l+g,h+y,!0,!0):e.set(l+g,h+y,!1,!0))}}function X6(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function Q6(e,t){const n=H6.getPositions(t);for(let r=0;r<n.length;r++){const a=n[r][0],l=n[r][1];for(let h=-2;h<=2;h++)for(let g=-2;g<=2;g++)h===-2||h===2||g===-2||g===2||h===0&&g===0?e.set(a+h,l+g,!0,!0):e.set(a+h,l+g,!1,!0)}}function Z6(e,t){const n=e.size,r=Gd.getEncodedBits(t);let a,l,h;for(let g=0;g<18;g++)a=Math.floor(g/3),l=g%3+n-8-3,h=(r>>g&1)===1,e.set(a,l,h,!0),e.set(l,a,h,!0)}function Rf(e,t,n){const r=e.size,a=q6.getEncodedBits(t,n);let l,h;for(l=0;l<15;l++)h=(a>>l&1)===1,l<6?e.set(l,8,h,!0):l<8?e.set(l+1,8,h,!0):e.set(r-15+l,8,h,!0),l<8?e.set(8,r-l-1,h,!0):l<9?e.set(8,15-l-1+1,h,!0):e.set(8,15-l-1,h,!0);e.set(r-8,8,1,!0)}function J6(e,t){const n=e.size;let r=-1,a=n-1,l=7,h=0;for(let g=n-1;g>0;g-=2)for(g===6&&g--;;){for(let y=0;y<2;y++)if(!e.isReserved(a,g-y)){let x=!1;h<t.length&&(x=(t[h]>>>l&1)===1),e.set(a,g-y,x),l--,l===-1&&(h++,l=7)}if(a+=r,a<0||n<=a){a-=r,r=-r;break}}}function e8(e,t,n){const r=new z6;n.forEach(function(y){r.put(y.mode.bit,4),r.put(y.getLength(),K6.getCharCountIndicator(y.mode,e)),y.write(r)});const a=Mh.getSymbolTotalCodewords(e),l=sm.getTotalCodewordsCount(e,t),h=(a-l)*8;for(r.getLengthInBits()+4<=h&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const g=(h-r.getLengthInBits())/8;for(let y=0;y<g;y++)r.put(y%2?17:236,8);return t8(r,e,t)}function t8(e,t,n){const r=Mh.getSymbolTotalCodewords(t),a=sm.getTotalCodewordsCount(t,n),l=r-a,h=sm.getBlocksCount(t,n),g=r%h,y=h-g,x=Math.floor(r/h),w=Math.floor(l/h),E=w+1,N=x-w,I=new G6(N);let D=0;const O=new Array(h),V=new Array(h);let T=0;const A=new Uint8Array(e.buffer);for(let F=0;F<h;F++){const U=F<y?w:E;O[F]=A.slice(D,D+U),V[F]=I.encode(O[F]),D+=U,T=Math.max(T,U)}const _=new Uint8Array(r);let M=0,H,$;for(H=0;H<T;H++)for($=0;$<h;$++)H<O[$].length&&(_[M++]=O[$][H]);for(H=0;H<N;H++)for($=0;$<h;$++)_[M++]=V[$][H];return _}function n8(e,t,n,r){let a;if(Array.isArray(e))a=kf.fromArray(e);else if(typeof e=="string"){let x=t;if(!x){const w=kf.rawSplit(e);x=Gd.getBestVersionForData(w,n)}a=kf.fromString(e,x||40)}else throw new Error("Invalid data");const l=Gd.getBestVersionForData(a,n);if(!l)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=l;else if(t<l)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+l+`.
`);const h=e8(t,n,a),g=Mh.getSymbolSize(t),y=new $6(g);return Y6(y,t),X6(y),Q6(y,t),Rf(y,n,0),t>=7&&Z6(y,t),J6(y,h),isNaN(r)&&(r=rm.getBestMask(y,Rf.bind(null,y,n))),rm.applyMask(r,y),Rf(y,n,r),{modules:y,version:t,errorCorrectionLevel:n,maskPattern:r,segments:a}}ub.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=jf.M,a,l;return typeof n<"u"&&(r=jf.from(n.errorCorrectionLevel,jf.M),a=Gd.from(n.version),l=rm.from(n.maskPattern),n.toSJISFunc&&Mh.setToSJISFunction(n.toSJISFunc)),n8(t,a,r,l)};var Cb={},Vg={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(l){return[l,l]}))),r.length===6&&r.push("F","F");const a=parseInt(r.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const a=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,l=r.width&&r.width>=21?r.width:void 0,h=r.scale||4;return{width:l,scale:l?4:h,margin:a,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,a){return a.width&&a.width>=r+a.margin*2?a.width/(r+a.margin*2):a.scale},e.getImageWidth=function(r,a){const l=e.getScale(r,a);return Math.floor((r+a.margin*2)*l)},e.qrToImageData=function(r,a,l){const h=a.modules.size,g=a.modules.data,y=e.getScale(h,l),x=Math.floor((h+l.margin*2)*y),w=l.margin*y,E=[l.color.light,l.color.dark];for(let N=0;N<x;N++)for(let I=0;I<x;I++){let D=(N*x+I)*4,O=l.color.light;if(N>=w&&I>=w&&N<x-w&&I<x-w){const V=Math.floor((N-w)/y),T=Math.floor((I-w)/y);O=E[g[V*h+T]?1:0]}r[D++]=O.r,r[D++]=O.g,r[D++]=O.b,r[D]=O.a}}})(Vg);(function(e){const t=Vg;function n(a,l,h){a.clearRect(0,0,l.width,l.height),l.style||(l.style={}),l.height=h,l.width=h,l.style.height=h+"px",l.style.width=h+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(l,h,g){let y=g,x=h;typeof y>"u"&&(!h||!h.getContext)&&(y=h,h=void 0),h||(x=r()),y=t.getOptions(y);const w=t.getImageWidth(l.modules.size,y),E=x.getContext("2d"),N=E.createImageData(w,w);return t.qrToImageData(N.data,l,y),n(E,x,w),E.putImageData(N,0,0),x},e.renderToDataURL=function(l,h,g){let y=g;typeof y>"u"&&(!h||!h.getContext)&&(y=h,h=void 0),y||(y={});const x=e.render(l,h,y),w=y.type||"image/png",E=y.rendererOpts||{};return x.toDataURL(w,E.quality)}})(Cb);var Nb={};const r8=Vg;function wx(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Mf(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function s8(e,t,n){let r="",a=0,l=!1,h=0;for(let g=0;g<e.length;g++){const y=Math.floor(g%t),x=Math.floor(g/t);!y&&!l&&(l=!0),e[g]?(h++,g>0&&y>0&&e[g-1]||(r+=l?Mf("M",y+n,.5+x+n):Mf("m",a,0),a=0,l=!1),y+1<t&&e[g+1]||(r+=Mf("h",h),h=0)):a++}return r}Nb.render=function(t,n,r){const a=r8.getOptions(n),l=t.modules.size,h=t.modules.data,g=l+a.margin*2,y=a.color.light.a?"<path "+wx(a.color.light,"fill")+' d="M0 0h'+g+"v"+g+'H0z"/>':"",x="<path "+wx(a.color.dark,"stroke")+' d="'+s8(h,l,a.margin)+'"/>',w='viewBox="0 0 '+g+" "+g+'"',N='<svg xmlns="http://www.w3.org/2000/svg" '+(a.width?'width="'+a.width+'" height="'+a.width+'" ':"")+w+' shape-rendering="crispEdges">'+y+x+`</svg>
`;return typeof r=="function"&&r(null,N),N};const i8=w6,im=ub,Sb=Cb,a8=Nb;function zg(e,t,n,r,a){const l=[].slice.call(arguments,1),h=l.length,g=typeof l[h-1]=="function";if(!g&&!i8())throw new Error("Callback required as last argument");if(g){if(h<2)throw new Error("Too few arguments provided");h===2?(a=n,n=t,t=r=void 0):h===3&&(t.getContext&&typeof a>"u"?(a=r,r=void 0):(a=r,r=n,n=t,t=void 0))}else{if(h<1)throw new Error("Too few arguments provided");return h===1?(n=t,t=r=void 0):h===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(y,x){try{const w=im.create(n,r);y(e(w,t,r))}catch(w){x(w)}})}try{const y=im.create(n,r);a(null,e(y,t,r))}catch(y){a(y)}}Gs.create=im.create;Gs.toCanvas=zg.bind(null,Sb.render);Gs.toDataURL=zg.bind(null,Sb.renderToDataURL);Gs.toString=zg.bind(null,function(e,t,n){return a8.render(e,n)});function o8(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return`#${(t>>24&255).toString(16).padStart(2,"0")}${(t>>16&255).toString(16).padStart(2,"0")}${(t>>8&255).toString(16).padStart(2,"0")}`}function l8({userCompany:e}){var $;const[t,n]=R.useState([]),[r,a]=R.useState([]),[l,h]=R.useState(!1),[g,y]=R.useState(null),[x,w]=R.useState(!0),[E,N]=R.useState({company_id:"",name:"",description:"",date:"",location:"",max_attendees:1e3,mode:"online",custom_background:"",custom_logo:""}),{getEvents:I}=p6();R.useEffect(()=>{D(),O()},[]);const D=async()=>{w(!0);try{const U=(await I(e?e.company_id:void 0)).map(q=>({...q,company:q.company&&q.company.name?q.company:{name:""},attendee_count:typeof q.attendee_count=="number"?q.attendee_count:0,checked_in_count:typeof q.checked_in_count=="number"?q.checked_in_count:0,description:q.description??null,date:q.date??null,location:q.location??null,max_attendees:q.max_attendees??null,registration_qr:q.registration_qr??null,created_at:q.created_at??""}));n(U)}catch(F){ue.error("Error fetching events: "+F.message)}finally{w(!1)}},O=async()=>{try{let F=xe.from("companies").select("*").order("name");e&&(F=F.eq("id",e.company_id));const{data:U,error:q}=await F;if(q)throw q;a(U)}catch(F){ue.error("Error fetching companies: "+F.message)}},V=async F=>{if(F.preventDefault(),!(!E.name.trim()||!E.company_id))try{if(g){const{error:U}=await xe.from("events").update(E).eq("id",g.id);if(U)throw U;ue.success("Event updated successfully!")}else{const{data:U,error:q}=await xe.from("events").insert([E]).select();if(q)throw q;const ne=`${window.location.origin}/public/register/${U[0].id}`,he=await Gs.toDataURL(ne,{width:300,margin:2,errorCorrectionLevel:"M"});await xe.from("events").update({registration_qr:he}).eq("id",U[0].id),ue.success("Event created successfully!")}A(),D()}catch(U){ue.error("Error saving event: "+U.message)}},T=async F=>{if(confirm("Are you sure you want to delete this event? This will also delete all attendees."))try{await Us.events.delete(F),await xe.from("events").delete().eq("id",F),ue.success("Event deleted successfully!"),D()}catch(U){ue.error("Error deleting event: "+U.message)}},A=()=>{N({company_id:e?e.company_id:"",name:"",description:"",date:"",location:"",max_attendees:1e3,mode:"online",custom_background:"",custom_logo:""}),y(null),h(!1)},_=F=>{y(F),N({company_id:e?e.company_id:F.company_id,name:F.name,description:F.description||"",date:F.date?new Date(F.date).toISOString().slice(0,16):"",location:F.location||"",max_attendees:F.max_attendees||1e3,mode:F.mode||"online",custom_background:F.custom_background||"",custom_logo:F.custom_logo||""}),h(!0)},M=F=>`${window.location.origin}/public/register/${F}`,H=F=>{if(!F.registration_qr)return;const U=document.createElement("a");U.href=F.registration_qr,U.download=`${F.name}-registration-qr.png`,document.body.appendChild(U),U.click(),document.body.removeChild(U)};return x?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsx("div",{children:d.jsxs("div",{className:"flex items-center mb-4",children:[d.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-2xl shadow-lg mr-4",children:d.jsx(mn,{className:"h-8 w-8 text-white"})}),d.jsxs("div",{children:[d.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Event Management"}),d.jsx("p",{className:"text-gray-600 text-lg",children:"Manage events across all companies"})]})]})}),d.jsxs("button",{onClick:()=>h(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 flex items-center shadow-lg hover:shadow-xl transform hover:-translate-y-1",children:[d.jsx(Fs,{className:"h-5 w-5 mr-2"}),"Add Event"]})]}),d.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(F=>d.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6 hover:shadow-2xl transition-all duration-300 card-hover",children:[d.jsx("div",{className:"mb-2",children:d.jsx("h3",{className:"text-xl font-bold px-3 py-1 rounded-md text-white",style:{backgroundColor:o8(F.company_id)},children:F.name})}),d.jsx("p",{className:"text-sm font-semibold bg-gradient-to-r from-blue-500 to-cyan-500 bg-clip-text text-transparent",children:F.company.name}),F.description&&d.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2 bg-gray-50 p-3 rounded-lg",children:F.description}),d.jsxs("div",{className:"space-y-3 mb-4",children:[F.date&&d.jsxs("div",{className:"flex items-center text-gray-600 text-sm bg-blue-50 p-2 rounded-lg",children:[d.jsx(mn,{className:"h-4 w-4 mr-2"}),d.jsx("span",{children:new Date(F.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),F.location&&d.jsxs("div",{className:"flex items-center text-gray-600 text-sm bg-green-50 p-2 rounded-lg",children:[d.jsx(pr,{className:"h-4 w-4 mr-2"}),d.jsx("span",{className:"truncate",children:F.location})]}),d.jsxs("div",{className:"flex items-center text-gray-600 text-sm bg-purple-50 p-2 rounded-lg",children:[d.jsx(Yt,{className:"h-4 w-4 mr-2"}),d.jsxs("span",{children:[F.attendee_count," registered • ",F.checked_in_count," checked in"]})]})]}),F.registration_qr&&d.jsx("div",{className:"border-t border-gray-200 pt-4 mb-4",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Registration QR Code"}),d.jsx("img",{src:Cs(F.registration_qr),alt:"Registration QR Code",className:"w-32 h-32 border-2 border-blue-200 rounded-xl shadow-sm mx-auto"})]})}),d.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("div",{className:"flex space-x-2",children:[d.jsxs("button",{onClick:()=>navigator.clipboard.writeText(M(F.id)),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold flex items-center bg-blue-50 px-3 py-2 rounded-lg hover:bg-blue-100 transition-all duration-300",children:[d.jsx(OT,{className:"h-4 w-4 mr-1"}),"Copy Link"]}),F.registration_qr&&d.jsxs("button",{onClick:()=>H(F),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold flex items-center bg-blue-50 px-3 py-2 rounded-lg hover:bg-blue-100 transition-all duration-300",children:[d.jsx(vs,{className:"h-4 w-4 mr-1"}),"Download QR"]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["Mode: ",F.mode||"online"]}),d.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["Max: ",F.max_attendees]})]})]}),d.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-3 border-t border-gray-100",children:[d.jsxs("button",{onClick:()=>_(F),className:"text-blue-600 hover:text-blue-700 text-sm font-semibold flex items-center bg-blue-50 px-3 py-2 rounded-lg hover:bg-blue-100 transition-all duration-300",children:[d.jsx(ou,{className:"h-4 w-4 mr-1"}),"Edit"]}),d.jsxs("button",{onClick:()=>T(F.id),className:"text-red-600 hover:text-red-700 text-sm font-semibold flex items-center bg-red-50 px-3 py-2 rounded-lg hover:bg-red-100 transition-all duration-300",children:[d.jsx(ta,{className:"h-4 w-4 mr-1"}),"Delete"]})]})]})]},F.id))}),t.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"p-4 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl w-fit mx-auto mb-6",children:d.jsx(mn,{className:"h-16 w-16 text-gray-400"})}),d.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No events found"}),d.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:"Create your first event to get started"}),d.jsx("button",{onClick:()=>h(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 shadow-lg font-semibold",children:"Add Event"})]}),l&&d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[d.jsx("h2",{className:"text-2xl font-bold mb-6 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:g?"Edit Event":"Create New Event"}),d.jsxs("form",{onSubmit:V,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e?"Company":"Company *"}),e?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:(($=r.find(F=>F.id===e.company_id))==null?void 0:$.name)||"Your Company"}):d.jsxs("select",{value:E.company_id,onChange:F=>N({...E,company_id:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",required:!0,children:[d.jsx("option",{value:"",children:"Select a company"}),r.map(F=>d.jsx("option",{value:F.id,children:F.name},F.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Name *"}),d.jsx("input",{type:"text",value:E.name,onChange:F=>N({...E,name:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",placeholder:"Enter event name",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:E.description,onChange:F=>N({...E,description:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",rows:3,placeholder:"Enter event description"})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),d.jsx("input",{type:"datetime-local",value:E.date,onChange:F=>N({...E,date:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attendees"}),d.jsx("input",{type:"number",value:E.max_attendees,onChange:F=>N({...E,max_attendees:parseInt(F.target.value)||1e3}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",min:"1"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),d.jsx("input",{type:"text",value:E.location,onChange:F=>N({...E,location:F.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",placeholder:"Enter event location"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Data Mode"}),d.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900",value:E.mode,onChange:F=>N({...E,mode:F.target.value}),required:!0,children:[d.jsx("option",{value:"online",children:"Online (Supabase)"}),d.jsx("option",{value:"offline",children:"Offline (Local Only)"}),d.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Background (Optional)"}),d.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors",children:E.custom_background?d.jsxs("div",{className:"space-y-2",children:[d.jsx("img",{src:E.custom_background,alt:"Background Preview",className:"max-w-full h-32 object-cover mx-auto rounded-lg"}),d.jsx("button",{onClick:()=>N({...E,custom_background:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Remove Background"})]}):d.jsxs("div",{children:[d.jsx(ys,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),d.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Upload custom background"}),d.jsx("input",{type:"file",accept:"image/*",onChange:F=>{var q;const U=(q=F.target.files)==null?void 0:q[0];if(U){const ne=URL.createObjectURL(U);N({...E,custom_background:ne})}},className:"hidden",id:"background-upload"}),d.jsx("label",{htmlFor:"background-upload",className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Image"})]})})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Logo (Optional)"}),d.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors",children:E.custom_logo?d.jsxs("div",{className:"space-y-2",children:[d.jsx("img",{src:E.custom_logo,alt:"Logo Preview",className:"max-w-full h-32 object-contain mx-auto rounded-lg"}),d.jsx("button",{onClick:()=>N({...E,custom_logo:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Remove Logo"})]}):d.jsxs("div",{children:[d.jsx(ys,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),d.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Upload custom logo"}),d.jsx("input",{type:"file",accept:"image/*",onChange:F=>{var q;const U=(q=F.target.files)==null?void 0:q[0];if(U){const ne=URL.createObjectURL(U);N({...E,custom_logo:ne})}},className:"hidden",id:"logo-upload"}),d.jsx("label",{htmlFor:"logo-upload",className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Image"})]})})]})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:A,className:"px-6 py-3 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-300 font-medium",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg",children:g?"Update Event":"Create Event"})]})]})]})})]})}function bx({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState(!0),[x,w]=R.useState(!1),[E,N]=R.useState(""),[I,D]=R.useState("all"),[O,V]=R.useState(!1),[T,A]=R.useState(null),[_,M]=R.useState({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_type:"Regular"});R.useEffect(()=>{H()},[]),R.useEffect(()=>{r&&$()},[r]);const H=async()=>{try{y(!0);let te=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(te=te.eq("company_id",e.company_id));const{data:se,error:Q}=await te.order("created_at",{ascending:!1});if(Q)throw Q;const ce=(se==null?void 0:se.map(J=>({...J,company:Array.isArray(J.company)?J.company[0]:J.company})))||[];n(ce),e&&ce&&ce.length>0&&a(ce[0].id)}catch(te){ue.error("Error fetching events: "+te.message)}finally{y(!1)}},$=async()=>{try{w(!0);const{data:te,error:se}=await xe.from("attendees").select("*").eq("event_id",r).order("created_at",{ascending:!1});if(se)throw se;h(te||[])}catch(te){ue.error("Error fetching attendees: "+te.message)}finally{w(!1)}},F=()=>{A(null),M({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_type:"Regular"}),V(!0)},U=te=>{A(te),M({name:te.name,email:te.email||"",phone:te.phone||"",identification_number:te.identification_number,staff_id:te.staff_id||"",table_type:te.table_type||"Regular"}),V(!0)},q=async te=>{if(te.preventDefault(),!_.name.trim()||!_.identification_number.trim()){ue.error("Name and Identification Number are required");return}try{if(T){const{error:se}=await xe.from("attendees").update({name:_.name,email:_.email||null,phone:_.phone||null,identification_number:_.identification_number,staff_id:_.staff_id||null,table_type:_.table_type}).eq("id",T.id);if(se)throw se;ue.success("Attendee updated successfully!")}else{const{error:se}=await xe.from("attendees").insert([{..._,event_id:r,checked_in:!1,check_in_time:null,table_type:_.table_type}]);if(se)throw se;ue.success("Attendee created successfully!")}V(!1),$()}catch(se){ue.error("Error saving attendee: "+se.message)}},ne=async te=>{if(confirm("Are you sure you want to delete this attendee?"))try{const{error:se}=await xe.from("attendees").delete().eq("id",te);if(se)throw se;ue.success("Attendee deleted successfully!"),$()}catch(se){ue.error("Error deleting attendee: "+se.message)}},he=async te=>{try{const{error:se}=await xe.from("attendees").update({checked_in:!1,check_in_time:null}).eq("id",te);if(se)throw se;ue.success("Check-in status reset!"),$()}catch(se){ue.error("Error resetting check-in: "+se.message)}},me=async te=>{var Q;const se=(Q=te.target.files)==null?void 0:Q[0];if(se){if(!r){ue.error("Please select an event first");return}try{const J=(await se.text()).split(`
`),pe=J[0].split(",").map(be=>be.trim()),ye=pe.findIndex(be=>be.toLowerCase().includes("name")),We=pe.findIndex(be=>be.toLowerCase().includes("email")),$e=pe.findIndex(be=>be.toLowerCase().includes("phone")),Ct=pe.findIndex(be=>be.toLowerCase().includes("id")&&!be.toLowerCase().includes("staff")),_e=pe.findIndex(be=>be.toLowerCase().includes("staff")),It=pe.findIndex(be=>be.toLowerCase().includes("table"));if(ye===-1||Ct===-1){ue.error("CSV must contain Name and ID Number columns");return}const Je=[];for(let be=1;be<J.length;be++){const Oe=J[be].trim();if(!Oe)continue;const Fe=Oe.split(",").map(At=>At.trim()),Ve={name:Fe[ye]||"",email:Fe[We]||null,phone:Fe[$e]||null,identification_number:Fe[Ct]||"",staff_id:Fe[_e]||null,table_type:Fe[It]||"Regular",event_id:r,checked_in:!1,check_in_time:null};Ve.name&&Ve.identification_number&&Je.push(Ve)}if(Je.length===0){ue.error("No valid attendees found in CSV");return}const{error:Be}=await xe.from("attendees").insert(Je);if(Be)throw Be;ue.success(`${Je.length} attendees imported successfully!`),$()}catch(ce){ue.error("Error importing CSV: "+ce.message)}te.target.value=""}},re=()=>{const te=ae(),se=[["Name","Email","Phone","ID Number","Staff ID","Table Type","Checked In","Check-in Time"],...te.map(pe=>[pe.name,pe.email||"",pe.phone||"",pe.identification_number,pe.staff_id||"",pe.table_type||"Regular",pe.checked_in?"Yes":"No",pe.check_in_time?new Date(pe.check_in_time).toLocaleString():""])].map(pe=>pe.join(",")).join(`
`),Q=new Blob([se],{type:"text/csv"}),ce=window.URL.createObjectURL(Q),J=document.createElement("a");J.href=ce,J.download=`attendees-${r}.csv`,J.click(),window.URL.revokeObjectURL(ce)},ae=()=>{let te=l;return E&&(te=te.filter(se=>se.name.toLowerCase().includes(E.toLowerCase())||se.identification_number.toLowerCase().includes(E.toLowerCase())||se.staff_id&&se.staff_id.toLowerCase().includes(E.toLowerCase())||se.email&&se.email.toLowerCase().includes(E.toLowerCase()))),I==="checked-in"?te=te.filter(se=>se.checked_in):I==="not-checked-in"&&(te=te.filter(se=>!se.checked_in)),te},Y=ae();return g?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendee Management"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Manage attendees for your events"})]}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{onClick:F,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[d.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add Attendee"]}),d.jsxs("label",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center cursor-pointer",children:[d.jsx(Th,{className:"h-4 w-4 mr-2"}),"Import CSV",d.jsx("input",{type:"file",accept:".csv",onChange:me,className:"hidden"})]})]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),t.length===0?d.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:"No events found. Create an event first."}):d.jsxs("select",{value:r,onChange:te=>a(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Choose an event"}),t.map(te=>d.jsx("option",{value:te.id,children:e?te.name:`${te.name} (${te.company.name})`},te.id))]})]}),r&&d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[d.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Attendee Summary"}),d.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[l.length," total"]}),d.jsxs("div",{className:"text-sm text-blue-600",children:[l.filter(te=>te.checked_in).length," checked in"]})]})})]})}),r&&d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Attendees"}),d.jsxs("div",{className:"relative",children:[d.jsx(Fo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),d.jsx("input",{type:"text",value:E,onChange:te=>N(te.target.value),placeholder:"Search by name, ID, email...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Status"}),d.jsxs("select",{value:I,onChange:te=>D(te.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"all",children:"All Attendees"}),d.jsx("option",{value:"checked-in",children:"Checked In"}),d.jsx("option",{value:"not-checked-in",children:"Not Checked In"})]})]}),d.jsx("div",{className:"flex items-end",children:d.jsxs("button",{onClick:re,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center justify-center",children:[d.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[d.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:d.jsxs("h2",{className:"text-lg font-semibold",children:["Attendees (",Y.length,")"]})}),x?d.jsxs("div",{className:"p-8 text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Loading attendees..."})]}):Y.length===0?d.jsxs("div",{className:"p-8 text-center text-gray-500",children:[d.jsx(Yt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"No attendees found"}),d.jsx("p",{className:"text-sm mt-2",children:"Add attendees or adjust your search/filter"})]}):d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[d.jsx("thead",{className:"bg-gray-50",children:d.jsxs("tr",{children:[d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendee"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Table Type"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),d.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),d.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Y.map(te=>d.jsxs("tr",{className:"hover:bg-gray-50",children:[d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-medium text-gray-900",children:te.name}),d.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",te.identification_number]}),te.staff_id&&d.jsxs("div",{className:"text-sm text-gray-500",children:["Staff: ",te.staff_id]})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsxs("div",{className:"text-sm text-gray-900",children:[te.email&&d.jsx("div",{children:te.email}),te.phone&&d.jsx("div",{children:te.phone})]})}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.jsx("div",{className:"text-sm text-gray-900",children:te.table_type||"Regular"})}),d.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[d.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${te.checked_in?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:te.checked_in?"Checked In":"Not Checked In"}),te.check_in_time&&d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(te.check_in_time).toLocaleString()})]}),d.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("button",{onClick:()=>U(te),className:"text-blue-600 hover:text-blue-900",children:d.jsx(ou,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>ne(te.id),className:"text-red-600 hover:text-red-900",children:d.jsx(ta,{className:"h-4 w-4"})}),te.checked_in&&d.jsx("button",{onClick:()=>he(te.id),className:"text-orange-600 hover:text-orange-900",title:"Reset Check-in",children:d.jsx(Yt,{className:"h-4 w-4"})})]})})]},te.id))})]})})]})]}),O&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:T?"Edit Attendee":"Add Attendee"}),d.jsxs("form",{onSubmit:q,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),d.jsx("input",{type:"text",value:_.name,onChange:te=>M({..._,name:te.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),d.jsx("input",{type:"email",value:_.email,onChange:te=>M({..._,email:te.target.value}),className:"w-full border rounded px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),d.jsx("input",{type:"tel",value:_.phone,onChange:te=>M({..._,phone:te.target.value}),className:"w-full border rounded px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Identification Number *"}),d.jsx("input",{type:"text",value:_.identification_number,onChange:te=>M({..._,identification_number:te.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Staff ID"}),d.jsx("input",{type:"text",value:_.staff_id,onChange:te=>M({..._,staff_id:te.target.value}),className:"w-full border rounded px-3 py-2"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Type"}),d.jsxs("select",{value:_.table_type,onChange:te=>M({..._,table_type:te.target.value}),className:"w-full border rounded px-3 py-2",children:[d.jsx("option",{value:"Regular",children:"Regular"}),d.jsx("option",{value:"VIP",children:"VIP"}),d.jsx("option",{value:"VVIP",children:"VVIP"}),d.jsx("option",{value:"Staff",children:"Staff"})]})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>V(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:T?"Update":"Create"})]})]})]})})]})}var Le;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Le||(Le={}));var Ex=new Map([[Le.QR_CODE,"QR_CODE"],[Le.AZTEC,"AZTEC"],[Le.CODABAR,"CODABAR"],[Le.CODE_39,"CODE_39"],[Le.CODE_93,"CODE_93"],[Le.CODE_128,"CODE_128"],[Le.DATA_MATRIX,"DATA_MATRIX"],[Le.MAXICODE,"MAXICODE"],[Le.ITF,"ITF"],[Le.EAN_13,"EAN_13"],[Le.EAN_8,"EAN_8"],[Le.PDF_417,"PDF_417"],[Le.RSS_14,"RSS_14"],[Le.RSS_EXPANDED,"RSS_EXPANDED"],[Le.UPC_A,"UPC_A"],[Le.UPC_E,"UPC_E"],[Le.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),Cx;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(Cx||(Cx={}));function c8(e){return Object.values(Le).includes(e)}var na;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(na||(na={}));var ms=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[na.SCAN_TYPE_CAMERA,na.SCAN_TYPE_FILE],e}(),_b=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!Ex.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,Ex.get(t))},e}(),Nx=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),am;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(am||(am={}));var Ab=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:am.UNKWOWN_ERROR}},e}(),Tb=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Ls(e){return typeof e>"u"||e===null}function u8(e,t,n){return e>n?n:e<t?t:e}var Uo=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Mt=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),Sx=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),Ib=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var r=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(r,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(t),g=0,y=h;g<y.length;g++){var x=y[g];if(l.has(x))return n.logError("".concat(x," is not supported videoConstaints."),!0),!1}return!0},e}(),om={exports:{}};(function(e,t){(function(n,r){r(t)})(Sn,function(n){function r(k){return k==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,s){k.__proto__=s}||function(k,s){for(var o in s)s.hasOwnProperty(o)&&(k[o]=s[o])};function l(k,s){a(k,s);function o(){this.constructor=k}k.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function h(k,s){var o=Object.setPrototypeOf;o?o(k,s):k.__proto__=s}function g(k,s){s===void 0&&(s=k.constructor);var o=Error.captureStackTrace;o&&o(k,s)}var y=function(k){l(s,k);function s(o){var u=this.constructor,f=k.call(this,o)||this;return Object.defineProperty(f,"name",{value:u.name,enumerable:!1}),h(f,u.prototype),g(f),f}return s}(Error);class x extends y{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}x.kind="Exception";class w extends x{}w.kind="ArgumentException";class E extends x{}E.kind="IllegalArgumentException";class N{constructor(s){if(this.binarizer=s,s===null)throw new E("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,u,f){const i=this.binarizer.getLuminanceSource().crop(s,o,u,f);return new N(this.binarizer.createBinarizer(i))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new N(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new N(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class I extends x{static getChecksumInstance(){return new I}}I.kind="ChecksumException";class D{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class O{static arraycopy(s,o,u,f,i){for(;i--;)u[f++]=s[o++]}static currentTimeMillis(){return Date.now()}}class V extends x{}V.kind="IndexOutOfBoundsException";class T extends V{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}T.kind="ArrayIndexOutOfBoundsException";class A{static fill(s,o){for(let u=0,f=s.length;u<f;u++)s[u]=o}static fillWithin(s,o,u,f){A.rangeCheck(s.length,o,u);for(let i=o;i<u;i++)s[i]=f}static rangeCheck(s,o,u){if(o>u)throw new E("fromIndex("+o+") > toIndex("+u+")");if(o<0)throw new T(o);if(u>s)throw new T(u)}static asList(...s){return s}static create(s,o,u){return Array.from({length:s}).map(i=>Array.from({length:o}).fill(u))}static createInt32Array(s,o,u){return Array.from({length:s}).map(i=>Int32Array.from({length:o}).fill(u))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let u=0,f=s.length;u<f;u++)if(s[u]!==o[u])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const u of s)o=31*o+u;return o}static fillUint8Array(s,o){for(let u=0;u!==s.length;u++)s[u]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const u=new Uint8Array(o);return u.set(s),u}return s.slice(0,o)}static copyOfRange(s,o,u){const f=u-o,i=new Int32Array(f);return O.arraycopy(s,o,i,0,f),i}static binarySearch(s,o,u){u===void 0&&(u=A.numberComparator);let f=0,i=s.length-1;for(;f<=i;){const c=i+f>>1,m=u(o,s[c]);if(m>0)f=c+1;else if(m<0)i=c-1;else return c}return-f-1}static numberComparator(s,o){return s-o}}class _{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let u=31;return o=s<<16,o!==0&&(u-=16,s=o),o=s<<8,o!==0&&(u-=8,s=o),o=s<<4,o!==0&&(u-=4,s=o),o=s<<2,o!==0&&(u-=2,s=o),u-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}_.MIN_VALUE_32_BITS=-2147483648,_.MAX_VALUE=Number.MAX_SAFE_INTEGER;class M{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=M.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=M.makeArray(s);O.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const u=this.bits;let f=Math.floor(s/32),i=u[f];i&=~((1<<(s&31))-1);const c=u.length;for(;i===0;){if(++f===c)return o;i=u[f]}const m=f*32+_.numberOfTrailingZeros(i);return m>o?o:m}getNextUnset(s){const o=this.size;if(s>=o)return o;const u=this.bits;let f=Math.floor(s/32),i=~u[f];i&=~((1<<(s&31))-1);const c=u.length;for(;i===0;){if(++f===c)return o;i=~u[f]}const m=f*32+_.numberOfTrailingZeros(i);return m>o?o:m}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new E;if(o===s)return;o--;const u=Math.floor(s/32),f=Math.floor(o/32),i=this.bits;for(let c=u;c<=f;c++){const m=c>u?0:s&31,v=(2<<(c<f?31:o&31))-(1<<m);i[c]|=v}}clear(){const s=this.bits.length,o=this.bits;for(let u=0;u<s;u++)o[u]=0}isRange(s,o,u){if(o<s||s<0||o>this.size)throw new E;if(o===s)return!0;o--;const f=Math.floor(s/32),i=Math.floor(o/32),c=this.bits;for(let m=f;m<=i;m++){const p=m>f?0:s&31,b=(2<<(m<i?31:o&31))-(1<<p)&4294967295;if((c[m]&b)!==(u?b:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new E("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let u=o;u>0;u--)this.appendBit((s>>u-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let u=0;u<o;u++)this.appendBit(s.get(u))}xor(s){if(this.size!==s.size)throw new E("Sizes don't match");const o=this.bits;for(let u=0,f=o.length;u<f;u++)o[u]^=s.bits[u]}toBytes(s,o,u,f){for(let i=0;i<f;i++){let c=0;for(let m=0;m<8;m++)this.get(s)&&(c|=1<<7-m),s++;o[u+i]=c}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),u=o+1,f=this.bits;for(let i=0;i<u;i++){let c=f[i];c=c>>1&1431655765|(c&1431655765)<<1,c=c>>2&858993459|(c&858993459)<<2,c=c>>4&252645135|(c&252645135)<<4,c=c>>8&16711935|(c&16711935)<<8,c=c>>16&65535|(c&65535)<<16,s[o-i]=c}if(this.size!==u*32){const i=u*32-this.size;let c=s[0]>>>i;for(let m=1;m<u;m++){const p=s[m];c|=p<<32-i,s[m-1]=c,c=p>>>i}s[u-1]=c}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof M))return!1;const o=s;return this.size===o.size&&A.equals(this.bits,o.bits)}hashCode(){return 31*this.size+A.hashCode(this.bits)}toString(){let s="";for(let o=0,u=this.size;o<u;o++)o&7||(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new M(this.size,this.bits.slice())}}var H;(function(k){k[k.OTHER=0]="OTHER",k[k.PURE_BARCODE=1]="PURE_BARCODE",k[k.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",k[k.TRY_HARDER=3]="TRY_HARDER",k[k.CHARACTER_SET=4]="CHARACTER_SET",k[k.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",k[k.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",k[k.ASSUME_GS1=7]="ASSUME_GS1",k[k.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",k[k.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",k[k.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(H||(H={}));var $=H;class F extends x{static getFormatInstance(){return new F}}F.kind="FormatException";var U;(function(k){k[k.Cp437=0]="Cp437",k[k.ISO8859_1=1]="ISO8859_1",k[k.ISO8859_2=2]="ISO8859_2",k[k.ISO8859_3=3]="ISO8859_3",k[k.ISO8859_4=4]="ISO8859_4",k[k.ISO8859_5=5]="ISO8859_5",k[k.ISO8859_6=6]="ISO8859_6",k[k.ISO8859_7=7]="ISO8859_7",k[k.ISO8859_8=8]="ISO8859_8",k[k.ISO8859_9=9]="ISO8859_9",k[k.ISO8859_10=10]="ISO8859_10",k[k.ISO8859_11=11]="ISO8859_11",k[k.ISO8859_13=12]="ISO8859_13",k[k.ISO8859_14=13]="ISO8859_14",k[k.ISO8859_15=14]="ISO8859_15",k[k.ISO8859_16=15]="ISO8859_16",k[k.SJIS=16]="SJIS",k[k.Cp1250=17]="Cp1250",k[k.Cp1251=18]="Cp1251",k[k.Cp1252=19]="Cp1252",k[k.Cp1256=20]="Cp1256",k[k.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",k[k.UTF8=22]="UTF8",k[k.ASCII=23]="ASCII",k[k.Big5=24]="Big5",k[k.GB18030=25]="GB18030",k[k.EUC_KR=26]="EUC_KR"})(U||(U={}));class q{constructor(s,o,u,...f){this.valueIdentifier=s,this.name=u,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=f,q.VALUE_IDENTIFIER_TO_ECI.set(s,this),q.NAME_TO_ECI.set(u,this);const i=this.values;for(let c=0,m=i.length;c!==m;c++){const p=i[c];q.VALUES_TO_ECI.set(p,this)}for(const c of f)q.NAME_TO_ECI.set(c,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new F("incorect value");const o=q.VALUES_TO_ECI.get(s);if(o===void 0)throw new F("incorect value");return o}static getCharacterSetECIByName(s){const o=q.NAME_TO_ECI.get(s);if(o===void 0)throw new F("incorect value");return o}equals(s){if(!(s instanceof q))return!1;const o=s;return this.getName()===o.getName()}}q.VALUE_IDENTIFIER_TO_ECI=new Map,q.VALUES_TO_ECI=new Map,q.NAME_TO_ECI=new Map,q.Cp437=new q(U.Cp437,Int32Array.from([0,2]),"Cp437"),q.ISO8859_1=new q(U.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),q.ISO8859_2=new q(U.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),q.ISO8859_3=new q(U.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),q.ISO8859_4=new q(U.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),q.ISO8859_5=new q(U.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),q.ISO8859_6=new q(U.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),q.ISO8859_7=new q(U.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),q.ISO8859_8=new q(U.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),q.ISO8859_9=new q(U.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),q.ISO8859_10=new q(U.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),q.ISO8859_11=new q(U.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),q.ISO8859_13=new q(U.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),q.ISO8859_14=new q(U.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),q.ISO8859_15=new q(U.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),q.ISO8859_16=new q(U.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),q.SJIS=new q(U.SJIS,20,"SJIS","Shift_JIS"),q.Cp1250=new q(U.Cp1250,21,"Cp1250","windows-1250"),q.Cp1251=new q(U.Cp1251,22,"Cp1251","windows-1251"),q.Cp1252=new q(U.Cp1252,23,"Cp1252","windows-1252"),q.Cp1256=new q(U.Cp1256,24,"Cp1256","windows-1256"),q.UnicodeBigUnmarked=new q(U.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),q.UTF8=new q(U.UTF8,26,"UTF8","UTF-8"),q.ASCII=new q(U.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),q.Big5=new q(U.Big5,28,"Big5"),q.GB18030=new q(U.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),q.EUC_KR=new q(U.EUC_KR,30,"EUC_KR","EUC-KR");class ne extends x{}ne.kind="UnsupportedOperationException";class he{static decode(s,o){const u=this.encodingName(o);return this.customDecoder?this.customDecoder(s,u):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(u)?this.decodeFallback(s,u):new TextDecoder(u).decode(s)}static shouldDecodeOnFallback(s){return!he.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const u=this.encodingName(o);return this.customEncoder?this.customEncoder(s,u):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof q?s:q.getCharacterSetECIByName(s)}static decodeFallback(s,o){const u=this.encodingCharacterSet(o);if(he.isDecodeFallbackSupported(u)){let f="";for(let i=0,c=s.length;i<c;i++){let m=s[i].toString(16);m.length<2&&(m="0"+m),f+="%"+m}return decodeURIComponent(f)}if(u.equals(q.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new ne(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(q.UTF8)||s.equals(q.ISO8859_1)||s.equals(q.ASCII)}static encodeFallback(s){const u=btoa(unescape(encodeURIComponent(s))).split(""),f=[];for(let i=0;i<u.length;i++)f.push(u[i].charCodeAt(0));return new Uint8Array(f)}}class me{static castAsNonUtf8Char(s,o=null){const u=o?o.getName():this.ISO88591;return he.decode(new Uint8Array([s]),u)}static guessEncoding(s,o){if(o!=null&&o.get($.CHARACTER_SET)!==void 0)return o.get($.CHARACTER_SET).toString();const u=s.length;let f=!0,i=!0,c=!0,m=0,p=0,v=0,b=0,C=0,S=0,j=0,P=0,B=0,L=0,z=0;const G=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let K=0;K<u&&(f||i||c);K++){const X=s[K]&255;c&&(m>0?X&128?m--:c=!1:X&128&&(X&64?(m++,X&32?(m++,X&16?(m++,X&8?c=!1:b++):v++):p++):c=!1)),f&&(X>127&&X<160?f=!1:X>159&&(X<192||X===215||X===247)&&z++),i&&(C>0?X<64||X===127||X>252?i=!1:C--:X===128||X===160||X>239?i=!1:X>160&&X<224?(S++,P=0,j++,j>B&&(B=j)):X>127?(C++,j=0,P++,P>L&&(L=P)):(j=0,P=0))}return c&&m>0&&(c=!1),i&&C>0&&(i=!1),c&&(G||p+v+b>0)?me.UTF8:i&&(me.ASSUME_SHIFT_JIS||B>=3||L>=3)?me.SHIFT_JIS:f&&i?B===2&&S===2||z*10>=u?me.SHIFT_JIS:me.ISO88591:f?me.ISO88591:i?me.SHIFT_JIS:c?me.UTF8:me.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let u=-1;function f(c,m,p,v,b,C){if(c==="%%")return"%";if(o[++u]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let S=b?parseInt(b.substr(1)):void 0,j;switch(C){case"s":j=o[u];break;case"c":j=o[u][0];break;case"f":j=parseFloat(o[u]).toFixed(c);break;case"p":j=parseFloat(o[u]).toPrecision(c);break;case"e":j=parseFloat(o[u]).toExponential(c);break;case"x":j=parseInt(o[u]).toString(S||16);break;case"d":j=parseFloat(parseInt(o[u],S||10).toPrecision(c)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(S);let P=parseInt(p),B=p&&p[0]+""=="0"?"0":" ";for(;j.length<P;)j=m!==void 0?j+B:B+j;return j}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(i,f)}static getBytes(s,o){return he.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}me.SHIFT_JIS=q.SJIS.getName(),me.GB2312="GB2312",me.ISO88591=q.ISO8859_1.getName(),me.EUC_JP="EUC_JP",me.UTF8=q.UTF8.getName(),me.PLATFORM_DEFAULT_ENCODING=me.UTF8,me.ASSUME_SHIFT_JIS=!1;class re{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=me.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,u){for(let f=o;o<o+u;f++)this.append(s[f]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class ae{constructor(s,o,u,f){if(this.width=s,this.height=o,this.rowSize=u,this.bits=f,o==null&&(o=s),this.height=o,s<1||o<1)throw new E("Both dimensions must be greater than 0");u==null&&(u=Math.floor((s+31)/32)),this.rowSize=u,f==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,u=s[0].length,f=new ae(u,o);for(let i=0;i<o;i++){const c=s[i];for(let m=0;m<u;m++)c[m]&&f.set(m,i)}return f}static parseFromString(s,o,u){if(s===null)throw new E("stringRepresentation cannot be null");const f=new Array(s.length);let i=0,c=0,m=-1,p=0,v=0;for(;v<s.length;)if(s.charAt(v)===`
`||s.charAt(v)==="\r"){if(i>c){if(m===-1)m=i-c;else if(i-c!==m)throw new E("row lengths do not match");c=i,p++}v++}else if(s.substring(v,v+o.length)===o)v+=o.length,f[i]=!0,i++;else if(s.substring(v,v+u.length)===u)v+=u.length,f[i]=!1,i++;else throw new E("illegal character encountered: "+s.substring(v));if(i>c){if(m===-1)m=i-c;else if(i-c!==m)throw new E("row lengths do not match");p++}const b=new ae(m,p);for(let C=0;C<i;C++)f[C]&&b.set(Math.floor(C%m),Math.floor(C/m));return b}get(s,o){const u=o*this.rowSize+Math.floor(s/32);return(this.bits[u]>>>(s&31)&1)!==0}set(s,o){const u=o*this.rowSize+Math.floor(s/32);this.bits[u]|=1<<(s&31)&4294967295}unset(s,o){const u=o*this.rowSize+Math.floor(s/32);this.bits[u]&=~(1<<(s&31)&4294967295)}flip(s,o){const u=o*this.rowSize+Math.floor(s/32);this.bits[u]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new E("input matrix dimensions do not match");const o=new M(Math.floor(this.width/32)+1),u=this.rowSize,f=this.bits;for(let i=0,c=this.height;i<c;i++){const m=i*u,p=s.getRow(i,o).getBitArray();for(let v=0;v<u;v++)f[m+v]^=p[v]}}clear(){const s=this.bits,o=s.length;for(let u=0;u<o;u++)s[u]=0}setRegion(s,o,u,f){if(o<0||s<0)throw new E("Left and top must be nonnegative");if(f<1||u<1)throw new E("Height and width must be at least 1");const i=s+u,c=o+f;if(c>this.height||i>this.width)throw new E("The region must fit inside the matrix");const m=this.rowSize,p=this.bits;for(let v=o;v<c;v++){const b=v*m;for(let C=s;C<i;C++)p[b+Math.floor(C/32)]|=1<<(C&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new M(this.width):o.clear();const u=this.rowSize,f=this.bits,i=s*u;for(let c=0;c<u;c++)o.setBulk(c*32,f[i+c]);return o}setRow(s,o){O.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let u=new M(s),f=new M(s);for(let i=0,c=Math.floor((o+1)/2);i<c;i++)u=this.getRow(i,u),f=this.getRow(o-1-i,f),u.reverse(),f.reverse(),this.setRow(i,f),this.setRow(o-1-i,u)}getEnclosingRectangle(){const s=this.width,o=this.height,u=this.rowSize,f=this.bits;let i=s,c=o,m=-1,p=-1;for(let v=0;v<o;v++)for(let b=0;b<u;b++){const C=f[v*u+b];if(C!==0){if(v<c&&(c=v),v>p&&(p=v),b*32<i){let S=0;for(;!(C<<31-S&4294967295);)S++;b*32+S<i&&(i=b*32+S)}if(b*32+31>m){let S=31;for(;!(C>>>S);)S--;b*32+S>m&&(m=b*32+S)}}}return m<i||p<c?null:Int32Array.from([i,c,m-i+1,p-c+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let u=0;for(;u<o.length&&o[u]===0;)u++;if(u===o.length)return null;const f=u/s;let i=u%s*32;const c=o[u];let m=0;for(;!(c<<31-m&4294967295);)m++;return i+=m,Int32Array.from([i,f])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let u=o.length-1;for(;u>=0&&o[u]===0;)u--;if(u<0)return null;const f=Math.floor(u/s);let i=Math.floor(u%s)*32;const c=o[u];let m=31;for(;!(c>>>m);)m--;return i+=m,Int32Array.from([i,f])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof ae))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&A.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+A.hashCode(this.bits),s}toString(s="X ",o="  ",u=`
`){return this.buildToString(s,o,u)}buildToString(s,o,u){let f=new re;for(let i=0,c=this.height;i<c;i++){for(let m=0,p=this.width;m<p;m++)f.append(this.get(m,i)?s:o);f.append(u)}return f.toString()}clone(){return new ae(this.width,this.height,this.rowSize,this.bits.slice())}}class Y extends x{static getNotFoundInstance(){return new Y}}Y.kind="NotFoundException";class te extends D{constructor(s){super(s),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(s,o){const u=this.getLuminanceSource(),f=u.getWidth();o==null||o.getSize()<f?o=new M(f):o.clear(),this.initArrays(f);const i=u.getRow(s,this.luminances),c=this.buckets;for(let p=0;p<f;p++)c[(i[p]&255)>>te.LUMINANCE_SHIFT]++;const m=te.estimateBlackPoint(c);if(f<3)for(let p=0;p<f;p++)(i[p]&255)<m&&o.set(p);else{let p=i[0]&255,v=i[1]&255;for(let b=1;b<f-1;b++){const C=i[b+1]&255;(v*4-p-C)/2<m&&o.set(b),p=v,v=C}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),u=s.getHeight(),f=new ae(o,u);this.initArrays(o);const i=this.buckets;for(let p=1;p<5;p++){const v=Math.floor(u*p/5),b=s.getRow(v,this.luminances),C=Math.floor(o*4/5);for(let S=Math.floor(o/5);S<C;S++){const j=b[S]&255;i[j>>te.LUMINANCE_SHIFT]++}}const c=te.estimateBlackPoint(i),m=s.getMatrix();for(let p=0;p<u;p++){const v=p*o;for(let b=0;b<o;b++)(m[v+b]&255)<c&&f.set(b,p)}return f}createBinarizer(s){return new te(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let u=0;u<te.LUMINANCE_BUCKETS;u++)o[u]=0}static estimateBlackPoint(s){const o=s.length;let u=0,f=0,i=0;for(let b=0;b<o;b++)s[b]>i&&(f=b,i=s[b]),s[b]>u&&(u=s[b]);let c=0,m=0;for(let b=0;b<o;b++){const C=b-f,S=s[b]*C*C;S>m&&(c=b,m=S)}if(f>c){const b=f;f=c,c=b}if(c-f<=o/16)throw new Y;let p=c-1,v=-1;for(let b=c-1;b>f;b--){const C=b-f,S=C*C*(c-b)*(u-s[b]);S>v&&(p=b,v=S)}return p<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class se extends te{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),u=s.getHeight();if(o>=se.MINIMUM_DIMENSION&&u>=se.MINIMUM_DIMENSION){const f=s.getMatrix();let i=o>>se.BLOCK_SIZE_POWER;o&se.BLOCK_SIZE_MASK&&i++;let c=u>>se.BLOCK_SIZE_POWER;u&se.BLOCK_SIZE_MASK&&c++;const m=se.calculateBlackPoints(f,i,c,o,u),p=new ae(o,u);se.calculateThresholdForBlock(f,i,c,o,u,m,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new se(s)}static calculateThresholdForBlock(s,o,u,f,i,c,m){const p=i-se.BLOCK_SIZE,v=f-se.BLOCK_SIZE;for(let b=0;b<u;b++){let C=b<<se.BLOCK_SIZE_POWER;C>p&&(C=p);const S=se.cap(b,2,u-3);for(let j=0;j<o;j++){let P=j<<se.BLOCK_SIZE_POWER;P>v&&(P=v);const B=se.cap(j,2,o-3);let L=0;for(let G=-2;G<=2;G++){const K=c[S+G];L+=K[B-2]+K[B-1]+K[B]+K[B+1]+K[B+2]}const z=L/25;se.thresholdBlock(s,P,C,z,f,m)}}}static cap(s,o,u){return s<o?o:s>u?u:s}static thresholdBlock(s,o,u,f,i,c){for(let m=0,p=u*i+o;m<se.BLOCK_SIZE;m++,p+=i)for(let v=0;v<se.BLOCK_SIZE;v++)(s[p+v]&255)<=f&&c.set(o+v,u+m)}static calculateBlackPoints(s,o,u,f,i){const c=i-se.BLOCK_SIZE,m=f-se.BLOCK_SIZE,p=new Array(u);for(let v=0;v<u;v++){p[v]=new Int32Array(o);let b=v<<se.BLOCK_SIZE_POWER;b>c&&(b=c);for(let C=0;C<o;C++){let S=C<<se.BLOCK_SIZE_POWER;S>m&&(S=m);let j=0,P=255,B=0;for(let z=0,G=b*f+S;z<se.BLOCK_SIZE;z++,G+=f){for(let K=0;K<se.BLOCK_SIZE;K++){const X=s[G+K]&255;j+=X,X<P&&(P=X),X>B&&(B=X)}if(B-P>se.MIN_DYNAMIC_RANGE)for(z++,G+=f;z<se.BLOCK_SIZE;z++,G+=f)for(let K=0;K<se.BLOCK_SIZE;K++)j+=s[G+K]&255}let L=j>>se.BLOCK_SIZE_POWER*2;if(B-P<=se.MIN_DYNAMIC_RANGE&&(L=P/2,v>0&&C>0)){const z=(p[v-1][C]+2*p[v][C-1]+p[v-1][C-1])/4;P<z&&(L=z)}p[v][C]=L}}return p}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class Q{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,u,f){throw new ne("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ne("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ne("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new re;for(let u=0;u<this.height;u++){const f=this.getRow(u,s);for(let i=0;i<this.width;i++){const c=f[i]&255;let m;c<64?m="#":c<128?m="+":c<192?m=".":m=" ",o.append(m)}o.append(`
`)}return o.toString()}}class ce extends Q{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const u=this.delegate.getRow(s,o),f=this.getWidth();for(let i=0;i<f;i++)u[i]=255-(u[i]&255);return u}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),u=new Uint8ClampedArray(o);for(let f=0;f<o;f++)u[f]=255-(s[f]&255);return u}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,u,f){return new ce(this.delegate.crop(s,o,u,f))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ce(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ce(this.delegate.rotateCounterClockwise45())}}class J extends Q{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=J.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return J.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,u){const f=new Uint8ClampedArray(o*u);for(let i=0,c=0,m=s.length;i<m;i+=4,c++){let p;if(s[i+3]===0)p=255;else{const b=s[i],C=s[i+1],S=s[i+2];p=306*b+601*C+117*S+512>>10}f[c]=p}return f}getRow(s,o){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth(),f=s*u;return o===null?o=this.buffer.slice(f,f+u):(o.length<u&&(o=new Uint8ClampedArray(u)),o.set(this.buffer.slice(f,f+u))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,u,f){return super.crop(s,o,u,f),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),u=o.getContext("2d"),f=s*J.DEGREE_TO_RADIANS,i=this.canvas.width,c=this.canvas.height,m=Math.ceil(Math.abs(Math.cos(f))*i+Math.abs(Math.sin(f))*c),p=Math.ceil(Math.abs(Math.sin(f))*i+Math.abs(Math.cos(f))*c);return o.width=m,o.height=p,u.translate(m/2,p/2),u.rotate(f),u.drawImage(this.canvas,i/-2,c/-2),this.buffer=J.makeBufferFromCanvasImageData(o),this}invert(){return new ce(this)}}J.DEGREE_TO_RADIANS=Math.PI/180;class pe{constructor(s,o,u){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=u||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ye=(globalThis||Sn||self||window||void 0)&&(globalThis||Sn||self||window||void 0).__awaiter||function(k,s,o,u){function f(i){return i instanceof o?i:new o(function(c){c(i)})}return new(o||(o=Promise))(function(i,c){function m(b){try{v(u.next(b))}catch(C){c(C)}}function p(b){try{v(u.throw(b))}catch(C){c(C)}}function v(b){b.done?i(b.value):f(b.value).then(m,p)}v((u=u.apply(k,s||[])).next())})};class We{constructor(s,o=500,u){this.reader=s,this.timeBetweenScansMillis=o,this._hints=u,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return ye(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const u of s){const f=u.kind==="video"?"videoinput":u.kind;if(f!=="videoinput")continue;const i=u.deviceId||u.id,c=u.label||`Video device ${o.length+1}`,m=u.groupId,p={deviceId:i,label:c,kind:f,groupId:m};o.push(p)}return o})}getVideoInputDevices(){return ye(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new pe(o.deviceId,o.label))})}findDeviceById(s){return ye(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(u=>u.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return ye(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return ye(this,void 0,void 0,function*(){this.reset();let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const f={video:u};return yield this.decodeOnceFromConstraints(f,o)})}decodeOnceFromConstraints(s,o){return ye(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(u,o)})}decodeOnceFromStream(s,o){return ye(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(u)})}decodeFromInputVideoDeviceContinuously(s,o,u){return ye(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,u)})}decodeFromVideoDevice(s,o,u){return ye(this,void 0,void 0,function*(){let f;s?f={deviceId:{exact:s}}:f={facingMode:"environment"};const i={video:f};return yield this.decodeFromConstraints(i,o,u)})}decodeFromConstraints(s,o,u){return ye(this,void 0,void 0,function*(){const f=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(f,o,u)})}decodeFromStream(s,o,u){return ye(this,void 0,void 0,function*(){this.reset();const f=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(f,u)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return ye(this,void 0,void 0,function*(){const u=this.prepareVideoElement(o);return this.addVideoSource(u,s),this.videoElement=u,this.stream=s,yield this.playVideoOnLoadAsync(u),u})}playVideoOnLoadAsync(s){return new Promise((o,u)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return ye(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const u=document.getElementById(s);if(!u)throw new w(`element with id '${s}' not found`);if(u.nodeName.toLowerCase()!==o.toLowerCase())throw new w(`element with id '${s}' must be an ${o} element`);return u}decodeFromImage(s,o){if(!s&&!o)throw new w("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new w("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,u){if(s===void 0&&o===void 0)throw new w("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,u):this.decodeFromVideoElementContinuously(s,u)}decodeFromImageElement(s){if(!s)throw new w("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let u;return this.isImageLoaded(o)?u=this.decodeOnce(o,!1,!0):u=this._decodeOnLoadImage(o),u}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const u=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(u,o)}_decodeFromVideoElementSetup(s){if(!s)throw new w("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const u=this._decodeOnLoadImage(o);return o.src=s,u}decodeFromVideoUrl(s){if(!s)throw new w("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),u=this.decodeFromVideoElement(o);return o.src=s,u}decodeFromVideoUrlContinuously(s,o){if(!s)throw new w("An URL must be provided.");this.reset();const u=this.prepareVideoElement(),f=this.decodeFromVideoElementContinuously(u,o);return u.src=s,f}_decodeOnLoadImage(s){return new Promise((o,u)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,u),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return ye(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return ye(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,u=!0){this._stopAsyncDecode=!1;const f=(i,c)=>{if(this._stopAsyncDecode){c(new Y("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const m=this.decode(s);i(m)}catch(m){const p=o&&m instanceof Y,b=(m instanceof I||m instanceof F)&&u;if(p||b)return setTimeout(f,this._timeBetweenDecodingAttempts,i,c);c(m)}};return new Promise((i,c)=>f(i,c))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const u=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const f=this.decode(s);o(f,null),setTimeout(u,this.timeBetweenScansMillis)}catch(f){o(null,f);const i=f instanceof I||f instanceof F,c=f instanceof Y;(i||c)&&setTimeout(u,this._timeBetweenDecodingAttempts)}};u()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,u){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,u=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),u||(u=this.captureCanvasContext),u.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),u=new J(o),f=new se(u);return new N(f)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const u=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=u}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let u,f;return typeof s<"u"&&(s instanceof HTMLVideoElement?(u=s.videoWidth,f=s.videoHeight):s instanceof HTMLImageElement&&(u=s.naturalWidth||s.width,f=s.naturalHeight||s.height)),o.style.width=u+"px",o.style.height=f+"px",o.width=u,o.height=f,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class $e{constructor(s,o,u=o==null?0:8*o.length,f,i,c=O.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=u,this.resultPoints=f,this.format=i,this.timestamp=c,this.text=s,this.rawBytes=o,u==null?this.numBits=o==null?0:8*o.length:this.numBits=u,this.resultPoints=f,this.format=i,this.resultMetadata=null,c==null?this.timestamp=O.currentTimeMillis():this.timestamp=c}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const u=new Array(o.length+s.length);O.arraycopy(o,0,u,0,o.length),O.arraycopy(s,0,u,o.length,s.length),this.resultPoints=u}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ct;(function(k){k[k.AZTEC=0]="AZTEC",k[k.CODABAR=1]="CODABAR",k[k.CODE_39=2]="CODE_39",k[k.CODE_93=3]="CODE_93",k[k.CODE_128=4]="CODE_128",k[k.DATA_MATRIX=5]="DATA_MATRIX",k[k.EAN_8=6]="EAN_8",k[k.EAN_13=7]="EAN_13",k[k.ITF=8]="ITF",k[k.MAXICODE=9]="MAXICODE",k[k.PDF_417=10]="PDF_417",k[k.QR_CODE=11]="QR_CODE",k[k.RSS_14=12]="RSS_14",k[k.RSS_EXPANDED=13]="RSS_EXPANDED",k[k.UPC_A=14]="UPC_A",k[k.UPC_E=15]="UPC_E",k[k.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ct||(Ct={}));var _e=Ct,It;(function(k){k[k.OTHER=0]="OTHER",k[k.ORIENTATION=1]="ORIENTATION",k[k.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",k[k.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",k[k.ISSUE_NUMBER=4]="ISSUE_NUMBER",k[k.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",k[k.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",k[k.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",k[k.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",k[k.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",k[k.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(It||(It={}));var Je=It;class Be{constructor(s,o,u,f,i=-1,c=-1){this.rawBytes=s,this.text=o,this.byteSegments=u,this.ecLevel=f,this.structuredAppendSequenceNumber=i,this.structuredAppendParity=c,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class be{exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class Oe{constructor(s,o){if(o.length===0)throw new E;this.field=s;const u=o.length;if(u>1&&o[0]===0){let f=1;for(;f<u&&o[f]===0;)f++;f===u?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(u-f),O.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let u;if(s===1){u=0;for(let c=0,m=o.length;c!==m;c++){const p=o[c];u=be.addOrSubtract(u,p)}return u}u=o[0];const f=o.length,i=this.field;for(let c=1;c<f;c++)u=be.addOrSubtract(i.multiply(s,u),o[c]);return u}addOrSubtract(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,u=s.coefficients;if(o.length>u.length){const c=o;o=u,u=c}let f=new Int32Array(u.length);const i=u.length-o.length;O.arraycopy(u,0,f,0,i);for(let c=i;c<u.length;c++)f[c]=be.addOrSubtract(o[c-i],u[c]);return new Oe(this.field,f)}multiply(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,u=o.length,f=s.coefficients,i=f.length,c=new Int32Array(u+i-1),m=this.field;for(let p=0;p<u;p++){const v=o[p];for(let b=0;b<i;b++)c[p+b]=be.addOrSubtract(c[p+b],m.multiply(v,f[b]))}return new Oe(m,c)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,u=this.field,f=new Int32Array(o),i=this.coefficients;for(let c=0;c<o;c++)f[c]=u.multiply(i[c],s);return new Oe(u,f)}multiplyByMonomial(s,o){if(s<0)throw new E;if(o===0)return this.field.getZero();const u=this.coefficients,f=u.length,i=new Int32Array(f+s),c=this.field;for(let m=0;m<f;m++)i[m]=c.multiply(u[m],o);return new Oe(c,i)}divide(s){if(!this.field.equals(s.field))throw new E("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new E("Divide by 0");const o=this.field;let u=o.getZero(),f=this;const i=s.getCoefficient(s.getDegree()),c=o.inverse(i);for(;f.getDegree()>=s.getDegree()&&!f.isZero();){const m=f.getDegree()-s.getDegree(),p=o.multiply(f.getCoefficient(f.getDegree()),c),v=s.multiplyByMonomial(m,p),b=o.buildMonomial(m,p);u=u.addOrSubtract(b),f=f.addOrSubtract(v)}return[u,f]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let u=this.getCoefficient(o);if(u!==0){if(u<0?(s+=" - ",u=-u):s.length>0&&(s+=" + "),o===0||u!==1){const f=this.field.log(u);f===0?s+="1":f===1?s+="a":(s+="a^",s+=f)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class Fe extends x{}Fe.kind="ArithmeticException";class Ve extends be{constructor(s,o,u){super(),this.primitive=s,this.size=o,this.generatorBase=u;const f=new Int32Array(o);let i=1;for(let m=0;m<o;m++)f[m]=i,i*=2,i>=o&&(i^=s,i&=o-1);this.expTable=f;const c=new Int32Array(o);for(let m=0;m<o-1;m++)c[f[m]]=m;this.logTable=c,this.zero=new Oe(this,Int32Array.from([0])),this.one=new Oe(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new E;if(o===0)return this.zero;const u=new Int32Array(s+1);return u[0]=o,new Oe(this,u)}inverse(s){if(s===0)throw new Fe;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+_.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}Ve.AZTEC_DATA_12=new Ve(4201,4096,1),Ve.AZTEC_DATA_10=new Ve(1033,1024,1),Ve.AZTEC_DATA_6=new Ve(67,64,1),Ve.AZTEC_PARAM=new Ve(19,16,1),Ve.QR_CODE_FIELD_256=new Ve(285,256,0),Ve.DATA_MATRIX_FIELD_256=new Ve(301,256,1),Ve.AZTEC_DATA_8=Ve.DATA_MATRIX_FIELD_256,Ve.MAXICODE_FIELD_64=Ve.AZTEC_DATA_6;class At extends x{}At.kind="ReedSolomonException";class jt extends x{}jt.kind="IllegalStateException";class ns{constructor(s){this.field=s}decode(s,o){const u=this.field,f=new Oe(u,s),i=new Int32Array(o);let c=!0;for(let j=0;j<o;j++){const P=f.evaluateAt(u.exp(j+u.getGeneratorBase()));i[i.length-1-j]=P,P!==0&&(c=!1)}if(c)return;const m=new Oe(u,i),p=this.runEuclideanAlgorithm(u.buildMonomial(o,1),m,o),v=p[0],b=p[1],C=this.findErrorLocations(v),S=this.findErrorMagnitudes(b,C);for(let j=0;j<C.length;j++){const P=s.length-1-u.log(C[j]);if(P<0)throw new At("Bad error location");s[P]=Ve.addOrSubtract(s[P],S[j])}}runEuclideanAlgorithm(s,o,u){if(s.getDegree()<o.getDegree()){const j=s;s=o,o=j}const f=this.field;let i=s,c=o,m=f.getZero(),p=f.getOne();for(;c.getDegree()>=(u/2|0);){let j=i,P=m;if(i=c,m=p,i.isZero())throw new At("r_{i-1} was zero");c=j;let B=f.getZero();const L=i.getCoefficient(i.getDegree()),z=f.inverse(L);for(;c.getDegree()>=i.getDegree()&&!c.isZero();){const G=c.getDegree()-i.getDegree(),K=f.multiply(c.getCoefficient(c.getDegree()),z);B=B.addOrSubtract(f.buildMonomial(G,K)),c=c.addOrSubtract(i.multiplyByMonomial(G,K))}if(p=B.multiply(m).addOrSubtract(P),c.getDegree()>=i.getDegree())throw new jt("Division algorithm failed to reduce polynomial?")}const v=p.getCoefficient(0);if(v===0)throw new At("sigmaTilde(0) was zero");const b=f.inverse(v),C=p.multiplyScalar(b),S=c.multiplyScalar(b);return[C,S]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const u=new Int32Array(o);let f=0;const i=this.field;for(let c=1;c<i.getSize()&&f<o;c++)s.evaluateAt(c)===0&&(u[f]=i.inverse(c),f++);if(f!==o)throw new At("Error locator degree does not match number of roots");return u}findErrorMagnitudes(s,o){const u=o.length,f=new Int32Array(u),i=this.field;for(let c=0;c<u;c++){const m=i.inverse(o[c]);let p=1;for(let v=0;v<u;v++)if(c!==v){const b=i.multiply(o[v],m),C=b&1?b&-2:b|1;p=i.multiply(p,C)}f[c]=i.multiply(s.evaluateAt(m),i.inverse(p)),i.getGeneratorBase()!==0&&(f[c]=i.multiply(f[c],m))}return f}}var $t;(function(k){k[k.UPPER=0]="UPPER",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.DIGIT=3]="DIGIT",k[k.PUNCT=4]="PUNCT",k[k.BINARY=5]="BINARY"})($t||($t={}));class Tt{decode(s){this.ddata=s;let o=s.getBits(),u=this.extractBits(o),f=this.correctBits(u),i=Tt.convertBoolArrayToByteArray(f),c=Tt.getEncodedData(f),m=new Be(i,c,null,null);return m.setNumBits(f.length),m}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,u=$t.UPPER,f=$t.UPPER,i="",c=0;for(;c<o;)if(f===$t.BINARY){if(o-c<5)break;let m=Tt.readCode(s,c,5);if(c+=5,m===0){if(o-c<11)break;m=Tt.readCode(s,c,11)+31,c+=11}for(let p=0;p<m;p++){if(o-c<8){c=o;break}const v=Tt.readCode(s,c,8);i+=me.castAsNonUtf8Char(v),c+=8}f=u}else{let m=f===$t.DIGIT?4:5;if(o-c<m)break;let p=Tt.readCode(s,c,m);c+=m;let v=Tt.getCharacter(f,p);v.startsWith("CTRL_")?(u=f,f=Tt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(u=f)):(i+=v,f=u)}return i}static getTable(s){switch(s){case"L":return $t.LOWER;case"P":return $t.PUNCT;case"M":return $t.MIXED;case"D":return $t.DIGIT;case"B":return $t.BINARY;case"U":default:return $t.UPPER}}static getCharacter(s,o){switch(s){case $t.UPPER:return Tt.UPPER_TABLE[o];case $t.LOWER:return Tt.LOWER_TABLE[o];case $t.MIXED:return Tt.MIXED_TABLE[o];case $t.PUNCT:return Tt.PUNCT_TABLE[o];case $t.DIGIT:return Tt.DIGIT_TABLE[o];default:throw new jt("Bad table")}}correctBits(s){let o,u;this.ddata.getNbLayers()<=2?(u=6,o=Ve.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(u=8,o=Ve.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(u=10,o=Ve.AZTEC_DATA_10):(u=12,o=Ve.AZTEC_DATA_12);let f=this.ddata.getNbDatablocks(),i=s.length/u;if(i<f)throw new F;let c=s.length%u,m=new Int32Array(i);for(let S=0;S<i;S++,c+=u)m[S]=Tt.readCode(s,c,u);try{new ns(o).decode(m,i-f)}catch(S){throw new F(S)}let p=(1<<u)-1,v=0;for(let S=0;S<f;S++){let j=m[S];if(j===0||j===p)throw new F;(j===1||j===p-1)&&v++}let b=new Array(f*u-v),C=0;for(let S=0;S<f;S++){let j=m[S];if(j===1||j===p-1)b.fill(j>1,C,C+u-1),C+=u-1;else for(let P=u-1;P>=0;--P)b[C++]=(j&1<<P)!==0}return b}extractBits(s){let o=this.ddata.isCompact(),u=this.ddata.getNbLayers(),f=(o?11:14)+u*4,i=new Int32Array(f),c=new Array(this.totalBitsInLayer(u,o));if(o)for(let m=0;m<i.length;m++)i[m]=m;else{let m=f+1+2*_.truncDivision(_.truncDivision(f,2)-1,15),p=f/2,v=_.truncDivision(m,2);for(let b=0;b<p;b++){let C=b+_.truncDivision(b,15);i[p-b-1]=v-C-1,i[p+b]=v+C+1}}for(let m=0,p=0;m<u;m++){let v=(u-m)*4+(o?9:12),b=m*2,C=f-1-b;for(let S=0;S<v;S++){let j=S*2;for(let P=0;P<2;P++)c[p+j+P]=s.get(i[b+P],i[b+S]),c[p+2*v+j+P]=s.get(i[b+S],i[C-P]),c[p+4*v+j+P]=s.get(i[C-P],i[C-S]),c[p+6*v+j+P]=s.get(i[C-S],i[b+P])}p+=v*8}return c}static readCode(s,o,u){let f=0;for(let i=o;i<o+u;i++)f<<=1,s[i]&&(f|=1);return f}static readByte(s,o){let u=s.length-o;return u>=8?Tt.readCode(s,o,8):Tt.readCode(s,o,u)<<8-u}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let u=0;u<o.length;u++)o[u]=Tt.readByte(s,8*u);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}Tt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Tt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Tt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Tt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Tt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class st{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,u,f){const i=s-u,c=o-f;return Math.sqrt(i*i+c*c)}static sum(s){let o=0;for(let u=0,f=s.length;u!==f;u++){const i=s[u];o+=i}return o}}class rs{static floatToIntBits(s){return s}}rs.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Me{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof Me){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*rs.floatToIntBits(this.x)+rs.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),u=this.distance(s[1],s[2]),f=this.distance(s[0],s[2]);let i,c,m;if(u>=o&&u>=f?(c=s[0],i=s[1],m=s[2]):f>=u&&f>=o?(c=s[1],i=s[0],m=s[2]):(c=s[2],i=s[0],m=s[1]),this.crossProductZ(i,c,m)<0){const p=i;i=m,m=p}s[0]=i,s[1]=c,s[2]=m}static distance(s,o){return st.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,u){const f=o.x,i=o.y;return(u.x-f)*(s.y-i)-(u.y-i)*(s.x-f)}}class _s{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class As extends _s{constructor(s,o,u,f,i){super(s,o),this.compact=u,this.nbDatablocks=f,this.nbLayers=i}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class or{constructor(s,o,u,f){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=or.INIT_SIZE),u==null&&(u=s.getWidth()/2|0),f==null&&(f=s.getHeight()/2|0);const i=o/2|0;if(this.leftInit=u-i,this.rightInit=u+i,this.upInit=f-i,this.downInit=f+i,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Y}detect(){let s=this.leftInit,o=this.rightInit,u=this.upInit,f=this.downInit,i=!1,c=!0,m=!1,p=!1,v=!1,b=!1,C=!1;const S=this.width,j=this.height;for(;c;){c=!1;let P=!0;for(;(P||!p)&&o<S;)P=this.containsBlackPoint(u,f,o,!1),P?(o++,c=!0,p=!0):p||o++;if(o>=S){i=!0;break}let B=!0;for(;(B||!v)&&f<j;)B=this.containsBlackPoint(s,o,f,!0),B?(f++,c=!0,v=!0):v||f++;if(f>=j){i=!0;break}let L=!0;for(;(L||!b)&&s>=0;)L=this.containsBlackPoint(u,f,s,!1),L?(s--,c=!0,b=!0):b||s--;if(s<0){i=!0;break}let z=!0;for(;(z||!C)&&u>=0;)z=this.containsBlackPoint(s,o,u,!0),z?(u--,c=!0,C=!0):C||u--;if(u<0){i=!0;break}c&&(m=!0)}if(!i&&m){const P=o-s;let B=null;for(let K=1;B===null&&K<P;K++)B=this.getBlackPointOnSegment(s,f-K,s+K,f);if(B==null)throw new Y;let L=null;for(let K=1;L===null&&K<P;K++)L=this.getBlackPointOnSegment(s,u+K,s+K,u);if(L==null)throw new Y;let z=null;for(let K=1;z===null&&K<P;K++)z=this.getBlackPointOnSegment(o,u+K,o-K,u);if(z==null)throw new Y;let G=null;for(let K=1;G===null&&K<P;K++)G=this.getBlackPointOnSegment(o,f-K,o-K,f);if(G==null)throw new Y;return this.centerEdges(G,B,z,L)}else throw new Y}getBlackPointOnSegment(s,o,u,f){const i=st.round(st.distance(s,o,u,f)),c=(u-s)/i,m=(f-o)/i,p=this.image;for(let v=0;v<i;v++){const b=st.round(s+v*c),C=st.round(o+v*m);if(p.get(b,C))return new Me(b,C)}return null}centerEdges(s,o,u,f){const i=s.getX(),c=s.getY(),m=o.getX(),p=o.getY(),v=u.getX(),b=u.getY(),C=f.getX(),S=f.getY(),j=or.CORR;return i<this.width/2?[new Me(C-j,S+j),new Me(m+j,p+j),new Me(v-j,b-j),new Me(i+j,c-j)]:[new Me(C+j,S+j),new Me(m+j,p-j),new Me(v-j,b+j),new Me(i-j,c-j)]}containsBlackPoint(s,o,u,f){const i=this.image;if(f){for(let c=s;c<=o;c++)if(i.get(c,u))return!0}else for(let c=s;c<=o;c++)if(i.get(u,c))return!0;return!1}}or.INIT_SIZE=10,or.CORR=1;class fe{static checkAndNudgePoints(s,o){const u=s.getWidth(),f=s.getHeight();let i=!0;for(let c=0;c<o.length&&i;c+=2){const m=Math.floor(o[c]),p=Math.floor(o[c+1]);if(m<-1||m>u||p<-1||p>f)throw new Y;i=!1,m===-1?(o[c]=0,i=!0):m===u&&(o[c]=u-1,i=!0),p===-1?(o[c+1]=0,i=!0):p===f&&(o[c+1]=f-1,i=!0)}i=!0;for(let c=o.length-2;c>=0&&i;c-=2){const m=Math.floor(o[c]),p=Math.floor(o[c+1]);if(m<-1||m>u||p<-1||p>f)throw new Y;i=!1,m===-1?(o[c]=0,i=!0):m===u&&(o[c]=u-1,i=!0),p===-1?(o[c+1]=0,i=!0):p===f&&(o[c+1]=f-1,i=!0)}}}class Te{constructor(s,o,u,f,i,c,m,p,v){this.a11=s,this.a21=o,this.a31=u,this.a12=f,this.a22=i,this.a32=c,this.a13=m,this.a23=p,this.a33=v}static quadrilateralToQuadrilateral(s,o,u,f,i,c,m,p,v,b,C,S,j,P,B,L){const z=Te.quadrilateralToSquare(s,o,u,f,i,c,m,p);return Te.squareToQuadrilateral(v,b,C,S,j,P,B,L).times(z)}transformPoints(s){const o=s.length,u=this.a11,f=this.a12,i=this.a13,c=this.a21,m=this.a22,p=this.a23,v=this.a31,b=this.a32,C=this.a33;for(let S=0;S<o;S+=2){const j=s[S],P=s[S+1],B=i*j+p*P+C;s[S]=(u*j+c*P+v)/B,s[S+1]=(f*j+m*P+b)/B}}transformPointsWithValues(s,o){const u=this.a11,f=this.a12,i=this.a13,c=this.a21,m=this.a22,p=this.a23,v=this.a31,b=this.a32,C=this.a33,S=s.length;for(let j=0;j<S;j++){const P=s[j],B=o[j],L=i*P+p*B+C;s[j]=(u*P+c*B+v)/L,o[j]=(f*P+m*B+b)/L}}static squareToQuadrilateral(s,o,u,f,i,c,m,p){const v=s-u+i-m,b=o-f+c-p;if(v===0&&b===0)return new Te(u-s,i-u,s,f-o,c-f,o,0,0,1);{const C=u-i,S=m-i,j=f-c,P=p-c,B=C*P-S*j,L=(v*P-S*b)/B,z=(C*b-v*j)/B;return new Te(u-s+L*u,m-s+z*m,s,f-o+L*f,p-o+z*p,o,L,z,1)}}static quadrilateralToSquare(s,o,u,f,i,c,m,p){return Te.squareToQuadrilateral(s,o,u,f,i,c,m,p).buildAdjoint()}buildAdjoint(){return new Te(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new Te(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class pt extends fe{sampleGrid(s,o,u,f,i,c,m,p,v,b,C,S,j,P,B,L,z,G,K){const X=Te.quadrilateralToQuadrilateral(f,i,c,m,p,v,b,C,S,j,P,B,L,z,G,K);return this.sampleGridWithTransform(s,o,u,X)}sampleGridWithTransform(s,o,u,f){if(o<=0||u<=0)throw new Y;const i=new ae(o,u),c=new Float32Array(2*o);for(let m=0;m<u;m++){const p=c.length,v=m+.5;for(let b=0;b<p;b+=2)c[b]=b/2+.5,c[b+1]=v;f.transformPoints(c),fe.checkAndNudgePoints(s,c);try{for(let b=0;b<p;b+=2)s.get(Math.floor(c[b]),Math.floor(c[b+1]))&&i.set(b/2,m)}catch{throw new Y}}return i}}class Xe{static setGridSampler(s){Xe.gridSampler=s}static getInstance(){return Xe.gridSampler}}Xe.gridSampler=new pt;class ct{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new Me(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Ks{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),u=this.getBullsEyeCorners(o);if(s){let c=u[0];u[0]=u[2],u[2]=c}this.extractParameters(u);let f=this.sampleGrid(this.image,u[this.shift%4],u[(this.shift+1)%4],u[(this.shift+2)%4],u[(this.shift+3)%4]),i=this.getMatrixCornerPoints(u);return new As(f,i,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new Y;let o=2*this.nbCenterLayers,u=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(u,o);let f=0;for(let c=0;c<4;c++){let m=u[(this.shift+c)%4];this.compact?(f<<=7,f+=m>>1&127):(f<<=10,f+=(m>>2&992)+(m>>1&31))}let i=this.getCorrectedParameterData(f,this.compact);this.compact?(this.nbLayers=(i>>6)+1,this.nbDataBlocks=(i&63)+1):(this.nbLayers=(i>>11)+1,this.nbDataBlocks=(i&2047)+1)}getRotation(s,o){let u=0;s.forEach((f,i,c)=>{let m=(f>>o-2<<1)+(f&1);u=(u<<3)+m}),u=((u&1)<<11)+(u>>1);for(let f=0;f<4;f++)if(_.bitCount(u^this.EXPECTED_CORNER_BITS[f])<=2)return f;throw new Y}getCorrectedParameterData(s,o){let u,f;o?(u=7,f=2):(u=10,f=4);let i=u-f,c=new Int32Array(u);for(let p=u-1;p>=0;--p)c[p]=s&15,s>>=4;try{new ns(Ve.AZTEC_PARAM).decode(c,i)}catch{throw new Y}let m=0;for(let p=0;p<f;p++)m=(m<<4)+c[p];return m}getBullsEyeCorners(s){let o=s,u=s,f=s,i=s,c=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let C=this.getFirstDifferent(o,c,1,-1),S=this.getFirstDifferent(u,c,1,1),j=this.getFirstDifferent(f,c,-1,1),P=this.getFirstDifferent(i,c,-1,-1);if(this.nbCenterLayers>2){let B=this.distancePoint(P,C)*this.nbCenterLayers/(this.distancePoint(i,o)*(this.nbCenterLayers+2));if(B<.75||B>1.25||!this.isWhiteOrBlackRectangle(C,S,j,P))break}o=C,u=S,f=j,i=P,c=!c}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Y;this.compact=this.nbCenterLayers===5;let m=new Me(o.getX()+.5,o.getY()-.5),p=new Me(u.getX()+.5,u.getY()+.5),v=new Me(f.getX()-.5,f.getY()+.5),b=new Me(i.getX()-.5,i.getY()-.5);return this.expandSquare([m,p,v,b],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,u,f;try{let m=new or(this.image).detect();s=m[0],o=m[1],u=m[2],f=m[3]}catch{let p=this.image.getWidth()/2,v=this.image.getHeight()/2;s=this.getFirstDifferent(new ct(p+7,v-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new ct(p+7,v+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new ct(p-7,v+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new ct(p-7,v-7),!1,-1,-1).toResultPoint()}let i=st.round((s.getX()+f.getX()+o.getX()+u.getX())/4),c=st.round((s.getY()+f.getY()+o.getY()+u.getY())/4);try{let m=new or(this.image,15,i,c).detect();s=m[0],o=m[1],u=m[2],f=m[3]}catch{s=this.getFirstDifferent(new ct(i+7,c-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new ct(i+7,c+7),!1,1,1).toResultPoint(),u=this.getFirstDifferent(new ct(i-7,c+7),!1,-1,1).toResultPoint(),f=this.getFirstDifferent(new ct(i-7,c-7),!1,-1,-1).toResultPoint()}return i=st.round((s.getX()+f.getX()+o.getX()+u.getX())/4),c=st.round((s.getY()+f.getY()+o.getY()+u.getY())/4),new ct(i,c)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,u,f,i){let c=Xe.getInstance(),m=this.getDimension(),p=m/2-this.nbCenterLayers,v=m/2+this.nbCenterLayers;return c.sampleGrid(s,m,m,p,p,v,p,v,v,p,v,o.getX(),o.getY(),u.getX(),u.getY(),f.getX(),f.getY(),i.getX(),i.getY())}sampleLine(s,o,u){let f=0,i=this.distanceResultPoint(s,o),c=i/u,m=s.getX(),p=s.getY(),v=c*(o.getX()-s.getX())/i,b=c*(o.getY()-s.getY())/i;for(let C=0;C<u;C++)this.image.get(st.round(m+C*v),st.round(p+C*b))&&(f|=1<<u-C-1);return f}isWhiteOrBlackRectangle(s,o,u,f){let i=3;s=new ct(s.getX()-i,s.getY()+i),o=new ct(o.getX()-i,o.getY()-i),u=new ct(u.getX()+i,u.getY()-i),f=new ct(f.getX()+i,f.getY()+i);let c=this.getColor(f,s);if(c===0)return!1;let m=this.getColor(s,o);return m!==c||(m=this.getColor(o,u),m!==c)?!1:(m=this.getColor(u,f),m===c)}getColor(s,o){let u=this.distancePoint(s,o),f=(o.getX()-s.getX())/u,i=(o.getY()-s.getY())/u,c=0,m=s.getX(),p=s.getY(),v=this.image.get(s.getX(),s.getY()),b=Math.ceil(u);for(let S=0;S<b;S++)m+=f,p+=i,this.image.get(st.round(m),st.round(p))!==v&&c++;let C=c/u;return C>.1&&C<.9?0:C<=.1===v?1:-1}getFirstDifferent(s,o,u,f){let i=s.getX()+u,c=s.getY()+f;for(;this.isValid(i,c)&&this.image.get(i,c)===o;)i+=u,c+=f;for(i-=u,c-=f;this.isValid(i,c)&&this.image.get(i,c)===o;)i+=u;for(i-=u;this.isValid(i,c)&&this.image.get(i,c)===o;)c+=f;return c-=f,new ct(i,c)}expandSquare(s,o,u){let f=u/(2*o),i=s[0].getX()-s[2].getX(),c=s[0].getY()-s[2].getY(),m=(s[0].getX()+s[2].getX())/2,p=(s[0].getY()+s[2].getY())/2,v=new Me(m+f*i,p+f*c),b=new Me(m-f*i,p-f*c);i=s[1].getX()-s[3].getX(),c=s[1].getY()-s[3].getY(),m=(s[1].getX()+s[3].getX())/2,p=(s[1].getY()+s[3].getY())/2;let C=new Me(m+f*i,p+f*c),S=new Me(m-f*i,p-f*c);return[v,C,b,S]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=st.round(s.getX()),u=st.round(s.getY());return this.isValid(o,u)}distancePoint(s,o){return st.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return st.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(_.truncDivision(this.nbLayers-4,8)+1)+15}}class Bn{decode(s,o=null){let u=null,f=new Ks(s.getBlackMatrix()),i=null,c=null;try{let b=f.detectMirror(!1);i=b.getPoints(),this.reportFoundResultPoints(o,i),c=new Tt().decode(b)}catch(b){u=b}if(c==null)try{let b=f.detectMirror(!0);i=b.getPoints(),this.reportFoundResultPoints(o,i),c=new Tt().decode(b)}catch(b){throw u??b}let m=new $e(c.getText(),c.getRawBytes(),c.getNumBits(),i,_e.AZTEC,O.currentTimeMillis()),p=c.getByteSegments();p!=null&&m.putMetadata(Je.BYTE_SEGMENTS,p);let v=c.getECLevel();return v!=null&&m.putMetadata(Je.ERROR_CORRECTION_LEVEL,v),m}reportFoundResultPoints(s,o){if(s!=null){let u=s.get($.NEED_RESULT_POINT_CALLBACK);u!=null&&o.forEach((f,i,c)=>{u.foundPossibleResultPoint(f)})}}reset(){}}class Br extends We{constructor(s=500){super(new Bn,s)}}class Ot{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get($.TRY_HARDER)===!0&&s.isRotateSupported()){const i=s.rotateCounterClockwise(),c=this.doDecode(i,o),m=c.getResultMetadata();let p=270;m!==null&&m.get(Je.ORIENTATION)===!0&&(p=p+m.get(Je.ORIENTATION)%360),c.putMetadata(Je.ORIENTATION,p);const v=c.getResultPoints();if(v!==null){const b=i.getHeight();for(let C=0;C<v.length;C++)v[C]=new Me(b-v[C].getY()-1,v[C].getX())}return c}else throw new Y}}reset(){}doDecode(s,o){const u=s.getWidth(),f=s.getHeight();let i=new M(u);const c=o&&o.get($.TRY_HARDER)===!0,m=Math.max(1,f>>(c?8:5));let p;c?p=f:p=15;const v=Math.trunc(f/2);for(let b=0;b<p;b++){const C=Math.trunc((b+1)/2),S=(b&1)===0,j=v+m*(S?C:-C);if(j<0||j>=f)break;try{i=s.getBlackRow(j,i)}catch{continue}for(let P=0;P<2;P++){if(P===1&&(i.reverse(),o&&o.get($.NEED_RESULT_POINT_CALLBACK)===!0)){const B=new Map;o.forEach((L,z)=>B.set(z,L)),B.delete($.NEED_RESULT_POINT_CALLBACK),o=B}try{const B=this.decodeRow(j,i,o);if(P===1){B.putMetadata(Je.ORIENTATION,180);const L=B.getResultPoints();L!==null&&(L[0]=new Me(u-L[0].getX()-1,L[0].getY()),L[1]=new Me(u-L[1].getX()-1,L[1].getY()))}return B}catch{}}}throw new Y}static recordPattern(s,o,u){const f=u.length;for(let v=0;v<f;v++)u[v]=0;const i=s.getSize();if(o>=i)throw new Y;let c=!s.get(o),m=0,p=o;for(;p<i;){if(s.get(p)!==c)u[m]++;else{if(++m===f)break;u[m]=1,c=!c}p++}if(!(m===f||m===f-1&&p===i))throw new Y}static recordPatternInReverse(s,o,u){let f=u.length,i=s.get(o);for(;o>0&&f>=0;)s.get(--o)!==i&&(f--,i=!i);if(f>=0)throw new Y;Ot.recordPattern(s,o+1,u)}static patternMatchVariance(s,o,u){const f=s.length;let i=0,c=0;for(let v=0;v<f;v++)i+=s[v],c+=o[v];if(i<c)return Number.POSITIVE_INFINITY;const m=i/c;u*=m;let p=0;for(let v=0;v<f;v++){const b=s[v],C=o[v]*m,S=b>C?b-C:C-b;if(S>u)return Number.POSITIVE_INFINITY;p+=S}return p/i}}class Ie extends Ot{static findStartPattern(s){const o=s.getSize(),u=s.getNextSet(0);let f=0,i=Int32Array.from([0,0,0,0,0,0]),c=u,m=!1;const p=6;for(let v=u;v<o;v++)if(s.get(v)!==m)i[f]++;else{if(f===p-1){let b=Ie.MAX_AVG_VARIANCE,C=-1;for(let S=Ie.CODE_START_A;S<=Ie.CODE_START_C;S++){const j=Ot.patternMatchVariance(i,Ie.CODE_PATTERNS[S],Ie.MAX_INDIVIDUAL_VARIANCE);j<b&&(b=j,C=S)}if(C>=0&&s.isRange(Math.max(0,c-(v-c)/2),c,!1))return Int32Array.from([c,v,C]);c+=i[0]+i[1],i=i.slice(2,i.length-1),i[f-1]=0,i[f]=0,f--}else f++;i[f]=1,m=!m}throw new Y}static decodeCode(s,o,u){Ot.recordPattern(s,u,o);let f=Ie.MAX_AVG_VARIANCE,i=-1;for(let c=0;c<Ie.CODE_PATTERNS.length;c++){const m=Ie.CODE_PATTERNS[c],p=this.patternMatchVariance(o,m,Ie.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,i=c)}if(i>=0)return i;throw new Y}decodeRow(s,o,u){const f=u&&u.get($.ASSUME_GS1)===!0,i=Ie.findStartPattern(o),c=i[2];let m=0;const p=new Uint8Array(20);p[m++]=c;let v;switch(c){case Ie.CODE_START_A:v=Ie.CODE_CODE_A;break;case Ie.CODE_START_B:v=Ie.CODE_CODE_B;break;case Ie.CODE_START_C:v=Ie.CODE_CODE_C;break;default:throw new F}let b=!1,C=!1,S="",j=i[0],P=i[1];const B=Int32Array.from([0,0,0,0,0,0]);let L=0,z=0,G=c,K=0,X=!0,Z=!1,ee=!1;for(;!b;){const je=C;switch(C=!1,L=z,z=Ie.decodeCode(o,B,P),p[m++]=z,z!==Ie.CODE_STOP&&(X=!0),z!==Ie.CODE_STOP&&(K++,G+=K*z),j=P,P+=B.reduce((ke,Pe)=>ke+Pe,0),z){case Ie.CODE_START_A:case Ie.CODE_START_B:case Ie.CODE_START_C:throw new F}switch(v){case Ie.CODE_CODE_A:if(z<64)ee===Z?S+=String.fromCharCode(32+z):S+=String.fromCharCode(32+z+128),ee=!1;else if(z<96)ee===Z?S+=String.fromCharCode(z-64):S+=String.fromCharCode(z+64),ee=!1;else switch(z!==Ie.CODE_STOP&&(X=!1),z){case Ie.CODE_FNC_1:f&&(S.length===0?S+="]C1":S+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_A:!Z&&ee?(Z=!0,ee=!1):Z&&ee?(Z=!1,ee=!1):ee=!0;break;case Ie.CODE_SHIFT:C=!0,v=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_B:v=Ie.CODE_CODE_B;break;case Ie.CODE_CODE_C:v=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:b=!0;break}break;case Ie.CODE_CODE_B:if(z<96)ee===Z?S+=String.fromCharCode(32+z):S+=String.fromCharCode(32+z+128),ee=!1;else switch(z!==Ie.CODE_STOP&&(X=!1),z){case Ie.CODE_FNC_1:f&&(S.length===0?S+="]C1":S+="");break;case Ie.CODE_FNC_2:case Ie.CODE_FNC_3:break;case Ie.CODE_FNC_4_B:!Z&&ee?(Z=!0,ee=!1):Z&&ee?(Z=!1,ee=!1):ee=!0;break;case Ie.CODE_SHIFT:C=!0,v=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_A:v=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_C:v=Ie.CODE_CODE_C;break;case Ie.CODE_STOP:b=!0;break}break;case Ie.CODE_CODE_C:if(z<100)z<10&&(S+="0"),S+=z;else switch(z!==Ie.CODE_STOP&&(X=!1),z){case Ie.CODE_FNC_1:f&&(S.length===0?S+="]C1":S+="");break;case Ie.CODE_CODE_A:v=Ie.CODE_CODE_A;break;case Ie.CODE_CODE_B:v=Ie.CODE_CODE_B;break;case Ie.CODE_STOP:b=!0;break}break}je&&(v=v===Ie.CODE_CODE_A?Ie.CODE_CODE_B:Ie.CODE_CODE_A)}const oe=P-j;if(P=o.getNextUnset(P),!o.isRange(P,Math.min(o.getSize(),P+(P-j)/2),!1))throw new Y;if(G-=K*L,G%103!==L)throw new I;const le=S.length;if(le===0)throw new Y;le>0&&X&&(v===Ie.CODE_CODE_C?S=S.substring(0,le-2):S=S.substring(0,le-1));const ge=(i[1]+i[0])/2,ve=j+oe/2,Ce=p.length,Ee=new Uint8Array(Ce);for(let je=0;je<Ce;je++)Ee[je]=p[je];const Ne=[new Me(ge,s),new Me(ve,s)];return new $e(S,Ee,0,Ne,_e.CODE_128,new Date().getTime())}}Ie.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],Ie.MAX_AVG_VARIANCE=.25,Ie.MAX_INDIVIDUAL_VARIANCE=.7,Ie.CODE_SHIFT=98,Ie.CODE_CODE_C=99,Ie.CODE_CODE_B=100,Ie.CODE_CODE_A=101,Ie.CODE_FNC_1=102,Ie.CODE_FNC_2=97,Ie.CODE_FNC_3=96,Ie.CODE_FNC_4_A=101,Ie.CODE_FNC_4_B=100,Ie.CODE_START_A=103,Ie.CODE_START_B=104,Ie.CODE_START_C=105,Ie.CODE_STOP=106;class Pt extends Ot{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,u){let f=this.counters;f.fill(0),this.decodeRowResult="";let i=Pt.findAsteriskPattern(o,f),c=o.getNextSet(i[1]),m=o.getSize(),p,v;do{Pt.recordPattern(o,c,f);let B=Pt.toNarrowWidePattern(f);if(B<0)throw new Y;p=Pt.patternToChar(B),this.decodeRowResult+=p,v=c;for(let L of f)c+=L;c=o.getNextSet(c)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let b=0;for(let B of f)b+=B;let C=c-v-b;if(c!==m&&C*2<b)throw new Y;if(this.usingCheckDigit){let B=this.decodeRowResult.length-1,L=0;for(let z=0;z<B;z++)L+=Pt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(z));if(this.decodeRowResult.charAt(B)!==Pt.ALPHABET_STRING.charAt(L%43))throw new I;this.decodeRowResult=this.decodeRowResult.substring(0,B)}if(this.decodeRowResult.length===0)throw new Y;let S;this.extendedMode?S=Pt.decodeExtended(this.decodeRowResult):S=this.decodeRowResult;let j=(i[1]+i[0])/2,P=v+b/2;return new $e(S,null,0,[new Me(j,s),new Me(P,s)],_e.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let u=s.getSize(),f=s.getNextSet(0),i=0,c=f,m=!1,p=o.length;for(let v=f;v<u;v++)if(s.get(v)!==m)o[i]++;else{if(i===p-1){if(this.toNarrowWidePattern(o)===Pt.ASTERISK_ENCODING&&s.isRange(Math.max(0,c-Math.floor((v-c)/2)),c,!1))return[c,v];c+=o[0]+o[1],o.copyWithin(0,2,2+i-1),o[i-1]=0,o[i]=0,i--}else i++;o[i]=1,m=!m}throw new Y}static toNarrowWidePattern(s){let o=s.length,u=0,f;do{let i=2147483647;for(let p of s)p<i&&p>u&&(i=p);u=i,f=0;let c=0,m=0;for(let p=0;p<o;p++){let v=s[p];v>u&&(m|=1<<o-1-p,f++,c+=v)}if(f===3){for(let p=0;p<o&&f>0;p++){let v=s[p];if(v>u&&(f--,v*2>=c))return-1}return m}}while(f>3);return-1}static patternToChar(s){for(let o=0;o<Pt.CHARACTER_ENCODINGS.length;o++)if(Pt.CHARACTER_ENCODINGS[o]===s)return Pt.ALPHABET_STRING.charAt(o);if(s===Pt.ASTERISK_ENCODING)return"*";throw new Y}static decodeExtended(s){let o=s.length,u="";for(let f=0;f<o;f++){let i=s.charAt(f);if(i==="+"||i==="$"||i==="%"||i==="/"){let c=s.charAt(f+1),m="\0";switch(i){case"+":if(c>="A"&&c<="Z")m=String.fromCharCode(c.charCodeAt(0)+32);else throw new F;break;case"$":if(c>="A"&&c<="Z")m=String.fromCharCode(c.charCodeAt(0)-64);else throw new F;break;case"%":if(c>="A"&&c<="E")m=String.fromCharCode(c.charCodeAt(0)-38);else if(c>="F"&&c<="J")m=String.fromCharCode(c.charCodeAt(0)-11);else if(c>="K"&&c<="O")m=String.fromCharCode(c.charCodeAt(0)+16);else if(c>="P"&&c<="T")m=String.fromCharCode(c.charCodeAt(0)+43);else if(c==="U")m="\0";else if(c==="V")m="@";else if(c==="W")m="`";else if(c==="X"||c==="Y"||c==="Z")m="";else throw new F;break;case"/":if(c>="A"&&c<="O")m=String.fromCharCode(c.charCodeAt(0)-32);else if(c==="Z")m=":";else throw new F;break}u+=m,f++}else u+=i}return u}}Pt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Pt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Pt.ASTERISK_ENCODING=148;class Ae extends Ot{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,u){let f=this.decodeStart(o),i=this.decodeEnd(o),c=new re;Ae.decodeMiddle(o,f[1],i[0],c);let m=c.toString(),p=null;u!=null&&(p=u.get($.ALLOWED_LENGTHS)),p==null&&(p=Ae.DEFAULT_ALLOWED_LENGTHS);let v=m.length,b=!1,C=0;for(let P of p){if(v===P){b=!0;break}P>C&&(C=P)}if(!b&&v>C&&(b=!0),!b)throw new F;const S=[new Me(f[1],s),new Me(i[0],s)];return new $e(m,null,0,S,_e.ITF,new Date().getTime())}static decodeMiddle(s,o,u,f){let i=new Int32Array(10),c=new Int32Array(5),m=new Int32Array(5);for(i.fill(0),c.fill(0),m.fill(0);o<u;){Ot.recordPattern(s,o,i);for(let v=0;v<5;v++){let b=2*v;c[v]=i[b],m[v]=i[b+1]}let p=Ae.decodeDigit(c);f.append(p.toString()),p=this.decodeDigit(m),f.append(p.toString()),i.forEach(function(v){o+=v})}}decodeStart(s){let o=Ae.skipWhiteSpace(s),u=Ae.findGuardPattern(s,o,Ae.START_PATTERN);return this.narrowLineWidth=(u[1]-u[0])/4,this.validateQuietZone(s,u[0]),u}validateQuietZone(s,o){let u=this.narrowLineWidth*10;u=u<o?u:o;for(let f=o-1;u>0&&f>=0&&!s.get(f);f--)u--;if(u!==0)throw new Y}static skipWhiteSpace(s){const o=s.getSize(),u=s.getNextSet(0);if(u===o)throw new Y;return u}decodeEnd(s){s.reverse();try{let o=Ae.skipWhiteSpace(s),u;try{u=Ae.findGuardPattern(s,o,Ae.END_PATTERN_REVERSED[0])}catch(i){i instanceof Y&&(u=Ae.findGuardPattern(s,o,Ae.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,u[0]);let f=u[0];return u[0]=s.getSize()-u[1],u[1]=s.getSize()-f,u}finally{s.reverse()}}static findGuardPattern(s,o,u){let f=u.length,i=new Int32Array(f),c=s.getSize(),m=!1,p=0,v=o;i.fill(0);for(let b=o;b<c;b++)if(s.get(b)!==m)i[p]++;else{if(p===f-1){if(Ot.patternMatchVariance(i,u,Ae.MAX_INDIVIDUAL_VARIANCE)<Ae.MAX_AVG_VARIANCE)return[v,b];v+=i[0]+i[1],O.arraycopy(i,2,i,0,p-1),i[p-1]=0,i[p]=0,p--}else p++;i[p]=1,m=!m}throw new Y}static decodeDigit(s){let o=Ae.MAX_AVG_VARIANCE,u=-1,f=Ae.PATTERNS.length;for(let i=0;i<f;i++){let c=Ae.PATTERNS[i],m=Ot.patternMatchVariance(s,c,Ae.MAX_INDIVIDUAL_VARIANCE);m<o?(o=m,u=i):m===o&&(u=-1)}if(u>=0)return u%10;throw new Y}}Ae.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ae.MAX_AVG_VARIANCE=.38,Ae.MAX_INDIVIDUAL_VARIANCE=.5,Ae.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ae.START_PATTERN=Int32Array.from([1,1,1,1]),Ae.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Lt extends Ot{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,u,f=0,i=Int32Array.from([0,0,0]);for(;!o;){i=Int32Array.from([0,0,0]),u=Lt.findGuardPattern(s,f,!1,this.START_END_PATTERN,i);let c=u[0];f=u[1];let m=c-(f-c);m>=0&&(o=s.isRange(m,c,!1))}return u}static checkChecksum(s){return Lt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let u=parseInt(s.charAt(o-1),10);return Lt.getStandardUPCEANChecksum(s.substring(0,o-1))===u}static getStandardUPCEANChecksum(s){let o=s.length,u=0;for(let f=o-1;f>=0;f-=2){let i=s.charAt(f).charCodeAt(0)-48;if(i<0||i>9)throw new F;u+=i}u*=3;for(let f=o-2;f>=0;f-=2){let i=s.charAt(f).charCodeAt(0)-48;if(i<0||i>9)throw new F;u+=i}return(1e3-u)%10}static decodeEnd(s,o){return Lt.findGuardPattern(s,o,!1,Lt.START_END_PATTERN,new Int32Array(Lt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,u,f){return this.findGuardPattern(s,o,u,f,new Int32Array(f.length))}static findGuardPattern(s,o,u,f,i){let c=s.getSize();o=u?s.getNextUnset(o):s.getNextSet(o);let m=0,p=o,v=f.length,b=u;for(let C=o;C<c;C++)if(s.get(C)!==b)i[m]++;else{if(m===v-1){if(Ot.patternMatchVariance(i,f,Lt.MAX_INDIVIDUAL_VARIANCE)<Lt.MAX_AVG_VARIANCE)return Int32Array.from([p,C]);p+=i[0]+i[1];let S=i.slice(2,i.length-1);for(let j=0;j<m-1;j++)i[j]=S[j];i[m-1]=0,i[m]=0,m--}else m++;i[m]=1,b=!b}throw new Y}static decodeDigit(s,o,u,f){this.recordPattern(s,u,o);let i=this.MAX_AVG_VARIANCE,c=-1,m=f.length;for(let p=0;p<m;p++){let v=f[p],b=Ot.patternMatchVariance(o,v,Lt.MAX_INDIVIDUAL_VARIANCE);b<i&&(i=b,c=p)}if(c>=0)return c;throw new Y}}Lt.MAX_AVG_VARIANCE=.48,Lt.MAX_INDIVIDUAL_VARIANCE=.7,Lt.START_END_PATTERN=Int32Array.from([1,1,1]),Lt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Lt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Lt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class br{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,u){let f=this.decodeRowStringBuffer,i=this.decodeMiddle(o,u,f),c=f.toString(),m=br.parseExtensionString(c),p=[new Me((u[0]+u[1])/2,s),new Me(i,s)],v=new $e(c,null,0,p,_e.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&v.putAllMetadata(m),v}decodeMiddle(s,o,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let i=s.getSize(),c=o[1],m=0;for(let v=0;v<5&&c<i;v++){let b=Lt.decodeDigit(s,f,c,Lt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+b%10);for(let C of f)c+=C;b>=10&&(m|=1<<4-v),v!==4&&(c=s.getNextSet(c),c=s.getNextUnset(c))}if(u.length!==5)throw new Y;let p=this.determineCheckDigit(m);if(br.extensionChecksum(u.toString())!==p)throw new Y;return c}static extensionChecksum(s){let o=s.length,u=0;for(let f=o-2;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;u*=3;for(let f=o-1;f>=0;f-=2)u+=s.charAt(f).charCodeAt(0)-48;return u*=3,u%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new Y}static parseExtensionString(s){if(s.length!==5)return null;let o=br.parseExtension5String(s);return o==null?null:new Map([[Je.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let u=parseInt(s.substring(1)),f=(u/100).toString(),i=u%100,c=i<10?"0"+i:i.toString();return o+f+"."+c}}class Ei{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,u){let f=this.decodeRowStringBuffer,i=this.decodeMiddle(o,u,f),c=f.toString(),m=Ei.parseExtensionString(c),p=[new Me((u[0]+u[1])/2,s),new Me(i,s)],v=new $e(c,null,0,p,_e.UPC_EAN_EXTENSION,new Date().getTime());return m!=null&&v.putAllMetadata(m),v}decodeMiddle(s,o,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let i=s.getSize(),c=o[1],m=0;for(let p=0;p<2&&c<i;p++){let v=Lt.decodeDigit(s,f,c,Lt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+v%10);for(let b of f)c+=b;v>=10&&(m|=1<<1-p),p!==1&&(c=s.getNextSet(c),c=s.getNextUnset(c))}if(u.length!==2)throw new Y;if(parseInt(u.toString())%4!==m)throw new Y;return c}static parseExtensionString(s){return s.length!==2?null:new Map([[Je.ISSUE_NUMBER,parseInt(s)]])}}class Re{static decodeRow(s,o,u){let f=Lt.findGuardPattern(o,u,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new br().decodeRow(s,o,f)}catch{return new Ei().decodeRow(s,o,f)}}}Re.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class gt extends Lt{constructor(){super(),this.decodeRowStringBuffer="",gt.L_AND_G_PATTERNS=gt.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=gt.L_PATTERNS[s-10],u=new Int32Array(o.length);for(let f=0;f<o.length;f++)u[f]=o[o.length-f-1];gt.L_AND_G_PATTERNS[s]=u}}decodeRow(s,o,u){let f=gt.findStartGuardPattern(o),i=u==null?null:u.get($.NEED_RESULT_POINT_CALLBACK);if(i!=null){const X=new Me((f[0]+f[1])/2,s);i.foundPossibleResultPoint(X)}let c=this.decodeMiddle(o,f,this.decodeRowStringBuffer),m=c.rowOffset,p=c.resultString;if(i!=null){const X=new Me(m,s);i.foundPossibleResultPoint(X)}let v=this.decodeEnd(o,m);if(i!=null){const X=new Me((v[0]+v[1])/2,s);i.foundPossibleResultPoint(X)}let b=v[1],C=b+(b-v[0]);if(C>=o.getSize()||!o.isRange(b,C,!1))throw new Y;let S=p.toString();if(S.length<8)throw new F;if(!gt.checkChecksum(S))throw new I;let j=(f[1]+f[0])/2,P=(v[1]+v[0])/2,B=this.getBarcodeFormat(),L=[new Me(j,s),new Me(P,s)],z=new $e(S,null,0,L,B,new Date().getTime()),G=0;try{let X=Re.decodeRow(s,o,v[1]);z.putMetadata(Je.UPC_EAN_EXTENSION,X.getText()),z.putAllMetadata(X.getResultMetadata()),z.addResultPoints(X.getResultPoints()),G=X.getText().length}catch{}let K=u==null?null:u.get($.ALLOWED_EAN_EXTENSIONS);if(K!=null){let X=!1;for(let Z in K)if(G.toString()===Z){X=!0;break}if(!X)throw new Y}return z}decodeEnd(s,o){return gt.findGuardPattern(s,o,!1,gt.START_END_PATTERN,new Int32Array(gt.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return gt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let u=parseInt(s.charAt(o-1),10);return gt.getStandardUPCEANChecksum(s.substring(0,o-1))===u}static getStandardUPCEANChecksum(s){let o=s.length,u=0;for(let f=o-1;f>=0;f-=2){let i=s.charAt(f).charCodeAt(0)-48;if(i<0||i>9)throw new F;u+=i}u*=3;for(let f=o-2;f>=0;f-=2){let i=s.charAt(f).charCodeAt(0)-48;if(i<0||i>9)throw new F;u+=i}return(1e3-u)%10}}class Ts extends gt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,u){let f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let i=s.getSize(),c=o[1],m=0;for(let v=0;v<6&&c<i;v++){let b=gt.decodeDigit(s,f,c,gt.L_AND_G_PATTERNS);u+=String.fromCharCode(48+b%10);for(let C of f)c+=C;b>=10&&(m|=1<<5-v)}u=Ts.determineFirstDigit(u,m),c=gt.findGuardPattern(s,c,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&c<i;v++){let b=gt.decodeDigit(s,f,c,gt.L_PATTERNS);u+=String.fromCharCode(48+b);for(let C of f)c+=C}return{rowOffset:c,resultString:u}}getBarcodeFormat(){return _e.EAN_13}static determineFirstDigit(s,o){for(let u=0;u<10;u++)if(o===this.FIRST_DIGIT_ENCODINGS[u])return s=String.fromCharCode(48+u)+s,s;throw new Y}}Ts.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class eo extends gt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,u){const f=this.decodeMiddleCounters;f[0]=0,f[1]=0,f[2]=0,f[3]=0;let i=s.getSize(),c=o[1];for(let p=0;p<4&&c<i;p++){let v=gt.decodeDigit(s,f,c,gt.L_PATTERNS);u+=String.fromCharCode(48+v);for(let b of f)c+=b}c=gt.findGuardPattern(s,c,!0,gt.MIDDLE_PATTERN,new Int32Array(gt.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&c<i;p++){let v=gt.decodeDigit(s,f,c,gt.L_PATTERNS);u+=String.fromCharCode(48+v);for(let b of f)c+=b}return{rowOffset:c,resultString:u}}getBarcodeFormat(){return _e.EAN_8}}class Tl extends gt{constructor(){super(...arguments),this.ean13Reader=new Ts}getBarcodeFormat(){return _e.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,u){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,u))}decodeMiddle(s,o,u){return this.ean13Reader.decodeMiddle(s,o,u)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let u=new $e(o.substring(1),null,null,s.getResultPoints(),_e.UPC_A);return s.getResultMetadata()!=null&&u.putAllMetadata(s.getResultMetadata()),u}else throw new Y}reset(){this.ean13Reader.reset()}}class Yn extends gt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,u){const f=this.decodeMiddleCounters.map(v=>v);f[0]=0,f[1]=0,f[2]=0,f[3]=0;const i=s.getSize();let c=o[1],m=0;for(let v=0;v<6&&c<i;v++){const b=Yn.decodeDigit(s,f,c,Yn.L_AND_G_PATTERNS);u+=String.fromCharCode(48+b%10);for(let C of f)c+=C;b>=10&&(m|=1<<5-v)}let p=Yn.determineNumSysAndCheckDigit(u,m);return{rowOffset:c,resultString:p}}decodeEnd(s,o){return Yn.findGuardPatternWithoutCounters(s,o,!0,Yn.MIDDLE_END_PATTERN)}checkChecksum(s){return gt.checkChecksum(Yn.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let u=0;u<=1;u++)for(let f=0;f<10;f++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[u][f]){let i=String.fromCharCode(48+u),c=String.fromCharCode(48+f);return i+s+c}throw Y.getNotFoundInstance()}getBarcodeFormat(){return _e.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(i=>i.charCodeAt(0)),u=new re;u.append(s.charAt(0));let f=o[5];switch(f){case 0:case 1:case 2:u.appendChars(o,0,2),u.append(f),u.append("0000"),u.appendChars(o,2,3);break;case 3:u.appendChars(o,0,3),u.append("00000"),u.appendChars(o,3,2);break;case 4:u.appendChars(o,0,4),u.append("00000"),u.append(o[4]);break;default:u.appendChars(o,0,5),u.append("0000"),u.append(f);break}return s.length>=8&&u.append(s.charAt(7)),u.toString()}}Yn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class Il extends Ot{constructor(s){super();let o=s==null?null:s.get($.POSSIBLE_FORMATS),u=[];r(o)?(u.push(new Ts),u.push(new Tl),u.push(new eo),u.push(new Yn)):(o.indexOf(_e.EAN_13)>-1&&u.push(new Ts),o.indexOf(_e.UPC_A)>-1&&u.push(new Tl),o.indexOf(_e.EAN_8)>-1&&u.push(new eo),o.indexOf(_e.UPC_E)>-1&&u.push(new Yn)),this.readers=u}decodeRow(s,o,u){for(let f of this.readers)try{const i=f.decodeRow(s,o,u),c=i.getBarcodeFormat()===_e.EAN_13&&i.getText().charAt(0)==="0",m=u==null?null:u.get($.POSSIBLE_FORMATS),p=m==null||m.includes(_e.UPC_A);if(c&&p){const v=i.getRawBytes(),b=new $e(i.getText().substring(1),v,v?v.length:null,i.getResultPoints(),_e.UPC_A);return b.putAllMetadata(i.getResultMetadata()),b}return i}catch{}throw new Y}reset(){for(let s of this.readers)s.reset()}}class An extends Ot{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let u=0;u<o.length;u++)if(Ot.patternMatchVariance(s,o[u],An.MAX_INDIVIDUAL_VARIANCE)<An.MAX_AVG_VARIANCE)return u;throw new Y}static count(s){return st.sum(new Int32Array(s))}static increment(s,o){let u=0,f=o[0];for(let i=1;i<s.length;i++)o[i]>f&&(f=o[i],u=i);s[u]++}static decrement(s,o){let u=0,f=o[0];for(let i=1;i<s.length;i++)o[i]<f&&(f=o[i],u=i);s[u]--}static isFinderPattern(s){let o=s[0]+s[1],u=o+s[2]+s[3],f=o/u;if(f>=An.MIN_FINDER_PATTERN_RATIO&&f<=An.MAX_FINDER_PATTERN_RATIO){let i=Number.MAX_SAFE_INTEGER,c=Number.MIN_SAFE_INTEGER;for(let m of s)m>c&&(c=m),m<i&&(i=m);return c<10*i}return!1}}An.MAX_AVG_VARIANCE=.2,An.MAX_INDIVIDUAL_VARIANCE=.45,An.MIN_FINDER_PATTERN_RATIO=9.5/12,An.MAX_FINDER_PATTERN_RATIO=12.5/14;class Er{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof Er))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class ss{constructor(s,o,u,f,i){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new Me(u,i)),this.resultPoints.push(new Me(f,i))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof ss))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class lr{constructor(){}static getRSSvalue(s,o,u){let f=0;for(let p of s)f+=p;let i=0,c=0,m=s.length;for(let p=0;p<m-1;p++){let v;for(v=1,c|=1<<p;v<s[p];v++,c&=~(1<<p)){let b=lr.combins(f-v-1,m-p-2);if(u&&c===0&&f-v-(m-p-1)>=m-p-1&&(b-=lr.combins(f-v-(m-p),m-p-2)),m-p-1>1){let C=0;for(let S=f-v-(m-p-2);S>o;S--)C+=lr.combins(f-v-S-1,m-p-3);b-=C*(m-1-p)}else f-v>o&&b--;i+=b}f-=v}return i}static combins(s,o){let u,f;s-o>o?(f=o,u=s-o):(f=s-o,u=o);let i=1,c=1;for(let m=s;m>u;m--)i*=m,c<=f&&(i/=c,c++);for(;c<=f;)i/=c,c++;return i}}class to{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let u=12*o,f=new M(u),i=0,m=s[0].getRightChar().getValue();for(let p=11;p>=0;--p)m&1<<p&&f.set(i),i++;for(let p=1;p<s.length;++p){let v=s[p],b=v.getLeftChar().getValue();for(let C=11;C>=0;--C)b&1<<C&&f.set(i),i++;if(v.getRightChar()!=null){let C=v.getRightChar().getValue();for(let S=11;S>=0;--S)C&1<<S&&f.set(i),i++}}return f}}class bt{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class rn{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class Fn extends rn{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===Fn.FNC1}}Fn.FNC1="$";class Fr extends rn{constructor(s,o,u){super(s),u?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Mn extends rn{constructor(s,o,u){if(super(s),o<0||o>10||u<0||u>10)throw new F;this.firstDigit=o,this.secondDigit=u}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Mn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Mn.FNC1}isAnyFNC1(){return this.firstDigit===Mn.FNC1||this.secondDigit===Mn.FNC1}}Mn.FNC1=10;class De{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new Y;let o=s.substring(0,2);for(let i of De.TWO_DIGIT_DATA_LENGTH)if(i[0]===o)return i[1]===De.VARIABLE_LENGTH?De.processVariableAI(2,i[2],s):De.processFixedAI(2,i[1],s);if(s.length<3)throw new Y;let u=s.substring(0,3);for(let i of De.THREE_DIGIT_DATA_LENGTH)if(i[0]===u)return i[1]===De.VARIABLE_LENGTH?De.processVariableAI(3,i[2],s):De.processFixedAI(3,i[1],s);for(let i of De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(i[0]===u)return i[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,i[2],s):De.processFixedAI(4,i[1],s);if(s.length<4)throw new Y;let f=s.substring(0,4);for(let i of De.FOUR_DIGIT_DATA_LENGTH)if(i[0]===f)return i[1]===De.VARIABLE_LENGTH?De.processVariableAI(4,i[2],s):De.processFixedAI(4,i[1],s);throw new Y}static processFixedAI(s,o,u){if(u.length<s)throw new Y;let f=u.substring(0,s);if(u.length<s+o)throw new Y;let i=u.substring(s,s+o),c=u.substring(s+o),m="("+f+")"+i,p=De.parseFieldsInGeneralPurpose(c);return p==null?m:m+p}static processVariableAI(s,o,u){let f=u.substring(0,s),i;u.length<s+o?i=u.length:i=s+o;let c=u.substring(s,i),m=u.substring(i),p="("+f+")"+c,v=De.parseFieldsInGeneralPurpose(m);return v==null?p:p+v}}De.VARIABLE_LENGTH=[],De.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",De.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",De.VARIABLE_LENGTH,20],["22",De.VARIABLE_LENGTH,29],["30",De.VARIABLE_LENGTH,8],["37",De.VARIABLE_LENGTH,8],["90",De.VARIABLE_LENGTH,30],["91",De.VARIABLE_LENGTH,30],["92",De.VARIABLE_LENGTH,30],["93",De.VARIABLE_LENGTH,30],["94",De.VARIABLE_LENGTH,30],["95",De.VARIABLE_LENGTH,30],["96",De.VARIABLE_LENGTH,30],["97",De.VARIABLE_LENGTH,3],["98",De.VARIABLE_LENGTH,30],["99",De.VARIABLE_LENGTH,30]],De.THREE_DIGIT_DATA_LENGTH=[["240",De.VARIABLE_LENGTH,30],["241",De.VARIABLE_LENGTH,30],["242",De.VARIABLE_LENGTH,6],["250",De.VARIABLE_LENGTH,30],["251",De.VARIABLE_LENGTH,30],["253",De.VARIABLE_LENGTH,17],["254",De.VARIABLE_LENGTH,20],["400",De.VARIABLE_LENGTH,30],["401",De.VARIABLE_LENGTH,30],["402",17],["403",De.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",De.VARIABLE_LENGTH,20],["421",De.VARIABLE_LENGTH,15],["422",3],["423",De.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],De.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",De.VARIABLE_LENGTH,15],["391",De.VARIABLE_LENGTH,18],["392",De.VARIABLE_LENGTH,15],["393",De.VARIABLE_LENGTH,18],["703",De.VARIABLE_LENGTH,30]],De.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",De.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",De.VARIABLE_LENGTH,20],["8003",De.VARIABLE_LENGTH,30],["8004",De.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",De.VARIABLE_LENGTH,30],["8008",De.VARIABLE_LENGTH,12],["8018",18],["8020",De.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",De.VARIABLE_LENGTH,70],["8200",De.VARIABLE_LENGTH,70]];class Ci{constructor(s){this.buffer=new re,this.information=s}decodeAllCodes(s,o){let u=o,f=null;do{let i=this.decodeGeneralPurposeField(u,f),c=De.parseFieldsInGeneralPurpose(i.getNewString());if(c!=null&&s.append(c),i.isRemaining()?f=""+i.getRemainingValue():f=null,u===i.getNewPosition())break;u=i.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let i=this.extractNumericValueFromBitArray(s,4);return i===0?new Mn(this.information.getSize(),Mn.FNC1,Mn.FNC1):new Mn(this.information.getSize(),i-1,Mn.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),u=(o-8)/11,f=(o-8)%11;return new Mn(s+7,u,f)}extractNumericValueFromBitArray(s,o){return Ci.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,u){let f=0;for(let i=0;i<u;++i)s.get(o+i)&&(f|=1<<u-i-1);return f}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let u=this.parseBlocks();return u!=null&&u.isRemaining()?new Fr(this.current.getPosition(),this.buffer.toString(),u.getRemainingValue()):new Fr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let u=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(u!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Fr(this.current.getPosition(),this.buffer.toString()):o=new Fr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new bt(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Fr(this.current.getPosition(),this.buffer.toString());return new bt(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new bt(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Fr(this.current.getPosition(),this.buffer.toString());return new bt(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new bt(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Fr(this.current.getPosition(),this.buffer.toString());return new bt(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new bt(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<116)return!0;if(s+8>this.information.getSize())return!1;let f=this.extractNumericValueFromBitArray(s,8);return f>=232&&f<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new Fn(s+5,Fn.FNC1);if(o>=5&&o<15)return new Fn(s+5,"0"+(o-5));let u=this.extractNumericValueFromBitArray(s,7);if(u>=64&&u<90)return new Fn(s+7,""+(u+1));if(u>=90&&u<116)return new Fn(s+7,""+(u+7));let f=this.extractNumericValueFromBitArray(s,8),i;switch(f){case 232:i="!";break;case 233:i='"';break;case 234:i="%";break;case 235:i="&";break;case 236:i="'";break;case 237:i="(";break;case 238:i=")";break;case 239:i="*";break;case 240:i="+";break;case 241:i=",";break;case 242:i="-";break;case 243:i=".";break;case 244:i="/";break;case 245:i=":";break;case 246:i=";";break;case 247:i="<";break;case 248:i="=";break;case 249:i=">";break;case 250:i="?";break;case 251:i="_";break;case 252:i=" ";break;default:throw new F}return new Fn(s+8,i)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,6);return u>=16&&u<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new Fn(s+5,Fn.FNC1);if(o>=5&&o<15)return new Fn(s+5,"0"+(o-5));let u=this.extractNumericValueFromBitArray(s,6);if(u>=32&&u<58)return new Fn(s+6,""+(u+33));let f;switch(u){case 58:f="*";break;case 59:f=",";break;case 60:f="-";break;case 61:f=".";break;case 62:f="/";break;default:throw new jt("Decoding invalid alphanumeric value: "+u)}return new Fn(s+6,f)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class Ur{constructor(s){this.information=s,this.generalDecoder=new Ci(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class un extends Ur{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let u=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,u)}encodeCompressedGtinWithoutAI(s,o,u){for(let f=0;f<4;++f){let i=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*f,10);i/100===0&&s.append("0"),i/10===0&&s.append("0"),s.append(i)}un.appendCheckDigit(s,u)}static appendCheckDigit(s,o){let u=0;for(let f=0;f<13;f++){let i=s.charAt(f+o).charCodeAt(0)-48;u+=f&1?i:3*i}u=10-u%10,u===10&&(u=0),s.append(u)}}un.GTIN_SIZE=40;class Xn extends un{constructor(s){super(s)}parseInformation(){let s=new re;s.append("(01)");let o=s.length(),u=this.getGeneralDecoder().extractNumericValueFromBitArray(Xn.HEADER_SIZE,4);return s.append(u),this.encodeCompressedGtinWithoutAI(s,Xn.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,Xn.HEADER_SIZE+44)}}Xn.HEADER_SIZE=4;class Ys extends Ur{constructor(s){super(s)}parseInformation(){let s=new re;return this.getGeneralDecoder().decodeAllCodes(s,Ys.HEADER_SIZE)}}Ys.HEADER_SIZE=5;class no extends un{constructor(s){super(s)}encodeCompressedWeight(s,o,u){let f=this.getGeneralDecoder().extractNumericValueFromBitArray(o,u);this.addWeightCode(s,f);let i=this.checkWeight(f),c=1e5;for(let m=0;m<5;++m)i/c===0&&s.append("0"),c/=10;s.append(i)}}class vn extends no{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=vn.HEADER_SIZE+no.GTIN_SIZE+vn.WEIGHT_SIZE)throw new Y;let s=new re;return this.encodeCompressedGtin(s,vn.HEADER_SIZE),this.encodeCompressedWeight(s,vn.HEADER_SIZE+no.GTIN_SIZE,vn.WEIGHT_SIZE),s.toString()}}vn.HEADER_SIZE=5,vn.WEIGHT_SIZE=15;class fu extends vn{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class Xs extends vn{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Cr extends un{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Cr.HEADER_SIZE+un.GTIN_SIZE)throw new Y;let s=new re;this.encodeCompressedGtin(s,Cr.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Cr.HEADER_SIZE+un.GTIN_SIZE,Cr.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let u=this.getGeneralDecoder().decodeGeneralPurposeField(Cr.HEADER_SIZE+un.GTIN_SIZE+Cr.LAST_DIGIT_SIZE,null);return s.append(u.getNewString()),s.toString()}}Cr.HEADER_SIZE=8,Cr.LAST_DIGIT_SIZE=2;class wn extends un{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<wn.HEADER_SIZE+un.GTIN_SIZE)throw new Y;let s=new re;this.encodeCompressedGtin(s,wn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+un.GTIN_SIZE,wn.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let u=this.getGeneralDecoder().extractNumericValueFromBitArray(wn.HEADER_SIZE+un.GTIN_SIZE+wn.LAST_DIGIT_SIZE,wn.FIRST_THREE_DIGITS_SIZE);u/100==0&&s.append("0"),u/10==0&&s.append("0"),s.append(u);let f=this.getGeneralDecoder().decodeGeneralPurposeField(wn.HEADER_SIZE+un.GTIN_SIZE+wn.LAST_DIGIT_SIZE+wn.FIRST_THREE_DIGITS_SIZE,null);return s.append(f.getNewString()),s.toString()}}wn.HEADER_SIZE=8,wn.LAST_DIGIT_SIZE=2,wn.FIRST_THREE_DIGITS_SIZE=10;class Qe extends no{constructor(s,o,u){super(s),this.dateCode=u,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=Qe.HEADER_SIZE+Qe.GTIN_SIZE+Qe.WEIGHT_SIZE+Qe.DATE_SIZE)throw new Y;let s=new re;return this.encodeCompressedGtin(s,Qe.HEADER_SIZE),this.encodeCompressedWeight(s,Qe.HEADER_SIZE+Qe.GTIN_SIZE,Qe.WEIGHT_SIZE),this.encodeCompressedDate(s,Qe.HEADER_SIZE+Qe.GTIN_SIZE+Qe.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(o,Qe.DATE_SIZE);if(u==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let f=u%32;u/=32;let i=u%12+1;u/=12;let c=u;c/10==0&&s.append("0"),s.append(c),i/10==0&&s.append("0"),s.append(i),f/10==0&&s.append("0"),s.append(f)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}Qe.HEADER_SIZE=8,Qe.WEIGHT_SIZE=20,Qe.DATE_SIZE=16;function Is(k){try{if(k.get(1))return new Xn(k);if(!k.get(2))return new Ys(k);switch(Ci.extractNumericValueFromBitArray(k,1,4)){case 4:return new fu(k);case 5:return new Xs(k)}switch(Ci.extractNumericValueFromBitArray(k,1,5)){case 12:return new Cr(k);case 13:return new wn(k)}switch(Ci.extractNumericValueFromBitArray(k,1,7)){case 56:return new Qe(k,"310","11");case 57:return new Qe(k,"320","11");case 58:return new Qe(k,"310","13");case 59:return new Qe(k,"320","13");case 60:return new Qe(k,"310","15");case 61:return new Qe(k,"320","15");case 62:return new Qe(k,"310","17");case 63:return new Qe(k,"320","17")}}catch(s){throw console.log(s),new jt("unknown decoder: "+k)}}class Tn{constructor(s,o,u,f){this.leftchar=s,this.rightchar=o,this.finderpattern=u,this.maybeLast=f}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof Tn?Tn.equalsOrNull(s.leftchar,o.leftchar)&&Tn.equalsOrNull(s.rightchar,o.rightchar)&&Tn.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:Tn.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class ro{constructor(s,o,u){this.pairs=s,this.rowNumber=o,this.wasReversed=u}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof ro?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let u;return s.forEach((f,i)=>{o.forEach(c=>{f.getLeftChar().getValue()===c.getLeftChar().getValue()&&f.getRightChar().getValue()===c.getRightChar().getValue()&&f.getFinderPatter().getValue()===c.getFinderPatter().getValue()&&(u=!0)})}),u}}class we extends An{constructor(s){super(...arguments),this.pairs=new Array(we.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,u){this.pairs.length=0,this.startFromEven=!1;try{return we.constructResult(this.decodeRow2pairs(s,o))}catch(f){this.verbose&&console.log(f)}return this.pairs.length=0,this.startFromEven=!0,we.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let u=!1;for(;!u;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(i){if(i instanceof Y){if(!this.pairs.length)throw new Y;u=!0}}if(this.checkChecksum())return this.pairs;let f;if(this.rows.length?f=!0:f=!1,this.storeRow(s,!1),f){let i=this.checkRowsBoolean(!1);if(i!=null||(i=this.checkRowsBoolean(!0),i!=null))return i}throw new Y}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(u){this.verbose&&console.log(u)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let u=o;u<this.rows.length;u++){let f=this.rows[u];this.pairs.length=0;for(let c of s)this.pairs.push(c.getPairs());if(this.pairs.push(f.getPairs()),!we.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let i=new Array(s);i.push(f);try{return this.checkRows(i,u+1)}catch(c){this.verbose&&console.log(c)}}throw new Y}static isValidSequence(s){for(let o of we.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let u=!0;for(let f=0;f<s.length;f++)if(s[f].getFinderPattern().getValue()!=o[f]){u=!1;break}if(u)return!0}return!1}storeRow(s,o){let u=0,f=!1,i=!1;for(;u<this.rows.length;){let c=this.rows[u];if(c.getRowNumber()>s){i=c.isEquivalent(this.pairs);break}f=c.isEquivalent(this.pairs),u++}i||f||we.isPartialRow(this.pairs,this.rows)||(this.rows.push(u,new ro(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let u of o)if(u.getPairs().length!==s.length){for(let f of u.getPairs())for(let i of s)if(Tn.equals(f,i))break}}static isPartialRow(s,o){for(let u of o){let f=!0;for(let i of s){let c=!1;for(let m of u.getPairs())if(i.equals(m)){c=!0;break}if(!c){f=!1;break}}if(f)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=to.buildBitArray(s),f=Is(o).parseInformation(),i=s[0].getFinderPattern().getResultPoints(),c=s[s.length-1].getFinderPattern().getResultPoints(),m=[i[0],i[1],c[0],c[1]];return new $e(f,null,null,m,_e.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),u=s.getRightChar();if(u==null)return!1;let f=u.getChecksumPortion(),i=2;for(let m=1;m<this.pairs.size();++m){let p=this.pairs.get(m);f+=p.getLeftChar().getChecksumPortion(),i++;let v=p.getRightChar();v!=null&&(f+=v.getChecksumPortion(),i++)}return f%=211,211*(i-4)+f==o.getValue()}static getNextSecondBar(s,o){let u;return s.get(o)?(u=s.getNextUnset(o),u=s.getNextSet(u)):(u=s.getNextSet(o),u=s.getNextUnset(u)),u}retrieveNextPair(s,o,u){let f=o.length%2==0;this.startFromEven&&(f=!f);let i,c=!0,m=-1;do this.findNextPair(s,o,m),i=this.parseFoundFinderPattern(s,u,f),i==null?m=we.getNextSecondBar(s,this.startEnd[0]):c=!1;while(c);let p=this.decodeDataCharacter(s,i,f,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new Y;let v;try{v=this.decodeDataCharacter(s,i,f,!1)}catch(b){v=null,this.verbose&&console.log(b)}return new Tn(p,v,i,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,u){let f=this.getDecodeFinderCounters();f[0]=0,f[1]=0,f[2]=0,f[3]=0;let i=s.getSize(),c;u>=0?c=u:this.isEmptyPair(o)?c=0:c=o[o.length-1].getFinderPattern().getStartEnd()[1];let m=o.length%2!=0;this.startFromEven&&(m=!m);let p=!1;for(;c<i&&(p=!s.get(c),!!p);)c++;let v=0,b=c;for(let C=c;C<i;C++)if(s.get(C)!=p)f[v]++;else{if(v==3){if(m&&we.reverseCounters(f),we.isFinderPattern(f)){this.startEnd[0]=b,this.startEnd[1]=C;return}m&&we.reverseCounters(f),b+=f[0]+f[1],f[0]=f[2],f[1]=f[3],f[2]=0,f[3]=0,v--}else v++;f[v]=1,p=!p}throw new Y}static reverseCounters(s){let o=s.length;for(let u=0;u<o/2;++u){let f=s[u];s[u]=s[o-u-1],s[o-u-1]=f}}parseFoundFinderPattern(s,o,u){let f,i,c;if(u){let v=this.startEnd[0]-1;for(;v>=0&&!s.get(v);)v--;v++,f=this.startEnd[0]-v,i=v,c=this.startEnd[1]}else i=this.startEnd[0],c=s.getNextUnset(this.startEnd[1]+1),f=c-this.startEnd[1];let m=this.getDecodeFinderCounters();O.arraycopy(m,0,m,1,m.length-1),m[0]=f;let p;try{p=this.parseFinderValue(m,we.FINDER_PATTERNS)}catch{return null}return new ss(p,[i,c],i,c,o)}decodeDataCharacter(s,o,u,f){let i=this.getDataCharacterCounters();for(let ve=0;ve<i.length;ve++)i[ve]=0;if(f)we.recordPatternInReverse(s,o.getStartEnd()[0],i);else{we.recordPattern(s,o.getStartEnd()[1],i);for(let ve=0,Ce=i.length-1;ve<Ce;ve++,Ce--){let Ee=i[ve];i[ve]=i[Ce],i[Ce]=Ee}}let c=17,m=st.sum(new Int32Array(i))/c,p=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(m-p)/p>.3)throw new Y;let v=this.getOddCounts(),b=this.getEvenCounts(),C=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let ve=0;ve<i.length;ve++){let Ce=1*i[ve]/m,Ee=Ce+.5;if(Ee<1){if(Ce<.3)throw new Y;Ee=1}else if(Ee>8){if(Ce>8.7)throw new Y;Ee=8}let Ne=ve/2;ve&1?(b[Ne]=Ee,S[Ne]=Ce-Ee):(v[Ne]=Ee,C[Ne]=Ce-Ee)}this.adjustOddEvenCounts(c);let j=4*o.getValue()+(u?0:2)+(f?0:1)-1,P=0,B=0;for(let ve=v.length-1;ve>=0;ve--){if(we.isNotA1left(o,u,f)){let Ce=we.WEIGHTS[j][2*ve];B+=v[ve]*Ce}P+=v[ve]}let L=0;for(let ve=b.length-1;ve>=0;ve--)if(we.isNotA1left(o,u,f)){let Ce=we.WEIGHTS[j][2*ve+1];L+=b[ve]*Ce}let z=B+L;if(P&1||P>13||P<4)throw new Y;let G=(13-P)/2,K=we.SYMBOL_WIDEST[G],X=9-K,Z=lr.getRSSvalue(v,K,!0),ee=lr.getRSSvalue(b,X,!1),oe=we.EVEN_TOTAL_SUBSET[G],le=we.GSUM[G],ge=Z*oe+ee+le;return new Er(ge,z)}static isNotA1left(s,o,u){return!(s.getValue()==0&&o&&u)}adjustOddEvenCounts(s){let o=st.sum(new Int32Array(this.getOddCounts())),u=st.sum(new Int32Array(this.getEvenCounts())),f=!1,i=!1;o>13?i=!0:o<4&&(f=!0);let c=!1,m=!1;u>13?m=!0:u<4&&(c=!0);let p=o+u-s,v=(o&1)==1,b=(u&1)==0;if(p==1)if(v){if(b)throw new Y;i=!0}else{if(!b)throw new Y;m=!0}else if(p==-1)if(v){if(b)throw new Y;f=!0}else{if(!b)throw new Y;c=!0}else if(p==0){if(v){if(!b)throw new Y;o<u?(f=!0,m=!0):(i=!0,c=!0)}else if(b)throw new Y}else throw new Y;if(f){if(i)throw new Y;we.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(i&&we.decrement(this.getOddCounts(),this.getOddRoundingErrors()),c){if(m)throw new Y;we.increment(this.getEvenCounts(),this.getOddRoundingErrors())}m&&we.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}we.SYMBOL_WIDEST=[7,5,4,3,1],we.EVEN_TOTAL_SUBSET=[4,20,52,104,204],we.GSUM=[0,348,1388,2948,3988],we.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],we.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],we.FINDER_PAT_A=0,we.FINDER_PAT_B=1,we.FINDER_PAT_C=2,we.FINDER_PAT_D=3,we.FINDER_PAT_E=4,we.FINDER_PAT_F=5,we.FINDER_PATTERN_SEQUENCES=[[we.FINDER_PAT_A,we.FINDER_PAT_A],[we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B],[we.FINDER_PAT_A,we.FINDER_PAT_C,we.FINDER_PAT_B,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_C],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_E,we.FINDER_PAT_B,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F],[we.FINDER_PAT_A,we.FINDER_PAT_A,we.FINDER_PAT_B,we.FINDER_PAT_B,we.FINDER_PAT_C,we.FINDER_PAT_D,we.FINDER_PAT_D,we.FINDER_PAT_E,we.FINDER_PAT_E,we.FINDER_PAT_F,we.FINDER_PAT_F]],we.MAX_PAIRS=11;class so extends Er{constructor(s,o,u){super(s,o),this.count=0,this.finderPattern=u}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Ut extends An{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,u){const f=this.decodePair(o,!1,s,u);Ut.addOrTally(this.possibleLeftPairs,f),o.reverse();let i=this.decodePair(o,!0,s,u);Ut.addOrTally(this.possibleRightPairs,i),o.reverse();for(let c of this.possibleLeftPairs)if(c.getCount()>1){for(let m of this.possibleRightPairs)if(m.getCount()>1&&Ut.checkChecksum(c,m))return Ut.constructResult(c,m)}throw new Y}static addOrTally(s,o){if(o==null)return;let u=!1;for(let f of s)if(f.getValue()===o.getValue()){f.incrementCount(),u=!0;break}u||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let u=4537077*s.getValue()+o.getValue(),f=new String(u).toString(),i=new re;for(let v=13-f.length;v>0;v--)i.append("0");i.append(f);let c=0;for(let v=0;v<13;v++){let b=i.charAt(v).charCodeAt(0)-48;c+=v&1?b:3*b}c=10-c%10,c===10&&(c=0),i.append(c.toString());let m=s.getFinderPattern().getResultPoints(),p=o.getFinderPattern().getResultPoints();return new $e(i.toString(),null,0,[m[0],m[1],p[0],p[1]],_e.RSS_14,new Date().getTime())}static checkChecksum(s,o){let u=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,f=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return f>72&&f--,f>8&&f--,u===f}decodePair(s,o,u,f){try{let i=this.findFinderPattern(s,o),c=this.parseFoundFinderPattern(s,u,o,i),m=f==null?null:f.get($.NEED_RESULT_POINT_CALLBACK);if(m!=null){let b=(i[0]+i[1])/2;o&&(b=s.getSize()-1-b),m.foundPossibleResultPoint(new Me(b,u))}let p=this.decodeDataCharacter(s,c,!0),v=this.decodeDataCharacter(s,c,!1);return new so(1597*p.getValue()+v.getValue(),p.getChecksumPortion()+4*v.getChecksumPortion(),c)}catch{return null}}decodeDataCharacter(s,o,u){let f=this.getDataCharacterCounters();for(let L=0;L<f.length;L++)f[L]=0;if(u)Ot.recordPatternInReverse(s,o.getStartEnd()[0],f);else{Ot.recordPattern(s,o.getStartEnd()[1]+1,f);for(let L=0,z=f.length-1;L<z;L++,z--){let G=f[L];f[L]=f[z],f[z]=G}}let i=u?16:15,c=st.sum(new Int32Array(f))/i,m=this.getOddCounts(),p=this.getEvenCounts(),v=this.getOddRoundingErrors(),b=this.getEvenRoundingErrors();for(let L=0;L<f.length;L++){let z=f[L]/c,G=Math.floor(z+.5);G<1?G=1:G>8&&(G=8);let K=Math.floor(L/2);L&1?(p[K]=G,b[K]=z-G):(m[K]=G,v[K]=z-G)}this.adjustOddEvenCounts(u,i);let C=0,S=0;for(let L=m.length-1;L>=0;L--)S*=9,S+=m[L],C+=m[L];let j=0,P=0;for(let L=p.length-1;L>=0;L--)j*=9,j+=p[L],P+=p[L];let B=S+3*j;if(u){if(C&1||C>12||C<4)throw new Y;let L=(12-C)/2,z=Ut.OUTSIDE_ODD_WIDEST[L],G=9-z,K=lr.getRSSvalue(m,z,!1),X=lr.getRSSvalue(p,G,!0),Z=Ut.OUTSIDE_EVEN_TOTAL_SUBSET[L],ee=Ut.OUTSIDE_GSUM[L];return new Er(K*Z+X+ee,B)}else{if(P&1||P>10||P<4)throw new Y;let L=(10-P)/2,z=Ut.INSIDE_ODD_WIDEST[L],G=9-z,K=lr.getRSSvalue(m,z,!0),X=lr.getRSSvalue(p,G,!1),Z=Ut.INSIDE_ODD_TOTAL_SUBSET[L],ee=Ut.INSIDE_GSUM[L];return new Er(X*Z+K+ee,B)}}findFinderPattern(s,o){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let f=s.getSize(),i=!1,c=0;for(;c<f&&(i=!s.get(c),o!==i);)c++;let m=0,p=c;for(let v=c;v<f;v++)if(s.get(v)!==i)u[m]++;else{if(m===3){if(An.isFinderPattern(u))return[p,v];p+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,m--}else m++;u[m]=1,i=!i}throw new Y}parseFoundFinderPattern(s,o,u,f){let i=s.get(f[0]),c=f[0]-1;for(;c>=0&&i!==s.get(c);)c--;c++;const m=f[0]-c,p=this.getDecodeFinderCounters(),v=new Int32Array(p.length);O.arraycopy(p,0,v,1,p.length-1),v[0]=m;const b=this.parseFinderValue(v,Ut.FINDER_PATTERNS);let C=c,S=f[1];return u&&(C=s.getSize()-1-C,S=s.getSize()-1-S),new ss(b,[c,f[1]],C,S,o)}adjustOddEvenCounts(s,o){let u=st.sum(new Int32Array(this.getOddCounts())),f=st.sum(new Int32Array(this.getEvenCounts())),i=!1,c=!1,m=!1,p=!1;s?(u>12?c=!0:u<4&&(i=!0),f>12?p=!0:f<4&&(m=!0)):(u>11?c=!0:u<5&&(i=!0),f>10?p=!0:f<4&&(m=!0));let v=u+f-o,b=(u&1)===(s?1:0),C=(f&1)===1;if(v===1)if(b){if(C)throw new Y;c=!0}else{if(!C)throw new Y;p=!0}else if(v===-1)if(b){if(C)throw new Y;i=!0}else{if(!C)throw new Y;m=!0}else if(v===0){if(b){if(!C)throw new Y;u<f?(i=!0,p=!0):(c=!0,m=!0)}else if(C)throw new Y}else throw new Y;if(i){if(c)throw new Y;An.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&An.decrement(this.getOddCounts(),this.getOddRoundingErrors()),m){if(p)throw new Y;An.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&An.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Ut.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Ut.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Ut.OUTSIDE_GSUM=[0,161,961,2015,2715],Ut.INSIDE_GSUM=[0,336,1036,1516],Ut.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Ut.INSIDE_ODD_WIDEST=[2,4,6,8],Ut.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class js extends Ot{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const u=s?s.get($.POSSIBLE_FORMATS):null,f=s&&s.get($.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;u?((u.includes(_e.EAN_13)||u.includes(_e.UPC_A)||u.includes(_e.EAN_8)||u.includes(_e.UPC_E))&&this.readers.push(new Il(s)),u.includes(_e.CODE_39)&&this.readers.push(new Pt(f)),u.includes(_e.CODE_128)&&this.readers.push(new Ie),u.includes(_e.ITF)&&this.readers.push(new Ae),u.includes(_e.RSS_14)&&this.readers.push(new Ut),u.includes(_e.RSS_EXPANDED)&&this.readers.push(new we(this.verbose))):(this.readers.push(new Il(s)),this.readers.push(new Pt),this.readers.push(new Il(s)),this.readers.push(new Ie),this.readers.push(new Ae),this.readers.push(new Ut),this.readers.push(new we(this.verbose)))}decodeRow(s,o,u){for(let f=0;f<this.readers.length;f++)try{return this.readers[f].decodeRow(s,o,u)}catch{}throw new Y}reset(){this.readers.forEach(s=>s.reset())}}class Qs extends We{constructor(s=500,o){super(new js(o),s,o)}}class vt{constructor(s,o,u){this.ecCodewords=s,this.ecBlocks=[o],u&&this.ecBlocks.push(u)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ft{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class at{constructor(s,o,u,f,i,c){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=u,this.dataRegionSizeRows=f,this.dataRegionSizeColumns=i,this.ecBlocks=c;let m=0;const p=c.getECCodewords(),v=c.getECBlocks();for(let b of v)m+=b.getCount()*(b.getDataCodewords()+p);this.totalCodewords=m}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if(s&1||o&1)throw new F;for(let u of at.VERSIONS)if(u.symbolSizeRows===s&&u.symbolSizeColumns===o)return u;throw new F}toString(){return""+this.versionNumber}static buildVersions(){return[new at(1,10,10,8,8,new vt(5,new ft(1,3))),new at(2,12,12,10,10,new vt(7,new ft(1,5))),new at(3,14,14,12,12,new vt(10,new ft(1,8))),new at(4,16,16,14,14,new vt(12,new ft(1,12))),new at(5,18,18,16,16,new vt(14,new ft(1,18))),new at(6,20,20,18,18,new vt(18,new ft(1,22))),new at(7,22,22,20,20,new vt(20,new ft(1,30))),new at(8,24,24,22,22,new vt(24,new ft(1,36))),new at(9,26,26,24,24,new vt(28,new ft(1,44))),new at(10,32,32,14,14,new vt(36,new ft(1,62))),new at(11,36,36,16,16,new vt(42,new ft(1,86))),new at(12,40,40,18,18,new vt(48,new ft(1,114))),new at(13,44,44,20,20,new vt(56,new ft(1,144))),new at(14,48,48,22,22,new vt(68,new ft(1,174))),new at(15,52,52,24,24,new vt(42,new ft(2,102))),new at(16,64,64,14,14,new vt(56,new ft(2,140))),new at(17,72,72,16,16,new vt(36,new ft(4,92))),new at(18,80,80,18,18,new vt(48,new ft(4,114))),new at(19,88,88,20,20,new vt(56,new ft(4,144))),new at(20,96,96,22,22,new vt(68,new ft(4,174))),new at(21,104,104,24,24,new vt(56,new ft(6,136))),new at(22,120,120,18,18,new vt(68,new ft(6,175))),new at(23,132,132,20,20,new vt(62,new ft(8,163))),new at(24,144,144,22,22,new vt(62,new ft(8,156),new ft(2,155))),new at(25,8,18,6,16,new vt(7,new ft(1,5))),new at(26,8,32,6,14,new vt(11,new ft(1,10))),new at(27,12,26,10,24,new vt(14,new ft(1,16))),new at(28,12,36,10,16,new vt(18,new ft(1,22))),new at(29,16,36,14,16,new vt(24,new ft(1,32))),new at(30,16,48,14,22,new vt(28,new ft(1,49)))]}}at.VERSIONS=at.buildVersions();class it{constructor(s){const o=s.getHeight();if(o<8||o>144||o&1)throw new F;this.version=it.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new ae(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),u=s.getWidth();return at.getVersionForDimensions(o,u)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,u=4,f=0;const i=this.mappingBitMatrix.getHeight(),c=this.mappingBitMatrix.getWidth();let m=!1,p=!1,v=!1,b=!1;do if(u===i&&f===0&&!m)s[o++]=this.readCorner1(i,c)&255,u-=2,f+=2,m=!0;else if(u===i-2&&f===0&&c&3&&!p)s[o++]=this.readCorner2(i,c)&255,u-=2,f+=2,p=!0;else if(u===i+4&&f===2&&!(c&7)&&!v)s[o++]=this.readCorner3(i,c)&255,u-=2,f+=2,v=!0;else if(u===i-2&&f===0&&(c&7)===4&&!b)s[o++]=this.readCorner4(i,c)&255,u-=2,f+=2,b=!0;else{do u<i&&f>=0&&!this.readMappingMatrix.get(f,u)&&(s[o++]=this.readUtah(u,f,i,c)&255),u-=2,f+=2;while(u>=0&&f<c);u+=1,f+=3;do u>=0&&f<c&&!this.readMappingMatrix.get(f,u)&&(s[o++]=this.readUtah(u,f,i,c)&255),u+=2,f-=2;while(u<i&&f>=0);u+=3,f+=1}while(u<i||f<c);if(o!==this.version.getTotalCodewords())throw new F;return s}readModule(s,o,u,f){return s<0&&(s+=u,o+=4-(u+4&7)),o<0&&(o+=f,s+=4-(f+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,u,f){let i=0;return this.readModule(s-2,o-2,u,f)&&(i|=1),i<<=1,this.readModule(s-2,o-1,u,f)&&(i|=1),i<<=1,this.readModule(s-1,o-2,u,f)&&(i|=1),i<<=1,this.readModule(s-1,o-1,u,f)&&(i|=1),i<<=1,this.readModule(s-1,o,u,f)&&(i|=1),i<<=1,this.readModule(s,o-2,u,f)&&(i|=1),i<<=1,this.readModule(s,o-1,u,f)&&(i|=1),i<<=1,this.readModule(s,o,u,f)&&(i|=1),i}readCorner1(s,o){let u=0;return this.readModule(s-1,0,s,o)&&(u|=1),u<<=1,this.readModule(s-1,1,s,o)&&(u|=1),u<<=1,this.readModule(s-1,2,s,o)&&(u|=1),u<<=1,this.readModule(0,o-2,s,o)&&(u|=1),u<<=1,this.readModule(0,o-1,s,o)&&(u|=1),u<<=1,this.readModule(1,o-1,s,o)&&(u|=1),u<<=1,this.readModule(2,o-1,s,o)&&(u|=1),u<<=1,this.readModule(3,o-1,s,o)&&(u|=1),u}readCorner2(s,o){let u=0;return this.readModule(s-3,0,s,o)&&(u|=1),u<<=1,this.readModule(s-2,0,s,o)&&(u|=1),u<<=1,this.readModule(s-1,0,s,o)&&(u|=1),u<<=1,this.readModule(0,o-4,s,o)&&(u|=1),u<<=1,this.readModule(0,o-3,s,o)&&(u|=1),u<<=1,this.readModule(0,o-2,s,o)&&(u|=1),u<<=1,this.readModule(0,o-1,s,o)&&(u|=1),u<<=1,this.readModule(1,o-1,s,o)&&(u|=1),u}readCorner3(s,o){let u=0;return this.readModule(s-1,0,s,o)&&(u|=1),u<<=1,this.readModule(s-1,o-1,s,o)&&(u|=1),u<<=1,this.readModule(0,o-3,s,o)&&(u|=1),u<<=1,this.readModule(0,o-2,s,o)&&(u|=1),u<<=1,this.readModule(0,o-1,s,o)&&(u|=1),u<<=1,this.readModule(1,o-3,s,o)&&(u|=1),u<<=1,this.readModule(1,o-2,s,o)&&(u|=1),u<<=1,this.readModule(1,o-1,s,o)&&(u|=1),u}readCorner4(s,o){let u=0;return this.readModule(s-3,0,s,o)&&(u|=1),u<<=1,this.readModule(s-2,0,s,o)&&(u|=1),u<<=1,this.readModule(s-1,0,s,o)&&(u|=1),u<<=1,this.readModule(0,o-2,s,o)&&(u|=1),u<<=1,this.readModule(0,o-1,s,o)&&(u|=1),u<<=1,this.readModule(1,o-1,s,o)&&(u|=1),u<<=1,this.readModule(2,o-1,s,o)&&(u|=1),u<<=1,this.readModule(3,o-1,s,o)&&(u|=1),u}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),u=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new E("Dimension of bitMatrix must match the version size");const f=this.version.getDataRegionSizeRows(),i=this.version.getDataRegionSizeColumns(),c=o/f|0,m=u/i|0,p=c*f,v=m*i,b=new ae(v,p);for(let C=0;C<c;++C){const S=C*f;for(let j=0;j<m;++j){const P=j*i;for(let B=0;B<f;++B){const L=C*(f+2)+1+B,z=S+B;for(let G=0;G<i;++G){const K=j*(i+2)+1+G;if(s.get(K,L)){const X=P+G;b.set(X,z)}}}}}return b}}class io{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const u=o.getECBlocks();let f=0;const i=u.getECBlocks();for(let B of i)f+=B.getCount();const c=new Array(f);let m=0;for(let B of i)for(let L=0;L<B.getCount();L++){const z=B.getDataCodewords(),G=u.getECCodewords()+z;c[m++]=new io(z,new Uint8Array(G))}const v=c[0].codewords.length-u.getECCodewords(),b=v-1;let C=0;for(let B=0;B<b;B++)for(let L=0;L<m;L++)c[L].codewords[B]=s[C++];const S=o.getVersionNumber()===24,j=S?8:m;for(let B=0;B<j;B++)c[B].codewords[v-1]=s[C++];const P=c[0].codewords.length;for(let B=v;B<P;B++)for(let L=0;L<m;L++){const z=S?(L+8)%m:L,G=S&&z>7?B-1:B;c[z].codewords[G]=s[C++]}if(C!==s.length)throw new E;return c}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ao{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new E(""+s);let o=0,u=this.bitOffset,f=this.byteOffset;const i=this.bytes;if(u>0){const c=8-u,m=s<c?s:c,p=c-m,v=255>>8-m<<p;o=(i[f]&v)>>p,s-=m,u+=m,u===8&&(u=0,f++)}if(s>0){for(;s>=8;)o=o<<8|i[f]&255,f++,s-=8;if(s>0){const c=8-s,m=255>>c<<c;o=o<<s|(i[f]&m)>>c,u+=s}}return this.bitOffset=u,this.byteOffset=f,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var sn;(function(k){k[k.PAD_ENCODE=0]="PAD_ENCODE",k[k.ASCII_ENCODE=1]="ASCII_ENCODE",k[k.C40_ENCODE=2]="C40_ENCODE",k[k.TEXT_ENCODE=3]="TEXT_ENCODE",k[k.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",k[k.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",k[k.BASE256_ENCODE=6]="BASE256_ENCODE"})(sn||(sn={}));class xt{static decode(s){const o=new ao(s),u=new re,f=new re,i=new Array;let c=sn.ASCII_ENCODE;do if(c===sn.ASCII_ENCODE)c=this.decodeAsciiSegment(o,u,f);else{switch(c){case sn.C40_ENCODE:this.decodeC40Segment(o,u);break;case sn.TEXT_ENCODE:this.decodeTextSegment(o,u);break;case sn.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,u);break;case sn.EDIFACT_ENCODE:this.decodeEdifactSegment(o,u);break;case sn.BASE256_ENCODE:this.decodeBase256Segment(o,u,i);break;default:throw new F}c=sn.ASCII_ENCODE}while(c!==sn.PAD_ENCODE&&o.available()>0);return f.length()>0&&u.append(f.toString()),new Be(s,u.toString(),i.length===0?null:i,null)}static decodeAsciiSegment(s,o,u){let f=!1;do{let i=s.readBits(8);if(i===0)throw new F;if(i<=128)return f&&(i+=128),o.append(String.fromCharCode(i-1)),sn.ASCII_ENCODE;if(i===129)return sn.PAD_ENCODE;if(i<=229){const c=i-130;c<10&&o.append("0"),o.append(""+c)}else switch(i){case 230:return sn.C40_ENCODE;case 231:return sn.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:f=!0;break;case 236:o.append("[)>05"),u.insert(0,"");break;case 237:o.append("[)>06"),u.insert(0,"");break;case 238:return sn.ANSIX12_ENCODE;case 239:return sn.TEXT_ENCODE;case 240:return sn.EDIFACT_ENCODE;case 241:break;default:if(i!==254||s.available()!==0)throw new F;break}}while(s.available()>0);return sn.ASCII_ENCODE}static decodeC40Segment(s,o){let u=!1;const f=[];let i=0;do{if(s.available()===8)return;const c=s.readBits(8);if(c===254)return;this.parseTwoBytes(c,s.readBits(8),f);for(let m=0;m<3;m++){const p=f[m];switch(i){case 0:if(p<3)i=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[p];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else throw new F;break;case 1:u?(o.append(String.fromCharCode(p+128)),u=!1):o.append(String.fromCharCode(p)),i=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[p];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else switch(p){case 27:o.append("");break;case 30:u=!0;break;default:throw new F}i=0;break;case 3:u?(o.append(String.fromCharCode(p+224)),u=!1):o.append(String.fromCharCode(p+96)),i=0;break;default:throw new F}}}while(s.available()>0)}static decodeTextSegment(s,o){let u=!1,f=[],i=0;do{if(s.available()===8)return;const c=s.readBits(8);if(c===254)return;this.parseTwoBytes(c,s.readBits(8),f);for(let m=0;m<3;m++){const p=f[m];switch(i){case 0:if(p<3)i=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[p];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else throw new F;break;case 1:u?(o.append(String.fromCharCode(p+128)),u=!1):o.append(String.fromCharCode(p)),i=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[p];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v)}else switch(p){case 27:o.append("");break;case 30:u=!0;break;default:throw new F}i=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[p];u?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),u=!1):o.append(v),i=0}else throw new F;break;default:throw new F}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const u=[];do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let i=0;i<3;i++){const c=u[i];switch(c){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(c<14)o.append(String.fromCharCode(c+44));else if(c<40)o.append(String.fromCharCode(c+51));else throw new F;break}}}while(s.available()>0)}static parseTwoBytes(s,o,u){let f=(s<<8)+o-1,i=Math.floor(f/1600);u[0]=i,f-=i*1600,i=Math.floor(f/40),u[1]=i,u[2]=f-i*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let u=0;u<4;u++){let f=s.readBits(6);if(f===31){const i=8-s.getBitOffset();i!==8&&s.readBits(i);return}f&32||(f|=64),o.append(String.fromCharCode(f))}}while(s.available()>0)}static decodeBase256Segment(s,o,u){let f=1+s.getByteOffset();const i=this.unrandomize255State(s.readBits(8),f++);let c;if(i===0?c=s.available()/8|0:i<250?c=i:c=250*(i-249)+this.unrandomize255State(s.readBits(8),f++),c<0)throw new F;const m=new Uint8Array(c);for(let p=0;p<c;p++){if(s.available()<8)throw new F;m[p]=this.unrandomize255State(s.readBits(8),f++)}u.push(m);try{o.append(he.decode(m,me.ISO88591))}catch(p){throw new jt("Platform does not support required encoding: "+p.message)}}static unrandomize255State(s,o){const u=149*o%255+1,f=s-u;return f>=0?f:f+256}}xt.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],xt.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],xt.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],xt.TEXT_SHIFT2_SET_CHARS=xt.C40_SHIFT2_SET_CHARS,xt.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class ha{constructor(){this.rsDecoder=new ns(Ve.DATA_MATRIX_FIELD_256)}decode(s){const o=new it(s),u=o.getVersion(),f=o.readCodewords(),i=io.getDataBlocks(f,u);let c=0;for(let v of i)c+=v.getNumDataCodewords();const m=new Uint8Array(c),p=i.length;for(let v=0;v<p;v++){const b=i[v],C=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(C,S);for(let j=0;j<S;j++)m[j*p+v]=C[j]}return xt.decode(m)}correctErrors(s,o){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-o)}catch{throw new I}for(let f=0;f<o;f++)s[f]=u[f]}}class Ft{constructor(s){this.image=s,this.rectangleDetector=new or(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new Y;o=this.shiftToModuleCenter(o);const u=o[0],f=o[1],i=o[2],c=o[3];let m=this.transitionsBetween(u,c)+1,p=this.transitionsBetween(i,c)+1;(m&1)===1&&(m+=1),(p&1)===1&&(p+=1),4*m<7*p&&4*p<7*m&&(m=p=Math.max(m,p));let v=Ft.sampleGrid(this.image,u,f,i,c,m,p);return new _s(v,[u,f,i,c])}static shiftPoint(s,o,u){let f=(o.getX()-s.getX())/(u+1),i=(o.getY()-s.getY())/(u+1);return new Me(s.getX()+f,s.getY()+i)}static moveAway(s,o,u){let f=s.getX(),i=s.getY();return f<o?f-=1:f+=1,i<u?i-=1:i+=1,new Me(f,i)}detectSolid1(s){let o=s[0],u=s[1],f=s[3],i=s[2],c=this.transitionsBetween(o,u),m=this.transitionsBetween(u,f),p=this.transitionsBetween(f,i),v=this.transitionsBetween(i,o),b=c,C=[i,o,u,f];return b>m&&(b=m,C[0]=o,C[1]=u,C[2]=f,C[3]=i),b>p&&(b=p,C[0]=u,C[1]=f,C[2]=i,C[3]=o),b>v&&(C[0]=f,C[1]=i,C[2]=o,C[3]=u),C}detectSolid2(s){let o=s[0],u=s[1],f=s[2],i=s[3],c=this.transitionsBetween(o,i),m=Ft.shiftPoint(u,f,(c+1)*4),p=Ft.shiftPoint(f,u,(c+1)*4),v=this.transitionsBetween(m,o),b=this.transitionsBetween(p,i);return v<b?(s[0]=o,s[1]=u,s[2]=f,s[3]=i):(s[0]=u,s[1]=f,s[2]=i,s[3]=o),s}correctTopRight(s){let o=s[0],u=s[1],f=s[2],i=s[3],c=this.transitionsBetween(o,i),m=this.transitionsBetween(u,i),p=Ft.shiftPoint(o,u,(m+1)*4),v=Ft.shiftPoint(f,u,(c+1)*4);c=this.transitionsBetween(p,i),m=this.transitionsBetween(v,i);let b=new Me(i.getX()+(f.getX()-u.getX())/(c+1),i.getY()+(f.getY()-u.getY())/(c+1)),C=new Me(i.getX()+(o.getX()-u.getX())/(m+1),i.getY()+(o.getY()-u.getY())/(m+1));if(!this.isValid(b))return this.isValid(C)?C:null;if(!this.isValid(C))return b;let S=this.transitionsBetween(p,b)+this.transitionsBetween(v,b),j=this.transitionsBetween(p,C)+this.transitionsBetween(v,C);return S>j?b:C}shiftToModuleCenter(s){let o=s[0],u=s[1],f=s[2],i=s[3],c=this.transitionsBetween(o,i)+1,m=this.transitionsBetween(f,i)+1,p=Ft.shiftPoint(o,u,m*4),v=Ft.shiftPoint(f,u,c*4);c=this.transitionsBetween(p,i)+1,m=this.transitionsBetween(v,i)+1,(c&1)===1&&(c+=1),(m&1)===1&&(m+=1);let b=(o.getX()+u.getX()+f.getX()+i.getX())/4,C=(o.getY()+u.getY()+f.getY()+i.getY())/4;o=Ft.moveAway(o,b,C),u=Ft.moveAway(u,b,C),f=Ft.moveAway(f,b,C),i=Ft.moveAway(i,b,C);let S,j;return p=Ft.shiftPoint(o,u,m*4),p=Ft.shiftPoint(p,i,c*4),S=Ft.shiftPoint(u,o,m*4),S=Ft.shiftPoint(S,f,c*4),v=Ft.shiftPoint(f,i,m*4),v=Ft.shiftPoint(v,u,c*4),j=Ft.shiftPoint(i,f,m*4),j=Ft.shiftPoint(j,o,c*4),[p,S,v,j]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,u,f,i,c,m){return Xe.getInstance().sampleGrid(s,c,m,.5,.5,c-.5,.5,c-.5,m-.5,.5,m-.5,o.getX(),o.getY(),i.getX(),i.getY(),f.getX(),f.getY(),u.getX(),u.getY())}transitionsBetween(s,o){let u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),i=Math.trunc(o.getX()),c=Math.trunc(o.getY()),m=Math.abs(c-f)>Math.abs(i-u);if(m){let B=u;u=f,f=B,B=i,i=c,c=B}let p=Math.abs(i-u),v=Math.abs(c-f),b=-p/2,C=f<c?1:-1,S=u<i?1:-1,j=0,P=this.image.get(m?f:u,m?u:f);for(let B=u,L=f;B!==i;B+=S){let z=this.image.get(m?L:B,m?B:L);if(z!==P&&(j++,P=z),b+=v,b>0){if(L===c)break;L+=C,b-=p}}return j}}class Qn{constructor(){this.decoder=new ha}decode(s,o=null){let u,f;if(o!=null&&o.has($.PURE_BARCODE)){const v=Qn.extractPureBits(s.getBlackMatrix());u=this.decoder.decode(v),f=Qn.NO_POINTS}else{const v=new Ft(s.getBlackMatrix()).detect();u=this.decoder.decode(v.getBits()),f=v.getPoints()}const i=u.getRawBytes(),c=new $e(u.getText(),i,8*i.length,f,_e.DATA_MATRIX,O.currentTimeMillis()),m=u.getByteSegments();m!=null&&c.putMetadata(Je.BYTE_SEGMENTS,m);const p=u.getECLevel();return p!=null&&c.putMetadata(Je.ERROR_CORRECTION_LEVEL,p),c}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(o==null||u==null)throw new Y;const f=this.moduleSize(o,s);let i=o[1];const c=u[1];let m=o[0];const v=(u[0]-m+1)/f,b=(c-i+1)/f;if(v<=0||b<=0)throw new Y;const C=f/2;i+=C,m+=C;const S=new ae(v,b);for(let j=0;j<b;j++){const P=i+j*f;for(let B=0;B<v;B++)s.get(m+B*f,P)&&S.set(B,j)}return S}static moduleSize(s,o){const u=o.getWidth();let f=s[0];const i=s[1];for(;f<u&&o.get(f,i);)f++;if(f===u)throw new Y;const c=f-s[0];if(c===0)throw new Y;return c}}Qn.NO_POINTS=[];class jl extends We{constructor(s=500){super(new Qn,s)}}var ks;(function(k){k[k.L=0]="L",k[k.M=1]="M",k[k.Q=2]="Q",k[k.H=3]="H"})(ks||(ks={}));class Nt{constructor(s,o,u){this.value=s,this.stringValue=o,this.bits=u,Nt.FOR_BITS.set(u,this),Nt.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return Nt.L;case"M":return Nt.M;case"Q":return Nt.Q;case"H":return Nt.H;default:throw new w(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof Nt))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=Nt.FOR_BITS.size)throw new E;return Nt.FOR_BITS.get(s)}}Nt.FOR_BITS=new Map,Nt.FOR_VALUE=new Map,Nt.L=new Nt(ks.L,"L",1),Nt.M=new Nt(ks.M,"M",0),Nt.Q=new Nt(ks.Q,"Q",3),Nt.H=new Nt(ks.H,"H",2);class bn{constructor(s){this.errorCorrectionLevel=Nt.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return _.bitCount(s^o)}static decodeFormatInformation(s,o){const u=bn.doDecodeFormatInformation(s,o);return u!==null?u:bn.doDecodeFormatInformation(s^bn.FORMAT_INFO_MASK_QR,o^bn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let u=Number.MAX_SAFE_INTEGER,f=0;for(const i of bn.FORMAT_INFO_DECODE_LOOKUP){const c=i[0];if(c===s||c===o)return new bn(i[1]);let m=bn.numBitsDiffering(s,c);m<u&&(f=i[1],u=m),s!==o&&(m=bn.numBitsDiffering(o,c),m<u&&(f=i[1],u=m))}return u<=3?new bn(f):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof bn))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}bn.FORMAT_INFO_MASK_QR=21522,bn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class ie{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const u of o)s+=u.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class W{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ze{constructor(s,o,...u){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=u;let f=0;const i=u[0].getECCodewordsPerBlock(),c=u[0].getECBlocks();for(const m of c)f+=m.getCount()*(m.getDataCodewords()+i);this.totalCodewords=f}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new F;try{return this.getVersionForNumber((s-17)/4)}catch{throw new F}}static getVersionForNumber(s){if(s<1||s>40)throw new E;return ze.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,u=0;for(let f=0;f<ze.VERSION_DECODE_INFO.length;f++){const i=ze.VERSION_DECODE_INFO[f];if(i===s)return ze.getVersionForNumber(f+7);const c=bn.numBitsDiffering(s,i);c<o&&(u=f+7,o=c)}return o<=3?ze.getVersionForNumber(u):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new ae(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const u=this.alignmentPatternCenters.length;for(let f=0;f<u;f++){const i=this.alignmentPatternCenters[f]-2;for(let c=0;c<u;c++)f===0&&(c===0||c===u-1)||f===u-1&&c===0||o.setRegion(this.alignmentPatternCenters[c]-2,i,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}ze.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ze.VERSIONS=[new ze(1,new Int32Array(0),new ie(7,new W(1,19)),new ie(10,new W(1,16)),new ie(13,new W(1,13)),new ie(17,new W(1,9))),new ze(2,Int32Array.from([6,18]),new ie(10,new W(1,34)),new ie(16,new W(1,28)),new ie(22,new W(1,22)),new ie(28,new W(1,16))),new ze(3,Int32Array.from([6,22]),new ie(15,new W(1,55)),new ie(26,new W(1,44)),new ie(18,new W(2,17)),new ie(22,new W(2,13))),new ze(4,Int32Array.from([6,26]),new ie(20,new W(1,80)),new ie(18,new W(2,32)),new ie(26,new W(2,24)),new ie(16,new W(4,9))),new ze(5,Int32Array.from([6,30]),new ie(26,new W(1,108)),new ie(24,new W(2,43)),new ie(18,new W(2,15),new W(2,16)),new ie(22,new W(2,11),new W(2,12))),new ze(6,Int32Array.from([6,34]),new ie(18,new W(2,68)),new ie(16,new W(4,27)),new ie(24,new W(4,19)),new ie(28,new W(4,15))),new ze(7,Int32Array.from([6,22,38]),new ie(20,new W(2,78)),new ie(18,new W(4,31)),new ie(18,new W(2,14),new W(4,15)),new ie(26,new W(4,13),new W(1,14))),new ze(8,Int32Array.from([6,24,42]),new ie(24,new W(2,97)),new ie(22,new W(2,38),new W(2,39)),new ie(22,new W(4,18),new W(2,19)),new ie(26,new W(4,14),new W(2,15))),new ze(9,Int32Array.from([6,26,46]),new ie(30,new W(2,116)),new ie(22,new W(3,36),new W(2,37)),new ie(20,new W(4,16),new W(4,17)),new ie(24,new W(4,12),new W(4,13))),new ze(10,Int32Array.from([6,28,50]),new ie(18,new W(2,68),new W(2,69)),new ie(26,new W(4,43),new W(1,44)),new ie(24,new W(6,19),new W(2,20)),new ie(28,new W(6,15),new W(2,16))),new ze(11,Int32Array.from([6,30,54]),new ie(20,new W(4,81)),new ie(30,new W(1,50),new W(4,51)),new ie(28,new W(4,22),new W(4,23)),new ie(24,new W(3,12),new W(8,13))),new ze(12,Int32Array.from([6,32,58]),new ie(24,new W(2,92),new W(2,93)),new ie(22,new W(6,36),new W(2,37)),new ie(26,new W(4,20),new W(6,21)),new ie(28,new W(7,14),new W(4,15))),new ze(13,Int32Array.from([6,34,62]),new ie(26,new W(4,107)),new ie(22,new W(8,37),new W(1,38)),new ie(24,new W(8,20),new W(4,21)),new ie(22,new W(12,11),new W(4,12))),new ze(14,Int32Array.from([6,26,46,66]),new ie(30,new W(3,115),new W(1,116)),new ie(24,new W(4,40),new W(5,41)),new ie(20,new W(11,16),new W(5,17)),new ie(24,new W(11,12),new W(5,13))),new ze(15,Int32Array.from([6,26,48,70]),new ie(22,new W(5,87),new W(1,88)),new ie(24,new W(5,41),new W(5,42)),new ie(30,new W(5,24),new W(7,25)),new ie(24,new W(11,12),new W(7,13))),new ze(16,Int32Array.from([6,26,50,74]),new ie(24,new W(5,98),new W(1,99)),new ie(28,new W(7,45),new W(3,46)),new ie(24,new W(15,19),new W(2,20)),new ie(30,new W(3,15),new W(13,16))),new ze(17,Int32Array.from([6,30,54,78]),new ie(28,new W(1,107),new W(5,108)),new ie(28,new W(10,46),new W(1,47)),new ie(28,new W(1,22),new W(15,23)),new ie(28,new W(2,14),new W(17,15))),new ze(18,Int32Array.from([6,30,56,82]),new ie(30,new W(5,120),new W(1,121)),new ie(26,new W(9,43),new W(4,44)),new ie(28,new W(17,22),new W(1,23)),new ie(28,new W(2,14),new W(19,15))),new ze(19,Int32Array.from([6,30,58,86]),new ie(28,new W(3,113),new W(4,114)),new ie(26,new W(3,44),new W(11,45)),new ie(26,new W(17,21),new W(4,22)),new ie(26,new W(9,13),new W(16,14))),new ze(20,Int32Array.from([6,34,62,90]),new ie(28,new W(3,107),new W(5,108)),new ie(26,new W(3,41),new W(13,42)),new ie(30,new W(15,24),new W(5,25)),new ie(28,new W(15,15),new W(10,16))),new ze(21,Int32Array.from([6,28,50,72,94]),new ie(28,new W(4,116),new W(4,117)),new ie(26,new W(17,42)),new ie(28,new W(17,22),new W(6,23)),new ie(30,new W(19,16),new W(6,17))),new ze(22,Int32Array.from([6,26,50,74,98]),new ie(28,new W(2,111),new W(7,112)),new ie(28,new W(17,46)),new ie(30,new W(7,24),new W(16,25)),new ie(24,new W(34,13))),new ze(23,Int32Array.from([6,30,54,78,102]),new ie(30,new W(4,121),new W(5,122)),new ie(28,new W(4,47),new W(14,48)),new ie(30,new W(11,24),new W(14,25)),new ie(30,new W(16,15),new W(14,16))),new ze(24,Int32Array.from([6,28,54,80,106]),new ie(30,new W(6,117),new W(4,118)),new ie(28,new W(6,45),new W(14,46)),new ie(30,new W(11,24),new W(16,25)),new ie(30,new W(30,16),new W(2,17))),new ze(25,Int32Array.from([6,32,58,84,110]),new ie(26,new W(8,106),new W(4,107)),new ie(28,new W(8,47),new W(13,48)),new ie(30,new W(7,24),new W(22,25)),new ie(30,new W(22,15),new W(13,16))),new ze(26,Int32Array.from([6,30,58,86,114]),new ie(28,new W(10,114),new W(2,115)),new ie(28,new W(19,46),new W(4,47)),new ie(28,new W(28,22),new W(6,23)),new ie(30,new W(33,16),new W(4,17))),new ze(27,Int32Array.from([6,34,62,90,118]),new ie(30,new W(8,122),new W(4,123)),new ie(28,new W(22,45),new W(3,46)),new ie(30,new W(8,23),new W(26,24)),new ie(30,new W(12,15),new W(28,16))),new ze(28,Int32Array.from([6,26,50,74,98,122]),new ie(30,new W(3,117),new W(10,118)),new ie(28,new W(3,45),new W(23,46)),new ie(30,new W(4,24),new W(31,25)),new ie(30,new W(11,15),new W(31,16))),new ze(29,Int32Array.from([6,30,54,78,102,126]),new ie(30,new W(7,116),new W(7,117)),new ie(28,new W(21,45),new W(7,46)),new ie(30,new W(1,23),new W(37,24)),new ie(30,new W(19,15),new W(26,16))),new ze(30,Int32Array.from([6,26,52,78,104,130]),new ie(30,new W(5,115),new W(10,116)),new ie(28,new W(19,47),new W(10,48)),new ie(30,new W(15,24),new W(25,25)),new ie(30,new W(23,15),new W(25,16))),new ze(31,Int32Array.from([6,30,56,82,108,134]),new ie(30,new W(13,115),new W(3,116)),new ie(28,new W(2,46),new W(29,47)),new ie(30,new W(42,24),new W(1,25)),new ie(30,new W(23,15),new W(28,16))),new ze(32,Int32Array.from([6,34,60,86,112,138]),new ie(30,new W(17,115)),new ie(28,new W(10,46),new W(23,47)),new ie(30,new W(10,24),new W(35,25)),new ie(30,new W(19,15),new W(35,16))),new ze(33,Int32Array.from([6,30,58,86,114,142]),new ie(30,new W(17,115),new W(1,116)),new ie(28,new W(14,46),new W(21,47)),new ie(30,new W(29,24),new W(19,25)),new ie(30,new W(11,15),new W(46,16))),new ze(34,Int32Array.from([6,34,62,90,118,146]),new ie(30,new W(13,115),new W(6,116)),new ie(28,new W(14,46),new W(23,47)),new ie(30,new W(44,24),new W(7,25)),new ie(30,new W(59,16),new W(1,17))),new ze(35,Int32Array.from([6,30,54,78,102,126,150]),new ie(30,new W(12,121),new W(7,122)),new ie(28,new W(12,47),new W(26,48)),new ie(30,new W(39,24),new W(14,25)),new ie(30,new W(22,15),new W(41,16))),new ze(36,Int32Array.from([6,24,50,76,102,128,154]),new ie(30,new W(6,121),new W(14,122)),new ie(28,new W(6,47),new W(34,48)),new ie(30,new W(46,24),new W(10,25)),new ie(30,new W(2,15),new W(64,16))),new ze(37,Int32Array.from([6,28,54,80,106,132,158]),new ie(30,new W(17,122),new W(4,123)),new ie(28,new W(29,46),new W(14,47)),new ie(30,new W(49,24),new W(10,25)),new ie(30,new W(24,15),new W(46,16))),new ze(38,Int32Array.from([6,32,58,84,110,136,162]),new ie(30,new W(4,122),new W(18,123)),new ie(28,new W(13,46),new W(32,47)),new ie(30,new W(48,24),new W(14,25)),new ie(30,new W(42,15),new W(32,16))),new ze(39,Int32Array.from([6,26,54,82,110,138,166]),new ie(30,new W(20,117),new W(4,118)),new ie(28,new W(40,47),new W(7,48)),new ie(30,new W(43,24),new W(22,25)),new ie(30,new W(10,15),new W(67,16))),new ze(40,Int32Array.from([6,30,58,86,114,142,170]),new ie(30,new W(19,118),new W(6,119)),new ie(28,new W(18,47),new W(31,48)),new ie(30,new W(34,24),new W(34,25)),new ie(30,new W(20,15),new W(61,16)))];var dn;(function(k){k[k.DATA_MASK_000=0]="DATA_MASK_000",k[k.DATA_MASK_001=1]="DATA_MASK_001",k[k.DATA_MASK_010=2]="DATA_MASK_010",k[k.DATA_MASK_011=3]="DATA_MASK_011",k[k.DATA_MASK_100=4]="DATA_MASK_100",k[k.DATA_MASK_101=5]="DATA_MASK_101",k[k.DATA_MASK_110=6]="DATA_MASK_110",k[k.DATA_MASK_111=7]="DATA_MASK_111"})(dn||(dn={}));class cr{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let u=0;u<o;u++)for(let f=0;f<o;f++)this.isMasked(u,f)&&s.flip(f,u)}}cr.values=new Map([[dn.DATA_MASK_000,new cr(dn.DATA_MASK_000,(k,s)=>(k+s&1)===0)],[dn.DATA_MASK_001,new cr(dn.DATA_MASK_001,(k,s)=>(k&1)===0)],[dn.DATA_MASK_010,new cr(dn.DATA_MASK_010,(k,s)=>s%3===0)],[dn.DATA_MASK_011,new cr(dn.DATA_MASK_011,(k,s)=>(k+s)%3===0)],[dn.DATA_MASK_100,new cr(dn.DATA_MASK_100,(k,s)=>(Math.floor(k/2)+Math.floor(s/3)&1)===0)],[dn.DATA_MASK_101,new cr(dn.DATA_MASK_101,(k,s)=>k*s%6===0)],[dn.DATA_MASK_110,new cr(dn.DATA_MASK_110,(k,s)=>k*s%6<3)],[dn.DATA_MASK_111,new cr(dn.DATA_MASK_111,(k,s)=>(k+s+k*s%3&1)===0)]]);class yt{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new F;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let i=0;i<6;i++)s=this.copyBit(i,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let i=5;i>=0;i--)s=this.copyBit(8,i,s);const o=this.bitMatrix.getHeight();let u=0;const f=o-7;for(let i=o-1;i>=f;i--)u=this.copyBit(8,i,u);for(let i=o-8;i<o;i++)u=this.copyBit(i,8,u);if(this.parsedFormatInfo=bn.decodeFormatInformation(s,u),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new F}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return ze.getVersionForNumber(o);let u=0;const f=s-11;for(let c=5;c>=0;c--)for(let m=s-9;m>=f;m--)u=this.copyBit(m,c,u);let i=ze.decodeVersionInformation(u);if(i!==null&&i.getDimensionForVersion()===s)return this.parsedVersion=i,i;u=0;for(let c=5;c>=0;c--)for(let m=s-9;m>=f;m--)u=this.copyBit(c,m,u);if(i=ze.decodeVersionInformation(u),i!==null&&i.getDimensionForVersion()===s)return this.parsedVersion=i,i;throw new F}copyBit(s,o,u){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?u<<1|1:u<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),u=cr.values.get(s.getDataMask()),f=this.bitMatrix.getHeight();u.unmaskBitMatrix(this.bitMatrix,f);const i=o.buildFunctionPattern();let c=!0;const m=new Uint8Array(o.getTotalCodewords());let p=0,v=0,b=0;for(let C=f-1;C>0;C-=2){C===6&&C--;for(let S=0;S<f;S++){const j=c?f-1-S:S;for(let P=0;P<2;P++)i.get(C-P,j)||(b++,v<<=1,this.bitMatrix.get(C-P,j)&&(v|=1),b===8&&(m[p++]=v,b=0,v=0))}c=!c}if(p!==o.getTotalCodewords())throw new F;return m}remask(){if(this.parsedFormatInfo===null)return;const s=cr.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,u=s.getWidth();o<u;o++)for(let f=o+1,i=s.getHeight();f<i;f++)s.get(o,f)!==s.get(f,o)&&(s.flip(f,o),s.flip(o,f))}}class fa{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,u){if(s.length!==o.getTotalCodewords())throw new E;const f=o.getECBlocksForLevel(u);let i=0;const c=f.getECBlocks();for(const P of c)i+=P.getCount();const m=new Array(i);let p=0;for(const P of c)for(let B=0;B<P.getCount();B++){const L=P.getDataCodewords(),z=f.getECCodewordsPerBlock()+L;m[p++]=new fa(L,new Uint8Array(z))}const v=m[0].codewords.length;let b=m.length-1;for(;b>=0&&m[b].codewords.length!==v;)b--;b++;const C=v-f.getECCodewordsPerBlock();let S=0;for(let P=0;P<C;P++)for(let B=0;B<p;B++)m[B].codewords[P]=s[S++];for(let P=b;P<p;P++)m[P].codewords[C]=s[S++];const j=m[0].codewords.length;for(let P=C;P<j;P++)for(let B=0;B<p;B++){const L=B<b?P:P+1;m[B].codewords[L]=s[S++]}return m}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ur;(function(k){k[k.TERMINATOR=0]="TERMINATOR",k[k.NUMERIC=1]="NUMERIC",k[k.ALPHANUMERIC=2]="ALPHANUMERIC",k[k.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",k[k.BYTE=4]="BYTE",k[k.ECI=5]="ECI",k[k.KANJI=6]="KANJI",k[k.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",k[k.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",k[k.HANZI=9]="HANZI"})(ur||(ur={}));class Ge{constructor(s,o,u,f){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=u,this.bits=f,Ge.FOR_BITS.set(f,this),Ge.FOR_VALUE.set(s,this)}static forBits(s){const o=Ge.FOR_BITS.get(s);if(o===void 0)throw new E;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let u;return o<=9?u=0:o<=26?u=1:u=2,this.characterCountBitsForVersions[u]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof Ge))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}Ge.FOR_BITS=new Map,Ge.FOR_VALUE=new Map,Ge.TERMINATOR=new Ge(ur.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ge.NUMERIC=new Ge(ur.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ge.ALPHANUMERIC=new Ge(ur.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ge.STRUCTURED_APPEND=new Ge(ur.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ge.BYTE=new Ge(ur.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ge.ECI=new Ge(ur.ECI,"ECI",Int32Array.from([0,0,0]),7),Ge.KANJI=new Ge(ur.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ge.FNC1_FIRST_POSITION=new Ge(ur.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ge.FNC1_SECOND_POSITION=new Ge(ur.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ge.HANZI=new Ge(ur.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class ut{static decode(s,o,u,f){const i=new ao(s);let c=new re;const m=new Array;let p=-1,v=-1;try{let b=null,C=!1,S;do{if(i.available()<4)S=Ge.TERMINATOR;else{const j=i.readBits(4);S=Ge.forBits(j)}switch(S){case Ge.TERMINATOR:break;case Ge.FNC1_FIRST_POSITION:case Ge.FNC1_SECOND_POSITION:C=!0;break;case Ge.STRUCTURED_APPEND:if(i.available()<16)throw new F;p=i.readBits(8),v=i.readBits(8);break;case Ge.ECI:const j=ut.parseECIValue(i);if(b=q.getCharacterSetECIByValue(j),b===null)throw new F;break;case Ge.HANZI:const P=i.readBits(4),B=i.readBits(S.getCharacterCountBits(o));P===ut.GB2312_SUBSET&&ut.decodeHanziSegment(i,c,B);break;default:const L=i.readBits(S.getCharacterCountBits(o));switch(S){case Ge.NUMERIC:ut.decodeNumericSegment(i,c,L);break;case Ge.ALPHANUMERIC:ut.decodeAlphanumericSegment(i,c,L,C);break;case Ge.BYTE:ut.decodeByteSegment(i,c,L,b,m,f);break;case Ge.KANJI:ut.decodeKanjiSegment(i,c,L);break;default:throw new F}break}}while(S!==Ge.TERMINATOR)}catch{throw new F}return new Be(s,c.toString(),m.length===0?null:m,u===null?null:u.toString(),p,v)}static decodeHanziSegment(s,o,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let i=0;for(;u>0;){const c=s.readBits(13);let m=c/96<<8&4294967295|c%96;m<959?m+=41377:m+=42657,f[i]=m>>8&255,f[i+1]=m&255,i+=2,u--}try{o.append(he.decode(f,me.GB2312))}catch(c){throw new F(c)}}static decodeKanjiSegment(s,o,u){if(u*13>s.available())throw new F;const f=new Uint8Array(2*u);let i=0;for(;u>0;){const c=s.readBits(13);let m=c/192<<8&4294967295|c%192;m<7936?m+=33088:m+=49472,f[i]=m>>8,f[i+1]=m,i+=2,u--}try{o.append(he.decode(f,me.SHIFT_JIS))}catch(c){throw new F(c)}}static decodeByteSegment(s,o,u,f,i,c){if(8*u>s.available())throw new F;const m=new Uint8Array(u);for(let v=0;v<u;v++)m[v]=s.readBits(8);let p;f===null?p=me.guessEncoding(m,c):p=f.getName();try{o.append(he.decode(m,p))}catch(v){throw new F(v)}i.push(m)}static toAlphaNumericChar(s){if(s>=ut.ALPHANUMERIC_CHARS.length)throw new F;return ut.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,u,f){const i=o.length();for(;u>1;){if(s.available()<11)throw new F;const c=s.readBits(11);o.append(ut.toAlphaNumericChar(Math.floor(c/45))),o.append(ut.toAlphaNumericChar(c%45)),u-=2}if(u===1){if(s.available()<6)throw new F;o.append(ut.toAlphaNumericChar(s.readBits(6)))}if(f)for(let c=i;c<o.length();c++)o.charAt(c)==="%"&&(c<o.length()-1&&o.charAt(c+1)==="%"?o.deleteCharAt(c+1):o.setCharAt(c,""))}static decodeNumericSegment(s,o,u){for(;u>=3;){if(s.available()<10)throw new F;const f=s.readBits(10);if(f>=1e3)throw new F;o.append(ut.toAlphaNumericChar(Math.floor(f/100))),o.append(ut.toAlphaNumericChar(Math.floor(f/10)%10)),o.append(ut.toAlphaNumericChar(f%10)),u-=3}if(u===2){if(s.available()<7)throw new F;const f=s.readBits(7);if(f>=100)throw new F;o.append(ut.toAlphaNumericChar(Math.floor(f/10))),o.append(ut.toAlphaNumericChar(f%10))}else if(u===1){if(s.available()<4)throw new F;const f=s.readBits(4);if(f>=10)throw new F;o.append(ut.toAlphaNumericChar(f))}}static parseECIValue(s){const o=s.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const u=s.readBits(8);return(o&63)<<8&4294967295|u}if((o&224)===192){const u=s.readBits(16);return(o&31)<<16&4294967295|u}throw new F}}ut.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",ut.GB2312_SUBSET=1;class Zs{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class oo{constructor(){this.rsDecoder=new ns(Ve.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(ae.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const u=new yt(s);let f=null;try{return this.decodeBitMatrixParser(u,o)}catch(i){f=i}try{u.remask(),u.setMirror(!0),u.readVersion(),u.readFormatInformation(),u.mirror();const i=this.decodeBitMatrixParser(u,o);return i.setOther(new Zs(!0)),i}catch(i){throw f!==null?f:i}}decodeBitMatrixParser(s,o){const u=s.readVersion(),f=s.readFormatInformation().getErrorCorrectionLevel(),i=s.readCodewords(),c=fa.getDataBlocks(i,u,f);let m=0;for(const b of c)m+=b.getNumDataCodewords();const p=new Uint8Array(m);let v=0;for(const b of c){const C=b.getCodewords(),S=b.getNumDataCodewords();this.correctErrors(C,S);for(let j=0;j<S;j++)p[v++]=C[j]}return ut.decode(p,u,f,o)}correctErrors(s,o){const u=new Int32Array(s);try{this.rsDecoder.decode(u,s.length-o)}catch{throw new I}for(let f=0;f<o;f++)s[f]=u[f]}}class Vr extends Me{constructor(s,o,u){super(s,o),this.estimatedModuleSize=u}aboutEquals(s,o,u){if(Math.abs(o-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,u){const f=(this.getX()+o)/2,i=(this.getY()+s)/2,c=(this.estimatedModuleSize+u)/2;return new Vr(f,i,c)}}class ma{constructor(s,o,u,f,i,c,m){this.image=s,this.startX=o,this.startY=u,this.width=f,this.height=i,this.moduleSize=c,this.resultPointCallback=m,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,u=this.width,f=s+u,i=this.startY+o/2,c=new Int32Array(3),m=this.image;for(let p=0;p<o;p++){const v=i+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));c[0]=0,c[1]=0,c[2]=0;let b=s;for(;b<f&&!m.get(b,v);)b++;let C=0;for(;b<f;){if(m.get(b,v))if(C===1)c[1]++;else if(C===2){if(this.foundPatternCross(c)){const S=this.handlePossibleCenter(c,v,b);if(S!==null)return S}c[0]=c[2],c[1]=1,c[2]=0,C=1}else c[++C]++;else C===1&&C++,c[C]++;b++}if(this.foundPatternCross(c)){const S=this.handlePossibleCenter(c,v,f);if(S!==null)return S}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Y}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,u=o/2;for(let f=0;f<3;f++)if(Math.abs(o-s[f])>=u)return!1;return!0}crossCheckVertical(s,o,u,f){const i=this.image,c=i.getHeight(),m=this.crossCheckStateCount;m[0]=0,m[1]=0,m[2]=0;let p=s;for(;p>=0&&i.get(o,p)&&m[1]<=u;)m[1]++,p--;if(p<0||m[1]>u)return NaN;for(;p>=0&&!i.get(o,p)&&m[0]<=u;)m[0]++,p--;if(m[0]>u)return NaN;for(p=s+1;p<c&&i.get(o,p)&&m[1]<=u;)m[1]++,p++;if(p===c||m[1]>u)return NaN;for(;p<c&&!i.get(o,p)&&m[2]<=u;)m[2]++,p++;if(m[2]>u)return NaN;const v=m[0]+m[1]+m[2];return 5*Math.abs(v-f)>=2*f?NaN:this.foundPatternCross(m)?ma.centerFromEnd(m,p):NaN}handlePossibleCenter(s,o,u){const f=s[0]+s[1]+s[2],i=ma.centerFromEnd(s,u),c=this.crossCheckVertical(o,i,2*s[1],f);if(!isNaN(c)){const m=(s[0]+s[1]+s[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(m,c,i))return v.combineEstimate(c,i,m);const p=new Vr(i,c,m);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class lo extends Me{constructor(s,o,u,f){super(s,o),this.estimatedModuleSize=u,this.count=f,f===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,u){if(Math.abs(o-this.getY())<=s&&Math.abs(u-this.getX())<=s){const f=Math.abs(s-this.estimatedModuleSize);return f<=1||f<=this.estimatedModuleSize}return!1}combineEstimate(s,o,u){const f=this.count+1,i=(this.count*this.getX()+o)/f,c=(this.count*this.getY()+s)/f,m=(this.count*this.estimatedModuleSize+u)/f;return new lo(i,c,m,f)}}class pn{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class kt{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get($.TRY_HARDER)!==void 0,u=s!=null&&s.get($.PURE_BARCODE)!==void 0,f=this.image,i=f.getHeight(),c=f.getWidth();let m=Math.floor(3*i/(4*kt.MAX_MODULES));(m<kt.MIN_SKIP||o)&&(m=kt.MIN_SKIP);let p=!1;const v=new Int32Array(5);for(let C=m-1;C<i&&!p;C+=m){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let S=0;for(let j=0;j<c;j++)if(f.get(j,C))(S&1)===1&&S++,v[S]++;else if(S&1)v[S]++;else if(S===4)if(kt.foundPatternCross(v)){if(this.handlePossibleCenter(v,C,j,u)===!0)if(m=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const B=this.findRowSkip();B>v[2]&&(C+=B-v[2]-m,j=c-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,S=3;continue}S=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,S=3;else v[++S]++;kt.foundPatternCross(v)&&this.handlePossibleCenter(v,C,c,u)===!0&&(m=v[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const b=this.selectBestPatterns();return Me.orderBestPatterns(b),new pn(b)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let i=0;i<5;i++){const c=s[i];if(c===0)return!1;o+=c}if(o<7)return!1;const u=o/7,f=u/2;return Math.abs(u-s[0])<f&&Math.abs(u-s[1])<f&&Math.abs(3*u-s[2])<3*f&&Math.abs(u-s[3])<f&&Math.abs(u-s[4])<f}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,u,f){const i=this.getCrossCheckStateCount();let c=0;const m=this.image;for(;s>=c&&o>=c&&m.get(o-c,s-c);)i[2]++,c++;if(s<c||o<c)return!1;for(;s>=c&&o>=c&&!m.get(o-c,s-c)&&i[1]<=u;)i[1]++,c++;if(s<c||o<c||i[1]>u)return!1;for(;s>=c&&o>=c&&m.get(o-c,s-c)&&i[0]<=u;)i[0]++,c++;if(i[0]>u)return!1;const p=m.getHeight(),v=m.getWidth();for(c=1;s+c<p&&o+c<v&&m.get(o+c,s+c);)i[2]++,c++;if(s+c>=p||o+c>=v)return!1;for(;s+c<p&&o+c<v&&!m.get(o+c,s+c)&&i[3]<u;)i[3]++,c++;if(s+c>=p||o+c>=v||i[3]>=u)return!1;for(;s+c<p&&o+c<v&&m.get(o+c,s+c)&&i[4]<u;)i[4]++,c++;if(i[4]>=u)return!1;const b=i[0]+i[1]+i[2]+i[3]+i[4];return Math.abs(b-f)<2*f&&kt.foundPatternCross(i)}crossCheckVertical(s,o,u,f){const i=this.image,c=i.getHeight(),m=this.getCrossCheckStateCount();let p=s;for(;p>=0&&i.get(o,p);)m[2]++,p--;if(p<0)return NaN;for(;p>=0&&!i.get(o,p)&&m[1]<=u;)m[1]++,p--;if(p<0||m[1]>u)return NaN;for(;p>=0&&i.get(o,p)&&m[0]<=u;)m[0]++,p--;if(m[0]>u)return NaN;for(p=s+1;p<c&&i.get(o,p);)m[2]++,p++;if(p===c)return NaN;for(;p<c&&!i.get(o,p)&&m[3]<u;)m[3]++,p++;if(p===c||m[3]>=u)return NaN;for(;p<c&&i.get(o,p)&&m[4]<u;)m[4]++,p++;if(m[4]>=u)return NaN;const v=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(v-f)>=2*f?NaN:kt.foundPatternCross(m)?kt.centerFromEnd(m,p):NaN}crossCheckHorizontal(s,o,u,f){const i=this.image,c=i.getWidth(),m=this.getCrossCheckStateCount();let p=s;for(;p>=0&&i.get(p,o);)m[2]++,p--;if(p<0)return NaN;for(;p>=0&&!i.get(p,o)&&m[1]<=u;)m[1]++,p--;if(p<0||m[1]>u)return NaN;for(;p>=0&&i.get(p,o)&&m[0]<=u;)m[0]++,p--;if(m[0]>u)return NaN;for(p=s+1;p<c&&i.get(p,o);)m[2]++,p++;if(p===c)return NaN;for(;p<c&&!i.get(p,o)&&m[3]<u;)m[3]++,p++;if(p===c||m[3]>=u)return NaN;for(;p<c&&i.get(p,o)&&m[4]<u;)m[4]++,p++;if(m[4]>=u)return NaN;const v=m[0]+m[1]+m[2]+m[3]+m[4];return 5*Math.abs(v-f)>=f?NaN:kt.foundPatternCross(m)?kt.centerFromEnd(m,p):NaN}handlePossibleCenter(s,o,u,f){const i=s[0]+s[1]+s[2]+s[3]+s[4];let c=kt.centerFromEnd(s,u),m=this.crossCheckVertical(o,Math.floor(c),s[2],i);if(!isNaN(m)&&(c=this.crossCheckHorizontal(Math.floor(c),Math.floor(m),s[2],i),!isNaN(c)&&(!f||this.crossCheckDiagonal(Math.floor(m),Math.floor(c),s[2],i)))){const p=i/7;let v=!1;const b=this.possibleCenters;for(let C=0,S=b.length;C<S;C++){const j=b[C];if(j.aboutEquals(p,m,c)){b[C]=j.combineEstimate(m,c,p),v=!0;break}}if(!v){const C=new lo(c,m,p);b.push(C),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(C)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const u of this.possibleCenters)if(u.getCount()>=kt.CENTER_QUORUM)if(o==null)o=u;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-u.getX())-Math.abs(o.getY()-u.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const u=this.possibleCenters.length;for(const c of this.possibleCenters)c.getCount()>=kt.CENTER_QUORUM&&(s++,o+=c.getEstimatedModuleSize());if(s<3)return!1;const f=o/u;let i=0;for(const c of this.possibleCenters)i+=Math.abs(c.getEstimatedModuleSize()-f);return i<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new Y;const o=this.possibleCenters;let u;if(s>3){let f=0,i=0;for(const p of this.possibleCenters){const v=p.getEstimatedModuleSize();f+=v,i+=v*v}u=f/s;let c=Math.sqrt(i/s-u*u);o.sort((p,v)=>{const b=Math.abs(v.getEstimatedModuleSize()-u),C=Math.abs(p.getEstimatedModuleSize()-u);return b<C?-1:b>C?1:0});const m=Math.max(.2*u,c);for(let p=0;p<o.length&&o.length>3;p++){const v=o[p];Math.abs(v.getEstimatedModuleSize()-u)>m&&(o.splice(p,1),p--)}}if(o.length>3){let f=0;for(const i of o)f+=i.getEstimatedModuleSize();u=f/o.length,o.sort((i,c)=>{if(c.getCount()===i.getCount()){const m=Math.abs(c.getEstimatedModuleSize()-u),p=Math.abs(i.getEstimatedModuleSize()-u);return m<p?1:m>p?-1:0}else return c.getCount()-i.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}kt.CENTER_QUORUM=2,kt.MIN_SKIP=3,kt.MAX_MODULES=57;class is{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get($.NEED_RESULT_POINT_CALLBACK);const u=new kt(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(u)}processFinderPatternInfo(s){const o=s.getTopLeft(),u=s.getTopRight(),f=s.getBottomLeft(),i=this.calculateModuleSize(o,u,f);if(i<1)throw new Y("No pattern found in proccess finder.");const c=is.computeDimension(o,u,f,i),m=ze.getProvisionalVersionForDimension(c),p=m.getDimensionForVersion()-7;let v=null;if(m.getAlignmentPatternCenters().length>0){const j=u.getX()-o.getX()+f.getX(),P=u.getY()-o.getY()+f.getY(),B=1-3/p,L=Math.floor(o.getX()+B*(j-o.getX())),z=Math.floor(o.getY()+B*(P-o.getY()));for(let G=4;G<=16;G<<=1)try{v=this.findAlignmentInRegion(i,L,z,G);break}catch(K){if(!(K instanceof Y))throw K}}const b=is.createTransform(o,u,f,v,c),C=is.sampleGrid(this.image,b,c);let S;return v===null?S=[f,o,u]:S=[f,o,u,v],new _s(C,S)}static createTransform(s,o,u,f,i){const c=i-3.5;let m,p,v,b;return f!==null?(m=f.getX(),p=f.getY(),v=c-3,b=v):(m=o.getX()-s.getX()+u.getX(),p=o.getY()-s.getY()+u.getY(),v=c,b=c),Te.quadrilateralToQuadrilateral(3.5,3.5,c,3.5,v,b,3.5,c,s.getX(),s.getY(),o.getX(),o.getY(),m,p,u.getX(),u.getY())}static sampleGrid(s,o,u){return Xe.getInstance().sampleGridWithTransform(s,u,u,o)}static computeDimension(s,o,u,f){const i=st.round(Me.distance(s,o)/f),c=st.round(Me.distance(s,u)/f);let m=Math.floor((i+c)/2)+7;switch(m&3){case 0:m++;break;case 2:m--;break;case 3:throw new Y("Dimensions could be not found.")}return m}calculateModuleSize(s,o,u){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,u))/2}calculateModuleSizeOneWay(s,o){const u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),f=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(u)?f/7:isNaN(f)?u/7:(u+f)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,u,f){let i=this.sizeOfBlackWhiteBlackRun(s,o,u,f),c=1,m=s-(u-s);m<0?(c=s/(s-m),m=0):m>=this.image.getWidth()&&(c=(this.image.getWidth()-1-s)/(m-s),m=this.image.getWidth()-1);let p=Math.floor(o-(f-o)*c);return c=1,p<0?(c=o/(o-p),p=0):p>=this.image.getHeight()&&(c=(this.image.getHeight()-1-o)/(p-o),p=this.image.getHeight()-1),m=Math.floor(s+(m-s)*c),i+=this.sizeOfBlackWhiteBlackRun(s,o,m,p),i-1}sizeOfBlackWhiteBlackRun(s,o,u,f){const i=Math.abs(f-o)>Math.abs(u-s);if(i){let j=s;s=o,o=j,j=u,u=f,f=j}const c=Math.abs(u-s),m=Math.abs(f-o);let p=-c/2;const v=s<u?1:-1,b=o<f?1:-1;let C=0;const S=u+v;for(let j=s,P=o;j!==S;j+=v){const B=i?P:j,L=i?j:P;if(C===1===this.image.get(B,L)){if(C===2)return st.distance(j,P,s,o);C++}if(p+=m,p>0){if(P===f)break;P+=b,p-=c}}return C===2?st.distance(u+v,f,s,o):NaN}findAlignmentInRegion(s,o,u,f){const i=Math.floor(f*s),c=Math.max(0,o-i),m=Math.min(this.image.getWidth()-1,o+i);if(m-c<s*3)throw new Y("Alignment top exceeds estimated module size.");const p=Math.max(0,u-i),v=Math.min(this.image.getHeight()-1,u+i);if(v-p<s*3)throw new Y("Alignment bottom exceeds estimated module size.");return new ma(this.image,c,p,m-c,v-p,s,this.resultPointCallback).find()}}class dr{constructor(){this.decoder=new oo}getDecoder(){return this.decoder}decode(s,o){let u,f;if(o!=null&&o.get($.PURE_BARCODE)!==void 0){const p=dr.extractPureBits(s.getBlackMatrix());u=this.decoder.decodeBitMatrix(p,o),f=dr.NO_POINTS}else{const p=new is(s.getBlackMatrix()).detect(o);u=this.decoder.decodeBitMatrix(p.getBits(),o),f=p.getPoints()}u.getOther()instanceof Zs&&u.getOther().applyMirroredCorrection(f);const i=new $e(u.getText(),u.getRawBytes(),void 0,f,_e.QR_CODE,void 0),c=u.getByteSegments();c!==null&&i.putMetadata(Je.BYTE_SEGMENTS,c);const m=u.getECLevel();return m!==null&&i.putMetadata(Je.ERROR_CORRECTION_LEVEL,m),u.hasStructuredAppend()&&(i.putMetadata(Je.STRUCTURED_APPEND_SEQUENCE,u.getStructuredAppendSequenceNumber()),i.putMetadata(Je.STRUCTURED_APPEND_PARITY,u.getStructuredAppendParity())),i}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),u=s.getBottomRightOnBit();if(o===null||u===null)throw new Y;const f=this.moduleSize(o,s);let i=o[1],c=u[1],m=o[0],p=u[0];if(m>=p||i>=c)throw new Y;if(c-i!==p-m&&(p=m+(c-i),p>=s.getWidth()))throw new Y;const v=Math.round((p-m+1)/f),b=Math.round((c-i+1)/f);if(v<=0||b<=0)throw new Y;if(b!==v)throw new Y;const C=Math.floor(f/2);i+=C,m+=C;const S=m+Math.floor((v-1)*f)-p;if(S>0){if(S>C)throw new Y;m-=S}const j=i+Math.floor((b-1)*f)-c;if(j>0){if(j>C)throw new Y;i-=j}const P=new ae(v,b);for(let B=0;B<b;B++){const L=i+Math.floor(B*f);for(let z=0;z<v;z++)s.get(m+Math.floor(z*f),L)&&P.set(z,B)}return P}static moduleSize(s,o){const u=o.getHeight(),f=o.getWidth();let i=s[0],c=s[1],m=!0,p=0;for(;i<f&&c<u;){if(m!==o.get(i,c)){if(++p===5)break;m=!m}i++,c++}if(i===f||c===u)throw new Y;return(i-s[0])/7}}dr.NO_POINTS=new Array;class qe{PDF417Common(){}static getBitCountSum(s){return st.sum(s)}static toIntArray(s){if(s==null||!s.length)return qe.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let u=0;for(const f of s)o[u++]=f;return o}static getCodeword(s){const o=A.binarySearch(qe.SYMBOL_TABLE,s&262143);return o<0?-1:(qe.CODEWORD_TABLE[o]-1)%qe.NUMBER_OF_CODEWORDS}}qe.NUMBER_OF_CODEWORDS=929,qe.MAX_CODEWORDS_IN_BARCODE=qe.NUMBER_OF_CODEWORDS-1,qe.MIN_ROWS_IN_BARCODE=3,qe.MAX_ROWS_IN_BARCODE=90,qe.MODULES_IN_CODEWORD=17,qe.MODULES_IN_STOP_PATTERN=18,qe.BARS_IN_MODULE=8,qe.EMPTY_INT_ARRAY=new Int32Array([]),qe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),qe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class Rs{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class tt{static detectMultiple(s,o,u){let f=s.getBlackMatrix(),i=tt.detect(u,f);return i.length||(f=f.clone(),f.rotate180(),i=tt.detect(u,f)),new Rs(f,i)}static detect(s,o){const u=new Array;let f=0,i=0,c=!1;for(;f<o.getHeight();){const m=tt.findVertices(o,f,i);if(m[0]==null&&m[3]==null){if(!c)break;c=!1,i=0;for(const p of u)p[1]!=null&&(f=Math.trunc(Math.max(f,p[1].getY()))),p[3]!=null&&(f=Math.max(f,Math.trunc(p[3].getY())));f+=tt.ROW_STEP;continue}if(c=!0,u.push(m),!s)break;m[2]!=null?(i=Math.trunc(m[2].getX()),f=Math.trunc(m[2].getY())):(i=Math.trunc(m[4].getX()),f=Math.trunc(m[4].getY()))}return u}static findVertices(s,o,u){const f=s.getHeight(),i=s.getWidth(),c=new Array(8);return tt.copyToResult(c,tt.findRowsWithPattern(s,f,i,o,u,tt.START_PATTERN),tt.INDEXES_START_PATTERN),c[4]!=null&&(u=Math.trunc(c[4].getX()),o=Math.trunc(c[4].getY())),tt.copyToResult(c,tt.findRowsWithPattern(s,f,i,o,u,tt.STOP_PATTERN),tt.INDEXES_STOP_PATTERN),c}static copyToResult(s,o,u){for(let f=0;f<u.length;f++)s[u[f]]=o[f]}static findRowsWithPattern(s,o,u,f,i,c){const m=new Array(4);let p=!1;const v=new Int32Array(c.length);for(;f<o;f+=tt.ROW_STEP){let C=tt.findGuardPattern(s,i,f,u,!1,c,v);if(C!=null){for(;f>0;){const S=tt.findGuardPattern(s,i,--f,u,!1,c,v);if(S!=null)C=S;else{f++;break}}m[0]=new Me(C[0],f),m[1]=new Me(C[1],f),p=!0;break}}let b=f+1;if(p){let C=0,S=Int32Array.from([Math.trunc(m[0].getX()),Math.trunc(m[1].getX())]);for(;b<o;b++){const j=tt.findGuardPattern(s,S[0],b,u,!1,c,v);if(j!=null&&Math.abs(S[0]-j[0])<tt.MAX_PATTERN_DRIFT&&Math.abs(S[1]-j[1])<tt.MAX_PATTERN_DRIFT)S=j,C=0;else{if(C>tt.SKIPPED_ROW_COUNT_MAX)break;C++}}b-=C+1,m[2]=new Me(S[0],b),m[3]=new Me(S[1],b)}return b-f<tt.BARCODE_MIN_HEIGHT&&A.fill(m,null),m}static findGuardPattern(s,o,u,f,i,c,m){A.fillWithin(m,0,m.length,0);let p=o,v=0;for(;s.get(p,u)&&p>0&&v++<tt.MAX_PIXEL_DRIFT;)p--;let b=p,C=0,S=c.length;for(let j=i;b<f;b++)if(s.get(b,u)!==j)m[C]++;else{if(C===S-1){if(tt.patternMatchVariance(m,c,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return new Int32Array([p,b]);p+=m[0]+m[1],O.arraycopy(m,2,m,0,C-1),m[C-1]=0,m[C]=0,C--}else C++;m[C]=1,j=!j}return C===S-1&&tt.patternMatchVariance(m,c,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE?new Int32Array([p,b-1]):null}static patternMatchVariance(s,o,u){let f=s.length,i=0,c=0;for(let v=0;v<f;v++)i+=s[v],c+=o[v];if(i<c)return 1/0;let m=i/c;u*=m;let p=0;for(let v=0;v<f;v++){let b=s[v],C=o[v]*m,S=b>C?b-C:C-b;if(S>u)return 1/0;p+=S}return p/i}}tt.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),tt.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),tt.MAX_AVG_VARIANCE=.42,tt.MAX_INDIVIDUAL_VARIANCE=.8,tt.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),tt.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),tt.MAX_PIXEL_DRIFT=3,tt.MAX_PATTERN_DRIFT=5,tt.SKIPPED_ROW_COUNT_MAX=25,tt.ROW_STEP=5,tt.BARCODE_MIN_HEIGHT=10;class Bt{constructor(s,o){if(o.length===0)throw new E;this.field=s;let u=o.length;if(u>1&&o[0]===0){let f=1;for(;f<u&&o[f]===0;)f++;f===u?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(u-f),O.arraycopy(o,f,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let f=0;for(let i of this.coefficients)f=this.field.add(f,i);return f}let o=this.coefficients[0],u=this.coefficients.length;for(let f=1;f<u;f++)o=this.field.add(this.field.multiply(s,o),this.coefficients[f]);return o}add(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,u=s.coefficients;if(o.length>u.length){let c=o;o=u,u=c}let f=new Int32Array(u.length),i=u.length-o.length;O.arraycopy(u,0,f,0,i);for(let c=i;c<u.length;c++)f[c]=this.field.add(o[c-i],u[c]);return new Bt(this.field,f)}subtract(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof Bt?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new E("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new Bt(this.field,new Int32Array([0]));let o=this.coefficients,u=o.length,f=s.coefficients,i=f.length,c=new Int32Array(u+i-1);for(let m=0;m<u;m++){let p=o[m];for(let v=0;v<i;v++)c[m+v]=this.field.add(c[m+v],this.field.multiply(p,f[v]))}return new Bt(this.field,c)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let u=0;u<s;u++)o[u]=this.field.subtract(0,this.coefficients[u]);return new Bt(this.field,o)}multiplyScalar(s){if(s===0)return new Bt(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,u=new Int32Array(o);for(let f=0;f<o;f++)u[f]=this.field.multiply(this.coefficients[f],s);return new Bt(this.field,u)}multiplyByMonomial(s,o){if(s<0)throw new E;if(o===0)return new Bt(this.field,new Int32Array([0]));let u=this.coefficients.length,f=new Int32Array(u+s);for(let i=0;i<u;i++)f[i]=this.field.multiply(this.coefficients[i],o);return new Bt(this.field,f)}toString(){let s=new re;for(let o=this.getDegree();o>=0;o--){let u=this.getCoefficient(o);u!==0&&(u<0?(s.append(" - "),u=-u):s.length()>0&&s.append(" + "),(o===0||u!==1)&&s.append(u),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class kl{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new E;return this.logTable[s]}inverse(s){if(s===0)throw new Fe;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class co extends kl{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let u=1;for(let f=0;f<s;f++)this.expTable[f]=u,u=u*o%s;for(let f=0;f<s-1;f++)this.logTable[this.expTable[f]]=f;this.zero=new Bt(this,new Int32Array([0])),this.one=new Bt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new E;if(o===0)return this.zero;let u=new Int32Array(s+1);return u[0]=o,new Bt(this,u)}}co.PDF417_GF=new co(qe.NUMBER_OF_CODEWORDS,3);class uo{constructor(){this.field=co.PDF417_GF}decode(s,o,u){let f=new Bt(this.field,s),i=new Int32Array(o),c=!1;for(let P=o;P>0;P--){let B=f.evaluateAt(this.field.exp(P));i[o-P]=B,B!==0&&(c=!0)}if(!c)return 0;let m=this.field.getOne();if(u!=null)for(const P of u){let B=this.field.exp(s.length-1-P),L=new Bt(this.field,new Int32Array([this.field.subtract(0,B),1]));m=m.multiply(L)}let p=new Bt(this.field,i),v=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),p,o),b=v[0],C=v[1],S=this.findErrorLocations(b),j=this.findErrorMagnitudes(C,b,S);for(let P=0;P<S.length;P++){let B=s.length-1-this.field.log(S[P]);if(B<0)throw I.getChecksumInstance();s[B]=this.field.subtract(s[B],j[P])}return S.length}runEuclideanAlgorithm(s,o,u){if(s.getDegree()<o.getDegree()){let S=s;s=o,o=S}let f=s,i=o,c=this.field.getZero(),m=this.field.getOne();for(;i.getDegree()>=Math.round(u/2);){let S=f,j=c;if(f=i,c=m,f.isZero())throw I.getChecksumInstance();i=S;let P=this.field.getZero(),B=f.getCoefficient(f.getDegree()),L=this.field.inverse(B);for(;i.getDegree()>=f.getDegree()&&!i.isZero();){let z=i.getDegree()-f.getDegree(),G=this.field.multiply(i.getCoefficient(i.getDegree()),L);P=P.add(this.field.buildMonomial(z,G)),i=i.subtract(f.multiplyByMonomial(z,G))}m=P.multiply(c).subtract(j).negative()}let p=m.getCoefficient(0);if(p===0)throw I.getChecksumInstance();let v=this.field.inverse(p),b=m.multiply(v),C=i.multiply(v);return[b,C]}findErrorLocations(s){let o=s.getDegree(),u=new Int32Array(o),f=0;for(let i=1;i<this.field.getSize()&&f<o;i++)s.evaluateAt(i)===0&&(u[f]=this.field.inverse(i),f++);if(f!==o)throw I.getChecksumInstance();return u}findErrorMagnitudes(s,o,u){let f=o.getDegree(),i=new Int32Array(f);for(let v=1;v<=f;v++)i[f-v]=this.field.multiply(v,o.getCoefficient(v));let c=new Bt(this.field,i),m=u.length,p=new Int32Array(m);for(let v=0;v<m;v++){let b=this.field.inverse(u[v]),C=this.field.subtract(0,s.evaluateAt(b)),S=this.field.inverse(c.evaluateAt(b));p[v]=this.field.multiply(C,S)}return p}}class Nr{constructor(s,o,u,f,i){s instanceof Nr?this.constructor_2(s):this.constructor_1(s,o,u,f,i)}constructor_1(s,o,u,f,i){const c=o==null||u==null,m=f==null||i==null;if(c&&m)throw new Y;c?(o=new Me(0,f.getY()),u=new Me(0,i.getY())):m&&(f=new Me(s.getWidth()-1,o.getY()),i=new Me(s.getWidth()-1,u.getY())),this.image=s,this.topLeft=o,this.bottomLeft=u,this.topRight=f,this.bottomRight=i,this.minX=Math.trunc(Math.min(o.getX(),u.getX())),this.maxX=Math.trunc(Math.max(f.getX(),i.getX())),this.minY=Math.trunc(Math.min(o.getY(),f.getY())),this.maxY=Math.trunc(Math.max(u.getY(),i.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new Nr(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,u){let f=this.topLeft,i=this.bottomLeft,c=this.topRight,m=this.bottomRight;if(s>0){let p=u?this.topLeft:this.topRight,v=Math.trunc(p.getY()-s);v<0&&(v=0);let b=new Me(p.getX(),v);u?f=b:c=b}if(o>0){let p=u?this.bottomLeft:this.bottomRight,v=Math.trunc(p.getY()+o);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let b=new Me(p.getX(),v);u?i=b:m=b}return new Nr(this.image,f,i,c,m)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class Rl{constructor(s,o,u,f){this.columnCount=s,this.errorCorrectionLevel=f,this.rowCountUpperPart=o,this.rowCountLowerPart=u,this.rowCount=o+u}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Ni{constructor(){this.buffer=""}static form(s,o){let u=-1;function f(c,m,p,v,b,C){if(c==="%%")return"%";if(o[++u]===void 0)return;c=v?parseInt(v.substr(1)):void 0;let S=b?parseInt(b.substr(1)):void 0,j;switch(C){case"s":j=o[u];break;case"c":j=o[u][0];break;case"f":j=parseFloat(o[u]).toFixed(c);break;case"p":j=parseFloat(o[u]).toPrecision(c);break;case"e":j=parseFloat(o[u]).toExponential(c);break;case"x":j=parseInt(o[u]).toString(S||16);break;case"d":j=parseFloat(parseInt(o[u],S||10).toPrecision(c)).toFixed(0);break}j=typeof j=="object"?JSON.stringify(j):(+j).toString(S);let P=parseInt(p),B=p&&p[0]+""=="0"?"0":" ";for(;j.length<P;)j=m!==void 0?j+B:B+j;return j}let i=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(i,f)}format(s,...o){this.buffer+=Ni.form(s,o)}toString(){return this.buffer}}class ga{constructor(s){this.boundingBox=new Nr(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let u=1;u<ga.MAX_NEARBY_DISTANCE;u++){let f=this.imageRowToCodewordIndex(s)-u;if(f>=0&&(o=this.codewords[f],o!=null)||(f=this.imageRowToCodewordIndex(s)+u,f<this.codewords.length&&(o=this.codewords[f],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new Ni;let o=0;for(const u of this.codewords){if(u==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,u.getRowNumber(),u.getValue())}return s.toString()}}ga.MAX_NEARBY_DISTANCE=5;class as{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[u,f]of this.values.entries()){const i={getKey:()=>u,getValue:()=>f};i.getValue()>s?(s=i.getValue(),o=[],o.push(i.getKey())):i.getValue()===s&&o.push(i.getKey())}return qe.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class mu extends ga{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let u=this.getBoundingBox(),f=this._isLeft?u.getTopLeft():u.getTopRight(),i=this._isLeft?u.getBottomLeft():u.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(f.getY())),m=this.imageRowToCodewordIndex(Math.trunc(i.getY())),p=-1,v=1,b=0;for(let C=c;C<m;C++){if(o[C]==null)continue;let S=o[C],j=S.getRowNumber()-p;if(j===0)b++;else if(j===1)v=Math.max(v,b),b=1,p=S.getRowNumber();else if(j<0||S.getRowNumber()>=s.getRowCount()||j>C)o[C]=null;else{let P;v>2?P=(v-2)*j:P=j;let B=P>=C;for(let L=1;L<=P&&!B;L++)B=o[C-L]!=null;B?o[C]=null:(p=S.getRowNumber(),b=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let u of this.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=o.length)continue;o[f]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),u=this._isLeft?o.getTopLeft():o.getTopRight(),f=this._isLeft?o.getBottomLeft():o.getBottomRight(),i=this.imageRowToCodewordIndex(Math.trunc(u.getY())),c=this.imageRowToCodewordIndex(Math.trunc(f.getY())),m=this.getCodewords(),p=-1;for(let v=i;v<c;v++){if(m[v]==null)continue;let b=m[v];b.setRowNumberAsRowIndicatorColumn();let C=b.getRowNumber()-p;C===0||(C===1?p=b.getRowNumber():b.getRowNumber()>=s.getRowCount()?m[v]=null:p=b.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new as,u=new as,f=new as,i=new as;for(let m of s){if(m==null)continue;m.setRowNumberAsRowIndicatorColumn();let p=m.getValue()%30,v=m.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:u.setValue(p*3+1);break;case 1:i.setValue(p/3),f.setValue(p%3);break;case 2:o.setValue(p+1);break}}if(o.getValue().length===0||u.getValue().length===0||f.getValue().length===0||i.getValue().length===0||o.getValue()[0]<1||u.getValue()[0]+f.getValue()[0]<qe.MIN_ROWS_IN_BARCODE||u.getValue()[0]+f.getValue()[0]>qe.MAX_ROWS_IN_BARCODE)return null;let c=new Rl(o.getValue()[0],u.getValue()[0],f.getValue()[0],i.getValue()[0]);return this.removeIncorrectCodewords(s,c),c}removeIncorrectCodewords(s,o){for(let u=0;u<s.length;u++){let f=s[u];if(s[u]==null)continue;let i=f.getValue()%30,c=f.getRowNumber();if(c>o.getRowCount()){s[u]=null;continue}switch(this._isLeft||(c+=2),c%3){case 0:i*3+1!==o.getRowCountUpperPart()&&(s[u]=null);break;case 1:(Math.trunc(i/3)!==o.getErrorCorrectionLevel()||i%3!==o.getRowCountLowerPart())&&(s[u]=null);break;case 2:i+1!==o.getColumnCount()&&(s[u]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class pa{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=qe.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let u=this.detectionResultColumns[o].getCodewords();for(let f=0;f<u.length;f++)u[f]!=null&&(u[f].hasValidRowNumber()||this.adjustRowNumbers(o,f,u))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<s.length;u++)if(s[u]!=null&&o[u]!=null&&s[u].getRowNumber()===o[u].getRowNumber())for(let f=1;f<=this.barcodeColumnCount;f++){let i=this.detectionResultColumns[f].getCodewords()[u];i!=null&&(i.setRowNumber(s[u].getRowNumber()),i.hasValidRowNumber()||(this.detectionResultColumns[f].getCodewords()[u]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let u=0;u<o.length;u++){if(o[u]==null)continue;let f=o[u].getRowNumber(),i=0;for(let c=this.barcodeColumnCount+1;c>0&&i<this.ADJUST_ROW_NUMBER_SKIP;c--){let m=this.detectionResultColumns[c].getCodewords()[u];m!=null&&(i=pa.adjustRowNumberIfValid(f,i,m),m.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let u=0;u<o.length;u++){if(o[u]==null)continue;let f=o[u].getRowNumber(),i=0;for(let c=1;c<this.barcodeColumnCount+1&&i<this.ADJUST_ROW_NUMBER_SKIP;c++){let m=this.detectionResultColumns[c].getCodewords()[u];m!=null&&(i=pa.adjustRowNumberIfValid(f,i,m),m.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,u){return u==null||u.hasValidRowNumber()||(u.isValidRowNumber(s)?(u.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,u){if(!this.detectionResultColumns[s-1])return;let f=u[o],i=this.detectionResultColumns[s-1].getCodewords(),c=i;this.detectionResultColumns[s+1]!=null&&(c=this.detectionResultColumns[s+1].getCodewords());let m=new Array(14);m[2]=i[o],m[3]=c[o],o>0&&(m[0]=u[o-1],m[4]=i[o-1],m[5]=c[o-1]),o>1&&(m[8]=u[o-2],m[10]=i[o-2],m[11]=c[o-2]),o<u.length-1&&(m[1]=u[o+1],m[6]=i[o+1],m[7]=c[o+1]),o<u.length-2&&(m[9]=u[o+2],m[12]=i[o+2],m[13]=c[o+2]);for(let p of m)if(pa.adjustRowNumber(f,p))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new Ni;for(let u=0;u<s.getCodewords().length;u++){o.format("CW %3d:",u);for(let f=0;f<this.barcodeColumnCount+2;f++){if(this.detectionResultColumns[f]==null){o.format("    |   ");continue}let i=this.detectionResultColumns[f].getCodewords()[u];if(i==null){o.format("    |   ");continue}o.format(" %3d|%3d",i.getRowNumber(),i.getValue())}o.format("%n")}return o.toString()}}class Ms{constructor(s,o,u,f){this.rowNumber=Ms.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(u),this.value=Math.trunc(f)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==Ms.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}Ms.BARCODE_ROW_UNKNOWN=-1;class En{static initialize(){for(let s=0;s<qe.SYMBOL_TABLE.length;s++){let o=qe.SYMBOL_TABLE[s],u=o&1;for(let f=0;f<qe.BARS_IN_MODULE;f++){let i=0;for(;(o&1)===u;)i+=1,o>>=1;u=o&1,En.RATIOS_TABLE[s]||(En.RATIOS_TABLE[s]=new Array(qe.BARS_IN_MODULE)),En.RATIOS_TABLE[s][qe.BARS_IN_MODULE-f-1]=Math.fround(i/qe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=En.getDecodedCodewordValue(En.sampleBitCounts(s));return o!==-1?o:En.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=st.sum(s),u=new Int32Array(qe.BARS_IN_MODULE),f=0,i=0;for(let c=0;c<qe.MODULES_IN_CODEWORD;c++){let m=o/(2*qe.MODULES_IN_CODEWORD)+c*o/qe.MODULES_IN_CODEWORD;i+s[f]<=m&&(i+=s[f],f++),u[f]++}return u}static getDecodedCodewordValue(s){let o=En.getBitValue(s);return qe.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let u=0;u<s.length;u++)for(let f=0;f<s[u];f++)o=o<<1|(u%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=st.sum(s),u=new Array(qe.BARS_IN_MODULE);if(o>1)for(let c=0;c<u.length;c++)u[c]=Math.fround(s[c]/o);let f=rs.MAX_VALUE,i=-1;this.bSymbolTableReady||En.initialize();for(let c=0;c<En.RATIOS_TABLE.length;c++){let m=0,p=En.RATIOS_TABLE[c];for(let v=0;v<qe.BARS_IN_MODULE;v++){let b=Math.fround(p[v]-u[v]);if(m+=Math.fround(b*b),m>=f)break}m<f&&(f=m,i=qe.SYMBOL_TABLE[c])}return i}}En.bSymbolTableReady=!1,En.RATIOS_TABLE=new Array(qe.SYMBOL_TABLE.length).map(k=>new Array(qe.BARS_IN_MODULE));class ho{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class gu{static parseLong(s,o=void 0){return parseInt(s,o)}}class pu extends x{}pu.kind="NullPointerException";class Bh{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,u){if(s==null)throw new pu;if(o<0||o>s.length||u<0||o+u>s.length||o+u<0)throw new V;if(u===0)return;for(let f=0;f<u;f++)this.write(s[o+f])}flush(){}close(){}}class Ml extends x{}class Dl extends Bh{constructor(s=32){if(super(),this.count=0,s<0)throw new E("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let u=this.buf.length<<1;if(u-s<0&&(u=s),u<0){if(s<0)throw new Ml;u=_.MAX_VALUE}this.buf=A.copyOfUint8Array(this.buf,u)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,u){if(o<0||o>s.length||u<0||o+u-s.length>0)throw new V;this.ensureCapacity(this.count+u),O.arraycopy(s,o,this.buf,this.count,u),this.count+=u}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return A.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var St;(function(k){k[k.ALPHA=0]="ALPHA",k[k.LOWER=1]="LOWER",k[k.MIXED=2]="MIXED",k[k.PUNCT=3]="PUNCT",k[k.ALPHA_SHIFT=4]="ALPHA_SHIFT",k[k.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(St||(St={}));function xa(){if(typeof window<"u")return window.BigInt||null;if(typeof Sn<"u")return Sn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Js;function Sr(k){if(typeof Js>"u"&&(Js=xa()),Js===null)throw new Error("BigInt is not supported!");return Js(k)}function xu(){let k=[];k[0]=Sr(1);let s=Sr(900);k[1]=s;for(let o=2;o<16;o++)k[o]=k[o-1]*s;return k}class de{static decode(s,o){let u=new re(""),f=q.ISO8859_1;u.enableDecoding(f);let i=1,c=s[i++],m=new ho;for(;i<s[0];){switch(c){case de.TEXT_COMPACTION_MODE_LATCH:i=de.textCompaction(s,i,u);break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:i=de.byteCompaction(c,s,f,i,u);break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(s[i++]);break;case de.NUMERIC_COMPACTION_MODE_LATCH:i=de.numericCompaction(s,i,u);break;case de.ECI_CHARSET:q.getCharacterSetECIByValue(s[i++]);break;case de.ECI_GENERAL_PURPOSE:i+=2;break;case de.ECI_USER_DEFINED:i++;break;case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:i=de.decodeMacroBlock(s,i,m);break;case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:throw new F;default:i--,i=de.textCompaction(s,i,u);break}if(i<s.length)c=s[i++];else throw F.getFormatInstance()}if(u.length()===0)throw F.getFormatInstance();let p=new Be(null,u.toString(),null,o);return p.setOther(m),p}static decodeMacroBlock(s,o,u){if(o+de.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw F.getFormatInstance();let f=new Int32Array(de.NUMBER_OF_SEQUENCE_CODEWORDS);for(let m=0;m<de.NUMBER_OF_SEQUENCE_CODEWORDS;m++,o++)f[m]=s[o];u.setSegmentIndex(_.parseInt(de.decodeBase900toBase10(f,de.NUMBER_OF_SEQUENCE_CODEWORDS)));let i=new re;o=de.textCompaction(s,o,i),u.setFileId(i.toString());let c=-1;for(s[o]===de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(c=o+1);o<s[0];)switch(s[o]){case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let m=new re;o=de.textCompaction(s,o+1,m),u.setFileName(m.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new re;o=de.textCompaction(s,o+1,p),u.setSender(p.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new re;o=de.textCompaction(s,o+1,v),u.setAddressee(v.toString());break;case de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let b=new re;o=de.numericCompaction(s,o+1,b),u.setSegmentCount(_.parseInt(b.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let C=new re;o=de.numericCompaction(s,o+1,C),u.setTimestamp(gu.parseLong(C.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let S=new re;o=de.numericCompaction(s,o+1,S),u.setChecksum(_.parseInt(S.toString()));break;case de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let j=new re;o=de.numericCompaction(s,o+1,j),u.setFileSize(gu.parseLong(j.toString()));break;default:throw F.getFormatInstance()}break;case de.MACRO_PDF417_TERMINATOR:o++,u.setLastSegment(!0);break;default:throw F.getFormatInstance()}if(c!==-1){let m=o-c;u.isLastSegment()&&m--,u.setOptionalData(A.copyOfRange(s,c,c+m))}return o}static textCompaction(s,o,u){let f=new Int32Array((s[0]-o)*2),i=new Int32Array((s[0]-o)*2),c=0,m=!1;for(;o<s[0]&&!m;){let p=s[o++];if(p<de.TEXT_COMPACTION_MODE_LATCH)f[c]=p/30,f[c+1]=p%30,c+=2;else switch(p){case de.TEXT_COMPACTION_MODE_LATCH:f[c++]=de.TEXT_COMPACTION_MODE_LATCH;break;case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:o--,m=!0;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f[c]=de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=s[o++],i[c]=p,c++;break}}return de.decodeTextCompaction(f,i,c,u),o}static decodeTextCompaction(s,o,u,f){let i=St.ALPHA,c=St.ALPHA,m=0;for(;m<u;){let p=s[m],v="";switch(i){case St.ALPHA:if(p<26)v=String.fromCharCode(65+p);else switch(p){case 26:v=" ";break;case de.LL:i=St.LOWER;break;case de.ML:i=St.MIXED;break;case de.PS:c=i,i=St.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:i=St.ALPHA;break}break;case St.LOWER:if(p<26)v=String.fromCharCode(97+p);else switch(p){case 26:v=" ";break;case de.AS:c=i,i=St.ALPHA_SHIFT;break;case de.ML:i=St.MIXED;break;case de.PS:c=i,i=St.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:i=St.ALPHA;break}break;case St.MIXED:if(p<de.PL)v=de.MIXED_CHARS[p];else switch(p){case de.PL:i=St.PUNCT;break;case 26:v=" ";break;case de.LL:i=St.LOWER;break;case de.AL:i=St.ALPHA;break;case de.PS:c=i,i=St.PUNCT_SHIFT;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:i=St.ALPHA;break}break;case St.PUNCT:if(p<de.PAL)v=de.PUNCT_CHARS[p];else switch(p){case de.PAL:i=St.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:i=St.ALPHA;break}break;case St.ALPHA_SHIFT:if(i=c,p<26)v=String.fromCharCode(65+p);else switch(p){case 26:v=" ";break;case de.TEXT_COMPACTION_MODE_LATCH:i=St.ALPHA;break}break;case St.PUNCT_SHIFT:if(i=c,p<de.PAL)v=de.PUNCT_CHARS[p];else switch(p){case de.PAL:i=St.ALPHA;break;case de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:f.append(o[m]);break;case de.TEXT_COMPACTION_MODE_LATCH:i=St.ALPHA;break}break}v!==""&&f.append(v),m++}}static byteCompaction(s,o,u,f,i){let c=new Dl,m=0,p=0,v=!1;switch(s){case de.BYTE_COMPACTION_MODE_LATCH:let b=new Int32Array(6),C=o[f++];for(;f<o[0]&&!v;)switch(b[m++]=C,p=900*p+C,C=o[f++],C){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:f--,v=!0;break;default:if(m%5===0&&m>0){for(let S=0;S<6;++S)c.write(Number(Sr(p)>>Sr(8*(5-S))));p=0,m=0}break}f===o[0]&&C<de.TEXT_COMPACTION_MODE_LATCH&&(b[m++]=C);for(let S=0;S<m;S++)c.write(b[S]);break;case de.BYTE_COMPACTION_MODE_LATCH_6:for(;f<o[0]&&!v;){let S=o[f++];if(S<de.TEXT_COMPACTION_MODE_LATCH)m++,p=900*p+S;else switch(S){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.NUMERIC_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:f--,v=!0;break}if(m%5===0&&m>0){for(let j=0;j<6;++j)c.write(Number(Sr(p)>>Sr(8*(5-j))));p=0,m=0}}break}return i.append(he.decode(c.toByteArray(),u)),f}static numericCompaction(s,o,u){let f=0,i=!1,c=new Int32Array(de.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!i;){let m=s[o++];if(o===s[0]&&(i=!0),m<de.TEXT_COMPACTION_MODE_LATCH)c[f]=m,f++;else switch(m){case de.TEXT_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH:case de.BYTE_COMPACTION_MODE_LATCH_6:case de.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case de.MACRO_PDF417_TERMINATOR:o--,i=!0;break}(f%de.MAX_NUMERIC_CODEWORDS===0||m===de.NUMERIC_COMPACTION_MODE_LATCH||i)&&f>0&&(u.append(de.decodeBase900toBase10(c,f)),f=0)}return o}static decodeBase900toBase10(s,o){let u=Sr(0);for(let i=0;i<o;i++)u+=de.EXP900[o-i-1]*Sr(s[i]);let f=u.toString();if(f.charAt(0)!=="1")throw new F;return f.substring(1)}}de.TEXT_COMPACTION_MODE_LATCH=900,de.BYTE_COMPACTION_MODE_LATCH=901,de.NUMERIC_COMPACTION_MODE_LATCH=902,de.BYTE_COMPACTION_MODE_LATCH_6=924,de.ECI_USER_DEFINED=925,de.ECI_GENERAL_PURPOSE=926,de.ECI_CHARSET=927,de.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,de.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,de.MACRO_PDF417_TERMINATOR=922,de.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,de.MAX_NUMERIC_CODEWORDS=15,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,de.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,de.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,de.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,de.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,de.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,de.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,de.PL=25,de.LL=27,de.AS=27,de.ML=28,de.AL=28,de.PS=29,de.PAL=29,de.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,de.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",de.EXP900=xa()?xu():[],de.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ze{constructor(){}static decode(s,o,u,f,i,c,m){let p=new Nr(s,o,u,f,i),v=null,b=null,C;for(let P=!0;;P=!1){if(o!=null&&(v=Ze.getRowIndicatorColumn(s,p,o,!0,c,m)),f!=null&&(b=Ze.getRowIndicatorColumn(s,p,f,!1,c,m)),C=Ze.merge(v,b),C==null)throw Y.getNotFoundInstance();let B=C.getBoundingBox();if(P&&B!=null&&(B.getMinY()<p.getMinY()||B.getMaxY()>p.getMaxY()))p=B;else break}C.setBoundingBox(p);let S=C.getBarcodeColumnCount()+1;C.setDetectionResultColumn(0,v),C.setDetectionResultColumn(S,b);let j=v!=null;for(let P=1;P<=S;P++){let B=j?P:S-P;if(C.getDetectionResultColumn(B)!==void 0)continue;let L;B===0||B===S?L=new mu(p,B===0):L=new ga(p),C.setDetectionResultColumn(B,L);let z=-1,G=z;for(let K=p.getMinY();K<=p.getMaxY();K++){if(z=Ze.getStartColumn(C,B,K,j),z<0||z>p.getMaxX()){if(G===-1)continue;z=G}let X=Ze.detectCodeword(s,p.getMinX(),p.getMaxX(),j,z,K,c,m);X!=null&&(L.setCodeword(K,X),G=z,c=Math.min(c,X.getWidth()),m=Math.max(m,X.getWidth()))}}return Ze.createDecoderResult(C)}static merge(s,o){if(s==null&&o==null)return null;let u=Ze.getBarcodeMetadata(s,o);if(u==null)return null;let f=Nr.merge(Ze.adjustBoundingBox(s),Ze.adjustBoundingBox(o));return new pa(u,f)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let u=Ze.getMax(o),f=0;for(let m of o)if(f+=u-m,m>0)break;let i=s.getCodewords();for(let m=0;f>0&&i[m]==null;m++)f--;let c=0;for(let m=o.length-1;m>=0&&(c+=u-o[m],!(o[m]>0));m--);for(let m=i.length-1;c>0&&i[m]==null;m--)c--;return s.getBoundingBox().addMissingRows(f,c,s.isLeft())}static getMax(s){let o=-1;for(let u of s)o=Math.max(o,u);return o}static getBarcodeMetadata(s,o){let u;if(s==null||(u=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let f;return o==null||(f=o.getBarcodeMetadata())==null?u:u.getColumnCount()!==f.getColumnCount()&&u.getErrorCorrectionLevel()!==f.getErrorCorrectionLevel()&&u.getRowCount()!==f.getRowCount()?null:u}static getRowIndicatorColumn(s,o,u,f,i,c){let m=new mu(o,f);for(let p=0;p<2;p++){let v=p===0?1:-1,b=Math.trunc(Math.trunc(u.getX()));for(let C=Math.trunc(Math.trunc(u.getY()));C<=o.getMaxY()&&C>=o.getMinY();C+=v){let S=Ze.detectCodeword(s,0,s.getWidth(),f,b,C,i,c);S!=null&&(m.setCodeword(C,S),f?b=S.getStartX():b=S.getEndX())}}return m}static adjustCodewordCount(s,o){let u=o[0][1],f=u.getValue(),i=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-Ze.getNumberOfECCodeWords(s.getBarcodeECLevel());if(f.length===0){if(i<1||i>qe.MAX_CODEWORDS_IN_BARCODE)throw Y.getNotFoundInstance();u.setValue(i)}else f[0]!==i&&u.setValue(i)}static createDecoderResult(s){let o=Ze.createBarcodeMatrix(s);Ze.adjustCodewordCount(s,o);let u=new Array,f=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),i=[],c=new Array;for(let p=0;p<s.getBarcodeRowCount();p++)for(let v=0;v<s.getBarcodeColumnCount();v++){let b=o[p][v+1].getValue(),C=p*s.getBarcodeColumnCount()+v;b.length===0?u.push(C):b.length===1?f[C]=b[0]:(c.push(C),i.push(b))}let m=new Array(i.length);for(let p=0;p<m.length;p++)m[p]=i[p];return Ze.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),f,qe.toIntArray(u),qe.toIntArray(c),m)}static createDecoderResultFromAmbiguousValues(s,o,u,f,i){let c=new Int32Array(f.length),m=100;for(;m-- >0;){for(let p=0;p<c.length;p++)o[f[p]]=i[p][c[p]];try{return Ze.decodeCodewords(o,s,u)}catch(p){if(!(p instanceof I))throw p}if(c.length===0)throw I.getChecksumInstance();for(let p=0;p<c.length;p++)if(c[p]<i[p].length-1){c[p]++;break}else if(c[p]=0,p===c.length-1)throw I.getChecksumInstance()}throw I.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let f=0;f<o.length;f++)for(let i=0;i<o[f].length;i++)o[f][i]=new as;let u=0;for(let f of s.getDetectionResultColumns()){if(f!=null){for(let i of f.getCodewords())if(i!=null){let c=i.getRowNumber();if(c>=0){if(c>=o.length)continue;o[c][u].setValue(i.getValue())}}}u++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,u,f){let i=f?1:-1,c=null;if(Ze.isValidBarcodeColumn(s,o-i)&&(c=s.getDetectionResultColumn(o-i).getCodeword(u)),c!=null)return f?c.getEndX():c.getStartX();if(c=s.getDetectionResultColumn(o).getCodewordNearby(u),c!=null)return f?c.getStartX():c.getEndX();if(Ze.isValidBarcodeColumn(s,o-i)&&(c=s.getDetectionResultColumn(o-i).getCodewordNearby(u)),c!=null)return f?c.getEndX():c.getStartX();let m=0;for(;Ze.isValidBarcodeColumn(s,o-i);){o-=i;for(let p of s.getDetectionResultColumn(o).getCodewords())if(p!=null)return(f?p.getEndX():p.getStartX())+i*m*(p.getEndX()-p.getStartX());m++}return f?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,u,f,i,c,m,p){i=Ze.adjustCodewordStartColumn(s,o,u,f,i,c);let v=Ze.getModuleBitCount(s,o,u,f,i,c);if(v==null)return null;let b,C=st.sum(v);if(f)b=i+C;else{for(let P=0;P<v.length/2;P++){let B=v[P];v[P]=v[v.length-1-P],v[v.length-1-P]=B}b=i,i=b-C}if(!Ze.checkCodewordSkew(C,m,p))return null;let S=En.getDecodedValue(v),j=qe.getCodeword(S);return j===-1?null:new Ms(i,b,Ze.getCodewordBucketNumber(S),j)}static getModuleBitCount(s,o,u,f,i,c){let m=i,p=new Int32Array(8),v=0,b=f?1:-1,C=f;for(;(f?m<u:m>=o)&&v<p.length;)s.get(m,c)===C?(p[v]++,m+=b):(v++,C=!C);return v===p.length||m===(f?u:o)&&v===p.length-1?p:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,u,f,i,c){let m=i,p=f?-1:1;for(let v=0;v<2;v++){for(;(f?m>=o:m<u)&&f===s.get(m,c);){if(Math.abs(i-m)>Ze.CODEWORD_SKEW_SIZE)return i;m+=p}p=-p,f=!f}return m}static checkCodewordSkew(s,o,u){return o-Ze.CODEWORD_SKEW_SIZE<=s&&s<=u+Ze.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,u){if(s.length===0)throw F.getFormatInstance();let f=1<<o+1,i=Ze.correctErrors(s,u,f);Ze.verifyCodewordCount(s,f);let c=de.decode(s,""+o);return c.setErrorsCorrected(i),c.setErasures(u.length),c}static correctErrors(s,o,u){if(o!=null&&o.length>u/2+Ze.MAX_ERRORS||u<0||u>Ze.MAX_EC_CODEWORDS)throw I.getChecksumInstance();return Ze.errorCorrection.decode(s,u,o)}static verifyCodewordCount(s,o){if(s.length<4)throw F.getFormatInstance();let u=s[0];if(u>s.length)throw F.getFormatInstance();if(u===0)if(o<s.length)s[0]=s.length-o;else throw F.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),u=0,f=o.length-1;for(;!((s&1)!==u&&(u=s&1,f--,f<0));)o[f]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return Ze.getCodewordBucketNumber(Ze.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new Ni;for(let u=0;u<s.length;u++){o.format("Row %2d: ",u);for(let f=0;f<s[u].length;f++){let i=s[u][f];i.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",i.getValue()[0],i.getConfidence(i.getValue()[0]))}o.format("%n")}return o.toString()}}Ze.CODEWORD_SKEW_SIZE=2,Ze.MAX_ERRORS=3,Ze.MAX_EC_CODEWORDS=512,Ze.errorCorrection=new uo;class hn{decode(s,o=null){let u=hn.decode(s,o,!1);if(u==null||u.length===0||u[0]==null)throw Y.getNotFoundInstance();return u[0]}decodeMultiple(s,o=null){try{return hn.decode(s,o,!0)}catch(u){throw u instanceof F||u instanceof I?Y.getNotFoundInstance():u}}static decode(s,o,u){const f=new Array,i=tt.detectMultiple(s,o,u);for(const c of i.getPoints()){const m=Ze.decode(i.getBits(),c[4],c[5],c[6],c[7],hn.getMinCodewordWidth(c),hn.getMaxCodewordWidth(c)),p=new $e(m.getText(),m.getRawBytes(),void 0,c,_e.PDF_417);p.putMetadata(Je.ERROR_CORRECTION_LEVEL,m.getECLevel());const v=m.getOther();v!=null&&p.putMetadata(Je.PDF417_EXTRA_METADATA,v),f.push(p)}return f.map(c=>c)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?_.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(hn.getMaxWidth(s[0],s[4]),hn.getMaxWidth(s[6],s[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.max(hn.getMaxWidth(s[1],s[5]),hn.getMaxWidth(s[7],s[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(hn.getMinWidth(s[0],s[4]),hn.getMinWidth(s[6],s[2])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN),Math.min(hn.getMinWidth(s[1],s[5]),hn.getMinWidth(s[7],s[3])*qe.MODULES_IN_CODEWORD/qe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Si extends x{}Si.kind="ReaderException";class fo{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!r(s)&&s.get($.TRY_HARDER)===!0,u=r(s)?null:s.get($.POSSIBLE_FORMATS),f=new Array;if(!r(u)){const i=u.some(c=>c===_e.UPC_A||c===_e.UPC_E||c===_e.EAN_13||c===_e.EAN_8||c===_e.CODABAR||c===_e.CODE_39||c===_e.CODE_93||c===_e.CODE_128||c===_e.ITF||c===_e.RSS_14||c===_e.RSS_EXPANDED);i&&!o&&f.push(new js(s,this.verbose)),u.includes(_e.QR_CODE)&&f.push(new dr),u.includes(_e.DATA_MATRIX)&&f.push(new Qn),u.includes(_e.AZTEC)&&f.push(new Bn),u.includes(_e.PDF_417)&&f.push(new hn),i&&o&&f.push(new js(s,this.verbose))}f.length===0&&(o||f.push(new js(s,this.verbose)),f.push(new dr),f.push(new Qn),f.push(new Bn),f.push(new hn),o&&f.push(new js(s,this.verbose))),this.readers=f}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Si("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(u){if(u instanceof Si)continue}throw new Y("No MultiFormat Readers were able to detect the code.")}}class Ol extends We{constructor(s=null,o=500){const u=new fo;u.setHints(s),super(u,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class In extends We{constructor(s=500){super(new hn,s)}}class ya extends We{constructor(s=500){super(new dr,s)}}var ei;(function(k){k[k.ERROR_CORRECTION=0]="ERROR_CORRECTION",k[k.CHARACTER_SET=1]="CHARACTER_SET",k[k.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",k[k.MIN_SIZE=3]="MIN_SIZE",k[k.MAX_SIZE=4]="MAX_SIZE",k[k.MARGIN=5]="MARGIN",k[k.PDF417_COMPACT=6]="PDF417_COMPACT",k[k.PDF417_COMPACTION=7]="PDF417_COMPACTION",k[k.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",k[k.AZTEC_LAYERS=9]="AZTEC_LAYERS",k[k.QR_VERSION=10]="QR_VERSION"})(ei||(ei={}));var an=ei;class _i{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new Oe(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let u=o[o.length-1];const f=this.field;for(let i=o.length;i<=s;i++){const c=u.multiply(new Oe(f,Int32Array.from([1,f.exp(i-1+f.getGeneratorBase())])));o.push(c),u=c}}return o[s]}encode(s,o){if(o===0)throw new E("No error correction bytes");const u=s.length-o;if(u<=0)throw new E("No data bytes provided");const f=this.buildGenerator(o),i=new Int32Array(u);O.arraycopy(s,0,i,0,u);let c=new Oe(this.field,i);c=c.multiplyByMonomial(o,1);const p=c.divide(f)[1].getCoefficients(),v=o-p.length;for(let b=0;b<v;b++)s[u+b]=0;O.arraycopy(p,0,s,u+v,p.length)}}class Ht{constructor(){}static applyMaskPenaltyRule1(s){return Ht.applyMaskPenaltyRule1Internal(s,!0)+Ht.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const u=s.getArray(),f=s.getWidth(),i=s.getHeight();for(let c=0;c<i-1;c++){const m=u[c];for(let p=0;p<f-1;p++){const v=m[p];v===m[p+1]&&v===u[c+1][p]&&v===u[c+1][p+1]&&o++}}return Ht.N2*o}static applyMaskPenaltyRule3(s){let o=0;const u=s.getArray(),f=s.getWidth(),i=s.getHeight();for(let c=0;c<i;c++)for(let m=0;m<f;m++){const p=u[c];m+6<f&&p[m]===1&&p[m+1]===0&&p[m+2]===1&&p[m+3]===1&&p[m+4]===1&&p[m+5]===0&&p[m+6]===1&&(Ht.isWhiteHorizontal(p,m-4,m)||Ht.isWhiteHorizontal(p,m+7,m+11))&&o++,c+6<i&&u[c][m]===1&&u[c+1][m]===0&&u[c+2][m]===1&&u[c+3][m]===1&&u[c+4][m]===1&&u[c+5][m]===0&&u[c+6][m]===1&&(Ht.isWhiteVertical(u,m,c-4,c)||Ht.isWhiteVertical(u,m,c+7,c+11))&&o++}return o*Ht.N3}static isWhiteHorizontal(s,o,u){o=Math.max(o,0),u=Math.min(u,s.length);for(let f=o;f<u;f++)if(s[f]===1)return!1;return!0}static isWhiteVertical(s,o,u,f){u=Math.max(u,0),f=Math.min(f,s.length);for(let i=u;i<f;i++)if(s[i][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const u=s.getArray(),f=s.getWidth(),i=s.getHeight();for(let p=0;p<i;p++){const v=u[p];for(let b=0;b<f;b++)v[b]===1&&o++}const c=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-c)*10/c)*Ht.N4}static getDataMaskBit(s,o,u){let f,i;switch(s){case 0:f=u+o&1;break;case 1:f=u&1;break;case 2:f=o%3;break;case 3:f=(u+o)%3;break;case 4:f=Math.floor(u/2)+Math.floor(o/3)&1;break;case 5:i=u*o,f=(i&1)+i%3;break;case 6:i=u*o,f=(i&1)+i%3&1;break;case 7:i=u*o,f=i%3+(u+o&1)&1;break;default:throw new E("Invalid mask pattern: "+s)}return f===0}static applyMaskPenaltyRule1Internal(s,o){let u=0;const f=o?s.getHeight():s.getWidth(),i=o?s.getWidth():s.getHeight(),c=s.getArray();for(let m=0;m<f;m++){let p=0,v=-1;for(let b=0;b<i;b++){const C=o?c[m][b]:c[b][m];C===v?p++:(p>=5&&(u+=Ht.N1+(p-5)),p=1,v=C)}p>=5&&(u+=Ht.N1+(p-5))}return u}}Ht.N1=3,Ht.N2=3,Ht.N3=40,Ht.N4=10;class va{constructor(s,o){this.width=s,this.height=o;const u=new Array(o);for(let f=0;f!==o;f++)u[f]=new Uint8Array(s);this.bytes=u}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,u){this.bytes[o][s]=u}setBoolean(s,o,u){this.bytes[o][s]=u?1:0}clear(s){for(const o of this.bytes)A.fill(o,s)}equals(s){if(!(s instanceof va))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let u=0,f=this.height;u<f;++u){const i=this.bytes[u],c=o.bytes[u];for(let m=0,p=this.width;m<p;++m)if(i[m]!==c[m])return!1}return!0}toString(){const s=new re;for(let o=0,u=this.height;o<u;++o){const f=this.bytes[o];for(let i=0,c=this.width;i<c;++i)switch(f[i]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class zr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new re;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<zr.NUM_MASK_PATTERNS}}zr.NUM_MASK_PATTERNS=8;class _t extends x{}_t.kind="WriterException";class He{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,u,f,i){He.clearMatrix(i),He.embedBasicPatterns(u,i),He.embedTypeInfo(o,f,i),He.maybeEmbedVersionInfo(u,i),He.embedDataBits(s,f,i)}static embedBasicPatterns(s,o){He.embedPositionDetectionPatternsAndSeparators(o),He.embedDarkDotAtLeftBottomCorner(o),He.maybeEmbedPositionAdjustmentPatterns(s,o),He.embedTimingPatterns(o)}static embedTypeInfo(s,o,u){const f=new M;He.makeTypeInfoBits(s,o,f);for(let i=0,c=f.getSize();i<c;++i){const m=f.get(f.getSize()-1-i),p=He.TYPE_INFO_COORDINATES[i],v=p[0],b=p[1];if(u.setBoolean(v,b,m),i<8){const C=u.getWidth()-i-1;u.setBoolean(C,8,m)}else{const S=u.getHeight()-7+(i-8);u.setBoolean(8,S,m)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const u=new M;He.makeVersionInfoBits(s,u);let f=6*3-1;for(let i=0;i<6;++i)for(let c=0;c<3;++c){const m=u.get(f);f--,o.setBoolean(i,o.getHeight()-11+c,m),o.setBoolean(o.getHeight()-11+c,i,m)}}static embedDataBits(s,o,u){let f=0,i=-1,c=u.getWidth()-1,m=u.getHeight()-1;for(;c>0;){for(c===6&&(c-=1);m>=0&&m<u.getHeight();){for(let p=0;p<2;++p){const v=c-p;if(!He.isEmpty(u.get(v,m)))continue;let b;f<s.getSize()?(b=s.get(f),++f):b=!1,o!==255&&Ht.getDataMaskBit(o,v,m)&&(b=!b),u.setBoolean(v,m,b)}m+=i}i=-i,m+=i,c-=2}if(f!==s.getSize())throw new _t("Not all bits consumed: "+f+"/"+s.getSize())}static findMSBSet(s){return 32-_.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new E("0 polynomial");const u=He.findMSBSet(o);for(s<<=u-1;He.findMSBSet(s)>=u;)s^=o<<He.findMSBSet(s)-u;return s}static makeTypeInfoBits(s,o,u){if(!zr.isValidMaskPattern(o))throw new _t("Invalid mask pattern");const f=s.getBits()<<3|o;u.appendBits(f,5);const i=He.calculateBCHCode(f,He.TYPE_INFO_POLY);u.appendBits(i,10);const c=new M;if(c.appendBits(He.TYPE_INFO_MASK_PATTERN,15),u.xor(c),u.getSize()!==15)throw new _t("should not happen but we got: "+u.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const u=He.calculateBCHCode(s.getVersionNumber(),He.VERSION_INFO_POLY);if(o.appendBits(u,12),o.getSize()!==18)throw new _t("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const u=(o+1)%2;He.isEmpty(s.get(o,6))&&s.setNumber(o,6,u),He.isEmpty(s.get(6,o))&&s.setNumber(6,o,u)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new _t;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,u){for(let f=0;f<8;++f){if(!He.isEmpty(u.get(s+f,o)))throw new _t;u.setNumber(s+f,o,0)}}static embedVerticalSeparationPattern(s,o,u){for(let f=0;f<7;++f){if(!He.isEmpty(u.get(s,o+f)))throw new _t;u.setNumber(s,o+f,0)}}static embedPositionAdjustmentPattern(s,o,u){for(let f=0;f<5;++f){const i=He.POSITION_ADJUSTMENT_PATTERN[f];for(let c=0;c<5;++c)u.setNumber(s+c,o+f,i[c])}}static embedPositionDetectionPattern(s,o,u){for(let f=0;f<7;++f){const i=He.POSITION_DETECTION_PATTERN[f];for(let c=0;c<7;++c)u.setNumber(s+c,o+f,i[c])}}static embedPositionDetectionPatternsAndSeparators(s){const o=He.POSITION_DETECTION_PATTERN[0].length;He.embedPositionDetectionPattern(0,0,s),He.embedPositionDetectionPattern(s.getWidth()-o,0,s),He.embedPositionDetectionPattern(0,s.getWidth()-o,s);const u=8;He.embedHorizontalSeparationPattern(0,u-1,s),He.embedHorizontalSeparationPattern(s.getWidth()-u,u-1,s),He.embedHorizontalSeparationPattern(0,s.getWidth()-u,s);const f=7;He.embedVerticalSeparationPattern(f,0,s),He.embedVerticalSeparationPattern(s.getHeight()-f-1,0,s),He.embedVerticalSeparationPattern(f,s.getHeight()-f,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const u=s.getVersionNumber()-1,f=He.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[u];for(let i=0,c=f.length;i!==c;i++){const m=f[i];if(m>=0)for(let p=0;p!==c;p++){const v=f[p];v>=0&&He.isEmpty(o.get(v,m))&&He.embedPositionAdjustmentPattern(v-2,m-2,o)}}}}He.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),He.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),He.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),He.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),He.VERSION_INFO_POLY=7973,He.TYPE_INFO_POLY=1335,He.TYPE_INFO_MASK_PATTERN=21522;class Pl{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class Rt{constructor(){}static calculateMaskPenalty(s){return Ht.applyMaskPenaltyRule1(s)+Ht.applyMaskPenaltyRule2(s)+Ht.applyMaskPenaltyRule3(s)+Ht.applyMaskPenaltyRule4(s)}static encode(s,o,u=null){let f=Rt.DEFAULT_BYTE_MODE_ENCODING;const i=u!==null&&u.get(an.CHARACTER_SET)!==void 0;i&&(f=u.get(an.CHARACTER_SET).toString());const c=this.chooseMode(s,f),m=new M;if(c===Ge.BYTE&&(i||Rt.DEFAULT_BYTE_MODE_ENCODING!==f)){const K=q.getCharacterSetECIByName(f);K!==void 0&&this.appendECI(K,m)}this.appendModeInfo(c,m);const p=new M;this.appendBytes(s,c,p,f);let v;if(u!==null&&u.get(an.QR_VERSION)!==void 0){const K=Number.parseInt(u.get(an.QR_VERSION).toString(),10);v=ze.getVersionForNumber(K);const X=this.calculateBitsNeeded(c,m,p,v);if(!this.willFit(X,v,o))throw new _t("Data too big for requested version")}else v=this.recommendVersion(o,c,m,p);const b=new M;b.appendBitArray(m);const C=c===Ge.BYTE?p.getSizeInBytes():s.length;this.appendLengthInfo(C,v,c,b),b.appendBitArray(p);const S=v.getECBlocksForLevel(o),j=v.getTotalCodewords()-S.getTotalECCodewords();this.terminateBits(j,b);const P=this.interleaveWithECBytes(b,v.getTotalCodewords(),j,S.getNumBlocks()),B=new zr;B.setECLevel(o),B.setMode(c),B.setVersion(v);const L=v.getDimensionForVersion(),z=new va(L,L),G=this.chooseMaskPattern(P,o,v,z);return B.setMaskPattern(G),He.buildMatrix(P,o,v,G,z),B.setMatrix(z),B}static recommendVersion(s,o,u,f){const i=this.calculateBitsNeeded(o,u,f,ze.getVersionForNumber(1)),c=this.chooseVersion(i,s),m=this.calculateBitsNeeded(o,u,f,c);return this.chooseVersion(m,s)}static calculateBitsNeeded(s,o,u,f){return o.getSize()+s.getCharacterCountBits(f)+u.getSize()}static getAlphanumericCode(s){return s<Rt.ALPHANUMERIC_TABLE.length?Rt.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(q.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return Ge.KANJI;let u=!1,f=!1;for(let i=0,c=s.length;i<c;++i){const m=s.charAt(i);if(Rt.isDigit(m))u=!0;else if(this.getAlphanumericCode(m.charCodeAt(0))!==-1)f=!0;else return Ge.BYTE}return f?Ge.ALPHANUMERIC:u?Ge.NUMERIC:Ge.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=he.encode(s,q.SJIS)}catch{return!1}const u=o.length;if(u%2!==0)return!1;for(let f=0;f<u;f+=2){const i=o[f]&255;if((i<129||i>159)&&(i<224||i>235))return!1}return!0}static chooseMaskPattern(s,o,u,f){let i=Number.MAX_SAFE_INTEGER,c=-1;for(let m=0;m<zr.NUM_MASK_PATTERNS;m++){He.buildMatrix(s,o,u,m,f);let p=this.calculateMaskPenalty(f);p<i&&(i=p,c=m)}return c}static chooseVersion(s,o){for(let u=1;u<=40;u++){const f=ze.getVersionForNumber(u);if(Rt.willFit(s,f,o))return f}throw new _t("Data too big")}static willFit(s,o,u){const f=o.getTotalCodewords(),c=o.getECBlocksForLevel(u).getTotalECCodewords(),m=f-c,p=(s+7)/8;return m>=p}static terminateBits(s,o){const u=s*8;if(o.getSize()>u)throw new _t("data bits cannot fit in the QR Code"+o.getSize()+" > "+u);for(let c=0;c<4&&o.getSize()<u;++c)o.appendBit(!1);const f=o.getSize()&7;if(f>0)for(let c=f;c<8;c++)o.appendBit(!1);const i=s-o.getSizeInBytes();for(let c=0;c<i;++c)o.appendBits(c&1?17:236,8);if(o.getSize()!==u)throw new _t("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,u,f,i,c){if(f>=u)throw new _t("Block ID too large");const m=s%u,p=u-m,v=Math.floor(s/u),b=v+1,C=Math.floor(o/u),S=C+1,j=v-C,P=b-S;if(j!==P)throw new _t("EC bytes mismatch");if(u!==p+m)throw new _t("RS blocks mismatch");if(s!==(C+j)*p+(S+P)*m)throw new _t("Total bytes mismatch");f<p?(i[0]=C,c[0]=j):(i[0]=S,c[0]=P)}static interleaveWithECBytes(s,o,u,f){if(s.getSizeInBytes()!==u)throw new _t("Number of bits and data bytes does not match");let i=0,c=0,m=0;const p=new Array;for(let b=0;b<f;++b){const C=new Int32Array(1),S=new Int32Array(1);Rt.getNumDataBytesAndNumECBytesForBlockID(o,u,f,b,C,S);const j=C[0],P=new Uint8Array(j);s.toBytes(8*i,P,0,j);const B=Rt.generateECBytes(P,S[0]);p.push(new Pl(P,B)),c=Math.max(c,j),m=Math.max(m,B.length),i+=C[0]}if(u!==i)throw new _t("Data bytes does not match offset");const v=new M;for(let b=0;b<c;++b)for(const C of p){const S=C.getDataBytes();b<S.length&&v.appendBits(S[b],8)}for(let b=0;b<m;++b)for(const C of p){const S=C.getErrorCorrectionBytes();b<S.length&&v.appendBits(S[b],8)}if(o!==v.getSizeInBytes())throw new _t("Interleaving error: "+o+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(s,o){const u=s.length,f=new Int32Array(u+o);for(let c=0;c<u;c++)f[c]=s[c]&255;new _i(Ve.QR_CODE_FIELD_256).encode(f,o);const i=new Uint8Array(o);for(let c=0;c<o;c++)i[c]=f[u+c];return i}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,u,f){const i=u.getCharacterCountBits(o);if(s>=1<<i)throw new _t(s+" is bigger than "+((1<<i)-1));f.appendBits(s,i)}static appendBytes(s,o,u,f){switch(o){case Ge.NUMERIC:Rt.appendNumericBytes(s,u);break;case Ge.ALPHANUMERIC:Rt.appendAlphanumericBytes(s,u);break;case Ge.BYTE:Rt.append8BitBytes(s,u,f);break;case Ge.KANJI:Rt.appendKanjiBytes(s,u);break;default:throw new _t("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=Rt.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const u=s.length;let f=0;for(;f<u;){const i=Rt.getDigit(s.charAt(f));if(f+2<u){const c=Rt.getDigit(s.charAt(f+1)),m=Rt.getDigit(s.charAt(f+2));o.appendBits(i*100+c*10+m,10),f+=3}else if(f+1<u){const c=Rt.getDigit(s.charAt(f+1));o.appendBits(i*10+c,7),f+=2}else o.appendBits(i,4),f++}}static appendAlphanumericBytes(s,o){const u=s.length;let f=0;for(;f<u;){const i=Rt.getAlphanumericCode(s.charCodeAt(f));if(i===-1)throw new _t;if(f+1<u){const c=Rt.getAlphanumericCode(s.charCodeAt(f+1));if(c===-1)throw new _t;o.appendBits(i*45+c,11),f+=2}else o.appendBits(i,6),f++}}static append8BitBytes(s,o,u){let f;try{f=he.encode(s,u)}catch(i){throw new _t(i)}for(let i=0,c=f.length;i!==c;i++){const m=f[i];o.appendBits(m,8)}}static appendKanjiBytes(s,o){let u;try{u=he.encode(s,q.SJIS)}catch(i){throw new _t(i)}const f=u.length;for(let i=0;i<f;i+=2){const c=u[i]&255,m=u[i+1]&255,p=c<<8&4294967295|m;let v=-1;if(p>=33088&&p<=40956?v=p-33088:p>=57408&&p<=60351&&(v=p-49472),v===-1)throw new _t("Invalid byte sequence");const b=(v>>8)*192+(v&255);o.appendBits(b,13)}}static appendECI(s,o){o.appendBits(Ge.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}Rt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),Rt.DEFAULT_BYTE_MODE_ENCODING=q.UTF8.getName();class $r{write(s,o,u,f=null){if(s.length===0)throw new E("Found empty contents");if(o<0||u<0)throw new E("Requested dimensions are too small: "+o+"x"+u);let i=Nt.L,c=$r.QUIET_ZONE_SIZE;f!==null&&(f.get(an.ERROR_CORRECTION)!==void 0&&(i=Nt.fromString(f.get(an.ERROR_CORRECTION).toString())),f.get(an.MARGIN)!==void 0&&(c=Number.parseInt(f.get(an.MARGIN).toString(),10)));const m=Rt.encode(s,i,f);return this.renderResult(m,o,u,c)}writeToDom(s,o,u,f,i=null){typeof s=="string"&&(s=document.querySelector(s));const c=this.write(o,u,f,i);s&&s.appendChild(c)}renderResult(s,o,u,f){const i=s.getMatrix();if(i===null)throw new jt;const c=i.getWidth(),m=i.getHeight(),p=c+f*2,v=m+f*2,b=Math.max(o,p),C=Math.max(u,v),S=Math.min(Math.floor(b/p),Math.floor(C/v)),j=Math.floor((b-c*S)/2),P=Math.floor((C-m*S)/2),B=this.createSVGElement(b,C);for(let L=0,z=P;L<m;L++,z+=S)for(let G=0,K=j;G<c;G++,K+=S)if(i.get(G,L)===1){const X=this.createSvgRectElement(K,z,S,S);B.appendChild(X)}return B}createSVGElement(s,o){const u=document.createElementNS($r.SVG_NS,"svg");return u.setAttributeNS(null,"height",s.toString()),u.setAttributeNS(null,"width",o.toString()),u}createSvgRectElement(s,o,u,f){const i=document.createElementNS($r.SVG_NS,"rect");return i.setAttributeNS(null,"x",s.toString()),i.setAttributeNS(null,"y",o.toString()),i.setAttributeNS(null,"height",u.toString()),i.setAttributeNS(null,"width",f.toString()),i.setAttributeNS(null,"fill","#000000"),i}}$r.QUIET_ZONE_SIZE=4,$r.SVG_NS="http://www.w3.org/2000/svg";class Ds{encode(s,o,u,f,i){if(s.length===0)throw new E("Found empty contents");if(o!==_e.QR_CODE)throw new E("Can only encode QR_CODE, but got "+o);if(u<0||f<0)throw new E(`Requested dimensions are too small: ${u}x${f}`);let c=Nt.L,m=Ds.QUIET_ZONE_SIZE;i!==null&&(i.get(an.ERROR_CORRECTION)!==void 0&&(c=Nt.fromString(i.get(an.ERROR_CORRECTION).toString())),i.get(an.MARGIN)!==void 0&&(m=Number.parseInt(i.get(an.MARGIN).toString(),10)));const p=Rt.encode(s,c,i);return Ds.renderResult(p,u,f,m)}static renderResult(s,o,u,f){const i=s.getMatrix();if(i===null)throw new jt;const c=i.getWidth(),m=i.getHeight(),p=c+f*2,v=m+f*2,b=Math.max(o,p),C=Math.max(u,v),S=Math.min(Math.floor(b/p),Math.floor(C/v)),j=Math.floor((b-c*S)/2),P=Math.floor((C-m*S)/2),B=new ae(b,C);for(let L=0,z=P;L<m;L++,z+=S)for(let G=0,K=j;G<c;G++,K+=S)i.get(G,L)===1&&B.setRegion(K,z,S,S);return B}}Ds.QUIET_ZONE_SIZE=4;class yu{encode(s,o,u,f,i){let c;switch(o){case _e.QR_CODE:c=new Ds;break;default:throw new E("No encoder available for format "+o)}return c.encode(s,o,u,f,i)}}class Hr extends Q{constructor(s,o,u,f,i,c,m,p){if(super(c,m),this.yuvData=s,this.dataWidth=o,this.dataHeight=u,this.left=f,this.top=i,f+c>o||i+m>u)throw new E("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(c,m)}getRow(s,o){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(o==null||o.length<u)&&(o=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return O.arraycopy(this.yuvData,f,o,0,u),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const u=s*o,f=new Uint8ClampedArray(u);let i=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return O.arraycopy(this.yuvData,i,f,0,u),f;for(let c=0;c<o;c++){const m=c*s;O.arraycopy(this.yuvData,i,f,m,s),i+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,u,f){return new Hr(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,u,f,!1)}renderThumbnail(){const s=this.getWidth()/Hr.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Hr.THUMBNAIL_SCALE_FACTOR,u=new Int32Array(s*o),f=this.yuvData;let i=this.top*this.dataWidth+this.left;for(let c=0;c<o;c++){const m=c*s;for(let p=0;p<s;p++){const v=f[i+p*Hr.THUMBNAIL_SCALE_FACTOR]&255;u[m+p]=4278190080|v*65793}i+=this.dataWidth*Hr.THUMBNAIL_SCALE_FACTOR}return u}getThumbnailWidth(){return this.getWidth()/Hr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Hr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const u=this.yuvData;for(let f=0,i=this.top*this.dataWidth+this.left;f<o;f++,i+=this.dataWidth){const c=i+s/2;for(let m=i,p=i+s-1;m<c;m++,p--){const v=u[m];u[m]=u[p],u[p]=v}}}invert(){return new ce(this)}}Hr.THUMBNAIL_SCALE_FACTOR=2;class wa extends Q{constructor(s,o,u,f,i,c,m){if(super(o,u),this.dataWidth=f,this.dataHeight=i,this.left=c,this.top=m,s.BYTES_PER_ELEMENT===4){const p=o*u,v=new Uint8ClampedArray(p);for(let b=0;b<p;b++){const C=s[b],S=C>>16&255,j=C>>7&510,P=C&255;v[b]=(S+j+P)/4&255}this.luminances=v}else this.luminances=s;if(f===void 0&&(this.dataWidth=o),i===void 0&&(this.dataHeight=u),c===void 0&&(this.left=0),m===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+u>this.dataHeight)throw new E("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new E("Requested row is outside the image: "+s);const u=this.getWidth();(o==null||o.length<u)&&(o=new Uint8ClampedArray(u));const f=(s+this.top)*this.dataWidth+this.left;return O.arraycopy(this.luminances,f,o,0,u),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const u=s*o,f=new Uint8ClampedArray(u);let i=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return O.arraycopy(this.luminances,i,f,0,u),f;for(let c=0;c<o;c++){const m=c*s;O.arraycopy(this.luminances,i,f,m,s),i+=this.dataWidth}return f}isCropSupported(){return!0}crop(s,o,u,f){return new wa(this.luminances,u,f,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new ce(this)}}class ba extends q{static forName(s){return this.getCharacterSetECIByName(s)}}class Ll{}Ll.ISO_8859_1=q.ISO8859_1;class mo{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class go{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class Fh{constructor(s){this.previous=s}getPrevious(){return this.previous}}class ti extends Fh{constructor(s,o,u){super(s),this.value=o,this.bitCount=u}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new ti(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ti(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+_.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class Bl extends ti{constructor(s,o,u){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=u}appendTo(s,o){for(let u=0;u<this.binaryShiftByteCount;u++)(u===0||u===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):u===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+u],8)}addBinaryShift(s,o){return new Bl(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function vu(k,s,o){return new Bl(k,s,o)}function Ai(k,s,o){return new ti(k,s,o)}const Uh=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],os=0,Ti=1,Zn=2,Fl=3,Wr=4,Vh=new ti(null,0,0),Ul=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function po(k){for(let s of k)A.fill(s,-1);return k[os][Wr]=0,k[Ti][Wr]=0,k[Ti][os]=28,k[Fl][Wr]=0,k[Zn][Wr]=0,k[Zn][os]=15,k}const Gr=po(A.createInt32Array(6,6));class Et{constructor(s,o,u,f){this.token=s,this.mode=o,this.binaryShiftByteCount=u,this.bitCount=f}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let u=this.bitCount,f=this.token;if(s!==this.mode){let c=Ul[this.mode][s];f=Ai(f,c&65535,c>>16),u+=c>>16}let i=s===Zn?4:5;return f=Ai(f,o,i),new Et(f,s,0,u+i)}shiftAndAppend(s,o){let u=this.token,f=this.mode===Zn?4:5;return u=Ai(u,Gr[this.mode][s],f),u=Ai(u,o,5),new Et(u,this.mode,0,this.bitCount+f+5)}addBinaryShiftChar(s){let o=this.token,u=this.mode,f=this.bitCount;if(this.mode===Wr||this.mode===Zn){let m=Ul[u][os];o=Ai(o,m&65535,m>>16),f+=m>>16,u=os}let i=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,c=new Et(o,u,this.binaryShiftByteCount+1,f+i);return c.binaryShiftByteCount===2078&&(c=c.endBinaryShift(s+1)),c}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=vu(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new Et(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(Ul[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=Et.calculateBinaryShiftCost(s)-Et.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let f=this.endBinaryShift(s.length).token;f!==null;f=f.getPrevious())o.unshift(f);let u=new M;for(const f of o)f.appendTo(u,s);return u}toString(){return me.format("%s bits=%d bytes=%d",Uh[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}Et.INITIAL_STATE=new Et(Vh,os,0,0);function xo(k){const s=me.getCharCode(" "),o=me.getCharCode("."),u=me.getCharCode(",");k[os][s]=1;const f=me.getCharCode("Z"),i=me.getCharCode("A");for(let S=i;S<=f;S++)k[os][S]=S-i+2;k[Ti][s]=1;const c=me.getCharCode("z"),m=me.getCharCode("a");for(let S=m;S<=c;S++)k[Ti][S]=S-m+2;k[Zn][s]=1;const p=me.getCharCode("9"),v=me.getCharCode("0");for(let S=v;S<=p;S++)k[Zn][S]=S-v+2;k[Zn][u]=12,k[Zn][o]=13;const b=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let S=0;S<b.length;S++)k[Fl][me.getCharCode(b[S])]=S;const C=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let S=0;S<C.length;S++)me.getCharCode(C[S])>0&&(k[Wr][me.getCharCode(C[S])]=S);return k}const Un=xo(A.createInt32Array(5,256));class Ea{constructor(s){this.text=s}encode(){const s=me.getCharCode(" "),o=me.getCharCode(`
`);let u=go.singletonList(Et.INITIAL_STATE);for(let i=0;i<this.text.length;i++){let c,m=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case me.getCharCode("\r"):c=m===o?2:0;break;case me.getCharCode("."):c=m===s?3:0;break;case me.getCharCode(","):c=m===s?4:0;break;case me.getCharCode(":"):c=m===s?5:0;break;default:c=0}c>0?(u=Ea.updateStateListForPair(u,i,c),i++):u=this.updateStateListForChar(u,i)}return go.min(u,(i,c)=>i.getBitCount()-c.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const u=[];for(let f of s)this.updateStateForChar(f,o,u);return Ea.simplifyStates(u)}updateStateForChar(s,o,u){let f=this.text[o]&255,i=Un[s.getMode()][f]>0,c=null;for(let m=0;m<=Wr;m++){let p=Un[m][f];if(p>0){if(c==null&&(c=s.endBinaryShift(o)),!i||m===s.getMode()||m===Zn){const v=c.latchAndAppend(m,p);u.push(v)}if(!i&&Gr[s.getMode()][m]>=0){const v=c.shiftAndAppend(m,p);u.push(v)}}}if(s.getBinaryShiftByteCount()>0||Un[s.getMode()][f]===0){let m=s.addBinaryShiftChar(o);u.push(m)}}static updateStateListForPair(s,o,u){const f=[];for(let i of s)this.updateStateForPair(i,o,u,f);return this.simplifyStates(f)}static updateStateForPair(s,o,u,f){let i=s.endBinaryShift(o);if(f.push(i.latchAndAppend(Wr,u)),s.getMode()!==Wr&&f.push(i.shiftAndAppend(Wr,u)),u===3||u===4){let c=i.latchAndAppend(Zn,16-u).latchAndAppend(Zn,1);f.push(c)}if(s.getBinaryShiftByteCount()>0){let c=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);f.push(c)}}static simplifyStates(s){let o=[];for(const u of s){let f=!0;for(const i of o){if(i.isBetterThanOrEqualTo(u)){f=!1;break}u.isBetterThanOrEqualTo(i)&&(o=o.filter(c=>c!==i))}f&&o.push(u)}return o}}class dt{constructor(){}static encodeBytes(s){return dt.encode(s,dt.DEFAULT_EC_PERCENT,dt.DEFAULT_AZTEC_LAYERS)}static encode(s,o,u){let f=new Ea(s).encode(),i=_.truncDivision(f.getSize()*o,100)+11,c=f.getSize()+i,m,p,v,b,C;if(u!==dt.DEFAULT_AZTEC_LAYERS){if(m=u<0,p=Math.abs(u),p>(m?dt.MAX_NB_BITS_COMPACT:dt.MAX_NB_BITS))throw new E(me.format("Illegal value %s for layers",u));v=dt.totalBitsInLayer(p,m),b=dt.WORD_SIZE[p];let X=v-v%b;if(C=dt.stuffBits(f,b),C.getSize()+i>X)throw new E("Data to large for user specified layer");if(m&&C.getSize()>b*64)throw new E("Data to large for user specified layer")}else{b=0,C=null;for(let X=0;;X++){if(X>dt.MAX_NB_BITS)throw new E("Data too large for an Aztec code");if(m=X<=3,p=m?X+1:X,v=dt.totalBitsInLayer(p,m),c>v)continue;(C==null||b!==dt.WORD_SIZE[p])&&(b=dt.WORD_SIZE[p],C=dt.stuffBits(f,b));let Z=v-v%b;if(!(m&&C.getSize()>b*64)&&C.getSize()+i<=Z)break}}let S=dt.generateCheckWords(C,v,b),j=C.getSize()/b,P=dt.generateModeMessage(m,p,j),B=(m?11:14)+p*4,L=new Int32Array(B),z;if(m){z=B;for(let X=0;X<L.length;X++)L[X]=X}else{z=B+1+2*_.truncDivision(_.truncDivision(B,2)-1,15);let X=_.truncDivision(B,2),Z=_.truncDivision(z,2);for(let ee=0;ee<X;ee++){let oe=ee+_.truncDivision(ee,15);L[X-ee-1]=Z-oe-1,L[X+ee]=Z+oe+1}}let G=new ae(z);for(let X=0,Z=0;X<p;X++){let ee=(p-X)*4+(m?9:12);for(let oe=0;oe<ee;oe++){let le=oe*2;for(let ge=0;ge<2;ge++)S.get(Z+le+ge)&&G.set(L[X*2+ge],L[X*2+oe]),S.get(Z+ee*2+le+ge)&&G.set(L[X*2+oe],L[B-1-X*2-ge]),S.get(Z+ee*4+le+ge)&&G.set(L[B-1-X*2-ge],L[B-1-X*2-oe]),S.get(Z+ee*6+le+ge)&&G.set(L[B-1-X*2-oe],L[X*2+ge])}Z+=ee*8}if(dt.drawModeMessage(G,m,z,P),m)dt.drawBullsEye(G,_.truncDivision(z,2),5);else{dt.drawBullsEye(G,_.truncDivision(z,2),7);for(let X=0,Z=0;X<_.truncDivision(B,2)-1;X+=15,Z+=16)for(let ee=_.truncDivision(z,2)&1;ee<z;ee+=2)G.set(_.truncDivision(z,2)-Z,ee),G.set(_.truncDivision(z,2)+Z,ee),G.set(ee,_.truncDivision(z,2)-Z),G.set(ee,_.truncDivision(z,2)+Z)}let K=new mo;return K.setCompact(m),K.setSize(z),K.setLayers(p),K.setCodeWords(j),K.setMatrix(G),K}static drawBullsEye(s,o,u){for(let f=0;f<u;f+=2)for(let i=o-f;i<=o+f;i++)s.set(i,o-f),s.set(i,o+f),s.set(o-f,i),s.set(o+f,i);s.set(o-u,o-u),s.set(o-u+1,o-u),s.set(o-u,o-u+1),s.set(o+u,o-u),s.set(o+u,o-u+1),s.set(o+u,o+u-1)}static generateModeMessage(s,o,u){let f=new M;return s?(f.appendBits(o-1,2),f.appendBits(u-1,6),f=dt.generateCheckWords(f,28,4)):(f.appendBits(o-1,5),f.appendBits(u-1,11),f=dt.generateCheckWords(f,40,4)),f}static drawModeMessage(s,o,u,f){let i=_.truncDivision(u,2);if(o)for(let c=0;c<7;c++){let m=i-3+c;f.get(c)&&s.set(m,i-5),f.get(c+7)&&s.set(i+5,m),f.get(20-c)&&s.set(m,i+5),f.get(27-c)&&s.set(i-5,m)}else for(let c=0;c<10;c++){let m=i-5+c+_.truncDivision(c,5);f.get(c)&&s.set(m,i-7),f.get(c+10)&&s.set(i+7,m),f.get(29-c)&&s.set(m,i+7),f.get(39-c)&&s.set(i-7,m)}}static generateCheckWords(s,o,u){let f=s.getSize()/u,i=new _i(dt.getGF(u)),c=_.truncDivision(o,u),m=dt.bitsToWords(s,u,c);i.encode(m,c-f);let p=o%u,v=new M;v.appendBits(0,p);for(const b of Array.from(m))v.appendBits(b,u);return v}static bitsToWords(s,o,u){let f=new Int32Array(u),i,c;for(i=0,c=s.getSize()/o;i<c;i++){let m=0;for(let p=0;p<o;p++)m|=s.get(i*o+p)?1<<o-p-1:0;f[i]=m}return f}static getGF(s){switch(s){case 4:return Ve.AZTEC_PARAM;case 6:return Ve.AZTEC_DATA_6;case 8:return Ve.AZTEC_DATA_8;case 10:return Ve.AZTEC_DATA_10;case 12:return Ve.AZTEC_DATA_12;default:throw new E("Unsupported word size "+s)}}static stuffBits(s,o){let u=new M,f=s.getSize(),i=(1<<o)-2;for(let c=0;c<f;c+=o){let m=0;for(let p=0;p<o;p++)(c+p>=f||s.get(c+p))&&(m|=1<<o-1-p);(m&i)===i?(u.appendBits(m&i,o),c--):m&i?u.appendBits(m,o):(u.appendBits(m|1,o),c--)}return u}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}dt.DEFAULT_EC_PERCENT=33,dt.DEFAULT_AZTEC_LAYERS=0,dt.MAX_NB_BITS=32,dt.MAX_NB_BITS_COMPACT=4,dt.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ca{encode(s,o,u,f){return this.encodeWithHints(s,o,u,f,null)}encodeWithHints(s,o,u,f,i){let c=Ll.ISO_8859_1,m=dt.DEFAULT_EC_PERCENT,p=dt.DEFAULT_AZTEC_LAYERS;return i!=null&&(i.has(an.CHARACTER_SET)&&(c=ba.forName(i.get(an.CHARACTER_SET).toString())),i.has(an.ERROR_CORRECTION)&&(m=_.parseInt(i.get(an.ERROR_CORRECTION).toString())),i.has(an.AZTEC_LAYERS)&&(p=_.parseInt(i.get(an.AZTEC_LAYERS).toString()))),Ca.encodeLayers(s,o,u,f,c,m,p)}static encodeLayers(s,o,u,f,i,c,m){if(o!==_e.AZTEC)throw new E("Can only encode AZTEC, but got "+o);let p=dt.encode(me.getBytes(s,i),c,m);return Ca.renderResult(p,u,f)}static renderResult(s,o,u){let f=s.getMatrix();if(f==null)throw new jt;let i=f.getWidth(),c=f.getHeight(),m=Math.max(o,i),p=Math.max(u,c),v=Math.min(m/i,p/c),b=(m-i*v)/2,C=(p-c*v)/2,S=new ae(m,p);for(let j=0,P=C;j<c;j++,P+=v)for(let B=0,L=b;B<i;B++,L+=v)f.get(B,j)&&S.setRegion(L,P,v,v);return S}}n.AbstractExpandedDecoder=Ur,n.ArgumentException=w,n.ArithmeticException=Fe,n.AztecCode=mo,n.AztecCodeReader=Bn,n.AztecCodeWriter=Ca,n.AztecDecoder=Tt,n.AztecDetector=Ks,n.AztecDetectorResult=As,n.AztecEncoder=dt,n.AztecHighLevelEncoder=Ea,n.AztecPoint=ct,n.BarcodeFormat=_e,n.Binarizer=D,n.BinaryBitmap=N,n.BitArray=M,n.BitMatrix=ae,n.BitSource=ao,n.BrowserAztecCodeReader=Br,n.BrowserBarcodeReader=Qs,n.BrowserCodeReader=We,n.BrowserDatamatrixCodeReader=jl,n.BrowserMultiFormatReader=Ol,n.BrowserPDF417Reader=In,n.BrowserQRCodeReader=ya,n.BrowserQRCodeSvgWriter=$r,n.CharacterSetECI=q,n.ChecksumException=I,n.Code128Reader=Ie,n.Code39Reader=Pt,n.DataMatrixDecodedBitStreamParser=xt,n.DataMatrixReader=Qn,n.DecodeHintType=$,n.DecoderResult=Be,n.DefaultGridSampler=pt,n.DetectorResult=_s,n.EAN13Reader=Ts,n.EncodeHintType=an,n.Exception=x,n.FormatException=F,n.GenericGF=Ve,n.GenericGFPoly=Oe,n.GlobalHistogramBinarizer=te,n.GridSampler=fe,n.GridSamplerInstance=Xe,n.HTMLCanvasElementLuminanceSource=J,n.HybridBinarizer=se,n.ITFReader=Ae,n.IllegalArgumentException=E,n.IllegalStateException=jt,n.InvertedLuminanceSource=ce,n.LuminanceSource=Q,n.MathUtils=st,n.MultiFormatOneDReader=js,n.MultiFormatReader=fo,n.MultiFormatWriter=yu,n.NotFoundException=Y,n.OneDReader=Ot,n.PDF417DecodedBitStreamParser=de,n.PDF417DecoderErrorCorrection=uo,n.PDF417Reader=hn,n.PDF417ResultMetadata=ho,n.PerspectiveTransform=Te,n.PlanarYUVLuminanceSource=Hr,n.QRCodeByteMatrix=va,n.QRCodeDataMask=cr,n.QRCodeDecodedBitStreamParser=ut,n.QRCodeDecoderErrorCorrectionLevel=Nt,n.QRCodeDecoderFormatInformation=bn,n.QRCodeEncoder=Rt,n.QRCodeEncoderQRCode=zr,n.QRCodeMaskUtil=Ht,n.QRCodeMatrixUtil=He,n.QRCodeMode=Ge,n.QRCodeReader=dr,n.QRCodeVersion=ze,n.QRCodeWriter=Ds,n.RGBLuminanceSource=wa,n.RSS14Reader=Ut,n.RSSExpandedReader=we,n.ReaderException=Si,n.ReedSolomonDecoder=ns,n.ReedSolomonEncoder=_i,n.ReedSolomonException=At,n.Result=$e,n.ResultMetadataType=Je,n.ResultPoint=Me,n.StringUtils=me,n.UnsupportedOperationException=ne,n.VideoInputDevice=pe,n.WhiteRectangleDetector=or,n.WriterException=_t,n.ZXingArrays=A,n.ZXingCharset=ba,n.ZXingInteger=_,n.ZXingStandardCharsets=Ll,n.ZXingStringBuilder=re,n.ZXingStringEncoding=he,n.ZXingSystem=O,n.createAbstractExpandedDecoder=Is,Object.defineProperty(n,"__esModule",{value:!0})})})(om,om.exports);var Gt=om.exports;const d8=eh(Gt),h8=fC({__proto__:null,default:d8},[Gt]);var _x=function(){function e(t,n,r){if(this.formatMap=new Map([[Le.QR_CODE,Gt.BarcodeFormat.QR_CODE],[Le.AZTEC,Gt.BarcodeFormat.AZTEC],[Le.CODABAR,Gt.BarcodeFormat.CODABAR],[Le.CODE_39,Gt.BarcodeFormat.CODE_39],[Le.CODE_93,Gt.BarcodeFormat.CODE_93],[Le.CODE_128,Gt.BarcodeFormat.CODE_128],[Le.DATA_MATRIX,Gt.BarcodeFormat.DATA_MATRIX],[Le.MAXICODE,Gt.BarcodeFormat.MAXICODE],[Le.ITF,Gt.BarcodeFormat.ITF],[Le.EAN_13,Gt.BarcodeFormat.EAN_13],[Le.EAN_8,Gt.BarcodeFormat.EAN_8],[Le.PDF_417,Gt.BarcodeFormat.PDF_417],[Le.RSS_14,Gt.BarcodeFormat.RSS_14],[Le.RSS_EXPANDED,Gt.BarcodeFormat.RSS_EXPANDED],[Le.UPC_A,Gt.BarcodeFormat.UPC_A],[Le.UPC_E,Gt.BarcodeFormat.UPC_E],[Le.UPC_EAN_EXTENSION,Gt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!h8)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=r;var a=this.createZXingFormats(t),l=new Map;l.set(Gt.DecodeHintType.POSSIBLE_FORMATS,a),l.set(Gt.DecodeHintType.TRY_HARDER,!1),this.hints=l}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(r,a){try{r(n.decode(t))}catch(l){a(l)}})},e.prototype.decode=function(t){var n=new Gt.MultiFormatReader(this.verbose,this.hints),r=new Gt.HTMLCanvasElementLuminanceSource(t),a=new Gt.BinaryBitmap(new Gt.HybridBinarizer(r)),l=n.decode(a);return{text:l.text,format:_b.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var l=a[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),f8=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},m8=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Ax=function(){function e(t,n,r){if(this.formatMap=new Map([[Le.QR_CODE,"qr_code"],[Le.AZTEC,"aztec"],[Le.CODABAR,"codabar"],[Le.CODE_39,"code_39"],[Le.CODE_93,"code_93"],[Le.CODE_128,"code_128"],[Le.DATA_MATRIX,"data_matrix"],[Le.ITF,"itf"],[Le.EAN_13,"ean_13"],[Le.EAN_8,"ean_8"],[Le.PDF_417,"pdf417"],[Le.UPC_A,"upc_a"],[Le.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=r;var a=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return f8(this,void 0,void 0,function(){var n,r;return m8(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return r=this.selectLargestBarcode(n),[2,{text:r.rawValue,format:_b.create(this.toHtml5QrcodeSupportedFormats(r.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,r=0,a=0,l=t;a<l.length;a++){var h=l[a],g=h.boundingBox.width*h.boundingBox.height;g>r&&(r=g,n=h)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],r=0,a=t;r<a.length;r++){var l=a[r];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,r,a){t.set(n,r)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),Tx=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},Ix=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},g8=function(){function e(t,n,r,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=r,n&&Ax.isSupported()?(this.primaryDecoder=new Ax(t,r,a),this.secondaryDecoder=new _x(t,r,a)):this.primaryDecoder=new _x(t,r,a)}return e.prototype.decodeAsync=function(t){return Tx(this,void 0,void 0,function(){var n;return Ix(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,r.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return Tx(this,void 0,void 0,function(){var n,r;return Ix(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,a.sent()];case 3:if(r=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw r;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,r=this.executionResults;n<r.length;n++){var a=r[n];t+=a}var l=t/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),$g=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),qd=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},Kd=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},jb=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var r={advanced:[n]};return this.track.applyConstraints(r)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),p8=function(e){$g(t,e);function t(n,r){return e.call(this,n,r)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var r={};r[this.name]=n;var a={advanced:[r]};return this.track.applyConstraints(a)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),r=n[this.name];return{min:r.min,max:r.max,step:r.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(jb),x8=function(e){$g(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(p8),y8=function(e){$g(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(jb),v8=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new x8(this.track)},e.prototype.torchFeature=function(){return new y8(this.track)},e}(),w8=function(){function e(t,n,r){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=r,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var r=t.surface.clientWidth,a=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(r,a),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,r,a){return qd(this,void 0,void 0,function(){var l,h;return Kd(this,function(g){switch(g.label){case 0:return l=new e(t,n,a),r.aspectRatio?(h={aspectRatio:r.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:g.sent(),g.label=2;case 2:return l.setupSurface(),[2,l]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,r=function(){setTimeout(t,200),n.surface.removeEventListener("playing",r)};this.surface.addEventListener("playing",r),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return qd(this,void 0,void 0,function(){return Kd(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,r){var a=t.mediaStream.getVideoTracks(),l=a.length,h=0;t.mediaStream.getVideoTracks().forEach(function(g){t.mediaStream.removeTrack(g),g.stop(),++h,h>=l&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new v8(this.getFirstTrackOrFail())},e}(),b8=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,r){return qd(this,void 0,void 0,function(){return Kd(this,function(a){return[2,w8.create(t,this.mediaStream,n,r)]})})},e.create=function(t){return qd(this,void 0,void 0,function(){var n,r;return Kd(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return r=a.sent(),[2,new e(r)]}})})},e}(),jx=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},kx=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},E8=function(){function e(){}return e.failIfNotSupported=function(){return jx(this,void 0,void 0,function(){return kx(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return jx(this,void 0,void 0,function(){return kx(this,function(n){return[2,b8.create(t)]})})},e}(),C8=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},N8=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},S8=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Uo.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Uo.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return C8(this,void 0,void 0,function(){var t,n,r,a,l,h,g;return N8(this,function(y){switch(y.label){case 0:return t=function(x){for(var w=x.getVideoTracks(),E=0,N=w;E<N.length;E++){var I=N[E];I.enabled=!1,I.stop(),x.removeTrack(I)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=y.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(r=y.sent(),a=[],l=0,h=r;l<h.length;l++)g=h[l],g.kind==="videoinput"&&a.push({id:g.deviceId,label:g.label});return t(n),[2,a]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var r=function(l){for(var h=[],g=0,y=l;g<y.length;g++){var x=y[g];x.kind==="video"&&h.push({id:x.id,label:x.label})}t(h)},a=MediaStreamTrack;a.getSources(r)})},e}(),on;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(on||(on={}));var _8=function(){function e(){this.state=on.NOT_STARTED,this.onGoingTransactionNewState=on.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===on.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=on.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===on.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=on.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==on.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case on.UNKNOWN:throw"Transition from unknown is not allowed";case on.NOT_STARTED:this.failIfNewStateIs(t,[on.PAUSED]);break;case on.SCANNING:break;case on.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var r=0,a=n;r<a.length;r++){var l=a[r];if(t===l)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),A8=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===on.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==on.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===on.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===on.PAUSED},e}(),T8=function(){function e(){}return e.create=function(){return new A8(new _8)},e}(),I8=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(r[l]=a[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ar=function(e){I8(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(ms),j8=function(){function e(t,n){this.logger=n,this.fps=Ar.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Ar.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?Ib.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Ls(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),Rx=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var r;typeof n=="boolean"?this.verbose=n===!0:n&&(r=n,this.verbose=r.verbose===!0,r.experimentalFeatures),this.logger=new Tb(this.verbose),this.qrcode=new g8(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(r),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=T8.create()}return e.prototype.start=function(t,n,r,a){var l=this;if(!t)throw"cameraIdOrConfig is required";if(!r||typeof r!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var g=j8.create(n,this.logger);this.clearElement();var y=!1;g.videoConstraints&&(g.isMediaStreamConstraintsValid()?y=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var x=y,w=document.getElementById(this.elementId);w.clientWidth?w.clientWidth:Ar.DEFAULT_WIDTH,w.style.position="relative",this.shouldScan=!0,this.element=w;var E=this,N=this.stateManagerProxy.startTransition(on.SCANNING);return new Promise(function(I,D){var O=x?g.videoConstraints:E.createVideoConstraints(t);if(!O){N.cancel(),D("videoConstraints should be defined");return}var V={};(!x||g.aspectRatio)&&(V.aspectRatio=g.aspectRatio);var T={onRenderSurfaceReady:function(A,_){E.setupUi(A,_,g),E.isScanning=!0,E.foreverScan(g,r,h)}};E8.failIfNotSupported().then(function(A){A.create(O).then(function(_){return _.render(l.element,V,T).then(function(M){E.renderedCamera=M,N.execute(),I(null)}).catch(function(M){N.cancel(),D(M)})}).catch(function(_){N.cancel(),D(Uo.errorGettingUserMedia(_))})}).catch(function(A){N.cancel(),D(Uo.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(on.PAUSED),this.showPausedState(),(Ls(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(on.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(on.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var r=function(){if(t.element){var l=document.getElementById(Ar.SHADED_REGION_ELEMENT_ID);l&&t.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),r(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(r){return r.decodedText})},e.prototype.scanFileV2=function(t,n){var r=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Ls(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){r.possiblyCloseLastScanImageFile(),r.clearElement(),r.lastScanImageFile=URL.createObjectURL(t);var h=new Image;h.onload=function(){var g=h.width,y=h.height,x=document.getElementById(r.elementId),w=x.clientWidth?x.clientWidth:Ar.DEFAULT_WIDTH,E=Math.max(x.clientHeight?x.clientHeight:y,Ar.FILE_SCAN_MIN_HEIGHT),N=r.computeCanvasDrawConfig(g,y,w,E);if(n){var I=r.createCanvasElement(w,E,"qr-canvas-visible");I.style.display="inline-block",x.appendChild(I);var D=I.getContext("2d");if(!D)throw"Unable to get 2d context from canvas";D.canvas.width=w,D.canvas.height=E,D.drawImage(h,0,0,g,y,N.x,N.y,N.width,N.height)}var O=Ar.FILE_SCAN_HIDDEN_CANVAS_PADDING,V=Math.max(h.width,N.width),T=Math.max(h.height,N.height),A=V+2*O,_=T+2*O,M=r.createCanvasElement(A,_);x.appendChild(M);var H=M.getContext("2d");if(!H)throw"Unable to get 2d context from canvas";H.canvas.width=A,H.canvas.height=_,H.drawImage(h,0,0,g,y,O,O,V,T);try{r.qrcode.decodeRobustlyAsync(M).then(function($){a(Nx.createFromQrcodeResult($))}).catch(l)}catch($){l("QR code parse error, error = ".concat($))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return S8.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!Ib.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[Le.QR_CODE,Le.AZTEC,Le.CODABAR,Le.CODE_39,Le.CODE_93,Le.CODE_128,Le.DATA_MATRIX,Le.MAXICODE,Le.ITF,Le.EAN_13,Le.EAN_8,Le.PDF_417,Le.RSS_14,Le.RSS_EXPANDED,Le.UPC_A,Le.UPC_E,Le.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var r=[],a=0,l=t.formatsToSupport;a<l.length;a++){var h=l[a];c8(h)?r.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(r.length===0)throw"None of formatsToSupport match supported values.";return r},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Ls(t))return!0;if(!Ls(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Ls(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Ls(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,r){var a=this,l=r.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(t,n,l),g=function(x){if(x<Ar.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Ar.MIN_QR_BOX_SIZE,"px.")},y=function(x){return x>t&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),x=t),x};g(h.width),g(h.height),h.width=y(h.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,r){if(typeof r=="number")return{width:r,height:r};if(typeof r=="function")try{return r(t,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return r},e.prototype.setupUi=function(t,n,r){r.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,r);var a=Ls(r.qrbox)?{width:t,height:n}:r.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(t,n,a);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=r.isShadedBoxEnabled()&&l.height<=n,g={x:0,y:0,width:t,height:n},y=h?this.getShadedRegionBounds(t,n,l):g,x=this.createCanvasElement(y.width,y.height),w={willReadFrequently:!0},E=x.getContext("2d",w);E.canvas.width=y.width,E.canvas.height=y.height,this.element.append(x),h&&this.possiblyInsertShadingElement(this.element,t,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=y,this.context=E,this.canvasElement=x},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Uo.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var r=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return t(a.text,Nx.createFromQrcodeResult(a)),r.possiblyUpdateShaders(!0),!0}).catch(function(a){r.possiblyUpdateShaders(!1);var l=Uo.codeParseError(a);return n(l,Ab.createFrom(l)),!1})},e.prototype.foreverScan=function(t,n,r){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,g=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var y=this.qrRegion.width*h,x=this.qrRegion.height*g,w=this.qrRegion.x*h,E=this.qrRegion.y*g;this.context.drawImage(l,w,E,y,x,0,0,this.qrRegion.width,this.qrRegion.height);var N=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(t,n,r)},a.getTimeoutFps(t.fps))};this.scanContext(n,r).then(function(I){!I&&t.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,r).finally(function(){N()})):N()}).catch(function(I){a.logger.logError("Error happend while scanning context",I),N()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",r="deviceId",a={user:!0,environment:!0},l="exact",h=function(D){if(D in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(D,"'")},g=Object.keys(t);if(g.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(g.length," keys");var y=Object.keys(t)[0];if(y!==n&&y!==r)throw"Only '".concat(n,"' and '").concat(r,"' ")+" are supported for 'cameraIdOrConfig'";if(y===n){var x=t.facingMode;if(typeof x=="string"){if(h(x))return{facingMode:x}}else if(typeof x=="object")if(l in x){if(h(x["".concat(l)]))return{facingMode:{exact:x["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var w=typeof x;throw"Invalid type of 'facingMode' = ".concat(w)}}else{var E=t.deviceId;if(typeof E=="string")return{deviceId:E};if(typeof E=="object"){if(l in E)return{deviceId:{exact:E["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var N=typeof E;throw"Invalid type of 'deviceId' = ".concat(N)}}}var I=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(I)},e.prototype.computeCanvasDrawConfig=function(t,n,r,a){if(t<=r&&n<=a){var l=(r-t)/2,h=(a-n)/2;return{x:l,y:h,width:t,height:n}}else{var g=t,y=n;return t>r&&(n=r/t*n,t=r),n>a&&(t=a/n*t,n=a),this.logger.log("Image downsampled from "+"".concat(g,"X").concat(y)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,r,a)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Ar.BORDER_SHADER_MATCH_COLOR:Ar.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,r){var a=t,l=n,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=Ls(r)?"qr-canvas":r,h},e.prototype.getShadedRegionBounds=function(t,n,r){if(r.width>t||r.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-r.width)/2,y:(n-r.height)/2,width:r.width,height:r.height}},e.prototype.possiblyInsertShadingElement=function(t,n,r,a){if(!(n-a.width<1||r-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(n-a.width)/2,g=(r-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(g,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Ar.SHADED_REGION_ELEMENT_ID),n-a.width<11||r-a.height<11)this.hasBorderShaders=!1;else{var y=5,x=40;this.insertShaderBorders(l,x,y,-y,null,0,!0),this.insertShaderBorders(l,x,y,-y,null,0,!1),this.insertShaderBorders(l,x,y,null,-y,0,!0),this.insertShaderBorders(l,x,y,null,-y,0,!1),this.insertShaderBorders(l,y,x+y,-y,null,-y,!0),this.insertShaderBorders(l,y,x+y,null,-y,-y,!0),this.insertShaderBorders(l,y,x+y,-y,null,-y,!1),this.insertShaderBorders(l,y,x+y,null,-y,-y,!1),this.hasBorderShaders=!0}t.append(l)}},e.prototype.insertShaderBorders=function(t,n,r,a,l,h,g){var y=document.createElement("div");y.style.position="absolute",y.style.backgroundColor=Ar.BORDER_SHADER_DEFAULT_COLOR,y.style.width="".concat(n,"px"),y.style.height="".concat(r,"px"),a!==null&&(y.style.top="".concat(a,"px")),l!==null&&(y.style.bottom="".concat(l,"px")),g?y.style.left="".concat(h,"px"):y.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(y),t.appendChild(y)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Hg="data:image/svg+xml;base64,",k8=Hg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",R8=Hg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",Mx=Hg+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",M8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",Dx=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),D8=function(){function e(){this.data=Dx.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=Dx.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),O8=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=Sx.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var r=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(r),this.infoDiv.appendChild(a);var l=document.createElement("a");l.innerText=Sx.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),P8=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=Mx,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(r){return n.onHoverIn()},this.infoIcon.onmouseout=function(r){return n.onHoverOut()},this.infoIcon.onclick=function(r){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=M8,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=Mx,this.infoIcon.style.opacity="0.6")},e}(),L8=function(){function e(){var t=this;this.infoDiv=new O8,this.infoIcon=new P8(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),B8=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},F8=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Ox=function(){function e(){}return e.hasPermissions=function(){return B8(this,void 0,void 0,function(){var t,n,r,a;return F8(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=l.sent(),n=0,r=t;n<r.length;n++)if(a=r[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},e}(),ki=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var r=n[t];if(e.isCameraScanType(r))return!0}return!1},e.isCameraScanType=function(t){return t===na.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===na.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return ms.DEFAULT_SUPPORTED_SCAN_TYPE;var n=ms.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var r=0,a=t;r<a.length;r++){var l=a[r];if(!ms.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return t},e}(),jr=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),ci=function(){function e(){}return e.createElement=function(t,n){var r=document.createElement(t);return r.id=n,r.classList.add(jr.ALL_ELEMENT_CLASS),t==="button"&&r.setAttribute("type","button"),r},e}(),kb=function(e,t,n,r){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function g(w){try{x(r.next(w))}catch(E){h(E)}}function y(w){try{x(r.throw(w))}catch(E){h(E)}}function x(w){w.done?l(w.value):a(w.value).then(g,y)}x((r=r.apply(e,t||[])).next())})},Rb=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},r,a,l,h;return h={next:g(0),throw:g(1),return:g(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function g(x){return function(w){return y([x,w])}}function y(x){if(r)throw new TypeError("Generator is already executing.");for(;h&&(h=0,x[0]&&(n=0)),n;)try{if(r=1,a&&(l=x[0]&2?a.return:x[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,x[1])).done)return l;switch(a=0,l&&(x=[x[0]&2,l.value]),x[0]){case 0:case 1:l=x;break;case 4:return n.label++,{value:x[1],done:!1};case 5:n.label++,a=x[1],x=[0];continue;case 7:x=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(x[0]===6||x[0]===2)){n=0;continue}if(x[0]===3&&(!l||x[1]>l[0]&&x[1]<l[3])){n.label=x[1];break}if(x[0]===6&&n.label<l[1]){n.label=l[1],l=x;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(x);break}l[2]&&n.ops.pop(),n.trys.pop();continue}x=t.call(e,n)}catch(w){x=[6,w],a=0}finally{r=l=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}},Px=function(){function e(t,n,r){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=r}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return kb(this,void 0,void 0,function(){var t,n;return Rb(this,function(r){switch(r.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return r.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=r.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Mt.torchOffButton():Mt.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var r=t?Mt.torchOnFailedMessage():Mt.torchOffFailedMessage();n&&(r+="; Error = "+n),this.onTorchActionFailureCallback(r)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),U8=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=ci.createElement("button",jr.TORCH_BUTTON_ID),this.torchController=new Px(t,this,n)}return e.prototype.render=function(t,n){var r=this;this.torchButton.innerText=Mt.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(l){return kb(r,void 0,void 0,function(){return Rb(this,function(h){switch(h.label){case 0:return[4,a.torchController.flipState()];case 1:return h.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(jr.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(jr.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(jr.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(jr.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new Px(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Mt.torchOnButton(),this.torchController.reset()},e.create=function(t,n,r,a){var l=new e(n,a);return l.render(t,r),l},e}(),V8=function(){function e(t,n,r){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=ci.createElement("button",jr.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(g){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=ci.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(g){if(!(g==null||g.target==null)){var y=g.target;if(!(y.files&&y.files.length===0)){var x=y.files,w=x[0],E=w.name;l.setImageNameToButton(E),r(w)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(g){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),g.stopPropagation(),g.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(g){g.stopPropagation(),g.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var y=g.dataTransfer;if(y){var x=y.files;if(!x||x.length===0)return;for(var w=!1,E=0;E<x.length;++E){var N=x.item(E);if(N){var I=/image.*/;if(N.type.match(I)){w=!0;var D=N.name;l.setImageNameToButton(D),r(N),h.innerText=Mt.dragAndDropMessage();break}}}w||(h.innerText=Mt.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Mt.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var r=t.substring(0,8),a=t.length,l=t.substring(a-8,a);t="".concat(r,"....").concat(l)}var h=Mt.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=h},e.prototype.setInitialValueToButton=function(){var t=Mt.fileSelectionChooseImage()+" - "+Mt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,r){var a=new e(t,n,r);return a},e}(),z8=function(){function e(t){this.selectElement=ci.createElement("select",jr.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var r=this.cameras.length;if(r===0)throw new Error("No cameras found");if(r===1)n.style.display="none";else{var a=Mt.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var l=1,h=0,g=this.cameras;h<g.length;h++){var y=g[h],x=y.id,w=y.label==null?x:y.label;(!w||w==="")&&(w=[Mt.anonymousCameraPrefix(),l++].join(" "));var E=document.createElement("option");E.value=x,E.innerText=w,this.options.push(E),this.selectElement.appendChild(E)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,r=this.options;n<r.length;n++){var a=r[n];if(a.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var r=new e(n);return r.render(t),r},e}(),$8=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ci.createElement("input",jr.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var r=Mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Mt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,r,a){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=r.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var r=new e;return r.render(t,n),r},e}(),Tr;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Tr||(Tr={}));function H8(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function W8(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var G8=function(){function e(t,n,r){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=r===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new ki(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Tb(this.verbose),this.persistedDataManager=new D8,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var r=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,h){if(t)t(l,h);else{if(r.lastMatchFound===l)return;r.lastMatchFound=l,r.setHeaderMessage(Mt.lastMatch(l),Tr.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,h){n&&n(l,h)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new Rx(this.getScanRegionId(),W8(this.config,this.verbose))},e.prototype.pause=function(t){(Ls(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var r=document.getElementById(t.elementId);r&&(r.innerHTML="",t.resetBasicLayout(r))};return this.html5Qrcode?new Promise(function(r,a){if(!t.html5Qrcode){r();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(l){if(!t.html5Qrcode){r();return}t.html5Qrcode.clear(),n(),r()}).catch(function(l){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",l),a(l)}):(t.html5Qrcode.clear(),n(),r())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=ms.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!ms.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=ms.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=ms.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:ms.SCAN_DEFAULT_FPS,rememberLastUsedCamera:ms.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:ms.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),r=this.getScanRegionId();n.id=r,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),ki.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),l=this.getDashboardId();a.id=l,a.style.width="100%",t.appendChild(a),this.setupInitialDashboard(a)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var r=new L8;r.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,r){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(Mt.cameraPermissionRequesting());var l=function(){r||a.createPermissionButton(t,n)};Rx.getCameras().then(function(h){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),h&&h.length>0?(t.removeChild(n),a.renderCameraSelection(h)):(a.setHeaderMessage(Mt.noCameraFound(),Tr.STATUS_WARNING),l())}).catch(function(h){a.persistedDataManager.setHasPermission(!1),r?r.disabled=!1:l(),a.setHeaderMessage(h,Tr.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var r=this,a=ci.createElement("button",this.getCameraPermissionButtonId());a.innerText=Mt.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,r.createCameraListUi(t,n,a)}),n.appendChild(a)},e.prototype.createPermissionsUi=function(t,n){var r=this;if(ki.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){Ox.hasPermissions().then(function(a){a?r.createCameraListUi(t,n):(r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n))}).catch(function(a){r.persistedDataManager.setHasPermission(!1),r.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var r=document.createElement("div");r.id=this.getDashboardSectionCameraScanRegionId(),r.style.display=ki.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(r);var a=document.createElement("div");a.style.textAlign="center",r.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(r,a),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=ki.isFileScanType(this.currentScanType),r=this,a=function(l){if(!r.html5Qrcode)throw"html5Qrcode not defined";ki.isFileScanType(r.currentScanType)&&(r.setHeaderMessage(Mt.loadingImage()),r.html5Qrcode.scanFileV2(l,!0).then(function(h){r.resetHeaderMessage(),r.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){r.setHeaderMessage(h,Tr.STATUS_WARNING),r.qrCodeErrorCallback(h,Ab.createFrom(h))}))};this.fileSelectionUi=V8.create(t,n,a)},e.prototype.renderCameraSelection=function(t){var n=this,r=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var l=$8.create(a,!1),h=function(O){var V=O.zoomFeature();if(V.isSupported()){l.setOnCameraZoomValueChangeCallback(function(A){V.apply(A)});var T=1;n.config.defaultZoomValueIfSupported&&(T=n.config.defaultZoomValueIfSupported),T=u8(T,V.min(),V.max()),l.setValues(V.min(),V.max(),T,V.step()),l.show()}},g=z8.create(a,t),y=document.createElement("span"),x=ci.createElement("button",jr.CAMERA_START_BUTTON_ID);x.innerText=Mt.scanButtonStartScanningText(),y.appendChild(x);var w=ci.createElement("button",jr.CAMERA_STOP_BUTTON_ID);w.innerText=Mt.scanButtonStopScanningText(),w.style.display="none",w.disabled=!0,y.appendChild(w);var E,N=function(O){if(!O.torchFeature().isSupported()){E&&E.hide();return}E?E.updateTorchCapability(O.torchFeature()):E=U8.create(y,O.torchFeature(),{display:"none",marginLeft:"5px"},function(V){r.setHeaderMessage(V,Tr.STATUS_WARNING)}),E.show()};a.appendChild(y);var I=function(O){O||(x.style.display="none"),x.innerText=Mt.scanButtonStartScanningText(),x.style.opacity="1",x.disabled=!1,O&&(x.style.display="inline-block")};if(x.addEventListener("click",function(O){x.innerText=Mt.scanButtonScanningStarting(),g.disable(),x.disabled=!0,x.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!1),r.resetHeaderMessage();var V=g.getValue();r.persistedDataManager.setLastUsedCameraId(V),r.html5Qrcode.start(V,H8(r.config),r.qrCodeSuccessCallback,r.qrCodeErrorCallback).then(function(T){w.disabled=!1,w.style.display="inline-block",I(!1);var A=r.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&N(A),n.config.showZoomSliderIfSupported===!0&&h(A)}).catch(function(T){r.showHideScanTypeSwapLink(!0),g.enable(),I(!0),r.setHeaderMessage(T,Tr.STATUS_WARNING)})}),g.hasSingleItem()&&x.click(),w.addEventListener("click",function(O){if(!r.html5Qrcode)throw"html5Qrcode not defined";w.disabled=!0,r.html5Qrcode.stop().then(function(V){n.scanTypeSelector.hasMoreThanOneScanType()&&r.showHideScanTypeSwapLink(!0),g.enable(),x.disabled=!1,w.style.display="none",x.style.display="inline-block",E&&(E.reset(),E.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),r.insertCameraScanImageToScanRegion()}).catch(function(V){w.disabled=!1,r.setHeaderMessage(V,Tr.STATUS_WARNING)})}),r.persistedDataManager.getLastUsedCameraId()){var D=r.persistedDataManager.getLastUsedCameraId();g.hasValue(D)?(g.setValue(D),x.click()):r.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Mt.textIfCameraScanSelected(),r=Mt.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var h=ci.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=ki.isCameraScanType(this.currentScanType)?n:r,h.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,ki.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),h.innerText=r,t.currentScanType=na.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),h.innerText=n,t.currentScanType=na.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),l.appendChild(h),a.appendChild(l)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){Ox.hasPermissions().then(function(r){if(r){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(r){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Tr.STATUS_DEFAULT);var r=this.getHeaderMessageDiv();switch(r.innerText=t,r.style.display="block",n){case Tr.STATUS_SUCCESS:r.style.background="rgba(106, 175, 80, 0.26)",r.style.color="#477735";break;case Tr.STATUS_WARNING:r.style.background="rgba(203, 36, 49, 0.14)",r.style.color="#cb2431";break;case Tr.STATUS_DEFAULT:default:r.style.background="rgba(0, 0, 0, 0)",r.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=k8,this.cameraScanImage.alt=Mt.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(r){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=R8,this.fileScanImage.alt=Mt.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return jr.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return jr.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();class q8 extends Rm.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught error:",t,n)}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:d.jsxs("div",{className:"bg-white border border-red-300 rounded-lg p-8 max-w-lg w-full text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-red-700 mb-4",children:"Something went wrong"}),d.jsx("pre",{className:"text-sm text-red-600 mb-4 whitespace-pre-wrap",children:String(this.state.error)}),d.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Reload Page"})]})}):this.props.children}}function K8({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState(!1),[g,y]=R.useState(""),[x,w]=R.useState([]),[E,N]=R.useState({total:0,checkedIn:0}),I=R.useRef(null),[D,O]=R.useState(""),[V,T]=R.useState(null),[A,_]=R.useState(null),[M,H]=R.useState([]),[$,F]=R.useState(!1),[U,q]=R.useState(null),[ne,he]=R.useState(!1),[me,re]=R.useState({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_assignment:""}),[ae,Y]=R.useState(!1),[te,se]=R.useState(null),[Q,ce]=R.useState(null),[J,pe]=R.useState(!1),ye=R.useRef(null),We=R.useRef(null);R.useEffect(()=>{$e()},[]),R.useEffect(()=>{r&&(_e(),It(),Ct())},[r]),R.useEffect(()=>{r&&Je()},[r]),R.useEffect(()=>()=>{I.current&&I.current.clear(),ye.current&&ye.current.srcObject&&(ye.current.srcObject.getTracks().forEach(Te=>Te.stop()),ye.current.srcObject=null)},[]),R.useEffect(()=>{T(null),_(null)},[r]),R.useEffect(()=>()=>{ye.current&&ye.current.srcObject&&(ye.current.srcObject.getTracks().forEach(Te=>Te.stop()),ye.current.srcObject=null)},[]);const $e=async()=>{try{let fe=xe.from("events").select(`
          id,
          name,
          company_id,
          registration_qr,
          custom_logo,
          custom_background,
          company:companies(name)
        `);e&&(fe=fe.eq("company_id",e.company_id));const{data:Te,error:pt}=await fe.order("created_at",{ascending:!1});if(pt)throw pt;const Xe=(Te==null?void 0:Te.map(ct=>({...ct,company:Array.isArray(ct.company)?ct.company[0]:ct.company})))||[];n(Xe),e&&Xe&&Xe.length>0&&a(Xe[0].id)}catch(fe){ue.error("Error fetching events: "+fe.message)}},Ct=async()=>{try{if(!r)return;const fe=`${window.location.origin}/admin/checkin?event=${r}`,Te=await Gs.toDataURL(fe,{width:200,margin:2,errorCorrectionLevel:"M"});O(Te)}catch(fe){console.error("Error generating QR code:",fe),O("")}},_e=async()=>{try{const{data:fe,error:Te}=await xe.from("attendees").select("id, checked_in").eq("event_id",r);if(Te)throw Te;N({total:fe.length,checkedIn:fe.filter(pt=>pt.checked_in).length})}catch(fe){console.error("Error fetching stats:",fe)}},It=async()=>{try{const{data:fe,error:Te}=await xe.from("attendees").select(`
          id,
          name,
          identification_number,
          staff_id,
          table_assignment,
          check_in_time,
          event:events(name)
        `).eq("event_id",r).eq("checked_in",!0).order("check_in_time",{ascending:!1}).limit(10);if(Te)throw Te;const pt=(fe||[]).map(Xe=>({...Xe,table_assignment:Xe.table_assignment||null}));w(pt)}catch(fe){console.error("Error fetching recent check-ins:",fe)}},Je=async()=>{F(!0);try{const{data:fe,error:Te}=await xe.from("attendees").select("*").eq("event_id",r).order("created_at",{ascending:!1});if(Te)throw Te;H(fe)}catch(fe){ue.error("Error fetching attendees: "+fe.message)}finally{F(!1)}},Be=()=>{q(null),re({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_assignment:""}),he(!0)},be=fe=>{q(fe),re({name:fe.name||"",email:fe.email||"",phone:fe.phone||"",identification_number:fe.identification_number||"",staff_id:fe.staff_id||"",table_assignment:fe.table_assignment||""}),he(!0)},Oe=fe=>{if(fe.preventDefault(),!(!me.name.trim()||!me.identification_number.trim()))if(U)xe.from("attendees").update(me).eq("id",U.id).then(({error:Te})=>{Te?ue.error("Error updating attendee: "+Te.message):ue.success("Attendee updated!"),he(!1),Je()});else{const Te=crypto.randomUUID();xe.from("attendees").insert([{...me,id:Te,event_id:r}]).then(({error:pt})=>{pt?ue.error("Error adding attendee: "+pt.message):ue.success("Attendee added!"),he(!1),Je()})}},Fe=fe=>{confirm("Delete this attendee?")&&xe.from("attendees").delete().eq("id",fe).then(({error:Te})=>{Te?ue.error("Error deleting attendee: "+Te.message):ue.success("Attendee deleted!"),Je()})},Ve=fe=>{xe.from("attendees").update({checked_in:!1,check_in_time:null}).eq("id",fe).then(({error:Te})=>{Te?ue.error("Error resetting check-in: "+Te.message):ue.success("Check-in reset!"),Je()})},At=()=>{confirm("Reset check-in for all attendees?")&&xe.from("attendees").update({checked_in:!1,check_in_time:null}).eq("event_id",r).then(({error:fe})=>{fe?ue.error("Error resetting all: "+fe.message):ue.success("All check-ins reset!"),Je()})},jt=()=>{if(!r){ue.error("Please select an event first");return}navigator.mediaDevices.getUserMedia({video:!0}).then(()=>{ns()}).catch(fe=>{console.error("Camera permission denied:",fe),ue.error("Camera access is required to scan QR codes. Please allow camera access and try again.")})},ns=()=>{h(!0);const fe=new G8("qr-reader",{fps:10,qrbox:{width:300,height:300},aspectRatio:1,showTorchButtonIfSupported:!0,showZoomSliderIfSupported:!0},!1);fe.render(Te=>{Tt(Te),fe.clear(),h(!1)},Te=>{Te&&!Te.includes("No QR code found")&&console.log("QR scan error:",Te)}),I.current=fe},$t=()=>{I.current&&(I.current.clear(),I.current=null),h(!1)},Tt=async fe=>{try{const Te=await st(fe);Te.success?(ue.success(Te.message),_e(),It()):ue.error(Te.message)}catch(Te){ue.error("Error processing check-in: "+Te.message)}},st=async fe=>{try{if(fe.includes("|")){const Te=fe.split("|");if(Te.length!==3)return{success:!1,message:"Invalid QR code format"};const pt=Te[0],{data:Xe,error:ct}=await xe.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            table_assignment,
            face_photo_url,
            event:events(name)
          `).eq("id",pt).single();if(ct||!Xe)return{success:!1,message:"Attendee not found"};if(Xe.event_id!==r)return{success:!1,message:"This ticket is not valid for the selected event"};if(Xe.checked_in)return{success:!1,message:`${Xe.name} is already checked in`};const{error:Ks}=await xe.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",Xe.id);if(Ks)throw Ks;const{data:Bn}=await xe.from("attendees").select("id, name, identification_number, staff_id, table_assignment, event:events(name)").eq("id",Xe.id).single();let Br="",Ot=Xe;return Bn?(Br=Bn.table_assignment?` | Table: ${Bn.table_assignment}`:"",Ot={...Xe,...Bn},Bn.table_assignment?ue.success(`${Xe.name} checked in! Assigned to table ${Bn.table_assignment}`):ue.success(`${Xe.name} checked in! No table assigned`)):ue.success(`${Xe.name} checked in! No table assigned`),{success:!0,attendee:Ot,message:`${Xe.name} checked in successfully!${Br}`}}else{const{data:Te,error:pt}=await xe.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            event:events(name)
          `).eq("event_id",r).or(`identification_number.eq.${fe},staff_id.eq.${fe}`);if(pt)throw pt;if(!Te||Te.length===0)return{success:!1,message:"No attendee found with this ID"};const Xe=Te[0];if(Xe.checked_in)return{success:!1,message:`${Xe.name} is already checked in`};const{error:ct}=await xe.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",Xe.id);if(ct)throw ct;return{success:!0,attendee:Xe,message:`${Xe.name} checked in successfully!`}}}catch(Te){return{success:!1,message:"Error processing check-in: "+Te.message}}},rs=async fe=>{var pt,Xe;if(fe.preventDefault(),!r){ue.error("Please select an event first");return}if(!g.trim())return;T(null),_(null);const Te=await st(g);Te.success?(ue.success(Te.message),y(""),_e(),It(),T(((pt=Te.attendee)==null?void 0:pt.name)||null),_(((Xe=Te.attendee)==null?void 0:Xe.table_assignment)||null)):ue.error(Te.message)},Me=async()=>{try{const fe=await navigator.mediaDevices.getUserMedia({video:!0});ye.current&&(ye.current.srcObject=fe,pe(!0))}catch(fe){console.error("Error accessing camera:",fe),ue.error("Unable to access camera"),pe(!1)}},_s=()=>{ye.current&&ye.current.srcObject&&(ye.current.srcObject.getTracks().forEach(Te=>Te.stop()),ye.current.srcObject=null),pe(!1)},As=()=>{try{if(ye.current&&We.current){const fe=ye.current,Te=We.current,pt=Te.getContext("2d");if(pt&&fe.videoWidth>0&&fe.videoHeight>0){Te.width=fe.videoWidth,Te.height=fe.videoHeight,pt.drawImage(fe,0,0);const Xe=Te.toDataURL("image/jpeg");ce(Xe),_s()}else ue.error("Camera not ready. Please wait a moment and try again.")}}catch(fe){console.error("Error capturing face:",fe),ue.error("Error capturing photo")}},or=async()=>{if(te)try{const fe=await st(te.identification_number);fe.success?(ue.success(fe.message),Y(!1),se(null),ce(null),_e(),It()):ue.error(fe.message)}catch{ue.error("Error during face verification check-in")}};return d.jsx(q8,{children:d.jsxs("div",{children:[d.jsx("div",{className:"flex justify-between items-center mb-8",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Check-In System"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Scan QR codes to check in attendees"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:fe=>a(fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&d.jsx("option",{value:"",children:"Choose an event to start check-in"}),t.map(fe=>d.jsx("option",{value:fe.id,children:e?fe.name:`${fe.name} (${fe.company.name})`},fe.id))]})]}),r&&d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[d.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Check-in Progress"}),d.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[E.checkedIn," / ",E.total]}),d.jsxs("div",{className:"text-sm text-blue-600",children:[E.total>0?Math.round(E.checkedIn/E.total*100):0,"% complete"]})]})})]})}),r&&(()=>{var pt,Xe;const fe=t.find(ct=>ct.id===r),Te=fe!=null&&fe.custom_background?{backgroundImage:`url(${fe.custom_background})`,backgroundSize:"cover",backgroundPosition:"center"}:{};return d.jsx("div",{style:Te,className:"min-h-[200px] rounded-lg mb-6 p-6 relative",children:d.jsxs("div",{className:"bg-white/80 rounded-lg shadow-md p-6 max-w-xl mx-auto",children:[(fe==null?void 0:fe.custom_logo)&&d.jsx("div",{className:"flex justify-center mb-2",children:d.jsx("img",{src:Cs(fe.custom_logo),alt:"Event Logo",className:"h-20 object-contain"})}),d.jsx("h2",{className:"text-2xl font-bold mb-1 text-center",children:fe==null?void 0:fe.name}),d.jsx("div",{className:"text-gray-600 text-sm mb-1 text-center",children:(pt=fe==null?void 0:fe.company)==null?void 0:pt.name}),V&&d.jsxs("div",{className:"text-center text-green-600 font-bold text-xl mb-4",children:["Welcome, ",V,"!",d.jsx("br",{}),A&&d.jsxs("span",{className:"block text-lg text-blue-700 mt-2",children:["Your Table: ",A]}),d.jsx("div",{className:"mt-4",children:d.jsxs("a",{href:`/public/venue/${r}/${V?(Xe=M.find(ct=>ct.name===V))==null?void 0:Xe.id:""}`,target:"_blank",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[d.jsx(pr,{className:"h-4 w-4 mr-2"}),"View Venue Layout"]})})]}),d.jsxs("form",{onSubmit:rs,className:"space-y-3 mt-4",children:[d.jsx("input",{type:"text",value:g,onChange:ct=>y(ct.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ID number or Staff ID",autoFocus:!0,disabled:!r}),d.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",disabled:!r,children:[d.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Check In"]})]})]})})})(),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(La,{className:"h-6 w-6 mr-2"}),"Camera Scanner"]}),d.jsxs("div",{className:"space-y-4",children:[l?d.jsxs("div",{children:[d.jsxs("div",{className:"relative",children:[d.jsx("div",{id:"qr-reader",className:"w-full"}),d.jsx("div",{className:"absolute inset-0 pointer-events-none",children:d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsxs("div",{className:"w-64 h-64 border-4 border-white rounded-lg shadow-lg",children:[d.jsx("div",{className:"absolute -top-2 -left-2 w-6 h-6 border-t-4 border-l-4 border-blue-500"}),d.jsx("div",{className:"absolute -top-2 -right-2 w-6 h-6 border-t-4 border-r-4 border-blue-500"}),d.jsx("div",{className:"absolute -bottom-2 -left-2 w-6 h-6 border-b-4 border-l-4 border-blue-500"}),d.jsx("div",{className:"absolute -bottom-2 -right-2 w-6 h-6 border-b-4 border-r-4 border-blue-500"})]})})})]}),d.jsx("button",{onClick:$t,className:"w-full mt-4 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors",children:"Stop Scanner"})]}):d.jsxs("div",{children:[d.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:d.jsx("p",{className:"text-sm text-blue-700",children:"📱 Make sure to allow camera access when prompted"})}),d.jsxs("button",{onClick:jt,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[d.jsx(La,{className:"h-5 w-5 mr-2"}),"Start Camera Scanner"]}),d.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Click to activate camera and scan QR codes"})]}),d.jsxs("div",{className:"border-t pt-4",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Manual ID Entry"}),d.jsxs("form",{onSubmit:rs,className:"space-y-3",children:[d.jsx("input",{type:"text",value:g,onChange:fe=>y(fe.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ID number or Staff ID"}),d.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[d.jsx(Vc,{className:"h-4 w-4 mr-2"}),"Check In"]})]})]})]})]}),D&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(vs,{className:"h-6 w-6 mr-2"}),"Event QR Code"]}),d.jsxs("div",{className:"text-center",children:[d.jsx("img",{src:D,alt:"Event QR Code",className:"w-48 h-48 mx-auto border border-gray-200 rounded-lg mb-3"}),d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Event Check-in QR Code"}),d.jsx("p",{className:"text-xs text-gray-500",children:"Share this QR code for quick access to check-in"})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 lg:col-span-2",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(Yt,{className:"h-6 w-6 mr-2"}),"Recent Check-ins"]}),d.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[x.map(fe=>d.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[d.jsx(Zi,{className:"h-5 w-5 text-green-600 mr-3"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-gray-900",children:fe.name}),d.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",fe.identification_number]}),fe.staff_id&&d.jsxs("div",{className:"text-sm text-gray-600",children:["Staff: ",fe.staff_id]}),fe.table_assignment&&d.jsxs("div",{className:"text-sm text-blue-700 font-semibold",children:["Table: ",fe.table_assignment]}),d.jsx("div",{className:"text-xs text-gray-500",children:new Date(fe.check_in_time).toLocaleTimeString()})]})]},fe.id)),x.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Yt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"No check-ins yet"})]})]})]}),r&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-lg font-bold",children:"Attendee Management"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:Be,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Add Attendee"}),d.jsx("button",{onClick:At,className:"bg-orange-500 text-white px-3 py-1 rounded hover:bg-orange-600",children:"Reset All Check-In"})]})]}),d.jsx("div",{className:"overflow-x-auto",children:d.jsxs("table",{className:"min-w-full text-sm",children:[d.jsx("thead",{children:d.jsxs("tr",{className:"bg-gray-100",children:[d.jsx("th",{className:"p-2",children:"Name"}),d.jsx("th",{className:"p-2",children:"ID"}),d.jsx("th",{className:"p-2",children:"Staff ID"}),d.jsx("th",{className:"p-2",children:"Table"}),d.jsx("th",{className:"p-2",children:"Checked In"}),d.jsx("th",{className:"p-2",children:"Actions"})]})}),d.jsx("tbody",{children:$?d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"text-center p-4",children:"Loading..."})}):M.length===0?d.jsx("tr",{children:d.jsx("td",{colSpan:6,className:"text-center p-4",children:"No attendees"})}):M.map(fe=>d.jsxs("tr",{className:"border-b",children:[d.jsx("td",{className:"p-2",children:fe.name}),d.jsx("td",{className:"p-2",children:fe.identification_number}),d.jsx("td",{className:"p-2",children:fe.staff_id}),d.jsx("td",{className:"p-2",children:fe.table_assignment}),d.jsx("td",{className:"p-2",children:fe.checked_in?d.jsx("span",{className:"text-green-600 font-bold",children:"Yes"}):"No"}),d.jsxs("td",{className:"p-2 flex gap-2",children:[d.jsx("button",{onClick:()=>be(fe),className:"text-blue-600 hover:underline",children:"Edit"}),d.jsx("button",{onClick:()=>Fe(fe.id),className:"text-red-600 hover:underline",children:"Delete"}),d.jsx("button",{onClick:()=>Ve(fe.id),className:"text-orange-600 hover:underline",children:"Reset Check-In"})]})]},fe.id))})]})}),ne&&d.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:U?"Edit Attendee":"Add Attendee"}),d.jsxs("form",{onSubmit:Oe,className:"space-y-3",children:[d.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Name",value:me.name,onChange:fe=>re({...me,name:fe.target.value}),required:!0}),d.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Identification Number",value:me.identification_number,onChange:fe=>re({...me,identification_number:fe.target.value}),required:!0}),d.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Staff ID",value:me.staff_id,onChange:fe=>re({...me,staff_id:fe.target.value})}),d.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Table Assignment",value:me.table_assignment,onChange:fe=>re({...me,table_assignment:fe.target.value})}),d.jsx("input",{type:"email",className:"w-full border px-3 py-2 rounded",placeholder:"Email",value:me.email,onChange:fe=>re({...me,email:fe.target.value})}),d.jsx("input",{type:"tel",className:"w-full border px-3 py-2 rounded",placeholder:"Phone",value:me.phone,onChange:fe=>re({...me,phone:fe.target.value})}),d.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[d.jsx("button",{type:"button",onClick:()=>he(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:U?"Update":"Add"})]})]})]})})]}),ae&&(()=>{try{return console.log("FaceDetectionModal:",{showFaceDetection:ae,currentAttendee:te,facePhoto:Q,showCamera:J}),te?d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Face Detection Required"}),d.jsxs("p",{className:"text-gray-600 mb-4",children:["Please look at the camera to verify your identity for ",te.name]}),te.face_photo_url&&d.jsxs("div",{className:"mb-4",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Registered Photo:"}),d.jsx("img",{src:Cs(te.face_photo_url),alt:"Registered photo",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-300"})]}),!J&&!Q&&d.jsxs("button",{onClick:Me,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[d.jsx(La,{className:"h-5 w-5 mr-2"}),"Start Camera"]}),J&&d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[d.jsx("video",{ref:ye,autoPlay:!0,playsInline:!0,className:"w-full h-64 object-cover"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:"w-48 h-48 border-4 border-white rounded-full opacity-80"})}),d.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:d.jsxs("button",{type:"button",onClick:As,className:"bg-white text-black px-6 py-2 rounded-full hover:bg-gray-100 flex items-center",children:[d.jsx(La,{className:"h-4 w-4 mr-2"}),"Capture"]})}),d.jsx("button",{type:"button",onClick:()=>{_s(),Y(!1),se(null)},className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:d.jsx($d,{className:"h-4 w-4"})})]}),d.jsx("canvas",{ref:We,className:"hidden"})]}),Q&&d.jsxs("div",{className:"text-center",children:[d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Captured Photo:"}),d.jsx("img",{src:Q,alt:"Captured photo",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-300 mx-auto mb-4"}),d.jsxs("div",{className:"flex gap-2",children:[d.jsx("button",{onClick:()=>{ce(null),Me()},className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Retake"}),d.jsx("button",{onClick:or,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Confirm Check-in"})]})]})]})}):d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md text-center",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Face Detection Error"}),d.jsx("p",{className:"text-red-600",children:"No attendee data found. Please try again."}),d.jsx("button",{onClick:()=>{Y(!1),se(null),ce(null)},className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Close"})]})})}catch(fe){return console.error("FaceDetectionModal error:",fe),d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md text-center",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Face Detection Error"}),d.jsx("p",{className:"text-red-600",children:"An error occurred. Please try again."}),d.jsx("button",{onClick:()=>{Y(!1),se(null),ce(null)},className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Close"})]})})}})()]})})}const Wg=R.createContext({});function Gg(e){const t=R.useRef(null);return t.current===null&&(t.current=e()),t.current}const qg=typeof window<"u",Mb=qg?R.useLayoutEffect:R.useEffect,Dh=R.createContext(null);function Kg(e,t){e.indexOf(t)===-1&&e.push(t)}function Yg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const yi=(e,t,n)=>n>t?t:n<e?e:n;let Xg=()=>{};const vi={},Db=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function Ob(e){return typeof e=="object"&&e!==null}const Pb=e=>/^0[^.\s]+$/u.test(e);function Qg(e){let t;return()=>(t===void 0&&(t=e()),t)}const Jr=e=>e,Y8=(e,t)=>n=>t(e(n)),cu=(...e)=>e.reduce(Y8),$c=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Zg{constructor(){this.subscriptions=[]}add(t){return Kg(this.subscriptions,t),()=>Yg(this.subscriptions,t)}notify(t,n,r){const a=this.subscriptions.length;if(a)if(a===1)this.subscriptions[0](t,n,r);else for(let l=0;l<a;l++){const h=this.subscriptions[l];h&&h(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const $s=e=>e*1e3,Hs=e=>e/1e3;function Lb(e,t){return t?e*(1e3/t):0}const Bb=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,X8=1e-7,Q8=12;function Z8(e,t,n,r,a){let l,h,g=0;do h=t+(n-t)/2,l=Bb(h,r,a)-e,l>0?n=h:t=h;while(Math.abs(l)>X8&&++g<Q8);return h}function uu(e,t,n,r){if(e===t&&n===r)return Jr;const a=l=>Z8(l,0,1,e,n);return l=>l===0||l===1?l:Bb(a(l),t,r)}const Fb=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ub=e=>t=>1-e(1-t),Vb=uu(.33,1.53,.69,.99),Jg=Ub(Vb),zb=Fb(Jg),$b=e=>(e*=2)<1?.5*Jg(e):.5*(2-Math.pow(2,-10*(e-1))),e1=e=>1-Math.sin(Math.acos(e)),Hb=Ub(e1),Wb=Fb(e1),J8=uu(.42,0,1,1),ej=uu(0,0,.58,1),Gb=uu(.42,0,.58,1),tj=e=>Array.isArray(e)&&typeof e[0]!="number",qb=e=>Array.isArray(e)&&typeof e[0]=="number",nj={linear:Jr,easeIn:J8,easeInOut:Gb,easeOut:ej,circIn:e1,circInOut:Wb,circOut:Hb,backIn:Jg,backInOut:zb,backOut:Vb,anticipate:$b},rj=e=>typeof e=="string",Lx=e=>{if(qb(e)){Xg(e.length===4);const[t,n,r,a]=e;return uu(t,n,r,a)}else if(rj(e))return nj[e];return e},Wu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function sj(e,t){let n=new Set,r=new Set,a=!1,l=!1;const h=new WeakSet;let g={delta:0,timestamp:0,isProcessing:!1};function y(w){h.has(w)&&(x.schedule(w),e()),w(g)}const x={schedule:(w,E=!1,N=!1)=>{const D=N&&a?n:r;return E&&h.add(w),D.has(w)||D.add(w),w},cancel:w=>{r.delete(w),h.delete(w)},process:w=>{if(g=w,a){l=!0;return}a=!0,[n,r]=[r,n],n.forEach(y),n.clear(),a=!1,l&&(l=!1,x.process(w))}};return x}const ij=40;function Kb(e,t){let n=!1,r=!0;const a={delta:0,timestamp:0,isProcessing:!1},l=()=>n=!0,h=Wu.reduce((_,M)=>(_[M]=sj(l),_),{}),{setup:g,read:y,resolveKeyframes:x,preUpdate:w,update:E,preRender:N,render:I,postRender:D}=h,O=()=>{const _=vi.useManualTiming?a.timestamp:performance.now();n=!1,vi.useManualTiming||(a.delta=r?1e3/60:Math.max(Math.min(_-a.timestamp,ij),1)),a.timestamp=_,a.isProcessing=!0,g.process(a),y.process(a),x.process(a),w.process(a),E.process(a),N.process(a),I.process(a),D.process(a),a.isProcessing=!1,n&&t&&(r=!1,e(O))},V=()=>{n=!0,r=!0,a.isProcessing||e(O)};return{schedule:Wu.reduce((_,M)=>{const H=h[M];return _[M]=($,F=!1,U=!1)=>(n||V(),H.schedule($,F,U)),_},{}),cancel:_=>{for(let M=0;M<Wu.length;M++)h[Wu[M]].cancel(_)},state:a,steps:h}}const{schedule:Qt,cancel:ra,state:On,steps:Df}=Kb(typeof requestAnimationFrame<"u"?requestAnimationFrame:Jr,!0);let ud;function aj(){ud=void 0}const xr={now:()=>(ud===void 0&&xr.set(On.isProcessing||vi.useManualTiming?On.timestamp:performance.now()),ud),set:e=>{ud=e,queueMicrotask(aj)}},Yb=e=>t=>typeof t=="string"&&t.startsWith(e),t1=Yb("--"),oj=Yb("var(--"),n1=e=>oj(e)?lj.test(e.split("/*")[0].trim()):!1,lj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Sl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Hc={...Sl,transform:e=>yi(0,1,e)},Gu={...Sl,default:1},xc=e=>Math.round(e*1e5)/1e5,r1=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function cj(e){return e==null}const uj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,s1=(e,t)=>n=>!!(typeof n=="string"&&uj.test(n)&&n.startsWith(e)||t&&!cj(n)&&Object.prototype.hasOwnProperty.call(n,t)),Xb=(e,t,n)=>r=>{if(typeof r!="string")return r;const[a,l,h,g]=r.match(r1);return{[e]:parseFloat(a),[t]:parseFloat(l),[n]:parseFloat(h),alpha:g!==void 0?parseFloat(g):1}},dj=e=>yi(0,255,e),Of={...Sl,transform:e=>Math.round(dj(e))},Fa={test:s1("rgb","red"),parse:Xb("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Of.transform(e)+", "+Of.transform(t)+", "+Of.transform(n)+", "+xc(Hc.transform(r))+")"};function hj(e){let t="",n="",r="",a="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),a=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),a=e.substring(4,5),t+=t,n+=n,r+=r,a+=a),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:a?parseInt(a,16)/255:1}}const lm={test:s1("#"),parse:hj,transform:Fa.transform},du=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Mi=du("deg"),Ws=du("%"),Ye=du("px"),fj=du("vh"),mj=du("vw"),Bx={...Ws,parse:e=>Ws.parse(e)/100,transform:e=>Ws.transform(e*100)},Vo={test:s1("hsl","hue"),parse:Xb("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ws.transform(xc(t))+", "+Ws.transform(xc(n))+", "+xc(Hc.transform(r))+")"},xn={test:e=>Fa.test(e)||lm.test(e)||Vo.test(e),parse:e=>Fa.test(e)?Fa.parse(e):Vo.test(e)?Vo.parse(e):lm.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Fa.transform(e):Vo.transform(e),getAnimatableNone:e=>{const t=xn.parse(e);return t.alpha=0,xn.transform(t)}},gj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function pj(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(r1))==null?void 0:t.length)||0)+(((n=e.match(gj))==null?void 0:n.length)||0)>0}const Qb="number",Zb="color",xj="var",yj="var(",Fx="${}",vj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Wc(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},a=[];let l=0;const g=t.replace(vj,y=>(xn.test(y)?(r.color.push(l),a.push(Zb),n.push(xn.parse(y))):y.startsWith(yj)?(r.var.push(l),a.push(xj),n.push(y)):(r.number.push(l),a.push(Qb),n.push(parseFloat(y))),++l,Fx)).split(Fx);return{values:n,split:g,indexes:r,types:a}}function Jb(e){return Wc(e).values}function eE(e){const{split:t,types:n}=Wc(e),r=t.length;return a=>{let l="";for(let h=0;h<r;h++)if(l+=t[h],a[h]!==void 0){const g=n[h];g===Qb?l+=xc(a[h]):g===Zb?l+=xn.transform(a[h]):l+=a[h]}return l}}const wj=e=>typeof e=="number"?0:xn.test(e)?xn.getAnimatableNone(e):e;function bj(e){const t=Jb(e);return eE(e)(t.map(wj))}const sa={test:pj,parse:Jb,createTransformer:eE,getAnimatableNone:bj};function Pf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ej({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let a=0,l=0,h=0;if(!t)a=l=h=n;else{const g=n<.5?n*(1+t):n+t-n*t,y=2*n-g;a=Pf(y,g,e+1/3),l=Pf(y,g,e),h=Pf(y,g,e-1/3)}return{red:Math.round(a*255),green:Math.round(l*255),blue:Math.round(h*255),alpha:r}}function Yd(e,t){return n=>n>0?t:e}const en=(e,t,n)=>e+(t-e)*n,Lf=(e,t,n)=>{const r=e*e,a=n*(t*t-r)+r;return a<0?0:Math.sqrt(a)},Cj=[lm,Fa,Vo],Nj=e=>Cj.find(t=>t.test(e));function Ux(e){const t=Nj(e);if(!t)return!1;let n=t.parse(e);return t===Vo&&(n=Ej(n)),n}const Vx=(e,t)=>{const n=Ux(e),r=Ux(t);if(!n||!r)return Yd(e,t);const a={...n};return l=>(a.red=Lf(n.red,r.red,l),a.green=Lf(n.green,r.green,l),a.blue=Lf(n.blue,r.blue,l),a.alpha=en(n.alpha,r.alpha,l),Fa.transform(a))},cm=new Set(["none","hidden"]);function Sj(e,t){return cm.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function _j(e,t){return n=>en(e,t,n)}function i1(e){return typeof e=="number"?_j:typeof e=="string"?n1(e)?Yd:xn.test(e)?Vx:Ij:Array.isArray(e)?tE:typeof e=="object"?xn.test(e)?Vx:Aj:Yd}function tE(e,t){const n=[...e],r=n.length,a=e.map((l,h)=>i1(l)(l,t[h]));return l=>{for(let h=0;h<r;h++)n[h]=a[h](l);return n}}function Aj(e,t){const n={...e,...t},r={};for(const a in n)e[a]!==void 0&&t[a]!==void 0&&(r[a]=i1(e[a])(e[a],t[a]));return a=>{for(const l in r)n[l]=r[l](a);return n}}function Tj(e,t){const n=[],r={color:0,var:0,number:0};for(let a=0;a<t.values.length;a++){const l=t.types[a],h=e.indexes[l][r[l]],g=e.values[h]??0;n[a]=g,r[l]++}return n}const Ij=(e,t)=>{const n=sa.createTransformer(t),r=Wc(e),a=Wc(t);return r.indexes.var.length===a.indexes.var.length&&r.indexes.color.length===a.indexes.color.length&&r.indexes.number.length>=a.indexes.number.length?cm.has(e)&&!a.values.length||cm.has(t)&&!r.values.length?Sj(e,t):cu(tE(Tj(r,a),a.values),n):Yd(e,t)};function nE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?en(e,t,n):i1(e)(e,t)}const jj=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Qt.update(t,n),stop:()=>ra(t),now:()=>On.isProcessing?On.timestamp:xr.now()}},rE=(e,t,n=10)=>{let r="";const a=Math.max(Math.round(t/n),2);for(let l=0;l<a;l++)r+=Math.round(e(l/(a-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Xd=2e4;function a1(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Xd;)t+=n,r=e.next(t);return t>=Xd?1/0:t}function kj(e,t=100,n){const r=n({...e,keyframes:[0,t]}),a=Math.min(a1(r),Xd);return{type:"keyframes",ease:l=>r.next(a*l).value/t,duration:Hs(a)}}const Rj=5;function sE(e,t,n){const r=Math.max(t-Rj,0);return Lb(n-e(r),t-r)}const ln={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Bf=.001;function Mj({duration:e=ln.duration,bounce:t=ln.bounce,velocity:n=ln.velocity,mass:r=ln.mass}){let a,l,h=1-t;h=yi(ln.minDamping,ln.maxDamping,h),e=yi(ln.minDuration,ln.maxDuration,Hs(e)),h<1?(a=x=>{const w=x*h,E=w*e,N=w-n,I=um(x,h),D=Math.exp(-E);return Bf-N/I*D},l=x=>{const E=x*h*e,N=E*n+n,I=Math.pow(h,2)*Math.pow(x,2)*e,D=Math.exp(-E),O=um(Math.pow(x,2),h);return(-a(x)+Bf>0?-1:1)*((N-I)*D)/O}):(a=x=>{const w=Math.exp(-x*e),E=(x-n)*e+1;return-Bf+w*E},l=x=>{const w=Math.exp(-x*e),E=(n-x)*(e*e);return w*E});const g=5/e,y=Oj(a,l,g);if(e=$s(e),isNaN(y))return{stiffness:ln.stiffness,damping:ln.damping,duration:e};{const x=Math.pow(y,2)*r;return{stiffness:x,damping:h*2*Math.sqrt(r*x),duration:e}}}const Dj=12;function Oj(e,t,n){let r=n;for(let a=1;a<Dj;a++)r=r-e(r)/t(r);return r}function um(e,t){return e*Math.sqrt(1-t*t)}const Pj=["duration","bounce"],Lj=["stiffness","damping","mass"];function zx(e,t){return t.some(n=>e[n]!==void 0)}function Bj(e){let t={velocity:ln.velocity,stiffness:ln.stiffness,damping:ln.damping,mass:ln.mass,isResolvedFromDuration:!1,...e};if(!zx(e,Lj)&&zx(e,Pj))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),a=r*r,l=2*yi(.05,1,1-(e.bounce||0))*Math.sqrt(a);t={...t,mass:ln.mass,stiffness:a,damping:l}}else{const n=Mj(e);t={...t,...n,mass:ln.mass},t.isResolvedFromDuration=!0}return t}function Qd(e=ln.visualDuration,t=ln.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:a}=n;const l=n.keyframes[0],h=n.keyframes[n.keyframes.length-1],g={done:!1,value:l},{stiffness:y,damping:x,mass:w,duration:E,velocity:N,isResolvedFromDuration:I}=Bj({...n,velocity:-Hs(n.velocity||0)}),D=N||0,O=x/(2*Math.sqrt(y*w)),V=h-l,T=Hs(Math.sqrt(y/w)),A=Math.abs(V)<5;r||(r=A?ln.restSpeed.granular:ln.restSpeed.default),a||(a=A?ln.restDelta.granular:ln.restDelta.default);let _;if(O<1){const H=um(T,O);_=$=>{const F=Math.exp(-O*T*$);return h-F*((D+O*T*V)/H*Math.sin(H*$)+V*Math.cos(H*$))}}else if(O===1)_=H=>h-Math.exp(-T*H)*(V+(D+T*V)*H);else{const H=T*Math.sqrt(O*O-1);_=$=>{const F=Math.exp(-O*T*$),U=Math.min(H*$,300);return h-F*((D+O*T*V)*Math.sinh(U)+H*V*Math.cosh(U))/H}}const M={calculatedDuration:I&&E||null,next:H=>{const $=_(H);if(I)g.done=H>=E;else{let F=H===0?D:0;O<1&&(F=H===0?$s(D):sE(_,H,$));const U=Math.abs(F)<=r,q=Math.abs(h-$)<=a;g.done=U&&q}return g.value=g.done?h:$,g},toString:()=>{const H=Math.min(a1(M),Xd),$=rE(F=>M.next(H*F).value,H,30);return H+"ms "+$},toTransition:()=>{}};return M}Qd.applyToOptions=e=>{const t=kj(e,100,Qd);return e.ease=t.ease,e.duration=$s(t.duration),e.type="keyframes",e};function dm({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:l=500,modifyTarget:h,min:g,max:y,restDelta:x=.5,restSpeed:w}){const E=e[0],N={done:!1,value:E},I=U=>g!==void 0&&U<g||y!==void 0&&U>y,D=U=>g===void 0?y:y===void 0||Math.abs(g-U)<Math.abs(y-U)?g:y;let O=n*t;const V=E+O,T=h===void 0?V:h(V);T!==V&&(O=T-E);const A=U=>-O*Math.exp(-U/r),_=U=>T+A(U),M=U=>{const q=A(U),ne=_(U);N.done=Math.abs(q)<=x,N.value=N.done?T:ne};let H,$;const F=U=>{I(N.value)&&(H=U,$=Qd({keyframes:[N.value,D(N.value)],velocity:sE(_,U,N.value),damping:a,stiffness:l,restDelta:x,restSpeed:w}))};return F(0),{calculatedDuration:null,next:U=>{let q=!1;return!$&&H===void 0&&(q=!0,M(U),F(U)),H!==void 0&&U>=H?$.next(U-H):(!q&&M(U),N)}}}function Fj(e,t,n){const r=[],a=n||vi.mix||nE,l=e.length-1;for(let h=0;h<l;h++){let g=a(e[h],e[h+1]);if(t){const y=Array.isArray(t)?t[h]||Jr:t;g=cu(y,g)}r.push(g)}return r}function Uj(e,t,{clamp:n=!0,ease:r,mixer:a}={}){const l=e.length;if(Xg(l===t.length),l===1)return()=>t[0];if(l===2&&t[0]===t[1])return()=>t[1];const h=e[0]===e[1];e[0]>e[l-1]&&(e=[...e].reverse(),t=[...t].reverse());const g=Fj(t,r,a),y=g.length,x=w=>{if(h&&w<e[0])return t[0];let E=0;if(y>1)for(;E<e.length-2&&!(w<e[E+1]);E++);const N=$c(e[E],e[E+1],w);return g[E](N)};return n?w=>x(yi(e[0],e[l-1],w)):x}function Vj(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const a=$c(0,t,r);e.push(en(n,1,a))}}function zj(e){const t=[0];return Vj(t,e.length-1),t}function $j(e,t){return e.map(n=>n*t)}function Hj(e,t){return e.map(()=>t||Gb).splice(0,e.length-1)}function yc({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const a=tj(r)?r.map(Lx):Lx(r),l={done:!1,value:t[0]},h=$j(n&&n.length===t.length?n:zj(t),e),g=Uj(h,t,{ease:Array.isArray(a)?a:Hj(t,a)});return{calculatedDuration:e,next:y=>(l.value=g(y),l.done=y>=e,l)}}const Wj=e=>e!==null;function o1(e,{repeat:t,repeatType:n="loop"},r,a=1){const l=e.filter(Wj),g=a<0||t&&n!=="loop"&&t%2===1?0:l.length-1;return!g||r===void 0?l[g]:r}const Gj={decay:dm,inertia:dm,tween:yc,keyframes:yc,spring:Qd};function iE(e){typeof e.type=="string"&&(e.type=Gj[e.type])}class l1{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const qj=e=>e/100;class c1 extends l1{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,a;const{motionValue:n}=this.options;n&&n.updatedAt!==xr.now()&&this.tick(xr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(a=(r=this.options).onStop)==null||a.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;iE(t);const{type:n=yc,repeat:r=0,repeatDelay:a=0,repeatType:l,velocity:h=0}=t;let{keyframes:g}=t;const y=n||yc;y!==yc&&typeof g[0]!="number"&&(this.mixKeyframes=cu(qj,nE(g[0],g[1])),g=[0,100]);const x=y({...t,keyframes:g});l==="mirror"&&(this.mirroredGenerator=y({...t,keyframes:[...g].reverse(),velocity:-h})),x.calculatedDuration===null&&(x.calculatedDuration=a1(x));const{calculatedDuration:w}=x;this.calculatedDuration=w,this.resolvedDuration=w+a,this.totalDuration=this.resolvedDuration*(r+1)-a,this.generator=x}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:a,mixKeyframes:l,mirroredGenerator:h,resolvedDuration:g,calculatedDuration:y}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:w,repeat:E,repeatType:N,repeatDelay:I,type:D,onUpdate:O,finalKeyframe:V}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-a/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const T=this.currentTime-x*(this.playbackSpeed>=0?1:-1),A=this.playbackSpeed>=0?T<0:T>a;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=a);let _=this.currentTime,M=r;if(E){const U=Math.min(this.currentTime,a)/g;let q=Math.floor(U),ne=U%1;!ne&&U>=1&&(ne=1),ne===1&&q--,q=Math.min(q,E+1),!!(q%2)&&(N==="reverse"?(ne=1-ne,I&&(ne-=I/g)):N==="mirror"&&(M=h)),_=yi(0,1,ne)*g}const H=A?{done:!1,value:w[0]}:M.next(_);l&&(H.value=l(H.value));let{done:$}=H;!A&&y!==null&&($=this.playbackSpeed>=0?this.currentTime>=a:this.currentTime<=0);const F=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&$);return F&&D!==dm&&(H.value=o1(w,this.options,V,this.speed)),O&&O(H.value),F&&this.finish(),H}then(t,n){return this.finished.then(t,n)}get duration(){return Hs(this.calculatedDuration)}get time(){return Hs(this.currentTime)}set time(t){var n;t=$s(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(xr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Hs(this.currentTime))}play(){var a,l;if(this.isStopped)return;const{driver:t=jj,startTime:n}=this.options;this.driver||(this.driver=t(h=>this.tick(h))),(l=(a=this.options).onPlay)==null||l.call(a);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(xr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Kj(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ua=e=>e*180/Math.PI,hm=e=>{const t=Ua(Math.atan2(e[1],e[0]));return fm(t)},Yj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:hm,rotateZ:hm,skewX:e=>Ua(Math.atan(e[1])),skewY:e=>Ua(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},fm=e=>(e=e%360,e<0&&(e+=360),e),$x=hm,Hx=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Wx=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Xj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Hx,scaleY:Wx,scale:e=>(Hx(e)+Wx(e))/2,rotateX:e=>fm(Ua(Math.atan2(e[6],e[5]))),rotateY:e=>fm(Ua(Math.atan2(-e[2],e[0]))),rotateZ:$x,rotate:$x,skewX:e=>Ua(Math.atan(e[4])),skewY:e=>Ua(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function mm(e){return e.includes("scale")?1:0}function gm(e,t){if(!e||e==="none")return mm(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,a;if(n)r=Xj,a=n;else{const g=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Yj,a=g}if(!a)return mm(t);const l=r[t],h=a[1].split(",").map(Zj);return typeof l=="function"?l(h):h[l]}const Qj=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return gm(n,t)};function Zj(e){return parseFloat(e.trim())}const _l=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Al=new Set(_l),Gx=e=>e===Sl||e===Ye,Jj=new Set(["x","y","z"]),ek=_l.filter(e=>!Jj.has(e));function tk(e){const t=[];return ek.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const $a={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>gm(t,"x"),y:(e,{transform:t})=>gm(t,"y")};$a.translateX=$a.x;$a.translateY=$a.y;const Ha=new Set;let pm=!1,xm=!1,ym=!1;function aE(){if(xm){const e=Array.from(Ha).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const a=tk(r);a.length&&(n.set(r,a),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const a=n.get(r);a&&a.forEach(([l,h])=>{var g;(g=r.getValue(l))==null||g.set(h)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}xm=!1,pm=!1,Ha.forEach(e=>e.complete(ym)),Ha.clear()}function oE(){Ha.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(xm=!0)})}function nk(){ym=!0,oE(),aE(),ym=!1}class u1{constructor(t,n,r,a,l,h=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=a,this.element=l,this.isAsync=h}scheduleResolve(){this.state="scheduled",this.isAsync?(Ha.add(this),pm||(pm=!0,Qt.read(oE),Qt.resolveKeyframes(aE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:a}=this;if(t[0]===null){const l=a==null?void 0:a.get(),h=t[t.length-1];if(l!==void 0)t[0]=l;else if(r&&n){const g=r.readValue(n,h);g!=null&&(t[0]=g)}t[0]===void 0&&(t[0]=h),a&&l===void 0&&a.set(t[0])}Kj(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Ha.delete(this)}cancel(){this.state==="scheduled"&&(Ha.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const rk=e=>e.startsWith("--");function sk(e,t,n){rk(t)?e.style.setProperty(t,n):e.style[t]=n}const ik=Qg(()=>window.ScrollTimeline!==void 0),ak={};function ok(e,t){const n=Qg(e);return()=>ak[t]??n()}const lE=ok(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rc=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,qx={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rc([0,.65,.55,1]),circOut:rc([.55,0,1,.45]),backIn:rc([.31,.01,.66,-.59]),backOut:rc([.33,1.53,.69,.99])};function cE(e,t){if(e)return typeof e=="function"?lE()?rE(e,t):"ease-out":qb(e)?rc(e):Array.isArray(e)?e.map(n=>cE(n,t)||qx.easeOut):qx[e]}function lk(e,t,n,{delay:r=0,duration:a=300,repeat:l=0,repeatType:h="loop",ease:g="easeOut",times:y}={},x=void 0){const w={[t]:n};y&&(w.offset=y);const E=cE(g,a);Array.isArray(E)&&(w.easing=E);const N={delay:r,duration:a,easing:Array.isArray(E)?"linear":E,fill:"both",iterations:l+1,direction:h==="reverse"?"alternate":"normal"};return x&&(N.pseudoElement=x),e.animate(w,N)}function uE(e){return typeof e=="function"&&"applyToOptions"in e}function ck({type:e,...t}){return uE(e)&&lE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class uk extends l1{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:a,pseudoElement:l,allowFlatten:h=!1,finalKeyframe:g,onComplete:y}=t;this.isPseudoElement=!!l,this.allowFlatten=h,this.options=t,Xg(typeof t.type!="string");const x=ck(t);this.animation=lk(n,r,a,x,l),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!l){const w=o1(a,this.options,g,this.speed);this.updateMotionValue?this.updateMotionValue(w):sk(n,r,w),this.animation.cancel()}y==null||y(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Hs(Number(t))}get time(){return Hs(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=$s(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&ik()?(this.animation.timeline=t,Jr):n(this)}}const dE={anticipate:$b,backInOut:zb,circInOut:Wb};function dk(e){return e in dE}function hk(e){typeof e.ease=="string"&&dk(e.ease)&&(e.ease=dE[e.ease])}const Kx=10;class fk extends uk{constructor(t){hk(t),iE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:a,element:l,...h}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const g=new c1({...h,autoplay:!1}),y=$s(this.finishedTime??this.time);n.setWithVelocity(g.sample(y-Kx).value,g.sample(y).value,Kx),g.stop()}}const Yx=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(sa.test(e)||e==="0")&&!e.startsWith("url("));function mk(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function gk(e,t,n,r){const a=e[0];if(a===null)return!1;if(t==="display"||t==="visibility")return!0;const l=e[e.length-1],h=Yx(a,t),g=Yx(l,t);return!h||!g?!1:mk(e)||(n==="spring"||uE(n))&&r}const pk=new Set(["opacity","clipPath","filter","transform"]),xk=Qg(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function yk(e){var w;const{motionValue:t,name:n,repeatDelay:r,repeatType:a,damping:l,type:h}=e;if(!(((w=t==null?void 0:t.owner)==null?void 0:w.current)instanceof HTMLElement))return!1;const{onUpdate:y,transformTemplate:x}=t.owner.getProps();return xk()&&n&&pk.has(n)&&(n!=="transform"||!x)&&!y&&!r&&a!=="mirror"&&l!==0&&h!=="inertia"}const vk=40;class wk extends l1{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:a=0,repeatDelay:l=0,repeatType:h="loop",keyframes:g,name:y,motionValue:x,element:w,...E}){var D;super(),this.stop=()=>{var O,V;this._animation&&(this._animation.stop(),(O=this.stopTimeline)==null||O.call(this)),(V=this.keyframeResolver)==null||V.cancel()},this.createdAt=xr.now();const N={autoplay:t,delay:n,type:r,repeat:a,repeatDelay:l,repeatType:h,name:y,motionValue:x,element:w,...E},I=(w==null?void 0:w.KeyframeResolver)||u1;this.keyframeResolver=new I(g,(O,V,T)=>this.onKeyframesResolved(O,V,N,!T),y,x,w),(D=this.keyframeResolver)==null||D.scheduleResolve()}onKeyframesResolved(t,n,r,a){this.keyframeResolver=void 0;const{name:l,type:h,velocity:g,delay:y,isHandoff:x,onUpdate:w}=r;this.resolvedAt=xr.now(),gk(t,l,h,g)||((vi.instantAnimations||!y)&&(w==null||w(o1(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const N={startTime:a?this.resolvedAt?this.resolvedAt-this.createdAt>vk?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},I=!x&&yk(N)?new fk({...N,element:N.motionValue.owner.current}):new c1(N);I.finished.then(()=>this.notifyFinished()).catch(Jr),this.pendingTimeline&&(this.stopTimeline=I.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=I}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),nk()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const bk=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Ek(e){const t=bk.exec(e);if(!t)return[,];const[,n,r,a]=t;return[`--${n??r}`,a]}function hE(e,t,n=1){const[r,a]=Ek(e);if(!r)return;const l=window.getComputedStyle(t).getPropertyValue(r);if(l){const h=l.trim();return Db(h)?parseFloat(h):h}return n1(a)?hE(a,t,n+1):a}function d1(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const fE=new Set(["width","height","top","left","right","bottom",..._l]),Ck={test:e=>e==="auto",parse:e=>e},mE=e=>t=>t.test(e),gE=[Sl,Ye,Ws,Mi,mj,fj,Ck],Xx=e=>gE.find(mE(e));function Nk(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Pb(e):!0}const Sk=new Set(["brightness","contrast","saturate","opacity"]);function _k(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(r1)||[];if(!r)return e;const a=n.replace(r,"");let l=Sk.has(t)?1:0;return r!==n&&(l*=100),t+"("+l+a+")"}const Ak=/\b([a-z-]*)\(.*?\)/gu,vm={...sa,getAnimatableNone:e=>{const t=e.match(Ak);return t?t.map(_k).join(" "):e}},Qx={...Sl,transform:Math.round},Tk={rotate:Mi,rotateX:Mi,rotateY:Mi,rotateZ:Mi,scale:Gu,scaleX:Gu,scaleY:Gu,scaleZ:Gu,skew:Mi,skewX:Mi,skewY:Mi,distance:Ye,translateX:Ye,translateY:Ye,translateZ:Ye,x:Ye,y:Ye,z:Ye,perspective:Ye,transformPerspective:Ye,opacity:Hc,originX:Bx,originY:Bx,originZ:Ye},h1={borderWidth:Ye,borderTopWidth:Ye,borderRightWidth:Ye,borderBottomWidth:Ye,borderLeftWidth:Ye,borderRadius:Ye,radius:Ye,borderTopLeftRadius:Ye,borderTopRightRadius:Ye,borderBottomRightRadius:Ye,borderBottomLeftRadius:Ye,width:Ye,maxWidth:Ye,height:Ye,maxHeight:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,backgroundPositionX:Ye,backgroundPositionY:Ye,...Tk,zIndex:Qx,fillOpacity:Hc,strokeOpacity:Hc,numOctaves:Qx},Ik={...h1,color:xn,backgroundColor:xn,outlineColor:xn,fill:xn,stroke:xn,borderColor:xn,borderTopColor:xn,borderRightColor:xn,borderBottomColor:xn,borderLeftColor:xn,filter:vm,WebkitFilter:vm},pE=e=>Ik[e];function xE(e,t){let n=pE(e);return n!==vm&&(n=sa),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jk=new Set(["auto","none","0"]);function kk(e,t,n){let r=0,a;for(;r<e.length&&!a;){const l=e[r];typeof l=="string"&&!jk.has(l)&&Wc(l).values.length&&(a=e[r]),r++}if(a&&n)for(const l of t)e[l]=xE(n,a)}class Rk extends u1{constructor(t,n,r,a,l){super(t,n,r,a,l,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let y=0;y<t.length;y++){let x=t[y];if(typeof x=="string"&&(x=x.trim(),n1(x))){const w=hE(x,n.current);w!==void 0&&(t[y]=w),y===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!fE.has(r)||t.length!==2)return;const[a,l]=t,h=Xx(a),g=Xx(l);if(h!==g)if(Gx(h)&&Gx(g))for(let y=0;y<t.length;y++){const x=t[y];typeof x=="string"&&(t[y]=parseFloat(x))}else $a[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let a=0;a<t.length;a++)(t[a]===null||Nk(t[a]))&&r.push(a);r.length&&kk(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=$a[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const a=n[n.length-1];a!==void 0&&t.getValue(r,a).jump(a,!1)}measureEndState(){var g;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const a=t.getValue(n);a&&a.jump(this.measuredOrigin,!1);const l=r.length-1,h=r[l];r[l]=$a[n](t.measureViewportBox(),window.getComputedStyle(t.current)),h!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=h),(g=this.removedTransforms)!=null&&g.length&&this.removedTransforms.forEach(([y,x])=>{t.getValue(y).set(x)}),this.resolveNoneKeyframes()}}function Mk(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const a=(n==null?void 0:n[e])??r.querySelectorAll(e);return a?Array.from(a):[]}return Array.from(e)}const yE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function vE(e){return Ob(e)&&"offsetHeight"in e}const Zx=30,Dk=e=>!isNaN(parseFloat(e));class Ok{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,a=!0)=>{var h,g;const l=xr.now();if(this.updatedAt!==l&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((h=this.events.change)==null||h.notify(this.current),this.dependents))for(const y of this.dependents)y.dirty();a&&((g=this.events.renderRequest)==null||g.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=xr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Dk(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Zg);const r=this.events[t].add(n);return t==="change"?()=>{r(),Qt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=xr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Zx)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Zx);return Lb(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function fl(e,t){return new Ok(e,t)}const{schedule:f1}=Kb(queueMicrotask,!1),us={x:!1,y:!1};function wE(){return us.x||us.y}function Pk(e){return e==="x"||e==="y"?us[e]?null:(us[e]=!0,()=>{us[e]=!1}):us.x||us.y?null:(us.x=us.y=!0,()=>{us.x=us.y=!1})}function bE(e,t){const n=Mk(e),r=new AbortController,a={passive:!0,...t,signal:r.signal};return[n,a,()=>r.abort()]}function Jx(e){return!(e.pointerType==="touch"||wE())}function Lk(e,t,n={}){const[r,a,l]=bE(e,n),h=g=>{if(!Jx(g))return;const{target:y}=g,x=t(y,g);if(typeof x!="function"||!y)return;const w=E=>{Jx(E)&&(x(E),y.removeEventListener("pointerleave",w))};y.addEventListener("pointerleave",w,a)};return r.forEach(g=>{g.addEventListener("pointerenter",h,a)}),l}const EE=(e,t)=>t?e===t?!0:EE(e,t.parentElement):!1,m1=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Bk=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Fk(e){return Bk.has(e.tagName)||e.tabIndex!==-1}const dd=new WeakSet;function ey(e){return t=>{t.key==="Enter"&&e(t)}}function Ff(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Uk=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=ey(()=>{if(dd.has(n))return;Ff(n,"down");const a=ey(()=>{Ff(n,"up")}),l=()=>Ff(n,"cancel");n.addEventListener("keyup",a,t),n.addEventListener("blur",l,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function ty(e){return m1(e)&&!wE()}function Vk(e,t,n={}){const[r,a,l]=bE(e,n),h=g=>{const y=g.currentTarget;if(!ty(g))return;dd.add(y);const x=t(y,g),w=(I,D)=>{window.removeEventListener("pointerup",E),window.removeEventListener("pointercancel",N),dd.has(y)&&dd.delete(y),ty(I)&&typeof x=="function"&&x(I,{success:D})},E=I=>{w(I,y===window||y===document||n.useGlobalTarget||EE(y,I.target))},N=I=>{w(I,!1)};window.addEventListener("pointerup",E,a),window.addEventListener("pointercancel",N,a)};return r.forEach(g=>{(n.useGlobalTarget?window:g).addEventListener("pointerdown",h,a),vE(g)&&(g.addEventListener("focus",x=>Uk(x,a)),!Fk(g)&&!g.hasAttribute("tabindex")&&(g.tabIndex=0))}),l}function CE(e){return Ob(e)&&"ownerSVGElement"in e}function zk(e){return CE(e)&&e.tagName==="svg"}const qn=e=>!!(e&&e.getVelocity),$k=[...gE,xn,sa],Hk=e=>$k.find(mE(e)),g1=R.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class Wk extends R.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,a=vE(r)&&r.offsetWidth||0,l=this.props.sizeRef.current;l.height=n.offsetHeight||0,l.width=n.offsetWidth||0,l.top=n.offsetTop,l.left=n.offsetLeft,l.right=a-l.width-l.left}return null}componentDidUpdate(){}render(){return this.props.children}}function Gk({children:e,isPresent:t,anchorX:n,root:r}){const a=R.useId(),l=R.useRef(null),h=R.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:g}=R.useContext(g1);return R.useInsertionEffect(()=>{const{width:y,height:x,top:w,left:E,right:N}=h.current;if(t||!l.current||!y||!x)return;const I=n==="left"?`left: ${E}`:`right: ${N}`;l.current.dataset.motionPopId=a;const D=document.createElement("style");g&&(D.nonce=g);const O=r??document.head;return O.appendChild(D),D.sheet&&D.sheet.insertRule(`
          [data-motion-pop-id="${a}"] {
            position: absolute !important;
            width: ${y}px !important;
            height: ${x}px !important;
            ${I}px !important;
            top: ${w}px !important;
          }
        `),()=>{O.removeChild(D),O.contains(D)&&O.removeChild(D)}},[t]),d.jsx(Wk,{isPresent:t,childRef:l,sizeRef:h,children:R.cloneElement(e,{ref:l})})}const qk=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:a,presenceAffectsLayout:l,mode:h,anchorX:g,root:y})=>{const x=Gg(Kk),w=R.useId();let E=!0,N=R.useMemo(()=>(E=!1,{id:w,initial:t,isPresent:n,custom:a,onExitComplete:I=>{x.set(I,!0);for(const D of x.values())if(!D)return;r&&r()},register:I=>(x.set(I,!1),()=>x.delete(I))}),[n,x,r]);return l&&E&&(N={...N}),R.useMemo(()=>{x.forEach((I,D)=>x.set(D,!1))},[n]),R.useEffect(()=>{!n&&!x.size&&r&&r()},[n]),h==="popLayout"&&(e=d.jsx(Gk,{isPresent:n,anchorX:g,root:y,children:e})),d.jsx(Dh.Provider,{value:N,children:e})};function Kk(){return new Map}function NE(e=!0){const t=R.useContext(Dh);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:a}=t,l=R.useId();R.useEffect(()=>{if(e)return a(l)},[e]);const h=R.useCallback(()=>e&&r&&r(l),[l,r,e]);return!n&&r?[!1,h]:[!0]}const qu=e=>e.key||"";function ny(e){const t=[];return R.Children.forEach(e,n=>{R.isValidElement(n)&&t.push(n)}),t}const p1=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:a=!0,mode:l="sync",propagate:h=!1,anchorX:g="left",root:y})=>{const[x,w]=NE(h),E=R.useMemo(()=>ny(e),[e]),N=h&&!x?[]:E.map(qu),I=R.useRef(!0),D=R.useRef(E),O=Gg(()=>new Map),[V,T]=R.useState(E),[A,_]=R.useState(E);Mb(()=>{I.current=!1,D.current=E;for(let $=0;$<A.length;$++){const F=qu(A[$]);N.includes(F)?O.delete(F):O.get(F)!==!0&&O.set(F,!1)}},[A,N.length,N.join("-")]);const M=[];if(E!==V){let $=[...E];for(let F=0;F<A.length;F++){const U=A[F],q=qu(U);N.includes(q)||($.splice(F,0,U),M.push(U))}return l==="wait"&&M.length&&($=M),_(ny($)),T(E),null}const{forceRender:H}=R.useContext(Wg);return d.jsx(d.Fragment,{children:A.map($=>{const F=qu($),U=h&&!x?!1:E===A||N.includes(F),q=()=>{if(O.has(F))O.set(F,!0);else return;let ne=!0;O.forEach(he=>{he||(ne=!1)}),ne&&(H==null||H(),_(D.current),h&&(w==null||w()),r&&r())};return d.jsx(qk,{isPresent:U,initial:!I.current||n?void 0:!1,custom:t,presenceAffectsLayout:a,mode:l,root:y,onExitComplete:U?void 0:q,anchorX:g,children:$},F)})})},SE=R.createContext({strict:!1}),ry={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ml={};for(const e in ry)ml[e]={isEnabled:t=>ry[e].some(n=>!!t[n])};function Yk(e){for(const t in e)ml[t]={...ml[t],...e[t]}}const Xk=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Zd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Xk.has(e)}let _E=e=>!Zd(e);function Qk(e){typeof e=="function"&&(_E=t=>t.startsWith("on")?!Zd(t):e(t))}try{Qk(require("@emotion/is-prop-valid").default)}catch{}function Zk(e,t,n){const r={};for(const a in e)a==="values"&&typeof e.values=="object"||(_E(a)||n===!0&&Zd(a)||!t&&!Zd(a)||e.draggable&&a.startsWith("onDrag"))&&(r[a]=e[a]);return r}const Oh=R.createContext({});function Ph(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Gc(e){return typeof e=="string"||Array.isArray(e)}const x1=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],y1=["initial",...x1];function Lh(e){return Ph(e.animate)||y1.some(t=>Gc(e[t]))}function AE(e){return!!(Lh(e)||e.variants)}function Jk(e,t){if(Lh(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Gc(n)?n:void 0,animate:Gc(r)?r:void 0}}return e.inherit!==!1?t:{}}function e5(e){const{initial:t,animate:n}=Jk(e,R.useContext(Oh));return R.useMemo(()=>({initial:t,animate:n}),[sy(t),sy(n)])}function sy(e){return Array.isArray(e)?e.join(" "):e}const qc={};function t5(e){for(const t in e)qc[t]=e[t],t1(t)&&(qc[t].isCSSVariable=!0)}function TE(e,{layout:t,layoutId:n}){return Al.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!qc[e]||e==="opacity")}const n5={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},r5=_l.length;function s5(e,t,n){let r="",a=!0;for(let l=0;l<r5;l++){const h=_l[l],g=e[h];if(g===void 0)continue;let y=!0;if(typeof g=="number"?y=g===(h.startsWith("scale")?1:0):y=parseFloat(g)===0,!y||n){const x=yE(g,h1[h]);if(!y){a=!1;const w=n5[h]||h;r+=`${w}(${x}) `}n&&(t[h]=x)}}return r=r.trim(),n?r=n(t,a?"":r):a&&(r="none"),r}function v1(e,t,n){const{style:r,vars:a,transformOrigin:l}=e;let h=!1,g=!1;for(const y in t){const x=t[y];if(Al.has(y)){h=!0;continue}else if(t1(y)){a[y]=x;continue}else{const w=yE(x,h1[y]);y.startsWith("origin")?(g=!0,l[y]=w):r[y]=w}}if(t.transform||(h||n?r.transform=s5(t,e.transform,n):r.transform&&(r.transform="none")),g){const{originX:y="50%",originY:x="50%",originZ:w=0}=l;r.transformOrigin=`${y} ${x} ${w}`}}const w1=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function IE(e,t,n){for(const r in t)!qn(t[r])&&!TE(r,n)&&(e[r]=t[r])}function i5({transformTemplate:e},t){return R.useMemo(()=>{const n=w1();return v1(n,t,e),Object.assign({},n.vars,n.style)},[t])}function a5(e,t){const n=e.style||{},r={};return IE(r,n,e),Object.assign(r,i5(e,t)),r}function o5(e,t){const n={},r=a5(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const l5={offset:"stroke-dashoffset",array:"stroke-dasharray"},c5={offset:"strokeDashoffset",array:"strokeDasharray"};function u5(e,t,n=1,r=0,a=!0){e.pathLength=1;const l=a?l5:c5;e[l.offset]=Ye.transform(-r);const h=Ye.transform(t),g=Ye.transform(n);e[l.array]=`${h} ${g}`}function jE(e,{attrX:t,attrY:n,attrScale:r,pathLength:a,pathSpacing:l=1,pathOffset:h=0,...g},y,x,w){if(v1(e,g,x),y){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:E,style:N}=e;E.transform&&(N.transform=E.transform,delete E.transform),(N.transform||E.transformOrigin)&&(N.transformOrigin=E.transformOrigin??"50% 50%",delete E.transformOrigin),N.transform&&(N.transformBox=(w==null?void 0:w.transformBox)??"fill-box",delete E.transformBox),t!==void 0&&(E.x=t),n!==void 0&&(E.y=n),r!==void 0&&(E.scale=r),a!==void 0&&u5(E,a,l,h,!1)}const kE=()=>({...w1(),attrs:{}}),RE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function d5(e,t,n,r){const a=R.useMemo(()=>{const l=kE();return jE(l,t,RE(r),e.transformTemplate,e.style),{...l.attrs,style:{...l.style}}},[t]);if(e.style){const l={};IE(l,e.style,e),a.style={...l,...a.style}}return a}const h5=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function b1(e){return typeof e!="string"||e.includes("-")?!1:!!(h5.indexOf(e)>-1||/[A-Z]/u.test(e))}function f5(e,t,n,{latestValues:r},a,l=!1){const g=(b1(e)?d5:o5)(t,r,a,e),y=Zk(t,typeof e=="string",l),x=e!==R.Fragment?{...y,...g,ref:n}:{},{children:w}=t,E=R.useMemo(()=>qn(w)?w.get():w,[w]);return R.createElement(e,{...x,children:E})}function iy(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function E1(e,t,n,r){if(typeof t=="function"){const[a,l]=iy(r);t=t(n!==void 0?n:e.custom,a,l)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[a,l]=iy(r);t=t(n!==void 0?n:e.custom,a,l)}return t}function hd(e){return qn(e)?e.get():e}function m5({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,a){return{latestValues:g5(n,r,a,e),renderState:t()}}function g5(e,t,n,r){const a={},l=r(e,{});for(const N in l)a[N]=hd(l[N]);let{initial:h,animate:g}=e;const y=Lh(e),x=AE(e);t&&x&&!y&&e.inherit!==!1&&(h===void 0&&(h=t.initial),g===void 0&&(g=t.animate));let w=n?n.initial===!1:!1;w=w||h===!1;const E=w?g:h;if(E&&typeof E!="boolean"&&!Ph(E)){const N=Array.isArray(E)?E:[E];for(let I=0;I<N.length;I++){const D=E1(e,N[I]);if(D){const{transitionEnd:O,transition:V,...T}=D;for(const A in T){let _=T[A];if(Array.isArray(_)){const M=w?_.length-1:0;_=_[M]}_!==null&&(a[A]=_)}for(const A in O)a[A]=O[A]}}}return a}const ME=e=>(t,n)=>{const r=R.useContext(Oh),a=R.useContext(Dh),l=()=>m5(e,t,r,a);return n?l():Gg(l)};function C1(e,t,n){var l;const{style:r}=e,a={};for(const h in r)(qn(r[h])||t.style&&qn(t.style[h])||TE(h,e)||((l=n==null?void 0:n.getValue(h))==null?void 0:l.liveStyle)!==void 0)&&(a[h]=r[h]);return a}const p5=ME({scrapeMotionValuesFromProps:C1,createRenderState:w1});function DE(e,t,n){const r=C1(e,t,n);for(const a in e)if(qn(e[a])||qn(t[a])){const l=_l.indexOf(a)!==-1?"attr"+a.charAt(0).toUpperCase()+a.substring(1):a;r[l]=e[a]}return r}const x5=ME({scrapeMotionValuesFromProps:DE,createRenderState:kE}),y5=Symbol.for("motionComponentSymbol");function zo(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function v5(e,t,n){return R.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):zo(n)&&(n.current=r))},[t])}const N1=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),w5="framerAppearId",OE="data-"+N1(w5),PE=R.createContext({});function b5(e,t,n,r,a){var O,V;const{visualElement:l}=R.useContext(Oh),h=R.useContext(SE),g=R.useContext(Dh),y=R.useContext(g1).reducedMotion,x=R.useRef(null);r=r||h.renderer,!x.current&&r&&(x.current=r(e,{visualState:t,parent:l,props:n,presenceContext:g,blockInitialAnimation:g?g.initial===!1:!1,reducedMotionConfig:y}));const w=x.current,E=R.useContext(PE);w&&!w.projection&&a&&(w.type==="html"||w.type==="svg")&&E5(x.current,n,a,E);const N=R.useRef(!1);R.useInsertionEffect(()=>{w&&N.current&&w.update(n,g)});const I=n[OE],D=R.useRef(!!I&&!((O=window.MotionHandoffIsComplete)!=null&&O.call(window,I))&&((V=window.MotionHasOptimisedAnimation)==null?void 0:V.call(window,I)));return Mb(()=>{w&&(N.current=!0,window.MotionIsMounted=!0,w.updateFeatures(),w.scheduleRenderMicrotask(),D.current&&w.animationState&&w.animationState.animateChanges())}),R.useEffect(()=>{w&&(!D.current&&w.animationState&&w.animationState.animateChanges(),D.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,I)}),D.current=!1))}),w}function E5(e,t,n,r){const{layoutId:a,layout:l,drag:h,dragConstraints:g,layoutScroll:y,layoutRoot:x,layoutCrossfade:w}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:LE(e.parent)),e.projection.setOptions({layoutId:a,layout:l,alwaysMeasureLayout:!!h||g&&zo(g),visualElement:e,animationType:typeof l=="string"?l:"both",initialPromotionConfig:r,crossfade:w,layoutScroll:y,layoutRoot:x})}function LE(e){if(e)return e.options.allowProjection!==!1?e.projection:LE(e.parent)}function Uf(e,{forwardMotionProps:t=!1}={},n,r){n&&Yk(n);const a=b1(e)?x5:p5;function l(g,y){let x;const w={...R.useContext(g1),...g,layoutId:C5(g)},{isStatic:E}=w,N=e5(g),I=a(g,E);if(!E&&qg){N5();const D=S5(w);x=D.MeasureLayout,N.visualElement=b5(e,I,w,r,D.ProjectionNode)}return d.jsxs(Oh.Provider,{value:N,children:[x&&N.visualElement?d.jsx(x,{visualElement:N.visualElement,...w}):null,f5(e,g,v5(I,N.visualElement,y),I,E,t)]})}l.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const h=R.forwardRef(l);return h[y5]=e,h}function C5({layoutId:e}){const t=R.useContext(Wg).id;return t&&e!==void 0?t+"-"+e:e}function N5(e,t){R.useContext(SE).strict}function S5(e){const{drag:t,layout:n}=ml;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function _5(e,t){if(typeof Proxy>"u")return Uf;const n=new Map,r=(l,h)=>Uf(l,h,e,t),a=(l,h)=>r(l,h);return new Proxy(a,{get:(l,h)=>h==="create"?r:(n.has(h)||n.set(h,Uf(h,void 0,e,t)),n.get(h))})}function BE({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function A5({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function T5(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Vf(e){return e===void 0||e===1}function wm({scale:e,scaleX:t,scaleY:n}){return!Vf(e)||!Vf(t)||!Vf(n)}function ka(e){return wm(e)||FE(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function FE(e){return ay(e.x)||ay(e.y)}function ay(e){return e&&e!=="0%"}function Jd(e,t,n){const r=e-n,a=t*r;return n+a}function oy(e,t,n,r,a){return a!==void 0&&(e=Jd(e,a,r)),Jd(e,n,r)+t}function bm(e,t=0,n=1,r,a){e.min=oy(e.min,t,n,r,a),e.max=oy(e.max,t,n,r,a)}function UE(e,{x:t,y:n}){bm(e.x,t.translate,t.scale,t.originPoint),bm(e.y,n.translate,n.scale,n.originPoint)}const ly=.999999999999,cy=1.0000000000001;function I5(e,t,n,r=!1){const a=n.length;if(!a)return;t.x=t.y=1;let l,h;for(let g=0;g<a;g++){l=n[g],h=l.projectionDelta;const{visualElement:y}=l.options;y&&y.props.style&&y.props.style.display==="contents"||(r&&l.options.layoutScroll&&l.scroll&&l!==l.root&&Ho(e,{x:-l.scroll.offset.x,y:-l.scroll.offset.y}),h&&(t.x*=h.x.scale,t.y*=h.y.scale,UE(e,h)),r&&ka(l.latestValues)&&Ho(e,l.latestValues))}t.x<cy&&t.x>ly&&(t.x=1),t.y<cy&&t.y>ly&&(t.y=1)}function $o(e,t){e.min=e.min+t,e.max=e.max+t}function uy(e,t,n,r,a=.5){const l=en(e.min,e.max,a);bm(e,t,n,l,r)}function Ho(e,t){uy(e.x,t.x,t.scaleX,t.scale,t.originX),uy(e.y,t.y,t.scaleY,t.scale,t.originY)}function VE(e,t){return BE(T5(e.getBoundingClientRect(),t))}function j5(e,t,n){const r=VE(e,n),{scroll:a}=t;return a&&($o(r.x,a.offset.x),$o(r.y,a.offset.y)),r}const dy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wo=()=>({x:dy(),y:dy()}),hy=()=>({min:0,max:0}),fn=()=>({x:hy(),y:hy()}),Em={current:null},zE={current:!1};function k5(){if(zE.current=!0,!!qg)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Em.current=e.matches;e.addEventListener("change",t),t()}else Em.current=!1}const R5=new WeakMap;function M5(e,t,n){for(const r in t){const a=t[r],l=n[r];if(qn(a))e.addValue(r,a);else if(qn(l))e.addValue(r,fl(a,{owner:e}));else if(l!==a)if(e.hasValue(r)){const h=e.getValue(r);h.liveStyle===!0?h.jump(a):h.hasAnimated||h.set(a)}else{const h=e.getStaticValue(r);e.addValue(r,fl(h!==void 0?h:a,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const fy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D5{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:a,blockInitialAnimation:l,visualState:h},g={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=u1,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const N=xr.now();this.renderScheduledAt<N&&(this.renderScheduledAt=N,Qt.render(this.render,!1,!0))};const{latestValues:y,renderState:x}=h;this.latestValues=y,this.baseTarget={...y},this.initialValues=n.initial?{...y}:{},this.renderState=x,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=a,this.options=g,this.blockInitialAnimation=!!l,this.isControllingVariants=Lh(n),this.isVariantNode=AE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:w,...E}=this.scrapeMotionValuesFromProps(n,{},this);for(const N in E){const I=E[N];y[N]!==void 0&&qn(I)&&I.set(y[N],!1)}}mount(t){this.current=t,R5.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),zE.current||k5(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Em.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),ra(this.notifyUpdate),ra(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Al.has(t);r&&this.onBindTransform&&this.onBindTransform();const a=n.on("change",g=>{this.latestValues[t]=g,this.props.onUpdate&&Qt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),l=n.on("renderRequest",this.scheduleRender);let h;window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{a(),l(),h&&h(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in ml){const n=ml[t];if(!n)continue;const{isEnabled:r,Feature:a}=n;if(!this.features[t]&&a&&r(this.props)&&(this.features[t]=new a(this)),this.features[t]){const l=this.features[t];l.isMounted?l.update():(l.mount(),l.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):fn()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<fy.length;r++){const a=fy[r];this.propEventSubscriptions[a]&&(this.propEventSubscriptions[a](),delete this.propEventSubscriptions[a]);const l="on"+a,h=t[l];h&&(this.propEventSubscriptions[a]=this.on(a,h))}this.prevMotionValues=M5(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=fl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(Db(r)||Pb(r))?r=parseFloat(r):!Hk(r)&&sa.test(n)&&(r=xE(t,n)),this.setBaseTarget(t,qn(r)?r.get():r)),qn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var l;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=E1(this.props,n,(l=this.presenceContext)==null?void 0:l.custom);h&&(r=h[t])}if(n&&r!==void 0)return r;const a=this.getBaseTargetFromProps(this.props,t);return a!==void 0&&!qn(a)?a:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Zg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){f1.render(this.render)}}class $E extends D5{constructor(){super(...arguments),this.KeyframeResolver=Rk}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;qn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function HE(e,{style:t,vars:n},r,a){const l=e.style;let h;for(h in t)l[h]=t[h];a==null||a.applyProjectionStyles(l,r);for(h in n)l.setProperty(h,n[h])}function O5(e){return window.getComputedStyle(e)}class P5 extends $E{constructor(){super(...arguments),this.type="html",this.renderInstance=HE}readValueFromInstance(t,n){var r;if(Al.has(n))return(r=this.projection)!=null&&r.isProjecting?mm(n):Qj(t,n);{const a=O5(t),l=(t1(n)?a.getPropertyValue(n):a[n])||0;return typeof l=="string"?l.trim():l}}measureInstanceViewportBox(t,{transformPagePoint:n}){return VE(t,n)}build(t,n,r){v1(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return C1(t,n,r)}}const WE=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L5(e,t,n,r){HE(e,t,void 0,r);for(const a in t.attrs)e.setAttribute(WE.has(a)?a:N1(a),t.attrs[a])}class B5 extends $E{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=fn}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Al.has(n)){const r=pE(n);return r&&r.default||0}return n=WE.has(n)?n:N1(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return DE(t,n,r)}build(t,n,r){jE(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,a){L5(t,n,r,a)}mount(t){this.isSVGTag=RE(t.tagName),super.mount(t)}}const F5=(e,t)=>b1(e)?new B5(t):new P5(t,{allowProjection:e!==R.Fragment});function Kc(e,t,n){const r=e.getProps();return E1(r,t,n!==void 0?n:r.custom,e)}const Cm=e=>Array.isArray(e);function U5(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,fl(n))}function V5(e){return Cm(e)?e[e.length-1]||0:e}function z5(e,t){const n=Kc(e,t);let{transitionEnd:r={},transition:a={},...l}=n||{};l={...l,...r};for(const h in l){const g=V5(l[h]);U5(e,h,g)}}function $5(e){return!!(qn(e)&&e.add)}function Nm(e,t){const n=e.getValue("willChange");if($5(n))return n.add(t);if(!n&&vi.WillChange){const r=new vi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function GE(e){return e.props[OE]}const H5=e=>e!==null;function W5(e,{repeat:t,repeatType:n="loop"},r){const a=e.filter(H5),l=t&&n!=="loop"&&t%2===1?0:a.length-1;return a[l]}const G5={type:"spring",stiffness:500,damping:25,restSpeed:10},q5=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),K5={type:"keyframes",duration:.8},Y5={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},X5=(e,{keyframes:t})=>t.length>2?K5:Al.has(e)?e.startsWith("scale")?q5(t[1]):G5:Y5;function Q5({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:a,repeat:l,repeatType:h,repeatDelay:g,from:y,elapsed:x,...w}){return!!Object.keys(w).length}const S1=(e,t,n,r={},a,l)=>h=>{const g=d1(r,e)||{},y=g.delay||r.delay||0;let{elapsed:x=0}=r;x=x-$s(y);const w={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...g,delay:-x,onUpdate:N=>{t.set(N),g.onUpdate&&g.onUpdate(N)},onComplete:()=>{h(),g.onComplete&&g.onComplete()},name:e,motionValue:t,element:l?void 0:a};Q5(g)||Object.assign(w,X5(e,w)),w.duration&&(w.duration=$s(w.duration)),w.repeatDelay&&(w.repeatDelay=$s(w.repeatDelay)),w.from!==void 0&&(w.keyframes[0]=w.from);let E=!1;if((w.type===!1||w.duration===0&&!w.repeatDelay)&&(w.duration=0,w.delay===0&&(E=!0)),(vi.instantAnimations||vi.skipAnimations)&&(E=!0,w.duration=0,w.delay=0),w.allowFlatten=!g.type&&!g.ease,E&&!l&&t.get()!==void 0){const N=W5(w.keyframes,g);if(N!==void 0){Qt.update(()=>{w.onUpdate(N),w.onComplete()});return}}return g.isSync?new c1(w):new wk(w)};function Z5({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function qE(e,t,{delay:n=0,transitionOverride:r,type:a}={}){let{transition:l=e.getDefaultTransition(),transitionEnd:h,...g}=t;r&&(l=r);const y=[],x=a&&e.animationState&&e.animationState.getState()[a];for(const w in g){const E=e.getValue(w,e.latestValues[w]??null),N=g[w];if(N===void 0||x&&Z5(x,w))continue;const I={delay:n,...d1(l||{},w)},D=E.get();if(D!==void 0&&!E.isAnimating&&!Array.isArray(N)&&N===D&&!I.velocity)continue;let O=!1;if(window.MotionHandoffAnimation){const T=GE(e);if(T){const A=window.MotionHandoffAnimation(T,w,Qt);A!==null&&(I.startTime=A,O=!0)}}Nm(e,w),E.start(S1(w,E,N,e.shouldReduceMotion&&fE.has(w)?{type:!1}:I,e,O));const V=E.animation;V&&y.push(V)}return h&&Promise.all(y).then(()=>{Qt.update(()=>{h&&z5(e,h)})}),y}function Sm(e,t,n={}){var y;const r=Kc(e,t,n.type==="exit"?(y=e.presenceContext)==null?void 0:y.custom:void 0);let{transition:a=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(a=n.transitionOverride);const l=r?()=>Promise.all(qE(e,r,n)):()=>Promise.resolve(),h=e.variantChildren&&e.variantChildren.size?(x=0)=>{const{delayChildren:w=0,staggerChildren:E,staggerDirection:N}=a;return J5(e,t,x,w,E,N,n)}:()=>Promise.resolve(),{when:g}=a;if(g){const[x,w]=g==="beforeChildren"?[l,h]:[h,l];return x().then(()=>w())}else return Promise.all([l(),h(n.delay)])}function J5(e,t,n=0,r=0,a=0,l=1,h){const g=[],y=e.variantChildren.size,x=(y-1)*a,w=typeof r=="function",E=w?N=>r(N,y):l===1?(N=0)=>N*a:(N=0)=>x-N*a;return Array.from(e.variantChildren).sort(eR).forEach((N,I)=>{N.notify("AnimationStart",t),g.push(Sm(N,t,{...h,delay:n+(w?0:r)+E(I)}).then(()=>N.notify("AnimationComplete",t)))}),Promise.all(g)}function eR(e,t){return e.sortNodePosition(t)}function tR(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const a=t.map(l=>Sm(e,l,n));r=Promise.all(a)}else if(typeof t=="string")r=Sm(e,t,n);else{const a=typeof t=="function"?Kc(e,t,n.custom):t;r=Promise.all(qE(e,a,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function KE(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const nR=y1.length;function YE(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?YE(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<nR;n++){const r=y1[n],a=e.props[r];(Gc(a)||a===!1)&&(t[r]=a)}return t}const rR=[...x1].reverse(),sR=x1.length;function iR(e){return t=>Promise.all(t.map(({animation:n,options:r})=>tR(e,n,r)))}function aR(e){let t=iR(e),n=my(),r=!0;const a=y=>(x,w)=>{var N;const E=Kc(e,w,y==="exit"?(N=e.presenceContext)==null?void 0:N.custom:void 0);if(E){const{transition:I,transitionEnd:D,...O}=E;x={...x,...O,...D}}return x};function l(y){t=y(e)}function h(y){const{props:x}=e,w=YE(e.parent)||{},E=[],N=new Set;let I={},D=1/0;for(let V=0;V<sR;V++){const T=rR[V],A=n[T],_=x[T]!==void 0?x[T]:w[T],M=Gc(_),H=T===y?A.isActive:null;H===!1&&(D=V);let $=_===w[T]&&_!==x[T]&&M;if($&&r&&e.manuallyAnimateOnMount&&($=!1),A.protectedKeys={...I},!A.isActive&&H===null||!_&&!A.prevProp||Ph(_)||typeof _=="boolean")continue;const F=oR(A.prevProp,_);let U=F||T===y&&A.isActive&&!$&&M||V>D&&M,q=!1;const ne=Array.isArray(_)?_:[_];let he=ne.reduce(a(T),{});H===!1&&(he={});const{prevResolvedValues:me={}}=A,re={...me,...he},ae=se=>{U=!0,N.has(se)&&(q=!0,N.delete(se)),A.needsAnimating[se]=!0;const Q=e.getValue(se);Q&&(Q.liveStyle=!1)};for(const se in re){const Q=he[se],ce=me[se];if(I.hasOwnProperty(se))continue;let J=!1;Cm(Q)&&Cm(ce)?J=!KE(Q,ce):J=Q!==ce,J?Q!=null?ae(se):N.add(se):Q!==void 0&&N.has(se)?ae(se):A.protectedKeys[se]=!0}A.prevProp=_,A.prevResolvedValues=he,A.isActive&&(I={...I,...he}),r&&e.blockInitialAnimation&&(U=!1),U&&(!($&&F)||q)&&E.push(...ne.map(se=>({animation:se,options:{type:T}})))}if(N.size){const V={};if(typeof x.initial!="boolean"){const T=Kc(e,Array.isArray(x.initial)?x.initial[0]:x.initial);T&&T.transition&&(V.transition=T.transition)}N.forEach(T=>{const A=e.getBaseTarget(T),_=e.getValue(T);_&&(_.liveStyle=!0),V[T]=A??null}),E.push({animation:V})}let O=!!E.length;return r&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(O=!1),r=!1,O?t(E):Promise.resolve()}function g(y,x){var E;if(n[y].isActive===x)return Promise.resolve();(E=e.variantChildren)==null||E.forEach(N=>{var I;return(I=N.animationState)==null?void 0:I.setActive(y,x)}),n[y].isActive=x;const w=h(y);for(const N in n)n[N].protectedKeys={};return w}return{animateChanges:h,setActive:g,setAnimateFunction:l,getState:()=>n,reset:()=>{n=my(),r=!0}}}function oR(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!KE(t,e):!1}function Aa(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function my(){return{animate:Aa(!0),whileInView:Aa(),whileHover:Aa(),whileTap:Aa(),whileDrag:Aa(),whileFocus:Aa(),exit:Aa()}}class da{constructor(t){this.isMounted=!1,this.node=t}update(){}}class lR extends da{constructor(t){super(t),t.animationState||(t.animationState=aR(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ph(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let cR=0;class uR extends da{constructor(){super(...arguments),this.id=cR++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const a=this.node.animationState.setActive("exit",!t);n&&!t&&a.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const dR={animation:{Feature:lR},exit:{Feature:uR}};function Yc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function hu(e){return{point:{x:e.pageX,y:e.pageY}}}const hR=e=>t=>m1(t)&&e(t,hu(t));function vc(e,t,n,r){return Yc(e,t,hR(n),r)}const XE=1e-4,fR=1-XE,mR=1+XE,QE=.01,gR=0-QE,pR=0+QE;function rr(e){return e.max-e.min}function xR(e,t,n){return Math.abs(e-t)<=n}function gy(e,t,n,r=.5){e.origin=r,e.originPoint=en(t.min,t.max,e.origin),e.scale=rr(n)/rr(t),e.translate=en(n.min,n.max,e.origin)-e.originPoint,(e.scale>=fR&&e.scale<=mR||isNaN(e.scale))&&(e.scale=1),(e.translate>=gR&&e.translate<=pR||isNaN(e.translate))&&(e.translate=0)}function wc(e,t,n,r){gy(e.x,t.x,n.x,r?r.originX:void 0),gy(e.y,t.y,n.y,r?r.originY:void 0)}function py(e,t,n){e.min=n.min+t.min,e.max=e.min+rr(t)}function yR(e,t,n){py(e.x,t.x,n.x),py(e.y,t.y,n.y)}function xy(e,t,n){e.min=t.min-n.min,e.max=e.min+rr(t)}function bc(e,t,n){xy(e.x,t.x,n.x),xy(e.y,t.y,n.y)}function Kr(e){return[e("x"),e("y")]}const ZE=({current:e})=>e?e.ownerDocument.defaultView:null,yy=(e,t)=>Math.abs(e-t);function vR(e,t){const n=yy(e.x,t.x),r=yy(e.y,t.y);return Math.sqrt(n**2+r**2)}class JE{constructor(t,n,{transformPagePoint:r,contextWindow:a=window,dragSnapToOrigin:l=!1,distanceThreshold:h=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const N=$f(this.lastMoveEventInfo,this.history),I=this.startEvent!==null,D=vR(N.offset,{x:0,y:0})>=this.distanceThreshold;if(!I&&!D)return;const{point:O}=N,{timestamp:V}=On;this.history.push({...O,timestamp:V});const{onStart:T,onMove:A}=this.handlers;I||(T&&T(this.lastMoveEvent,N),this.startEvent=this.lastMoveEvent),A&&A(this.lastMoveEvent,N)},this.handlePointerMove=(N,I)=>{this.lastMoveEvent=N,this.lastMoveEventInfo=zf(I,this.transformPagePoint),Qt.update(this.updatePoint,!0)},this.handlePointerUp=(N,I)=>{this.end();const{onEnd:D,onSessionEnd:O,resumeAnimation:V}=this.handlers;if(this.dragSnapToOrigin&&V&&V(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=$f(N.type==="pointercancel"?this.lastMoveEventInfo:zf(I,this.transformPagePoint),this.history);this.startEvent&&D&&D(N,T),O&&O(N,T)},!m1(t))return;this.dragSnapToOrigin=l,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=h,this.contextWindow=a||window;const g=hu(t),y=zf(g,this.transformPagePoint),{point:x}=y,{timestamp:w}=On;this.history=[{...x,timestamp:w}];const{onSessionStart:E}=n;E&&E(t,$f(y,this.history)),this.removeListeners=cu(vc(this.contextWindow,"pointermove",this.handlePointerMove),vc(this.contextWindow,"pointerup",this.handlePointerUp),vc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),ra(this.updatePoint)}}function zf(e,t){return t?{point:t(e.point)}:e}function vy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $f({point:e},t){return{point:e,delta:vy(e,eC(t)),offset:vy(e,wR(t)),velocity:bR(t,.1)}}function wR(e){return e[0]}function eC(e){return e[e.length-1]}function bR(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const a=eC(e);for(;n>=0&&(r=e[n],!(a.timestamp-r.timestamp>$s(t)));)n--;if(!r)return{x:0,y:0};const l=Hs(a.timestamp-r.timestamp);if(l===0)return{x:0,y:0};const h={x:(a.x-r.x)/l,y:(a.y-r.y)/l};return h.x===1/0&&(h.x=0),h.y===1/0&&(h.y=0),h}function ER(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?en(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?en(n,e,r.max):Math.min(e,n)),e}function wy(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function CR(e,{top:t,left:n,bottom:r,right:a}){return{x:wy(e.x,n,a),y:wy(e.y,t,r)}}function by(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function NR(e,t){return{x:by(e.x,t.x),y:by(e.y,t.y)}}function SR(e,t){let n=.5;const r=rr(e),a=rr(t);return a>r?n=$c(t.min,t.max-r,e.min):r>a&&(n=$c(e.min,e.max-a,t.min)),yi(0,1,n)}function _R(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const _m=.35;function AR(e=_m){return e===!1?e=0:e===!0&&(e=_m),{x:Ey(e,"left","right"),y:Ey(e,"top","bottom")}}function Ey(e,t,n){return{min:Cy(e,t),max:Cy(e,n)}}function Cy(e,t){return typeof e=="number"?e:e[t]||0}const TR=new WeakMap;class IR{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=fn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:a}=this.visualElement;if(a&&a.isPresent===!1)return;const l=E=>{const{dragSnapToOrigin:N}=this.getProps();N?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(hu(E).point)},h=(E,N)=>{const{drag:I,dragPropagation:D,onDragStart:O}=this.getProps();if(I&&!D&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Pk(I),!this.openDragLock))return;this.latestPointerEvent=E,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Kr(T=>{let A=this.getAxisMotionValue(T).get()||0;if(Ws.test(A)){const{projection:_}=this.visualElement;if(_&&_.layout){const M=_.layout.layoutBox[T];M&&(A=rr(M)*(parseFloat(A)/100))}}this.originPoint[T]=A}),O&&Qt.postRender(()=>O(E,N)),Nm(this.visualElement,"transform");const{animationState:V}=this.visualElement;V&&V.setActive("whileDrag",!0)},g=(E,N)=>{this.latestPointerEvent=E,this.latestPanInfo=N;const{dragPropagation:I,dragDirectionLock:D,onDirectionLock:O,onDrag:V}=this.getProps();if(!I&&!this.openDragLock)return;const{offset:T}=N;if(D&&this.currentDirection===null){this.currentDirection=jR(T),this.currentDirection!==null&&O&&O(this.currentDirection);return}this.updateAxis("x",N.point,T),this.updateAxis("y",N.point,T),this.visualElement.render(),V&&V(E,N)},y=(E,N)=>{this.latestPointerEvent=E,this.latestPanInfo=N,this.stop(E,N),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Kr(E=>{var N;return this.getAnimationState(E)==="paused"&&((N=this.getAxisMotionValue(E).animation)==null?void 0:N.play())}),{dragSnapToOrigin:w}=this.getProps();this.panSession=new JE(t,{onSessionStart:l,onStart:h,onMove:g,onSessionEnd:y,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:w,distanceThreshold:r,contextWindow:ZE(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,a=n||this.latestPanInfo,l=this.isDragging;if(this.cancel(),!l||!a||!r)return;const{velocity:h}=a;this.startAnimation(h);const{onDragEnd:g}=this.getProps();g&&Qt.postRender(()=>g(r,a))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:a}=this.getProps();if(!r||!Ku(t,a,this.currentDirection))return;const l=this.getAxisMotionValue(t);let h=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(h=ER(h,this.constraints[t],this.elastic[t])),l.set(h)}resolveConstraints(){var l;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(l=this.visualElement.projection)==null?void 0:l.layout,a=this.constraints;t&&zo(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=CR(r.layoutBox,t):this.constraints=!1,this.elastic=AR(n),a!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Kr(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=_R(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!zo(t))return!1;const r=t.current,{projection:a}=this.visualElement;if(!a||!a.layout)return!1;const l=j5(r,a.root,this.visualElement.getTransformPagePoint());let h=NR(a.layout.layoutBox,l);if(n){const g=n(A5(h));this.hasMutatedConstraints=!!g,g&&(h=BE(g))}return h}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:a,dragTransition:l,dragSnapToOrigin:h,onDragTransitionEnd:g}=this.getProps(),y=this.constraints||{},x=Kr(w=>{if(!Ku(w,n,this.currentDirection))return;let E=y&&y[w]||{};h&&(E={min:0,max:0});const N=a?200:1e6,I=a?40:1e7,D={type:"inertia",velocity:r?t[w]:0,bounceStiffness:N,bounceDamping:I,timeConstant:750,restDelta:1,restSpeed:10,...l,...E};return this.startAxisValueAnimation(w,D)});return Promise.all(x).then(g)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Nm(this.visualElement,t),r.start(S1(t,r,0,n,this.visualElement,!1))}stopAnimation(){Kr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Kr(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),a=r[n];return a||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Kr(n=>{const{drag:r}=this.getProps();if(!Ku(n,r,this.currentDirection))return;const{projection:a}=this.visualElement,l=this.getAxisMotionValue(n);if(a&&a.layout){const{min:h,max:g}=a.layout.layoutBox[n];l.set(t[n]-en(h,g,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!zo(n)||!r||!this.constraints)return;this.stopAnimation();const a={x:0,y:0};Kr(h=>{const g=this.getAxisMotionValue(h);if(g&&this.constraints!==!1){const y=g.get();a[h]=SR({min:y,max:y},this.constraints[h])}});const{transformTemplate:l}=this.visualElement.getProps();this.visualElement.current.style.transform=l?l({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Kr(h=>{if(!Ku(h,t,null))return;const g=this.getAxisMotionValue(h),{min:y,max:x}=this.constraints[h];g.set(en(y,x,a[h]))})}addListeners(){if(!this.visualElement.current)return;TR.set(this.visualElement,this);const t=this.visualElement.current,n=vc(t,"pointerdown",y=>{const{drag:x,dragListener:w=!0}=this.getProps();x&&w&&this.start(y)}),r=()=>{const{dragConstraints:y}=this.getProps();zo(y)&&y.current&&(this.constraints=this.resolveRefConstraints())},{projection:a}=this.visualElement,l=a.addEventListener("measure",r);a&&!a.layout&&(a.root&&a.root.updateScroll(),a.updateLayout()),Qt.read(r);const h=Yc(window,"resize",()=>this.scalePositionWithinConstraints()),g=a.addEventListener("didUpdate",({delta:y,hasLayoutChanged:x})=>{this.isDragging&&x&&(Kr(w=>{const E=this.getAxisMotionValue(w);E&&(this.originPoint[w]+=y[w].translate,E.set(E.get()+y[w].translate))}),this.visualElement.render())});return()=>{h(),n(),l(),g&&g()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:a=!1,dragConstraints:l=!1,dragElastic:h=_m,dragMomentum:g=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:a,dragConstraints:l,dragElastic:h,dragMomentum:g}}}function Ku(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function jR(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class kR extends da{constructor(t){super(t),this.removeGroupControls=Jr,this.removeListeners=Jr,this.controls=new IR(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Jr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Ny=e=>(t,n)=>{e&&Qt.postRender(()=>e(t,n))};class RR extends da{constructor(){super(...arguments),this.removePointerDownListener=Jr}onPointerDown(t){this.session=new JE(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:ZE(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:a}=this.node.getProps();return{onSessionStart:Ny(t),onStart:Ny(n),onMove:r,onEnd:(l,h)=>{delete this.session,a&&Qt.postRender(()=>a(l,h))}}}mount(){this.removePointerDownListener=vc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const fd={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sy(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ql={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ye.test(e))e=parseFloat(e);else return e;const n=Sy(e,t.target.x),r=Sy(e,t.target.y);return`${n}% ${r}%`}},MR={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,a=sa.parse(e);if(a.length>5)return r;const l=sa.createTransformer(e),h=typeof a[0]!="number"?1:0,g=n.x.scale*t.x,y=n.y.scale*t.y;a[0+h]/=g,a[1+h]/=y;const x=en(g,y,.5);return typeof a[2+h]=="number"&&(a[2+h]/=x),typeof a[3+h]=="number"&&(a[3+h]/=x),l(a)}};let _y=!1;class DR extends R.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:a}=this.props,{projection:l}=t;t5(OR),l&&(n.group&&n.group.add(l),r&&r.register&&a&&r.register(l),_y&&l.root.didUpdate(),l.addEventListener("animationComplete",()=>{this.safeToRemove()}),l.setOptions({...l.options,onExitComplete:()=>this.safeToRemove()})),fd.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:a,isPresent:l}=this.props,{projection:h}=r;return h&&(h.isPresent=l,_y=!0,a||t.layoutDependency!==n||n===void 0||t.isPresent!==l?h.willUpdate():this.safeToRemove(),t.isPresent!==l&&(l?h.promote():h.relegate()||Qt.postRender(()=>{const g=h.getStack();(!g||!g.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),f1.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:a}=t;a&&(a.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(a),r&&r.deregister&&r.deregister(a))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function tC(e){const[t,n]=NE(),r=R.useContext(Wg);return d.jsx(DR,{...e,layoutGroup:r,switchLayoutGroup:R.useContext(PE),isPresent:t,safeToRemove:n})}const OR={borderRadius:{...Ql,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ql,borderTopRightRadius:Ql,borderBottomLeftRadius:Ql,borderBottomRightRadius:Ql,boxShadow:MR};function PR(e,t,n){const r=qn(e)?e:fl(e);return r.start(S1("",r,t,n)),r.animation}const LR=(e,t)=>e.depth-t.depth;class BR{constructor(){this.children=[],this.isDirty=!1}add(t){Kg(this.children,t),this.isDirty=!0}remove(t){Yg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(LR),this.isDirty=!1,this.children.forEach(t)}}function FR(e,t){const n=xr.now(),r=({timestamp:a})=>{const l=a-n;l>=t&&(ra(r),e(l-t))};return Qt.setup(r,!0),()=>ra(r)}const nC=["TopLeft","TopRight","BottomLeft","BottomRight"],UR=nC.length,Ay=e=>typeof e=="string"?parseFloat(e):e,Ty=e=>typeof e=="number"||Ye.test(e);function VR(e,t,n,r,a,l){a?(e.opacity=en(0,n.opacity??1,zR(r)),e.opacityExit=en(t.opacity??1,0,$R(r))):l&&(e.opacity=en(t.opacity??1,n.opacity??1,r));for(let h=0;h<UR;h++){const g=`border${nC[h]}Radius`;let y=Iy(t,g),x=Iy(n,g);if(y===void 0&&x===void 0)continue;y||(y=0),x||(x=0),y===0||x===0||Ty(y)===Ty(x)?(e[g]=Math.max(en(Ay(y),Ay(x),r),0),(Ws.test(x)||Ws.test(y))&&(e[g]+="%")):e[g]=x}(t.rotate||n.rotate)&&(e.rotate=en(t.rotate||0,n.rotate||0,r))}function Iy(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const zR=rC(0,.5,Hb),$R=rC(.5,.95,Jr);function rC(e,t,n){return r=>r<e?0:r>t?1:n($c(e,t,r))}function jy(e,t){e.min=t.min,e.max=t.max}function qr(e,t){jy(e.x,t.x),jy(e.y,t.y)}function ky(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Ry(e,t,n,r,a){return e-=t,e=Jd(e,1/n,r),a!==void 0&&(e=Jd(e,1/a,r)),e}function HR(e,t=0,n=1,r=.5,a,l=e,h=e){if(Ws.test(t)&&(t=parseFloat(t),t=en(h.min,h.max,t/100)-h.min),typeof t!="number")return;let g=en(l.min,l.max,r);e===l&&(g-=t),e.min=Ry(e.min,t,n,g,a),e.max=Ry(e.max,t,n,g,a)}function My(e,t,[n,r,a],l,h){HR(e,t[n],t[r],t[a],t.scale,l,h)}const WR=["x","scaleX","originX"],GR=["y","scaleY","originY"];function Dy(e,t,n,r){My(e.x,t,WR,n?n.x:void 0,r?r.x:void 0),My(e.y,t,GR,n?n.y:void 0,r?r.y:void 0)}function Oy(e){return e.translate===0&&e.scale===1}function sC(e){return Oy(e.x)&&Oy(e.y)}function Py(e,t){return e.min===t.min&&e.max===t.max}function qR(e,t){return Py(e.x,t.x)&&Py(e.y,t.y)}function Ly(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function iC(e,t){return Ly(e.x,t.x)&&Ly(e.y,t.y)}function By(e){return rr(e.x)/rr(e.y)}function Fy(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class KR{constructor(){this.members=[]}add(t){Kg(this.members,t),t.scheduleRender()}remove(t){if(Yg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(a=>t===a);if(n===0)return!1;let r;for(let a=n;a>=0;a--){const l=this.members[a];if(l.isPresent!==!1){r=l;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:a}=t.options;a===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function YR(e,t,n){let r="";const a=e.x.translate/t.x,l=e.y.translate/t.y,h=(n==null?void 0:n.z)||0;if((a||l||h)&&(r=`translate3d(${a}px, ${l}px, ${h}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:x,rotate:w,rotateX:E,rotateY:N,skewX:I,skewY:D}=n;x&&(r=`perspective(${x}px) ${r}`),w&&(r+=`rotate(${w}deg) `),E&&(r+=`rotateX(${E}deg) `),N&&(r+=`rotateY(${N}deg) `),I&&(r+=`skewX(${I}deg) `),D&&(r+=`skewY(${D}deg) `)}const g=e.x.scale*t.x,y=e.y.scale*t.y;return(g!==1||y!==1)&&(r+=`scale(${g}, ${y})`),r||"none"}const Hf=["","X","Y","Z"],XR=1e3;let QR=0;function Wf(e,t,n,r){const{latestValues:a}=t;a[e]&&(n[e]=a[e],t.setStaticValue(e,0),r&&(r[e]=0))}function aC(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=GE(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:a,layoutId:l}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Qt,!(a||l))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&aC(r)}function oC({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:a}){return class{constructor(h={},g=t==null?void 0:t()){this.id=QR++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eM),this.nodes.forEach(sM),this.nodes.forEach(iM),this.nodes.forEach(tM)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=h,this.root=g?g.root||g:this,this.path=g?[...g.path,g]:[],this.parent=g,this.depth=g?g.depth+1:0;for(let y=0;y<this.path.length;y++)this.path[y].shouldResetTransform=!0;this.root===this&&(this.nodes=new BR)}addEventListener(h,g){return this.eventHandlers.has(h)||this.eventHandlers.set(h,new Zg),this.eventHandlers.get(h).add(g)}notifyListeners(h,...g){const y=this.eventHandlers.get(h);y&&y.notify(...g)}hasListeners(h){return this.eventHandlers.has(h)}mount(h){if(this.instance)return;this.isSVG=CE(h)&&!zk(h),this.instance=h;const{layoutId:g,layout:y,visualElement:x}=this.options;if(x&&!x.current&&x.mount(h),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(y||g)&&(this.isLayoutDirty=!0),e){let w,E=0;const N=()=>this.root.updateBlockedByResize=!1;Qt.read(()=>{E=window.innerWidth}),e(h,()=>{const I=window.innerWidth;I!==E&&(E=I,this.root.updateBlockedByResize=!0,w&&w(),w=FR(N,250),fd.hasAnimatedSinceResize&&(fd.hasAnimatedSinceResize=!1,this.nodes.forEach(zy)))})}g&&this.root.registerSharedNode(g,this),this.options.animate!==!1&&x&&(g||y)&&this.addEventListener("didUpdate",({delta:w,hasLayoutChanged:E,hasRelativeLayoutChanged:N,layout:I})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const D=this.options.transition||x.getDefaultTransition()||uM,{onLayoutAnimationStart:O,onLayoutAnimationComplete:V}=x.getProps(),T=!this.targetLayout||!iC(this.targetLayout,I),A=!E&&N;if(this.options.layoutRoot||this.resumeFrom||A||E&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...d1(D,"layout"),onPlay:O,onComplete:V};(x.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(w,A)}else E||zy(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=I})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const h=this.getStack();h&&h.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),ra(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(aM),this.animationId++)}getTransformTemplate(){const{visualElement:h}=this.options;return h&&h.getProps().transformTemplate}willUpdate(h=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&aC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let w=0;w<this.path.length;w++){const E=this.path[w];E.shouldResetTransform=!0,E.updateScroll("snapshot"),E.options.layoutRoot&&E.willUpdate(!1)}const{layoutId:g,layout:y}=this.options;if(g===void 0&&!y)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),h&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Uy);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Vy);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rM),this.nodes.forEach(ZR),this.nodes.forEach(JR)):this.nodes.forEach(Vy),this.clearAllSnapshots();const g=xr.now();On.delta=yi(0,1e3/60,g-On.timestamp),On.timestamp=g,On.isProcessing=!0,Df.update.process(On),Df.preRender.process(On),Df.render.process(On),On.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,f1.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nM),this.sharedNodes.forEach(oM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Qt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Qt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!rr(this.snapshot.measuredBox.x)&&!rr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let y=0;y<this.path.length;y++)this.path[y].updateScroll();const h=this.layout;this.layout=this.measure(!1),this.layoutCorrected=fn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:g}=this.options;g&&g.notify("LayoutMeasure",this.layout.layoutBox,h?h.layoutBox:void 0)}updateScroll(h="measure"){let g=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===h&&(g=!1),g&&this.instance){const y=r(this.instance);this.scroll={animationId:this.root.animationId,phase:h,isRoot:y,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:y}}}resetTransform(){if(!a)return;const h=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,g=this.projectionDelta&&!sC(this.projectionDelta),y=this.getTransformTemplate(),x=y?y(this.latestValues,""):void 0,w=x!==this.prevTransformTemplateValue;h&&this.instance&&(g||ka(this.latestValues)||w)&&(a(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(h=!0){const g=this.measurePageBox();let y=this.removeElementScroll(g);return h&&(y=this.removeTransform(y)),dM(y),{animationId:this.root.animationId,measuredBox:g,layoutBox:y,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:h}=this.options;if(!h)return fn();const g=h.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(hM))){const{scroll:w}=this.root;w&&($o(g.x,w.offset.x),$o(g.y,w.offset.y))}return g}removeElementScroll(h){var y;const g=fn();if(qr(g,h),(y=this.scroll)!=null&&y.wasRoot)return g;for(let x=0;x<this.path.length;x++){const w=this.path[x],{scroll:E,options:N}=w;w!==this.root&&E&&N.layoutScroll&&(E.wasRoot&&qr(g,h),$o(g.x,E.offset.x),$o(g.y,E.offset.y))}return g}applyTransform(h,g=!1){const y=fn();qr(y,h);for(let x=0;x<this.path.length;x++){const w=this.path[x];!g&&w.options.layoutScroll&&w.scroll&&w!==w.root&&Ho(y,{x:-w.scroll.offset.x,y:-w.scroll.offset.y}),ka(w.latestValues)&&Ho(y,w.latestValues)}return ka(this.latestValues)&&Ho(y,this.latestValues),y}removeTransform(h){const g=fn();qr(g,h);for(let y=0;y<this.path.length;y++){const x=this.path[y];if(!x.instance||!ka(x.latestValues))continue;wm(x.latestValues)&&x.updateSnapshot();const w=fn(),E=x.measurePageBox();qr(w,E),Dy(g,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,w)}return ka(this.latestValues)&&Dy(g,this.latestValues),g}setTargetDelta(h){this.targetDelta=h,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(h){this.options={...this.options,...h,crossfade:h.crossfade!==void 0?h.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==On.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(h=!1){var N;const g=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=g.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=g.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=g.isSharedProjectionDirty);const y=!!this.resumingFrom||this!==g;if(!(h||y&&this.isSharedProjectionDirty||this.isProjectionDirty||(N=this.parent)!=null&&N.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:w,layoutId:E}=this.options;if(!(!this.layout||!(w||E))){if(this.resolvedRelativeTargetAt=On.timestamp,!this.targetDelta&&!this.relativeTarget){const I=this.getClosestProjectingParent();I&&I.layout&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),bc(this.relativeTargetOrigin,this.layout.layoutBox,I.layout.layoutBox),qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=fn(),this.targetWithTransforms=fn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),yR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):qr(this.target,this.layout.layoutBox),UE(this.target,this.targetDelta)):qr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const I=this.getClosestProjectingParent();I&&!!I.resumingFrom==!!this.resumingFrom&&!I.options.layoutScroll&&I.target&&this.animationProgress!==1?(this.relativeParent=I,this.forceRelativeParentToResolveTarget(),this.relativeTarget=fn(),this.relativeTargetOrigin=fn(),bc(this.relativeTargetOrigin,this.target,I.target),qr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||wm(this.parent.latestValues)||FE(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var D;const h=this.getLead(),g=!!this.resumingFrom||this!==h;let y=!0;if((this.isProjectionDirty||(D=this.parent)!=null&&D.isProjectionDirty)&&(y=!1),g&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(y=!1),this.resolvedRelativeTargetAt===On.timestamp&&(y=!1),y)return;const{layout:x,layoutId:w}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||w))return;qr(this.layoutCorrected,this.layout.layoutBox);const E=this.treeScale.x,N=this.treeScale.y;I5(this.layoutCorrected,this.treeScale,this.path,g),h.layout&&!h.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(h.target=h.layout.layoutBox,h.targetWithTransforms=fn());const{target:I}=h;if(!I){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ky(this.prevProjectionDelta.x,this.projectionDelta.x),ky(this.prevProjectionDelta.y,this.projectionDelta.y)),wc(this.projectionDelta,this.layoutCorrected,I,this.latestValues),(this.treeScale.x!==E||this.treeScale.y!==N||!Fy(this.projectionDelta.x,this.prevProjectionDelta.x)||!Fy(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",I))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(h=!0){var g;if((g=this.options.visualElement)==null||g.scheduleRender(),h){const y=this.getStack();y&&y.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wo(),this.projectionDelta=Wo(),this.projectionDeltaWithTransform=Wo()}setAnimationOrigin(h,g=!1){const y=this.snapshot,x=y?y.latestValues:{},w={...this.latestValues},E=Wo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!g;const N=fn(),I=y?y.source:void 0,D=this.layout?this.layout.source:void 0,O=I!==D,V=this.getStack(),T=!V||V.members.length<=1,A=!!(O&&!T&&this.options.crossfade===!0&&!this.path.some(cM));this.animationProgress=0;let _;this.mixTargetDelta=M=>{const H=M/1e3;$y(E.x,h.x,H),$y(E.y,h.y,H),this.setTargetDelta(E),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bc(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lM(this.relativeTarget,this.relativeTargetOrigin,N,H),_&&qR(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=fn()),qr(_,this.relativeTarget)),O&&(this.animationValues=w,VR(w,x,this.latestValues,H,A,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(h){var g,y,x;this.notifyListeners("animationStart"),(g=this.currentAnimation)==null||g.stop(),(x=(y=this.resumingFrom)==null?void 0:y.currentAnimation)==null||x.stop(),this.pendingAnimation&&(ra(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Qt.update(()=>{fd.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=fl(0)),this.currentAnimation=PR(this.motionValue,[0,1e3],{...h,velocity:0,isSync:!0,onUpdate:w=>{this.mixTargetDelta(w),h.onUpdate&&h.onUpdate(w)},onStop:()=>{},onComplete:()=>{h.onComplete&&h.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const h=this.getStack();h&&h.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(XR),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const h=this.getLead();let{targetWithTransforms:g,target:y,layout:x,latestValues:w}=h;if(!(!g||!y||!x)){if(this!==h&&this.layout&&x&&lC(this.options.animationType,this.layout.layoutBox,x.layoutBox)){y=this.target||fn();const E=rr(this.layout.layoutBox.x);y.x.min=h.target.x.min,y.x.max=y.x.min+E;const N=rr(this.layout.layoutBox.y);y.y.min=h.target.y.min,y.y.max=y.y.min+N}qr(g,y),Ho(g,w),wc(this.projectionDeltaWithTransform,this.layoutCorrected,g,w)}}registerSharedNode(h,g){this.sharedNodes.has(h)||this.sharedNodes.set(h,new KR),this.sharedNodes.get(h).add(g);const x=g.options.initialPromotionConfig;g.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(g):void 0})}isLead(){const h=this.getStack();return h?h.lead===this:!0}getLead(){var g;const{layoutId:h}=this.options;return h?((g=this.getStack())==null?void 0:g.lead)||this:this}getPrevLead(){var g;const{layoutId:h}=this.options;return h?(g=this.getStack())==null?void 0:g.prevLead:void 0}getStack(){const{layoutId:h}=this.options;if(h)return this.root.sharedNodes.get(h)}promote({needsReset:h,transition:g,preserveFollowOpacity:y}={}){const x=this.getStack();x&&x.promote(this,y),h&&(this.projectionDelta=void 0,this.needsReset=!0),g&&this.setOptions({transition:g})}relegate(){const h=this.getStack();return h?h.relegate(this):!1}resetSkewAndRotation(){const{visualElement:h}=this.options;if(!h)return;let g=!1;const{latestValues:y}=h;if((y.z||y.rotate||y.rotateX||y.rotateY||y.rotateZ||y.skewX||y.skewY)&&(g=!0),!g)return;const x={};y.z&&Wf("z",h,x,this.animationValues);for(let w=0;w<Hf.length;w++)Wf(`rotate${Hf[w]}`,h,x,this.animationValues),Wf(`skew${Hf[w]}`,h,x,this.animationValues);h.render();for(const w in x)h.setStaticValue(w,x[w]),this.animationValues&&(this.animationValues[w]=x[w]);h.scheduleRender()}applyProjectionStyles(h,g){if(!this.instance||this.isSVG)return;if(!this.isVisible){h.visibility="hidden";return}const y=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,h.visibility="",h.opacity="",h.pointerEvents=hd(g==null?void 0:g.pointerEvents)||"",h.transform=y?y(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(h.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,h.pointerEvents=hd(g==null?void 0:g.pointerEvents)||""),this.hasProjected&&!ka(this.latestValues)&&(h.transform=y?y({},""):"none",this.hasProjected=!1);return}h.visibility="";const w=x.animationValues||x.latestValues;this.applyTransformsToTarget();let E=YR(this.projectionDeltaWithTransform,this.treeScale,w);y&&(E=y(w,E)),h.transform=E;const{x:N,y:I}=this.projectionDelta;h.transformOrigin=`${N.origin*100}% ${I.origin*100}% 0`,x.animationValues?h.opacity=x===this?w.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:w.opacityExit:h.opacity=x===this?w.opacity!==void 0?w.opacity:"":w.opacityExit!==void 0?w.opacityExit:0;for(const D in qc){if(w[D]===void 0)continue;const{correct:O,applyTo:V,isCSSVariable:T}=qc[D],A=E==="none"?w[D]:O(w[D],x);if(V){const _=V.length;for(let M=0;M<_;M++)h[V[M]]=A}else T?this.options.visualElement.renderState.vars[D]=A:h[D]=A}this.options.layoutId&&(h.pointerEvents=x===this?hd(g==null?void 0:g.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(h=>{var g;return(g=h.currentAnimation)==null?void 0:g.stop()}),this.root.nodes.forEach(Uy),this.root.sharedNodes.clear()}}}function ZR(e){e.updateLayout()}function JR(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:a}=e.layout,{animationType:l}=e.options,h=t.source!==e.layout.source;l==="size"?Kr(E=>{const N=h?t.measuredBox[E]:t.layoutBox[E],I=rr(N);N.min=r[E].min,N.max=N.min+I}):lC(l,t.layoutBox,r)&&Kr(E=>{const N=h?t.measuredBox[E]:t.layoutBox[E],I=rr(r[E]);N.max=N.min+I,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[E].max=e.relativeTarget[E].min+I)});const g=Wo();wc(g,r,t.layoutBox);const y=Wo();h?wc(y,e.applyTransform(a,!0),t.measuredBox):wc(y,r,t.layoutBox);const x=!sC(g);let w=!1;if(!e.resumeFrom){const E=e.getClosestProjectingParent();if(E&&!E.resumeFrom){const{snapshot:N,layout:I}=E;if(N&&I){const D=fn();bc(D,t.layoutBox,N.layoutBox);const O=fn();bc(O,r,I.layoutBox),iC(D,O)||(w=!0),E.options.layoutRoot&&(e.relativeTarget=O,e.relativeTargetOrigin=D,e.relativeParent=E)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:y,layoutDelta:g,hasLayoutChanged:x,hasRelativeLayoutChanged:w})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function eM(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tM(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nM(e){e.clearSnapshot()}function Uy(e){e.clearMeasurements()}function Vy(e){e.isLayoutDirty=!1}function rM(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function zy(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function sM(e){e.resolveTargetDelta()}function iM(e){e.calcProjection()}function aM(e){e.resetSkewAndRotation()}function oM(e){e.removeLeadSnapshot()}function $y(e,t,n){e.translate=en(t.translate,0,n),e.scale=en(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function Hy(e,t,n,r){e.min=en(t.min,n.min,r),e.max=en(t.max,n.max,r)}function lM(e,t,n,r){Hy(e.x,t.x,n.x,r),Hy(e.y,t.y,n.y,r)}function cM(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uM={duration:.45,ease:[.4,0,.1,1]},Wy=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Gy=Wy("applewebkit/")&&!Wy("chrome/")?Math.round:Jr;function qy(e){e.min=Gy(e.min),e.max=Gy(e.max)}function dM(e){qy(e.x),qy(e.y)}function lC(e,t,n){return e==="position"||e==="preserve-aspect"&&!xR(By(t),By(n),.2)}function hM(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const fM=oC({attachResizeListener:(e,t)=>Yc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gf={current:void 0},cC=oC({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Gf.current){const e=new fM({});e.mount(window),e.setOptions({layoutScroll:!0}),Gf.current=e}return Gf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),mM={pan:{Feature:RR},drag:{Feature:kR,ProjectionNode:cC,MeasureLayout:tC}};function Ky(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const a="onHover"+n,l=r[a];l&&Qt.postRender(()=>l(t,hu(t)))}class gM extends da{mount(){const{current:t}=this.node;t&&(this.unmount=Lk(t,(n,r)=>(Ky(this.node,r,"Start"),a=>Ky(this.node,a,"End"))))}unmount(){}}class pM extends da{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=cu(Yc(this.node.current,"focus",()=>this.onFocus()),Yc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Yy(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const a="onTap"+(n==="End"?"":n),l=r[a];l&&Qt.postRender(()=>l(t,hu(t)))}class xM extends da{mount(){const{current:t}=this.node;t&&(this.unmount=Vk(t,(n,r)=>(Yy(this.node,r,"Start"),(a,{success:l})=>Yy(this.node,a,l?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Am=new WeakMap,qf=new WeakMap,yM=e=>{const t=Am.get(e.target);t&&t(e)},vM=e=>{e.forEach(yM)};function wM({root:e,...t}){const n=e||document;qf.has(n)||qf.set(n,{});const r=qf.get(n),a=JSON.stringify(t);return r[a]||(r[a]=new IntersectionObserver(vM,{root:e,...t})),r[a]}function bM(e,t,n){const r=wM(t);return Am.set(e,n),r.observe(e),()=>{Am.delete(e),r.unobserve(e)}}const EM={some:0,all:1};class CM extends da{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:a="some",once:l}=t,h={root:n?n.current:void 0,rootMargin:r,threshold:typeof a=="number"?a:EM[a]},g=y=>{const{isIntersecting:x}=y;if(this.isInView===x||(this.isInView=x,l&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:w,onViewportLeave:E}=this.node.getProps(),N=x?w:E;N&&N(y)};return bM(this.node.current,h,g)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(NM(t,n))&&this.startObserver()}unmount(){}}function NM({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SM={inView:{Feature:CM},tap:{Feature:xM},focus:{Feature:pM},hover:{Feature:gM}},_M={layout:{ProjectionNode:cC,MeasureLayout:tC}},AM={...dR,...SM,...mM,..._M},Cn=_5(AM,F5);function TM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState(null),[g,y]=R.useState(!1),[x,w]=R.useState({showCompany:!0,showTime:!0,autoHide:!0,hideDelay:5e3,backgroundColor:"#1e40af",textColor:"#ffffff"});R.useEffect(()=>{E()},[e]),R.useEffect(()=>{if(r){const D=xe.channel("check-ins").on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendees",filter:`event_id=eq.${r}`},V=>{V.new&&V.old&&V.new.checked_in===!0&&V.old.checked_in===!1&&(h({id:V.new.id,name:V.new.name,company:V.new.company,check_in_time:V.new.check_in_time}),console.log("New check-in detected:",V.new.name))}).subscribe(),O=xe.channel("new-checkins").on("postgres_changes",{event:"INSERT",schema:"public",table:"attendees",filter:`event_id=eq.${r}`},V=>{V.new&&V.new.checked_in===!0&&(h({id:V.new.id,name:V.new.name,company:V.new.company,check_in_time:V.new.check_in_time}),console.log("New attendee checked in:",V.new.name))}).subscribe();return()=>{D.unsubscribe(),O.unsubscribe()}}},[r]),R.useEffect(()=>{if(l&&x.autoHide){const D=setTimeout(()=>{h(null)},x.hideDelay);return()=>clearTimeout(D)}},[l,x.autoHide,x.hideDelay]);const E=async()=>{try{let D=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `).order("created_at",{ascending:!1});e&&(D=D.eq("company_id",e.company_id));const{data:O,error:V}=await D;if(V)throw V;if(O){const T=O.map(A=>({...A,company:Array.isArray(A.company)?A.company[0]:A.company}));n(T),e&&T&&T.length>0&&a(T[0].id)}}catch(D){console.error("Error fetching events:",D)}},N=()=>{g?document.exitFullscreen():document.documentElement.requestFullscreen(),y(!g)},I=()=>d.jsx("div",{className:"h-full flex items-center justify-center relative",style:{backgroundColor:x.backgroundColor,color:x.textColor},children:d.jsx(p1,{children:l?d.jsx(Cn.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",duration:.8},className:"text-center",children:d.jsxs(Cn.div,{initial:{y:20},animate:{y:0},className:"mb-8",children:[d.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:"Welcome!"}),d.jsx("div",{className:"text-4xl md:text-6xl font-semibold mb-2",children:l.name}),x.showCompany&&l.company&&d.jsx("div",{className:"text-2xl md:text-4xl opacity-80",children:l.company}),x.showTime&&d.jsx("div",{className:"text-xl md:text-2xl opacity-60 mt-4",children:new Date(l.check_in_time).toLocaleTimeString()})]})}):d.jsxs(Cn.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[d.jsx(Yt,{className:"h-32 w-32 mx-auto mb-8 opacity-50"}),d.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Welcome to the Event"}),d.jsx("p",{className:"text-xl md:text-2xl opacity-80",children:"Waiting for check-ins..."})]})})});return g?d.jsxs("div",{className:"fixed inset-0 z-50",children:[d.jsx(I,{}),d.jsx("button",{onClick:N,className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-colors",children:"Exit Fullscreen"})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome Monitor"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Display latest check-ins on external monitor"})]}),d.jsxs("button",{onClick:N,disabled:!r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(qT,{className:"h-5 w-5 mr-2"}),"Fullscreen"]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(Og,{className:"h-6 w-6 mr-2"}),"Settings"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:D=>a(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&d.jsx("option",{value:"",children:"Select an event"}),t.map(D=>d.jsx("option",{value:D.id,children:e?D.name:`${D.name} (${D.company.name})`},D.id))]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:x.showCompany,onChange:D=>w({...x,showCompany:D.target.checked}),className:"mr-2"}),d.jsx("span",{className:"text-sm",children:"Show Company"})]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:x.showTime,onChange:D=>w({...x,showTime:D.target.checked}),className:"mr-2"}),d.jsx("span",{className:"text-sm",children:"Show Check-in Time"})]}),d.jsxs("label",{className:"flex items-center",children:[d.jsx("input",{type:"checkbox",checked:x.autoHide,onChange:D=>w({...x,autoHide:D.target.checked}),className:"mr-2"}),d.jsx("span",{className:"text-sm",children:"Auto Hide"})]})]}),x.autoHide&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hide Delay (seconds)"}),d.jsx("input",{type:"number",value:x.hideDelay/1e3,onChange:D=>w({...x,hideDelay:parseInt(D.target.value)*1e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"30"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),d.jsx("input",{type:"color",value:x.backgroundColor,onChange:D=>w({...x,backgroundColor:D.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),d.jsx("input",{type:"color",value:x.textColor,onChange:D=>w({...x,textColor:D.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]})]}),d.jsx("div",{className:"lg:col-span-2",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(ol,{className:"h-6 w-6 mr-2"}),"Preview"]}),d.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:r?d.jsx(I,{}):d.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ol,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Select an event to see preview"})]})})}),d.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[d.jsx("p",{children:"• This preview shows how the welcome screen will appear"}),d.jsx("p",{children:'• Click "Fullscreen" to display on external monitor'}),d.jsx("p",{children:"• New check-ins will automatically appear in real-time"})]})]})})]})]})}function IM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState(!1),[x,w]=R.useState(null),[E,N]=R.useState([]),[I,D]=R.useState(""),[O,V]=R.useState(!1);R.useEffect(()=>{T()},[]),R.useEffect(()=>{r&&A()},[r]);const T=async()=>{try{let U=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(U=U.eq("company_id",e.company_id));const{data:q,error:ne}=await U.order("created_at",{ascending:!1});if(ne)throw ne;const he=(q==null?void 0:q.map(me=>({...me,company:Array.isArray(me.company)?me.company[0]:me.company})))||[];n(he),e&&he&&he.length>0&&a(he[0].id)}catch(U){ue.error("Error fetching events: "+U.message)}},A=async()=>{try{const{data:U,error:q}=await xe.from("attendees").select("id, name, company").eq("event_id",r).eq("checked_in",!0);if(q)throw q;h(U)}catch(U){ue.error("Error fetching attendees: "+U.message)}},_=()=>{if(l.length===0){ue.error("No checked-in attendees available for draw");return}const U=l.filter(me=>!E.find(re=>re.id===me.id));if(U.length===0){ue.error("All attendees have already won!");return}y(!0),w(null);let q=0;const ne=30,he=setInterval(()=>{const me=U[Math.floor(Math.random()*U.length)];if(D(me.name),q++,q>=ne){clearInterval(he);const re=U[Math.floor(Math.random()*U.length)];w(re),D(re.name),y(!1),ue.success(`🎉 ${re.name} wins!`)}},100)},M=()=>{x&&(N([...E,x]),w(null),D(""))},H=()=>{w(null),D(""),y(!1),N([])},$=()=>{O?document.exitFullscreen():document.documentElement.requestFullscreen(),V(!O)},F=()=>d.jsxs("div",{className:"h-full bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 flex items-center justify-center relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((U,q)=>d.jsx(Cn.div,{className:"absolute w-2 h-2 bg-white rounded-full opacity-30",animate:{x:[0,Math.random()*100-50],y:[0,Math.random()*100-50],scale:[0,1,0]},transition:{duration:3,repeat:1/0,delay:Math.random()*2},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},q))}),d.jsx("div",{className:"text-center text-white z-10",children:d.jsxs(p1,{mode:"wait",children:[!g&&!x&&d.jsxs(Cn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"space-y-8",children:[d.jsx(Ba,{className:"h-32 w-32 mx-auto mb-8"}),d.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:"Lucky Draw"}),d.jsx("p",{className:"text-2xl md:text-3xl opacity-80",children:"Ready to pick a winner?"})]}),g&&d.jsxs(Cn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-8",children:[d.jsx(Cn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:d.jsx(zd,{className:"h-24 w-24 mx-auto mb-8"})}),d.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-8",children:"Drawing..."}),d.jsx(Cn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-3xl md:text-5xl font-semibold bg-white bg-opacity-20 rounded-lg p-6",children:I},I)]}),x&&d.jsxs(Cn.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{opacity:0},className:"space-y-8",children:[d.jsx(Cn.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:d.jsx(em,{className:"h-32 w-32 mx-auto mb-8 text-yellow-300"})}),d.jsx(Cn.h1,{className:"text-4xl md:text-6xl font-bold mb-4",animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},children:"🎉 WINNER! 🎉"}),d.jsx(Cn.div,{initial:{y:20},animate:{y:0},className:"text-4xl md:text-6xl font-bold bg-white bg-opacity-20 rounded-lg p-8",children:x.name}),x.company&&d.jsx(Cn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-2xl md:text-3xl opacity-80",children:x.company})]})]})})]});return O?d.jsxs("div",{className:"fixed inset-0 z-50",children:[d.jsx(F,{}),d.jsxs("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-4",children:[!g&&!x&&d.jsx("button",{onClick:_,className:"bg-white text-purple-600 px-8 py-4 rounded-lg font-bold text-xl hover:bg-gray-100 transition-colors",children:"Start Draw"}),x&&d.jsxs(d.Fragment,{children:[d.jsx("button",{onClick:M,className:"bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-green-700 transition-colors",children:"Confirm Winner"}),d.jsx("button",{onClick:_,className:"bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-blue-700 transition-colors",children:"Draw Again"})]}),d.jsx("button",{onClick:$,className:"bg-gray-600 text-white px-6 py-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Exit"})]})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Lucky Draw"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Random winner selection from checked-in attendees"})]}),d.jsxs("button",{onClick:$,disabled:!r,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(Ba,{className:"h-5 w-5 mr-2"}),"Fullscreen Draw"]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(Ba,{className:"h-6 w-6 mr-2"}),"Draw Controls"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:U=>a(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[!e&&d.jsx("option",{value:"",children:"Select an event"}),t.map(U=>d.jsx("option",{value:U.id,children:e?U.name:`${U.name} (${U.company.name})`},U.id))]})]}),r&&d.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[d.jsxs("div",{className:"flex items-center text-purple-700 mb-2",children:[d.jsx(Yt,{className:"h-5 w-5 mr-2"}),d.jsx("span",{className:"font-medium",children:"Eligible Participants"})]}),d.jsx("div",{className:"text-2xl font-bold text-purple-900",children:l.filter(U=>!E.find(q=>q.id===U.id)).length}),d.jsxs("div",{className:"text-sm text-purple-600",children:[l.length," total checked-in • ",E.length," already won"]})]}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("button",{onClick:_,disabled:!r||g||l.length===0,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(eb,{className:"h-5 w-5 mr-2"}),g?"Drawing...":"Start Lucky Draw"]}),x&&d.jsx("button",{onClick:M,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Confirm Winner"}),d.jsxs("button",{onClick:H,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[d.jsx(aI,{className:"h-4 w-4 mr-2"}),"Reset All"]})]})]})]}),d.jsxs("div",{className:"lg:col-span-2",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Preview"}),d.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:r?d.jsx(F,{}):d.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:d.jsxs("div",{className:"text-center",children:[d.jsx(Ba,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Select an event to see preview"})]})})})]}),E.length>0&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(em,{className:"h-6 w-6 mr-2 text-yellow-500"}),"Previous Winners"]}),d.jsx("div",{className:"space-y-2",children:E.map((U,q)=>d.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[d.jsx("div",{className:"w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:q+1}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-gray-900",children:U.name}),U.company&&d.jsx("div",{className:"text-sm text-gray-600",children:U.company})]})]},U.id))})]})]})]})]})}function jM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState(0),[x,w]=R.useState(!1),[E,N]=R.useState(""),[I,D]=R.useState(!1),[O,V]=R.useState(!1);R.useEffect(()=>{T()},[]),R.useEffect(()=>{r&&(A(),_())},[r]),R.useEffect(()=>{let U;return x&&l.length>0&&(U=setInterval(()=>{y(q=>(q+1)%l.length)},3e3)),()=>clearInterval(U)},[x,l.length]);const T=async()=>{try{let U=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(U=U.eq("company_id",e.company_id));const{data:q,error:ne}=await U.order("created_at",{ascending:!1});if(ne)throw ne;const he=q.map(me=>({...me,company:Array.isArray(me.company)?me.company[0]:me.company}));n(he),e&&he&&he.length>0&&a(he[0].id)}catch(U){ue.error("Error fetching events: "+U.message)}},A=async()=>{try{V(!0);const{data:U,error:q}=await xe.from("gallery_photos").select("*").eq("event_id",r).order("created_at",{ascending:!1});if(q)throw q;h(U)}catch(U){ue.error("Error fetching photos: "+U.message)}finally{V(!1)}},_=async()=>{try{const U=`${window.location.origin}/public/gallery/${r}`,q=await Gs.toDataURL(U);N(q)}catch(U){console.error("Error generating QR code:",U)}},M=async U=>{if(confirm("Are you sure you want to delete this photo?"))try{const{error:q}=await xe.from("gallery_photos").delete().eq("id",U);if(q)throw q;ue.success("Photo deleted successfully"),A()}catch(q){ue.error("Error deleting photo: "+q.message)}},H=()=>{const U=[...l].sort(()=>Math.random()-.5);h(U),y(0)},$=(U,q)=>{const ne=document.createElement("a");ne.href=U,ne.download=`gallery-photo-${q+1}.jpg`,ne.click()},F=()=>{var U,q;return d.jsxs("div",{className:"h-full bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:[l.length>0?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"absolute inset-0 perspective-1000",children:l.map((ne,he)=>{const me=he===g,re=Math.floor(he/4),Y=(he%4-1.5)*200,te=(re-Math.floor(l.length/8))*200,se=me?400:100+he*50,Q=me?1.2:.8;return d.jsx("div",{className:`absolute transition-all duration-1000 ease-out ${me?"z-50 opacity-100":"z-10 opacity-60"}`,style:{left:`calc(50% + ${Y}px)`,top:`calc(50% + ${te}px)`,transform:`translateZ(${se}px) scale(${Q})`,animation:me?"activeImage 6s ease-in-out infinite":"wallFloat 4s ease-in-out infinite"},children:d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:Cs(ne.photo_url),alt:"Gallery",className:"w-40 h-40 object-cover rounded-xl shadow-2xl border-4 border-white/20 hover:border-white/40 transition-all duration-500 hover:scale-110",style:{filter:"drop-shadow(0 20px 40px rgba(0,0,0,0.3))",animation:me?"imagePulse 3s ease-in-out infinite":"gentleFloat 4s ease-in-out infinite"}}),me&&d.jsxs("div",{className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2 bg-black/80 backdrop-blur-sm rounded-lg p-3 text-white text-center min-w-[200px]",children:[d.jsx("div",{className:"text-sm font-semibold",children:ne.attendee_name||"Anonymous"}),d.jsx("div",{className:"text-xs opacity-80",children:new Date(ne.created_at).toLocaleString()})]})]})},ne.id)})}),d.jsxs("div",{className:"absolute bottom-8 left-8 text-white bg-black/50 backdrop-blur-sm rounded-lg p-4",children:[d.jsx("div",{className:"text-lg font-semibold",children:((U=l[g])==null?void 0:U.attendee_name)||"Anonymous"}),d.jsx("div",{className:"text-sm opacity-80",children:new Date((q=l[g])==null?void 0:q.created_at).toLocaleString()})]}),d.jsxs("div",{className:"absolute bottom-8 right-8 text-white bg-black/50 backdrop-blur-sm rounded-lg px-4 py-2",children:[g+1," / ",l.length]}),d.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2",children:l.map((ne,he)=>d.jsx("button",{onClick:()=>y(he),className:`w-3 h-3 rounded-full transition-all duration-300 ${he===g?"bg-white scale-125":"bg-white/50 hover:bg-white/75"}`},he))})]}):d.jsx("div",{className:"text-white text-center flex items-center justify-center h-full",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ys,{className:"h-24 w-24 mx-auto mb-4 opacity-50 animate-pulse"}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Photos Yet"}),d.jsx("p",{className:"opacity-80",children:"Waiting for attendees to upload photos..."})]})}),d.jsx("style",{dangerouslySetInnerHTML:{__html:`
          @keyframes activeImage {
            0% { transform: translateZ(400px) scale(1.2); }
            50% { transform: translateZ(600px) scale(1.4); }
            100% { transform: translateZ(400px) scale(1.2); }
          }
          
          @keyframes wallFloat {
            0%, 100% { transform: translateZ(100px) scale(0.8); }
            50% { transform: translateZ(200px) scale(0.9); }
          }
          
          @keyframes imagePulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
          }
          
          @keyframes gentleFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-5px); }
          }
          
          .perspective-1000 { perspective: 1000px; }
        `}})]})};return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Gallery"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Manage photo uploads and slideshow display"})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("button",{onClick:H,disabled:l.length===0,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center disabled:opacity-50",children:[d.jsx(tb,{className:"h-5 w-5 mr-2"}),"Shuffle"]}),d.jsx("button",{onClick:()=>w(!x),disabled:l.length===0,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:x?"Stop Slideshow":"Start Slideshow"}),d.jsxs("button",{onClick:()=>D(!I),disabled:l.length===0,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[I?d.jsx(YT,{className:"h-5 w-5 mr-2"}):d.jsx(WT,{className:"h-5 w-5 mr-2"}),I?"Exit Fullscreen":"Fullscreen"]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(vs,{className:"h-6 w-6 mr-2"}),"Gallery Setup"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:U=>a(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&d.jsx("option",{value:"",children:"Select an event"}),t.map(U=>d.jsx("option",{value:U.id,children:e?U.name:`${U.name} (${U.company.name})`},U.id))]})]}),r&&E&&d.jsxs("div",{className:"text-center",children:[d.jsx("h3",{className:"font-medium mb-2",children:"Upload QR Code"}),d.jsx("img",{src:E,alt:"Gallery QR Code",className:"w-48 h-48 mx-auto border rounded-lg"}),d.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Attendees scan this to upload photos"}),d.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/public/gallery/${r}`),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm",children:"Copy Upload Link"})]}),r&&d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[d.jsx("div",{className:"text-blue-700 font-medium mb-1",children:"Gallery Stats"}),d.jsx("div",{className:"text-2xl font-bold text-blue-900",children:l.length}),d.jsx("div",{className:"text-sm text-blue-600",children:"Photos uploaded"})]})]})]}),d.jsxs("div",{className:`${I?"fixed inset-0 z-50 bg-black":"lg:col-span-2"}`,children:[d.jsxs("div",{className:`${I?"h-full":"bg-white rounded-lg shadow-md p-6"}`,children:[!I&&d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(ys,{className:"h-6 w-6 mr-2"}),"Gallery Display"]}),d.jsx("div",{className:`${I?"h-full":"aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4"}`,children:r?d.jsx(F,{}):d.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ys,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Select an event to see gallery"})]})})}),l.length>0&&d.jsxs("div",{className:"flex justify-center space-x-2",children:[d.jsx("button",{onClick:()=>y(Math.max(0,g-1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Previous"}),d.jsxs("span",{className:"px-3 py-1 bg-gray-100 rounded",children:[g+1," / ",l.length]}),d.jsx("button",{onClick:()=>y(Math.min(l.length-1,g+1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Next"})]})]}),l.length>0&&d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"All Photos"}),O?d.jsx("div",{className:"flex items-center justify-center h-32",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:l.map((U,q)=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:U.photo_url,alt:"Gallery",className:"w-full h-24 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>y(q)}),d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:d.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex space-x-2",children:[d.jsx("button",{onClick:()=>$(U.photo_url,q),className:"text-white hover:text-blue-300 transition-colors",children:d.jsx(Ah,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>M(U.id),className:"text-white hover:text-red-300 transition-colors",children:d.jsx(ta,{className:"h-4 w-4"})})]})}),U.attendee_name&&d.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1 rounded-b-lg truncate",children:U.attendee_name})]},U.id))})]})]})]})]})}function uC({eventId:e,userCompany:t,isAttendeeView:n=!1,attendeeTable:r=null}){const[a,l]=R.useState([]),[h,g]=R.useState([]),[y,x]=R.useState(null),[w,E]=R.useState(new Set),[N,I]=R.useState(null),[D,O]=R.useState(!1),[V,T]=R.useState(!1),[A,_]=R.useState(null),[M,H]=R.useState(1),[$,F]=R.useState(!1),[U,q]=R.useState("free"),ne=R.useRef(null),he=R.useRef({table_number:1,table_type:"Regular",capacity:8,x:100,y:100,rotation:0}),me=["VVIP","VIP","Regular","Staff"],re={VVIP:"bg-purple-500",VIP:"bg-yellow-500",Regular:"bg-blue-500",Staff:"bg-gray-500"};R.useEffect(()=>{console.log("VenueLayout: eventId changed to:",e),e&&(ae(),Y())},[e]);const ae=async()=>{try{console.log("VenueLayout: Fetching tables for event:",e);const{data:be,error:Oe}=await xe.from("tables").select("*").eq("event_id",e).order("table_number");if(Oe)throw Oe;const Fe=(be==null?void 0:be.map((Ve,At)=>({...Ve,x:Ve.x||100+At*150,y:Ve.y||100+At*100,rotation:Ve.rotation||0})))||[];console.log("VenueLayout: Fetched tables:",Fe),l(Fe)}catch(be){console.error("VenueLayout: Error fetching tables:",be),ue.error("Error fetching tables: "+be.message)}},Y=async()=>{try{const{data:be,error:Oe}=await xe.from("attendees").select("id, name, table_assignment").eq("event_id",e);if(Oe)throw Oe;g(be||[])}catch(be){ue.error("Error fetching attendees: "+be.message)}},te=async be=>{be.preventDefault();try{if(A){const{error:Oe}=await xe.from("tables").update({table_number:he.current.table_number,table_type:he.current.table_type,capacity:he.current.capacity,x:he.current.x,y:he.current.y,rotation:he.current.rotation}).eq("id",A.id);if(Oe)throw Oe;ue.success("Table updated successfully!")}else{const{error:Oe}=await xe.from("tables").insert([{event_id:e,table_number:he.current.table_number,table_type:he.current.table_type,capacity:he.current.capacity,x:he.current.x,y:he.current.y,rotation:he.current.rotation}]);if(Oe)throw Oe;ue.success("Table created successfully!")}T(!1),ae()}catch(Oe){ue.error("Error saving table: "+Oe.message)}},se=async be=>{if(confirm("Are you sure you want to delete this table?"))try{const Oe=a.find(Ve=>Ve.id===be);Oe&&await xe.from("attendees").update({table_assignment:null}).eq("table_assignment",Oe.table_number.toString());const{error:Fe}=await xe.from("tables").delete().eq("id",be);if(Fe)throw Fe;ue.success("Table deleted successfully!"),ae()}catch(Oe){ue.error("Error deleting table: "+Oe.message)}},Q=(be,Oe)=>{if(!n){if($){be.preventDefault();const Fe=new Set(w);Fe.has(Oe.id)?Fe.delete(Oe.id):Fe.add(Oe.id),E(Fe);return}I(Oe),O(!0),be.dataTransfer.setData("text/plain",Oe.id)}},ce=be=>{be.preventDefault()},J=async be=>{var At;if(be.preventDefault(),!N||n)return;const Oe=(At=ne.current)==null?void 0:At.getBoundingClientRect();if(!Oe)return;const Fe=(be.clientX-Oe.left)/M,Ve=(be.clientY-Oe.top)/M;try{const{error:jt}=await xe.from("tables").update({x:Fe,y:Ve}).eq("id",N.id);if(jt)throw jt;l(ns=>ns.map($t=>$t.id===N.id?{...$t,x:Fe,y:Ve}:$t))}catch(jt){ue.error("Error updating table position: "+jt.message)}I(null),O(!1)},pe=async be=>{const Oe=a.find(Ve=>Ve.id===be);if(!Oe)return;const Fe=(Oe.rotation+45)%360;try{const{error:Ve}=await xe.from("tables").update({rotation:Fe}).eq("id",be);if(Ve)throw Ve;l(At=>At.map(jt=>jt.id===be?{...jt,rotation:Fe}:jt))}catch(Ve){ue.error("Error rotating table: "+Ve.message)}},ye=be=>h.filter(Oe=>Oe.table_assignment===be.toString()),We=be=>{_(be),he.current={table_number:be.table_number,table_type:be.table_type,capacity:be.capacity,x:be.x,y:be.y,rotation:be.rotation},T(!0)},$e=()=>{he.current={table_number:Math.max(...a.map(be=>be.table_number),0)+1,table_type:"Regular",capacity:8,x:100,y:100,rotation:0},_(null),T(!1)},Ct=()=>{H(be=>Math.min(be+.2,3))},_e=()=>{H(be=>Math.max(be-.2,.3))},It=()=>{const be=a.map((Oe,Fe)=>{const Ve=Math.floor(Fe/4),At=Fe%4;return{...Oe,x:50+At*200,y:50+Ve*150}});l(be),be.forEach(async Oe=>{try{await xe.from("tables").update({x:Oe.x,y:Oe.y}).eq("id",Oe.id)}catch(Fe){console.error("Error updating table position:",Fe)}})},Je=be=>{if($){const Oe=new Set(w);Oe.has(be.id)?Oe.delete(be.id):Oe.add(be.id),E(Oe)}else x(be)},Be=be=>w.has(be);return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Venue Layout"}),d.jsx("div",{className:"flex gap-2",children:!n&&d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>F(!$),className:`px-3 py-2 rounded-lg flex items-center ${$?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:[d.jsx(cx,{className:"h-4 w-4 mr-2"}),"Multi-Select"]}),d.jsxs("button",{onClick:It,className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[d.jsx(cx,{className:"h-4 w-4 mr-2"}),"Arrange Grid"]}),d.jsx("button",{onClick:Ct,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:d.jsx(RI,{className:"h-4 w-4"})}),d.jsx("button",{onClick:_e,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:d.jsx(DI,{className:"h-4 w-4"})}),d.jsxs("button",{onClick:()=>{_(null),$e(),T(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[d.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add Table"]})]})})]}),d.jsxs("div",{className:"mb-2 text-sm text-gray-600",children:["Zoom: ",Math.round(M*100),"%"]}),d.jsxs("div",{ref:ne,className:"relative w-full h-96 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg overflow-hidden",onDragOver:ce,onDrop:J,style:{transform:`scale(${M})`,transformOrigin:"top left"},children:[a.map(be=>{const Oe=ye(be.table_number),Fe=n&&r===be.table_number.toString(),Ve=Be(be.id);return d.jsx("div",{draggable:!n,onDragStart:At=>Q(At,be),onClick:()=>Je(be),className:`absolute cursor-move ${Fe?"ring-4 ring-green-500 ring-opacity-75":""} ${Ve?"ring-4 ring-purple-500 ring-opacity-75":""}`,style:{left:be.x,top:be.y,transform:`rotate(${be.rotation}deg)`,width:120,height:80},children:d.jsxs("div",{className:`${re[be.table_type]} text-white rounded-lg p-3 shadow-lg h-full relative`,children:[d.jsxs("div",{className:"text-center",children:[d.jsxs("div",{className:"font-bold text-lg",children:["Table ",be.table_number]}),d.jsx("div",{className:"text-xs opacity-90",children:be.table_type}),d.jsxs("div",{className:"text-xs mt-1",children:[Oe.length,"/",be.capacity," guests"]})]}),!n&&d.jsxs("div",{className:"flex justify-center gap-1 mt-2",children:[d.jsx("button",{onClick:At=>{At.stopPropagation(),We(be)},className:"bg-white/20 hover:bg-white/30 rounded p-1",title:"Edit Table",children:d.jsx(ou,{className:"h-3 w-3"})}),d.jsx("button",{onClick:At=>{At.stopPropagation(),pe(be.id)},className:"bg-white/20 hover:bg-white/30 rounded p-1",title:"Rotate Table",children:d.jsx(lI,{className:"h-3 w-3"})}),d.jsx("button",{onClick:At=>{At.stopPropagation(),se(be.id)},className:"bg-white/20 hover:bg-white/30 rounded p-1",title:"Delete Table",children:d.jsx(ta,{className:"h-3 w-3"})})]})]})},be.id)}),n&&r&&d.jsx("div",{className:"absolute top-4 left-4 bg-green-500 text-white px-3 py-2 rounded-lg",children:d.jsxs("div",{className:"font-bold",children:["Your Table: ",r]})})]}),$&&w.size>0&&d.jsx("div",{className:"mt-2 p-2 bg-purple-100 rounded-lg",children:d.jsxs("p",{className:"text-sm text-purple-800",children:[w.size," table(s) selected"]})})]}),V&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:A?"Edit Table":"Add Table"}),d.jsxs("form",{onSubmit:te,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Number"}),d.jsx("input",{type:"number",value:he.current.table_number,onChange:be=>he.current.table_number=parseInt(be.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Type"}),d.jsx("select",{value:he.current.table_type,onChange:be=>he.current.table_type=be.target.value,className:"w-full border rounded px-3 py-2",children:me.map(be=>d.jsx("option",{value:be,children:be},be))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Capacity"}),d.jsx("input",{type:"number",value:he.current.capacity,onChange:be=>he.current.capacity=parseInt(be.target.value),className:"w-full border rounded px-3 py-2",min:"1",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>T(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:A?"Update":"Create"})]})]})]})})]})}function kM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState([]),[x,w]=R.useState(!1),[E,N]=R.useState(null),[I,D]=R.useState(null),[O,V]=R.useState(!0),[T,A]=R.useState({table_number:1,table_type:"Regular",capacity:8,quantity:1}),_=["VVIP","VIP","Regular","Staff"],M={VVIP:"bg-purple-500",VIP:"bg-yellow-500",Regular:"bg-blue-500",Staff:"bg-gray-500"};R.useEffect(()=>{H()},[]),R.useEffect(()=>{console.log("Selected event changed:",r),r&&($(),F())},[r]);const H=async()=>{try{V(!0);let Q=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(Q=Q.eq("company_id",e.company_id));const{data:ce,error:J}=await Q.order("created_at",{ascending:!1});if(J)throw J;const pe=(ce==null?void 0:ce.map(ye=>({...ye,company:Array.isArray(ye.company)?ye.company[0]:ye.company})))||[];console.log("Fetched events:",pe),n(pe),e&&pe&&pe.length>0&&a(pe[0].id)}catch(Q){console.error("Error fetching events:",Q),ue.error("Error fetching events: "+Q.message)}finally{V(!1)}},$=async()=>{try{console.log("Fetching tables for event:",r);const{data:Q,error:ce}=await xe.from("tables").select("*").eq("event_id",r).order("table_number");if(ce)throw ce;console.log("Fetched tables:",Q),h(Q||[])}catch(Q){console.error("Error fetching tables:",Q),ue.error("Error fetching tables: "+Q.message)}},F=async()=>{try{console.log("Fetching attendees for event:",r);const{data:Q,error:ce}=await xe.from("attendees").select("*").eq("event_id",r).order("name");if(ce)throw ce;console.log("Fetched attendees:",Q),y(Q||[])}catch(Q){console.error("Error fetching attendees:",Q),ue.error("Error fetching attendees: "+Q.message)}},U=async Q=>{Q.preventDefault();try{if(E){const{error:ce}=await xe.from("tables").update({table_number:T.table_number,table_type:T.table_type,capacity:T.capacity}).eq("id",E.id);if(ce)throw ce;ue.success("Table updated successfully!")}else{const ce=[];for(let pe=0;pe<T.quantity;pe++)ce.push({event_id:r,table_number:T.table_number+pe,table_type:T.table_type,capacity:T.capacity,x:100+pe*150,y:100+pe*100,rotation:0});const{error:J}=await xe.from("tables").insert(ce);if(J)throw J;ue.success(`${T.quantity} table(s) created successfully!`)}w(!1),$()}catch(ce){ue.error("Error saving table: "+ce.message)}},q=async(Q,ce)=>{try{const{error:J}=await xe.from("attendees").update({table_assignment:(ce==null?void 0:ce.toString())||null}).eq("id",Q);if(J)throw J;F()}catch(J){ue.error("Error assigning attendee: "+J.message)}},ne=()=>{A({table_number:Math.max(...l.map(Q=>Q.table_number),0)+1,table_type:"Regular",capacity:8,quantity:1}),N(null),w(!1)},he=Q=>g.filter(ce=>ce.table_assignment===Q.toString()),me=g.filter(Q=>!Q.table_assignment),re=async()=>{if(confirm("This will randomly assign all unassigned attendees to available regular tables. Continue?"))try{const Q=l.filter($e=>$e.table_type==="Regular"),ce=[];if(Q.forEach($e=>{const Ct=he($e.table_number),_e=$e.capacity-Ct.length;_e>0&&ce.push({tableNumber:$e.table_number,availableSeats:_e})}),ce.length===0){ue.error("No available seats in regular tables");return}const J=[...me].sort(()=>Math.random()-.5),pe=[];let ye=0,We=0;for(const $e of J){if(ye>=ce.length)break;const Ct=ce[ye];pe.push({attendeeId:$e.id,tableNumber:Ct.tableNumber}),We++,We>=Ct.availableSeats&&(ye++,We=0)}for(const $e of pe)await xe.from("attendees").update({table_assignment:$e.tableNumber.toString()}).eq("id",$e.attendeeId);ue.success(`${pe.length} attendees randomly assigned to tables`),F()}catch(Q){ue.error("Error randomizing seating: "+Q.message)}},ae=(Q,ce)=>{D(ce),Q.dataTransfer.setData("text/plain",ce.id)},Y=Q=>{Q.preventDefault()},te=async(Q,ce)=>{Q.preventDefault(),I&&(await q(I.id,ce),D(null))},se=async Q=>{Q.preventDefault(),I&&(await q(I.id,null),D(null))};return O?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):r?d.jsxs("div",{children:[d.jsx("div",{className:"flex justify-between items-center mb-8",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seating Arrangement"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Manage table layouts and assign attendees to tables"})]})}),d.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[d.jsx("h3",{className:"font-semibold text-yellow-800",children:"Debug Info:"}),d.jsxs("p",{className:"text-sm text-yellow-700",children:["Selected Event ID: ",r]}),d.jsxs("p",{className:"text-sm text-yellow-700",children:["Tables Count: ",l.length]}),d.jsxs("p",{className:"text-sm text-yellow-700",children:["Attendees Count: ",g.length]}),d.jsxs("p",{className:"text-sm text-yellow-700",children:["Events Count: ",t.length]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),t.length===0?d.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"No events found. ",e?"Create an event first to manage seating.":"Please create events to manage seating arrangements."]})}):e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:Q=>a(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Choose an event to manage seating"}),t.map(Q=>d.jsx("option",{value:Q.id,children:e?Q.name:`${Q.name} (${Q.company.name})`},Q.id))]}),t.length>0&&d.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[t.length," event",t.length!==1?"s":""," available"]})]}),r&&d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[d.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Seating Summary"}),d.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[l.length," tables"]}),d.jsxs("div",{className:"text-sm text-blue-600",children:[g.filter(Q=>Q.table_assignment).length," assigned"]})]})})]})}),r&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-bold",children:"Venue Layout"}),d.jsxs("button",{onClick:()=>{N(null),ne(),w(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[d.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add Table"]})]}),r?d.jsx(uC,{eventId:r,userCompany:e,isAttendeeView:!1}):d.jsx("div",{className:"min-h-[400px] bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(pr,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Please select an event to view venue layout"})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsx("h2",{className:"text-xl font-semibold",children:"Unassigned Attendees"}),d.jsxs("div",{className:"flex gap-2",children:[g.length===0&&d.jsxs("button",{onClick:()=>window.open("/admin/checkin","_blank"),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 flex items-center text-sm",children:[d.jsx(Fs,{className:"h-3 w-3 mr-1"}),"Add Attendees"]}),d.jsxs("button",{onClick:re,disabled:g.length===0,className:"bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700 flex items-center text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(tb,{className:"h-3 w-3 mr-1"}),"Randomize"]})]})]}),d.jsx("div",{className:"min-h-[200px] border-2 border-dashed border-gray-300 rounded-lg p-4",onDragOver:Y,onDrop:se,children:g.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Yt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"No attendees found for this event"}),d.jsx("p",{className:"text-sm mt-2",children:"Attendees will appear here when they register"}),d.jsxs("div",{className:"mt-4 space-y-2",children:[d.jsx("p",{className:"text-xs text-gray-400",children:"You can:"}),d.jsxs("div",{className:"flex flex-col gap-2",children:[d.jsx("a",{href:"/admin/checkin",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Add attendees manually in Check-In System"}),d.jsx("a",{href:`/public/register/${r}`,target:"_blank",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Share registration link with attendees"})]})]})]}):me.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Yt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"All attendees assigned"})]}):me.map(Q=>d.jsxs("div",{draggable:!0,onDragStart:ce=>ae(ce,Q),className:"bg-gray-50 p-3 rounded-lg mb-2 cursor-move hover:bg-gray-100",children:[d.jsx("div",{className:"font-medium",children:Q.name}),d.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",Q.identification_number]})]},Q.id))})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Table Assignments"}),d.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:l.length===0?d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(pr,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"No tables created yet"}),d.jsx("p",{className:"text-sm mt-2",children:"Create tables to start assigning attendees"}),d.jsxs("button",{onClick:()=>w(!0),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center mx-auto",children:[d.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Add Table"]})]}):l.map(Q=>{const ce=he(Q.table_number);return d.jsxs("div",{className:`${M[Q.table_type]} text-white rounded-lg p-4`,onDragOver:Y,onDrop:J=>te(J,Q.table_number),children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"font-bold text-lg",children:["Table ",Q.table_number]}),d.jsx("div",{className:"text-sm opacity-90",children:Q.table_type})]}),d.jsxs("div",{className:"text-sm",children:[ce.length,"/",Q.capacity]})]}),d.jsxs("div",{className:"space-y-2",children:[ce.map(J=>d.jsxs("div",{draggable:!0,onDragStart:pe=>ae(pe,J),className:"bg-white/20 p-2 rounded cursor-move hover:bg-white/30",children:[d.jsx("div",{className:"font-medium",children:J.name}),d.jsxs("div",{className:"text-xs opacity-90",children:["ID: ",J.identification_number]})]},J.id)),ce.length===0&&d.jsx("div",{className:"text-center py-4 text-white/70",children:d.jsx("p",{children:"No attendees assigned"})})]})]},Q.id)})})]})]})]}),x&&d.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:E?"Edit Table":"Add Table"}),d.jsxs("form",{onSubmit:U,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Number"}),d.jsx("input",{type:"number",value:T.table_number,onChange:Q=>A({...T,table_number:parseInt(Q.target.value)}),className:"w-full border rounded px-3 py-2",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Type"}),d.jsx("select",{value:T.table_type,onChange:Q=>A({...T,table_type:Q.target.value}),className:"w-full border rounded px-3 py-2",children:_.map(Q=>d.jsx("option",{value:Q,children:Q},Q))})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Capacity"}),d.jsx("input",{type:"number",value:T.capacity,onChange:Q=>A({...T,capacity:parseInt(Q.target.value)}),className:"w-full border rounded px-3 py-2",min:"1",required:!0})]}),!E&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),d.jsx("input",{type:"number",value:T.quantity,onChange:Q=>A({...T,quantity:parseInt(Q.target.value)}),className:"w-full border rounded px-3 py-2",min:"1",max:"10",required:!0})]}),d.jsxs("div",{className:"flex justify-end gap-2",children:[d.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),d.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:E?"Update":"Create"})]})]})]})})]}):d.jsxs("div",{children:[d.jsx("div",{className:"flex justify-between items-center mb-8",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seating Arrangement"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Manage table layouts and assign attendees to tables"})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:d.jsxs("div",{className:"md:col-span-2",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),t.length===0?d.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"No events found. ",e?"Create an event first to manage seating.":"Please create events to manage seating arrangements."]})}):e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:Q=>a(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Choose an event to manage seating"}),t.map(Q=>d.jsx("option",{value:Q.id,children:e?Q.name:`${Q.name} (${Q.company.name})`},Q.id))]}),t.length>0&&d.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[t.length," event",t.length!==1?"s":""," available"]})]})})}),t.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx(pr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Events Available"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"You need to create events first before managing seating arrangements."}),d.jsxs("a",{href:"/admin/events",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[d.jsx(Fs,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}):d.jsxs("div",{className:"text-center py-12",children:[d.jsx(pr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Event"}),d.jsx("p",{className:"text-gray-600",children:"Choose an event from the dropdown above to manage seating arrangements"})]})]})}function RM(){const[e,t]=R.useState([]),[n,r]=R.useState([]),[a,l]=R.useState([]),[h,g]=R.useState(new Date().getFullYear()),[y,x]=R.useState(!0),[w,E]=R.useState("monthly"),[N,I]=R.useState(""),[D,O]=R.useState(!0);R.useEffect(()=>{V(),T(),A()},[h]);const V=async()=>{try{x(!0);const{data:re,error:ae}=await xe.from("events").select(`
          id,
          created_at,
          company_id
        `).gte("created_at",`${h}-01-01`).lt("created_at",`${h+1}-01-01`);if(ae)throw ae;const Y=(re==null?void 0:re.map(pe=>pe.id))||[],{data:te,error:se}=await xe.from("attendees").select("id, event_id, checked_in, created_at").in("event_id",Y);if(se)throw se;const{data:Q,error:ce}=await xe.from("companies").select("id, created_at").gte("created_at",`${h}-01-01`).lt("created_at",`${h+1}-01-01`);if(ce)throw ce;const J=[];for(let pe=0;pe<12;pe++){const ye=new Date(h,pe,1),We=new Date(h,pe+1,0),$e=(re==null?void 0:re.filter(It=>{const Je=new Date(It.created_at);return Je>=ye&&Je<=We}))||[],Ct=(te==null?void 0:te.filter(It=>{const Je=new Date(It.created_at);return Je>=ye&&Je<=We}))||[],_e=(Q==null?void 0:Q.filter(It=>{const Je=new Date(It.created_at);return Je>=ye&&Je<=We}))||[];J.push({month:ye.toLocaleDateString("en-US",{month:"short"}),events:$e.length,attendees:Ct.length,checkedIn:Ct.filter(It=>It.checked_in).length,companies:_e.length})}t(J)}catch(re){ue.error("Error fetching monthly progress: "+re.message)}finally{x(!1)}},T=async()=>{try{const{data:re,error:ae}=await xe.from("companies").select(`
          id,
          name,
          events!inner(
            id,
            attendees(id, checked_in)
          )
        `);if(ae)throw ae;const Y=(re==null?void 0:re.map(te=>{const se=te.events||[],Q=se.flatMap(ce=>ce.attendees||[]);return{id:te.id,name:te.name,events:se.length,attendees:Q.length,checkedIn:Q.filter(ce=>ce.checked_in).length}}))||[];r(Y.sort((te,se)=>se.attendees-te.attendees))}catch(re){console.error("Error fetching company progress:",re)}},A=async()=>{try{const{data:re,error:ae}=await xe.from("events").select(`
          id,
          name,
          date,
          attendees(id, checked_in)
        `).order("date",{ascending:!1});if(ae)throw ae;const Y=(re==null?void 0:re.map(te=>{var se,Q;return{id:te.id,name:te.name,date:te.date,attendees:((se=te.attendees)==null?void 0:se.length)||0,checkedIn:((Q=te.attendees)==null?void 0:Q.filter(ce=>ce.checked_in).length)||0}}))||[];l(Y)}catch(re){console.error("Error fetching events:",re)}},_=e.reduce((re,ae)=>re+ae.events,0),M=e.reduce((re,ae)=>re+ae.attendees,0),H=e.reduce((re,ae)=>re+ae.checkedIn,0),$=e.reduce((re,ae)=>re+ae.companies,0),F=Math.max(...e.map(re=>Math.max(re.events,re.attendees,re.checkedIn))),U=600,q=300,ne=40,he=(re,ae)=>re.length===0?"":`M ${re.map((te,se)=>{const Q=ne+se*(U-2*ne)/(re.length-1),ce=q-ne-te/F*(q-2*ne);return`${Q},${ce}`}).join(" ")}`,me=async()=>{var re,ae;try{let Y="",te="";switch(w){case"monthly":Y=`Month,Events,Attendees,Checked In,New Companies
`,e.forEach(ye=>{Y+=`${ye.month},${ye.events},${ye.attendees},${ye.checkedIn},${ye.companies}
`}),Y+=`
SUMMARY
`,Y+=`Total Events,${_}
`,Y+=`Total Attendees,${M}
`,Y+=`Total Checked In,${H}
`,Y+=`Total New Companies,${$}
`,te=`monthly-report-${h}.csv`;break;case"annual":Y=`Report Type,Annual Report
`,Y+=`Year,${h}

`,Y+=`SUMMARY
`,Y+=`Metric,Value
`,Y+=`Total Events,${_}
`,Y+=`Total Attendees,${M}
`,Y+=`Total Checked In,${H}
`,Y+=`Total New Companies,${$}

`,Y+=`MONTHLY BREAKDOWN
`,Y+=`Month,Events,Attendees,Checked In,New Companies
`,e.forEach(ye=>{Y+=`${ye.month},${ye.events},${ye.attendees},${ye.checkedIn},${ye.companies}
`}),Y+=`
COMPANY PERFORMANCE
`,Y+=`Rank,Company Name,Events,Attendees,Checked In
`,n.forEach((ye,We)=>{Y+=`${We+1},${ye.name},${ye.events},${ye.attendees},${ye.checkedIn}
`}),te=`annual-report-${h}.csv`;break;case"event":if(!N){ue.error("Please select an event");return}const{data:J,error:pe}=await xe.from("events").select(`
              id,
              name,
              date,
              description,
              location,
              attendees(
                id,
                name,
                email,
                phone,
                checked_in,
                created_at
              )
            `).eq("id",N).single();if(pe){ue.error("Error fetching event details");return}Y=`EVENT DETAILS
`,Y+=`Field,Value
`,Y+=`Event Name,${J.name}
`,Y+=`Event Date,${J.date}
`,Y+=`Location,${J.location||"N/A"}
`,Y+=`Description,${J.description||"N/A"}
`,Y+=`Total Attendees,${((re=J.attendees)==null?void 0:re.length)||0}
`,Y+=`Checked In,${((ae=J.attendees)==null?void 0:ae.filter(ye=>ye.checked_in).length)||0}
`,D&&J.attendees&&J.attendees.length>0&&(Y+=`
ATTENDEE DETAILS
`,Y+=`Name,Email,Phone,Checked In,Registration Date
`,J.attendees.forEach(ye=>{const We=ye.checked_in?"Yes":"No",$e=new Date(ye.created_at).toLocaleDateString();Y+=`${ye.name||"N/A"},${ye.email||"N/A"},${ye.phone||"N/A"},${We},${$e}
`})),te=`event-report-${J.name.replace(/[^a-zA-Z0-9]/g,"-")}.csv`;break}const se=new Blob([Y],{type:"text/csv;charset=utf-8;"}),Q=URL.createObjectURL(se),ce=document.createElement("a");ce.href=Q,ce.download=te,document.body.appendChild(ce),ce.click(),document.body.removeChild(ce),URL.revokeObjectURL(Q),ue.success("CSV report exported successfully!")}catch(Y){ue.error("Error exporting report: "+Y.message)}};return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Monthly Progress"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Track monthly performance and growth"})]}),d.jsxs("div",{className:"flex gap-4",children:[d.jsx("select",{value:h,onChange:re=>g(parseInt(re.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:5},(re,ae)=>new Date().getFullYear()-ae).map(re=>d.jsx("option",{value:re,children:re},re))}),d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("select",{value:w,onChange:re=>E(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"monthly",children:"Monthly Report"}),d.jsx("option",{value:"annual",children:"Annual Report"}),d.jsx("option",{value:"event",children:"Event Report"})]}),w==="event"&&d.jsxs(d.Fragment,{children:[d.jsxs("select",{value:N,onChange:re=>I(re.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Select Event"}),a.map(re=>d.jsx("option",{value:re.id,children:re.name},re.id))]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("input",{type:"checkbox",id:"includeAttendees",checked:D,onChange:re=>O(re.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),d.jsx("label",{htmlFor:"includeAttendees",className:"text-sm text-gray-700",children:"Include Attendees"})]})]}),d.jsxs("button",{onClick:me,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[d.jsx(Ah,{className:"h-4 w-4"}),"Export"]})]})]})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(mn,{className:"h-8 w-8 text-blue-600 mr-3"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:_}),d.jsx("div",{className:"text-sm text-gray-600",children:"Total Events"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Yt,{className:"h-8 w-8 text-green-600 mr-3"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M}),d.jsx("div",{className:"text-sm text-gray-600",children:"Total Attendees"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(_o,{className:"h-8 w-8 text-purple-600 mr-3"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:H}),d.jsx("div",{className:"text-sm text-gray-600",children:"Checked In"})]})]})}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Rr,{className:"h-8 w-8 text-orange-600 mr-3"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-2xl font-bold text-gray-900",children:$}),d.jsx("div",{className:"text-sm text-gray-600",children:"New Companies"})]})]})})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(al,{className:"h-6 w-6 mr-2"}),"Monthly Trends (",h,")"]}),y?d.jsx("div",{className:"flex items-center justify-center h-64",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d.jsxs("div",{className:"relative",children:[d.jsxs("svg",{width:U,height:q,className:"mx-auto",children:[Array.from({length:5},(re,ae)=>d.jsx("line",{x1:ne,y1:ne+ae*(q-2*ne)/4,x2:U-ne,y2:ne+ae*(q-2*ne)/4,stroke:"#e5e7eb",strokeWidth:"1"},ae)),Array.from({length:5},(re,ae)=>d.jsx("text",{x:ne-10,y:ne+ae*(q-2*ne)/4,textAnchor:"end",className:"text-xs text-gray-500",dy:"0.35em",children:Math.round(F*(4-ae)/4)},ae)),e.map((re,ae)=>d.jsx("text",{x:ne+ae*(U-2*ne)/(e.length-1),y:q-10,textAnchor:"middle",className:"text-xs text-gray-500",children:re.month},ae)),d.jsx("path",{d:he(e.map(re=>re.events)),stroke:"#3b82f6",strokeWidth:"2",fill:"none"}),d.jsx("path",{d:he(e.map(re=>re.attendees)),stroke:"#10b981",strokeWidth:"2",fill:"none"}),d.jsx("path",{d:he(e.map(re=>re.checkedIn)),stroke:"#8b5cf6",strokeWidth:"2",fill:"none"}),e.map((re,ae)=>{const Y=ne+ae*(U-2*ne)/(e.length-1);return d.jsxs("g",{children:[d.jsx("circle",{cx:Y,cy:q-ne-re.events/F*(q-2*ne),r:"3",fill:"#3b82f6"}),d.jsx("circle",{cx:Y,cy:q-ne-re.attendees/F*(q-2*ne),r:"3",fill:"#10b981"}),d.jsx("circle",{cx:Y,cy:q-ne-re.checkedIn/F*(q-2*ne),r:"3",fill:"#8b5cf6"})]},ae)})]}),d.jsxs("div",{className:"flex justify-center gap-6 mt-4 text-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"}),d.jsx("span",{children:"Events"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),d.jsx("span",{children:"Attendees"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full"}),d.jsx("span",{children:"Check-ins"})]})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(Rr,{className:"h-6 w-6 mr-2"}),"Company Performance"]}),d.jsxs("div",{className:"space-y-4",children:[n.slice(0,10).map((re,ae)=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:ae+1}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium text-gray-900",children:re.name}),d.jsxs("div",{className:"text-sm text-gray-600",children:[re.events," events • ",re.attendees," attendees"]})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-lg font-bold text-gray-900",children:re.checkedIn}),d.jsx("div",{className:"text-xs text-gray-600",children:"checked in"})]})]},re.id)),n.length===0&&d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(Rr,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"No company data available"})]})]})]})]})]})}function MM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState(""),[x,w]=R.useState([]),[E,N]=R.useState(!1),[I,D]=R.useState(!1),[O,V]=R.useState(null),[T,A]=R.useState(""),[_,M]=R.useState({title:"",description:""}),[H,$]=R.useState({title:"",photo_url:""});R.useEffect(()=>{F()},[]),R.useEffect(()=>{r&&U()},[r]),R.useEffect(()=>{g&&(q(),ne())},[g]);const F=async()=>{try{let J=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(J=J.eq("company_id",e.company_id));const{data:pe,error:ye}=await J.order("created_at",{ascending:!1});if(ye)throw ye;const We=(pe==null?void 0:pe.map($e=>({...$e,company:Array.isArray($e.company)?$e.company[0]:$e.company})))||[];n(We),e&&We&&We.length>0&&a(We[0].id)}catch(J){ue.error("Error fetching events: "+J.message)}},U=async()=>{try{const{data:J,error:pe}=await xe.from("voting_sessions").select("*").eq("event_id",r).order("created_at",{ascending:!1});if(pe)throw pe;h(J)}catch(J){ue.error("Error fetching voting sessions: "+J.message)}},q=async()=>{try{const{data:J,error:pe}=await xe.from("voting_photos").select("*").eq("voting_session_id",g).order("created_at",{ascending:!1});if(pe)throw pe;const ye=await Promise.all(J.map(async We=>{const{data:$e}=await xe.from("votes").select("id").eq("voting_photo_id",We.id);return{...We,vote_count:($e==null?void 0:$e.length)||0}}));w(ye)}catch(J){ue.error("Error fetching photos: "+J.message)}},ne=async()=>{try{const J=`${window.location.origin}/public/voting/${g}`,pe=await Gs.toDataURL(J);A(pe)}catch(J){console.error("Error generating QR code:",J)}},he=async J=>{J.preventDefault();try{if(O){const{error:pe}=await xe.from("voting_sessions").update({title:_.title,description:_.description||null}).eq("id",O.id);if(pe)throw pe;ue.success("Voting session updated successfully")}else{const{error:pe}=await xe.from("voting_sessions").insert([{event_id:r,title:_.title,description:_.description||null}]);if(pe)throw pe;ue.success("Voting session created successfully")}te(),U()}catch(pe){ue.error("Error saving voting session: "+pe.message)}},me=async J=>{J.preventDefault();try{const{error:pe}=await xe.from("voting_photos").insert([{voting_session_id:g,title:H.title,photo_url:H.photo_url}]);if(pe)throw pe;ue.success("Photo added successfully"),se(),q()}catch(pe){ue.error("Error adding photo: "+pe.message)}},re=async(J,pe)=>{try{pe&&await xe.from("voting_sessions").update({is_active:!1}).eq("event_id",r);const{error:ye}=await xe.from("voting_sessions").update({is_active:pe}).eq("id",J);if(ye)throw ye;ue.success(`Voting session ${pe?"activated":"deactivated"}`),U()}catch(ye){ue.error("Error updating session status: "+ye.message)}},ae=async J=>{if(confirm("Are you sure you want to delete this voting session? This will also delete all photos and votes."))try{const{error:pe}=await xe.from("voting_sessions").delete().eq("id",J);if(pe)throw pe;ue.success("Voting session deleted successfully"),U(),g===J&&(y(""),w([]))}catch(pe){ue.error("Error deleting session: "+pe.message)}},Y=async J=>{if(confirm("Are you sure you want to delete this photo? This will also delete all votes for it."))try{const{error:pe}=await xe.from("voting_photos").delete().eq("id",J);if(pe)throw pe;ue.success("Photo deleted successfully"),q()}catch(pe){ue.error("Error deleting photo: "+pe.message)}},te=()=>{M({title:"",description:""}),V(null),N(!1)},se=()=>{$({title:"",photo_url:""}),D(!1)},Q=J=>{V(J),M({title:J.title,description:J.description||""}),N(!0)},ce=async J=>{var ye;const pe=(ye=J.target.files)==null?void 0:ye[0];if(pe){if(pe.size>10*1024*1024){ue.error("File size must be less than 10MB");return}if(!pe.type.startsWith("image/")){ue.error("Please select an image file");return}try{const We=new FileReader;We.onload=$e=>{var _e;const Ct=(_e=$e.target)==null?void 0:_e.result;$({...H,photo_url:Ct})},We.readAsDataURL(pe)}catch(We){ue.error("Error uploading file: "+We.message)}}};return d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voting Administration"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Manage voting sessions and photos"})]}),d.jsxs("button",{onClick:()=>N(!0),disabled:!r,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[d.jsx(Fs,{className:"h-5 w-5 mr-2"}),"New Voting Session"]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?d.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):d.jsxs("select",{value:r,onChange:J=>a(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&d.jsx("option",{value:"",children:"Select an event"}),t.map(J=>d.jsx("option",{value:J.id,children:e?J.name:`${J.name} (${J.company.name})`},J.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Voting Session"}),d.jsxs("select",{value:g,onChange:J=>y(J.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Select a voting session"}),l.map(J=>d.jsxs("option",{value:J.id,children:[J.title," ",J.is_active&&"(Active)"]},J.id))]})]})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(ws,{className:"h-6 w-6 mr-2"}),"Voting Sessions"]}),d.jsxs("div",{className:"space-y-3",children:[l.map(J=>d.jsxs("div",{className:`p-4 border rounded-lg ${J.is_active?"border-green-500 bg-green-50":"border-gray-200"}`,children:[d.jsxs("div",{className:"flex justify-between items-start mb-2",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-gray-900",children:J.title}),J.description&&d.jsx("p",{className:"text-sm text-gray-600",children:J.description})]}),d.jsxs("div",{className:"flex space-x-1",children:[d.jsx("button",{onClick:()=>re(J.id,!J.is_active),className:`p-1 rounded ${J.is_active?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,children:J.is_active?d.jsx(JT,{className:"h-4 w-4"}):d.jsx(eb,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>Q(J),className:"text-gray-400 hover:text-blue-600 transition-colors",children:d.jsx(ou,{className:"h-4 w-4"})}),d.jsx("button",{onClick:()=>ae(J.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:d.jsx(ta,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",new Date(J.created_at).toLocaleDateString()]})]},J.id)),l.length===0&&r&&d.jsxs("div",{className:"text-center py-8 text-gray-500",children:[d.jsx(ws,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),d.jsx("p",{children:"No voting sessions yet"})]})]})]}),d.jsx("div",{className:"lg:col-span-2",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("div",{className:"flex justify-between items-center mb-4",children:[d.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[d.jsx(ys,{className:"h-6 w-6 mr-2"}),"Voting Photos"]}),d.jsxs("button",{onClick:()=>D(!0),disabled:!g,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:[d.jsx(Fs,{className:"h-5 w-5 mr-2"}),"Add Photo"]})]}),g&&T&&d.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Voting QR Code"}),d.jsx("p",{className:"text-sm text-blue-700",children:"Share this QR code for attendees to vote"})]}),d.jsx("img",{src:T,alt:"Voting QR Code",className:"w-24 h-24 border rounded-lg"})]})}),x.length>0?d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:x.map(J=>d.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[d.jsx("img",{src:Cs(J.photo_url),alt:J.title,className:"w-full h-48 object-cover"}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:J.title}),d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsxs("span",{className:"text-sm text-gray-600",children:[J.vote_count," votes"]}),d.jsx("button",{onClick:()=>Y(J.id),className:"text-red-600 hover:text-red-700",children:d.jsx(ta,{className:"h-4 w-4"})})]})]})]},J.id))}):g?d.jsxs("div",{className:"text-center py-12 text-gray-500",children:[d.jsx(ys,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"No photos added yet"}),d.jsx("p",{className:"text-sm",children:"Add photos for attendees to vote on"})]}):d.jsxs("div",{className:"text-center py-12 text-gray-500",children:[d.jsx(ws,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Select a voting session to manage photos"})]})]})})]}),E&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:O?"Edit Voting Session":"Create Voting Session"}),d.jsxs("form",{onSubmit:he,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),d.jsx("input",{type:"text",value:_.title,onChange:J=>M({..._,title:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter voting session title",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:J=>M({..._,description:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter description (optional)"})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:te,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:O?"Update Session":"Create Session"})]})]})]})}),I&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[d.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Voting Photo"}),d.jsxs("form",{onSubmit:me,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo Title *"}),d.jsx("input",{type:"text",value:H.title,onChange:J=>$({...H,title:J.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter photo title",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo *"}),d.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:H.photo_url?d.jsxs("div",{className:"space-y-2",children:[d.jsx("img",{src:H.photo_url,alt:"Preview",className:"max-w-full h-32 object-contain mx-auto rounded"}),d.jsx("button",{type:"button",onClick:()=>$({...H,photo_url:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):d.jsxs("div",{children:[d.jsx(Th,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),d.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Click to upload photo"}),d.jsx("input",{type:"file",accept:"image/*",onChange:ce,className:"hidden",id:"photo-upload"}),d.jsx("label",{htmlFor:"photo-upload",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),d.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[d.jsx("button",{type:"button",onClick:se,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),d.jsx("button",{type:"submit",disabled:!H.photo_url,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:"Add Photo"})]})]})]})})]})}function DM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState([]),[g,y]=R.useState(0),[x,w]=R.useState(!1),[E,N]=R.useState(0);R.useEffect(()=>{I()},[]),R.useEffect(()=>{if(r){D();const T=xe.channel("votes").on("postgres_changes",{event:"*",schema:"public",table:"votes"},()=>{D()}).subscribe();return()=>{T.unsubscribe()}}},[r]),R.useEffect(()=>{if(l.length>0){const T=setInterval(()=>{N(A=>(A+1)%l.length)},5e3);return()=>clearInterval(T)}},[l.length]);const I=async()=>{try{let T=xe.from("voting_sessions").select(`
          id,
          title,
          description,
          event:events(
            id,
            name,
            company_id,
            company:companies(name)
          )
        `).eq("is_active",!0);if(e){const{data:H}=await xe.from("events").select("id").eq("company_id",e.company_id),$=(H==null?void 0:H.map(F=>F.id))||[];$.length>0&&(T=T.in("event_id",$))}const{data:A,error:_}=await T.order("created_at",{ascending:!1});if(_)throw _;const M=(A==null?void 0:A.map(H=>{var $,F,U,q;return{...H,event:{id:($=H.event[0])==null?void 0:$.id,name:(F=H.event[0])==null?void 0:F.name,company:Array.isArray((U=H.event[0])==null?void 0:U.company)?H.event[0].company[0]:(q=H.event[0])==null?void 0:q.company}}}))||[];n(M)}catch(T){console.error("Error fetching voting sessions:",T)}},D=async()=>{try{const{data:T,error:A}=await xe.from("voting_photos").select("*").eq("voting_session_id",r).order("created_at",{ascending:!1});if(A)throw A;const _=await Promise.all(T.map(async $=>{const{data:F}=await xe.from("votes").select("id").eq("voting_photo_id",$.id);return{...$,vote_count:(F==null?void 0:F.length)||0}})),M=_.reduce(($,F)=>$+F.vote_count,0);y(M);const H=_.map($=>({...$,vote_percentage:M>0?$.vote_count/M*100:0}));H.sort(($,F)=>F.vote_count-$.vote_count),h(H)}catch(T){console.error("Error fetching photos with votes:",T)}},O=()=>{x?document.exitFullscreen():document.documentElement.requestFullscreen(),w(!x)},V=()=>{var T,A,_,M,H,$;return d.jsxs("div",{className:"h-full bg-gradient-to-br from-blue-600 via-purple-600 to-indigo-700 text-white relative overflow-hidden",children:[d.jsx("div",{className:"absolute inset-0",children:[...Array(15)].map((F,U)=>d.jsx(Cn.div,{className:"absolute w-2 h-2 bg-white rounded-full opacity-20",animate:{x:[0,Math.random()*100-50],y:[0,Math.random()*100-50],scale:[0,1,0]},transition:{duration:4,repeat:1/0,delay:Math.random()*3},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},U))}),d.jsxs("div",{className:"relative z-10 h-full flex flex-col",children:[d.jsx("div",{className:"text-center py-8",children:d.jsxs(Cn.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"space-y-2",children:[d.jsx("h1",{className:"text-4xl md:text-6xl font-bold",children:"Live Voting Results"}),r&&d.jsx("div",{className:"text-xl md:text-2xl opacity-80",children:(T=t.find(F=>F.id===r))==null?void 0:T.title}),d.jsxs("div",{className:"text-lg md:text-xl opacity-60",children:["Total Votes: ",g]})]})}),d.jsx("div",{className:"flex-1 px-8 pb-8",children:l.length>0?d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 h-full",children:[d.jsx("div",{className:"flex flex-col",children:d.jsx(p1,{mode:"wait",children:d.jsxs(Cn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.5},className:"flex-1 bg-white bg-opacity-10 rounded-lg p-6 flex flex-col",children:[d.jsx("div",{className:"flex-1 flex items-center justify-center",children:d.jsx("img",{src:Cs((A=l[E])==null?void 0:A.photo_url),alt:(_=l[E])==null?void 0:_.title,className:"max-w-full max-h-full object-contain rounded-lg"})}),d.jsxs("div",{className:"mt-4 text-center",children:[d.jsx("h3",{className:"text-2xl font-bold mb-2",children:(M=l[E])==null?void 0:M.title}),d.jsxs("div",{className:"text-4xl font-bold text-yellow-300",children:[(H=l[E])==null?void 0:H.vote_count," votes"]}),d.jsxs("div",{className:"text-xl opacity-80",children:[($=l[E])==null?void 0:$.vote_percentage.toFixed(1),"%"]})]})]},E)})}),d.jsxs("div",{className:"bg-white bg-opacity-10 rounded-lg p-6",children:[d.jsxs("h2",{className:"text-3xl font-bold mb-6 text-center flex items-center justify-center",children:[d.jsx(em,{className:"h-8 w-8 mr-3 text-yellow-300"}),"Leaderboard"]}),d.jsx("div",{className:"space-y-4",children:l.slice(0,5).map((F,U)=>d.jsxs(Cn.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:U*.1},className:"flex items-center space-x-4 bg-white bg-opacity-10 rounded-lg p-4",children:[d.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold text-lg ${U===0?"bg-yellow-500":U===1?"bg-gray-400":U===2?"bg-orange-600":"bg-blue-500"}`,children:U+1}),d.jsx("img",{src:Cs(F.photo_url),alt:F.title,className:"w-16 h-16 object-cover rounded-lg"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-semibold text-lg",children:F.title}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("span",{className:"text-2xl font-bold",children:F.vote_count}),d.jsx("div",{className:"flex-1 bg-white bg-opacity-20 rounded-full h-3",children:d.jsx(Cn.div,{className:"bg-yellow-400 h-3 rounded-full",initial:{width:0},animate:{width:`${F.vote_percentage}%`},transition:{duration:1,delay:U*.1}})}),d.jsxs("span",{className:"text-lg font-semibold",children:[F.vote_percentage.toFixed(1),"%"]})]})]})]},F.id))})]})]}):d.jsx("div",{className:"h-full flex items-center justify-center",children:d.jsxs(Cn.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[d.jsx(ws,{className:"h-32 w-32 mx-auto mb-8 opacity-50"}),d.jsx("h2",{className:"text-4xl font-bold mb-4",children:"Waiting for Votes"}),d.jsx("p",{className:"text-xl opacity-80",children:"No votes cast yet"})]})})})]})]})};return x?d.jsxs("div",{className:"fixed inset-0 z-50",children:[d.jsx(V,{}),d.jsx("button",{onClick:O,className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-colors",children:"Exit Fullscreen"})]}):d.jsxs("div",{children:[d.jsxs("div",{className:"flex justify-between items-center mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voting Monitor"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Display live voting results"})]}),d.jsxs("button",{onClick:O,disabled:!r,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[d.jsx(ol,{className:"h-5 w-5 mr-2"}),"Fullscreen Monitor"]})]}),d.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Voting Session"}),d.jsxs("select",{value:r,onChange:T=>a(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsx("option",{value:"",children:"Select an active voting session"}),t.map(T=>d.jsxs("option",{value:T.id,children:[T.title," - ",T.event.name]},T.id))]})]}),r&&d.jsx("div",{className:"flex items-end",children:d.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 w-full",children:[d.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Live Stats"}),d.jsx("div",{className:"text-2xl font-bold text-purple-900",children:g}),d.jsx("div",{className:"text-sm text-purple-600",children:"Total Votes Cast"})]})})]})}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[d.jsx(al,{className:"h-6 w-6 mr-2"}),"Monitor Preview"]}),d.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:r?d.jsx(V,{}):d.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:d.jsxs("div",{className:"text-center",children:[d.jsx(ws,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Select an active voting session to see preview"})]})})}),d.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[d.jsx("p",{children:"• This preview shows how the voting monitor will appear"}),d.jsx("p",{children:'• Click "Fullscreen Monitor" to display on external screen'}),d.jsx("p",{children:"• Results update automatically in real-time"}),d.jsx("p",{children:"• Photos rotate every 5 seconds in fullscreen mode"})]})]})]})}function OM(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function PM(){const{eventId:e}=El(),t=bl(),[n,r]=R.useState(null),[a,l]=R.useState(!0),[h,g]=R.useState(!1),[y,x]=R.useState({name:"",email:"",phone:"",identification_number:"",staff_id:""}),[w,E]=R.useState(null),[N,I]=R.useState(!1),D=R.useRef(null),O=R.useRef(null),V=R.useRef(null);R.useEffect(()=>{e&&T()},[e]);const T=async()=>{try{const{data:U,error:q}=await xe.from("events").select("*").eq("id",e).single();if(q)throw q;r(U)}catch{ue.error("Event not found"),t("/")}finally{l(!1)}},A=async()=>{try{const U=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});D.current&&(D.current.srcObject=U,I(!0))}catch{ue.error("Camera access denied")}},_=()=>{var U;(U=D.current)!=null&&U.srcObject&&D.current.srcObject.getTracks().forEach(ne=>ne.stop()),I(!1)},M=()=>{if(D.current&&O.current){const U=D.current,q=O.current,ne=q.getContext("2d");if(ne){q.width=U.videoWidth,q.height=U.videoHeight,ne.drawImage(U,0,0);const he=q.toDataURL("image/jpeg",.8);E(he),_()}}},H=U=>{var ne;const q=(ne=U.target.files)==null?void 0:ne[0];if(q){const he=new FileReader;he.onload=me=>{var re;E((re=me.target)==null?void 0:re.result)},he.readAsDataURL(q)}},$=()=>{E(null)},F=async U=>{if(U.preventDefault(),!(!n||!y.name.trim()||!y.identification_number.trim())){g(!0);try{const q=OM(),ne=`${q}|${n.id}|${y.name}`,he=await Gs.toDataURL(ne,{width:200,margin:1,errorCorrectionLevel:"L"});let me=null;if(w){const ae=await fetch(w).then(Q=>Q.blob()),Y=`face_photos/${q}.jpg`,{data:te,error:se}=await xe.storage.from("attendee-photos").upload(Y,ae,{contentType:"image/jpeg"});if(se)console.error("Error uploading photo:",se);else{const{data:{publicUrl:Q}}=xe.storage.from("attendee-photos").getPublicUrl(Y);me=Q}}const{error:re}=await xe.from("attendees").insert([{id:q,event_id:n.id,name:y.name,email:y.email||null,phone:y.phone||null,identification_number:y.identification_number,staff_id:y.staff_id||null,table_type:"Regular",qr_code:he,face_photo_url:me}]);if(re)throw re;ue.success("Registration successful!"),t(`/public/ticket/${q}`)}catch(q){ue.error("Registration failed: "+q.message)}finally{g(!1)}}};return a?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[d.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"Event Registration"}),d.jsxs("div",{className:"mb-6 text-center",children:[d.jsx("div",{className:"text-lg font-semibold",children:n.name}),n.date&&d.jsxs("div",{className:"text-gray-500 flex items-center justify-center",children:[d.jsx(mn,{className:"h-4 w-4 mr-1"}),new Date(n.date).toLocaleString()]}),n.location&&d.jsxs("div",{className:"text-gray-500 flex items-center justify-center",children:[d.jsx(pr,{className:"h-4 w-4 mr-1"}),n.location]})]}),d.jsxs("form",{onSubmit:F,className:"space-y-4",children:[d.jsx("input",{type:"text",value:y.name,onChange:U=>x({...y,name:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Full Name *",required:!0}),d.jsx("input",{type:"email",value:y.email,onChange:U=>x({...y,email:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email"}),d.jsx("input",{type:"tel",value:y.phone,onChange:U=>x({...y,phone:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Phone Number"}),d.jsx("input",{type:"text",value:y.identification_number,onChange:U=>x({...y,identification_number:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Identification Number *",required:!0}),d.jsx("input",{type:"text",value:y.staff_id,onChange:U=>x({...y,staff_id:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Staff ID (Optional)"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Face Photo (Optional)"}),!w&&!N&&d.jsxs("div",{className:"flex gap-2",children:[d.jsxs("button",{type:"button",onClick:A,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center justify-center",children:[d.jsx(La,{className:"h-4 w-4 mr-2"}),"Take Photo"]}),d.jsxs("button",{type:"button",onClick:()=>{var U;return(U=V.current)==null?void 0:U.click()},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[d.jsx(Th,{className:"h-4 w-4 mr-2"}),"Upload Photo"]})]}),N&&d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[d.jsx("video",{ref:D,autoPlay:!0,playsInline:!0,className:"w-full h-64 object-cover"}),d.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:d.jsx("div",{className:"w-48 h-48 border-4 border-white rounded-full opacity-80"})}),d.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:d.jsxs("button",{type:"button",onClick:M,className:"bg-white text-black px-6 py-2 rounded-full hover:bg-gray-100 flex items-center",children:[d.jsx(La,{className:"h-4 w-4 mr-2"}),"Capture"]})}),d.jsx("button",{type:"button",onClick:_,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:d.jsx($d,{className:"h-4 w-4"})})]}),d.jsx("canvas",{ref:O,className:"hidden"})]}),w&&d.jsxs("div",{className:"relative",children:[d.jsx("img",{src:w,alt:"Face photo",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-300"}),d.jsx("button",{type:"button",onClick:$,className:"absolute -top-2 -right-2 bg-red-600 text-white p-1 rounded-full hover:bg-red-700",children:d.jsx($d,{className:"h-3 w-3"})})]}),d.jsx("input",{ref:V,type:"file",accept:"image/*",onChange:H,className:"hidden"})]}),d.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",disabled:h,children:h?"Registering...":"Register for Event"})]})]})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),d.jsx("p",{className:"text-gray-600",children:"The event you're looking for doesn't exist."})]})})}function LM(){const{attendeeId:e}=El(),[t,n]=R.useState(null),[r,a]=R.useState(!0);R.useEffect(()=>{e&&l()},[e]);const l=async()=>{try{const{data:h,error:g}=await xe.from("attendees").select(`
          *,
          event:events (
            name,
            description,
            date,
            location
          )
        `).eq("id",e).single();if(g)throw g;n(h)}catch{ue.error("Ticket not found")}finally{a(!1)}};return r?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?d.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4 sm:px-6 lg:px-8",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 md:px-6 py-6 md:py-8 text-center",children:[d.jsx(vs,{className:"h-12 w-12 mx-auto mb-4"}),d.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Event Ticket"}),t.checked_in&&d.jsxs("div",{className:"mt-4 flex items-center justify-center text-green-200",children:[d.jsx(Zi,{className:"h-5 w-5 mr-2"}),d.jsx("span",{children:"Checked In"})]})]}),d.jsxs("div",{className:"px-4 md:px-6 py-6 border-b border-gray-200",children:[d.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 mb-3",children:t.event.name}),t.event.description&&d.jsx("p",{className:"text-gray-600 mb-4",children:t.event.description}),d.jsxs("div",{className:"space-y-2",children:[t.event.date&&d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(mn,{className:"h-4 w-4 mr-2"}),d.jsx("span",{className:"text-sm",children:new Date(t.event.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.event.location&&d.jsxs("div",{className:"flex items-center text-gray-600",children:[d.jsx(pr,{className:"h-4 w-4 mr-2"}),d.jsx("span",{className:"text-sm",children:t.event.location})]})]})]}),d.jsxs("div",{className:"px-4 md:px-6 py-6 border-b border-gray-200",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Attendee Information"}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[d.jsxs("div",{children:[d.jsx("strong",{children:"Name:"})," ",t.name]}),d.jsxs("div",{children:[d.jsx("strong",{children:"ID Number:"})," ",t.identification_number]}),t.staff_id&&d.jsxs("div",{children:[d.jsx("strong",{children:"Staff ID:"})," ",t.staff_id]}),t.email&&d.jsxs("div",{children:[d.jsx("strong",{children:"Email:"})," ",t.email]}),t.phone&&d.jsxs("div",{children:[d.jsx("strong",{children:"Phone:"})," ",t.phone]})]})]}),d.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8 text-center",children:[d.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Check-in QR Code"}),t.qr_code&&d.jsx("div",{className:"flex justify-center",children:d.jsx("img",{src:Cs(t.qr_code),alt:"QR Code for check-in",className:"w-40 h-40 md:w-48 md:h-48 border border-gray-200 rounded-lg"})}),d.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Present this QR code at the event for check-in"})]}),t.checked_in&&t.check_in_time&&d.jsx("div",{className:"bg-green-50 px-4 md:px-6 py-4",children:d.jsxs("div",{className:"flex items-center justify-center text-green-800",children:[d.jsx(Zi,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{className:"text-sm font-medium",children:["Checked in at ",new Date(t.check_in_time).toLocaleString()]})]})})]})})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ticket Not Found"}),d.jsx("p",{className:"text-gray-600",children:"The ticket you're looking for doesn't exist."})]})})}function BM(){const{eventId:e}=El(),[t,n]=R.useState(null),[r,a]=R.useState(!1),[l,h]=R.useState(!1),[g,y]=R.useState(""),[x,w]=R.useState(null),[E,N]=R.useState(null),[I,D]=R.useState(0),[O]=R.useState(3);R.useEffect(()=>{e&&V()},[e]);const V=async()=>{try{const{data:H,error:$}=await xe.from("events").select(`
          id,
          name,
          description,
          company:companies(name)
        `).eq("id",e).single();if($)throw $;const F={...H,company:Array.isArray(H.company)?H.company[0]??{name:""}:H.company};n(F),await T()}catch{ue.error("Event not found")}},T=async()=>{if(e)try{const{data:H,error:$}=await xe.from("gallery_photos").select("id").eq("event_id",e).eq("attendee_name",g.trim()||"Anonymous");if($)throw $;D((H==null?void 0:H.length)||0)}catch(H){console.error("Error checking upload count:",H)}},A=H=>{var F;const $=(F=H.target.files)==null?void 0:F[0];if($){if($.size>10*1024*1024){ue.error("File size must be less than 10MB");return}if(!$.type.startsWith("image/")){ue.error("Please select an image file");return}w($);const U=URL.createObjectURL($);N(U)}},_=async()=>{if(!(!x||!t)){if(I>=O){ue.error(`You have reached the maximum upload limit of ${O} photos`);return}a(!0);try{const H=new FileReader;H.onload=async $=>{var q;const F=(q=$.target)==null?void 0:q.result,{error:U}=await xe.from("gallery_photos").insert([{event_id:t.id,attendee_name:g.trim()||null,photo_url:F}]);if(U)throw U;ue.success("Photo uploaded successfully!"),h(!0),w(null),N(null),y(""),D(ne=>ne+1)},H.readAsDataURL(x)}catch(H){ue.error("Error uploading photo: "+H.message)}finally{a(!1)}}},M=()=>{h(!1),w(null),N(null),y("")};return t?l?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:d.jsx("div",{className:"max-w-md w-full text-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx(Zi,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Photo Uploaded!"}),d.jsxs("p",{className:"text-gray-600 mb-6",children:["Thank you for sharing your moment from ",t.name]}),d.jsx("button",{onClick:M,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Another Photo"})]})})}):d.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4",children:d.jsx("div",{className:"max-w-2xl mx-auto",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsxs("div",{className:"bg-blue-600 text-white px-4 md:px-6 py-6 md:py-8 text-center",children:[d.jsx(La,{className:"h-12 w-12 mx-auto mb-4"}),d.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"Share Your Photo"}),d.jsx("p",{className:"text-blue-100",children:t.name}),d.jsx("p",{className:"text-blue-200 text-sm",children:t.company.name})]}),d.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8",children:[d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),d.jsx("input",{type:"text",value:g,onChange:H=>y(H.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your name"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Photo"}),d.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 md:p-6 text-center hover:border-blue-400 transition-colors",children:E?d.jsxs("div",{className:"space-y-4",children:[d.jsx("img",{src:E,alt:"Preview",className:"max-w-full h-48 md:h-64 object-contain mx-auto rounded-lg"}),d.jsx("button",{onClick:()=>{w(null),N(null)},className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):d.jsxs("div",{children:[d.jsx(ys,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600 mb-2",children:"Click to select a photo"}),d.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG up to 10MB"}),d.jsx("input",{type:"file",accept:"image/*",onChange:A,className:"hidden",id:"photo-upload"}),d.jsx("label",{htmlFor:"photo-upload",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),x&&d.jsxs("button",{onClick:_,disabled:r,className:"w-full bg-green-600 text-white py-2 md:py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center disabled:opacity-50 text-sm md:text-base",children:[d.jsx(Th,{className:"h-5 w-5 mr-2"}),r?"Uploading...":"Upload Photo"]})]}),d.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[d.jsx("p",{children:"• Your photo will be added to the event gallery"}),d.jsx("p",{children:"• Photos may be displayed during the event"}),d.jsx("p",{children:"• By uploading, you consent to public display"}),d.jsxs("p",{className:"mt-2 text-blue-600 font-medium",children:["Uploads: ",I,"/",O," photos"]})]})]})]})})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}function FM(){const{sessionId:e}=El(),[t,n]=R.useState(null),[r,a]=R.useState([]),[l,h]=R.useState(null),[g,y]=R.useState(0),[x,w]=R.useState(!1),[E,N]=R.useState(!0),[I,D]=R.useState(!1),[O,V]=R.useState(!1),[T,A]=R.useState(""),[_,M]=R.useState(!0);R.useEffect(()=>{e&&H()},[e]),R.useEffect(()=>{if(e&&l){$(),F();const ne=xe.channel("votes").on("postgres_changes",{event:"*",schema:"public",table:"votes"},()=>{$()}).subscribe();return()=>{ne.unsubscribe()}}},[e,l]);const H=async()=>{var ne,he,me,re;try{const{data:ae,error:Y}=await xe.from("voting_sessions").select(`
        id,
        title,
        description,
        event:events(
          id,
          name,
          company:companies(name)
        )
      `).eq("id",e).eq("is_active",!0).single();if(Y||!ae)throw Y;const te={id:ae.id,title:ae.title,description:ae.description,event:{id:(ne=ae.event[0])==null?void 0:ne.id,name:(he=ae.event[0])==null?void 0:he.name,company:Array.isArray((me=ae.event[0])==null?void 0:me.company)?ae.event[0].company[0]:(re=ae.event[0])==null?void 0:re.company}};n(te)}catch{ue.error("Voting session not found or not active")}finally{N(!1)}},$=async()=>{if(l)try{const{data:ne,error:he}=await xe.from("voting_photos").select("*").eq("voting_session_id",e).order("created_at",{ascending:!1});if(he)throw he;const me=await Promise.all(ne.map(async Y=>{const{data:te}=await xe.from("votes").select("id, attendee_id").eq("voting_photo_id",Y.id),se=(te==null?void 0:te.some(Q=>Q.attendee_id===l.id))||!1;return{...Y,vote_count:(te==null?void 0:te.length)||0,user_voted:se}})),re=me.reduce((Y,te)=>Y+te.vote_count,0);y(re);const ae=me.map(Y=>({...Y,vote_percentage:re>0?Y.vote_count/re*100:0}));a(ae)}catch(ne){console.error("Error fetching photos:",ne)}},F=async()=>{if(!(!l||r.length===0))try{const{data:ne,error:he}=await xe.from("votes").select("id").eq("attendee_id",l.id).in("voting_photo_id",r.map(me=>me.id));if(he)throw he;w(((ne==null?void 0:ne.length)||0)>0)}catch(ne){console.error("Error checking vote status:",ne)}},U=async ne=>{if(ne.preventDefault(),!!T.trim())try{N(!0);const{data:he,error:me}=await xe.from("attendees").select("id, name, identification_number, event_id").eq("identification_number",T.trim()).single();if(me||!he){ue.error("Attendee not found. Please check your identification number.");return}if(t&&he.event_id!==t.event.id){ue.error("You are not registered for this event.");return}h(he),M(!1),ue.success(`Welcome, ${he.name}!`)}catch(he){ue.error("Error logging in: "+he.message)}finally{N(!1)}},q=async ne=>{if(!(!l||I))try{D(!0);const{data:he}=await xe.from("votes").select("id").eq("attendee_id",l.id).in("voting_photo_id",r.map(re=>re.id));if(he&&he.length>0){ue.error("You have already voted in this session"),w(!0);return}const{error:me}=await xe.from("votes").insert([{voting_photo_id:ne,attendee_id:l.id}]);if(me)throw me;ue.success("Vote cast successfully!"),w(!0),V(!0),$()}catch(he){ue.error("Error casting vote: "+he.message)}finally{D(!1)}};return E?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):t?_?d.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4",children:d.jsx("div",{className:"max-w-md mx-auto",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx(ws,{className:"h-16 w-16 text-purple-600 mx-auto mb-4"}),d.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Join Voting"}),d.jsx("h2",{className:"text-lg md:text-xl text-purple-600 mb-2",children:t.title}),d.jsx("p",{className:"text-gray-600",children:t.event.name}),d.jsx("p",{className:"text-sm text-gray-500",children:t.event.company.name})]}),d.jsxs("form",{onSubmit:U,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Identification Number"}),d.jsx("input",{type:"text",value:T,onChange:ne=>A(ne.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your identification number",required:!0})]}),d.jsx("button",{type:"submit",disabled:E,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:E?"Verifying...":"Join Voting"})]}),t.description&&d.jsx("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg",children:d.jsx("p",{className:"text-sm text-purple-700",children:t.description})})]})})}):d.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8 px-4",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-6 mb-6",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:t.title}),d.jsx("p",{className:"text-base md:text-lg text-purple-600 mb-2",children:t.event.name}),d.jsx("p",{className:"text-gray-600",children:t.event.company.name}),t.description&&d.jsx("p",{className:"text-gray-600 mt-2",children:t.description}),d.jsxs("div",{className:"mt-4 flex flex-col md:flex-row items-center justify-center space-y-2 md:space-y-0 md:space-x-4 text-sm text-gray-500",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Yt,{className:"h-4 w-4 mr-1"}),d.jsxs("span",{children:["Welcome, ",l==null?void 0:l.name]})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(al,{className:"h-4 w-4 mr-1"}),d.jsxs("span",{children:[g," total votes"]})]})]})]})}),x&&d.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:d.jsxs("div",{className:"flex items-center",children:[d.jsx(Zi,{className:"h-5 w-5 text-green-600 mr-2"}),d.jsx("span",{className:"text-green-800 font-medium",children:"Thank you for voting!"})]})}),x&&d.jsx("div",{className:"text-center mb-6",children:d.jsx("button",{onClick:()=>V(!O),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:O?"Hide Results":"Show Results"})}),d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:r.map(ne=>d.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[d.jsx("img",{src:Cs(ne.photo_url),alt:ne.title,className:"w-full h-48 md:h-64 object-cover"}),d.jsxs("div",{className:"p-4 md:p-6",children:[d.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:ne.title}),x?O?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Votes"}),d.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[ne.vote_count," (",ne.vote_percentage.toFixed(1),"%)"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 md:h-3",children:d.jsx("div",{className:`h-2 md:h-3 rounded-full transition-all duration-500 ${ne.user_voted?"bg-green-500":"bg-purple-500"}`,style:{width:`${ne.vote_percentage}%`}})}),ne.user_voted&&d.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[d.jsx(Zi,{className:"h-4 w-4 mr-1"}),d.jsx("span",{children:"You voted for this"})]})]}):d.jsxs("div",{className:"text-center py-2 md:py-3 text-gray-500",children:[d.jsx(Zi,{className:"h-8 w-8 mx-auto mb-2"}),d.jsx("p",{children:"Vote cast successfully!"})]}):d.jsxs("button",{onClick:()=>q(ne.id),disabled:I,className:"w-full bg-purple-600 text-white py-2 md:py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center text-sm md:text-base",children:[d.jsx(ws,{className:"h-5 w-5 mr-2"}),I?"Voting...":"Vote for This"]})]})]},ne.id))}),r.length===0&&d.jsxs("div",{className:"text-center py-12",children:[d.jsx(ws,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),d.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Photos Available"}),d.jsx("p",{className:"text-gray-600",children:"No photos have been added to this voting session yet."})]})]})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Voting Session Not Found"}),d.jsx("p",{className:"text-gray-600",children:"The voting session may have ended or doesn't exist."})]})})}function UM(){const{eventId:e,attendeeId:t}=El(),[n,r]=R.useState(null),[a,l]=R.useState(!0);R.useEffect(()=>{t&&h()},[t]);const h=async()=>{try{const{data:g,error:y}=await xe.from("attendees").select("id, name, table_assignment").eq("id",t).single();if(y)throw y;r(g)}catch(g){console.error("Error fetching attendee:",g)}finally{l(!1)}};return a?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?d.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:d.jsxs("div",{className:"max-w-4xl mx-auto",children:[d.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:d.jsxs("div",{className:"text-center",children:[d.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome, ",n.name,"!"]}),d.jsx("p",{className:"text-gray-600",children:"Here's your venue layout and seating information"})]})}),e&&d.jsx(uC,{eventId:e,isAttendeeView:!0,attendeeTable:n.table_assignment}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[d.jsx(pr,{className:"h-6 w-6 mr-2"}),"Your Seating Information"]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[d.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Attendee Details"}),d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Name:"})," ",n.name]}),d.jsxs("div",{children:[d.jsx("span",{className:"font-medium",children:"Attendee ID:"})," ",n.id]})]})]}),d.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[d.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Table Assignment"}),n.table_assignment?d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"text-2xl font-bold text-green-700",children:["Table ",n.table_assignment]}),d.jsx("p",{className:"text-green-600",children:"Please find your table in the venue layout above."})]}):d.jsxs("div",{className:"space-y-2",children:[d.jsx("div",{className:"text-gray-500",children:"No table assigned yet"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Please check with event organizers for your seating assignment."})]})]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[d.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[d.jsx(Yt,{className:"h-6 w-6 mr-2"}),"Venue Instructions"]}),d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"1"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:"Find Your Table"}),d.jsx("p",{className:"text-gray-600",children:"Look for your highlighted table in the venue layout above."})]})]}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"2"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:"Table Types"}),d.jsx("p",{className:"text-gray-600",children:"Different colored tables indicate different seating categories (VVIP, VIP, Regular, Staff)."})]})]}),d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"3"}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold",children:"Need Help?"}),d.jsx("p",{className:"text-gray-600",children:"If you can't find your table or need assistance, please contact event staff."})]})]})]})]})]})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Attendee Not Found"}),d.jsx("p",{className:"text-gray-600",children:"The attendee you're looking for doesn't exist."})]})})}function VM(){var O,V;const{eventId:e}=El(),[t,n]=R.useState(null),[r,a]=R.useState(!0),[l,h]=R.useState(""),[g,y]=R.useState(null),[x,w]=R.useState(!1);R.useEffect(()=>{e&&E()},[e]);const E=async()=>{try{const{data:T,error:A}=await xe.from("events").select(`
          id,
          name,
          description,
          date,
          location,
          custom_logo,
          custom_background,
          company:companies(name)
        `).eq("id",e).single();if(A)throw A;n(T)}catch(T){ue.error("Error fetching event: "+T.message)}finally{a(!1)}},N=async T=>{if(T.preventDefault(),!l.trim()){ue.error("Please enter your identification number or staff ID");return}w(!0),y(null);try{const A=await I(l);y(A),A.success?(ue.success(A.message),h("")):ue.error(A.message)}catch(A){ue.error("Error processing check-in: "+A.message)}finally{w(!1)}},I=async T=>{try{const{data:A,error:_}=await xe.from("attendees").select(`
          id,
          name,
          identification_number,
          staff_id,
          checked_in,
          check_in_time,
          event_id,
          table_assignment,
          event:events(name)
        `).eq("event_id",e).or(`identification_number.eq.${T},staff_id.eq.${T}`);if(_)throw _;if(!A||A.length===0)return{success:!1,message:"No attendee found with this ID number"};const M=A[0];if(M.checked_in)return{success:!1,message:`${M.name} is already checked in at ${new Date(M.check_in_time).toLocaleString()}`};const{error:H}=await xe.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",M.id);if(H)throw H;return{success:!0,attendee:M,message:`${M.name} checked in successfully!${M.table_assignment?` Your table assignment is: ${M.table_assignment}`:""}`}}catch(A){return{success:!1,message:"Error processing check-in: "+A.message}}};if(r)return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t)return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Event Not Found"}),d.jsx("p",{className:"text-gray-600",children:"The event you're looking for doesn't exist or has been removed."})]})});const D=t!=null&&t.custom_background?{backgroundImage:`url(${t.custom_background})`,backgroundSize:"cover",backgroundPosition:"center"}:{};return d.jsx("div",{className:"min-h-screen bg-gray-50",children:d.jsx("div",{style:D,className:"min-h-screen flex items-center justify-center p-4",children:d.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-lg shadow-xl p-8 max-w-md w-full",children:[(t==null?void 0:t.custom_logo)&&d.jsx("div",{className:"flex justify-center mb-6",children:d.jsx("img",{src:Cs(t.custom_logo),alt:"Event Logo",className:"h-16 object-contain"})}),d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.name}),d.jsx("p",{className:"text-gray-600 mb-4",children:t.company.name}),d.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.date&&d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx(mn,{className:"h-4 w-4 mr-2"}),new Date(t.date).toLocaleDateString()]}),t.location&&d.jsxs("div",{className:"flex items-center justify-center",children:[d.jsx(pr,{className:"h-4 w-4 mr-2"}),t.location]})]})]}),g!=null&&g.success?d.jsxs("div",{className:"text-center space-y-6",children:[d.jsx("div",{className:"flex justify-center",children:d.jsx("div",{className:"bg-green-100 rounded-full p-4",children:d.jsx(Zi,{className:"h-12 w-12 text-green-600"})})}),d.jsxs("div",{children:[d.jsx("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Welcome!"}),d.jsx("p",{className:"text-green-700 text-lg mb-4",children:(O=g.attendee)==null?void 0:O.name}),d.jsx("p",{className:"text-gray-600 mb-4",children:g.message}),((V=g.attendee)==null?void 0:V.table_assignment)&&d.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-4",children:d.jsxs("div",{className:"flex items-center justify-center text-blue-800",children:[d.jsx(pr,{className:"h-5 w-5 mr-2"}),d.jsxs("span",{className:"font-semibold",children:["Table: ",g.attendee.table_assignment]})]})}),d.jsxs("div",{className:"flex items-center justify-center text-gray-600 text-sm",children:[d.jsx(J2,{className:"h-4 w-4 mr-2"}),"Checked in at ",new Date().toLocaleTimeString()]})]}),d.jsx("button",{onClick:()=>{y(null),h("")},className:"bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Check In Another Person"})]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Self Check-In"}),d.jsx("p",{className:"text-gray-600",children:"Enter your identification number or staff ID to check in"})]}),d.jsxs("form",{onSubmit:N,className:"space-y-4",children:[d.jsx("div",{children:d.jsx("input",{type:"text",value:l,onChange:T=>h(T.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg",placeholder:"Enter ID Number or Staff ID",autoFocus:!0,disabled:x})}),d.jsx("button",{type:"submit",disabled:x||!l.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:x?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Checking In..."]}):d.jsxs(d.Fragment,{children:[d.jsx(Vc,{className:"h-5 w-5 mr-2"}),"Check In"]})})]})]}),g&&!g.success&&d.jsx("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:d.jsx("p",{className:"text-red-700 text-center",children:g.message})})]})})})}function zM({userCompany:e}){const[t,n]=R.useState([]),[r,a]=R.useState(""),[l,h]=R.useState(""),[g,y]=R.useState(!0),[x,w]=R.useState({eventId:"",customUrl:"",qrType:"registration",useLocalIP:!1,localIP:"",port:"3000"});R.useEffect(()=>{E()},[]),R.useEffect(()=>{r&&w(A=>({...A,eventId:r}))},[r]);const E=async()=>{try{y(!0);let A=xe.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(A=A.eq("company_id",e.company_id));const{data:_,error:M}=await A.order("created_at",{ascending:!1});if(M)throw M;const H=(_==null?void 0:_.map($=>({...$,company:Array.isArray($.company)?$.company[0]:$.company})))||[];n(H),e&&H&&H.length>0&&a(H[0].id)}catch(A){ue.error("Error fetching events: "+A.message)}finally{y(!1)}},N=async()=>{try{return(await(await fetch("https://api.ipify.org?format=json")).json()).ip}catch(A){return console.error("Error getting local IP:",A),"192.168.1.100"}},I=async()=>{if(!x.eventId){ue.error("Please select an event");return}try{let A="";x.useLocalIP?A=`http://${x.localIP}:${x.port}`:A=window.location.origin;let _="";switch(x.qrType){case"registration":_=`/public/register/${x.eventId}`;break;case"checkin":_=`/public/checkin/${x.eventId}`;break;case"gallery":_=`/public/gallery/${x.eventId}`;break;case"voting":_=`/public/voting/${x.eventId}`;break;case"venue":_=`/public/venue/${x.eventId}`;break}const M=A+_,H=await Gs.toDataURL(M,{width:300,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}});h(H),ue.success("QR Code generated successfully!")}catch(A){ue.error("Error generating QR code: "+A.message)}},D=()=>{if(!l)return;const A=document.createElement("a");A.download=`qr-${x.qrType}-${x.eventId}.png`,A.href=l,A.click()},O=async()=>{if(l)try{await navigator.clipboard.writeText(l),ue.success("QR Code image URL copied to clipboard!")}catch{ue.error("Failed to copy QR code")}},V=async()=>{if(!x.eventId)return;let A="";x.useLocalIP?A=`http://${x.localIP}:${x.port}`:A=window.location.origin;let _="";switch(x.qrType){case"registration":_=`/public/register/${x.eventId}`;break;case"checkin":_=`/public/checkin/${x.eventId}`;break;case"gallery":_=`/public/gallery/${x.eventId}`;break;case"voting":_=`/public/voting/${x.eventId}`;break;case"venue":_=`/public/venue/${x.eventId}`;break}const M=A+_;try{await navigator.clipboard.writeText(M),ue.success("URL copied to clipboard!")}catch{ue.error("Failed to copy URL")}},T=async()=>{const A=await N();w(_=>({..._,localIP:A})),ue.success("Local IP detected: "+A)};return g?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):d.jsxs("div",{children:[d.jsx("div",{className:"flex justify-between items-center mb-8",children:d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"QR Code Generator"}),d.jsx("p",{className:"text-gray-600 mt-2",children:"Create custom QR codes for your events with local network support"})]})}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center",children:[d.jsx(Og,{className:"h-5 w-5 mr-2"}),"QR Code Configuration"]}),d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),t.length===0?d.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:"No events found. Create an event first."}):d.jsxs("select",{value:r,onChange:A=>a(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"",children:"Choose an event"}),t.map(A=>d.jsx("option",{value:A.id,children:e?A.name:`${A.name} (${A.company.name})`},A.id))]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code Type"}),d.jsxs("select",{value:x.qrType,onChange:A=>w(_=>({..._,qrType:A.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[d.jsx("option",{value:"registration",children:"Registration"}),d.jsx("option",{value:"checkin",children:"Check-In"}),d.jsx("option",{value:"gallery",children:"Gallery Upload"}),d.jsx("option",{value:"voting",children:"Voting"}),d.jsx("option",{value:"venue",children:"Venue Layout"})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Configuration"}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",id:"useLocalIP",checked:x.useLocalIP,onChange:A=>w(_=>({..._,useLocalIP:A.target.checked})),className:"rounded"}),d.jsx("label",{htmlFor:"useLocalIP",className:"text-sm text-gray-700",children:"Use Local Network IP"})]}),x.useLocalIP&&d.jsxs("div",{className:"space-y-3 pl-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Local IP Address"}),d.jsxs("div",{className:"flex space-x-2",children:[d.jsx("input",{type:"text",value:x.localIP,onChange:A=>w(_=>({..._,localIP:A.target.value})),placeholder:"192.168.1.100",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),d.jsx("button",{onClick:T,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",title:"Detect Local IP",children:d.jsx(AI,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port Number"}),d.jsx("input",{type:"text",value:x.port,onChange:A=>w(_=>({..._,port:A.target.value})),placeholder:"3000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),d.jsx("div",{className:"bg-gray-50 p-3 rounded-md",children:d.jsxs("p",{className:"text-sm text-gray-600",children:[d.jsx("strong",{children:"Generated URL:"}),d.jsx("br",{}),x.useLocalIP?`http://${x.localIP}:${x.port}/public/${x.qrType}/${x.eventId}`:`${window.location.origin}/public/${x.qrType}/${x.eventId}`]})})]})]}),d.jsxs("button",{onClick:I,disabled:!r,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[d.jsx(vs,{className:"h-5 w-5 mr-2"}),"Generate QR Code"]})]})]}),d.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[d.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center",children:[d.jsx(vs,{className:"h-5 w-5 mr-2"}),"Generated QR Code"]}),l?d.jsxs("div",{className:"space-y-4",children:[d.jsx("div",{className:"text-center",children:d.jsx("img",{src:l,alt:"Generated QR Code",className:"mx-auto border-2 border-gray-200 rounded-lg shadow-lg"})}),d.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[d.jsxs("button",{onClick:D,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[d.jsx(Ah,{className:"h-4 w-4 mr-2"}),"Download"]}),d.jsxs("button",{onClick:O,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[d.jsx(jT,{className:"h-4 w-4 mr-2"}),"Copy Image URL"]}),d.jsxs("button",{onClick:V,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",children:[d.jsx(UT,{className:"h-4 w-4 mr-2"}),"Copy URL"]})]})]}):d.jsxs("div",{className:"text-center py-12 text-gray-500",children:[d.jsx(vs,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),d.jsx("p",{children:"Generate a QR code to see it here"})]})]})]})]})}function $M(){const[e,t]=R.useState(null),[n,r]=R.useState(null),[a,l]=R.useState(!0),[h,g]=R.useState(!0);R.useEffect(()=>{if("https://fylfbymwfymtcumpfcvf.supabase.co".includes("your-project")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5bGZieW13ZnltdGN1bXBmY3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODkyOTAsImV4cCI6MjA2OTM2NTI5MH0.k7sy5m9jucYj_8NRBXCFkOm17rVjAKLAR12dAv59pP4".includes("your-anon-key")){g(!1),l(!1);return}xe.auth.getSession().then(({data:{session:N}})=>{t((N==null?void 0:N.user)??null),l(!1)}).catch(N=>{g(!1),l(!1)});const{data:{subscription:E}}=xe.auth.onAuthStateChange((N,I)=>{t((I==null?void 0:I.user)??null),I!=null&&I.user?y(I.user.id):r(null)});return()=>E.unsubscribe()},[]);const y=async x=>{try{const{data:w,error:E}=await xe.from("company_users").select(`
          *,
          company:companies(*)
        `).eq("id",x).maybeSingle();if(E)return;r(w)}catch{}};return h?a?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):d.jsx(QS,{children:d.jsxs("div",{className:"App",children:[d.jsx(X_,{position:"top-right"}),d.jsxs(Fp,{children:[d.jsx(Kt,{path:"/public/register/:eventId",element:d.jsx(PM,{})}),d.jsx(Kt,{path:"/public/ticket/:attendeeId",element:d.jsx(LM,{})}),d.jsx(Kt,{path:"/public/checkin/:eventId",element:d.jsx(VM,{})}),d.jsx(Kt,{path:"/public/gallery/:eventId",element:d.jsx(BM,{})}),d.jsx(Kt,{path:"/public/voting/:sessionId",element:d.jsx(FM,{})}),d.jsx(Kt,{path:"/public/venue/:eventId/:attendeeId",element:d.jsx(UM,{})}),d.jsx(Kt,{path:"/auth",element:e?d.jsx(yf,{to:"/admin"}):d.jsx(d6,{})}),d.jsx(Kt,{path:"/admin/*",element:e?d.jsx(u6,{userCompany:n,children:d.jsxs(Fp,{children:[d.jsx(Kt,{path:"/",element:d.jsx(x6,{userCompany:n})}),d.jsx(Kt,{path:"/companies",element:d.jsx(v6,{})}),d.jsx(Kt,{path:"/events",element:d.jsx(l8,{userCompany:n})}),d.jsx(Kt,{path:"/progress",element:d.jsx(RM,{})}),d.jsx(Kt,{path:"/attendees",element:d.jsx(bx,{userCompany:n})}),d.jsx(Kt,{path:"/checkin",element:d.jsx(K8,{userCompany:n})}),d.jsx(Kt,{path:"/welcome-monitor",element:d.jsx(TM,{userCompany:n})}),d.jsx(Kt,{path:"/lucky-draw",element:d.jsx(IM,{userCompany:n})}),d.jsx(Kt,{path:"/gallery",element:d.jsx(jM,{userCompany:n})}),d.jsx(Kt,{path:"/seating",element:d.jsx(kM,{userCompany:n})}),d.jsx(Kt,{path:"/qr-generator",element:d.jsx(zM,{userCompany:n})}),d.jsx(Kt,{path:"/attendees",element:d.jsx(bx,{userCompany:n})}),d.jsx(Kt,{path:"/voting",element:d.jsx(MM,{userCompany:n})}),d.jsx(Kt,{path:"/voting-monitor",element:d.jsx(DM,{userCompany:n})})]})}):d.jsx(yf,{to:"/auth"})}),d.jsx(Kt,{path:"/",element:d.jsx(yf,{to:e?"/admin":"/auth"})})]})]})}):d.jsx(OI,{})}Kf.createRoot(document.getElementById("root")).render(d.jsx(Rm.StrictMode,{children:d.jsx($M,{})}));
