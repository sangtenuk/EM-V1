function QA(e,t){for(var n=0;n<t.length;n++){const i=t[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in e)){const a=Object.getOwnPropertyDescriptor(i,r);a&&Object.defineProperty(e,r,a.get?a:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var sn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function D1(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function $A(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(i){var r=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return e[i]}})}),n}var I2={exports:{}},jd={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JA=Symbol.for("react.transitional.element"),eS=Symbol.for("react.fragment");function D2(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var r in t)r!=="key"&&(n[r]=t[r])}else n=t;return t=n.ref,{$$typeof:JA,type:e,key:i,ref:t!==void 0?t:null,props:n}}jd.Fragment=eS;jd.jsx=D2;jd.jsxs=D2;I2.exports=jd;var m=I2.exports,R2={exports:{}},Ie={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R1=Symbol.for("react.transitional.element"),tS=Symbol.for("react.portal"),nS=Symbol.for("react.fragment"),iS=Symbol.for("react.strict_mode"),sS=Symbol.for("react.profiler"),rS=Symbol.for("react.consumer"),aS=Symbol.for("react.context"),oS=Symbol.for("react.forward_ref"),lS=Symbol.for("react.suspense"),cS=Symbol.for("react.memo"),O2=Symbol.for("react.lazy"),Qg=Symbol.iterator;function uS(e){return e===null||typeof e!="object"?null:(e=Qg&&e[Qg]||e["@@iterator"],typeof e=="function"?e:null)}var j2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k2=Object.assign,L2={};function Eo(e,t,n){this.props=e,this.context=t,this.refs=L2,this.updater=n||j2}Eo.prototype.isReactComponent={};Eo.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Eo.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function B2(){}B2.prototype=Eo.prototype;function O1(e,t,n){this.props=e,this.context=t,this.refs=L2,this.updater=n||j2}var j1=O1.prototype=new B2;j1.constructor=O1;k2(j1,Eo.prototype);j1.isPureReactComponent=!0;var $g=Array.isArray,mt={H:null,A:null,T:null,S:null,V:null},P2=Object.prototype.hasOwnProperty;function k1(e,t,n,i,r,a){return n=a.ref,{$$typeof:R1,type:e,key:t,ref:n!==void 0?n:null,props:a}}function dS(e,t){return k1(e.type,t,void 0,void 0,void 0,e.props)}function L1(e){return typeof e=="object"&&e!==null&&e.$$typeof===R1}function hS(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Jg=/\/+/g;function Ph(e,t){return typeof e=="object"&&e!==null&&e.key!=null?hS(""+e.key):t.toString(36)}function ep(){}function fS(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(ep,ep):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function Sa(e,t,n,i,r){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(a){case"bigint":case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case R1:case tS:c=!0;break;case O2:return c=e._init,Sa(c(e._payload),t,n,i,r)}}if(c)return r=r(e),c=i===""?"."+Ph(e,0):i,$g(r)?(n="",c!=null&&(n=c.replace(Jg,"$&/")+"/"),Sa(r,t,n,"",function(p){return p})):r!=null&&(L1(r)&&(r=dS(r,n+(r.key==null||e&&e.key===r.key?"":(""+r.key).replace(Jg,"$&/")+"/")+c)),t.push(r)),1;c=0;var h=i===""?".":i+":";if($g(e))for(var g=0;g<e.length;g++)i=e[g],a=h+Ph(i,g),c+=Sa(i,t,n,a,r);else if(g=uS(e),typeof g=="function")for(e=g.call(e),g=0;!(i=e.next()).done;)i=i.value,a=h+Ph(i,g++),c+=Sa(i,t,n,a,r);else if(a==="object"){if(typeof e.then=="function")return Sa(fS(e),t,n,i,r);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return c}function $c(e,t,n){if(e==null)return e;var i=[],r=0;return Sa(e,i,"","",function(a){return t.call(n,a,r++)}),i}function mS(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tp=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function gS(){}Ie.Children={map:$c,forEach:function(e,t,n){$c(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return $c(e,function(){t++}),t},toArray:function(e){return $c(e,function(t){return t})||[]},only:function(e){if(!L1(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ie.Component=Eo;Ie.Fragment=nS;Ie.Profiler=sS;Ie.PureComponent=O1;Ie.StrictMode=iS;Ie.Suspense=lS;Ie.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=mt;Ie.__COMPILER_RUNTIME={__proto__:null,c:function(e){return mt.H.useMemoCache(e)}};Ie.cache=function(e){return function(){return e.apply(null,arguments)}};Ie.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=k2({},e.props),r=e.key,a=void 0;if(t!=null)for(c in t.ref!==void 0&&(a=void 0),t.key!==void 0&&(r=""+t.key),t)!P2.call(t,c)||c==="key"||c==="__self"||c==="__source"||c==="ref"&&t.ref===void 0||(i[c]=t[c]);var c=arguments.length-2;if(c===1)i.children=n;else if(1<c){for(var h=Array(c),g=0;g<c;g++)h[g]=arguments[g+2];i.children=h}return k1(e.type,r,void 0,void 0,a,i)};Ie.createContext=function(e){return e={$$typeof:aS,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:rS,_context:e},e};Ie.createElement=function(e,t,n){var i,r={},a=null;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)P2.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(r[i]=t[i]);var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){for(var h=Array(c),g=0;g<c;g++)h[g]=arguments[g+2];r.children=h}if(e&&e.defaultProps)for(i in c=e.defaultProps,c)r[i]===void 0&&(r[i]=c[i]);return k1(e,a,void 0,void 0,null,r)};Ie.createRef=function(){return{current:null}};Ie.forwardRef=function(e){return{$$typeof:oS,render:e}};Ie.isValidElement=L1;Ie.lazy=function(e){return{$$typeof:O2,_payload:{_status:-1,_result:e},_init:mS}};Ie.memo=function(e,t){return{$$typeof:cS,type:e,compare:t===void 0?null:t}};Ie.startTransition=function(e){var t=mt.T,n={};mt.T=n;try{var i=e(),r=mt.S;r!==null&&r(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(gS,tp)}catch(a){tp(a)}finally{mt.T=t}};Ie.unstable_useCacheRefresh=function(){return mt.H.useCacheRefresh()};Ie.use=function(e){return mt.H.use(e)};Ie.useActionState=function(e,t,n){return mt.H.useActionState(e,t,n)};Ie.useCallback=function(e,t){return mt.H.useCallback(e,t)};Ie.useContext=function(e){return mt.H.useContext(e)};Ie.useDebugValue=function(){};Ie.useDeferredValue=function(e,t){return mt.H.useDeferredValue(e,t)};Ie.useEffect=function(e,t,n){var i=mt.H;if(typeof n=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return i.useEffect(e,t)};Ie.useId=function(){return mt.H.useId()};Ie.useImperativeHandle=function(e,t,n){return mt.H.useImperativeHandle(e,t,n)};Ie.useInsertionEffect=function(e,t){return mt.H.useInsertionEffect(e,t)};Ie.useLayoutEffect=function(e,t){return mt.H.useLayoutEffect(e,t)};Ie.useMemo=function(e,t){return mt.H.useMemo(e,t)};Ie.useOptimistic=function(e,t){return mt.H.useOptimistic(e,t)};Ie.useReducer=function(e,t,n){return mt.H.useReducer(e,t,n)};Ie.useRef=function(e){return mt.H.useRef(e)};Ie.useState=function(e){return mt.H.useState(e)};Ie.useSyncExternalStore=function(e,t,n){return mt.H.useSyncExternalStore(e,t,n)};Ie.useTransition=function(){return mt.H.useTransition()};Ie.version="19.1.0";R2.exports=Ie;var j=R2.exports;const pS=D1(j);var U2={exports:{}},kd={},F2={exports:{}},V2={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ie,se){var W=ie.length;ie.push(se);e:for(;0<W;){var ae=W-1>>>1,$=ie[ae];if(0<r($,se))ie[ae]=se,ie[W]=$,W=ae;else break e}}function n(ie){return ie.length===0?null:ie[0]}function i(ie){if(ie.length===0)return null;var se=ie[0],W=ie.pop();if(W!==se){ie[0]=W;e:for(var ae=0,$=ie.length,fe=$>>>1;ae<fe;){var Ae=2*(ae+1)-1,Qe=ie[Ae],Te=Ae+1,mn=ie[Te];if(0>r(Qe,W))Te<$&&0>r(mn,Qe)?(ie[ae]=mn,ie[Te]=W,ae=Te):(ie[ae]=Qe,ie[Ae]=W,ae=Ae);else if(Te<$&&0>r(mn,W))ie[ae]=mn,ie[Te]=W,ae=Te;else break e}}return se}function r(ie,se){var W=ie.sortIndex-se.sortIndex;return W!==0?W:ie.id-se.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,h=c.now();e.unstable_now=function(){return c.now()-h}}var g=[],p=[],y=1,w=null,E=3,A=!1,O=!1,I=!1,B=!1,T=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;function k(ie){for(var se=n(p);se!==null;){if(se.callback===null)i(p);else if(se.startTime<=ie)i(p),se.sortIndex=se.expirationTime,t(g,se);else break;se=n(p)}}function z(ie){if(I=!1,k(ie),!O)if(n(g)!==null)O=!0,D||(D=!0,ee());else{var se=n(p);se!==null&&Z(z,se.startTime-ie)}}var D=!1,L=-1,F=5,U=-1;function Y(){return B?!0:!(e.unstable_now()-U<F)}function J(){if(B=!1,D){var ie=e.unstable_now();U=ie;var se=!0;try{e:{O=!1,I&&(I=!1,N(L),L=-1),A=!0;var W=E;try{t:{for(k(ie),w=n(g);w!==null&&!(w.expirationTime>ie&&Y());){var ae=w.callback;if(typeof ae=="function"){w.callback=null,E=w.priorityLevel;var $=ae(w.expirationTime<=ie);if(ie=e.unstable_now(),typeof $=="function"){w.callback=$,k(ie),se=!0;break t}w===n(g)&&i(g),k(ie)}else i(g);w=n(g)}if(w!==null)se=!0;else{var fe=n(p);fe!==null&&Z(z,fe.startTime-ie),se=!1}}break e}finally{w=null,E=W,A=!1}se=void 0}}finally{se?ee():D=!1}}}var ee;if(typeof C=="function")ee=function(){C(J)};else if(typeof MessageChannel<"u"){var de=new MessageChannel,be=de.port2;de.port1.onmessage=J,ee=function(){be.postMessage(null)}}else ee=function(){T(J,0)};function Z(ie,se){L=T(function(){ie(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ie){ie.callback=null},e.unstable_forceFrameRate=function(ie){0>ie||125<ie?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<ie?Math.floor(1e3/ie):5},e.unstable_getCurrentPriorityLevel=function(){return E},e.unstable_next=function(ie){switch(E){case 1:case 2:case 3:var se=3;break;default:se=E}var W=E;E=se;try{return ie()}finally{E=W}},e.unstable_requestPaint=function(){B=!0},e.unstable_runWithPriority=function(ie,se){switch(ie){case 1:case 2:case 3:case 4:case 5:break;default:ie=3}var W=E;E=ie;try{return se()}finally{E=W}},e.unstable_scheduleCallback=function(ie,se,W){var ae=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?ae+W:ae):W=ae,ie){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=W+$,ie={id:y++,callback:se,priorityLevel:ie,startTime:W,expirationTime:$,sortIndex:-1},W>ae?(ie.sortIndex=W,t(p,ie),n(g)===null&&ie===n(p)&&(I?(N(L),L=-1):I=!0,Z(z,W-ae))):(ie.sortIndex=$,t(g,ie),O||A||(O=!0,D||(D=!0,ee()))),ie},e.unstable_shouldYield=Y,e.unstable_wrapCallback=function(ie){var se=E;return function(){var W=E;E=se;try{return ie.apply(this,arguments)}finally{E=W}}}})(V2);F2.exports=V2;var xS=F2.exports,z2={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yS=j;function H2(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function Ds(){}var bn={d:{f:Ds,r:function(){throw Error(H2(522))},D:Ds,C:Ds,L:Ds,m:Ds,X:Ds,S:Ds,M:Ds},p:0,findDOMNode:null},bS=Symbol.for("react.portal");function wS(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:bS,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var fl=yS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Ld(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=bn;vn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(H2(299));return wS(e,t,null,n)};vn.flushSync=function(e){var t=fl.T,n=bn.p;try{if(fl.T=null,bn.p=2,e)return e()}finally{fl.T=t,bn.p=n,bn.d.f()}};vn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,bn.d.C(e,t))};vn.prefetchDNS=function(e){typeof e=="string"&&bn.d.D(e)};vn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Ld(n,t.crossOrigin),r=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?bn.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:r,fetchPriority:a}):n==="script"&&bn.d.X(e,{crossOrigin:i,integrity:r,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};vn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Ld(t.as,t.crossOrigin);bn.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&bn.d.M(e)};vn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Ld(n,t.crossOrigin);bn.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};vn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Ld(t.as,t.crossOrigin);bn.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else bn.d.m(e)};vn.requestFormReset=function(e){bn.d.r(e)};vn.unstable_batchedUpdates=function(e,t){return e(t)};vn.useFormState=function(e,t,n){return fl.H.useFormState(e,t,n)};vn.useFormStatus=function(){return fl.H.useHostTransitionStatus()};vn.version="19.1.0";function G2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G2)}catch(e){console.error(e)}}G2(),z2.exports=vn;var vS=z2.exports;/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=xS,Y2=j,ES=vS;function te(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function q2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function uc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function X2(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function np(e){if(uc(e)!==e)throw Error(te(188))}function AS(e){var t=e.alternate;if(!t){if(t=uc(e),t===null)throw Error(te(188));return t!==e?null:e}for(var n=e,i=t;;){var r=n.return;if(r===null)break;var a=r.alternate;if(a===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===n)return np(r),e;if(a===i)return np(r),t;a=a.sibling}throw Error(te(188))}if(n.return!==i.return)n=r,i=a;else{for(var c=!1,h=r.child;h;){if(h===n){c=!0,n=r,i=a;break}if(h===i){c=!0,i=r,n=a;break}h=h.sibling}if(!c){for(h=a.child;h;){if(h===n){c=!0,n=a,i=r;break}if(h===i){c=!0,i=a,n=r;break}h=h.sibling}if(!c)throw Error(te(189))}}if(n.alternate!==i)throw Error(te(190))}if(n.tag!==3)throw Error(te(188));return n.stateNode.current===n?e:t}function W2(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=W2(e),t!==null)return t;e=e.sibling}return null}var dt=Object.assign,SS=Symbol.for("react.element"),Jc=Symbol.for("react.transitional.element"),al=Symbol.for("react.portal"),Ia=Symbol.for("react.fragment"),Z2=Symbol.for("react.strict_mode"),Zf=Symbol.for("react.profiler"),CS=Symbol.for("react.provider"),K2=Symbol.for("react.consumer"),is=Symbol.for("react.context"),B1=Symbol.for("react.forward_ref"),Kf=Symbol.for("react.suspense"),Qf=Symbol.for("react.suspense_list"),P1=Symbol.for("react.memo"),Ps=Symbol.for("react.lazy"),$f=Symbol.for("react.activity"),TS=Symbol.for("react.memo_cache_sentinel"),ip=Symbol.iterator;function Zo(e){return e===null||typeof e!="object"?null:(e=ip&&e[ip]||e["@@iterator"],typeof e=="function"?e:null)}var NS=Symbol.for("react.client.reference");function Jf(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===NS?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Ia:return"Fragment";case Zf:return"Profiler";case Z2:return"StrictMode";case Kf:return"Suspense";case Qf:return"SuspenseList";case $f:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case al:return"Portal";case is:return(e.displayName||"Context")+".Provider";case K2:return(e._context.displayName||"Context")+".Consumer";case B1:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case P1:return t=e.displayName||null,t!==null?t:Jf(e.type)||"Memo";case Ps:t=e._payload,e=e._init;try{return Jf(e(t))}catch{}}return null}var ol=Array.isArray,Ce=Y2.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,qe=ES.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Vr={pending:!1,data:null,method:null,action:null},e0=[],Da=-1;function Yi(e){return{current:e}}function Kt(e){0>Da||(e.current=e0[Da],e0[Da]=null,Da--)}function gt(e,t){Da++,e0[Da]=e.current,e.current=t}var Ui=Yi(null),Bl=Yi(null),$s=Yi(null),Gu=Yi(null);function Yu(e,t){switch(gt($s,t),gt(Bl,e),gt(Ui,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?lx(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=lx(t),e=fv(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}Kt(Ui),gt(Ui,e)}function io(){Kt(Ui),Kt(Bl),Kt($s)}function t0(e){e.memoizedState!==null&&gt(Gu,e);var t=Ui.current,n=fv(t,e.type);t!==n&&(gt(Bl,e),gt(Ui,n))}function qu(e){Bl.current===e&&(Kt(Ui),Kt(Bl)),Gu.current===e&&(Kt(Gu),Xl._currentValue=Vr)}var n0=Object.prototype.hasOwnProperty,U1=zt.unstable_scheduleCallback,Uh=zt.unstable_cancelCallback,_S=zt.unstable_shouldYield,MS=zt.unstable_requestPaint,Fi=zt.unstable_now,IS=zt.unstable_getCurrentPriorityLevel,Q2=zt.unstable_ImmediatePriority,$2=zt.unstable_UserBlockingPriority,Xu=zt.unstable_NormalPriority,DS=zt.unstable_LowPriority,J2=zt.unstable_IdlePriority,RS=zt.log,OS=zt.unstable_setDisableYieldValue,dc=null,Xn=null;function Xs(e){if(typeof RS=="function"&&OS(e),Xn&&typeof Xn.setStrictMode=="function")try{Xn.setStrictMode(dc,e)}catch{}}var Wn=Math.clz32?Math.clz32:LS,jS=Math.log,kS=Math.LN2;function LS(e){return e>>>=0,e===0?32:31-(jS(e)/kS|0)|0}var eu=256,tu=4194304;function Rr(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Bd(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var r=0,a=e.suspendedLanes,c=e.pingedLanes;e=e.warmLanes;var h=i&134217727;return h!==0?(i=h&~a,i!==0?r=Rr(i):(c&=h,c!==0?r=Rr(c):n||(n=h&~e,n!==0&&(r=Rr(n))))):(h=i&~a,h!==0?r=Rr(h):c!==0?r=Rr(c):n||(n=i&~e,n!==0&&(r=Rr(n)))),r===0?0:t!==0&&t!==r&&!(t&a)&&(a=r&-r,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:r}function hc(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function BS(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function eb(){var e=eu;return eu<<=1,!(eu&4194048)&&(eu=256),e}function tb(){var e=tu;return tu<<=1,!(tu&62914560)&&(tu=4194304),e}function Fh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function fc(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function PS(e,t,n,i,r,a){var c=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var h=e.entanglements,g=e.expirationTimes,p=e.hiddenUpdates;for(n=c&~n;0<n;){var y=31-Wn(n),w=1<<y;h[y]=0,g[y]=-1;var E=p[y];if(E!==null)for(p[y]=null,y=0;y<E.length;y++){var A=E[y];A!==null&&(A.lane&=-536870913)}n&=~w}i!==0&&nb(e,i,0),a!==0&&r===0&&e.tag!==0&&(e.suspendedLanes|=a&~(c&~t))}function nb(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Wn(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&4194090}function ib(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Wn(n),r=1<<i;r&t|e[i]&t&&(e[i]|=t),n&=~r}}function F1(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function V1(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function sb(){var e=qe.p;return e!==0?e:(e=window.event,e===void 0?32:Av(e.type))}function US(e,t){var n=qe.p;try{return qe.p=e,t()}finally{qe.p=n}}var pr=Math.random().toString(36).slice(2),un="__reactFiber$"+pr,kn="__reactProps$"+pr,Ao="__reactContainer$"+pr,i0="__reactEvents$"+pr,FS="__reactListeners$"+pr,VS="__reactHandles$"+pr,sp="__reactResources$"+pr,mc="__reactMarker$"+pr;function z1(e){delete e[un],delete e[kn],delete e[i0],delete e[FS],delete e[VS]}function Ra(e){var t=e[un];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ao]||n[un]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=dx(e);e!==null;){if(n=e[un])return n;e=dx(e)}return t}e=n,n=e.parentNode}return null}function So(e){if(e=e[un]||e[Ao]){var t=e.tag;if(t===5||t===6||t===13||t===26||t===27||t===3)return e}return null}function ll(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(te(33))}function Za(e){var t=e[sp];return t||(t=e[sp]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Wt(e){e[mc]=!0}var rb=new Set,ab={};function ta(e,t){so(e,t),so(e+"Capture",t)}function so(e,t){for(ab[e]=t,e=0;e<t.length;e++)rb.add(t[e])}var zS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rp={},ap={};function HS(e){return n0.call(ap,e)?!0:n0.call(rp,e)?!1:zS.test(e)?ap[e]=!0:(rp[e]=!0,!1)}function Su(e,t,n){if(HS(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function nu(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function Ki(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}var Vh,op;function Ca(e){if(Vh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Vh=t&&t[1]||"",op=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Vh+e+op}var zh=!1;function Hh(e,t){if(!e||zh)return"";zh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var w=function(){throw Error()};if(Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(A){var E=A}Reflect.construct(e,[],w)}else{try{w.call()}catch(A){E=A}e.call(w.prototype)}}else{try{throw Error()}catch(A){E=A}(w=e())&&typeof w.catch=="function"&&w.catch(function(){})}}catch(A){if(A&&E&&typeof A.stack=="string")return[A.stack,E.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var r=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");r&&r.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),c=a[0],h=a[1];if(c&&h){var g=c.split(`
`),p=h.split(`
`);for(r=i=0;i<g.length&&!g[i].includes("DetermineComponentFrameRoot");)i++;for(;r<p.length&&!p[r].includes("DetermineComponentFrameRoot");)r++;if(i===g.length||r===p.length)for(i=g.length-1,r=p.length-1;1<=i&&0<=r&&g[i]!==p[r];)r--;for(;1<=i&&0<=r;i--,r--)if(g[i]!==p[r]){if(i!==1||r!==1)do if(i--,r--,0>r||g[i]!==p[r]){var y=`
`+g[i].replace(" at new "," at ");return e.displayName&&y.includes("<anonymous>")&&(y=y.replace("<anonymous>",e.displayName)),y}while(1<=i&&0<=r);break}}}finally{zh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Ca(n):""}function GS(e){switch(e.tag){case 26:case 27:case 5:return Ca(e.type);case 16:return Ca("Lazy");case 13:return Ca("Suspense");case 19:return Ca("SuspenseList");case 0:case 15:return Hh(e.type,!1);case 11:return Hh(e.type.render,!1);case 1:return Hh(e.type,!0);case 31:return Ca("Activity");default:return""}}function lp(e){try{var t="";do t+=GS(e),e=e.return;while(e);return t}catch(n){return`
Error generating stack: `+n.message+`
`+n.stack}}function ai(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ob(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function YS(e){var t=ob(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(c){i=""+c,a.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(c){i=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Wu(e){e._valueTracker||(e._valueTracker=YS(e))}function lb(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=ob(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Zu(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var qS=/[\n"\\]/g;function ci(e){return e.replace(qS,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function s0(e,t,n,i,r,a,c,h){e.name="",c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"?e.type=c:e.removeAttribute("type"),t!=null?c==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+ai(t)):e.value!==""+ai(t)&&(e.value=""+ai(t)):c!=="submit"&&c!=="reset"||e.removeAttribute("value"),t!=null?r0(e,c,ai(t)):n!=null?r0(e,c,ai(n)):i!=null&&e.removeAttribute("value"),r==null&&a!=null&&(e.defaultChecked=!!a),r!=null&&(e.checked=r&&typeof r!="function"&&typeof r!="symbol"),h!=null&&typeof h!="function"&&typeof h!="symbol"&&typeof h!="boolean"?e.name=""+ai(h):e.removeAttribute("name")}function cb(e,t,n,i,r,a,c,h){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null))return;n=n!=null?""+ai(n):"",t=t!=null?""+ai(t):n,h||t===e.value||(e.value=t),e.defaultValue=t}i=i??r,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=h?e.checked:!!i,e.defaultChecked=!!i,c!=null&&typeof c!="function"&&typeof c!="symbol"&&typeof c!="boolean"&&(e.name=c)}function r0(e,t,n){t==="number"&&Zu(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Ka(e,t,n,i){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&i&&(e[n].defaultSelected=!0)}else{for(n=""+ai(n),t=null,r=0;r<e.length;r++){if(e[r].value===n){e[r].selected=!0,i&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function ub(e,t,n){if(t!=null&&(t=""+ai(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+ai(n):""}function db(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(te(92));if(ol(i)){if(1<i.length)throw Error(te(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=ai(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i)}function ro(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var XS=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function cp(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||XS.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function hb(e,t,n){if(t!=null&&typeof t!="object")throw Error(te(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var r in t)i=t[r],t.hasOwnProperty(r)&&n[r]!==i&&cp(e,r,i)}else for(var a in t)t.hasOwnProperty(a)&&cp(e,a,t[a])}function H1(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var WS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ZS=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cu(e){return ZS.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var a0=null;function G1(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Oa=null,Qa=null;function up(e){var t=So(e);if(t&&(e=t.stateNode)){var n=e[kn]||null;e:switch(e=t.stateNode,t.type){case"input":if(s0(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+ci(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var r=i[kn]||null;if(!r)throw Error(te(90));s0(i,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&lb(i)}break e;case"textarea":ub(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Ka(e,!!n.multiple,t,!1)}}}var Gh=!1;function fb(e,t,n){if(Gh)return e(t,n);Gh=!0;try{var i=e(t);return i}finally{if(Gh=!1,(Oa!==null||Qa!==null)&&(Xd(),Oa&&(t=Oa,e=Qa,Qa=Oa=null,up(t),e)))for(t=0;t<e.length;t++)up(e[t])}}function Pl(e,t){var n=e.stateNode;if(n===null)return null;var i=n[kn]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(te(231,t,typeof n));return n}var ms=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),o0=!1;if(ms)try{var Ko={};Object.defineProperty(Ko,"passive",{get:function(){o0=!0}}),window.addEventListener("test",Ko,Ko),window.removeEventListener("test",Ko,Ko)}catch{o0=!1}var Ws=null,Y1=null,Tu=null;function mb(){if(Tu)return Tu;var e,t=Y1,n=t.length,i,r="value"in Ws?Ws.value:Ws.textContent,a=r.length;for(e=0;e<n&&t[e]===r[e];e++);var c=n-e;for(i=1;i<=c&&t[n-i]===r[a-i];i++);return Tu=r.slice(e,1<i?1-i:void 0)}function Nu(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iu(){return!0}function dp(){return!1}function Ln(e){function t(n,i,r,a,c){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var h in e)e.hasOwnProperty(h)&&(n=e[h],this[h]=n?n(a):a[h]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?iu:dp,this.isPropagationStopped=dp,this}return dt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iu)},persist:function(){},isPersistent:iu}),t}var na={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pd=Ln(na),gc=dt({},na,{view:0,detail:0}),KS=Ln(gc),Yh,qh,Qo,Ud=dt({},gc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q1,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Qo&&(Qo&&e.type==="mousemove"?(Yh=e.screenX-Qo.screenX,qh=e.screenY-Qo.screenY):qh=Yh=0,Qo=e),Yh)},movementY:function(e){return"movementY"in e?e.movementY:qh}}),hp=Ln(Ud),QS=dt({},Ud,{dataTransfer:0}),$S=Ln(QS),JS=dt({},gc,{relatedTarget:0}),Xh=Ln(JS),eC=dt({},na,{animationName:0,elapsedTime:0,pseudoElement:0}),tC=Ln(eC),nC=dt({},na,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),iC=Ln(nC),sC=dt({},na,{data:0}),fp=Ln(sC),rC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lC(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=oC[e])?!!t[e]:!1}function q1(){return lC}var cC=dt({},gc,{key:function(e){if(e.key){var t=rC[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Nu(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?aC[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q1,charCode:function(e){return e.type==="keypress"?Nu(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Nu(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),uC=Ln(cC),dC=dt({},Ud,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),mp=Ln(dC),hC=dt({},gc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q1}),fC=Ln(hC),mC=dt({},na,{propertyName:0,elapsedTime:0,pseudoElement:0}),gC=Ln(mC),pC=dt({},Ud,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xC=Ln(pC),yC=dt({},na,{newState:0,oldState:0}),bC=Ln(yC),wC=[9,13,27,32],X1=ms&&"CompositionEvent"in window,ml=null;ms&&"documentMode"in document&&(ml=document.documentMode);var vC=ms&&"TextEvent"in window&&!ml,gb=ms&&(!X1||ml&&8<ml&&11>=ml),gp=" ",pp=!1;function pb(e,t){switch(e){case"keyup":return wC.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xb(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ja=!1;function EC(e,t){switch(e){case"compositionend":return xb(t);case"keypress":return t.which!==32?null:(pp=!0,gp);case"textInput":return e=t.data,e===gp&&pp?null:e;default:return null}}function AC(e,t){if(ja)return e==="compositionend"||!X1&&pb(e,t)?(e=mb(),Tu=Y1=Ws=null,ja=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gb&&t.locale!=="ko"?null:t.data;default:return null}}var SC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!SC[e.type]:t==="textarea"}function yb(e,t,n,i){Oa?Qa?Qa.push(i):Qa=[i]:Oa=i,t=fd(t,"onChange"),0<t.length&&(n=new Pd("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var gl=null,Ul=null;function CC(e){uv(e,0)}function Fd(e){var t=ll(e);if(lb(t))return e}function yp(e,t){if(e==="change")return t}var bb=!1;if(ms){var Wh;if(ms){var Zh="oninput"in document;if(!Zh){var bp=document.createElement("div");bp.setAttribute("oninput","return;"),Zh=typeof bp.oninput=="function"}Wh=Zh}else Wh=!1;bb=Wh&&(!document.documentMode||9<document.documentMode)}function wp(){gl&&(gl.detachEvent("onpropertychange",wb),Ul=gl=null)}function wb(e){if(e.propertyName==="value"&&Fd(Ul)){var t=[];yb(t,Ul,e,G1(e)),fb(CC,t)}}function TC(e,t,n){e==="focusin"?(wp(),gl=t,Ul=n,gl.attachEvent("onpropertychange",wb)):e==="focusout"&&wp()}function NC(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Fd(Ul)}function _C(e,t){if(e==="click")return Fd(t)}function MC(e,t){if(e==="input"||e==="change")return Fd(t)}function IC(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qn=typeof Object.is=="function"?Object.is:IC;function Fl(e,t){if(Qn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!n0.call(t,r)||!Qn(e[r],t[r]))return!1}return!0}function vp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ep(e,t){var n=vp(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=vp(n)}}function vb(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?vb(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Eb(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Zu(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Zu(e.document)}return t}function W1(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var DC=ms&&"documentMode"in document&&11>=document.documentMode,ka=null,l0=null,pl=null,c0=!1;function Ap(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;c0||ka==null||ka!==Zu(i)||(i=ka,"selectionStart"in i&&W1(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),pl&&Fl(pl,i)||(pl=i,i=fd(l0,"onSelect"),0<i.length&&(t=new Pd("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=ka)))}function _r(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var La={animationend:_r("Animation","AnimationEnd"),animationiteration:_r("Animation","AnimationIteration"),animationstart:_r("Animation","AnimationStart"),transitionrun:_r("Transition","TransitionRun"),transitionstart:_r("Transition","TransitionStart"),transitioncancel:_r("Transition","TransitionCancel"),transitionend:_r("Transition","TransitionEnd")},Kh={},Ab={};ms&&(Ab=document.createElement("div").style,"AnimationEvent"in window||(delete La.animationend.animation,delete La.animationiteration.animation,delete La.animationstart.animation),"TransitionEvent"in window||delete La.transitionend.transition);function ia(e){if(Kh[e])return Kh[e];if(!La[e])return e;var t=La[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ab)return Kh[e]=t[n];return e}var Sb=ia("animationend"),Cb=ia("animationiteration"),Tb=ia("animationstart"),RC=ia("transitionrun"),OC=ia("transitionstart"),jC=ia("transitioncancel"),Nb=ia("transitionend"),_b=new Map,u0="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");u0.push("scrollEnd");function Ci(e,t){_b.set(e,t),ta(t,[e])}var Sp=new WeakMap;function ui(e,t){if(typeof e=="object"&&e!==null){var n=Sp.get(e);return n!==void 0?n:(t={value:e,source:t,stack:lp(t)},Sp.set(e,t),t)}return{value:e,source:t,stack:lp(t)}}var ri=[],Ba=0,Z1=0;function Vd(){for(var e=Ba,t=Z1=Ba=0;t<e;){var n=ri[t];ri[t++]=null;var i=ri[t];ri[t++]=null;var r=ri[t];ri[t++]=null;var a=ri[t];if(ri[t++]=null,i!==null&&r!==null){var c=i.pending;c===null?r.next=r:(r.next=c.next,c.next=r),i.pending=r}a!==0&&Mb(n,r,a)}}function zd(e,t,n,i){ri[Ba++]=e,ri[Ba++]=t,ri[Ba++]=n,ri[Ba++]=i,Z1|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function K1(e,t,n,i){return zd(e,t,n,i),Ku(e)}function Co(e,t){return zd(e,null,null,t),Ku(e)}function Mb(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var r=!1,a=e.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(r=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,r&&t!==null&&(r=31-Wn(n),e=a.hiddenUpdates,i=e[r],i===null?e[r]=[t]:i.push(t),t.lane=n|536870912),a):null}function Ku(e){if(50<Tl)throw Tl=0,D0=null,Error(te(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Pa={};function kC(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Gn(e,t,n,i){return new kC(e,t,n,i)}function Q1(e){return e=e.prototype,!(!e||!e.isReactComponent)}function cs(e,t){var n=e.alternate;return n===null?(n=Gn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ib(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function _u(e,t,n,i,r,a){var c=0;if(i=e,typeof e=="function")Q1(e)&&(c=1);else if(typeof e=="string")c=B4(e,n,Ui.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case $f:return e=Gn(31,n,t,r),e.elementType=$f,e.lanes=a,e;case Ia:return zr(n.children,r,a,t);case Z2:c=8,r|=24;break;case Zf:return e=Gn(12,n,t,r|2),e.elementType=Zf,e.lanes=a,e;case Kf:return e=Gn(13,n,t,r),e.elementType=Kf,e.lanes=a,e;case Qf:return e=Gn(19,n,t,r),e.elementType=Qf,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case CS:case is:c=10;break e;case K2:c=9;break e;case B1:c=11;break e;case P1:c=14;break e;case Ps:c=16,i=null;break e}c=29,n=Error(te(130,e===null?"null":typeof e,"")),i=null}return t=Gn(c,n,t,r),t.elementType=e,t.type=i,t.lanes=a,t}function zr(e,t,n,i){return e=Gn(7,e,i,t),e.lanes=n,e}function Qh(e,t,n){return e=Gn(6,e,null,t),e.lanes=n,e}function $h(e,t,n){return t=Gn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Ua=[],Fa=0,Qu=null,$u=0,oi=[],li=0,Hr=null,ss=1,rs="";function Or(e,t){Ua[Fa++]=$u,Ua[Fa++]=Qu,Qu=e,$u=t}function Db(e,t,n){oi[li++]=ss,oi[li++]=rs,oi[li++]=Hr,Hr=e;var i=ss;e=rs;var r=32-Wn(i)-1;i&=~(1<<r),n+=1;var a=32-Wn(t)+r;if(30<a){var c=r-r%5;a=(i&(1<<c)-1).toString(32),i>>=c,r-=c,ss=1<<32-Wn(t)+r|n<<r|i,rs=a+e}else ss=1<<a|n<<r|i,rs=e}function $1(e){e.return!==null&&(Or(e,1),Db(e,1,0))}function J1(e){for(;e===Qu;)Qu=Ua[--Fa],Ua[Fa]=null,$u=Ua[--Fa],Ua[Fa]=null;for(;e===Hr;)Hr=oi[--li],oi[li]=null,rs=oi[--li],oi[li]=null,ss=oi[--li],oi[li]=null}var yn=null,Tt=null,Ye=!1,Gr=null,Bi=!1,d0=Error(te(519));function Kr(e){var t=Error(te(418,""));throw Vl(ui(t,e)),d0}function Cp(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[un]=e,t[kn]=i,n){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(n=0;n<Gl.length;n++)je(Gl[n],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),cb(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0),Wu(t);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),db(t,i.value,i.defaultValue,i.children),Wu(t)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||hv(t.textContent,n)?(i.popover!=null&&(je("beforetoggle",t),je("toggle",t)),i.onScroll!=null&&je("scroll",t),i.onScrollEnd!=null&&je("scrollend",t),i.onClick!=null&&(t.onclick=Kd),t=!0):t=!1,t||Kr(e)}function Tp(e){for(yn=e.return;yn;)switch(yn.tag){case 5:case 13:Bi=!1;return;case 27:case 3:Bi=!0;return;default:yn=yn.return}}function $o(e){if(e!==yn)return!1;if(!Ye)return Tp(e),Ye=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||B0(e.type,e.memoizedProps)),n=!n),n&&Tt&&Kr(e),Tp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(te(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8)if(n=e.data,n==="/$"){if(t===0){Tt=Ai(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++;e=e.nextSibling}Tt=null}}else t===27?(t=Tt,xr(e.type)?(e=F0,F0=null,Tt=e):Tt=t):Tt=yn?Ai(e.stateNode.nextSibling):null;return!0}function pc(){Tt=yn=null,Ye=!1}function Np(){var e=Gr;return e!==null&&(Rn===null?Rn=e:Rn.push.apply(Rn,e),Gr=null),e}function Vl(e){Gr===null?Gr=[e]:Gr.push(e)}var h0=Yi(null),sa=null,as=null;function Vs(e,t,n){gt(h0,t._currentValue),t._currentValue=n}function us(e){e._currentValue=h0.current,Kt(h0)}function f0(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function m0(e,t,n,i){var r=e.child;for(r!==null&&(r.return=e);r!==null;){var a=r.dependencies;if(a!==null){var c=r.child;a=a.firstContext;e:for(;a!==null;){var h=a;a=r;for(var g=0;g<t.length;g++)if(h.context===t[g]){a.lanes|=n,h=a.alternate,h!==null&&(h.lanes|=n),f0(a.return,n,e),i||(c=null);break e}a=h.next}}else if(r.tag===18){if(c=r.return,c===null)throw Error(te(341));c.lanes|=n,a=c.alternate,a!==null&&(a.lanes|=n),f0(c,n,e),c=null}else c=r.child;if(c!==null)c.return=r;else for(c=r;c!==null;){if(c===e){c=null;break}if(r=c.sibling,r!==null){r.return=c.return,c=r;break}c=c.return}r=c}}function xc(e,t,n,i){e=null;for(var r=t,a=!1;r!==null;){if(!a){if(r.flags&524288)a=!0;else if(r.flags&262144)break}if(r.tag===10){var c=r.alternate;if(c===null)throw Error(te(387));if(c=c.memoizedProps,c!==null){var h=r.type;Qn(r.pendingProps.value,c.value)||(e!==null?e.push(h):e=[h])}}else if(r===Gu.current){if(c=r.alternate,c===null)throw Error(te(387));c.memoizedState.memoizedState!==r.memoizedState.memoizedState&&(e!==null?e.push(Xl):e=[Xl])}r=r.return}e!==null&&m0(t,e,n,i),t.flags|=262144}function Ju(e){for(e=e.firstContext;e!==null;){if(!Qn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Qr(e){sa=e,as=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function dn(e){return Rb(sa,e)}function su(e,t){return sa===null&&Qr(e),Rb(e,t)}function Rb(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},as===null){if(e===null)throw Error(te(308));as=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else as=as.next=t;return n}var LC=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},BC=zt.unstable_scheduleCallback,PC=zt.unstable_NormalPriority,Ft={$$typeof:is,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function em(){return{controller:new LC,data:new Map,refCount:0}}function yc(e){e.refCount--,e.refCount===0&&BC(PC,function(){e.controller.abort()})}var xl=null,g0=0,ao=0,$a=null;function UC(e,t){if(xl===null){var n=xl=[];g0=0,ao=Am(),$a={status:"pending",value:void 0,then:function(i){n.push(i)}}}return g0++,t.then(_p,_p),t}function _p(){if(--g0===0&&xl!==null){$a!==null&&($a.status="fulfilled");var e=xl;xl=null,ao=0,$a=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function FC(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(r){n.push(r)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var r=0;r<n.length;r++)(0,n[r])(t)},function(r){for(i.status="rejected",i.reason=r,r=0;r<n.length;r++)(0,n[r])(void 0)}),i}var Mp=Ce.S;Ce.S=function(e,t){typeof t=="object"&&t!==null&&typeof t.then=="function"&&UC(e,t),Mp!==null&&Mp(e,t)};var Yr=Yi(null);function tm(){var e=Yr.current;return e!==null?e:lt.pooledCache}function Mu(e,t){t===null?gt(Yr,Yr.current):gt(Yr,t.pool)}function Ob(){var e=tm();return e===null?null:{parent:Ft._currentValue,pool:e}}var bc=Error(te(460)),jb=Error(te(474)),Hd=Error(te(542)),p0={then:function(){}};function Ip(e){return e=e.status,e==="fulfilled"||e==="rejected"}function ru(){}function kb(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ru,ru),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rp(e),e;default:if(typeof t.status=="string")t.then(ru,ru);else{if(e=lt,e!==null&&100<e.shellSuspendCounter)throw Error(te(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var r=t;r.status="fulfilled",r.value=i}},function(i){if(t.status==="pending"){var r=t;r.status="rejected",r.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Rp(e),e}throw yl=t,bc}}var yl=null;function Dp(){if(yl===null)throw Error(te(459));var e=yl;return yl=null,e}function Rp(e){if(e===bc||e===Hd)throw Error(te(483))}var Us=!1;function nm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function x0(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function Js(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function er(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Ke&2){var r=i.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),i.pending=t,t=Ku(e),Mb(e,null,n),t}return zd(e,i,t,n),Ku(e)}function bl(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ib(e,n)}}function Jh(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?r=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?r=a=t:a=a.next=t}else r=a=t;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var y0=!1;function wl(){if(y0){var e=$a;if(e!==null)throw e}}function vl(e,t,n,i){y0=!1;var r=e.updateQueue;Us=!1;var a=r.firstBaseUpdate,c=r.lastBaseUpdate,h=r.shared.pending;if(h!==null){r.shared.pending=null;var g=h,p=g.next;g.next=null,c===null?a=p:c.next=p,c=g;var y=e.alternate;y!==null&&(y=y.updateQueue,h=y.lastBaseUpdate,h!==c&&(h===null?y.firstBaseUpdate=p:h.next=p,y.lastBaseUpdate=g))}if(a!==null){var w=r.baseState;c=0,y=p=g=null,h=a;do{var E=h.lane&-536870913,A=E!==h.lane;if(A?(Ue&E)===E:(i&E)===E){E!==0&&E===ao&&(y0=!0),y!==null&&(y=y.next={lane:0,tag:h.tag,payload:h.payload,callback:null,next:null});e:{var O=e,I=h;E=t;var B=n;switch(I.tag){case 1:if(O=I.payload,typeof O=="function"){w=O.call(B,w,E);break e}w=O;break e;case 3:O.flags=O.flags&-65537|128;case 0:if(O=I.payload,E=typeof O=="function"?O.call(B,w,E):O,E==null)break e;w=dt({},w,E);break e;case 2:Us=!0}}E=h.callback,E!==null&&(e.flags|=64,A&&(e.flags|=8192),A=r.callbacks,A===null?r.callbacks=[E]:A.push(E))}else A={lane:E,tag:h.tag,payload:h.payload,callback:h.callback,next:null},y===null?(p=y=A,g=w):y=y.next=A,c|=E;if(h=h.next,h===null){if(h=r.shared.pending,h===null)break;A=h,h=A.next,A.next=null,r.lastBaseUpdate=A,r.shared.pending=null}}while(!0);y===null&&(g=w),r.baseState=g,r.firstBaseUpdate=p,r.lastBaseUpdate=y,a===null&&(r.shared.lanes=0),ur|=c,e.lanes=c,e.memoizedState=w}}function Lb(e,t){if(typeof e!="function")throw Error(te(191,e));e.call(t)}function Bb(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Lb(n[e],t)}var oo=Yi(null),ed=Yi(0);function Op(e,t){e=xs,gt(ed,e),gt(oo,t),xs=e|t.baseLanes}function b0(){gt(ed,xs),gt(oo,oo.current)}function im(){xs=ed.current,Kt(oo),Kt(ed)}var lr=0,Re=null,et=null,kt=null,td=!1,Ja=!1,$r=!1,nd=0,zl=0,eo=null,VC=0;function Mt(){throw Error(te(321))}function sm(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Qn(e[n],t[n]))return!1;return!0}function rm(e,t,n,i,r,a){return lr=a,Re=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ce.H=e===null||e.memoizedState===null?mw:gw,$r=!1,a=n(i,r),$r=!1,Ja&&(a=Ub(t,n,i,r)),Pb(e),a}function Pb(e){Ce.H=id;var t=et!==null&&et.next!==null;if(lr=0,kt=et=Re=null,td=!1,zl=0,eo=null,t)throw Error(te(300));e===null||Zt||(e=e.dependencies,e!==null&&Ju(e)&&(Zt=!0))}function Ub(e,t,n,i){Re=e;var r=0;do{if(Ja&&(eo=null),zl=0,Ja=!1,25<=r)throw Error(te(301));if(r+=1,kt=et=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}Ce.H=WC,a=t(n,i)}while(Ja);return a}function zC(){var e=Ce.H,t=e.useState()[0];return t=typeof t.then=="function"?wc(t):t,e=e.useState()[0],(et!==null?et.memoizedState:null)!==e&&(Re.flags|=1024),t}function am(){var e=nd!==0;return nd=0,e}function om(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function lm(e){if(td){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}td=!1}lr=0,kt=et=Re=null,Ja=!1,zl=nd=0,eo=null}function Mn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?Re.memoizedState=kt=e:kt=kt.next=e,kt}function Lt(){if(et===null){var e=Re.alternate;e=e!==null?e.memoizedState:null}else e=et.next;var t=kt===null?Re.memoizedState:kt.next;if(t!==null)kt=t,et=e;else{if(e===null)throw Re.alternate===null?Error(te(467)):Error(te(310));et=e,e={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},kt===null?Re.memoizedState=kt=e:kt=kt.next=e}return kt}function cm(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(e){var t=zl;return zl+=1,eo===null&&(eo=[]),e=kb(eo,e,t),t=Re,(kt===null?t.memoizedState:kt.next)===null&&(t=t.alternate,Ce.H=t===null||t.memoizedState===null?mw:gw),e}function Gd(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return wc(e);if(e.$$typeof===is)return dn(e)}throw Error(te(438,String(e)))}function um(e){var t=null,n=Re.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Re.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(r){return r.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=cm(),Re.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=TS;return t.index++,n}function gs(e,t){return typeof t=="function"?t(e):t}function Iu(e){var t=Lt();return dm(t,et,e)}function dm(e,t,n){var i=e.queue;if(i===null)throw Error(te(311));i.lastRenderedReducer=n;var r=e.baseQueue,a=i.pending;if(a!==null){if(r!==null){var c=r.next;r.next=a.next,a.next=c}t.baseQueue=r=a,i.pending=null}if(a=e.baseState,r===null)e.memoizedState=a;else{t=r.next;var h=c=null,g=null,p=t,y=!1;do{var w=p.lane&-536870913;if(w!==p.lane?(Ue&w)===w:(lr&w)===w){var E=p.revertLane;if(E===0)g!==null&&(g=g.next={lane:0,revertLane:0,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null}),w===ao&&(y=!0);else if((lr&E)===E){p=p.next,E===ao&&(y=!0);continue}else w={lane:0,revertLane:p.revertLane,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},g===null?(h=g=w,c=a):g=g.next=w,Re.lanes|=E,ur|=E;w=p.action,$r&&n(a,w),a=p.hasEagerState?p.eagerState:n(a,w)}else E={lane:w,revertLane:p.revertLane,action:p.action,hasEagerState:p.hasEagerState,eagerState:p.eagerState,next:null},g===null?(h=g=E,c=a):g=g.next=E,Re.lanes|=w,ur|=w;p=p.next}while(p!==null&&p!==t);if(g===null?c=a:g.next=h,!Qn(a,e.memoizedState)&&(Zt=!0,y&&(n=$a,n!==null)))throw n;e.memoizedState=a,e.baseState=c,e.baseQueue=g,i.lastRenderedState=a}return r===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function ef(e){var t=Lt(),n=t.queue;if(n===null)throw Error(te(311));n.lastRenderedReducer=e;var i=n.dispatch,r=n.pending,a=t.memoizedState;if(r!==null){n.pending=null;var c=r=r.next;do a=e(a,c.action),c=c.next;while(c!==r);Qn(a,t.memoizedState)||(Zt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Fb(e,t,n){var i=Re,r=Lt(),a=Ye;if(a){if(n===void 0)throw Error(te(407));n=n()}else n=t();var c=!Qn((et||r).memoizedState,n);c&&(r.memoizedState=n,Zt=!0),r=r.queue;var h=Hb.bind(null,i,r,e);if(vc(2048,8,h,[e]),r.getSnapshot!==t||c||kt!==null&&kt.memoizedState.tag&1){if(i.flags|=2048,lo(9,Yd(),zb.bind(null,i,r,n,t),null),lt===null)throw Error(te(349));a||lr&124||Vb(i,t,n)}return n}function Vb(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Re.updateQueue,t===null?(t=cm(),Re.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function zb(e,t,n,i){t.value=n,t.getSnapshot=i,Gb(t)&&Yb(e)}function Hb(e,t,n){return n(function(){Gb(t)&&Yb(e)})}function Gb(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Qn(e,n)}catch{return!0}}function Yb(e){var t=Co(e,2);t!==null&&Kn(t,e,2)}function w0(e){var t=Mn();if(typeof e=="function"){var n=e;if(e=n(),$r){Xs(!0);try{n()}finally{Xs(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:e},t}function qb(e,t,n,i){return e.baseState=n,dm(e,et,typeof i=="function"?i:gs)}function HC(e,t,n,i,r){if(qd(e))throw Error(te(485));if(e=t.action,e!==null){var a={payload:r,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(c){a.listeners.push(c)}};Ce.T!==null?n(!0):a.isTransition=!1,i(a),n=t.pending,n===null?(a.next=t.pending=a,Xb(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Xb(e,t){var n=t.action,i=t.payload,r=e.state;if(t.isTransition){var a=Ce.T,c={};Ce.T=c;try{var h=n(r,i),g=Ce.S;g!==null&&g(c,h),jp(e,t,h)}catch(p){v0(e,t,p)}finally{Ce.T=a}}else try{a=n(r,i),jp(e,t,a)}catch(p){v0(e,t,p)}}function jp(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){kp(e,t,i)},function(i){return v0(e,t,i)}):kp(e,t,n)}function kp(e,t,n){t.status="fulfilled",t.value=n,Wb(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Xb(e,n)))}function v0(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Wb(t),t=t.next;while(t!==i)}e.action=null}function Wb(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zb(e,t){return t}function Lp(e,t){if(Ye){var n=lt.formState;if(n!==null){e:{var i=Re;if(Ye){if(Tt){t:{for(var r=Tt,a=Bi;r.nodeType!==8;){if(!a){r=null;break t}if(r=Ai(r.nextSibling),r===null){r=null;break t}}a=r.data,r=a==="F!"||a==="F"?r:null}if(r){Tt=Ai(r.nextSibling),i=r.data==="F!";break e}}Kr(i)}i=!1}i&&(t=n[0])}}return n=Mn(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zb,lastRenderedState:t},n.queue=i,n=dw.bind(null,Re,i),i.dispatch=n,i=w0(!1),a=gm.bind(null,Re,!1,i.queue),i=Mn(),r={state:t,dispatch:null,action:e,pending:null},i.queue=r,n=HC.bind(null,Re,r,a,n),r.dispatch=n,i.memoizedState=e,[t,n,!1]}function Bp(e){var t=Lt();return Kb(t,et,e)}function Kb(e,t,n){if(t=dm(e,t,Zb)[0],e=Iu(gs)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=wc(t)}catch(c){throw c===bc?Hd:c}else i=t;t=Lt();var r=t.queue,a=r.dispatch;return n!==t.memoizedState&&(Re.flags|=2048,lo(9,Yd(),GC.bind(null,r,n),null)),[i,a,e]}function GC(e,t){e.action=t}function Pp(e){var t=Lt(),n=et;if(n!==null)return Kb(t,n,e);Lt(),t=t.memoizedState,n=Lt();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function lo(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Re.updateQueue,t===null&&(t=cm(),Re.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function Yd(){return{destroy:void 0,resource:void 0}}function Qb(){return Lt().memoizedState}function Du(e,t,n,i){var r=Mn();i=i===void 0?null:i,Re.flags|=e,r.memoizedState=lo(1|t,Yd(),n,i)}function vc(e,t,n,i){var r=Lt();i=i===void 0?null:i;var a=r.memoizedState.inst;et!==null&&i!==null&&sm(i,et.memoizedState.deps)?r.memoizedState=lo(t,a,n,i):(Re.flags|=e,r.memoizedState=lo(1|t,a,n,i))}function Up(e,t){Du(8390656,8,e,t)}function $b(e,t){vc(2048,8,e,t)}function Jb(e,t){return vc(4,2,e,t)}function ew(e,t){return vc(4,4,e,t)}function tw(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function nw(e,t,n){n=n!=null?n.concat([e]):null,vc(4,4,tw.bind(null,t,e),n)}function hm(){}function iw(e,t){var n=Lt();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&sm(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function sw(e,t){var n=Lt();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&sm(t,i[1]))return i[0];if(i=e(),$r){Xs(!0);try{e()}finally{Xs(!1)}}return n.memoizedState=[i,t],i}function fm(e,t,n){return n===void 0||lr&1073741824?e.memoizedState=t:(e.memoizedState=n,e=Ww(),Re.lanes|=e,ur|=e,n)}function rw(e,t,n,i){return Qn(n,t)?n:oo.current!==null?(e=fm(e,n,i),Qn(e,t)||(Zt=!0),e):lr&42?(e=Ww(),Re.lanes|=e,ur|=e,t):(Zt=!0,e.memoizedState=n)}function aw(e,t,n,i,r){var a=qe.p;qe.p=a!==0&&8>a?a:8;var c=Ce.T,h={};Ce.T=h,gm(e,!1,t,n);try{var g=r(),p=Ce.S;if(p!==null&&p(h,g),g!==null&&typeof g=="object"&&typeof g.then=="function"){var y=FC(g,i);El(e,t,y,Zn(e))}else El(e,t,i,Zn(e))}catch(w){El(e,t,{then:function(){},status:"rejected",reason:w},Zn())}finally{qe.p=a,Ce.T=c}}function YC(){}function E0(e,t,n,i){if(e.tag!==5)throw Error(te(476));var r=ow(e).queue;aw(e,r,t,Vr,n===null?YC:function(){return lw(e),n(i)})}function ow(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:Vr,baseState:Vr,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:Vr},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function lw(e){var t=ow(e).next.queue;El(e,t,{},Zn())}function mm(){return dn(Xl)}function cw(){return Lt().memoizedState}function uw(){return Lt().memoizedState}function qC(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=Zn();e=Js(n);var i=er(t,e,n);i!==null&&(Kn(i,t,n),bl(i,t,n)),t={cache:em()},e.payload=t;return}t=t.return}}function XC(e,t,n){var i=Zn();n={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qd(e)?hw(t,n):(n=K1(e,t,n,i),n!==null&&(Kn(n,e,i),fw(n,t,i)))}function dw(e,t,n){var i=Zn();El(e,t,n,i)}function El(e,t,n,i){var r={lane:i,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qd(e))hw(t,r);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,h=a(c,n);if(r.hasEagerState=!0,r.eagerState=h,Qn(h,c))return zd(e,t,r,0),lt===null&&Vd(),!1}catch{}finally{}if(n=K1(e,t,r,i),n!==null)return Kn(n,e,i),fw(n,t,i),!0}return!1}function gm(e,t,n,i){if(i={lane:2,revertLane:Am(),action:i,hasEagerState:!1,eagerState:null,next:null},qd(e)){if(t)throw Error(te(479))}else t=K1(e,n,i,2),t!==null&&Kn(t,e,2)}function qd(e){var t=e.alternate;return e===Re||t!==null&&t===Re}function hw(e,t){Ja=td=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function fw(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ib(e,n)}}var id={readContext:dn,use:Gd,useCallback:Mt,useContext:Mt,useEffect:Mt,useImperativeHandle:Mt,useLayoutEffect:Mt,useInsertionEffect:Mt,useMemo:Mt,useReducer:Mt,useRef:Mt,useState:Mt,useDebugValue:Mt,useDeferredValue:Mt,useTransition:Mt,useSyncExternalStore:Mt,useId:Mt,useHostTransitionStatus:Mt,useFormState:Mt,useActionState:Mt,useOptimistic:Mt,useMemoCache:Mt,useCacheRefresh:Mt},mw={readContext:dn,use:Gd,useCallback:function(e,t){return Mn().memoizedState=[e,t===void 0?null:t],e},useContext:dn,useEffect:Up,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Du(4194308,4,tw.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Du(4194308,4,e,t)},useInsertionEffect:function(e,t){Du(4,2,e,t)},useMemo:function(e,t){var n=Mn();t=t===void 0?null:t;var i=e();if($r){Xs(!0);try{e()}finally{Xs(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Mn();if(n!==void 0){var r=n(t);if($r){Xs(!0);try{n(t)}finally{Xs(!1)}}}else r=t;return i.memoizedState=i.baseState=r,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:r},i.queue=e,e=e.dispatch=XC.bind(null,Re,e),[i.memoizedState,e]},useRef:function(e){var t=Mn();return e={current:e},t.memoizedState=e},useState:function(e){e=w0(e);var t=e.queue,n=dw.bind(null,Re,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:hm,useDeferredValue:function(e,t){var n=Mn();return fm(n,e,t)},useTransition:function(){var e=w0(!1);return e=aw.bind(null,Re,e.queue,!0,!1),Mn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Re,r=Mn();if(Ye){if(n===void 0)throw Error(te(407));n=n()}else{if(n=t(),lt===null)throw Error(te(349));Ue&124||Vb(i,t,n)}r.memoizedState=n;var a={value:n,getSnapshot:t};return r.queue=a,Up(Hb.bind(null,i,a,e),[e]),i.flags|=2048,lo(9,Yd(),zb.bind(null,i,a,n,t),null),n},useId:function(){var e=Mn(),t=lt.identifierPrefix;if(Ye){var n=rs,i=ss;n=(i&~(1<<32-Wn(i)-1)).toString(32)+n,t="«"+t+"R"+n,n=nd++,0<n&&(t+="H"+n.toString(32)),t+="»"}else n=VC++,t="«"+t+"r"+n.toString(32)+"»";return e.memoizedState=t},useHostTransitionStatus:mm,useFormState:Lp,useActionState:Lp,useOptimistic:function(e){var t=Mn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=gm.bind(null,Re,!0,n),n.dispatch=t,[e,t]},useMemoCache:um,useCacheRefresh:function(){return Mn().memoizedState=qC.bind(null,Re)}},gw={readContext:dn,use:Gd,useCallback:iw,useContext:dn,useEffect:$b,useImperativeHandle:nw,useInsertionEffect:Jb,useLayoutEffect:ew,useMemo:sw,useReducer:Iu,useRef:Qb,useState:function(){return Iu(gs)},useDebugValue:hm,useDeferredValue:function(e,t){var n=Lt();return rw(n,et.memoizedState,e,t)},useTransition:function(){var e=Iu(gs)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:wc(e),t]},useSyncExternalStore:Fb,useId:cw,useHostTransitionStatus:mm,useFormState:Bp,useActionState:Bp,useOptimistic:function(e,t){var n=Lt();return qb(n,et,e,t)},useMemoCache:um,useCacheRefresh:uw},WC={readContext:dn,use:Gd,useCallback:iw,useContext:dn,useEffect:$b,useImperativeHandle:nw,useInsertionEffect:Jb,useLayoutEffect:ew,useMemo:sw,useReducer:ef,useRef:Qb,useState:function(){return ef(gs)},useDebugValue:hm,useDeferredValue:function(e,t){var n=Lt();return et===null?fm(n,e,t):rw(n,et.memoizedState,e,t)},useTransition:function(){var e=ef(gs)[0],t=Lt().memoizedState;return[typeof e=="boolean"?e:wc(e),t]},useSyncExternalStore:Fb,useId:cw,useHostTransitionStatus:mm,useFormState:Pp,useActionState:Pp,useOptimistic:function(e,t){var n=Lt();return et!==null?qb(n,et,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:um,useCacheRefresh:uw},to=null,Hl=0;function au(e){var t=Hl;return Hl+=1,to===null&&(to=[]),kb(to,e,t)}function Jo(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ou(e,t){throw t.$$typeof===SS?Error(te(525)):(e=Object.prototype.toString.call(t),Error(te(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Fp(e){var t=e._init;return t(e._payload)}function pw(e){function t(T,N){if(e){var C=T.deletions;C===null?(T.deletions=[N],T.flags|=16):C.push(N)}}function n(T,N){if(!e)return null;for(;N!==null;)t(T,N),N=N.sibling;return null}function i(T){for(var N=new Map;T!==null;)T.key!==null?N.set(T.key,T):N.set(T.index,T),T=T.sibling;return N}function r(T,N){return T=cs(T,N),T.index=0,T.sibling=null,T}function a(T,N,C){return T.index=C,e?(C=T.alternate,C!==null?(C=C.index,C<N?(T.flags|=67108866,N):C):(T.flags|=67108866,N)):(T.flags|=1048576,N)}function c(T){return e&&T.alternate===null&&(T.flags|=67108866),T}function h(T,N,C,k){return N===null||N.tag!==6?(N=Qh(C,T.mode,k),N.return=T,N):(N=r(N,C),N.return=T,N)}function g(T,N,C,k){var z=C.type;return z===Ia?y(T,N,C.props.children,k,C.key):N!==null&&(N.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ps&&Fp(z)===N.type)?(N=r(N,C.props),Jo(N,C),N.return=T,N):(N=_u(C.type,C.key,C.props,null,T.mode,k),Jo(N,C),N.return=T,N)}function p(T,N,C,k){return N===null||N.tag!==4||N.stateNode.containerInfo!==C.containerInfo||N.stateNode.implementation!==C.implementation?(N=$h(C,T.mode,k),N.return=T,N):(N=r(N,C.children||[]),N.return=T,N)}function y(T,N,C,k,z){return N===null||N.tag!==7?(N=zr(C,T.mode,k,z),N.return=T,N):(N=r(N,C),N.return=T,N)}function w(T,N,C){if(typeof N=="string"&&N!==""||typeof N=="number"||typeof N=="bigint")return N=Qh(""+N,T.mode,C),N.return=T,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Jc:return C=_u(N.type,N.key,N.props,null,T.mode,C),Jo(C,N),C.return=T,C;case al:return N=$h(N,T.mode,C),N.return=T,N;case Ps:var k=N._init;return N=k(N._payload),w(T,N,C)}if(ol(N)||Zo(N))return N=zr(N,T.mode,C,null),N.return=T,N;if(typeof N.then=="function")return w(T,au(N),C);if(N.$$typeof===is)return w(T,su(T,N),C);ou(T,N)}return null}function E(T,N,C,k){var z=N!==null?N.key:null;if(typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint")return z!==null?null:h(T,N,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Jc:return C.key===z?g(T,N,C,k):null;case al:return C.key===z?p(T,N,C,k):null;case Ps:return z=C._init,C=z(C._payload),E(T,N,C,k)}if(ol(C)||Zo(C))return z!==null?null:y(T,N,C,k,null);if(typeof C.then=="function")return E(T,N,au(C),k);if(C.$$typeof===is)return E(T,N,su(T,C),k);ou(T,C)}return null}function A(T,N,C,k,z){if(typeof k=="string"&&k!==""||typeof k=="number"||typeof k=="bigint")return T=T.get(C)||null,h(N,T,""+k,z);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Jc:return T=T.get(k.key===null?C:k.key)||null,g(N,T,k,z);case al:return T=T.get(k.key===null?C:k.key)||null,p(N,T,k,z);case Ps:var D=k._init;return k=D(k._payload),A(T,N,C,k,z)}if(ol(k)||Zo(k))return T=T.get(C)||null,y(N,T,k,z,null);if(typeof k.then=="function")return A(T,N,C,au(k),z);if(k.$$typeof===is)return A(T,N,C,su(N,k),z);ou(N,k)}return null}function O(T,N,C,k){for(var z=null,D=null,L=N,F=N=0,U=null;L!==null&&F<C.length;F++){L.index>F?(U=L,L=null):U=L.sibling;var Y=E(T,L,C[F],k);if(Y===null){L===null&&(L=U);break}e&&L&&Y.alternate===null&&t(T,L),N=a(Y,N,F),D===null?z=Y:D.sibling=Y,D=Y,L=U}if(F===C.length)return n(T,L),Ye&&Or(T,F),z;if(L===null){for(;F<C.length;F++)L=w(T,C[F],k),L!==null&&(N=a(L,N,F),D===null?z=L:D.sibling=L,D=L);return Ye&&Or(T,F),z}for(L=i(L);F<C.length;F++)U=A(L,T,F,C[F],k),U!==null&&(e&&U.alternate!==null&&L.delete(U.key===null?F:U.key),N=a(U,N,F),D===null?z=U:D.sibling=U,D=U);return e&&L.forEach(function(J){return t(T,J)}),Ye&&Or(T,F),z}function I(T,N,C,k){if(C==null)throw Error(te(151));for(var z=null,D=null,L=N,F=N=0,U=null,Y=C.next();L!==null&&!Y.done;F++,Y=C.next()){L.index>F?(U=L,L=null):U=L.sibling;var J=E(T,L,Y.value,k);if(J===null){L===null&&(L=U);break}e&&L&&J.alternate===null&&t(T,L),N=a(J,N,F),D===null?z=J:D.sibling=J,D=J,L=U}if(Y.done)return n(T,L),Ye&&Or(T,F),z;if(L===null){for(;!Y.done;F++,Y=C.next())Y=w(T,Y.value,k),Y!==null&&(N=a(Y,N,F),D===null?z=Y:D.sibling=Y,D=Y);return Ye&&Or(T,F),z}for(L=i(L);!Y.done;F++,Y=C.next())Y=A(L,T,F,Y.value,k),Y!==null&&(e&&Y.alternate!==null&&L.delete(Y.key===null?F:Y.key),N=a(Y,N,F),D===null?z=Y:D.sibling=Y,D=Y);return e&&L.forEach(function(ee){return t(T,ee)}),Ye&&Or(T,F),z}function B(T,N,C,k){if(typeof C=="object"&&C!==null&&C.type===Ia&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case Jc:e:{for(var z=C.key;N!==null;){if(N.key===z){if(z=C.type,z===Ia){if(N.tag===7){n(T,N.sibling),k=r(N,C.props.children),k.return=T,T=k;break e}}else if(N.elementType===z||typeof z=="object"&&z!==null&&z.$$typeof===Ps&&Fp(z)===N.type){n(T,N.sibling),k=r(N,C.props),Jo(k,C),k.return=T,T=k;break e}n(T,N);break}else t(T,N);N=N.sibling}C.type===Ia?(k=zr(C.props.children,T.mode,k,C.key),k.return=T,T=k):(k=_u(C.type,C.key,C.props,null,T.mode,k),Jo(k,C),k.return=T,T=k)}return c(T);case al:e:{for(z=C.key;N!==null;){if(N.key===z)if(N.tag===4&&N.stateNode.containerInfo===C.containerInfo&&N.stateNode.implementation===C.implementation){n(T,N.sibling),k=r(N,C.children||[]),k.return=T,T=k;break e}else{n(T,N);break}else t(T,N);N=N.sibling}k=$h(C,T.mode,k),k.return=T,T=k}return c(T);case Ps:return z=C._init,C=z(C._payload),B(T,N,C,k)}if(ol(C))return O(T,N,C,k);if(Zo(C)){if(z=Zo(C),typeof z!="function")throw Error(te(150));return C=z.call(C),I(T,N,C,k)}if(typeof C.then=="function")return B(T,N,au(C),k);if(C.$$typeof===is)return B(T,N,su(T,C),k);ou(T,C)}return typeof C=="string"&&C!==""||typeof C=="number"||typeof C=="bigint"?(C=""+C,N!==null&&N.tag===6?(n(T,N.sibling),k=r(N,C),k.return=T,T=k):(n(T,N),k=Qh(C,T.mode,k),k.return=T,T=k),c(T)):n(T,N)}return function(T,N,C,k){try{Hl=0;var z=B(T,N,C,k);return to=null,z}catch(L){if(L===bc||L===Hd)throw L;var D=Gn(29,L,null,T.mode);return D.lanes=k,D.return=T,D}finally{}}}var co=pw(!0),xw=pw(!1),fi=Yi(null),Vi=null;function zs(e){var t=e.alternate;gt(Vt,Vt.current&1),gt(fi,e),Vi===null&&(t===null||oo.current!==null||t.memoizedState!==null)&&(Vi=e)}function yw(e){if(e.tag===22){if(gt(Vt,Vt.current),gt(fi,e),Vi===null){var t=e.alternate;t!==null&&t.memoizedState!==null&&(Vi=e)}}else Hs()}function Hs(){gt(Vt,Vt.current),gt(fi,fi.current)}function os(e){Kt(fi),Vi===e&&(Vi=null),Kt(Vt)}var Vt=Yi(0);function sd(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||U0(n)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function tf(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:dt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var A0={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=Zn(),r=Js(i);r.payload=t,n!=null&&(r.callback=n),t=er(e,r,i),t!==null&&(Kn(t,e,i),bl(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=Zn(),r=Js(i);r.tag=1,r.payload=t,n!=null&&(r.callback=n),t=er(e,r,i),t!==null&&(Kn(t,e,i),bl(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zn(),i=Js(n);i.tag=2,t!=null&&(i.callback=t),t=er(e,i,n),t!==null&&(Kn(t,e,n),bl(t,e,n))}};function Vp(e,t,n,i,r,a,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,c):t.prototype&&t.prototype.isPureReactComponent?!Fl(n,i)||!Fl(r,a):!0}function zp(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&A0.enqueueReplaceState(t,t.state,null)}function Jr(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=dt({},n));for(var r in e)n[r]===void 0&&(n[r]=e[r])}return n}var rd=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)};function bw(e){rd(e)}function ww(e){console.error(e)}function vw(e){rd(e)}function ad(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function Hp(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function S0(e,t,n){return n=Js(n),n.tag=3,n.payload={element:null},n.callback=function(){ad(e,t)},n}function Ew(e){return e=Js(e),e.tag=3,e}function Aw(e,t,n,i){var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var a=i.value;e.payload=function(){return r(a)},e.callback=function(){Hp(t,n,i)}}var c=n.stateNode;c!==null&&typeof c.componentDidCatch=="function"&&(e.callback=function(){Hp(t,n,i),typeof r!="function"&&(tr===null?tr=new Set([this]):tr.add(this));var h=i.stack;this.componentDidCatch(i.value,{componentStack:h!==null?h:""})})}function ZC(e,t,n,i,r){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&xc(t,n,r,!0),n=fi.current,n!==null){switch(n.tag){case 13:return Vi===null?R0():n.alternate===null&&Nt===0&&(Nt=3),n.flags&=-257,n.flags|=65536,n.lanes=r,i===p0?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),ff(e,i,r)),!1;case 22:return n.flags|=65536,i===p0?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),ff(e,i,r)),!1}throw Error(te(435,n.tag))}return ff(e,i,r),R0(),!1}if(Ye)return t=fi.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=r,i!==d0&&(e=Error(te(422),{cause:i}),Vl(ui(e,n)))):(i!==d0&&(t=Error(te(423),{cause:i}),Vl(ui(t,n))),e=e.current.alternate,e.flags|=65536,r&=-r,e.lanes|=r,i=ui(i,n),r=S0(e.stateNode,i,r),Jh(e,r),Nt!==4&&(Nt=2)),!1;var a=Error(te(520),{cause:i});if(a=ui(a,n),Cl===null?Cl=[a]:Cl.push(a),Nt!==4&&(Nt=2),t===null)return!0;i=ui(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=r&-r,n.lanes|=e,e=S0(n.stateNode,i,e),Jh(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(tr===null||!tr.has(a))))return n.flags|=65536,r&=-r,n.lanes|=r,r=Ew(r),Aw(r,e,n,i),Jh(n,r),!1}n=n.return}while(n!==null);return!1}var Sw=Error(te(461)),Zt=!1;function nn(e,t,n,i){t.child=e===null?xw(t,null,n,i):co(t,e.child,n,i)}function Gp(e,t,n,i,r){n=n.render;var a=t.ref;if("ref"in i){var c={};for(var h in i)h!=="ref"&&(c[h]=i[h])}else c=i;return Qr(t),i=rm(e,t,n,c,a,r),h=am(),e!==null&&!Zt?(om(e,t,r),ps(e,t,r)):(Ye&&h&&$1(t),t.flags|=1,nn(e,t,i,r),t.child)}function Yp(e,t,n,i,r){if(e===null){var a=n.type;return typeof a=="function"&&!Q1(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,Cw(e,t,a,i,r)):(e=_u(n.type,null,i,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!pm(e,r)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:Fl,n(c,i)&&e.ref===t.ref)return ps(e,t,r)}return t.flags|=1,e=cs(a,i),e.ref=t.ref,e.return=t,t.child=e}function Cw(e,t,n,i,r){if(e!==null){var a=e.memoizedProps;if(Fl(a,i)&&e.ref===t.ref)if(Zt=!1,t.pendingProps=i=a,pm(e,r))e.flags&131072&&(Zt=!0);else return t.lanes=e.lanes,ps(e,t,r)}return C0(e,t,n,i,r)}function Tw(e,t,n){var i=t.pendingProps,r=i.children,a=e!==null?e.memoizedState:null;if(i.mode==="hidden"){if(t.flags&128){if(i=a!==null?a.baseLanes|n:n,e!==null){for(r=t.child=e.child,a=0;r!==null;)a=a|r.lanes|r.childLanes,r=r.sibling;t.childLanes=a&~i}else t.childLanes=0,t.child=null;return qp(e,t,i,n)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Mu(t,a!==null?a.cachePool:null),a!==null?Op(t,a):b0(),yw(t);else return t.lanes=t.childLanes=536870912,qp(e,t,a!==null?a.baseLanes|n:n,n)}else a!==null?(Mu(t,a.cachePool),Op(t,a),Hs(),t.memoizedState=null):(e!==null&&Mu(t,null),b0(),Hs());return nn(e,t,r,n),t.child}function qp(e,t,n,i){var r=tm();return r=r===null?null:{parent:Ft._currentValue,pool:r},t.memoizedState={baseLanes:n,cachePool:r},e!==null&&Mu(t,null),b0(),yw(t),e!==null&&xc(e,t,i,!0),null}function Ru(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(te(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function C0(e,t,n,i,r){return Qr(t),n=rm(e,t,n,i,void 0,r),i=am(),e!==null&&!Zt?(om(e,t,r),ps(e,t,r)):(Ye&&i&&$1(t),t.flags|=1,nn(e,t,n,r),t.child)}function Xp(e,t,n,i,r,a){return Qr(t),t.updateQueue=null,n=Ub(t,i,n,r),Pb(e),i=am(),e!==null&&!Zt?(om(e,t,a),ps(e,t,a)):(Ye&&i&&$1(t),t.flags|=1,nn(e,t,n,a),t.child)}function Wp(e,t,n,i,r){if(Qr(t),t.stateNode===null){var a=Pa,c=n.contextType;typeof c=="object"&&c!==null&&(a=dn(c)),a=new n(i,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=A0,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=i,a.state=t.memoizedState,a.refs={},nm(t),c=n.contextType,a.context=typeof c=="object"&&c!==null?dn(c):Pa,a.state=t.memoizedState,c=n.getDerivedStateFromProps,typeof c=="function"&&(tf(t,n,c,i),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(c=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),c!==a.state&&A0.enqueueReplaceState(a,a.state,null),vl(t,i,a,r),wl(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){a=t.stateNode;var h=t.memoizedProps,g=Jr(n,h);a.props=g;var p=a.context,y=n.contextType;c=Pa,typeof y=="object"&&y!==null&&(c=dn(y));var w=n.getDerivedStateFromProps;y=typeof w=="function"||typeof a.getSnapshotBeforeUpdate=="function",h=t.pendingProps!==h,y||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(h||p!==c)&&zp(t,a,i,c),Us=!1;var E=t.memoizedState;a.state=E,vl(t,i,a,r),wl(),p=t.memoizedState,h||E!==p||Us?(typeof w=="function"&&(tf(t,n,w,i),p=t.memoizedState),(g=Us||Vp(t,n,g,i,E,p,c))?(y||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=p),a.props=i,a.state=p,a.context=c,i=g):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,x0(e,t),c=t.memoizedProps,y=Jr(n,c),a.props=y,w=t.pendingProps,E=a.context,p=n.contextType,g=Pa,typeof p=="object"&&p!==null&&(g=dn(p)),h=n.getDerivedStateFromProps,(p=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(c!==w||E!==g)&&zp(t,a,i,g),Us=!1,E=t.memoizedState,a.state=E,vl(t,i,a,r),wl();var A=t.memoizedState;c!==w||E!==A||Us||e!==null&&e.dependencies!==null&&Ju(e.dependencies)?(typeof h=="function"&&(tf(t,n,h,i),A=t.memoizedState),(y=Us||Vp(t,n,y,i,E,A,g)||e!==null&&e.dependencies!==null&&Ju(e.dependencies))?(p||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,A,g),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,A,g)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=A),a.props=i,a.state=A,a.context=g,i=y):(typeof a.componentDidUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&E===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,Ru(e,t),i=(t.flags&128)!==0,a||i?(a=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&i?(t.child=co(t,e.child,null,r),t.child=co(t,null,n,r)):nn(e,t,n,r),t.memoizedState=a.state,e=t.child):e=ps(e,t,r),e}function Zp(e,t,n,i){return pc(),t.flags|=256,nn(e,t,n,i),t.child}var nf={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function sf(e){return{baseLanes:e,cachePool:Ob()}}function rf(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=di),e}function Nw(e,t,n){var i=t.pendingProps,r=!1,a=(t.flags&128)!==0,c;if((c=a)||(c=e!==null&&e.memoizedState===null?!1:(Vt.current&2)!==0),c&&(r=!0,t.flags&=-129),c=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ye){if(r?zs(t):Hs(),Ye){var h=Tt,g;if(g=h){e:{for(g=h,h=Bi;g.nodeType!==8;){if(!h){h=null;break e}if(g=Ai(g.nextSibling),g===null){h=null;break e}}h=g}h!==null?(t.memoizedState={dehydrated:h,treeContext:Hr!==null?{id:ss,overflow:rs}:null,retryLane:536870912,hydrationErrors:null},g=Gn(18,null,null,0),g.stateNode=h,g.return=t,t.child=g,yn=t,Tt=null,g=!0):g=!1}g||Kr(t)}if(h=t.memoizedState,h!==null&&(h=h.dehydrated,h!==null))return U0(h)?t.lanes=32:t.lanes=536870912,null;os(t)}return h=i.children,i=i.fallback,r?(Hs(),r=t.mode,h=od({mode:"hidden",children:h},r),i=zr(i,r,n,null),h.return=t,i.return=t,h.sibling=i,t.child=h,r=t.child,r.memoizedState=sf(n),r.childLanes=rf(e,c,n),t.memoizedState=nf,i):(zs(t),T0(t,h))}if(g=e.memoizedState,g!==null&&(h=g.dehydrated,h!==null)){if(a)t.flags&256?(zs(t),t.flags&=-257,t=af(e,t,n)):t.memoizedState!==null?(Hs(),t.child=e.child,t.flags|=128,t=null):(Hs(),r=i.fallback,h=t.mode,i=od({mode:"visible",children:i.children},h),r=zr(r,h,n,null),r.flags|=2,i.return=t,r.return=t,i.sibling=r,t.child=i,co(t,e.child,null,n),i=t.child,i.memoizedState=sf(n),i.childLanes=rf(e,c,n),t.memoizedState=nf,t=r);else if(zs(t),U0(h)){if(c=h.nextSibling&&h.nextSibling.dataset,c)var p=c.dgst;c=p,i=Error(te(419)),i.stack="",i.digest=c,Vl({value:i,source:null,stack:null}),t=af(e,t,n)}else if(Zt||xc(e,t,n,!1),c=(n&e.childLanes)!==0,Zt||c){if(c=lt,c!==null&&(i=n&-n,i=i&42?1:F1(i),i=i&(c.suspendedLanes|n)?0:i,i!==0&&i!==g.retryLane))throw g.retryLane=i,Co(e,i),Kn(c,e,i),Sw;h.data==="$?"||R0(),t=af(e,t,n)}else h.data==="$?"?(t.flags|=192,t.child=e.child,t=null):(e=g.treeContext,Tt=Ai(h.nextSibling),yn=t,Ye=!0,Gr=null,Bi=!1,e!==null&&(oi[li++]=ss,oi[li++]=rs,oi[li++]=Hr,ss=e.id,rs=e.overflow,Hr=t),t=T0(t,i.children),t.flags|=4096);return t}return r?(Hs(),r=i.fallback,h=t.mode,g=e.child,p=g.sibling,i=cs(g,{mode:"hidden",children:i.children}),i.subtreeFlags=g.subtreeFlags&65011712,p!==null?r=cs(p,r):(r=zr(r,h,n,null),r.flags|=2),r.return=t,i.return=t,i.sibling=r,t.child=i,i=r,r=t.child,h=e.child.memoizedState,h===null?h=sf(n):(g=h.cachePool,g!==null?(p=Ft._currentValue,g=g.parent!==p?{parent:p,pool:p}:g):g=Ob(),h={baseLanes:h.baseLanes|n,cachePool:g}),r.memoizedState=h,r.childLanes=rf(e,c,n),t.memoizedState=nf,i):(zs(t),n=e.child,e=n.sibling,n=cs(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(c=t.deletions,c===null?(t.deletions=[e],t.flags|=16):c.push(e)),t.child=n,t.memoizedState=null,n)}function T0(e,t){return t=od({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function od(e,t){return e=Gn(22,e,null,t),e.lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function af(e,t,n){return co(t,e.child,null,n),e=T0(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Kp(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),f0(e.return,t,n)}function of(e,t,n,i,r){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=i,a.tail=n,a.tailMode=r)}function _w(e,t,n){var i=t.pendingProps,r=i.revealOrder,a=i.tail;if(nn(e,t,i.children,n),i=Vt.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Kp(e,n,t);else if(e.tag===19)Kp(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}switch(gt(Vt,i),r){case"forwards":for(n=t.child,r=null;n!==null;)e=n.alternate,e!==null&&sd(e)===null&&(r=n),n=n.sibling;n=r,n===null?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),of(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&sd(e)===null){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}of(t,!0,n,null,a);break;case"together":of(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function ps(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),ur|=t.lanes,!(n&t.childLanes))if(e!==null){if(xc(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(te(153));if(t.child!==null){for(e=t.child,n=cs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=cs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function pm(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Ju(e)))}function KC(e,t,n){switch(t.tag){case 3:Yu(t,t.stateNode.containerInfo),Vs(t,Ft,e.memoizedState.cache),pc();break;case 27:case 5:t0(t);break;case 4:Yu(t,t.stateNode.containerInfo);break;case 10:Vs(t,t.type,t.memoizedProps.value);break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(zs(t),t.flags|=128,null):n&t.child.childLanes?Nw(e,t,n):(zs(t),e=ps(e,t,n),e!==null?e.sibling:null);zs(t);break;case 19:var r=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(xc(e,t,n,!1),i=(n&t.childLanes)!==0),r){if(i)return _w(e,t,n);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),gt(Vt,Vt.current),i)break;return null;case 22:case 23:return t.lanes=0,Tw(e,t,n);case 24:Vs(t,Ft,e.memoizedState.cache)}return ps(e,t,n)}function Mw(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Zt=!0;else{if(!pm(e,n)&&!(t.flags&128))return Zt=!1,KC(e,t,n);Zt=!!(e.flags&131072)}else Zt=!1,Ye&&t.flags&1048576&&Db(t,$u,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var i=t.elementType,r=i._init;if(i=r(i._payload),t.type=i,typeof i=="function")Q1(i)?(e=Jr(i,e),t.tag=1,t=Wp(null,t,i,e,n)):(t.tag=0,t=C0(null,t,i,e,n));else{if(i!=null){if(r=i.$$typeof,r===B1){t.tag=11,t=Gp(null,t,i,e,n);break e}else if(r===P1){t.tag=14,t=Yp(null,t,i,e,n);break e}}throw t=Jf(i)||i,Error(te(306,t,""))}}return t;case 0:return C0(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,r=Jr(i,t.pendingProps),Wp(e,t,i,r,n);case 3:e:{if(Yu(t,t.stateNode.containerInfo),e===null)throw Error(te(387));i=t.pendingProps;var a=t.memoizedState;r=a.element,x0(e,t),vl(t,i,null,n);var c=t.memoizedState;if(i=c.cache,Vs(t,Ft,i),i!==a.cache&&m0(t,[Ft],n,!0),wl(),i=c.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:c.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=Zp(e,t,i,n);break e}else if(i!==r){r=ui(Error(te(424)),t),Vl(r),t=Zp(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Tt=Ai(e.firstChild),yn=t,Ye=!0,Gr=null,Bi=!0,n=xw(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(pc(),i===r){t=ps(e,t,n);break e}nn(e,t,i,n)}t=t.child}return t;case 26:return Ru(e,t),e===null?(n=fx(t.type,null,t.pendingProps,null))?t.memoizedState=n:Ye||(n=t.type,e=t.pendingProps,i=md($s.current).createElement(n),i[un]=t,i[kn]=e,an(i,n,e),Wt(i),t.stateNode=i):t.memoizedState=fx(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return t0(t),e===null&&Ye&&(i=t.stateNode=gv(t.type,t.pendingProps,$s.current),yn=t,Bi=!0,r=Tt,xr(t.type)?(F0=r,Tt=Ai(i.firstChild)):Tt=r),nn(e,t,t.pendingProps.children,n),Ru(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ye&&((r=i=Tt)&&(i=S4(i,t.type,t.pendingProps,Bi),i!==null?(t.stateNode=i,yn=t,Tt=Ai(i.firstChild),Bi=!1,r=!0):r=!1),r||Kr(t)),t0(t),r=t.type,a=t.pendingProps,c=e!==null?e.memoizedProps:null,i=a.children,B0(r,a)?i=null:c!==null&&B0(r,c)&&(t.flags|=32),t.memoizedState!==null&&(r=rm(e,t,zC,null,null,n),Xl._currentValue=r),Ru(e,t),nn(e,t,i,n),t.child;case 6:return e===null&&Ye&&((e=n=Tt)&&(n=C4(n,t.pendingProps,Bi),n!==null?(t.stateNode=n,yn=t,Tt=null,e=!0):e=!1),e||Kr(t)),null;case 13:return Nw(e,t,n);case 4:return Yu(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=co(t,null,i,n):nn(e,t,i,n),t.child;case 11:return Gp(e,t,t.type,t.pendingProps,n);case 7:return nn(e,t,t.pendingProps,n),t.child;case 8:return nn(e,t,t.pendingProps.children,n),t.child;case 12:return nn(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Vs(t,t.type,i.value),nn(e,t,i.children,n),t.child;case 9:return r=t.type._context,i=t.pendingProps.children,Qr(t),r=dn(r),i=i(r),t.flags|=1,nn(e,t,i,n),t.child;case 14:return Yp(e,t,t.type,t.pendingProps,n);case 15:return Cw(e,t,t.type,t.pendingProps,n);case 19:return _w(e,t,n);case 31:return i=t.pendingProps,n=t.mode,i={mode:i.mode,children:i.children},e===null?(n=od(i,n),n.ref=t.ref,t.child=n,n.return=t,t=n):(n=cs(e.child,i),n.ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Tw(e,t,n);case 24:return Qr(t),i=dn(Ft),e===null?(r=tm(),r===null&&(r=lt,a=em(),r.pooledCache=a,a.refCount++,a!==null&&(r.pooledCacheLanes|=n),r=a),t.memoizedState={parent:i,cache:r},nm(t),Vs(t,Ft,r)):(e.lanes&n&&(x0(e,t),vl(t,null,null,n),wl()),r=e.memoizedState,a=t.memoizedState,r.parent!==i?(r={parent:i,cache:i},t.memoizedState=r,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=r),Vs(t,Ft,i)):(i=a.cache,Vs(t,Ft,i),i!==r.cache&&m0(t,[Ft],n,!0))),nn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(te(156,t.tag))}function Qi(e){e.flags|=4}function Qp(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!yv(t)){if(t=fi.current,t!==null&&((Ue&4194048)===Ue?Vi!==null:(Ue&62914560)!==Ue&&!(Ue&536870912)||t!==Vi))throw yl=p0,jb;e.flags|=8192}}function lu(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?tb():536870912,e.lanes|=t,uo|=t)}function el(e,t){if(!Ye)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function bt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&65011712,i|=r.flags&65011712,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function QC(e,t,n){var i=t.pendingProps;switch(J1(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(t),null;case 1:return bt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),us(Ft),io(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&($o(t)?Qi(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Np())),bt(t),null;case 26:return n=t.memoizedState,e===null?(Qi(t),n!==null?(bt(t),Qp(t,n)):(bt(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Qi(t),bt(t),Qp(t,n)):(bt(t),t.flags&=-16777217):(e.memoizedProps!==i&&Qi(t),bt(t),t.flags&=-16777217),null;case 27:qu(t),n=$s.current;var r=t.type;if(e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qi(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return bt(t),null}e=Ui.current,$o(t)?Cp(t):(e=gv(r,i,n),t.stateNode=e,Qi(t))}return bt(t),null;case 5:if(qu(t),n=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&Qi(t);else{if(!i){if(t.stateNode===null)throw Error(te(166));return bt(t),null}if(e=Ui.current,$o(t))Cp(t);else{switch(r=md($s.current),e){case 1:e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=r.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=r.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":e=r.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?e.multiple=!0:i.size&&(e.size=i.size);break;default:e=typeof i.is=="string"?r.createElement(n,{is:i.is}):r.createElement(n)}}e[un]=t,e[kn]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=e;e:switch(an(e,n,i),n){case"button":case"input":case"select":case"textarea":e=!!i.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Qi(t)}}return bt(t),t.flags&=-16777217,null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&Qi(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(te(166));if(e=$s.current,$o(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,r=yn,r!==null)switch(r.tag){case 27:case 5:i=r.memoizedProps}e[un]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||hv(e.nodeValue,n)),e||Kr(t)}else e=md(e).createTextNode(i),e[un]=t,t.stateNode=e}return bt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(r=$o(t),i!==null&&i.dehydrated!==null){if(e===null){if(!r)throw Error(te(318));if(r=t.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(te(317));r[un]=t}else pc(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;bt(t),r=!1}else r=Np(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),r=!0;if(!r)return t.flags&256?(os(t),t):(os(t),null)}if(os(t),t.flags&128)return t.lanes=n,t;if(n=i!==null,e=e!==null&&e.memoizedState!==null,n){i=t.child,r=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(r=i.alternate.memoizedState.cachePool.pool);var a=null;i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==r&&(i.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),lu(t,t.updateQueue),bt(t),null;case 4:return io(),e===null&&Sm(t.stateNode.containerInfo),bt(t),null;case 10:return us(t.type),bt(t),null;case 19:if(Kt(Vt),r=t.memoizedState,r===null)return bt(t),null;if(i=(t.flags&128)!==0,a=r.rendering,a===null)if(i)el(r,!1);else{if(Nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=sd(e),a!==null){for(t.flags|=128,el(r,!1),e=a.updateQueue,t.updateQueue=e,lu(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Ib(n,e),n=n.sibling;return gt(Vt,Vt.current&1|2),t.child}e=e.sibling}r.tail!==null&&Fi()>cd&&(t.flags|=128,i=!0,el(r,!1),t.lanes=4194304)}else{if(!i)if(e=sd(a),e!==null){if(t.flags|=128,i=!0,e=e.updateQueue,t.updateQueue=e,lu(t,e),el(r,!0),r.tail===null&&r.tailMode==="hidden"&&!a.alternate&&!Ye)return bt(t),null}else 2*Fi()-r.renderingStartTime>cd&&n!==536870912&&(t.flags|=128,i=!0,el(r,!1),t.lanes=4194304);r.isBackwards?(a.sibling=t.child,t.child=a):(e=r.last,e!==null?e.sibling=a:t.child=a,r.last=a)}return r.tail!==null?(t=r.tail,r.rendering=t,r.tail=t.sibling,r.renderingStartTime=Fi(),t.sibling=null,e=Vt.current,gt(Vt,i?e&1|2:e&1),t):(bt(t),null);case 22:case 23:return os(t),im(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(bt(t),t.subtreeFlags&6&&(t.flags|=8192)):bt(t),n=t.updateQueue,n!==null&&lu(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&Kt(Yr),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),us(Ft),bt(t),null;case 25:return null;case 30:return null}throw Error(te(156,t.tag))}function $C(e,t){switch(J1(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return us(Ft),io(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return qu(t),null;case 13:if(os(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(te(340));pc()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Kt(Vt),null;case 4:return io(),null;case 10:return us(t.type),null;case 22:case 23:return os(t),im(),e!==null&&Kt(Yr),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return us(Ft),null;case 25:return null;default:return null}}function Iw(e,t){switch(J1(t),t.tag){case 3:us(Ft),io();break;case 26:case 27:case 5:qu(t);break;case 4:io();break;case 13:os(t);break;case 19:Kt(Vt);break;case 10:us(t.type);break;case 22:case 23:os(t),im(),e!==null&&Kt(Yr);break;case 24:us(Ft)}}function Ec(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var r=i.next;n=r;do{if((n.tag&e)===e){i=void 0;var a=n.create,c=n.inst;i=a(),c.destroy=i}n=n.next}while(n!==r)}}catch(h){st(t,t.return,h)}}function cr(e,t,n){try{var i=t.updateQueue,r=i!==null?i.lastEffect:null;if(r!==null){var a=r.next;i=a;do{if((i.tag&e)===e){var c=i.inst,h=c.destroy;if(h!==void 0){c.destroy=void 0,r=t;var g=n,p=h;try{p()}catch(y){st(r,g,y)}}}i=i.next}while(i!==a)}}catch(y){st(t,t.return,y)}}function Dw(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Bb(t,n)}catch(i){st(e,e.return,i)}}}function Rw(e,t,n){n.props=Jr(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){st(e,t,i)}}function Al(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(r){st(e,t,r)}}function Pi(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(r){st(e,t,r)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(r){st(e,t,r)}else n.current=null}function Ow(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(r){st(e,e.return,r)}}function lf(e,t,n){try{var i=e.stateNode;b4(i,e.type,n,t),i[kn]=t}catch(r){st(e,e.return,r)}}function jw(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&xr(e.type)||e.tag===4}function cf(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||jw(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&xr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function N0(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Kd));else if(i!==4&&(i===27&&xr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(N0(e,t,n),e=e.sibling;e!==null;)N0(e,t,n),e=e.sibling}function ld(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&xr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(ld(e,t,n),e=e.sibling;e!==null;)ld(e,t,n),e=e.sibling}function kw(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,r=t.attributes;r.length;)t.removeAttributeNode(r[0]);an(t,i,n),t[un]=e,t[kn]=n}catch(a){st(e,e.return,a)}}var ns=!1,Dt=!1,uf=!1,$p=typeof WeakSet=="function"?WeakSet:Set,Xt=null;function JC(e,t){if(e=e.containerInfo,k0=yd,e=Eb(e),W1(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var c=0,h=-1,g=-1,p=0,y=0,w=e,E=null;t:for(;;){for(var A;w!==n||r!==0&&w.nodeType!==3||(h=c+r),w!==a||i!==0&&w.nodeType!==3||(g=c+i),w.nodeType===3&&(c+=w.nodeValue.length),(A=w.firstChild)!==null;)E=w,w=A;for(;;){if(w===e)break t;if(E===n&&++p===r&&(h=c),E===a&&++y===i&&(g=c),(A=w.nextSibling)!==null)break;w=E,E=w.parentNode}w=A}n=h===-1||g===-1?null:{start:h,end:g}}else n=null}n=n||{start:0,end:0}}else n=null;for(L0={focusedElem:e,selectionRange:n},yd=!1,Xt=t;Xt!==null;)if(t=Xt,e=t.child,(t.subtreeFlags&1024)!==0&&e!==null)e.return=t,Xt=e;else for(;Xt!==null;){switch(t=Xt,a=t.alternate,e=t.flags,t.tag){case 0:break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,r=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var O=Jr(n.type,r,n.elementType===n.type);e=i.getSnapshotBeforeUpdate(O,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(I){st(n,n.return,I)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)P0(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":P0(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(te(163))}if(e=t.sibling,e!==null){e.return=t.return,Xt=e;break}Xt=t.return}}function Lw(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:Rs(e,n),i&4&&Ec(5,n);break;case 1:if(Rs(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(c){st(n,n.return,c)}else{var r=Jr(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(r,t,e.__reactInternalSnapshotBeforeUpdate)}catch(c){st(n,n.return,c)}}i&64&&Dw(n),i&512&&Al(n,n.return);break;case 3:if(Rs(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Bb(e,t)}catch(c){st(n,n.return,c)}}break;case 27:t===null&&i&4&&kw(n);case 26:case 5:Rs(e,n),t===null&&i&4&&Ow(n),i&512&&Al(n,n.return);break;case 12:Rs(e,n);break;case 13:Rs(e,n),i&4&&Uw(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=l4.bind(null,n),T4(e,n))));break;case 22:if(i=n.memoizedState!==null||ns,!i){t=t!==null&&t.memoizedState!==null||Dt,r=ns;var a=Dt;ns=i,(Dt=t)&&!a?ks(e,n,(n.subtreeFlags&8772)!==0):Rs(e,n),ns=r,Dt=a}break;case 30:break;default:Rs(e,n)}}function Bw(e){var t=e.alternate;t!==null&&(e.alternate=null,Bw(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&z1(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var ft=null,In=!1;function $i(e,t,n){for(n=n.child;n!==null;)Pw(e,t,n),n=n.sibling}function Pw(e,t,n){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(dc,n)}catch{}switch(n.tag){case 26:Dt||Pi(n,t),$i(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Dt||Pi(n,t);var i=ft,r=In;xr(n.type)&&(ft=n.stateNode,In=!1),$i(e,t,n),Nl(n.stateNode),ft=i,In=r;break;case 5:Dt||Pi(n,t);case 6:if(i=ft,r=In,ft=null,$i(e,t,n),ft=i,In=r,ft!==null)if(In)try{(ft.nodeType===9?ft.body:ft.nodeName==="HTML"?ft.ownerDocument.body:ft).removeChild(n.stateNode)}catch(a){st(n,t,a)}else try{ft.removeChild(n.stateNode)}catch(a){st(n,t,a)}break;case 18:ft!==null&&(In?(e=ft,ux(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Kl(e)):ux(ft,n.stateNode));break;case 4:i=ft,r=In,ft=n.stateNode.containerInfo,In=!0,$i(e,t,n),ft=i,In=r;break;case 0:case 11:case 14:case 15:Dt||cr(2,n,t),Dt||cr(4,n,t),$i(e,t,n);break;case 1:Dt||(Pi(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&Rw(n,t,i)),$i(e,t,n);break;case 21:$i(e,t,n);break;case 22:Dt=(i=Dt)||n.memoizedState!==null,$i(e,t,n),Dt=i;break;default:$i(e,t,n)}}function Uw(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Kl(e)}catch(n){st(t,t.return,n)}}function e4(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new $p),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new $p),t;default:throw Error(te(435,e.tag))}}function df(e,t){var n=e4(e);t.forEach(function(i){var r=c4.bind(null,e,i);n.has(i)||(n.add(i),i.then(r,r))})}function Pn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i],a=e,c=t,h=c;e:for(;h!==null;){switch(h.tag){case 27:if(xr(h.type)){ft=h.stateNode,In=!1;break e}break;case 5:ft=h.stateNode,In=!1;break e;case 3:case 4:ft=h.stateNode.containerInfo,In=!0;break e}h=h.return}if(ft===null)throw Error(te(160));Pw(a,c,r),ft=null,In=!1,a=r.alternate,a!==null&&(a.return=null),r.return=null}if(t.subtreeFlags&13878)for(t=t.child;t!==null;)Fw(t,e),t=t.sibling}var wi=null;function Fw(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Pn(t,e),Un(e),i&4&&(cr(3,e,e.return),Ec(3,e),cr(5,e,e.return));break;case 1:Pn(t,e),Un(e),i&512&&(Dt||n===null||Pi(n,n.return)),i&64&&ns&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var r=wi;if(Pn(t,e),Un(e),i&512&&(Dt||n===null||Pi(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,r=r.ownerDocument||r;t:switch(i){case"title":a=r.getElementsByTagName("title")[0],(!a||a[mc]||a[un]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=r.createElement(i),r.head.insertBefore(a,r.querySelector("head > title"))),an(a,i,n),a[un]=e,Wt(a),i=a;break e;case"link":var c=gx("link","href",r).get(i+(n.href||""));if(c){for(var h=0;h<c.length;h++)if(a=c[h],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){c.splice(h,1);break t}}a=r.createElement(i),an(a,i,n),r.head.appendChild(a);break;case"meta":if(c=gx("meta","content",r).get(i+(n.content||""))){for(h=0;h<c.length;h++)if(a=c[h],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){c.splice(h,1);break t}}a=r.createElement(i),an(a,i,n),r.head.appendChild(a);break;default:throw Error(te(468,i))}a[un]=e,Wt(a),i=a}e.stateNode=i}else px(r,e.type,e.stateNode);else e.stateNode=mx(r,i,e.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?px(r,e.type,e.stateNode):mx(r,i,e.memoizedProps)):i===null&&e.stateNode!==null&&lf(e,e.memoizedProps,n.memoizedProps)}break;case 27:Pn(t,e),Un(e),i&512&&(Dt||n===null||Pi(n,n.return)),n!==null&&i&4&&lf(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Pn(t,e),Un(e),i&512&&(Dt||n===null||Pi(n,n.return)),e.flags&32){r=e.stateNode;try{ro(r,"")}catch(A){st(e,e.return,A)}}i&4&&e.stateNode!=null&&(r=e.memoizedProps,lf(e,r,n!==null?n.memoizedProps:r)),i&1024&&(uf=!0);break;case 6:if(Pn(t,e),Un(e),i&4){if(e.stateNode===null)throw Error(te(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(A){st(e,e.return,A)}}break;case 3:if(ku=null,r=wi,wi=gd(t.containerInfo),Pn(t,e),wi=r,Un(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Kl(t.containerInfo)}catch(A){st(e,e.return,A)}uf&&(uf=!1,Vw(e));break;case 4:i=wi,wi=gd(e.stateNode.containerInfo),Pn(t,e),Un(e),wi=i;break;case 12:Pn(t,e),Un(e);break;case 13:Pn(t,e),Un(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(vm=Fi()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,df(e,i)));break;case 22:r=e.memoizedState!==null;var g=n!==null&&n.memoizedState!==null,p=ns,y=Dt;if(ns=p||r,Dt=y||g,Pn(t,e),Dt=y,ns=p,Un(e),i&8192)e:for(t=e.stateNode,t._visibility=r?t._visibility&-2:t._visibility|1,r&&(n===null||g||ns||Dt||jr(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){g=n=t;try{if(a=g.stateNode,r)c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none";else{h=g.stateNode;var w=g.memoizedProps.style,E=w!=null&&w.hasOwnProperty("display")?w.display:null;h.style.display=E==null||typeof E=="boolean"?"":(""+E).trim()}}catch(A){st(g,g.return,A)}}}else if(t.tag===6){if(n===null){g=t;try{g.stateNode.nodeValue=r?"":g.memoizedProps}catch(A){st(g,g.return,A)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,df(e,n))));break;case 19:Pn(t,e),Un(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,df(e,i)));break;case 30:break;case 21:break;default:Pn(t,e),Un(e)}}function Un(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(jw(i)){n=i;break}i=i.return}if(n==null)throw Error(te(160));switch(n.tag){case 27:var r=n.stateNode,a=cf(e);ld(e,a,r);break;case 5:var c=n.stateNode;n.flags&32&&(ro(c,""),n.flags&=-33);var h=cf(e);ld(e,h,c);break;case 3:case 4:var g=n.stateNode.containerInfo,p=cf(e);N0(e,p,g);break;default:throw Error(te(161))}}catch(y){st(e,e.return,y)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Vw(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;Vw(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Rs(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Lw(e,t.alternate,t),t=t.sibling}function jr(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:cr(4,t,t.return),jr(t);break;case 1:Pi(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&Rw(t,t.return,n),jr(t);break;case 27:Nl(t.stateNode);case 26:case 5:Pi(t,t.return),jr(t);break;case 22:t.memoizedState===null&&jr(t);break;case 30:jr(t);break;default:jr(t)}e=e.sibling}}function ks(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,r=e,a=t,c=a.flags;switch(a.tag){case 0:case 11:case 15:ks(r,a,n),Ec(4,a);break;case 1:if(ks(r,a,n),i=a,r=i.stateNode,typeof r.componentDidMount=="function")try{r.componentDidMount()}catch(p){st(i,i.return,p)}if(i=a,r=i.updateQueue,r!==null){var h=i.stateNode;try{var g=r.shared.hiddenCallbacks;if(g!==null)for(r.shared.hiddenCallbacks=null,r=0;r<g.length;r++)Lb(g[r],h)}catch(p){st(i,i.return,p)}}n&&c&64&&Dw(a),Al(a,a.return);break;case 27:kw(a);case 26:case 5:ks(r,a,n),n&&i===null&&c&4&&Ow(a),Al(a,a.return);break;case 12:ks(r,a,n);break;case 13:ks(r,a,n),n&&c&4&&Uw(r,a);break;case 22:a.memoizedState===null&&ks(r,a,n),Al(a,a.return);break;case 30:break;default:ks(r,a,n)}t=t.sibling}}function xm(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&yc(n))}function ym(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yc(e))}function ki(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)zw(e,t,n,i),t=t.sibling}function zw(e,t,n,i){var r=t.flags;switch(t.tag){case 0:case 11:case 15:ki(e,t,n,i),r&2048&&Ec(9,t);break;case 1:ki(e,t,n,i);break;case 3:ki(e,t,n,i),r&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&yc(e)));break;case 12:if(r&2048){ki(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,c=a.id,h=a.onPostCommit;typeof h=="function"&&h(c,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(g){st(t,t.return,g)}}else ki(e,t,n,i);break;case 13:ki(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,c=t.alternate,t.memoizedState!==null?a._visibility&2?ki(e,t,n,i):Sl(e,t):a._visibility&2?ki(e,t,n,i):(a._visibility|=2,Ta(e,t,n,i,(t.subtreeFlags&10256)!==0)),r&2048&&xm(c,t);break;case 24:ki(e,t,n,i),r&2048&&ym(t.alternate,t);break;default:ki(e,t,n,i)}}function Ta(e,t,n,i,r){for(r=r&&(t.subtreeFlags&10256)!==0,t=t.child;t!==null;){var a=e,c=t,h=n,g=i,p=c.flags;switch(c.tag){case 0:case 11:case 15:Ta(a,c,h,g,r),Ec(8,c);break;case 23:break;case 22:var y=c.stateNode;c.memoizedState!==null?y._visibility&2?Ta(a,c,h,g,r):Sl(a,c):(y._visibility|=2,Ta(a,c,h,g,r)),r&&p&2048&&xm(c.alternate,c);break;case 24:Ta(a,c,h,g,r),r&&p&2048&&ym(c.alternate,c);break;default:Ta(a,c,h,g,r)}t=t.sibling}}function Sl(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,r=i.flags;switch(i.tag){case 22:Sl(n,i),r&2048&&xm(i.alternate,i);break;case 24:Sl(n,i),r&2048&&ym(i.alternate,i);break;default:Sl(n,i)}t=t.sibling}}var cl=8192;function xa(e){if(e.subtreeFlags&cl)for(e=e.child;e!==null;)Hw(e),e=e.sibling}function Hw(e){switch(e.tag){case 26:xa(e),e.flags&cl&&e.memoizedState!==null&&U4(wi,e.memoizedState,e.memoizedProps);break;case 5:xa(e);break;case 3:case 4:var t=wi;wi=gd(e.stateNode.containerInfo),xa(e),wi=t;break;case 22:e.memoizedState===null&&(t=e.alternate,t!==null&&t.memoizedState!==null?(t=cl,cl=16777216,xa(e),cl=t):xa(e));break;default:xa(e)}}function Gw(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function tl(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,qw(i,e)}Gw(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)Yw(e),e=e.sibling}function Yw(e){switch(e.tag){case 0:case 11:case 15:tl(e),e.flags&2048&&cr(9,e,e.return);break;case 3:tl(e);break;case 12:tl(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Ou(e)):tl(e);break;default:tl(e)}}function Ou(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];Xt=i,qw(i,e)}Gw(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:cr(8,t,t.return),Ou(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Ou(t));break;default:Ou(t)}e=e.sibling}}function qw(e,t){for(;Xt!==null;){var n=Xt;switch(n.tag){case 0:case 11:case 15:cr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:yc(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,Xt=i;else e:for(n=e;Xt!==null;){i=Xt;var r=i.sibling,a=i.return;if(Bw(i),i===n){Xt=null;break e}if(r!==null){r.return=a,Xt=r;break e}Xt=a}}}var t4={getCacheForType:function(e){var t=dn(Ft),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n}},n4=typeof WeakMap=="function"?WeakMap:Map,Ke=0,lt=null,ke=null,Ue=0,We=0,Hn=null,Zs=!1,To=!1,bm=!1,xs=0,Nt=0,ur=0,qr=0,wm=0,di=0,uo=0,Cl=null,Rn=null,_0=!1,vm=0,cd=1/0,ud=null,tr=null,rn=0,nr=null,ho=null,no=0,M0=0,I0=null,Xw=null,Tl=0,D0=null;function Zn(){if(Ke&2&&Ue!==0)return Ue&-Ue;if(Ce.T!==null){var e=ao;return e!==0?e:Am()}return sb()}function Ww(){di===0&&(di=!(Ue&536870912)||Ye?eb():536870912);var e=fi.current;return e!==null&&(e.flags|=32),di}function Kn(e,t,n){(e===lt&&(We===2||We===9)||e.cancelPendingCommit!==null)&&(fo(e,0),Ks(e,Ue,di,!1)),fc(e,n),(!(Ke&2)||e!==lt)&&(e===lt&&(!(Ke&2)&&(qr|=n),Nt===4&&Ks(e,Ue,di,!1)),qi(e))}function Zw(e,t,n){if(Ke&6)throw Error(te(327));var i=!n&&(t&124)===0&&(t&e.expiredLanes)===0||hc(e,t),r=i?r4(e,t):hf(e,t,!0),a=i;do{if(r===0){To&&!i&&Ks(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!i4(n)){r=hf(e,t,!1),a=!1;continue}if(r===2){if(a=t,e.errorRecoveryDisabledLanes&a)var c=0;else c=e.pendingLanes&-536870913,c=c!==0?c:c&536870912?536870912:0;if(c!==0){t=c;e:{var h=e;r=Cl;var g=h.current.memoizedState.isDehydrated;if(g&&(fo(h,c).flags|=256),c=hf(h,c,!1),c!==2){if(bm&&!g){h.errorRecoveryDisabledLanes|=a,qr|=a,r=4;break e}a=Rn,Rn=r,a!==null&&(Rn===null?Rn=a:Rn.push.apply(Rn,a))}r=c}if(a=!1,r!==2)continue}}if(r===1){fo(e,0),Ks(e,t,0,!0);break}e:{switch(i=e,a=r,a){case 0:case 1:throw Error(te(345));case 4:if((t&4194048)!==t)break;case 6:Ks(i,t,di,!Zs);break e;case 2:Rn=null;break;case 3:case 5:break;default:throw Error(te(329))}if((t&62914560)===t&&(r=vm+300-Fi(),10<r)){if(Ks(i,t,di,!Zs),Bd(i,0,!0)!==0)break e;i.timeoutHandle=mv(Jp.bind(null,i,n,Rn,ud,_0,t,di,qr,uo,Zs,a,2,-0,0),r);break e}Jp(i,n,Rn,ud,_0,t,di,qr,uo,Zs,a,0,-0,0)}}break}while(!0);qi(e)}function Jp(e,t,n,i,r,a,c,h,g,p,y,w,E,A){if(e.timeoutHandle=-1,w=t.subtreeFlags,(w&8192||(w&16785408)===16785408)&&(ql={stylesheets:null,count:0,unsuspend:P4},Hw(t),w=F4(),w!==null)){e.cancelPendingCommit=w(tx.bind(null,e,t,a,n,i,r,c,h,g,y,1,E,A)),Ks(e,a,c,!p);return}tx(e,t,a,n,i,r,c,h,g)}function i4(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var r=n[i],a=r.getSnapshot;r=r.value;try{if(!Qn(a(),r))return!1}catch{return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ks(e,t,n,i){t&=~wm,t&=~qr,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var r=t;0<r;){var a=31-Wn(r),c=1<<a;i[a]=-1,r&=~c}n!==0&&nb(e,n,t)}function Xd(){return Ke&6?!0:(Ac(0),!1)}function Em(){if(ke!==null){if(We===0)var e=ke.return;else e=ke,as=sa=null,lm(e),to=null,Hl=0,e=ke;for(;e!==null;)Iw(e.alternate,e),e=e.return;ke=null}}function fo(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,v4(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),Em(),lt=e,ke=n=cs(e.current,null),Ue=t,We=0,Hn=null,Zs=!1,To=hc(e,t),bm=!1,uo=di=wm=qr=ur=Nt=0,Rn=Cl=null,_0=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var r=31-Wn(i),a=1<<r;t|=e[r],i&=~a}return xs=t,Vd(),n}function Kw(e,t){Re=null,Ce.H=id,t===bc||t===Hd?(t=Dp(),We=3):t===jb?(t=Dp(),We=4):We=t===Sw?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,Hn=t,ke===null&&(Nt=1,ad(e,ui(t,e.current)))}function Qw(){var e=Ce.H;return Ce.H=id,e===null?id:e}function $w(){var e=Ce.A;return Ce.A=t4,e}function R0(){Nt=4,Zs||(Ue&4194048)!==Ue&&fi.current!==null||(To=!0),!(ur&134217727)&&!(qr&134217727)||lt===null||Ks(lt,Ue,di,!1)}function hf(e,t,n){var i=Ke;Ke|=2;var r=Qw(),a=$w();(lt!==e||Ue!==t)&&(ud=null,fo(e,t)),t=!1;var c=Nt;e:do try{if(We!==0&&ke!==null){var h=ke,g=Hn;switch(We){case 8:Em(),c=6;break e;case 3:case 2:case 9:case 6:fi.current===null&&(t=!0);var p=We;if(We=0,Hn=null,Va(e,h,g,p),n&&To){c=0;break e}break;default:p=We,We=0,Hn=null,Va(e,h,g,p)}}s4(),c=Nt;break}catch(y){Kw(e,y)}while(!0);return t&&e.shellSuspendCounter++,as=sa=null,Ke=i,Ce.H=r,Ce.A=a,ke===null&&(lt=null,Ue=0,Vd()),c}function s4(){for(;ke!==null;)Jw(ke)}function r4(e,t){var n=Ke;Ke|=2;var i=Qw(),r=$w();lt!==e||Ue!==t?(ud=null,cd=Fi()+500,fo(e,t)):To=hc(e,t);e:do try{if(We!==0&&ke!==null){t=ke;var a=Hn;t:switch(We){case 1:We=0,Hn=null,Va(e,t,a,1);break;case 2:case 9:if(Ip(a)){We=0,Hn=null,ex(t);break}t=function(){We!==2&&We!==9||lt!==e||(We=7),qi(e)},a.then(t,t);break e;case 3:We=7;break e;case 4:We=5;break e;case 7:Ip(a)?(We=0,Hn=null,ex(t)):(We=0,Hn=null,Va(e,t,a,7));break;case 5:var c=null;switch(ke.tag){case 26:c=ke.memoizedState;case 5:case 27:var h=ke;if(!c||yv(c)){We=0,Hn=null;var g=h.sibling;if(g!==null)ke=g;else{var p=h.return;p!==null?(ke=p,Wd(p)):ke=null}break t}}We=0,Hn=null,Va(e,t,a,5);break;case 6:We=0,Hn=null,Va(e,t,a,6);break;case 8:Em(),Nt=6;break e;default:throw Error(te(462))}}a4();break}catch(y){Kw(e,y)}while(!0);return as=sa=null,Ce.H=i,Ce.A=r,Ke=n,ke!==null?0:(lt=null,Ue=0,Vd(),Nt)}function a4(){for(;ke!==null&&!_S();)Jw(ke)}function Jw(e){var t=Mw(e.alternate,e,xs);e.memoizedProps=e.pendingProps,t===null?Wd(e):ke=t}function ex(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Xp(n,t,t.pendingProps,t.type,void 0,Ue);break;case 11:t=Xp(n,t,t.pendingProps,t.type.render,t.ref,Ue);break;case 5:lm(t);default:Iw(n,t),t=ke=Ib(t,xs),t=Mw(n,t,xs)}e.memoizedProps=e.pendingProps,t===null?Wd(e):ke=t}function Va(e,t,n,i){as=sa=null,lm(t),to=null,Hl=0;var r=t.return;try{if(ZC(e,r,t,n,Ue)){Nt=1,ad(e,ui(n,e.current)),ke=null;return}}catch(a){if(r!==null)throw ke=r,a;Nt=1,ad(e,ui(n,e.current)),ke=null;return}t.flags&32768?(Ye||i===1?e=!0:To||Ue&536870912?e=!1:(Zs=e=!0,(i===2||i===9||i===3||i===6)&&(i=fi.current,i!==null&&i.tag===13&&(i.flags|=16384))),ev(t,e)):Wd(t)}function Wd(e){var t=e;do{if(t.flags&32768){ev(t,Zs);return}e=t.return;var n=QC(t.alternate,t,xs);if(n!==null){ke=n;return}if(t=t.sibling,t!==null){ke=t;return}ke=t=e}while(t!==null);Nt===0&&(Nt=5)}function ev(e,t){do{var n=$C(e.alternate,e);if(n!==null){n.flags&=32767,ke=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){ke=e;return}ke=e=n}while(e!==null);Nt=6,ke=null}function tx(e,t,n,i,r,a,c,h,g){e.cancelPendingCommit=null;do Zd();while(rn!==0);if(Ke&6)throw Error(te(327));if(t!==null){if(t===e.current)throw Error(te(177));if(a=t.lanes|t.childLanes,a|=Z1,PS(e,n,a,c,h,g),e===lt&&(ke=lt=null,Ue=0),ho=t,nr=e,no=n,M0=a,I0=r,Xw=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,u4(Xu,function(){return rv(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Ce.T,Ce.T=null,r=qe.p,qe.p=2,c=Ke,Ke|=4;try{JC(e,t,n)}finally{Ke=c,qe.p=r,Ce.T=i}}rn=1,tv(),nv(),iv()}}function tv(){if(rn===1){rn=0;var e=nr,t=ho,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Ce.T,Ce.T=null;var i=qe.p;qe.p=2;var r=Ke;Ke|=4;try{Fw(t,e);var a=L0,c=Eb(e.containerInfo),h=a.focusedElem,g=a.selectionRange;if(c!==h&&h&&h.ownerDocument&&vb(h.ownerDocument.documentElement,h)){if(g!==null&&W1(h)){var p=g.start,y=g.end;if(y===void 0&&(y=p),"selectionStart"in h)h.selectionStart=p,h.selectionEnd=Math.min(y,h.value.length);else{var w=h.ownerDocument||document,E=w&&w.defaultView||window;if(E.getSelection){var A=E.getSelection(),O=h.textContent.length,I=Math.min(g.start,O),B=g.end===void 0?I:Math.min(g.end,O);!A.extend&&I>B&&(c=B,B=I,I=c);var T=Ep(h,I),N=Ep(h,B);if(T&&N&&(A.rangeCount!==1||A.anchorNode!==T.node||A.anchorOffset!==T.offset||A.focusNode!==N.node||A.focusOffset!==N.offset)){var C=w.createRange();C.setStart(T.node,T.offset),A.removeAllRanges(),I>B?(A.addRange(C),A.extend(N.node,N.offset)):(C.setEnd(N.node,N.offset),A.addRange(C))}}}}for(w=[],A=h;A=A.parentNode;)A.nodeType===1&&w.push({element:A,left:A.scrollLeft,top:A.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<w.length;h++){var k=w[h];k.element.scrollLeft=k.left,k.element.scrollTop=k.top}}yd=!!k0,L0=k0=null}finally{Ke=r,qe.p=i,Ce.T=n}}e.current=t,rn=2}}function nv(){if(rn===2){rn=0;var e=nr,t=ho,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Ce.T,Ce.T=null;var i=qe.p;qe.p=2;var r=Ke;Ke|=4;try{Lw(e,t.alternate,t)}finally{Ke=r,qe.p=i,Ce.T=n}}rn=3}}function iv(){if(rn===4||rn===3){rn=0,MS();var e=nr,t=ho,n=no,i=Xw;t.subtreeFlags&10256||t.flags&10256?rn=5:(rn=0,ho=nr=null,sv(e,e.pendingLanes));var r=e.pendingLanes;if(r===0&&(tr=null),V1(n),t=t.stateNode,Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(dc,t,void 0,(t.current.flags&128)===128)}catch{}if(i!==null){t=Ce.T,r=qe.p,qe.p=2,Ce.T=null;try{for(var a=e.onRecoverableError,c=0;c<i.length;c++){var h=i[c];a(h.value,{componentStack:h.stack})}}finally{Ce.T=t,qe.p=r}}no&3&&Zd(),qi(e),r=e.pendingLanes,n&4194090&&r&42?e===D0?Tl++:(Tl=0,D0=e):Tl=0,Ac(0)}}function sv(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,yc(t)))}function Zd(e){return tv(),nv(),iv(),rv()}function rv(){if(rn!==5)return!1;var e=nr,t=M0;M0=0;var n=V1(no),i=Ce.T,r=qe.p;try{qe.p=32>n?32:n,Ce.T=null,n=I0,I0=null;var a=nr,c=no;if(rn=0,ho=nr=null,no=0,Ke&6)throw Error(te(331));var h=Ke;if(Ke|=4,Yw(a.current),zw(a,a.current,c,n),Ke=h,Ac(0,!1),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(dc,a)}catch{}return!0}finally{qe.p=r,Ce.T=i,sv(e,t)}}function nx(e,t,n){t=ui(n,t),t=S0(e.stateNode,t,2),e=er(e,t,2),e!==null&&(fc(e,2),qi(e))}function st(e,t,n){if(e.tag===3)nx(e,e,n);else for(;t!==null;){if(t.tag===3){nx(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(tr===null||!tr.has(i))){e=ui(n,e),n=Ew(2),i=er(t,n,2),i!==null&&(Aw(n,i,t,e),fc(i,2),qi(i));break}}t=t.return}}function ff(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new n4;var r=new Set;i.set(t,r)}else r=i.get(t),r===void 0&&(r=new Set,i.set(t,r));r.has(n)||(bm=!0,r.add(n),e=o4.bind(null,e,t,n),t.then(e,e))}function o4(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,lt===e&&(Ue&n)===n&&(Nt===4||Nt===3&&(Ue&62914560)===Ue&&300>Fi()-vm?!(Ke&2)&&fo(e,0):wm|=n,uo===Ue&&(uo=0)),qi(e)}function av(e,t){t===0&&(t=tb()),e=Co(e,t),e!==null&&(fc(e,t),qi(e))}function l4(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),av(e,n)}function c4(e,t){var n=0;switch(e.tag){case 13:var i=e.stateNode,r=e.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(te(314))}i!==null&&i.delete(t),av(e,n)}function u4(e,t){return U1(e,t)}var dd=null,Na=null,O0=!1,hd=!1,mf=!1,Xr=0;function qi(e){e!==Na&&e.next===null&&(Na===null?dd=Na=e:Na=Na.next=e),hd=!0,O0||(O0=!0,h4())}function Ac(e,t){if(!mf&&hd){mf=!0;do for(var n=!1,i=dd;i!==null;){if(e!==0){var r=i.pendingLanes;if(r===0)var a=0;else{var c=i.suspendedLanes,h=i.pingedLanes;a=(1<<31-Wn(42|e)+1)-1,a&=r&~(c&~h),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,ix(i,a))}else a=Ue,a=Bd(i,i===lt?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||hc(i,a)||(n=!0,ix(i,a));i=i.next}while(n);mf=!1}}function d4(){ov()}function ov(){hd=O0=!1;var e=0;Xr!==0&&(w4()&&(e=Xr),Xr=0);for(var t=Fi(),n=null,i=dd;i!==null;){var r=i.next,a=lv(i,t);a===0?(i.next=null,n===null?dd=r:n.next=r,r===null&&(Na=n)):(n=i,(e!==0||a&3)&&(hd=!0)),i=r}Ac(e)}function lv(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var c=31-Wn(a),h=1<<c,g=r[c];g===-1?(!(h&n)||h&i)&&(r[c]=BS(h,t)):g<=t&&(e.expiredLanes|=h),a&=~h}if(t=lt,n=Ue,n=Bd(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(We===2||We===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Uh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||hc(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Uh(i),V1(n)){case 2:case 8:n=$2;break;case 32:n=Xu;break;case 268435456:n=J2;break;default:n=Xu}return i=cv.bind(null,e),n=U1(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Uh(i),e.callbackPriority=2,e.callbackNode=null,2}function cv(e,t){if(rn!==0&&rn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(Zd()&&e.callbackNode!==n)return null;var i=Ue;return i=Bd(e,e===lt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(Zw(e,i,t),lv(e,Fi()),e.callbackNode!=null&&e.callbackNode===n?cv.bind(null,e):null)}function ix(e,t){if(Zd())return null;Zw(e,t,!0)}function h4(){E4(function(){Ke&6?U1(Q2,d4):ov()})}function Am(){return Xr===0&&(Xr=eb()),Xr}function sx(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Cu(""+e)}function rx(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function f4(e,t,n,i,r){if(t==="submit"&&n&&n.stateNode===r){var a=sx((r[kn]||null).action),c=i.submitter;c&&(t=(t=c[kn]||null)?sx(t.formAction):c.getAttribute("formAction"),t!==null&&(a=t,c=null));var h=new Pd("action","action",null,i,r);e.push({event:h,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(Xr!==0){var g=c?rx(r,c):new FormData(r);E0(n,{pending:!0,data:g,method:r.method,action:a},null,g)}}else typeof a=="function"&&(h.preventDefault(),g=c?rx(r,c):new FormData(r),E0(n,{pending:!0,data:g,method:r.method,action:a},a,g))},currentTarget:r}]})}}for(var gf=0;gf<u0.length;gf++){var pf=u0[gf],m4=pf.toLowerCase(),g4=pf[0].toUpperCase()+pf.slice(1);Ci(m4,"on"+g4)}Ci(Sb,"onAnimationEnd");Ci(Cb,"onAnimationIteration");Ci(Tb,"onAnimationStart");Ci("dblclick","onDoubleClick");Ci("focusin","onFocus");Ci("focusout","onBlur");Ci(RC,"onTransitionRun");Ci(OC,"onTransitionStart");Ci(jC,"onTransitionCancel");Ci(Nb,"onTransitionEnd");so("onMouseEnter",["mouseout","mouseover"]);so("onMouseLeave",["mouseout","mouseover"]);so("onPointerEnter",["pointerout","pointerover"]);so("onPointerLeave",["pointerout","pointerover"]);ta("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ta("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ta("onBeforeInput",["compositionend","keypress","textInput","paste"]);ta("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ta("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),p4=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Gl));function uv(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],r=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var c=i.length-1;0<=c;c--){var h=i[c],g=h.instance,p=h.currentTarget;if(h=h.listener,g!==a&&r.isPropagationStopped())break e;a=h,r.currentTarget=p;try{a(r)}catch(y){rd(y)}r.currentTarget=null,a=g}else for(c=0;c<i.length;c++){if(h=i[c],g=h.instance,p=h.currentTarget,h=h.listener,g!==a&&r.isPropagationStopped())break e;a=h,r.currentTarget=p;try{a(r)}catch(y){rd(y)}r.currentTarget=null,a=g}}}}function je(e,t){var n=t[i0];n===void 0&&(n=t[i0]=new Set);var i=e+"__bubble";n.has(i)||(dv(t,e,2,!1),n.add(i))}function xf(e,t,n){var i=0;t&&(i|=4),dv(n,e,i,t)}var cu="_reactListening"+Math.random().toString(36).slice(2);function Sm(e){if(!e[cu]){e[cu]=!0,rb.forEach(function(n){n!=="selectionchange"&&(p4.has(n)||xf(n,!1,e),xf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[cu]||(t[cu]=!0,xf("selectionchange",!1,t))}}function dv(e,t,n,i){switch(Av(t)){case 2:var r=H4;break;case 8:r=G4;break;default:r=_m}n=r.bind(null,t,n,e),r=void 0,!o0||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),i?r!==void 0?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):r!==void 0?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function yf(e,t,n,i,r){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var c=i.tag;if(c===3||c===4){var h=i.stateNode.containerInfo;if(h===r)break;if(c===4)for(c=i.return;c!==null;){var g=c.tag;if((g===3||g===4)&&c.stateNode.containerInfo===r)return;c=c.return}for(;h!==null;){if(c=Ra(h),c===null)return;if(g=c.tag,g===5||g===6||g===26||g===27){i=a=c;continue e}h=h.parentNode}}i=i.return}fb(function(){var p=a,y=G1(n),w=[];e:{var E=_b.get(e);if(E!==void 0){var A=Pd,O=e;switch(e){case"keypress":if(Nu(n)===0)break e;case"keydown":case"keyup":A=uC;break;case"focusin":O="focus",A=Xh;break;case"focusout":O="blur",A=Xh;break;case"beforeblur":case"afterblur":A=Xh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":A=hp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":A=$S;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":A=fC;break;case Sb:case Cb:case Tb:A=tC;break;case Nb:A=gC;break;case"scroll":case"scrollend":A=KS;break;case"wheel":A=xC;break;case"copy":case"cut":case"paste":A=iC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":A=mp;break;case"toggle":case"beforetoggle":A=bC}var I=(t&4)!==0,B=!I&&(e==="scroll"||e==="scrollend"),T=I?E!==null?E+"Capture":null:E;I=[];for(var N=p,C;N!==null;){var k=N;if(C=k.stateNode,k=k.tag,k!==5&&k!==26&&k!==27||C===null||T===null||(k=Pl(N,T),k!=null&&I.push(Yl(N,k,C))),B)break;N=N.return}0<I.length&&(E=new A(E,O,null,n,y),w.push({event:E,listeners:I}))}}if(!(t&7)){e:{if(E=e==="mouseover"||e==="pointerover",A=e==="mouseout"||e==="pointerout",E&&n!==a0&&(O=n.relatedTarget||n.fromElement)&&(Ra(O)||O[Ao]))break e;if((A||E)&&(E=y.window===y?y:(E=y.ownerDocument)?E.defaultView||E.parentWindow:window,A?(O=n.relatedTarget||n.toElement,A=p,O=O?Ra(O):null,O!==null&&(B=uc(O),I=O.tag,O!==B||I!==5&&I!==27&&I!==6)&&(O=null)):(A=null,O=p),A!==O)){if(I=hp,k="onMouseLeave",T="onMouseEnter",N="mouse",(e==="pointerout"||e==="pointerover")&&(I=mp,k="onPointerLeave",T="onPointerEnter",N="pointer"),B=A==null?E:ll(A),C=O==null?E:ll(O),E=new I(k,N+"leave",A,n,y),E.target=B,E.relatedTarget=C,k=null,Ra(y)===p&&(I=new I(T,N+"enter",O,n,y),I.target=C,I.relatedTarget=B,k=I),B=k,A&&O)t:{for(I=A,T=O,N=0,C=I;C;C=ya(C))N++;for(C=0,k=T;k;k=ya(k))C++;for(;0<N-C;)I=ya(I),N--;for(;0<C-N;)T=ya(T),C--;for(;N--;){if(I===T||T!==null&&I===T.alternate)break t;I=ya(I),T=ya(T)}I=null}else I=null;A!==null&&ax(w,E,A,I,!1),O!==null&&B!==null&&ax(w,B,O,I,!0)}}e:{if(E=p?ll(p):window,A=E.nodeName&&E.nodeName.toLowerCase(),A==="select"||A==="input"&&E.type==="file")var z=yp;else if(xp(E))if(bb)z=MC;else{z=NC;var D=TC}else A=E.nodeName,!A||A.toLowerCase()!=="input"||E.type!=="checkbox"&&E.type!=="radio"?p&&H1(p.elementType)&&(z=yp):z=_C;if(z&&(z=z(e,p))){yb(w,z,n,y);break e}D&&D(e,E,p),e==="focusout"&&p&&E.type==="number"&&p.memoizedProps.value!=null&&r0(E,"number",E.value)}switch(D=p?ll(p):window,e){case"focusin":(xp(D)||D.contentEditable==="true")&&(ka=D,l0=p,pl=null);break;case"focusout":pl=l0=ka=null;break;case"mousedown":c0=!0;break;case"contextmenu":case"mouseup":case"dragend":c0=!1,Ap(w,n,y);break;case"selectionchange":if(DC)break;case"keydown":case"keyup":Ap(w,n,y)}var L;if(X1)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else ja?pb(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(gb&&n.locale!=="ko"&&(ja||F!=="onCompositionStart"?F==="onCompositionEnd"&&ja&&(L=mb()):(Ws=y,Y1="value"in Ws?Ws.value:Ws.textContent,ja=!0)),D=fd(p,F),0<D.length&&(F=new fp(F,e,null,n,y),w.push({event:F,listeners:D}),L?F.data=L:(L=xb(n),L!==null&&(F.data=L)))),(L=vC?EC(e,n):AC(e,n))&&(F=fd(p,"onBeforeInput"),0<F.length&&(D=new fp("onBeforeInput","beforeinput",null,n,y),w.push({event:D,listeners:F}),D.data=L)),f4(w,e,p,n,y)}uv(w,t)})}function Yl(e,t,n){return{instance:e,listener:t,currentTarget:n}}function fd(e,t){for(var n=t+"Capture",i=[];e!==null;){var r=e,a=r.stateNode;if(r=r.tag,r!==5&&r!==26&&r!==27||a===null||(r=Pl(e,n),r!=null&&i.unshift(Yl(e,r,a)),r=Pl(e,t),r!=null&&i.push(Yl(e,r,a))),e.tag===3)return i;e=e.return}return[]}function ya(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function ax(e,t,n,i,r){for(var a=t._reactName,c=[];n!==null&&n!==i;){var h=n,g=h.alternate,p=h.stateNode;if(h=h.tag,g!==null&&g===i)break;h!==5&&h!==26&&h!==27||p===null||(g=p,r?(p=Pl(n,a),p!=null&&c.unshift(Yl(n,p,g))):r||(p=Pl(n,a),p!=null&&c.push(Yl(n,p,g)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var x4=/\r\n?/g,y4=/\u0000|\uFFFD/g;function ox(e){return(typeof e=="string"?e:""+e).replace(x4,`
`).replace(y4,"")}function hv(e,t){return t=ox(t),ox(e)===t}function Kd(){}function Je(e,t,n,i,r,a){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||ro(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&ro(e,""+i);break;case"className":nu(e,"class",i);break;case"tabIndex":nu(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":nu(e,n,i);break;case"style":hb(e,i,a);break;case"data":if(t!=="object"){nu(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cu(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&Je(e,t,"name",r.name,r,null),Je(e,t,"formEncType",r.formEncType,r,null),Je(e,t,"formMethod",r.formMethod,r,null),Je(e,t,"formTarget",r.formTarget,r,null)):(Je(e,t,"encType",r.encType,r,null),Je(e,t,"method",r.method,r,null),Je(e,t,"target",r.target,r,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=Cu(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=Kd);break;case"onScroll":i!=null&&je("scroll",e);break;case"onScrollEnd":i!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=Cu(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":je("beforetoggle",e),je("toggle",e),Su(e,"popover",i);break;case"xlinkActuate":Ki(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":Ki(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":Ki(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":Ki(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":Ki(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":Ki(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":Ki(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":Ki(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":Ki(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":Su(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=WS.get(n)||n,Su(e,n,i))}}function j0(e,t,n,i,r,a){switch(n){case"style":hb(e,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(te(61));if(n=i.__html,n!=null){if(r.children!=null)throw Error(te(60));e.innerHTML=n}}break;case"children":typeof i=="string"?ro(e,i):(typeof i=="number"||typeof i=="bigint")&&ro(e,""+i);break;case"onScroll":i!=null&&je("scroll",e);break;case"onScrollEnd":i!=null&&je("scrollend",e);break;case"onClick":i!=null&&(e.onclick=Kd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ab.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(r=n.endsWith("Capture"),t=n.slice(2,r?n.length-7:void 0),a=e[kn]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,r),typeof i=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,r);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):Su(e,n,i)}}}function an(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var i=!1,r=!1,a;for(a in n)if(n.hasOwnProperty(a)){var c=n[a];if(c!=null)switch(a){case"src":i=!0;break;case"srcSet":r=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Je(e,t,a,c,n,null)}}r&&Je(e,t,"srcSet",n.srcSet,n,null),i&&Je(e,t,"src",n.src,n,null);return;case"input":je("invalid",e);var h=a=c=r=null,g=null,p=null;for(i in n)if(n.hasOwnProperty(i)){var y=n[i];if(y!=null)switch(i){case"name":r=y;break;case"type":c=y;break;case"checked":g=y;break;case"defaultChecked":p=y;break;case"value":a=y;break;case"defaultValue":h=y;break;case"children":case"dangerouslySetInnerHTML":if(y!=null)throw Error(te(137,t));break;default:Je(e,t,i,y,n,null)}}cb(e,a,h,g,p,c,r,!1),Wu(e);return;case"select":je("invalid",e),i=c=a=null;for(r in n)if(n.hasOwnProperty(r)&&(h=n[r],h!=null))switch(r){case"value":a=h;break;case"defaultValue":c=h;break;case"multiple":i=h;default:Je(e,t,r,h,n,null)}t=a,n=c,e.multiple=!!i,t!=null?Ka(e,!!i,t,!1):n!=null&&Ka(e,!!i,n,!0);return;case"textarea":je("invalid",e),a=r=i=null;for(c in n)if(n.hasOwnProperty(c)&&(h=n[c],h!=null))switch(c){case"value":i=h;break;case"defaultValue":r=h;break;case"children":a=h;break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(te(91));break;default:Je(e,t,c,h,n,null)}db(e,i,r,a),Wu(e);return;case"option":for(g in n)if(n.hasOwnProperty(g)&&(i=n[g],i!=null))switch(g){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:Je(e,t,g,i,n,null)}return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(i=0;i<Gl.length;i++)je(Gl[i],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(p in n)if(n.hasOwnProperty(p)&&(i=n[p],i!=null))switch(p){case"children":case"dangerouslySetInnerHTML":throw Error(te(137,t));default:Je(e,t,p,i,n,null)}return;default:if(H1(t)){for(y in n)n.hasOwnProperty(y)&&(i=n[y],i!==void 0&&j0(e,t,y,i,n,void 0));return}}for(h in n)n.hasOwnProperty(h)&&(i=n[h],i!=null&&Je(e,t,h,i,n,null))}function b4(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var r=null,a=null,c=null,h=null,g=null,p=null,y=null;for(A in n){var w=n[A];if(n.hasOwnProperty(A)&&w!=null)switch(A){case"checked":break;case"value":break;case"defaultValue":g=w;default:i.hasOwnProperty(A)||Je(e,t,A,null,i,w)}}for(var E in i){var A=i[E];if(w=n[E],i.hasOwnProperty(E)&&(A!=null||w!=null))switch(E){case"type":a=A;break;case"name":r=A;break;case"checked":p=A;break;case"defaultChecked":y=A;break;case"value":c=A;break;case"defaultValue":h=A;break;case"children":case"dangerouslySetInnerHTML":if(A!=null)throw Error(te(137,t));break;default:A!==w&&Je(e,t,E,A,i,w)}}s0(e,c,h,g,p,y,a,r);return;case"select":A=c=h=E=null;for(a in n)if(g=n[a],n.hasOwnProperty(a)&&g!=null)switch(a){case"value":break;case"multiple":A=g;default:i.hasOwnProperty(a)||Je(e,t,a,null,i,g)}for(r in i)if(a=i[r],g=n[r],i.hasOwnProperty(r)&&(a!=null||g!=null))switch(r){case"value":E=a;break;case"defaultValue":h=a;break;case"multiple":c=a;default:a!==g&&Je(e,t,r,a,i,g)}t=h,n=c,i=A,E!=null?Ka(e,!!n,E,!1):!!i!=!!n&&(t!=null?Ka(e,!!n,t,!0):Ka(e,!!n,n?[]:"",!1));return;case"textarea":A=E=null;for(h in n)if(r=n[h],n.hasOwnProperty(h)&&r!=null&&!i.hasOwnProperty(h))switch(h){case"value":break;case"children":break;default:Je(e,t,h,null,i,r)}for(c in i)if(r=i[c],a=n[c],i.hasOwnProperty(c)&&(r!=null||a!=null))switch(c){case"value":E=r;break;case"defaultValue":A=r;break;case"children":break;case"dangerouslySetInnerHTML":if(r!=null)throw Error(te(91));break;default:r!==a&&Je(e,t,c,r,i,a)}ub(e,E,A);return;case"option":for(var O in n)if(E=n[O],n.hasOwnProperty(O)&&E!=null&&!i.hasOwnProperty(O))switch(O){case"selected":e.selected=!1;break;default:Je(e,t,O,null,i,E)}for(g in i)if(E=i[g],A=n[g],i.hasOwnProperty(g)&&E!==A&&(E!=null||A!=null))switch(g){case"selected":e.selected=E&&typeof E!="function"&&typeof E!="symbol";break;default:Je(e,t,g,E,i,A)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var I in n)E=n[I],n.hasOwnProperty(I)&&E!=null&&!i.hasOwnProperty(I)&&Je(e,t,I,null,i,E);for(p in i)if(E=i[p],A=n[p],i.hasOwnProperty(p)&&E!==A&&(E!=null||A!=null))switch(p){case"children":case"dangerouslySetInnerHTML":if(E!=null)throw Error(te(137,t));break;default:Je(e,t,p,E,i,A)}return;default:if(H1(t)){for(var B in n)E=n[B],n.hasOwnProperty(B)&&E!==void 0&&!i.hasOwnProperty(B)&&j0(e,t,B,void 0,i,E);for(y in i)E=i[y],A=n[y],!i.hasOwnProperty(y)||E===A||E===void 0&&A===void 0||j0(e,t,y,E,i,A);return}}for(var T in n)E=n[T],n.hasOwnProperty(T)&&E!=null&&!i.hasOwnProperty(T)&&Je(e,t,T,null,i,E);for(w in i)E=i[w],A=n[w],!i.hasOwnProperty(w)||E===A||E==null&&A==null||Je(e,t,w,E,i,A)}var k0=null,L0=null;function md(e){return e.nodeType===9?e:e.ownerDocument}function lx(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fv(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function B0(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var bf=null;function w4(){var e=window.event;return e&&e.type==="popstate"?e===bf?!1:(bf=e,!0):(bf=null,!1)}var mv=typeof setTimeout=="function"?setTimeout:void 0,v4=typeof clearTimeout=="function"?clearTimeout:void 0,cx=typeof Promise=="function"?Promise:void 0,E4=typeof queueMicrotask=="function"?queueMicrotask:typeof cx<"u"?function(e){return cx.resolve(null).then(e).catch(A4)}:mv;function A4(e){setTimeout(function(){throw e})}function xr(e){return e==="head"}function ux(e,t){var n=t,i=0,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(0<i&&8>i){n=i;var c=e.ownerDocument;if(n&1&&Nl(c.documentElement),n&2&&Nl(c.body),n&4)for(n=c.head,Nl(n),c=n.firstChild;c;){var h=c.nextSibling,g=c.nodeName;c[mc]||g==="SCRIPT"||g==="STYLE"||g==="LINK"&&c.rel.toLowerCase()==="stylesheet"||n.removeChild(c),c=h}}if(r===0){e.removeChild(a),Kl(t);return}r--}else n==="$"||n==="$?"||n==="$!"?r++:i=n.charCodeAt(0)-48;else i=0;n=a}while(n);Kl(t)}function P0(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":P0(n),z1(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function S4(e,t,n,i){for(;e.nodeType===1;){var r=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[mc])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==r.rel||e.getAttribute("href")!==(r.href==null||r.href===""?null:r.href)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin)||e.getAttribute("title")!==(r.title==null?null:r.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(r.src==null?null:r.src)||e.getAttribute("type")!==(r.type==null?null:r.type)||e.getAttribute("crossorigin")!==(r.crossOrigin==null?null:r.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=r.name==null?null:""+r.name;if(r.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=Ai(e.nextSibling),e===null)break}return null}function C4(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ai(e.nextSibling),e===null))return null;return e}function U0(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState==="complete"}function T4(e,t){var n=e.ownerDocument;if(e.data!=="$?"||n.readyState==="complete")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function Ai(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="F!"||t==="F")break;if(t==="/$")return null}}return e}var F0=null;function dx(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}function gv(e,t,n){switch(t=md(n),e){case"html":if(e=t.documentElement,!e)throw Error(te(452));return e;case"head":if(e=t.head,!e)throw Error(te(453));return e;case"body":if(e=t.body,!e)throw Error(te(454));return e;default:throw Error(te(451))}}function Nl(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);z1(e)}var mi=new Map,hx=new Set;function gd(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Es=qe.d;qe.d={f:N4,r:_4,D:M4,C:I4,L:D4,m:R4,X:j4,S:O4,M:k4};function N4(){var e=Es.f(),t=Xd();return e||t}function _4(e){var t=So(e);t!==null&&t.tag===5&&t.type==="form"?lw(t):Es.r(e)}var No=typeof document>"u"?null:document;function pv(e,t,n){var i=No;if(i&&typeof t=="string"&&t){var r=ci(t);r='link[rel="'+e+'"][href="'+r+'"]',typeof n=="string"&&(r+='[crossorigin="'+n+'"]'),hx.has(r)||(hx.add(r),e={rel:e,crossOrigin:n,href:t},i.querySelector(r)===null&&(t=i.createElement("link"),an(t,"link",e),Wt(t),i.head.appendChild(t)))}}function M4(e){Es.D(e),pv("dns-prefetch",e,null)}function I4(e,t){Es.C(e,t),pv("preconnect",e,t)}function D4(e,t,n){Es.L(e,t,n);var i=No;if(i&&e&&t){var r='link[rel="preload"][as="'+ci(t)+'"]';t==="image"&&n&&n.imageSrcSet?(r+='[imagesrcset="'+ci(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(r+='[imagesizes="'+ci(n.imageSizes)+'"]')):r+='[href="'+ci(e)+'"]';var a=r;switch(t){case"style":a=mo(e);break;case"script":a=_o(e)}mi.has(a)||(e=dt({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),mi.set(a,e),i.querySelector(r)!==null||t==="style"&&i.querySelector(Sc(a))||t==="script"&&i.querySelector(Cc(a))||(t=i.createElement("link"),an(t,"link",e),Wt(t),i.head.appendChild(t)))}}function R4(e,t){Es.m(e,t);var n=No;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",r='link[rel="modulepreload"][as="'+ci(i)+'"][href="'+ci(e)+'"]',a=r;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=_o(e)}if(!mi.has(a)&&(e=dt({rel:"modulepreload",href:e},t),mi.set(a,e),n.querySelector(r)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Cc(a)))return}i=n.createElement("link"),an(i,"link",e),Wt(i),n.head.appendChild(i)}}}function O4(e,t,n){Es.S(e,t,n);var i=No;if(i&&e){var r=Za(i).hoistableStyles,a=mo(e);t=t||"default";var c=r.get(a);if(!c){var h={loading:0,preload:null};if(c=i.querySelector(Sc(a)))h.loading=5;else{e=dt({rel:"stylesheet",href:e,"data-precedence":t},n),(n=mi.get(a))&&Cm(e,n);var g=c=i.createElement("link");Wt(g),an(g,"link",e),g._p=new Promise(function(p,y){g.onload=p,g.onerror=y}),g.addEventListener("load",function(){h.loading|=1}),g.addEventListener("error",function(){h.loading|=2}),h.loading|=4,ju(c,t,i)}c={type:"stylesheet",instance:c,count:1,state:h},r.set(a,c)}}}function j4(e,t){Es.X(e,t);var n=No;if(n&&e){var i=Za(n).hoistableScripts,r=_o(e),a=i.get(r);a||(a=n.querySelector(Cc(r)),a||(e=dt({src:e,async:!0},t),(t=mi.get(r))&&Tm(e,t),a=n.createElement("script"),Wt(a),an(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function k4(e,t){Es.M(e,t);var n=No;if(n&&e){var i=Za(n).hoistableScripts,r=_o(e),a=i.get(r);a||(a=n.querySelector(Cc(r)),a||(e=dt({src:e,async:!0,type:"module"},t),(t=mi.get(r))&&Tm(e,t),a=n.createElement("script"),Wt(a),an(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(r,a))}}function fx(e,t,n,i){var r=(r=$s.current)?gd(r):null;if(!r)throw Error(te(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=mo(n.href),n=Za(r).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=mo(n.href);var a=Za(r).hoistableStyles,c=a.get(e);if(c||(r=r.ownerDocument||r,c={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,c),(a=r.querySelector(Sc(e)))&&!a._p&&(c.instance=a,c.state.loading=5),mi.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},mi.set(e,n),a||L4(r,e,n,c.state))),t&&i===null)throw Error(te(528,""));return c}if(t&&i!==null)throw Error(te(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=_o(n),n=Za(r).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(te(444,e))}}function mo(e){return'href="'+ci(e)+'"'}function Sc(e){return'link[rel="stylesheet"]['+e+"]"}function xv(e){return dt({},e,{"data-precedence":e.precedence,precedence:null})}function L4(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),an(t,"link",n),Wt(t),e.head.appendChild(t))}function _o(e){return'[src="'+ci(e)+'"]'}function Cc(e){return"script[async]"+e}function mx(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+ci(n.href)+'"]');if(i)return t.instance=i,Wt(i),i;var r=dt({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),Wt(i),an(i,"style",r),ju(i,n.precedence,e),t.instance=i;case"stylesheet":r=mo(n.href);var a=e.querySelector(Sc(r));if(a)return t.state.loading|=4,t.instance=a,Wt(a),a;i=xv(n),(r=mi.get(r))&&Cm(i,r),a=(e.ownerDocument||e).createElement("link"),Wt(a);var c=a;return c._p=new Promise(function(h,g){c.onload=h,c.onerror=g}),an(a,"link",i),t.state.loading|=4,ju(a,n.precedence,e),t.instance=a;case"script":return a=_o(n.src),(r=e.querySelector(Cc(a)))?(t.instance=r,Wt(r),r):(i=n,(r=mi.get(a))&&(i=dt({},n),Tm(i,r)),e=e.ownerDocument||e,r=e.createElement("script"),Wt(r),an(r,"link",i),e.head.appendChild(r),t.instance=r);case"void":return null;default:throw Error(te(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,ju(i,n.precedence,e));return t.instance}function ju(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),r=i.length?i[i.length-1]:null,a=r,c=0;c<i.length;c++){var h=i[c];if(h.dataset.precedence===t)a=h;else if(a!==r)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function Cm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Tm(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var ku=null;function gx(e,t,n){if(ku===null){var i=new Map,r=ku=new Map;r.set(n,i)}else r=ku,i=r.get(n),i||(i=new Map,r.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),r=0;r<n.length;r++){var a=n[r];if(!(a[mc]||a[un]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var c=a.getAttribute(t)||"";c=e+c;var h=i.get(c);h?h.push(a):i.set(c,[a])}}return i}function px(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function B4(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function yv(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}var ql=null;function P4(){}function U4(e,t,n){if(ql===null)throw Error(te(475));var i=ql;if(t.type==="stylesheet"&&(typeof n.media!="string"||matchMedia(n.media).matches!==!1)&&!(t.state.loading&4)){if(t.instance===null){var r=mo(n.href),a=e.querySelector(Sc(r));if(a){e=a._p,e!==null&&typeof e=="object"&&typeof e.then=="function"&&(i.count++,i=pd.bind(i),e.then(i,i)),t.state.loading|=4,t.instance=a,Wt(a);return}a=e.ownerDocument||e,n=xv(n),(r=mi.get(r))&&Cm(n,r),a=a.createElement("link"),Wt(a);var c=a;c._p=new Promise(function(h,g){c.onload=h,c.onerror=g}),an(a,"link",n),t.instance=a}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(t,e),(e=t.state.preload)&&!(t.state.loading&3)&&(i.count++,t=pd.bind(i),e.addEventListener("load",t),e.addEventListener("error",t))}}function F4(){if(ql===null)throw Error(te(475));var e=ql;return e.stylesheets&&e.count===0&&V0(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&V0(e,e.stylesheets),e.unsuspend){var i=e.unsuspend;e.unsuspend=null,i()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}function pd(){if(this.count--,this.count===0){if(this.stylesheets)V0(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var xd=null;function V0(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,xd=new Map,t.forEach(V4,e),xd=null,pd.call(e))}function V4(e,t){if(!(t.state.loading&4)){var n=xd.get(e);if(n)var i=n.get(null);else{n=new Map,xd.set(e,n);for(var r=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<r.length;a++){var c=r[a];(c.nodeName==="LINK"||c.getAttribute("media")!=="not all")&&(n.set(c.dataset.precedence,c),i=c)}i&&n.set(null,i)}r=t.instance,c=r.getAttribute("data-precedence"),a=n.get(c)||i,a===i&&n.set(null,r),n.set(c,r),this.count++,i=pd.bind(this),r.addEventListener("load",i),r.addEventListener("error",i),a?a.parentNode.insertBefore(r,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(r,e.firstChild)),t.state.loading|=4}}var Xl={$$typeof:is,Provider:null,Consumer:null,_currentValue:Vr,_currentValue2:Vr,_threadCount:0};function z4(e,t,n,i,r,a,c,h){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Fh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Fh(0),this.hiddenUpdates=Fh(null),this.identifierPrefix=i,this.onUncaughtError=r,this.onCaughtError=a,this.onRecoverableError=c,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=h,this.incompleteTransitions=new Map}function bv(e,t,n,i,r,a,c,h,g,p,y,w){return e=new z4(e,t,n,c,h,g,p,w),t=1,a===!0&&(t|=24),a=Gn(3,null,null,t),e.current=a,a.stateNode=e,t=em(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:t},nm(a),e}function wv(e){return e?(e=Pa,e):Pa}function vv(e,t,n,i,r,a){r=wv(r),i.context===null?i.context=r:i.pendingContext=r,i=Js(t),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=er(e,i,t),n!==null&&(Kn(n,e,t),bl(n,e,t))}function xx(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Nm(e,t){xx(e,t),(e=e.alternate)&&xx(e,t)}function Ev(e){if(e.tag===13){var t=Co(e,67108864);t!==null&&Kn(t,e,67108864),Nm(e,67108864)}}var yd=!0;function H4(e,t,n,i){var r=Ce.T;Ce.T=null;var a=qe.p;try{qe.p=2,_m(e,t,n,i)}finally{qe.p=a,Ce.T=r}}function G4(e,t,n,i){var r=Ce.T;Ce.T=null;var a=qe.p;try{qe.p=8,_m(e,t,n,i)}finally{qe.p=a,Ce.T=r}}function _m(e,t,n,i){if(yd){var r=z0(i);if(r===null)yf(e,t,i,bd,n),yx(e,i);else if(q4(r,e,t,n,i))i.stopPropagation();else if(yx(e,i),t&4&&-1<Y4.indexOf(e)){for(;r!==null;){var a=So(r);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var c=Rr(a.pendingLanes);if(c!==0){var h=a;for(h.pendingLanes|=2,h.entangledLanes|=2;c;){var g=1<<31-Wn(c);h.entanglements[1]|=g,c&=~g}qi(a),!(Ke&6)&&(cd=Fi()+500,Ac(0))}}break;case 13:h=Co(a,2),h!==null&&Kn(h,a,2),Xd(),Nm(a,2)}if(a=z0(i),a===null&&yf(e,t,i,bd,n),a===r)break;r=a}r!==null&&i.stopPropagation()}else yf(e,t,i,null,n)}}function z0(e){return e=G1(e),Mm(e)}var bd=null;function Mm(e){if(bd=null,e=Ra(e),e!==null){var t=uc(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=X2(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return bd=e,null}function Av(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(IS()){case Q2:return 2;case $2:return 8;case Xu:case DS:return 32;case J2:return 268435456;default:return 32}default:return 32}}var H0=!1,ir=null,sr=null,rr=null,Wl=new Map,Zl=new Map,Gs=[],Y4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function yx(e,t){switch(e){case"focusin":case"focusout":ir=null;break;case"dragenter":case"dragleave":sr=null;break;case"mouseover":case"mouseout":rr=null;break;case"pointerover":case"pointerout":Wl.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Zl.delete(t.pointerId)}}function nl(e,t,n,i,r,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[r]},t!==null&&(t=So(t),t!==null&&Ev(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function q4(e,t,n,i,r){switch(t){case"focusin":return ir=nl(ir,e,t,n,i,r),!0;case"dragenter":return sr=nl(sr,e,t,n,i,r),!0;case"mouseover":return rr=nl(rr,e,t,n,i,r),!0;case"pointerover":var a=r.pointerId;return Wl.set(a,nl(Wl.get(a)||null,e,t,n,i,r)),!0;case"gotpointercapture":return a=r.pointerId,Zl.set(a,nl(Zl.get(a)||null,e,t,n,i,r)),!0}return!1}function Sv(e){var t=Ra(e.target);if(t!==null){var n=uc(t);if(n!==null){if(t=n.tag,t===13){if(t=X2(n),t!==null){e.blockedOn=t,US(e.priority,function(){if(n.tag===13){var i=Zn();i=F1(i);var r=Co(n,i);r!==null&&Kn(r,n,i),Nm(n,i)}});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Lu(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=z0(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);a0=i,n.target.dispatchEvent(i),a0=null}else return t=So(n),t!==null&&Ev(t),e.blockedOn=n,!1;t.shift()}return!0}function bx(e,t,n){Lu(e)&&n.delete(t)}function X4(){H0=!1,ir!==null&&Lu(ir)&&(ir=null),sr!==null&&Lu(sr)&&(sr=null),rr!==null&&Lu(rr)&&(rr=null),Wl.forEach(bx),Zl.forEach(bx)}function uu(e,t){e.blockedOn===t&&(e.blockedOn=null,H0||(H0=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,X4)))}var du=null;function wx(e){du!==e&&(du=e,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,function(){du===e&&(du=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],r=e[t+2];if(typeof i!="function"){if(Mm(i||n)===null)continue;break}var a=So(n);a!==null&&(e.splice(t,3),t-=3,E0(a,{pending:!0,data:r,method:n.method,action:i},i,r))}}))}function Kl(e){function t(g){return uu(g,e)}ir!==null&&uu(ir,e),sr!==null&&uu(sr,e),rr!==null&&uu(rr,e),Wl.forEach(t),Zl.forEach(t);for(var n=0;n<Gs.length;n++){var i=Gs[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Gs.length&&(n=Gs[0],n.blockedOn===null);)Sv(n),n.blockedOn===null&&Gs.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var r=n[i],a=n[i+1],c=r[kn]||null;if(typeof a=="function")c||wx(n);else if(c){var h=null;if(a&&a.hasAttribute("formAction")){if(r=a,c=a[kn]||null)h=c.formAction;else if(Mm(r)!==null)continue}else h=c.action;typeof h=="function"?n[i+1]=h:(n.splice(i,3),i-=3),wx(n)}}}function Im(e){this._internalRoot=e}Qd.prototype.render=Im.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(te(409));var n=t.current,i=Zn();vv(n,i,e,t,null,null)};Qd.prototype.unmount=Im.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;vv(e.current,2,null,e,null,null),Xd(),t[Ao]=null}};function Qd(e){this._internalRoot=e}Qd.prototype.unstable_scheduleHydration=function(e){if(e){var t=sb();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Gs.length&&t!==0&&t<Gs[n].priority;n++);Gs.splice(n,0,e),n===0&&Sv(e)}};var vx=Y2.version;if(vx!=="19.1.0")throw Error(te(527,vx,"19.1.0"));qe.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(te(188)):(e=Object.keys(e).join(","),Error(te(268,e)));return e=AS(t),e=e!==null?W2(e):null,e=e===null?null:e.stateNode,e};var W4={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:Ce,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hu.isDisabled&&hu.supportsFiber)try{dc=hu.inject(W4),Xn=hu}catch{}}kd.createRoot=function(e,t){if(!q2(e))throw Error(te(299));var n=!1,i="",r=bw,a=ww,c=vw,h=null;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(r=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(c=t.onRecoverableError),t.unstable_transitionCallbacks!==void 0&&(h=t.unstable_transitionCallbacks)),t=bv(e,1,!1,null,null,n,i,r,a,c,h,null),e[Ao]=t.current,Sm(e),new Im(t)};kd.hydrateRoot=function(e,t,n){if(!q2(e))throw Error(te(299));var i=!1,r="",a=bw,c=ww,h=vw,g=null,p=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(c=n.onCaughtError),n.onRecoverableError!==void 0&&(h=n.onRecoverableError),n.unstable_transitionCallbacks!==void 0&&(g=n.unstable_transitionCallbacks),n.formState!==void 0&&(p=n.formState)),t=bv(e,1,!0,t,n??null,i,r,a,c,h,g,p),t.context=wv(null),n=t.current,i=Zn(),i=F1(i),r=Js(i),r.callback=null,er(n,r,i),n=i,t.current.lanes=n,fc(t,n),qi(t),e[Ao]=t.current,Sm(e),new Qd(t)};kd.version="19.1.0";function Cv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cv)}catch(e){console.error(e)}}Cv(),U2.exports=kd;var Z4=U2.exports;const K4=D1(Z4);/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ex="popstate";function Q4(e={}){function t(i,r){let{pathname:a,search:c,hash:h}=i.location;return G0("",{pathname:a,search:c,hash:h},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Ql(r)}return J4(t,n,null,e)}function xt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Si(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $4(){return Math.random().toString(36).substring(2,10)}function Ax(e,t){return{usr:e.state,key:e.key,idx:t}}function G0(e,t,n=null,i){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Mo(t):t,state:n,key:t&&t.key||i||$4()}}function Ql({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Mo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let i=e.indexOf("?");i>=0&&(t.search=e.substring(i),e=e.substring(0,i)),e&&(t.pathname=e)}return t}function J4(e,t,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,c=r.history,h="POP",g=null,p=y();p==null&&(p=0,c.replaceState({...c.state,idx:p},""));function y(){return(c.state||{idx:null}).idx}function w(){h="POP";let B=y(),T=B==null?null:B-p;p=B,g&&g({action:h,location:I.location,delta:T})}function E(B,T){h="PUSH";let N=G0(I.location,B,T);p=y()+1;let C=Ax(N,p),k=I.createHref(N);try{c.pushState(C,"",k)}catch(z){if(z instanceof DOMException&&z.name==="DataCloneError")throw z;r.location.assign(k)}a&&g&&g({action:h,location:I.location,delta:1})}function A(B,T){h="REPLACE";let N=G0(I.location,B,T);p=y();let C=Ax(N,p),k=I.createHref(N);c.replaceState(C,"",k),a&&g&&g({action:h,location:I.location,delta:0})}function O(B){return eT(B)}let I={get action(){return h},get location(){return e(r,c)},listen(B){if(g)throw new Error("A history only accepts one active listener");return r.addEventListener(Ex,w),g=B,()=>{r.removeEventListener(Ex,w),g=null}},createHref(B){return t(r,B)},createURL:O,encodeLocation(B){let T=O(B);return{pathname:T.pathname,search:T.search,hash:T.hash}},push:E,replace:A,go(B){return c.go(B)}};return I}function eT(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),xt(n,"No window.location.(origin|href) available to create URL");let i=typeof e=="string"?e:Ql(e);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Tv(e,t,n="/"){return tT(e,t,n,!1)}function tT(e,t,n,i){let r=typeof t=="string"?Mo(t):t,a=ys(r.pathname||"/",n);if(a==null)return null;let c=Nv(e);nT(c);let h=null;for(let g=0;h==null&&g<c.length;++g){let p=fT(a);h=dT(c[g],p,i)}return h}function Nv(e,t=[],n=[],i=""){let r=(a,c,h)=>{let g={relativePath:h===void 0?a.path||"":h,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};g.relativePath.startsWith("/")&&(xt(g.relativePath.startsWith(i),`Absolute route path "${g.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),g.relativePath=g.relativePath.slice(i.length));let p=ds([i,g.relativePath]),y=n.concat(g);a.children&&a.children.length>0&&(xt(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${p}".`),Nv(a.children,t,y,p)),!(a.path==null&&!a.index)&&t.push({path:p,score:cT(p,a.index),routesMeta:y})};return e.forEach((a,c)=>{var h;if(a.path===""||!((h=a.path)!=null&&h.includes("?")))r(a,c);else for(let g of _v(a.path))r(a,c,g)}),t}function _v(e){let t=e.split("/");if(t.length===0)return[];let[n,...i]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let c=_v(i.join("/")),h=[];return h.push(...c.map(g=>g===""?a:[a,g].join("/"))),r&&h.push(...c),h.map(g=>e.startsWith("/")&&g===""?"/":g)}function nT(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:uT(t.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var iT=/^:[\w-]+$/,sT=3,rT=2,aT=1,oT=10,lT=-2,Sx=e=>e==="*";function cT(e,t){let n=e.split("/"),i=n.length;return n.some(Sx)&&(i+=lT),t&&(i+=rT),n.filter(r=>!Sx(r)).reduce((r,a)=>r+(iT.test(a)?sT:a===""?aT:oT),i)}function uT(e,t){return e.length===t.length&&e.slice(0,-1).every((i,r)=>i===t[r])?e[e.length-1]-t[t.length-1]:0}function dT(e,t,n=!1){let{routesMeta:i}=e,r={},a="/",c=[];for(let h=0;h<i.length;++h){let g=i[h],p=h===i.length-1,y=a==="/"?t:t.slice(a.length)||"/",w=wd({path:g.relativePath,caseSensitive:g.caseSensitive,end:p},y),E=g.route;if(!w&&p&&n&&!i[i.length-1].route.index&&(w=wd({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},y)),!w)return null;Object.assign(r,w.params),c.push({params:r,pathname:ds([a,w.pathname]),pathnameBase:xT(ds([a,w.pathnameBase])),route:E}),w.pathnameBase!=="/"&&(a=ds([a,w.pathnameBase]))}return c}function wd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,i]=hT(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],c=a.replace(/(.)\/+$/,"$1"),h=r.slice(1);return{params:i.reduce((p,{paramName:y,isOptional:w},E)=>{if(y==="*"){let O=h[E]||"";c=a.slice(0,a.length-O.length).replace(/(.)\/+$/,"$1")}const A=h[E];return w&&!A?p[y]=void 0:p[y]=(A||"").replace(/%2F/g,"/"),p},{}),pathname:a,pathnameBase:c,pattern:e}}function hT(e,t=!1,n=!0){Si(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let i=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,g)=>(i.push({paramName:h,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(i.push({paramName:"*"}),r+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":e!==""&&e!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),i]}function fT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Si(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ys(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,i=e.charAt(n);return i&&i!=="/"?null:e.slice(n)||"/"}function mT(e,t="/"){let{pathname:n,search:i="",hash:r=""}=typeof e=="string"?Mo(e):e;return{pathname:n?n.startsWith("/")?n:gT(n,t):t,search:yT(i),hash:bT(r)}}function gT(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function wf(e,t,n,i){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function pT(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Dm(e){let t=pT(e);return t.map((n,i)=>i===t.length-1?n.pathname:n.pathnameBase)}function Rm(e,t,n,i=!1){let r;typeof e=="string"?r=Mo(e):(r={...e},xt(!r.pathname||!r.pathname.includes("?"),wf("?","pathname","search",r)),xt(!r.pathname||!r.pathname.includes("#"),wf("#","pathname","hash",r)),xt(!r.search||!r.search.includes("#"),wf("#","search","hash",r)));let a=e===""||r.pathname==="",c=a?"/":r.pathname,h;if(c==null)h=n;else{let w=t.length-1;if(!i&&c.startsWith("..")){let E=c.split("/");for(;E[0]==="..";)E.shift(),w-=1;r.pathname=E.join("/")}h=w>=0?t[w]:"/"}let g=mT(r,h),p=c&&c!=="/"&&c.endsWith("/"),y=(a||c===".")&&n.endsWith("/");return!g.pathname.endsWith("/")&&(p||y)&&(g.pathname+="/"),g}var ds=e=>e.join("/").replace(/\/\/+/g,"/"),xT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),yT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,bT=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function wT(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Mv=["POST","PUT","PATCH","DELETE"];new Set(Mv);var vT=["GET",...Mv];new Set(vT);var Io=j.createContext(null);Io.displayName="DataRouter";var $d=j.createContext(null);$d.displayName="DataRouterState";j.createContext(!1);var Iv=j.createContext({isTransitioning:!1});Iv.displayName="ViewTransition";var ET=j.createContext(new Map);ET.displayName="Fetchers";var AT=j.createContext(null);AT.displayName="Await";var Ti=j.createContext(null);Ti.displayName="Navigation";var Tc=j.createContext(null);Tc.displayName="Location";var Ni=j.createContext({outlet:null,matches:[],isDataRoute:!1});Ni.displayName="Route";var Om=j.createContext(null);Om.displayName="RouteError";function ST(e,{relative:t}={}){xt(Do(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=j.useContext(Ti),{hash:r,pathname:a,search:c}=Mc(e,{relative:t}),h=a;return n!=="/"&&(h=a==="/"?n:ds([n,a])),i.createHref({pathname:h,search:c,hash:r})}function Do(){return j.useContext(Tc)!=null}function As(){return xt(Do(),"useLocation() may be used only in the context of a <Router> component."),j.useContext(Tc).location}var Dv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Rv(e){j.useContext(Ti).static||j.useLayoutEffect(e)}function Nc(){let{isDataRoute:e}=j.useContext(Ni);return e?BT():CT()}function CT(){xt(Do(),"useNavigate() may be used only in the context of a <Router> component.");let e=j.useContext(Io),{basename:t,navigator:n}=j.useContext(Ti),{matches:i}=j.useContext(Ni),{pathname:r}=As(),a=JSON.stringify(Dm(i)),c=j.useRef(!1);return Rv(()=>{c.current=!0}),j.useCallback((g,p={})=>{if(Si(c.current,Dv),!c.current)return;if(typeof g=="number"){n.go(g);return}let y=Rm(g,JSON.parse(a),r,p.relative==="path");e==null&&t!=="/"&&(y.pathname=y.pathname==="/"?t:ds([t,y.pathname])),(p.replace?n.replace:n.push)(y,p.state,p)},[t,n,a,r,e])}j.createContext(null);function _c(){let{matches:e}=j.useContext(Ni),t=e[e.length-1];return t?t.params:{}}function Mc(e,{relative:t}={}){let{matches:n}=j.useContext(Ni),{pathname:i}=As(),r=JSON.stringify(Dm(n));return j.useMemo(()=>Rm(e,JSON.parse(r),i,t==="path"),[e,r,i,t])}function TT(e,t){return Ov(e,t)}function Ov(e,t,n,i){var T;xt(Do(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=j.useContext(Ti),{matches:a}=j.useContext(Ni),c=a[a.length-1],h=c?c.params:{},g=c?c.pathname:"/",p=c?c.pathnameBase:"/",y=c&&c.route;{let N=y&&y.path||"";jv(g,!y||N.endsWith("*")||N.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${N}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${N}"> to <Route path="${N==="/"?"*":`${N}/*`}">.`)}let w=As(),E;if(t){let N=typeof t=="string"?Mo(t):t;xt(p==="/"||((T=N.pathname)==null?void 0:T.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${N.pathname}" was given in the \`location\` prop.`),E=N}else E=w;let A=E.pathname||"/",O=A;if(p!=="/"){let N=p.replace(/^\//,"").split("/");O="/"+A.replace(/^\//,"").split("/").slice(N.length).join("/")}let I=Tv(e,{pathname:O});Si(y||I!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Si(I==null||I[I.length-1].route.element!==void 0||I[I.length-1].route.Component!==void 0||I[I.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=DT(I&&I.map(N=>Object.assign({},N,{params:Object.assign({},h,N.params),pathname:ds([p,r.encodeLocation?r.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?p:ds([p,r.encodeLocation?r.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,i);return t&&B?j.createElement(Tc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},B):B}function NT(){let e=LT(),t=wT(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},c=null;return console.error("Error handled by React Router default ErrorBoundary:",e),c=j.createElement(j.Fragment,null,j.createElement("p",null,"💿 Hey developer 👋"),j.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",j.createElement("code",{style:a},"ErrorBoundary")," or"," ",j.createElement("code",{style:a},"errorElement")," prop on your route.")),j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},t),n?j.createElement("pre",{style:r},n):null,c)}var _T=j.createElement(NT,null),MT=class extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?j.createElement(Ni.Provider,{value:this.props.routeContext},j.createElement(Om.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function IT({routeContext:e,match:t,children:n}){let i=j.useContext(Io);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),j.createElement(Ni.Provider,{value:e},n)}function DT(e,t=[],n=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let r=e,a=n==null?void 0:n.errors;if(a!=null){let g=r.findIndex(p=>p.route.id&&(a==null?void 0:a[p.route.id])!==void 0);xt(g>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,g+1))}let c=!1,h=-1;if(n)for(let g=0;g<r.length;g++){let p=r[g];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(h=g),p.route.id){let{loaderData:y,errors:w}=n,E=p.route.loader&&!y.hasOwnProperty(p.route.id)&&(!w||w[p.route.id]===void 0);if(p.route.lazy||E){c=!0,h>=0?r=r.slice(0,h+1):r=[r[0]];break}}}return r.reduceRight((g,p,y)=>{let w,E=!1,A=null,O=null;n&&(w=a&&p.route.id?a[p.route.id]:void 0,A=p.route.errorElement||_T,c&&(h<0&&y===0?(jv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,O=null):h===y&&(E=!0,O=p.route.hydrateFallbackElement||null)));let I=t.concat(r.slice(0,y+1)),B=()=>{let T;return w?T=A:E?T=O:p.route.Component?T=j.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=g,j.createElement(IT,{match:p,routeContext:{outlet:g,matches:I,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||y===0)?j.createElement(MT,{location:n.location,revalidation:n.revalidation,component:A,error:w,children:B(),routeContext:{outlet:null,matches:I,isDataRoute:!0}}):B()},null)}function jm(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function RT(e){let t=j.useContext(Io);return xt(t,jm(e)),t}function OT(e){let t=j.useContext($d);return xt(t,jm(e)),t}function jT(e){let t=j.useContext(Ni);return xt(t,jm(e)),t}function km(e){let t=jT(e),n=t.matches[t.matches.length-1];return xt(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function kT(){return km("useRouteId")}function LT(){var i;let e=j.useContext(Om),t=OT("useRouteError"),n=km("useRouteError");return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function BT(){let{router:e}=RT("useNavigate"),t=km("useNavigate"),n=j.useRef(!1);return Rv(()=>{n.current=!0}),j.useCallback(async(r,a={})=>{Si(n.current,Dv),n.current&&(typeof r=="number"?e.navigate(r):await e.navigate(r,{fromRouteId:t,...a}))},[e,t])}var Cx={};function jv(e,t,n){!t&&!Cx[e]&&(Cx[e]=!0,Si(!1,n))}j.memo(PT);function PT({routes:e,future:t,state:n}){return Ov(e,void 0,n,t)}function vf({to:e,replace:t,state:n,relative:i}){xt(Do(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=j.useContext(Ti);Si(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=j.useContext(Ni),{pathname:c}=As(),h=Nc(),g=Rm(e,Dm(a),c,i==="path"),p=JSON.stringify(g);return j.useEffect(()=>{h(JSON.parse(p),{replace:t,state:n,relative:i})},[h,p,i,t,n]),null}function Ot(e){xt(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UT({basename:e="/",children:t=null,location:n,navigationType:i="POP",navigator:r,static:a=!1}){xt(!Do(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=e.replace(/^\/*/,"/"),h=j.useMemo(()=>({basename:c,navigator:r,static:a,future:{}}),[c,r,a]);typeof n=="string"&&(n=Mo(n));let{pathname:g="/",search:p="",hash:y="",state:w=null,key:E="default"}=n,A=j.useMemo(()=>{let O=ys(g,c);return O==null?null:{location:{pathname:O,search:p,hash:y,state:w,key:E},navigationType:i}},[c,g,p,y,w,E,i]);return Si(A!=null,`<Router basename="${c}"> is not able to match the URL "${g}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:j.createElement(Ti.Provider,{value:h},j.createElement(Tc.Provider,{children:t,value:A}))}function Tx({children:e,location:t}){return TT(Y0(e),t)}function Y0(e,t=[]){let n=[];return j.Children.forEach(e,(i,r)=>{if(!j.isValidElement(i))return;let a=[...t,r];if(i.type===j.Fragment){n.push.apply(n,Y0(i.props.children,a));return}xt(i.type===Ot,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),xt(!i.props.index||!i.props.children,"An index route cannot have child routes.");let c={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(c.children=Y0(i.props.children,a)),n.push(c)}),n}var Bu="get",Pu="application/x-www-form-urlencoded";function Jd(e){return e!=null&&typeof e.tagName=="string"}function FT(e){return Jd(e)&&e.tagName.toLowerCase()==="button"}function VT(e){return Jd(e)&&e.tagName.toLowerCase()==="form"}function zT(e){return Jd(e)&&e.tagName.toLowerCase()==="input"}function HT(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function GT(e,t){return e.button===0&&(!t||t==="_self")&&!HT(e)}var fu=null;function YT(){if(fu===null)try{new FormData(document.createElement("form"),0),fu=!1}catch{fu=!0}return fu}var qT=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ef(e){return e!=null&&!qT.has(e)?(Si(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Pu}"`),null):e}function XT(e,t){let n,i,r,a,c;if(VT(e)){let h=e.getAttribute("action");i=h?ys(h,t):null,n=e.getAttribute("method")||Bu,r=Ef(e.getAttribute("enctype"))||Pu,a=new FormData(e)}else if(FT(e)||zT(e)&&(e.type==="submit"||e.type==="image")){let h=e.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=e.getAttribute("formaction")||h.getAttribute("action");if(i=g?ys(g,t):null,n=e.getAttribute("formmethod")||h.getAttribute("method")||Bu,r=Ef(e.getAttribute("formenctype"))||Ef(h.getAttribute("enctype"))||Pu,a=new FormData(h,e),!YT()){let{name:p,type:y,value:w}=e;if(y==="image"){let E=p?`${p}.`:"";a.append(`${E}x`,"0"),a.append(`${E}y`,"0")}else p&&a.append(p,w)}}else{if(Jd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=Bu,i=null,r=Pu,c=e}return a&&r==="text/plain"&&(c=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Lm(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function WT(e,t,n){let i=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return i.pathname==="/"?i.pathname=`_root.${n}`:t&&ys(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${n}`,i}async function ZT(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function KT(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function QT(e,t,n){let i=await Promise.all(e.map(async r=>{let a=t.routes[r.route.id];if(a){let c=await ZT(a,n);return c.links?c.links():[]}return[]}));return tN(i.flat(1).filter(KT).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function Nx(e,t,n,i,r,a){let c=(g,p)=>n[p]?g.route.id!==n[p].route.id:!0,h=(g,p)=>{var y;return n[p].pathname!==g.pathname||((y=n[p].route.path)==null?void 0:y.endsWith("*"))&&n[p].params["*"]!==g.params["*"]};return a==="assets"?t.filter((g,p)=>c(g,p)||h(g,p)):a==="data"?t.filter((g,p)=>{var w;let y=i.routes[g.route.id];if(!y||!y.hasLoader)return!1;if(c(g,p)||h(g,p))return!0;if(g.route.shouldRevalidate){let E=g.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((w=n[0])==null?void 0:w.params)||{},nextUrl:new URL(e,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function $T(e,t,{includeHydrateFallback:n}={}){return JT(e.map(i=>{let r=t.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function JT(e){return[...new Set(e)]}function eN(e){let t={},n=Object.keys(e).sort();for(let i of n)t[i]=e[i];return t}function tN(e,t){let n=new Set;return new Set(t),e.reduce((i,r)=>{let a=JSON.stringify(eN(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function kv(){let e=j.useContext(Io);return Lm(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function nN(){let e=j.useContext($d);return Lm(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Bm=j.createContext(void 0);Bm.displayName="FrameworkContext";function Lv(){let e=j.useContext(Bm);return Lm(e,"You must render this element inside a <HydratedRouter> element"),e}function iN(e,t){let n=j.useContext(Bm),[i,r]=j.useState(!1),[a,c]=j.useState(!1),{onFocus:h,onBlur:g,onMouseEnter:p,onMouseLeave:y,onTouchStart:w}=t,E=j.useRef(null);j.useEffect(()=>{if(e==="render"&&c(!0),e==="viewport"){let I=T=>{T.forEach(N=>{c(N.isIntersecting)})},B=new IntersectionObserver(I,{threshold:.5});return E.current&&B.observe(E.current),()=>{B.disconnect()}}},[e]),j.useEffect(()=>{if(i){let I=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(I)}}},[i]);let A=()=>{r(!0)},O=()=>{r(!1),c(!1)};return n?e!=="intent"?[a,E,{}]:[a,E,{onFocus:il(h,A),onBlur:il(g,O),onMouseEnter:il(p,A),onMouseLeave:il(y,O),onTouchStart:il(w,A)}]:[!1,E,{}]}function il(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function sN({page:e,...t}){let{router:n}=kv(),i=j.useMemo(()=>Tv(n.routes,e,n.basename),[n.routes,e,n.basename]);return i?j.createElement(aN,{page:e,matches:i,...t}):null}function rN(e){let{manifest:t,routeModules:n}=Lv(),[i,r]=j.useState([]);return j.useEffect(()=>{let a=!1;return QT(e,t,n).then(c=>{a||r(c)}),()=>{a=!0}},[e,t,n]),i}function aN({page:e,matches:t,...n}){let i=As(),{manifest:r,routeModules:a}=Lv(),{basename:c}=kv(),{loaderData:h,matches:g}=nN(),p=j.useMemo(()=>Nx(e,t,g,r,i,"data"),[e,t,g,r,i]),y=j.useMemo(()=>Nx(e,t,g,r,i,"assets"),[e,t,g,r,i]),w=j.useMemo(()=>{if(e===i.pathname+i.search+i.hash)return[];let O=new Set,I=!1;if(t.forEach(T=>{var C;let N=r.routes[T.route.id];!N||!N.hasLoader||(!p.some(k=>k.route.id===T.route.id)&&T.route.id in h&&((C=a[T.route.id])!=null&&C.shouldRevalidate)||N.hasClientLoader?I=!0:O.add(T.route.id))}),O.size===0)return[];let B=WT(e,c,"data");return I&&O.size>0&&B.searchParams.set("_routes",t.filter(T=>O.has(T.route.id)).map(T=>T.route.id).join(",")),[B.pathname+B.search]},[c,h,i,r,p,t,e,a]),E=j.useMemo(()=>$T(y,r),[y,r]),A=rN(y);return j.createElement(j.Fragment,null,w.map(O=>j.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...n})),E.map(O=>j.createElement("link",{key:O,rel:"modulepreload",href:O,...n})),A.map(({key:O,link:I})=>j.createElement("link",{key:O,...I})))}function oN(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Bv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Bv&&(window.__reactRouterVersion="7.7.0")}catch{}function lN({basename:e,children:t,window:n}){let i=j.useRef();i.current==null&&(i.current=Q4({window:n,v5Compat:!0}));let r=i.current,[a,c]=j.useState({action:r.action,location:r.location}),h=j.useCallback(g=>{j.startTransition(()=>c(g))},[c]);return j.useLayoutEffect(()=>r.listen(h),[r,h]),j.createElement(UT,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:r})}var Pv=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Dn=j.forwardRef(function({onClick:t,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:c,state:h,target:g,to:p,preventScrollReset:y,viewTransition:w,...E},A){let{basename:O}=j.useContext(Ti),I=typeof p=="string"&&Pv.test(p),B,T=!1;if(typeof p=="string"&&I&&(B=p,Bv))try{let U=new URL(window.location.href),Y=p.startsWith("//")?new URL(U.protocol+p):new URL(p),J=ys(Y.pathname,O);Y.origin===U.origin&&J!=null?p=J+Y.search+Y.hash:T=!0}catch{Si(!1,`<Link to="${p}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let N=ST(p,{relative:r}),[C,k,z]=iN(i,E),D=hN(p,{replace:c,state:h,target:g,preventScrollReset:y,relative:r,viewTransition:w});function L(U){t&&t(U),U.defaultPrevented||D(U)}let F=j.createElement("a",{...E,...z,href:B||N,onClick:T||a?t:L,ref:oN(A,k),target:g,"data-discover":!I&&n==="render"?"true":void 0});return C&&!I?j.createElement(j.Fragment,null,F,j.createElement(sN,{page:N})):F});Dn.displayName="Link";var cN=j.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:c,viewTransition:h,children:g,...p},y){let w=Mc(c,{relative:p.relative}),E=As(),A=j.useContext($d),{navigator:O,basename:I}=j.useContext(Ti),B=A!=null&&xN(w)&&h===!0,T=O.encodeLocation?O.encodeLocation(w).pathname:w.pathname,N=E.pathname,C=A&&A.navigation&&A.navigation.location?A.navigation.location.pathname:null;n||(N=N.toLowerCase(),C=C?C.toLowerCase():null,T=T.toLowerCase()),C&&I&&(C=ys(C,I)||C);const k=T!=="/"&&T.endsWith("/")?T.length-1:T.length;let z=N===T||!r&&N.startsWith(T)&&N.charAt(k)==="/",D=C!=null&&(C===T||!r&&C.startsWith(T)&&C.charAt(T.length)==="/"),L={isActive:z,isPending:D,isTransitioning:B},F=z?t:void 0,U;typeof i=="function"?U=i(L):U=[i,z?"active":null,D?"pending":null,B?"transitioning":null].filter(Boolean).join(" ");let Y=typeof a=="function"?a(L):a;return j.createElement(Dn,{...p,"aria-current":F,className:U,ref:y,style:Y,to:c,viewTransition:h},typeof g=="function"?g(L):g)});cN.displayName="NavLink";var uN=j.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:i,replace:r,state:a,method:c=Bu,action:h,onSubmit:g,relative:p,preventScrollReset:y,viewTransition:w,...E},A)=>{let O=gN(),I=pN(h,{relative:p}),B=c.toLowerCase()==="get"?"get":"post",T=typeof h=="string"&&Pv.test(h),N=C=>{if(g&&g(C),C.defaultPrevented)return;C.preventDefault();let k=C.nativeEvent.submitter,z=(k==null?void 0:k.getAttribute("formmethod"))||c;O(k||C.currentTarget,{fetcherKey:t,method:z,navigate:n,replace:r,state:a,relative:p,preventScrollReset:y,viewTransition:w})};return j.createElement("form",{ref:A,method:B,action:I,onSubmit:i?g:N,...E,"data-discover":!T&&e==="render"?"true":void 0})});uN.displayName="Form";function dN(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Uv(e){let t=j.useContext(Io);return xt(t,dN(e)),t}function hN(e,{target:t,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:c}={}){let h=Nc(),g=As(),p=Mc(e,{relative:a});return j.useCallback(y=>{if(GT(y,t)){y.preventDefault();let w=n!==void 0?n:Ql(g)===Ql(p);h(e,{replace:w,state:i,preventScrollReset:r,relative:a,viewTransition:c})}},[g,h,p,n,i,t,e,r,a,c])}var fN=0,mN=()=>`__${String(++fN)}__`;function gN(){let{router:e}=Uv("useSubmit"),{basename:t}=j.useContext(Ti),n=kT();return j.useCallback(async(i,r={})=>{let{action:a,method:c,encType:h,formData:g,body:p}=XT(i,t);if(r.navigate===!1){let y=r.fetcherKey||mN();await e.fetch(y,n,r.action||a,{preventScrollReset:r.preventScrollReset,formData:g,body:p,formMethod:r.method||c,formEncType:r.encType||h,flushSync:r.flushSync})}else await e.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:g,body:p,formMethod:r.method||c,formEncType:r.encType||h,replace:r.replace,state:r.state,fromRouteId:n,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,n])}function pN(e,{relative:t}={}){let{basename:n}=j.useContext(Ti),i=j.useContext(Ni);xt(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Mc(e||".",{relative:t})},c=As();if(e==null){a.search=c.search;let h=new URLSearchParams(a.search),g=h.getAll("index");if(g.some(y=>y==="")){h.delete("index"),g.filter(w=>w).forEach(w=>h.append("index",w));let y=h.toString();a.search=y?`?${y}`:""}}return(!e||e===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:ds([n,a.pathname])),Ql(a)}function xN(e,t={}){let n=j.useContext(Iv);xt(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Uv("useViewTransitionState"),r=Mc(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=ys(n.currentLocation.pathname,i)||n.currentLocation.pathname,c=ys(n.nextLocation.pathname,i)||n.nextLocation.pathname;return wd(r.pathname,c)!=null||wd(r.pathname,a)!=null}let yN={data:""},bN=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||yN,wN=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,vN=/\/\*[^]*?\*\/|  +/g,_x=/\n+/g,Ys=(e,t)=>{let n="",i="",r="";for(let a in e){let c=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+c+";":i+=a[1]=="f"?Ys(c,a):a+"{"+Ys(c,a[1]=="k"?"":t)+"}":typeof c=="object"?i+=Ys(c,t?t.replace(/([^,])+/g,h=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,g=>/&/.test(g)?g.replace(/&/g,h):h?h+" "+g:g)):a):c!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Ys.p?Ys.p(a,c):a+":"+c+";")}return n+(t&&r?t+"{"+r+"}":r)+i},Ji={},Fv=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Fv(e[n]);return t}return e},EN=(e,t,n,i,r)=>{let a=Fv(e),c=Ji[a]||(Ji[a]=(g=>{let p=0,y=11;for(;p<g.length;)y=101*y+g.charCodeAt(p++)>>>0;return"go"+y})(a));if(!Ji[c]){let g=a!==e?e:(p=>{let y,w,E=[{}];for(;y=wN.exec(p.replace(vN,""));)y[4]?E.shift():y[3]?(w=y[3].replace(_x," ").trim(),E.unshift(E[0][w]=E[0][w]||{})):E[0][y[1]]=y[2].replace(_x," ").trim();return E[0]})(e);Ji[c]=Ys(r?{["@keyframes "+c]:g}:g,n?"":"."+c)}let h=n&&Ji.g?Ji.g:null;return n&&(Ji.g=Ji[c]),((g,p,y,w)=>{w?p.data=p.data.replace(w,g):p.data.indexOf(g)===-1&&(p.data=y?g+p.data:p.data+g)})(Ji[c],t,i,h),c},AN=(e,t,n)=>e.reduce((i,r,a)=>{let c=t[a];if(c&&c.call){let h=c(n),g=h&&h.props&&h.props.className||/^go/.test(h)&&h;c=g?"."+g:h&&typeof h=="object"?h.props?"":Ys(h,""):h===!1?"":h}return i+r+(c??"")},"");function eh(e){let t=this||{},n=e.call?e(t.p):e;return EN(n.unshift?n.raw?AN(n,[].slice.call(arguments,1),t.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(t.p):r),{}):n,bN(t.target),t.g,t.o,t.k)}let Vv,q0,X0;eh.bind({g:1});let bs=eh.bind({k:1});function SN(e,t,n,i){Ys.p=t,Vv=e,q0=n,X0=i}function yr(e,t){let n=this||{};return function(){let i=arguments;function r(a,c){let h=Object.assign({},a),g=h.className||r.className;n.p=Object.assign({theme:q0&&q0()},h),n.o=/ *go\d+/.test(g),h.className=eh.apply(n,i)+(g?" "+g:"");let p=e;return e[0]&&(p=h.as||e,delete h.as),X0&&p[0]&&X0(h),Vv(p,h)}return r}}var CN=e=>typeof e=="function",vd=(e,t)=>CN(e)?e(t):e,TN=(()=>{let e=0;return()=>(++e).toString()})(),zv=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),NN=20,Hv=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,NN)};case 1:return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:n}=t;return Hv(e,{type:e.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:i}=t;return{...e,toasts:e.toasts.map(a=>a.id===i||i===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+r}))}}},Uu=[],Pr={toasts:[],pausedAt:void 0},ra=e=>{Pr=Hv(Pr,e),Uu.forEach(t=>{t(Pr)})},_N={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},MN=(e={})=>{let[t,n]=j.useState(Pr),i=j.useRef(Pr);j.useEffect(()=>(i.current!==Pr&&n(Pr),Uu.push(n),()=>{let a=Uu.indexOf(n);a>-1&&Uu.splice(a,1)}),[]);let r=t.toasts.map(a=>{var c,h,g;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||((c=e[a.type])==null?void 0:c.removeDelay)||(e==null?void 0:e.removeDelay),duration:a.duration||((h=e[a.type])==null?void 0:h.duration)||(e==null?void 0:e.duration)||_N[a.type],style:{...e.style,...(g=e[a.type])==null?void 0:g.style,...a.style}}});return{...t,toasts:r}},IN=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||TN()}),Ic=e=>(t,n)=>{let i=IN(t,e,n);return ra({type:2,toast:i}),i.id},xn=(e,t)=>Ic("blank")(e,t);xn.error=Ic("error");xn.success=Ic("success");xn.loading=Ic("loading");xn.custom=Ic("custom");xn.dismiss=e=>{ra({type:3,toastId:e})};xn.remove=e=>ra({type:4,toastId:e});xn.promise=(e,t,n)=>{let i=xn.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let a=t.success?vd(t.success,r):void 0;return a?xn.success(a,{id:i,...n,...n==null?void 0:n.success}):xn.dismiss(i),r}).catch(r=>{let a=t.error?vd(t.error,r):void 0;a?xn.error(a,{id:i,...n,...n==null?void 0:n.error}):xn.dismiss(i)}),e};var DN=(e,t)=>{ra({type:1,toast:{id:e,height:t}})},RN=()=>{ra({type:5,time:Date.now()})},_l=new Map,ON=1e3,jN=(e,t=ON)=>{if(_l.has(e))return;let n=setTimeout(()=>{_l.delete(e),ra({type:4,toastId:e})},t);_l.set(e,n)},kN=e=>{let{toasts:t,pausedAt:n}=MN(e);j.useEffect(()=>{if(n)return;let a=Date.now(),c=t.map(h=>{if(h.duration===1/0)return;let g=(h.duration||0)+h.pauseDuration-(a-h.createdAt);if(g<0){h.visible&&xn.dismiss(h.id);return}return setTimeout(()=>xn.dismiss(h.id),g)});return()=>{c.forEach(h=>h&&clearTimeout(h))}},[t,n]);let i=j.useCallback(()=>{n&&ra({type:6,time:Date.now()})},[n]),r=j.useCallback((a,c)=>{let{reverseOrder:h=!1,gutter:g=8,defaultPosition:p}=c||{},y=t.filter(A=>(A.position||p)===(a.position||p)&&A.height),w=y.findIndex(A=>A.id===a.id),E=y.filter((A,O)=>O<w&&A.visible).length;return y.filter(A=>A.visible).slice(...h?[E+1]:[0,E]).reduce((A,O)=>A+(O.height||0)+g,0)},[t]);return j.useEffect(()=>{t.forEach(a=>{if(a.dismissed)jN(a.id,a.removeDelay);else{let c=_l.get(a.id);c&&(clearTimeout(c),_l.delete(a.id))}})},[t]),{toasts:t,handlers:{updateHeight:DN,startPause:RN,endPause:i,calculateOffset:r}}},LN=bs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,BN=bs`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,PN=bs`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,UN=yr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${LN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${BN} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${PN} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,FN=bs`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,VN=yr("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${FN} 1s linear infinite;
`,zN=bs`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,HN=bs`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,GN=yr("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zN} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${HN} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,YN=yr("div")`
  position: absolute;
`,qN=yr("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,XN=bs`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,WN=yr("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${XN} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ZN=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?j.createElement(WN,null,t):t:n==="blank"?null:j.createElement(qN,null,j.createElement(VN,{...i}),n!=="loading"&&j.createElement(YN,null,n==="error"?j.createElement(UN,{...i}):j.createElement(GN,{...i})))},KN=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,QN=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,$N="0%{opacity:0;} 100%{opacity:1;}",JN="0%{opacity:1;} 100%{opacity:0;}",e_=yr("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,t_=yr("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,n_=(e,t)=>{let n=e.includes("top")?1:-1,[i,r]=zv()?[$N,JN]:[KN(n),QN(n)];return{animation:t?`${bs(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${bs(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},i_=j.memo(({toast:e,position:t,style:n,children:i})=>{let r=e.height?n_(e.position||t||"top-center",e.visible):{opacity:0},a=j.createElement(ZN,{toast:e}),c=j.createElement(t_,{...e.ariaProps},vd(e.message,e));return j.createElement(e_,{className:e.className,style:{...r,...n,...e.style}},typeof i=="function"?i({icon:a,message:c}):j.createElement(j.Fragment,null,a,c))});SN(j.createElement);var s_=({id:e,className:t,style:n,onHeightUpdate:i,children:r})=>{let a=j.useCallback(c=>{if(c){let h=()=>{let g=c.getBoundingClientRect().height;i(e,g)};h(),new MutationObserver(h).observe(c,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return j.createElement("div",{ref:a,className:t,style:n},r)},r_=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:zv()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...r}},a_=eh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,mu=16,o_=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:r,containerStyle:a,containerClassName:c})=>{let{toasts:h,handlers:g}=kN(n);return j.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:mu,left:mu,right:mu,bottom:mu,pointerEvents:"none",...a},className:c,onMouseEnter:g.startPause,onMouseLeave:g.endPause},h.map(p=>{let y=p.position||t,w=g.calculateOffset(p,{reverseOrder:e,gutter:i,defaultPosition:t}),E=r_(y,w);return j.createElement(s_,{id:p.id,key:p.id,onHeightUpdate:g.updateHeight,className:p.visible?a_:"",style:E},p.type==="custom"?vd(p.message,p):r?r(p):j.createElement(i_,{toast:p,position:y}))}))},oe=xn;const l_="modulepreload",c_=function(e){return"/"+e},Mx={},Dc=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),h=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));r=Promise.allSettled(n.map(g=>{if(g=c_(g),g in Mx)return;Mx[g]=!0;const p=g.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${y}`))return;const w=document.createElement("link");if(w.rel=p?"stylesheet":l_,p||(w.as="script"),w.crossOrigin="",w.href=g,h&&w.setAttribute("nonce",h),document.head.appendChild(w),p)return new Promise((E,A)=>{w.addEventListener("load",E),w.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(c){const h=new Event("vite:preloadError",{cancelable:!0});if(h.payload=c,window.dispatchEvent(h),!h.defaultPrevented)throw c}return r.then(c=>{for(const h of c||[])h.status==="rejected"&&a(h.reason);return t().catch(a)})},u_=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Dc(async()=>{const{default:i}=await Promise.resolve().then(()=>Ro);return{default:i}},[]).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)};class Pm extends Error{constructor(t,n="FunctionsError",i){super(t),this.name=n,this.context=i}}class d_ extends Pm{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Ix extends Pm{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Dx extends Pm{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var W0;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(W0||(W0={}));var h_=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};class f_{constructor(t,{headers:n={},customFetch:i,region:r=W0.Any}={}){this.url=t,this.headers=n,this.region=r,this.fetch=u_(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var i;return h_(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:c}=n;let h={},{region:g}=n;g||(g=this.region);const p=new URL(`${this.url}/${t}`);g&&g!=="any"&&(h["x-region"]=g,p.searchParams.set("forceFunctionRegion",g));let y;c&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&c instanceof Blob||c instanceof ArrayBuffer?(h["Content-Type"]="application/octet-stream",y=c):typeof c=="string"?(h["Content-Type"]="text/plain",y=c):typeof FormData<"u"&&c instanceof FormData?y=c:(h["Content-Type"]="application/json",y=JSON.stringify(c)));const w=yield this.fetch(p.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},h),this.headers),r),body:y}).catch(I=>{throw new d_(I)}),E=w.headers.get("x-relay-error");if(E&&E==="true")throw new Ix(w);if(!w.ok)throw new Dx(w);let A=((i=w.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),O;return A==="application/json"?O=yield w.json():A==="application/octet-stream"?O=yield w.blob():A==="text/event-stream"?O=w:A==="multipart/form-data"?O=yield w.formData():O=yield w.text(),{data:O,error:null,response:w}}catch(r){return{data:null,error:r,response:r instanceof Dx||r instanceof Ix?r.context:void 0}}})}}var On={},Um={},th={},Rc={},nh={},ih={},m_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},go=m_();const g_=go.fetch,Gv=go.fetch.bind(go),Yv=go.Headers,p_=go.Request,x_=go.Response,Ro=Object.freeze(Object.defineProperty({__proto__:null,Headers:Yv,Request:p_,Response:x_,default:Gv,fetch:g_},Symbol.toStringTag,{value:"Module"})),y_=$A(Ro);var sh={};Object.defineProperty(sh,"__esModule",{value:!0});let b_=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};sh.default=b_;var qv=sn&&sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ih,"__esModule",{value:!0});const w_=qv(y_),v_=qv(sh);let E_=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=w_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const i=this.fetch;let r=i(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var c,h,g;let p=null,y=null,w=null,E=a.status,A=a.statusText;if(a.ok){if(this.method!=="HEAD"){const T=await a.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?y=T:y=JSON.parse(T))}const I=(c=this.headers.Prefer)===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),B=(h=a.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");I&&B&&B.length>1&&(w=parseInt(B[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(p={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,w=null,E=406,A="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const I=await a.text();try{p=JSON.parse(I),Array.isArray(p)&&a.status===404&&(y=[],p=null,E=200,A="OK")}catch{a.status===404&&I===""?(E=204,A="No Content"):p={message:I}}if(p&&this.isMaybeSingle&&(!((g=p==null?void 0:p.details)===null||g===void 0)&&g.includes("0 rows"))&&(p=null,E=200,A="OK"),p&&this.shouldThrowOnError)throw new v_.default(p)}return{error:p,data:y,count:w,status:E,statusText:A}});return this.shouldThrowOnError||(r=r.catch(a=>{var c,h,g;return{error:{message:`${(c=a==null?void 0:a.name)!==null&&c!==void 0?c:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(h=a==null?void 0:a.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(g=a==null?void 0:a.code)!==null&&g!==void 0?g:""}`},data:null,count:null,status:0,statusText:""}})),r.then(t,n)}returns(){return this}overrideTypes(){return this}};ih.default=E_;var A_=sn&&sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nh,"__esModule",{value:!0});const S_=A_(ih);let C_=class extends S_.default{select(t){let n=!1;const i=(t??"*").split("").map(r=>/\s/.test(r)&&!n?"":(r==='"'&&(n=!n),r)).join("");return this.url.searchParams.set("select",i),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:i,foreignTable:r,referencedTable:a=r}={}){const c=a?`${a}.order`:"order",h=this.url.searchParams.get(c);return this.url.searchParams.set(c,`${h?`${h},`:""}${t}.${n?"asc":"desc"}${i===void 0?"":i?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:i=n}={}){const r=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(r,`${t}`),this}range(t,n,{foreignTable:i,referencedTable:r=i}={}){const a=typeof r>"u"?"offset":`${r}.offset`,c=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(c,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:i=!1,buffers:r=!1,wal:a=!1,format:c="text"}={}){var h;const g=[t?"analyze":null,n?"verbose":null,i?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),p=(h=this.headers.Accept)!==null&&h!==void 0?h:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${c}; for="${p}"; options=${g};`,c==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};nh.default=C_;var T_=sn&&sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Rc,"__esModule",{value:!0});const N_=T_(nh);let __=class extends N_.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const i=Array.from(new Set(n)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(t,`in.(${i})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:i,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const c=i===void 0?"":`(${i})`;return this.url.searchParams.append(t,`${a}fts${c}.${n}`),this}match(t){return Object.entries(t).forEach(([n,i])=>{this.url.searchParams.append(n,`eq.${i}`)}),this}not(t,n,i){return this.url.searchParams.append(t,`not.${n}.${i}`),this}or(t,{foreignTable:n,referencedTable:i=n}={}){const r=i?`${i}.or`:"or";return this.url.searchParams.append(r,`(${t})`),this}filter(t,n,i){return this.url.searchParams.append(t,`${n}.${i}`),this}};Rc.default=__;var M_=sn&&sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(th,"__esModule",{value:!0});const sl=M_(Rc);let I_=class{constructor(t,{headers:n={},schema:i,fetch:r}){this.url=t,this.headers=n,this.schema=i,this.fetch=r}select(t,{head:n=!1,count:i}={}){const r=n?"HEAD":"GET";let a=!1;const c=(t??"*").split("").map(h=>/\s/.test(h)&&!a?"":(h==='"'&&(a=!a),h)).join("");return this.url.searchParams.set("select",c),i&&(this.headers.Prefer=`count=${i}`),new sl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:i=!0}={}){const r="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),i||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const c=t.reduce((h,g)=>h.concat(Object.keys(g)),[]);if(c.length>0){const h=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",h.join(","))}}return new sl.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:i=!1,count:r,defaultToNull:a=!0}={}){const c="POST",h=[`resolution=${i?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&h.push(this.headers.Prefer),r&&h.push(`count=${r}`),a||h.push("missing=default"),this.headers.Prefer=h.join(","),Array.isArray(t)){const g=t.reduce((p,y)=>p.concat(Object.keys(y)),[]);if(g.length>0){const p=[...new Set(g)].map(y=>`"${y}"`);this.url.searchParams.set("columns",p.join(","))}}return new sl.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const i="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),n&&r.push(`count=${n}`),this.headers.Prefer=r.join(","),new sl.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",i=[];return t&&i.push(`count=${t}`),this.headers.Prefer&&i.unshift(this.headers.Prefer),this.headers.Prefer=i.join(","),new sl.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};th.default=I_;var rh={},ah={};Object.defineProperty(ah,"__esModule",{value:!0});ah.version=void 0;ah.version="0.0.0-automated";Object.defineProperty(rh,"__esModule",{value:!0});rh.DEFAULT_HEADERS=void 0;const D_=ah;rh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${D_.version}`};var Xv=sn&&sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Um,"__esModule",{value:!0});const R_=Xv(th),O_=Xv(Rc),j_=rh;let k_=class Wv{constructor(t,{headers:n={},schema:i,fetch:r}={}){this.url=t,this.headers=Object.assign(Object.assign({},j_.DEFAULT_HEADERS),n),this.schemaName=i,this.fetch=r}from(t){const n=new URL(`${this.url}/${t}`);return new R_.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new Wv(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:i=!1,get:r=!1,count:a}={}){let c;const h=new URL(`${this.url}/rpc/${t}`);let g;i||r?(c=i?"HEAD":"GET",Object.entries(n).filter(([y,w])=>w!==void 0).map(([y,w])=>[y,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([y,w])=>{h.searchParams.append(y,w)})):(c="POST",g=n);const p=Object.assign({},this.headers);return a&&(p.Prefer=`count=${a}`),new O_.default({method:c,url:h,headers:p,schema:this.schemaName,body:g,fetch:this.fetch,allowEmpty:!1})}};Um.default=k_;var Oo=sn&&sn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(On,"__esModule",{value:!0});On.PostgrestError=On.PostgrestBuilder=On.PostgrestTransformBuilder=On.PostgrestFilterBuilder=On.PostgrestQueryBuilder=On.PostgrestClient=void 0;const Zv=Oo(Um);On.PostgrestClient=Zv.default;const Kv=Oo(th);On.PostgrestQueryBuilder=Kv.default;const Qv=Oo(Rc);On.PostgrestFilterBuilder=Qv.default;const $v=Oo(nh);On.PostgrestTransformBuilder=$v.default;const Jv=Oo(ih);On.PostgrestBuilder=Jv.default;const eE=Oo(sh);On.PostgrestError=eE.default;var L_=On.default={PostgrestClient:Zv.default,PostgrestQueryBuilder:Kv.default,PostgrestFilterBuilder:Qv.default,PostgrestTransformBuilder:$v.default,PostgrestBuilder:Jv.default,PostgrestError:eE.default};const{PostgrestClient:B_,PostgrestQueryBuilder:Zj,PostgrestFilterBuilder:Kj,PostgrestTransformBuilder:Qj,PostgrestBuilder:$j,PostgrestError:Jj}=L_;function P_(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const U_=P_(),F_="2.11.15",V_=`realtime-js/${F_}`,z_="1.0.0",tE=1e4,H_=1e3;var Ml;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ml||(Ml={}));var cn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(cn||(cn={}));var vi;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(vi||(vi={}));var Z0;(function(e){e.websocket="websocket"})(Z0||(Z0={}));var Br;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Br||(Br={}));class G_{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),i=new TextDecoder;return this._decodeBroadcast(t,n,i)}_decodeBroadcast(t,n,i){const r=n.getUint8(1),a=n.getUint8(2);let c=this.HEADER_LENGTH+2;const h=i.decode(t.slice(c,c+r));c=c+r;const g=i.decode(t.slice(c,c+a));c=c+a;const p=JSON.parse(i.decode(t.slice(c,t.byteLength)));return{ref:null,topic:h,event:g,payload:p}}}class nE{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ot;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(ot||(ot={}));const Rx=(e,t,n={})=>{var i;const r=(i=n.skipTypes)!==null&&i!==void 0?i:[];return Object.keys(t).reduce((a,c)=>(a[c]=Y_(c,e,t,r),a),{})},Y_=(e,t,n,i)=>{const r=t.find(h=>h.name===e),a=r==null?void 0:r.type,c=n[e];return a&&!i.includes(a)?iE(a,c):K0(c)},iE=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return Z_(t,n)}switch(e){case ot.bool:return q_(t);case ot.float4:case ot.float8:case ot.int2:case ot.int4:case ot.int8:case ot.numeric:case ot.oid:return X_(t);case ot.json:case ot.jsonb:return W_(t);case ot.timestamp:return K_(t);case ot.abstime:case ot.date:case ot.daterange:case ot.int4range:case ot.int8range:case ot.money:case ot.reltime:case ot.text:case ot.time:case ot.timestamptz:case ot.timetz:case ot.tsrange:case ot.tstzrange:return K0(t);default:return K0(t)}},K0=e=>e,q_=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},X_=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},W_=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Z_=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,i=e[n];if(e[0]==="{"&&i==="}"){let a;const c=e.slice(1,n);try{a=JSON.parse("["+c+"]")}catch{a=c?c.split(","):[]}return a.map(h=>iE(t,h))}return e},K_=e=>typeof e=="string"?e.replace(" ","T"):e,sE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Af{constructor(t,n,i={},r=tE){this.channel=t,this.event=n,this.payload=i,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var i;return this._hasReceived(t)&&n((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Ox;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Ox||(Ox={}));class Il{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},r=>{const{onJoin:a,onLeave:c,onSync:h}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Il.syncState(this.state,r,a,c),this.pendingDiffs.forEach(g=>{this.state=Il.syncDiff(this.state,g,a,c)}),this.pendingDiffs=[],h()}),this.channel._on(i.diff,{},r=>{const{onJoin:a,onLeave:c,onSync:h}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=Il.syncDiff(this.state,r,a,c),h())}),this.onJoin((r,a,c)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:c})}),this.onLeave((r,a,c)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:c})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,i,r){const a=this.cloneDeep(t),c=this.transformState(n),h={},g={};return this.map(a,(p,y)=>{c[p]||(g[p]=y)}),this.map(c,(p,y)=>{const w=a[p];if(w){const E=y.map(B=>B.presence_ref),A=w.map(B=>B.presence_ref),O=y.filter(B=>A.indexOf(B.presence_ref)<0),I=w.filter(B=>E.indexOf(B.presence_ref)<0);O.length>0&&(h[p]=O),I.length>0&&(g[p]=I)}else h[p]=y}),this.syncDiff(a,{joins:h,leaves:g},i,r)}static syncDiff(t,n,i,r){const{joins:a,leaves:c}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return i||(i=()=>{}),r||(r=()=>{}),this.map(a,(h,g)=>{var p;const y=(p=t[h])!==null&&p!==void 0?p:[];if(t[h]=this.cloneDeep(g),y.length>0){const w=t[h].map(A=>A.presence_ref),E=y.filter(A=>w.indexOf(A.presence_ref)<0);t[h].unshift(...E)}i(h,y,g)}),this.map(c,(h,g)=>{let p=t[h];if(!p)return;const y=g.map(w=>w.presence_ref);p=p.filter(w=>y.indexOf(w.presence_ref)<0),t[h]=p,r(h,p,g),p.length===0&&delete t[h]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(i=>n(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,i)=>{const r=t[i];return"metas"in r?n[i]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[i]=r,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var jx;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(jx||(jx={}));var kx;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(kx||(kx={}));var ts;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(ts||(ts={}));class Fm{constructor(t,n={config:{}},i){this.topic=t,this.params=n,this.socket=i,this.bindings={},this.state=cn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Af(this,vi.join,this.params,this.timeout),this.rejoinTimer=new nE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=cn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=cn.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=cn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(vi.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new Il(this),this.broadcastEndpointURL=sE(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var i,r;if(this.socket.isConnected()||this.socket.connect(),this.state==cn.closed){const{config:{broadcast:a,presence:c,private:h}}=this.params;this._onError(y=>t==null?void 0:t(ts.CHANNEL_ERROR,y)),this._onClose(()=>t==null?void 0:t(ts.CLOSED));const g={},p={broadcast:a,presence:c,postgres_changes:(r=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(y=>y.filter))!==null&&r!==void 0?r:[],private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:p},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:y})=>{var w;if(this.socket.setAuth(),y===void 0){t==null||t(ts.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,A=(w=E==null?void 0:E.length)!==null&&w!==void 0?w:0,O=[];for(let I=0;I<A;I++){const B=E[I],{filter:{event:T,schema:N,table:C,filter:k}}=B,z=y&&y[I];if(z&&z.event===T&&z.schema===N&&z.table===C&&z.filter===k)O.push(Object.assign(Object.assign({},B),{id:z.id}));else{this.unsubscribe(),this.state=cn.errored,t==null||t(ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=O,t&&t(ts.SUBSCRIBED);return}}).receive("error",y=>{this.state=cn.errored,t==null||t(ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(y).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,i){return this._on(t,n,i)}async send(t,n={}){var i,r;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:c}=t,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:c,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);return await((r=p.body)===null||r===void 0?void 0:r.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var c,h,g;const p=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((g=(h=(c=this.params)===null||c===void 0?void 0:c.config)===null||h===void 0?void 0:h.broadcast)===null||g===void 0)&&g.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=cn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(vi.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(r=>{i=new Af(this,vi.leave,{},t),i.receive("ok",()=>{n(),r("ok")}).receive("timeout",()=>{n(),r("timed out")}).receive("error",()=>{r("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,i){const r=new AbortController,a=setTimeout(()=>r.abort(),i),c=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:r.signal}));return clearTimeout(a),c}_push(t,n,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new Af(this,t,n,i);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(t,n,i){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,i){var r,a;const c=t.toLocaleLowerCase(),{close:h,error:g,leave:p,join:y}=vi;if(i&&[h,g,p,y].indexOf(c)>=0&&i!==this._joinRef())return;let E=this._onMessage(c,n,i);if(n&&!E)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(c)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(A=>{var O,I,B;return((O=A.filter)===null||O===void 0?void 0:O.event)==="*"||((B=(I=A.filter)===null||I===void 0?void 0:I.event)===null||B===void 0?void 0:B.toLocaleLowerCase())===c}).map(A=>A.callback(E,i)):(a=this.bindings[c])===null||a===void 0||a.filter(A=>{var O,I,B,T,N,C;if(["broadcast","presence","postgres_changes"].includes(c))if("id"in A){const k=A.id,z=(O=A.filter)===null||O===void 0?void 0:O.event;return k&&((I=n.ids)===null||I===void 0?void 0:I.includes(k))&&(z==="*"||(z==null?void 0:z.toLocaleLowerCase())===((B=n.data)===null||B===void 0?void 0:B.type.toLocaleLowerCase()))}else{const k=(N=(T=A==null?void 0:A.filter)===null||T===void 0?void 0:T.event)===null||N===void 0?void 0:N.toLocaleLowerCase();return k==="*"||k===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===c}).map(A=>{if(typeof E=="object"&&"ids"in E){const O=E.data,{schema:I,table:B,commit_timestamp:T,type:N,errors:C}=O;E=Object.assign(Object.assign({},{schema:I,table:B,commit_timestamp:T,eventType:N,new:{},old:{},errors:C}),this._getPayloadRecords(O))}A.callback(E,i)})}_isClosed(){return this.state===cn.closed}_isJoined(){return this.state===cn.joined}_isJoining(){return this.state===cn.joining}_isLeaving(){return this.state===cn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,i){const r=t.toLocaleLowerCase(),a={type:r,filter:n,callback:i};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(t,n){const i=t.toLocaleLowerCase();return this.bindings[i]=this.bindings[i].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===i&&Fm.isEqual(r.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const i in t)if(t[i]!==n[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(vi.close,{},t)}_onError(t){this._on(vi.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=cn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=Rx(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=Rx(t.columns,t.old_record)),n}}const Lx=()=>{},Q_=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class $_{constructor(t,n){var i;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=tE,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Lx,this.ref=0,this.logger=Lx,this.conn=null,this.sendBuffer=[],this.serializer=new G_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let c;return a?c=a:typeof fetch>"u"?c=(...h)=>Dc(async()=>{const{default:g}=await Promise.resolve().then(()=>Ro);return{default:g}},void 0).then(({default:g})=>g(...h)):c=fetch,(...h)=>c(...h)},this.endPoint=`${t}/${Z0.websocket}`,this.httpEndpoint=sE(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const r=(i=n==null?void 0:n.params)===null||i===void 0?void 0:i.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,c)=>c(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new nE(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=U_),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:z_}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(i=>i.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,i){this.logger(t,n,i)}connectionState(){switch(this.conn&&this.conn.readyState){case Ml.connecting:return Br.Connecting;case Ml.open:return Br.Open;case Ml.closing:return Br.Closing;default:return Br.Closed}}isConnected(){return this.connectionState()===Br.Open}channel(t,n={config:{}}){const i=`realtime:${t}`,r=this.getChannels().find(a=>a.topic===i);if(r)return r;{const a=new Fm(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:i,payload:r,ref:a}=t,c=()=>{this.encode(t,h=>{var g;(g=this.conn)===null||g===void 0||g.send(h)})};this.log("push",`${n} ${i} (${a})`,r),this.isConnected()?c():this.sendBuffer.push(c)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(i=>{const r={access_token:n,version:V_};n&&i.updateJoinPayload(r),i.joinedOnce&&i._isJoined()&&i._push(vi.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(H_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:i,event:r,payload:a,ref:c}=n;i==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),c&&c===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${i} ${r} ${c&&"("+c+")"||""}`,a),Array.from(this.channels).filter(h=>h._isMember(i)).forEach(h=>h._trigger(r,a,c)),this.stateChangeCallbacks.message.forEach(h=>h(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(vi.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const i=t.match(/\?/)?"&":"?",r=new URLSearchParams(n);return`${t}${i}${r}`}_workerObjectUrl(t){let n;if(t)n=t;else{const i=new Blob([Q_],{type:"application/javascript"});n=URL.createObjectURL(i)}return n}}class Vm extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function qt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class J_ extends Vm{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Q0 extends Vm{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var e8=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};const rE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Dc(async()=>{const{default:i}=await Promise.resolve().then(()=>Ro);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},t8=()=>e8(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Dc(()=>Promise.resolve().then(()=>Ro),void 0)).Response:Response}),$0=e=>{if(Array.isArray(e))return e.map(n=>$0(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,i])=>{const r=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[r]=$0(i)}),t};var aa=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};const Sf=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),n8=(e,t,n)=>aa(void 0,void 0,void 0,function*(){const i=yield t8();e instanceof i&&!(n!=null&&n.noResolveJson)?e.json().then(r=>{t(new J_(Sf(r),e.status||500))}).catch(r=>{t(new Q0(Sf(r),r))}):t(new Q0(Sf(e),e))}),i8=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i&&(r.body=JSON.stringify(i)),Object.assign(Object.assign({},r),n))};function Oc(e,t,n,i,r,a){return aa(this,void 0,void 0,function*(){return new Promise((c,h)=>{e(n,i8(t,i,r,a)).then(g=>{if(!g.ok)throw g;return i!=null&&i.noResolveJson?g:g.json()}).then(g=>c(g)).catch(g=>n8(g,h,i))})})}function Ed(e,t,n,i){return aa(this,void 0,void 0,function*(){return Oc(e,"GET",t,n,i)})}function Fs(e,t,n,i,r){return aa(this,void 0,void 0,function*(){return Oc(e,"POST",t,i,r,n)})}function s8(e,t,n,i,r){return aa(this,void 0,void 0,function*(){return Oc(e,"PUT",t,i,r,n)})}function r8(e,t,n,i){return aa(this,void 0,void 0,function*(){return Oc(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),i)})}function aE(e,t,n,i,r){return aa(this,void 0,void 0,function*(){return Oc(e,"DELETE",t,i,r,n)})}var _n=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};const a8={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Bx={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class o8{constructor(t,n={},i,r){this.url=t,this.headers=n,this.bucketId=i,this.fetch=rE(r)}uploadOrUpdate(t,n,i,r){return _n(this,void 0,void 0,function*(){try{let a;const c=Object.assign(Object.assign({},Bx),r);let h=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(c.upsert)});const g=c.metadata;typeof Blob<"u"&&i instanceof Blob?(a=new FormData,a.append("cacheControl",c.cacheControl),g&&a.append("metadata",this.encodeMetadata(g)),a.append("",i)):typeof FormData<"u"&&i instanceof FormData?(a=i,a.append("cacheControl",c.cacheControl),g&&a.append("metadata",this.encodeMetadata(g))):(a=i,h["cache-control"]=`max-age=${c.cacheControl}`,h["content-type"]=c.contentType,g&&(h["x-metadata"]=this.toBase64(this.encodeMetadata(g)))),r!=null&&r.headers&&(h=Object.assign(Object.assign({},h),r.headers));const p=this._removeEmptyFolders(n),y=this._getFinalPath(p),w=yield this.fetch(`${this.url}/object/${y}`,Object.assign({method:t,body:a,headers:h},c!=null&&c.duplex?{duplex:c.duplex}:{})),E=yield w.json();return w.ok?{data:{path:p,id:E.Id,fullPath:E.Key},error:null}:{data:null,error:E}}catch(a){if(qt(a))return{data:null,error:a};throw a}})}upload(t,n,i){return _n(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,i)})}uploadToSignedUrl(t,n,i,r){return _n(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),c=this._getFinalPath(a),h=new URL(this.url+`/object/upload/sign/${c}`);h.searchParams.set("token",n);try{let g;const p=Object.assign({upsert:Bx.upsert},r),y=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",p.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",p.cacheControl)):(g=i,y["cache-control"]=`max-age=${p.cacheControl}`,y["content-type"]=p.contentType);const w=yield this.fetch(h.toString(),{method:"PUT",body:g,headers:y}),E=yield w.json();return w.ok?{data:{path:a,fullPath:E.Key},error:null}:{data:null,error:E}}catch(g){if(qt(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(t,n){return _n(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const r=Object.assign({},this.headers);n!=null&&n.upsert&&(r["x-upsert"]="true");const a=yield Fs(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:r}),c=new URL(this.url+a.url),h=c.searchParams.get("token");if(!h)throw new Vm("No token returned by API");return{data:{signedUrl:c.toString(),path:t,token:h},error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}update(t,n,i){return _n(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,i)})}move(t,n,i){return _n(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}copy(t,n,i){return _n(this,void 0,void 0,function*(){try{return{data:{path:(yield Fs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}createSignedUrl(t,n,i){return _n(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t),a=yield Fs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:n},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const c=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${c}`)},{data:a,error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}createSignedUrls(t,n,i){return _n(this,void 0,void 0,function*(){try{const r=yield Fs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:r.map(c=>Object.assign(Object.assign({},c),{signedUrl:c.signedURL?encodeURI(`${this.url}${c.signedURL}${a}`):null})),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}download(t,n){return _n(this,void 0,void 0,function*(){const r=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),c=a?`?${a}`:"";try{const h=this._getFinalPath(t);return{data:yield(yield Ed(this.fetch,`${this.url}/${r}/${h}${c}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(h){if(qt(h))return{data:null,error:h};throw h}})}info(t){return _n(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const i=yield Ed(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:$0(i),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}exists(t){return _n(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield r8(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(qt(i)&&i instanceof Q0){const r=i.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,n){const i=this._getFinalPath(t),r=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&r.push(a);const h=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});g!==""&&r.push(g);let p=r.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${h}/public/${i}${p}`)}}}remove(t){return _n(this,void 0,void 0,function*(){try{return{data:yield aE(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}list(t,n,i){return _n(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},a8),n),{prefix:t||""});return{data:yield Fs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},i),error:null}}catch(r){if(qt(r))return{data:null,error:r};throw r}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const l8="2.7.1",c8={"X-Client-Info":`storage-js/${l8}`};var ba=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};class u8{constructor(t,n={},i){this.url=t,this.headers=Object.assign(Object.assign({},c8),n),this.fetch=rE(i)}listBuckets(){return ba(this,void 0,void 0,function*(){try{return{data:yield Ed(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(qt(t))return{data:null,error:t};throw t}})}getBucket(t){return ba(this,void 0,void 0,function*(){try{return{data:yield Ed(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return ba(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}updateBucket(t,n){return ba(this,void 0,void 0,function*(){try{return{data:yield s8(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(qt(i))return{data:null,error:i};throw i}})}emptyBucket(t){return ba(this,void 0,void 0,function*(){try{return{data:yield Fs(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return ba(this,void 0,void 0,function*(){try{return{data:yield aE(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(qt(n))return{data:null,error:n};throw n}})}}class d8 extends u8{constructor(t,n={},i){super(t,n,i)}from(t){return new o8(this.url,this.headers,t,this.fetch)}}const h8="2.52.0";let ul="";typeof Deno<"u"?ul="deno":typeof document<"u"?ul="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ul="react-native":ul="node";const f8={"X-Client-Info":`supabase-js-${ul}/${h8}`},m8={headers:f8},g8={schema:"public"},p8={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},x8={};var y8=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};const b8=e=>{let t;return e?t=e:typeof fetch>"u"?t=Gv:t=fetch,(...n)=>t(...n)},w8=()=>typeof Headers>"u"?Yv:Headers,v8=(e,t,n)=>{const i=b8(n),r=w8();return(a,c)=>y8(void 0,void 0,void 0,function*(){var h;const g=(h=yield t())!==null&&h!==void 0?h:e;let p=new r(c==null?void 0:c.headers);return p.has("apikey")||p.set("apikey",e),p.has("Authorization")||p.set("Authorization",`Bearer ${g}`),i(a,Object.assign(Object.assign({},c),{headers:p}))})};var E8=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};function A8(e){return e.endsWith("/")?e:e+"/"}function S8(e,t){var n,i;const{db:r,auth:a,realtime:c,global:h}=e,{db:g,auth:p,realtime:y,global:w}=t,E={db:Object.assign(Object.assign({},g),r),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},y),c),global:Object.assign(Object.assign(Object.assign({},w),h),{headers:Object.assign(Object.assign({},(n=w==null?void 0:w.headers)!==null&&n!==void 0?n:{}),(i=h==null?void 0:h.headers)!==null&&i!==void 0?i:{})}),accessToken:()=>E8(this,void 0,void 0,function*(){return""})};return e.accessToken?E.accessToken=e.accessToken:delete E.accessToken,E}const oE="2.71.1",_a=30*1e3,J0=3,Cf=J0*_a,C8="http://localhost:9999",T8="supabase.auth.token",N8={"X-Client-Info":`gotrue-js/${oE}`},e1="X-Supabase-Api-Version",lE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},_8=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,M8=10*60*1e3;class zm extends Error{constructor(t,n,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=i}}function _e(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class I8 extends zm{constructor(t,n,i){super(t,n,i),this.name="AuthApiError",this.status=n,this.code=i}}function D8(e){return _e(e)&&e.name==="AuthApiError"}class cE extends zm{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class br extends zm{constructor(t,n,i,r){super(t,i,r),this.name=n,this.status=i}}class Ls extends br{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function R8(e){return _e(e)&&e.name==="AuthSessionMissingError"}class gu extends br{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class pu extends br{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class xu extends br{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function O8(e){return _e(e)&&e.name==="AuthImplicitGrantRedirectError"}class Px extends br{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class t1 extends br{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function Tf(e){return _e(e)&&e.name==="AuthRetryableFetchError"}class Ux extends br{constructor(t,n,i){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=i}}class n1 extends br{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ad="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Fx=` 	
\r=`.split(""),j8=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Fx.length;t+=1)e[Fx[t].charCodeAt(0)]=-2;for(let t=0;t<Ad.length;t+=1)e[Ad[t].charCodeAt(0)]=t;return e})();function Vx(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ad[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;n(Ad[i]),t.queuedBits-=6}}function uE(e,t,n){const i=j8[e];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function zx(e){const t=[],n=c=>{t.push(String.fromCodePoint(c))},i={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=c=>{B8(c,i,n)};for(let c=0;c<e.length;c+=1)uE(e.charCodeAt(c),r,a);return t.join("")}function k8(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function L8(e,t){for(let n=0;n<e.length;n+=1){let i=e.charCodeAt(n);if(i>55295&&i<=56319){const r=(i-55296)*1024&65535;i=(e.charCodeAt(n+1)-56320&65535|r)+65536,n+=1}k8(i,t)}}function B8(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let i=1;i<6;i+=1)if(!(e>>7-i&1)){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function P8(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};for(let r=0;r<e.length;r+=1)uE(e.charCodeAt(r),n,i);return new Uint8Array(t)}function U8(e){const t=[];return L8(e,n=>t.push(n)),new Uint8Array(t)}function F8(e){const t=[],n={queue:0,queuedBits:0},i=r=>{t.push(r)};return e.forEach(r=>Vx(r,n,i)),Vx(null,n,i),t.join("")}function V8(e){return Math.round(Date.now()/1e3)+e}function z8(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const yi=()=>typeof window<"u"&&typeof document<"u",Mr={tested:!1,writable:!1},dE=()=>{if(!yi())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Mr.tested)return Mr.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Mr.tested=!0,Mr.writable=!0}catch{Mr.tested=!0,Mr.writable=!1}return Mr.writable};function H8(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((r,a)=>{t[a]=r})}catch{}return n.searchParams.forEach((i,r)=>{t[r]=i}),t}const hE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>Dc(async()=>{const{default:i}=await Promise.resolve().then(()=>Ro);return{default:i}},void 0).then(({default:i})=>i(...n)):t=fetch,(...n)=>t(...n)},G8=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Ma=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Ir=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Os=async(e,t)=>{await e.removeItem(t)};class oh{constructor(){this.promise=new oh.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}oh.promiseConstructor=Promise;function Nf(e){const t=e.split(".");if(t.length!==3)throw new n1("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!_8.test(t[i]))throw new n1("JWT not in base64url format");return{header:JSON.parse(zx(t[0])),payload:JSON.parse(zx(t[1])),signature:P8(t[2]),raw:{header:t[0],payload:t[1]}}}async function Y8(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function q8(e,t){return new Promise((i,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const c=await e(a);if(!t(a,null,c)){i(c);return}}catch(c){if(!t(a,c)){r(c);return}}})()})}function X8(e){return("0"+e.toString(16)).substr(-2)}function W8(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=n.length;let r="";for(let a=0;a<56;a++)r+=n.charAt(Math.floor(Math.random()*i));return r}return crypto.getRandomValues(t),Array.from(t,X8).join("")}async function Z8(e){const n=new TextEncoder().encode(e),i=await crypto.subtle.digest("SHA-256",n),r=new Uint8Array(i);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function K8(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await Z8(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function wa(e,t,n=!1){const i=W8();let r=i;n&&(r+="/PASSWORD_RECOVERY"),await Ma(e,`${t}-code-verifier`,r);const a=await K8(i);return[a,i===a?"plain":"s256"]}const Q8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function $8(e){const t=e.headers.get(e1);if(!t||!t.match(Q8))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function J8(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function e6(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const t6=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function va(e){if(!t6.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _f(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Hx(e){return JSON.parse(JSON.stringify(e))}var n6=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};const kr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),i6=[502,503,504];async function Gx(e){var t;if(!G8(e))throw new t1(kr(e),0);if(i6.includes(e.status))throw new t1(kr(e),e.status);let n;try{n=await e.json()}catch(a){throw new cE(kr(a),a)}let i;const r=$8(e);if(r&&r.getTime()>=lE["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?i=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(i=n.error_code),i){if(i==="weak_password")throw new Ux(kr(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Ls}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,c)=>a&&typeof c=="string",!0))throw new Ux(kr(n),e.status,n.weak_password.reasons);throw new I8(kr(n),e.status||500,i)}const s6=(e,t,n,i)=>{const r={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),r.body=JSON.stringify(i),Object.assign(Object.assign({},r),n))};async function Oe(e,t,n,i){var r;const a=Object.assign({},i==null?void 0:i.headers);a[e1]||(a[e1]=lE["2024-01-01"].name),i!=null&&i.jwt&&(a.Authorization=`Bearer ${i.jwt}`);const c=(r=i==null?void 0:i.query)!==null&&r!==void 0?r:{};i!=null&&i.redirectTo&&(c.redirect_to=i.redirectTo);const h=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",g=await r6(e,t,n+h,{headers:a,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(g):{data:Object.assign({},g),error:null}}async function r6(e,t,n,i,r,a){const c=s6(t,i,r,a);let h;try{h=await e(n,Object.assign({},c))}catch(g){throw console.error(g),new t1(kr(g),0)}if(h.ok||await Gx(h),i!=null&&i.noResolveJson)return h;try{return await h.json()}catch(g){await Gx(g)}}function es(e){var t;let n=null;c6(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=V8(e.expires_in)));const i=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:i},error:null}}function Yx(e){const t=es(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,i)=>n&&typeof i=="string",!0)&&(t.data.weak_password=e.weak_password),t}function qs(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function a6(e){return{data:e,error:null}}function o6(e){const{action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:a}=e,c=n6(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),h={action_link:t,email_otp:n,hashed_token:i,redirect_to:r,verification_type:a},g=Object.assign({},c);return{data:{properties:h,user:g},error:null}}function l6(e){return e}function c6(e){return e.access_token&&e.refresh_token&&e.expires_in}const Mf=["global","local","others"];var u6=function(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]]);return n};class d6{constructor({url:t="",headers:n={},fetch:i}){this.url=t,this.headers=n,this.fetch=hE(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Mf[0]){if(Mf.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Mf.join(", ")}`);try{return await Oe(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(_e(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,n={}){try{return await Oe(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:qs})}catch(i){if(_e(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:n}=t,i=u6(t,["options"]),r=Object.assign(Object.assign({},i),n);return"newEmail"in i&&(r.new_email=i==null?void 0:i.newEmail,delete r.newEmail),await Oe(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:o6,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(_e(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await Oe(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:qs})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,i,r,a,c,h,g;try{const p={nextPage:null,lastPage:0,total:0},y=await Oe(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&i!==void 0?i:"",per_page:(a=(r=t==null?void 0:t.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:l6});if(y.error)throw y.error;const w=await y.json(),E=(c=y.headers.get("x-total-count"))!==null&&c!==void 0?c:0,A=(g=(h=y.headers.get("link"))===null||h===void 0?void 0:h.split(","))!==null&&g!==void 0?g:[];return A.length>0&&(A.forEach(O=>{const I=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),B=JSON.parse(O.split(";")[1].split("=")[1]);p[`${B}Page`]=I}),p.total=parseInt(E)),{data:Object.assign(Object.assign({},w),p),error:null}}catch(p){if(_e(p))return{data:{users:[]},error:p};throw p}}async getUserById(t){va(t);try{return await Oe(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:qs})}catch(n){if(_e(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){va(t);try{return await Oe(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:qs})}catch(i){if(_e(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,n=!1){va(t);try{return await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:qs})}catch(i){if(_e(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){va(t.userId);try{const{data:n,error:i}=await Oe(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:n,error:i}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _deleteFactor(t){va(t.userId),va(t.id);try{return{data:await Oe(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}}function qx(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function h6(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Ea={debug:!!(globalThis&&dE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class fE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class f6 extends fE{}async function m6(e,t,n){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async r=>{if(r){Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,r.name);try{return await n()}finally{Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,r.name)}}else{if(t===0)throw Ea.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new f6(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ea.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}h6();const g6={url:C8,storageKey:T8,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:N8,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Xx(e,t,n){return await n()}const Aa={};class $l{constructor(t){var n,i;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$l.nextInstanceID,$l.nextInstanceID+=1,this.instanceID>0&&yi()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},g6),t);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new d6({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=hE(r.fetch),this.lock=r.lock||Xx,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:yi()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=m6:this.lock=Xx,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(r.storage?this.storage=r.storage:dE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=qx(this.memoryStorage)),r.userStorage&&(this.userStorage=r.userStorage)):(this.memoryStorage={},this.storage=qx(this.memoryStorage)),yi()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Aa[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Aa[this.storageKey]=Object.assign(Object.assign({},Aa[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Aa[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Aa[this.storageKey]=Object.assign(Object.assign({},Aa[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=H8(window.location.href);let i="none";if(this._isImplicitGrantCallback(n)?i="implicit":await this._isPKCECallback(n)&&(i="pkce"),yi()&&this.detectSessionInUrl&&i!=="none"){const{data:r,error:a}=await this._getSessionFromURL(n,i);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),O8(a)){const g=(t=a.details)===null||t===void 0?void 0:t.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:c,redirectType:h}=r;return this._debug("#_initialize()","detected session in URL",c,"redirect type",h),await this._saveSession(c),setTimeout(async()=>{h==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",c):await this._notifyAllSubscribers("SIGNED_IN",c)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return _e(n)?{error:n}:{error:new cE("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,i,r;try{const a=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.captchaToken}},xform:es}),{data:c,error:h}=a;if(h||!c)return{data:{user:null,session:null},error:h};const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(a){if(_e(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,i,r;try{let a;if("email"in t){const{email:y,password:w,options:E}=t;let A=null,O=null;this.flowType==="pkce"&&([A,O]=await wa(this.storage,this.storageKey)),a=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:E==null?void 0:E.emailRedirectTo,body:{email:y,password:w,data:(n=E==null?void 0:E.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken},code_challenge:A,code_challenge_method:O},xform:es})}else if("phone"in t){const{phone:y,password:w,options:E}=t;a=await Oe(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:y,password:w,data:(i=E==null?void 0:E.data)!==null&&i!==void 0?i:{},channel:(r=E==null?void 0:E.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:E==null?void 0:E.captchaToken}},xform:es})}else throw new pu("You must provide either an email or phone number and a password");const{data:c,error:h}=a;if(h||!c)return{data:{user:null,session:null},error:h};const g=c.session,p=c.user;return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(a){if(_e(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:c,options:h}=t;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Yx})}else if("phone"in t){const{phone:a,password:c,options:h}=t;n=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:c,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Yx})}else throw new pu("You must provide either an email or phone number and a password");const{data:i,error:r}=n;return r?{data:{user:null,session:null},error:r}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new gu}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:r})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,i,r,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(r=t.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,i,r,a,c,h,g,p,y,w,E,A;let O,I;if("message"in t)O=t.message,I=t.signature;else{const{chain:B,wallet:T,statement:N,options:C}=t;let k;if(yi())if(typeof T=="object")k=T;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))k=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=T}const z=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in k&&k.signIn){const D=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:z.host,uri:z.href}),N?{statement:N}:null));let L;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")L=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)L=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in L&&"signature"in L&&(typeof L.signedMessage=="string"||L.signedMessage instanceof Uint8Array)&&L.signature instanceof Uint8Array)O=typeof L.signedMessage=="string"?L.signedMessage:new TextDecoder().decode(L.signedMessage),I=L.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${z.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...N?["",N,""]:[""],"Version: 1",`URI: ${z.href}`,`Issued At: ${(r=(i=C==null?void 0:C.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((c=C==null?void 0:C.signInWithSolana)===null||c===void 0)&&c.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((g=C==null?void 0:C.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((p=C==null?void 0:C.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((w=(y=C==null?void 0:C.signInWithSolana)===null||y===void 0?void 0:y.resources)===null||w===void 0)&&w.length?["Resources",...C.signInWithSolana.resources.map(L=>`- ${L}`)]:[]].join(`
`);const D=await k.signMessage(new TextEncoder().encode(O),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");I=D}}try{const{data:B,error:T}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:F8(I)},!((E=t.options)===null||E===void 0)&&E.captchaToken?{gotrue_meta_security:{captcha_token:(A=t.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:es});if(T)throw T;return!B||!B.session||!B.user?{data:{user:null,session:null},error:new gu}:(B.session&&(await this._saveSession(B.session),await this._notifyAllSubscribers("SIGNED_IN",B.session)),{data:Object.assign({},B),error:T})}catch(B){if(_e(B))return{data:{user:null,session:null},error:B};throw B}}async _exchangeCodeForSession(t){const n=await Ir(this.storage,`${this.storageKey}-code-verifier`),[i,r]=(n??"").split("/");try{const{data:a,error:c}=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:es});if(await Os(this.storage,`${this.storageKey}-code-verifier`),c)throw c;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new gu}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:c})}catch(a){if(_e(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:i,token:r,access_token:a,nonce:c}=t,h=await Oe(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:r,access_token:a,nonce:c,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:es}),{data:g,error:p}=h;return p?{data:{user:null,session:null},error:p}:!g||!g.session||!g.user?{data:{user:null,session:null},error:new gu}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:g,error:p})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,i,r,a,c;try{if("email"in t){const{email:h,options:g}=t;let p=null,y=null;this.flowType==="pkce"&&([p,y]=await wa(this.storage,this.storageKey));const{error:w}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:h,data:(n=g==null?void 0:g.data)!==null&&n!==void 0?n:{},create_user:(i=g==null?void 0:g.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:p,code_challenge_method:y},redirectTo:g==null?void 0:g.emailRedirectTo});return{data:{user:null,session:null},error:w}}if("phone"in t){const{phone:h,options:g}=t,{data:p,error:y}=await Oe(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:h,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(a=g==null?void 0:g.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(c=g==null?void 0:g.channel)!==null&&c!==void 0?c:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:y}}throw new pu("You must provide either an email or phone number.")}catch(h){if(_e(h))return{data:{user:null,session:null},error:h};throw h}}async verifyOtp(t){var n,i;try{let r,a;"options"in t&&(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:c,error:h}=await Oe(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:es});if(h)throw h;if(!c)throw new Error("An error occurred on token verification.");const g=c.session,p=c.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),{data:{user:p,session:g},error:null}}catch(r){if(_e(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(t){var n,i,r;try{let a=null,c=null;return this.flowType==="pkce"&&([a,c]=await wa(this.storage,this.storageKey)),await Oe(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((r=t==null?void 0:t.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:c}),headers:this.headers,xform:a6})}catch(a){if(_e(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:i}=t;if(i)throw i;if(!n)throw new Ls;const{error:r}=await Oe(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:r}})}catch(t){if(_e(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:i,type:r,options:a}=t,{error:c}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:c}}else if("phone"in t){const{phone:i,type:r,options:a}=t,{data:c,error:h}=await Oe(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:c==null?void 0:c.message_id},error:h}}throw new pu("You must provide either an email or phone number and a type")}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await i,await n()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=n();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await Ir(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Cf:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const c=await Ir(this.userStorage,this.storageKey+"-user");c!=null&&c.user?t.user=c.user:t.user=_f()}if(this.storage.isServer&&t.user){let c=this.suppressGetSessionWarning;t=new Proxy(t,{get:(g,p,y)=>(!c&&p==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),c=!0,this.suppressGetSessionWarning=!0),Reflect.get(g,p,y))})}return{data:{session:t},error:null}}const{session:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:qs}):await this._useSession(async n=>{var i,r,a;const{data:c,error:h}=n;if(h)throw h;return!(!((i=c.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ls}:await Oe(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=c.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:qs})})}catch(n){if(_e(n))return R8(n)&&(await this._removeSession(),await Os(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async i=>{const{data:r,error:a}=i;if(a)throw a;if(!r.session)throw new Ls;const c=r.session;let h=null,g=null;this.flowType==="pkce"&&t.email!=null&&([h,g]=await wa(this.storage,this.storageKey));const{data:p,error:y}=await Oe(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:h,code_challenge_method:g}),jwt:c.access_token,xform:qs});if(y)throw y;return c.user=p.user,await this._saveSession(c),await this._notifyAllSubscribers("USER_UPDATED",c),{data:{user:c.user},error:null}})}catch(i){if(_e(i))return{data:{user:null},error:i};throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Ls;const n=Date.now()/1e3;let i=n,r=!0,a=null;const{payload:c}=Nf(t.access_token);if(c.exp&&(i=c.exp,r=i<=n),r){const{session:h,error:g}=await this._callRefreshToken(t.refresh_token);if(g)return{data:{user:null,session:null},error:g};if(!h)return{data:{user:null,session:null},error:null};a=h}else{const{data:h,error:g}=await this._getUser(t.access_token);if(g)throw g;a={access_token:t.access_token,refresh_token:t.refresh_token,user:h.user,token_type:"bearer",expires_in:i-n,expires_at:i},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(_e(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var i;if(!t){const{data:c,error:h}=n;if(h)throw h;t=(i=c.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Ls;const{session:r,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(_e(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!yi())throw new xu("No browser detected.");if(t.error||t.error_description||t.error_code)throw new xu(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Px("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new xu("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Px("No code detected.");const{data:N,error:C}=await this._exchangeCodeForSession(t.code);if(C)throw C;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:N.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:r,access_token:a,refresh_token:c,expires_in:h,expires_at:g,token_type:p}=t;if(!a||!h||!c||!p)throw new xu("No session defined in URL");const y=Math.round(Date.now()/1e3),w=parseInt(h);let E=y+w;g&&(E=parseInt(g));const A=E-y;A*1e3<=_a&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${w}s`);const O=E-w;y-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,E,y):y-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,E,y);const{data:I,error:B}=await this._getUser(a);if(B)throw B;const T={provider_token:i,provider_refresh_token:r,access_token:a,expires_in:w,expires_at:E,refresh_token:c,token_type:p,user:I.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:T,redirectType:t.type},error:null}}catch(i){if(_e(i))return{data:{session:null,redirectType:null},error:i};throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await Ir(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var i;const{data:r,error:a}=n;if(a)return{error:a};const c=(i=r.session)===null||i===void 0?void 0:i.access_token;if(c){const{error:h}=await this.admin.signOut(c,t);if(h&&!(D8(h)&&(h.status===404||h.status===401||h.status===403)))return{error:h}}return t!=="others"&&(await this._removeSession(),await Os(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=z8(),i={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async n=>{var i,r;try{const{data:{session:a},error:c}=n;if(c)throw c;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let i=null,r=null;this.flowType==="pkce"&&([i,r]=await wa(this.storage,this.storageKey,!0));try{return await Oe(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:r,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(_e(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:i}=await this.getUser();if(i)throw i;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(_e(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:i,error:r}=await this._useSession(async a=>{var c,h,g,p,y;const{data:w,error:E}=a;if(E)throw E;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(c=t.options)===null||c===void 0?void 0:c.redirectTo,scopes:(h=t.options)===null||h===void 0?void 0:h.scopes,queryParams:(g=t.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Oe(this.fetch,"GET",A,{headers:this.headers,jwt:(y=(p=w.session)===null||p===void 0?void 0:p.access_token)!==null&&y!==void 0?y:void 0})});if(r)throw r;return yi()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),{data:{provider:t.provider,url:i==null?void 0:i.url},error:null}}catch(i){if(_e(i))return{data:{provider:t.provider,url:null},error:i};throw i}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var i,r;const{data:a,error:c}=n;if(c)throw c;return await Oe(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(r=(i=a.session)===null||i===void 0?void 0:i.access_token)!==null&&r!==void 0?r:void 0})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const i=Date.now();return await q8(async r=>(r>0&&await Y8(200*Math.pow(2,r-1)),this._debug(n,"refreshing attempt",r),await Oe(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:es})),(r,a)=>{const c=200*Math.pow(2,r);return a&&Tf(a)&&Date.now()+c-i<_a})}catch(i){if(this._debug(n,"error",i),_e(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",i),yi()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,n;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const r=await Ir(this.storage,this.storageKey);if(r&&this.userStorage){let c=await Ir(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!c&&(c={user:r.user},await Ma(this.userStorage,this.storageKey+"-user",c)),r.user=(t=c==null?void 0:c.user)!==null&&t!==void 0?t:_f()}else if(r&&!r.user&&!r.user){const c=await Ir(this.storage,this.storageKey+"-user");c&&(c!=null&&c.user)?(r.user=c.user,await Os(this.storage,this.storageKey+"-user"),await Ma(this.storage,this.storageKey,r)):r.user=_f()}if(this._debug(i,"session from storage",r),!this._isValidSession(r)){this._debug(i,"session is not valid"),r!==null&&await this._removeSession();return}const a=((n=r.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Cf;if(this._debug(i,`session has${a?"":" not"} expired with margin of ${Cf}s`),a){if(this.autoRefreshToken&&r.refresh_token){const{error:c}=await this._callRefreshToken(r.refresh_token);c&&(console.error(c),Tf(c)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",c),await this._removeSession()))}}else if(r.user&&r.user.__isUserNotAvailableProxy===!0)try{const{data:c,error:h}=await this._getUser(r.access_token);!h&&(c!=null&&c.user)?(r.user=c.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(c){console.error("Error getting user data:",c),this._debug(i,"error getting user data, skipping SIGNED_IN notification",c)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){this._debug(i,"error",r),console.error(r);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var n,i;if(!t)throw new Ls;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new oh;const{data:a,error:c}=await this._refreshAccessToken(t);if(c)throw c;if(!a.session)throw new Ls;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const h={session:a.session,error:null};return this.refreshingDeferred.resolve(h),h}catch(a){if(this._debug(r,"error",a),_e(a)){const c={session:null,error:a};return Tf(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(c),c}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(t,n,i=!0){const r=`#_notifyAllSubscribers(${t})`;this._debug(r,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],c=Array.from(this.stateChangeEmitters.values()).map(async h=>{try{await h.callback(t,n)}catch(g){a.push(g)}});if(await Promise.all(c),a.length>0){for(let h=0;h<a.length;h+=1)console.error(a[h]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),i=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&n.user&&await Ma(this.userStorage,this.storageKey+"-user",{user:n.user});const r=Object.assign({},n);delete r.user;const a=Hx(r);await Ma(this.storage,this.storageKey,a)}else{const r=Hx(n);await Ma(this.storage,this.storageKey,r)}}async _removeSession(){this._debug("#_removeSession()"),await Os(this.storage,this.storageKey),await Os(this.storage,this.storageKey+"-code-verifier"),await Os(this.storage,this.storageKey+"-user"),this.userStorage&&await Os(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&yi()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),_a);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((i.expires_at*1e3-t)/_a);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${_a}ms, refresh threshold is ${J0} ticks`),r<=J0&&await this._callRefreshToken(i.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof fE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!yi()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,i){const r=[`provider=${encodeURIComponent(n)}`];if(i!=null&&i.redirectTo&&r.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&r.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[a,c]=await wa(this.storage,this.storageKey),h=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(c)}`});r.push(h.toString())}if(i!=null&&i.queryParams){const a=new URLSearchParams(i.queryParams);r.push(a.toString())}return i!=null&&i.skipBrowserRedirect&&r.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${r.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var i;const{data:r,error:a}=n;return a?{data:null,error:a}:await Oe(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var i,r;const{data:a,error:c}=n;if(c)return{data:null,error:c};const h=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:g,error:p}=await Oe(this.fetch,"POST",`${this.url}/factors`,{body:h,headers:this.headers,jwt:(i=a==null?void 0:a.session)===null||i===void 0?void 0:i.access_token});return p?{data:null,error:p}:(t.factorType==="totp"&&(!((r=g==null?void 0:g.totp)===null||r===void 0)&&r.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),{data:g,error:null})})}catch(n){if(_e(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:a}=n;if(a)return{data:null,error:a};const{data:c,error:h}=await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),{data:c,error:h})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var i;const{data:r,error:a}=n;return a?{data:null,error:a}:await Oe(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(i=r==null?void 0:r.session)===null||i===void 0?void 0:i.access_token})})}catch(n){if(_e(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:i}=await this._challenge({factorId:t.factorId});return i?{data:null,error:i}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const i=(t==null?void 0:t.factors)||[],r=i.filter(c=>c.factor_type==="totp"&&c.status==="verified"),a=i.filter(c=>c.factor_type==="phone"&&c.status==="verified");return{data:{all:i,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,i;const{data:{session:r},error:a}=t;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:c}=Nf(r.access_token);let h=null;c.aal&&(h=c.aal);let g=h;((i=(n=r.user.factors)===null||n===void 0?void 0:n.filter(w=>w.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(g="aal2");const y=c.amr||[];return{data:{currentLevel:h,nextLevel:g,currentAuthenticationMethods:y},error:null}}))}async fetchJwk(t,n={keys:[]}){let i=n.keys.find(h=>h.kid===t);if(i)return i;const r=Date.now();if(i=this.jwks.keys.find(h=>h.kid===t),i&&this.jwks_cached_at+M8>r)return i;const{data:a,error:c}=await Oe(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=r,i=a.keys.find(h=>h.kid===t),!i)?null:i}async getClaims(t,n={}){try{let i=t;if(!i){const{data:A,error:O}=await this.getSession();if(O||!A.session)return{data:null,error:O};i=A.session.access_token}const{header:r,payload:a,signature:c,raw:{header:h,payload:g}}=Nf(i);n!=null&&n.allowExpired||J8(a.exp);const p=!r.alg||r.alg.startsWith("HS")||!r.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(r.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:A}=await this.getUser(i);if(A)throw A;return{data:{claims:a,header:r,signature:c},error:null}}const y=e6(r.alg),w=await crypto.subtle.importKey("jwk",p,y,!0,["verify"]);if(!await crypto.subtle.verify(y,w,c,U8(`${h}.${g}`)))throw new n1("Invalid JWT signature");return{data:{claims:a,header:r,signature:c},error:null}}catch(i){if(_e(i))return{data:null,error:i};throw i}}}$l.nextInstanceID=0;const p6=$l;class x6 extends p6{constructor(t){super(t)}}var y6=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})};class b6{constructor(t,n,i){var r,a,c;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const h=A8(t),g=new URL(h);this.realtimeUrl=new URL("realtime/v1",g),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",g),this.storageUrl=new URL("storage/v1",g),this.functionsUrl=new URL("functions/v1",g);const p=`sb-${g.hostname.split(".")[0]}-auth-token`,y={db:g8,realtime:x8,auth:Object.assign(Object.assign({},p8),{storageKey:p}),global:m8},w=S8(i??{},y);this.storageKey=(r=w.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=w.global.headers)!==null&&a!==void 0?a:{},w.accessToken?(this.accessToken=w.accessToken,this.auth=new Proxy({},{get:(E,A)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(A)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((c=w.auth)!==null&&c!==void 0?c:{},this.headers,w.global.fetch),this.fetch=v8(n,this._getAccessToken.bind(this),w.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},w.realtime)),this.rest=new B_(new URL("rest/v1",g).href,{headers:this.headers,schema:w.db.schema,fetch:this.fetch}),w.accessToken||this._listenForAuthEvents()}get functions(){return new f_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new d8(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},i={}){return this.rest.rpc(t,n,i)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return y6(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:i}=yield this.auth.getSession();return(n=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,storageKey:a,flowType:c,lock:h,debug:g},p,y){const w={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new x6({url:this.authUrl.href,headers:Object.assign(Object.assign({},w),p),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:i,storage:r,flowType:c,lock:h,debug:g,fetch:y,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new $_(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,i)=>{this._handleTokenChanged(n,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,n,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?this.changedAccessToken=i:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const w6=(e,t,n)=>new b6(e,t,n),v6="https://rqebhtnaklgxevgbkfkq.supabase.co",E6="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxZWJodG5ha2xneGV2Z2JrZmtxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODQ0OTksImV4cCI6MjA2ODY2MDQ5OX0.n8QXCQJ2sSn9V3bIRZZv9Aoj-KM45vqUYOi0G_C7FYM",ue=w6(v6,E6,{auth:{persistSession:!0,autoRefreshToken:!0}});/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A6=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),S6=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,i)=>i?i.toUpperCase():n.toLowerCase()),Wx=e=>{const t=S6(e);return t.charAt(0).toUpperCase()+t.slice(1)},mE=(...e)=>e.filter((t,n,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===n).join(" ").trim(),C6=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var T6={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N6=j.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:a,iconNode:c,...h},g)=>j.createElement("svg",{ref:g,...T6,width:t,height:t,stroke:e,strokeWidth:i?Number(n)*24/Number(t):n,className:mE("lucide",r),...!a&&!C6(h)&&{"aria-hidden":"true"},...h},[...c.map(([p,y])=>j.createElement(p,y)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=(e,t)=>{const n=j.forwardRef(({className:i,...r},a)=>j.createElement(N6,{ref:a,iconNode:t,className:mE(`lucide-${A6(Wx(e))}`,`lucide-${e}`,i),...r}));return n.displayName=Wx(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _6=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],Zx=Be("activity",_6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],I6=Be("arrow-right",M6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D6=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],hs=Be("building-2",D6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R6=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Yn=Be("calendar",R6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O6=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Sd=Be("camera",O6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j6=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Jl=Be("chart-column",j6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k6=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],L6=Be("circle-alert",k6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B6=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],ar=Be("circle-check-big",B6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P6=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],U6=Be("database",P6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F6=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],gE=Be("download",F6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V6=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],z6=Be("external-link",V6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H6=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],za=Be("gift",H6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G6=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],fs=Be("image",G6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y6=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Kx=Be("log-out",Y6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q6=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],ea=Be("map-pin",q6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X6=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],W6=Be("maximize",X6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z6=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],ec=Be("monitor",Z6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K6=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],Q6=Be("pause",K6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $6=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],pE=Be("play",$6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J6=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],tc=Be("plus",J6);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e5=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],dr=Be("qr-code",e5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t5=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],n5=Be("rotate-ccw",t5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i5=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],s5=Be("save",i5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r5=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],a5=Be("search",r5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o5=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],xE=Be("settings",o5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l5=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],yE=Be("shuffle",l5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c5=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],u5=Be("sparkles",c5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d5=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],lh=Be("square-pen",d5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h5=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],hr=Be("trash-2",h5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f5=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],dl=Be("trending-up",f5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m5=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Qx=Be("trophy",m5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g5=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Hm=Be("upload",g5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p5=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],i1=Be("user-check",p5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],s1=Be("user-plus",x5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y5=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],fn=Be("users",y5);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b5=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],or=Be("vote",b5);function w5(){return m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:m.jsx("div",{className:"max-w-2xl w-full",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"flex justify-center mb-4",children:m.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:m.jsx(U6,{className:"h-12 w-12 text-blue-600"})})}),m.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Management System"}),m.jsx("p",{className:"text-gray-600",children:"A comprehensive solution for managing events, attendees, and more"})]}),m.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx(L6,{className:"h-6 w-6 text-yellow-600 mr-3 mt-0.5"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Database Configuration Required"}),m.jsx("p",{className:"text-yellow-700 mb-4",children:"This application requires a Supabase database to function. To get started:"}),m.jsxs("ol",{className:"list-decimal list-inside text-yellow-700 space-y-2 text-sm",children:[m.jsxs("li",{children:["Create a free account at ",m.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),m.jsx("li",{children:"Create a new project"}),m.jsx("li",{children:"Get your project URL and anon key from the API settings"}),m.jsx("li",{children:"Configure the environment variables in your deployment"})]})]})]})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"✨ Features"}),m.jsxs("ul",{className:"text-gray-600 space-y-2 text-sm",children:[m.jsx("li",{children:"• Company & Event Management"}),m.jsx("li",{children:"• Attendee Registration & Check-in"}),m.jsx("li",{children:"• QR Code Generation"}),m.jsx("li",{children:"• Seating Arrangements"}),m.jsx("li",{children:"• Photo Gallery & Voting"}),m.jsx("li",{children:"• Lucky Draw System"}),m.jsx("li",{children:"• Real-time Monitoring"})]})]}),m.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"🛠️ Tech Stack"}),m.jsxs("ul",{className:"text-gray-600 space-y-2 text-sm",children:[m.jsx("li",{children:"• React + TypeScript"}),m.jsx("li",{children:"• Tailwind CSS"}),m.jsx("li",{children:"• Supabase (Database & Auth)"}),m.jsx("li",{children:"• QR Code Generation"}),m.jsx("li",{children:"• Real-time Updates"}),m.jsx("li",{children:"• Responsive Design"}),m.jsx("li",{children:"• PWA Ready"})]})]})]}),m.jsx("div",{className:"text-center",children:m.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[m.jsx(xE,{className:"h-8 w-8 text-blue-600 mx-auto mb-3"}),m.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to Deploy?"}),m.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Set up your Supabase database and configure the environment variables to start using this application."}),m.jsxs("div",{className:"text-xs text-gray-500",children:[m.jsx("p",{children:"Environment variables needed:"}),m.jsx("p",{className:"font-mono bg-gray-100 px-2 py-1 rounded mt-1",children:"VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY"})]})]})})]})})})}const $x=[{name:"Dashboard",href:"/admin",icon:Jl},{name:"Companies",href:"/admin/companies",icon:hs},{name:"Events",href:"/admin/events",icon:Yn},{name:"Attendees",href:"/admin/attendees",icon:fn},{name:"Check-in",href:"/admin/checkin",icon:dr},{name:"Seating",href:"/admin/seating",icon:ea},{name:"Voting",href:"/admin/voting",icon:or},{name:"Lucky Draw",href:"/admin/lucky-draw",icon:za},{name:"Gallery",href:"/admin/gallery",icon:fs},{name:"Welcome Monitor",href:"/admin/welcome-monitor",icon:ec},{name:"Voting Monitor",href:"/admin/voting-monitor",icon:ec}];function v5({children:e,userCompany:t}){const n=As(),i=Nc(),r=async()=>{await ue.auth.signOut(),i("/")};return m.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[m.jsxs("div",{className:"hidden lg:fixed lg:inset-y-0 lg:left-0 lg:z-50 lg:w-64 lg:bg-white lg:shadow-lg lg:block",children:[m.jsx("div",{className:"flex h-16 items-center justify-center border-b border-gray-200",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Event Manager"}),t&&m.jsx("p",{className:"text-sm text-blue-600 truncate px-2",children:t.company.name})]})}),m.jsx("nav",{className:"mt-8 space-y-1 px-4",children:$x.filter(a=>!(t&&a.href==="/admin/companies")).map(a=>{const c=a.icon,h=n.pathname===a.href||a.href!=="/admin"&&n.pathname.startsWith(a.href);return m.jsxs(Dn,{to:a.href,className:`group flex items-center px-3 py-2 text-sm font-medium rounded-md transition-colors ${h?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"}`,children:[m.jsx(c,{className:"mr-3 h-5 w-5"}),m.jsx("span",{className:"truncate",children:a.name})]},a.name)})}),m.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:m.jsxs("button",{onClick:r,className:"flex items-center w-full px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[m.jsx(Kx,{className:"mr-3 h-5 w-5"}),"Sign Out"]})})]}),m.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-50 bg-white shadow-sm border-b border-gray-200",children:[m.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-lg font-bold text-gray-900",children:"Event Manager"}),t&&m.jsx("p",{className:"text-xs text-blue-600 truncate",children:t.company.name})]}),m.jsxs("button",{onClick:r,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-md hover:bg-gray-50 hover:text-gray-900 transition-colors",children:[m.jsx(Kx,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]}),m.jsx("div",{className:"px-4 pb-3 border-t border-gray-200 bg-gray-50",children:m.jsx("div",{className:"grid grid-cols-2 gap-2 mt-3",children:$x.filter(a=>!(t&&a.href==="/admin")).map(a=>{const c=a.icon,h=n.pathname===a.href||a.href!=="/admin"&&n.pathname.startsWith(a.href);return m.jsxs(Dn,{to:a.href,className:`flex flex-col items-center px-3 py-2 text-xs font-medium rounded-md transition-colors ${h?"bg-blue-100 text-blue-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"}`,children:[m.jsx(c,{className:"h-5 w-5 mb-1"}),m.jsx("span",{className:"truncate text-center",children:a.name})]},a.name)})})})]}),m.jsx("div",{className:"flex-1 lg:ml-64",children:m.jsx("main",{className:"flex-1 p-4 md:p-8 pt-32 lg:pt-8",children:e})})]})}function E5(){const[e,t]=j.useState(""),[n,i]=j.useState(""),[r,a]=j.useState(!1),[c,h]=j.useState(!1),g=Nc(),p=async y=>{y.preventDefault(),a(!0);try{if(c){const{error:w}=await ue.auth.signUp({email:e,password:n});if(w)throw w;oe.success("Account created successfully!")}else{const{error:w}=await ue.auth.signInWithPassword({email:e,password:n});if(w)throw w;g("/admin")}}catch(w){oe.error(w.message)}finally{a(!1)}};return m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"max-w-md w-full space-y-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:c?"Create your account":"Sign in to your account"}),m.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Event Management System"})]}),m.jsxs("form",{className:"mt-8 space-y-6",onSubmit:p,children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),m.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address",value:e,onChange:y=>t(y.target.value)})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),m.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Password",value:n,onChange:y=>i(y.target.value)})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:r,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:r?"Loading...":c?"Sign up":"Sign in"})}),m.jsx("div",{className:"text-center",children:m.jsx("button",{type:"button",onClick:()=>h(!c),className:"text-blue-600 hover:text-blue-500 text-sm",children:c?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}function A5({userCompany:e}){const[t,n]=j.useState(null),[i,r]=j.useState(null),[a,c]=j.useState(!0);j.useEffect(()=>{e?g():h()},[e]);const h=async()=>{try{c(!0);const{data:p}=await ue.from("companies").select("id, created_at"),{data:y}=await ue.from("events").select(`
          id,
          name,
          created_at,
          company:companies(name)
        `).order("created_at",{ascending:!1}),{data:w}=await ue.from("attendees").select("id, event_id, checked_in, created_at"),E=(p==null?void 0:p.length)||0,A=(y==null?void 0:y.length)||0,O=(w==null?void 0:w.length)||0,I=(w==null?void 0:w.filter(C=>C.checked_in).length)||0,B=await Promise.all(((y==null?void 0:y.slice(0,5))||[]).map(async C=>{const k=(w==null?void 0:w.filter(z=>z.event_id===C.id))||[];return{...C,company:Array.isArray(C.company)?C.company[0]:C.company,attendee_count:k.length,checked_in_count:k.filter(z=>z.checked_in).length}})),T=new Date;T.setDate(T.getDate()-30);const N={companies:(p==null?void 0:p.filter(C=>new Date(C.created_at)>T).length)||0,events:(y==null?void 0:y.filter(C=>new Date(C.created_at)>T).length)||0,attendees:(w==null?void 0:w.filter(C=>new Date(C.created_at)>T).length)||0};n({totalCompanies:E,totalEvents:A,totalAttendees:O,totalCheckedIn:I,recentEvents:B,monthlyGrowth:N})}catch(p){console.error("Error fetching admin stats:",p)}finally{c(!1)}},g=async()=>{try{c(!0);const{data:p}=await ue.from("events").select("id, name, date, created_at").eq("company_id",e.company_id).order("created_at",{ascending:!1}),y=(p==null?void 0:p.map(C=>C.id))||[],{data:w}=await ue.from("attendees").select("id, event_id, checked_in").in("event_id",y),E=(p==null?void 0:p.length)||0,A=(w==null?void 0:w.length)||0,O=(w==null?void 0:w.filter(C=>C.checked_in).length)||0,I=new Date,B=(p==null?void 0:p.filter(C=>C.date&&new Date(C.date)>I).length)||0,T=((p==null?void 0:p.slice(0,5))||[]).map(C=>{const k=(w==null?void 0:w.filter(z=>z.event_id===C.id))||[];return{...C,attendee_count:k.length,checked_in_count:k.filter(z=>z.checked_in).length}});r({totalEvents:E,totalAttendees:A,totalCheckedIn:O,upcomingEvents:B,recentEvents:T,quickActions:[{name:"Create Event",path:"/admin/events",icon:Yn,description:"Set up a new event",color:"bg-blue-500"},{name:"Manage Attendees",path:"/admin/attendees",icon:fn,description:"View and manage registrations",color:"bg-green-500"},{name:"Check-in System",path:"/admin/checkin",icon:dr,description:"Scan QR codes for check-in",color:"bg-purple-500"},{name:"Seating Arrangement",path:"/admin/seating",icon:ea,description:"Arrange tables and seats",color:"bg-orange-500"},{name:"Event Gallery",path:"/admin/gallery",icon:fs,description:"Manage photo uploads",color:"bg-pink-500"},{name:"Voting System",path:"/admin/voting",icon:or,description:"Create voting sessions",color:"bg-indigo-500"}]})}catch(p){console.error("Error fetching company stats:",p)}finally{c(!1)}};return a?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!e&&t?m.jsxs("div",{children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"System-wide analytics and management overview"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(hs,{className:"h-8 w-8 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.totalCompanies}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Companies"}),t.monthlyGrowth.companies>0&&m.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[m.jsx(dl,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.companies," this month"]})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(Yn,{className:"h-8 w-8 text-green-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.totalEvents}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Events"}),t.monthlyGrowth.events>0&&m.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[m.jsx(dl,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.events," this month"]})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(fn,{className:"h-8 w-8 text-purple-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.totalAttendees}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Attendees"}),t.monthlyGrowth.attendees>0&&m.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[m.jsx(dl,{className:"h-3 w-3 mr-1"}),"+",t.monthlyGrowth.attendees," this month"]})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(i1,{className:"h-8 w-8 text-orange-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:t.totalCheckedIn}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Check-ins"}),m.jsx("div",{className:"text-xs text-gray-500 mt-1",children:t.totalAttendees>0?`${Math.round(t.totalCheckedIn/t.totalAttendees*100)}% rate`:"0% rate"})]})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(Jl,{className:"h-6 w-6 mr-2"}),"System Management"]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs(Dn,{to:"/admin",className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx(hs,{className:"h-8 w-8 text-blue-600 mb-2"}),m.jsx("div",{className:"font-medium",children:"Companies"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Manage organizations"})]}),m.jsxs(Dn,{to:"/admin/progress",className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx(Zx,{className:"h-8 w-8 text-green-600 mb-2"}),m.jsx("div",{className:"font-medium",children:"Analytics"}),m.jsx("div",{className:"text-sm text-gray-600",children:"Monthly progress"})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Recent Events"}),m.jsxs("div",{className:"space-y-3",children:[t.recentEvents.map(p=>m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900",children:p.name}),m.jsx("div",{className:"text-sm text-gray-600",children:p.company.name})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-medium",children:[p.checked_in_count,"/",p.attendee_count]}),m.jsx("div",{className:"text-xs text-gray-500",children:"checked in"})]})]},p.id)),t.recentEvents.length===0&&m.jsxs("div",{className:"text-center py-4 text-gray-500",children:[m.jsx(Yn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"No recent events"})]})]})]})]})]}):e&&i?m.jsxs("div",{children:[m.jsxs("div",{className:"mb-8",children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"}),m.jsxs("p",{className:"text-gray-600 mt-2",children:["Welcome back to ",e.company.name]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(Yn,{className:"h-8 w-8 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.totalEvents}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Events"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(fn,{className:"h-8 w-8 text-green-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.totalAttendees}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Attendees"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(i1,{className:"h-8 w-8 text-purple-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.totalCheckedIn}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Check-ins"}),m.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i.totalAttendees>0?`${Math.round(i.totalCheckedIn/i.totalAttendees*100)}% rate`:"0% rate"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(dl,{className:"h-8 w-8 text-orange-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:i.upcomingEvents}),m.jsx("div",{className:"text-sm text-gray-600",children:"Upcoming Events"})]})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Quick Actions"}),m.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.quickActions.slice(0,4).map(p=>{const y=p.icon;return m.jsxs(Dn,{to:p.path,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors group",children:[m.jsx("div",{className:`w-10 h-10 ${p.color} rounded-lg flex items-center justify-center mb-3 group-hover:scale-110 transition-transform`,children:m.jsx(y,{className:"h-5 w-5 text-white"})}),m.jsx("div",{className:"font-medium text-gray-900",children:p.name}),m.jsx("div",{className:"text-sm text-gray-600",children:p.description})]},p.name)})}),i.quickActions.length>4&&m.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:m.jsx("div",{className:"grid grid-cols-2 gap-4",children:i.quickActions.slice(4).map(p=>{const y=p.icon;return m.jsxs(Dn,{to:p.path,className:"flex items-center p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors group",children:[m.jsx("div",{className:`w-8 h-8 ${p.color} rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform`,children:m.jsx(y,{className:"h-4 w-4 text-white"})}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900 text-sm",children:p.name}),m.jsx("div",{className:"text-xs text-gray-600",children:p.description})]})]},p.name)})})})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-xl font-semibold",children:"Recent Events"}),m.jsxs(Dn,{to:"/admin/events",className:"text-blue-600 hover:text-blue-700 flex items-center text-sm",children:["View All ",m.jsx(I6,{className:"h-4 w-4 ml-1"})]})]}),m.jsxs("div",{className:"space-y-3",children:[i.recentEvents.map(p=>m.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900",children:p.name}),p.date&&m.jsx("div",{className:"text-sm text-gray-600",children:new Date(p.date).toLocaleDateString()})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("div",{className:"text-sm font-medium",children:[p.checked_in_count,"/",p.attendee_count]}),m.jsx("div",{className:"text-xs text-gray-500",children:"attendees"})]})]},p.id)),i.recentEvents.length===0&&m.jsxs("div",{className:"text-center py-4 text-gray-500",children:[m.jsx(Yn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"No events yet"}),m.jsx(Dn,{to:"/admin/events",className:"text-blue-600 hover:text-blue-700 text-sm",children:"Create your first event"})]})]})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Event Tools"}),m.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[m.jsxs(Dn,{to:"/admin/lucky-draw",className:"p-4 text-center border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx(za,{className:"h-8 w-8 text-yellow-600 mx-auto mb-2"}),m.jsx("div",{className:"font-medium text-sm",children:"Lucky Draw"})]}),m.jsxs(Dn,{to:"/admin/welcome-monitor",className:"p-4 text-center border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx(ec,{className:"h-8 w-8 text-blue-600 mx-auto mb-2"}),m.jsx("div",{className:"font-medium text-sm",children:"Welcome Monitor"})]}),m.jsxs(Dn,{to:"/admin/voting-monitor",className:"p-4 text-center border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx(Jl,{className:"h-8 w-8 text-purple-600 mx-auto mb-2"}),m.jsx("div",{className:"font-medium text-sm",children:"Voting Monitor"})]}),m.jsxs(Dn,{to:"/admin/progress",className:"p-4 text-center border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[m.jsx(Zx,{className:"h-8 w-8 text-green-600 mx-auto mb-2"}),m.jsx("div",{className:"font-medium text-sm",children:"Analytics"})]})]})]})]}):null}function S5(){const[e,t]=j.useState([]),[n,i]=j.useState([]),[r,a]=j.useState(!1),[c,h]=j.useState(!1),[g,p]=j.useState(null),[y,w]=j.useState(""),[E,A]=j.useState({email:"",password:"",company_id:""}),[O,I]=j.useState(!0);j.useEffect(()=>{B(),T()},[]);const B=async()=>{try{const{data:U,error:Y}=await ue.from("companies").select("*").order("created_at",{ascending:!1});if(Y)throw Y;const J=await Promise.all(U.map(async ee=>{const{data:de}=await ue.from("events").select("id").eq("company_id",ee.id),{data:be}=await ue.from("attendees").select("id").in("event_id",(de==null?void 0:de.map(Z=>Z.id))||[]);return{...ee,event_count:(de==null?void 0:de.length)||0,attendee_count:(be==null?void 0:be.length)||0}}));t(J)}catch(U){oe.error("Error fetching companies: "+U.message)}finally{I(!1)}},T=async()=>{try{const{data:U,error:Y}=await ue.from("company_users").select(`
          *,
          company:companies(name)
        `).order("created_at",{ascending:!1});if(Y)throw Y;i(U||[])}catch(U){console.error("Error fetching company users:",U)}},N=async U=>{if(U.preventDefault(),!!y.trim())try{const{error:Y}=await ue.from("companies").insert([{name:y}]);if(Y)throw Y;oe.success("Company created successfully!"),w(""),a(!1),B()}catch(Y){oe.error("Error creating company: "+Y.message)}},C=async U=>{if(U.preventDefault(),!(!y.trim()||!g))try{const{error:Y}=await ue.from("companies").update({name:y}).eq("id",g.id);if(Y)throw Y;oe.success("Company updated successfully!"),w(""),p(null),a(!1),B()}catch(Y){oe.error("Error updating company: "+Y.message)}},k=async U=>{if(confirm("Are you sure you want to delete this company? This will also delete all events and attendees."))try{const{error:Y}=await ue.from("companies").delete().eq("id",U);if(Y)throw Y;oe.success("Company deleted successfully!"),B(),T()}catch(Y){oe.error("Error deleting company: "+Y.message)}},z=U=>{p(U),w(U.name),a(!0)},D=async U=>{if(U.preventDefault(),!(!E.email.trim()||!E.password.trim()||!E.company_id))try{const{data:{session:Y}}=await ue.auth.getSession();if(!Y)throw new Error("Not authenticated");const J=await fetch("https://rqebhtnaklgxevgbkfkq.supabase.co/functions/v1/create-company-user",{method:"POST",headers:{Authorization:`Bearer ${Y.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:E.email,password:E.password,company_id:E.company_id})}),ee=await J.json();if(!J.ok)throw new Error(ee.error||"Failed to create user");oe.success("Company user created successfully!"),A({email:"",password:"",company_id:""}),h(!1),T()}catch(Y){oe.error("Error creating user: "+Y.message)}},L=async U=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:Y}=await ue.from("company_users").delete().eq("id",U);if(Y)throw Y;oe.success("User deleted successfully!"),T()}catch(Y){oe.error("Error deleting user: "+Y.message)}},F=()=>{w(""),p(null),a(!1)};return O?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Company Management"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage companies, events, and user access"})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs("button",{onClick:()=>h(!0),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[m.jsx(s1,{className:"h-5 w-5 mr-2"}),"Add User"]}),m.jsxs("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[m.jsx(tc,{className:"h-5 w-5 mr-2"}),"Add Company"]})]})]}),m.jsx("div",{className:"space-y-6",children:e.map(U=>{const Y=n.filter(J=>J.company_id===U.id);return m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(hs,{className:"h-8 w-8 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:U.name}),m.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(U.created_at).toLocaleDateString()]})]})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>z(U),className:"text-gray-400 hover:text-blue-600 transition-colors",children:m.jsx(lh,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>k(U.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:m.jsx(hr,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(Yn,{className:"h-5 w-5 mr-2"}),m.jsxs("span",{children:[U.event_count," Events"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(fn,{className:"h-5 w-5 mr-2"}),m.jsxs("span",{children:[U.attendee_count," Total Attendees"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(s1,{className:"h-5 w-5 mr-2"}),m.jsxs("span",{children:[Y.length," Users"]})]})]}),Y.length>0&&m.jsxs("div",{className:"border-t pt-4",children:[m.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Company Users"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:Y.map(J=>m.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:m.jsxs("div",{className:"flex justify-between items-start",children:[m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900 text-sm",children:J.email}),m.jsx("div",{className:"text-xs text-gray-500",children:new Date(J.created_at).toLocaleDateString()})]}),m.jsx("button",{onClick:()=>L(J.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:m.jsx(hr,{className:"h-3 w-3"})})]})},J.id))})]})]},U.id)})}),e.length===0&&n.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(hs,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No companies found"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first company"}),m.jsx("button",{onClick:()=>a(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Company"})]}),c&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Create Company User"}),m.jsxs("form",{onSubmit:D,children:[m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company *"}),m.jsxs("select",{value:E.company_id,onChange:U=>A({...E,company_id:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[m.jsx("option",{value:"",children:"Select a company"}),e.map(U=>m.jsx("option",{value:U.id,children:U.name},U.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),m.jsx("input",{type:"email",value:E.email,onChange:U=>A({...E,email:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email address",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),m.jsx("input",{type:"password",value:E.password,onChange:U=>A({...E,password:U.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter password",required:!0,minLength:6})]})]}),m.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[m.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Create User"})]})]})]})}),m.jsx("div",{className:"hidden",children:e.map(U=>m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[m.jsxs("div",{className:"flex items-center mb-4",children:[m.jsx(hs,{className:"h-8 w-8 text-blue-600 mr-3"}),m.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:U.name})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(Yn,{className:"h-5 w-5 mr-2"}),m.jsxs("span",{children:[U.event_count," Events"]})]}),m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(fn,{className:"h-5 w-5 mr-2"}),m.jsxs("span",{children:[U.attendee_count," Total Attendees"]})]})]}),m.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:m.jsxs("p",{className:"text-sm text-gray-500",children:["Created ",new Date(U.created_at).toLocaleDateString()]})})]},U.id))}),r&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:g?"Edit Company":"Create New Company"}),m.jsxs("form",{onSubmit:g?C:N,children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),m.jsx("input",{type:"text",id:"companyName",value:y,onChange:U=>w(U.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter company name",required:!0})]}),m.jsxs("div",{className:"flex justify-end space-x-3",children:[m.jsx("button",{type:"button",onClick:F,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:g?"Update Company":"Create Company"})]})]})]})})]})}var Xi={},C5=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},bE={},$n={};let Gm;const T5=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];$n.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};$n.getSymbolTotalCodewords=function(t){return T5[t]};$n.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};$n.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Gm=t};$n.isKanjiModeEnabled=function(){return typeof Gm<"u"};$n.toSJIS=function(t){return Gm(t)};var ch={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},e.from=function(i,r){if(e.isValid(i))return i;try{return t(i)}catch{return r}}})(ch);function wE(){this.buffer=[],this.length=0}wE.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var N5=wE;function jc(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}jc.prototype.set=function(e,t,n,i){const r=e*this.size+t;this.data[r]=n,i&&(this.reservedBit[r]=!0)};jc.prototype.get=function(e,t){return this.data[e*this.size+t]};jc.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};jc.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var _5=jc,vE={};(function(e){const t=$n.getSymbolSize;e.getRowColCoords=function(i){if(i===1)return[];const r=Math.floor(i/7)+2,a=t(i),c=a===145?26:Math.ceil((a-13)/(2*r-2))*2,h=[a-7];for(let g=1;g<r-1;g++)h[g]=h[g-1]-c;return h.push(6),h.reverse()},e.getPositions=function(i){const r=[],a=e.getRowColCoords(i),c=a.length;for(let h=0;h<c;h++)for(let g=0;g<c;g++)h===0&&g===0||h===0&&g===c-1||h===c-1&&g===0||r.push([a[h],a[g]]);return r}})(vE);var EE={};const M5=$n.getSymbolSize,Jx=7;EE.getPositions=function(t){const n=M5(t);return[[0,0],[n-Jx,0],[0,n-Jx]]};var AE={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},e.from=function(r){return e.isValid(r)?parseInt(r,10):void 0},e.getPenaltyN1=function(r){const a=r.size;let c=0,h=0,g=0,p=null,y=null;for(let w=0;w<a;w++){h=g=0,p=y=null;for(let E=0;E<a;E++){let A=r.get(w,E);A===p?h++:(h>=5&&(c+=t.N1+(h-5)),p=A,h=1),A=r.get(E,w),A===y?g++:(g>=5&&(c+=t.N1+(g-5)),y=A,g=1)}h>=5&&(c+=t.N1+(h-5)),g>=5&&(c+=t.N1+(g-5))}return c},e.getPenaltyN2=function(r){const a=r.size;let c=0;for(let h=0;h<a-1;h++)for(let g=0;g<a-1;g++){const p=r.get(h,g)+r.get(h,g+1)+r.get(h+1,g)+r.get(h+1,g+1);(p===4||p===0)&&c++}return c*t.N2},e.getPenaltyN3=function(r){const a=r.size;let c=0,h=0,g=0;for(let p=0;p<a;p++){h=g=0;for(let y=0;y<a;y++)h=h<<1&2047|r.get(p,y),y>=10&&(h===1488||h===93)&&c++,g=g<<1&2047|r.get(y,p),y>=10&&(g===1488||g===93)&&c++}return c*t.N3},e.getPenaltyN4=function(r){let a=0;const c=r.data.length;for(let g=0;g<c;g++)a+=r.data[g];return Math.abs(Math.ceil(a*100/c/5)-10)*t.N4};function n(i,r,a){switch(i){case e.Patterns.PATTERN000:return(r+a)%2===0;case e.Patterns.PATTERN001:return r%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(r+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return r*a%2+r*a%3===0;case e.Patterns.PATTERN110:return(r*a%2+r*a%3)%2===0;case e.Patterns.PATTERN111:return(r*a%3+(r+a)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}e.applyMask=function(r,a){const c=a.size;for(let h=0;h<c;h++)for(let g=0;g<c;g++)a.isReserved(g,h)||a.xor(g,h,n(r,g,h))},e.getBestMask=function(r,a){const c=Object.keys(e.Patterns).length;let h=0,g=1/0;for(let p=0;p<c;p++){a(p),e.applyMask(p,r);const y=e.getPenaltyN1(r)+e.getPenaltyN2(r)+e.getPenaltyN3(r)+e.getPenaltyN4(r);e.applyMask(p,r),y<g&&(g=y,h=p)}return h}})(AE);var uh={};const Qs=ch,yu=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],bu=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];uh.getBlocksCount=function(t,n){switch(n){case Qs.L:return yu[(t-1)*4+0];case Qs.M:return yu[(t-1)*4+1];case Qs.Q:return yu[(t-1)*4+2];case Qs.H:return yu[(t-1)*4+3];default:return}};uh.getTotalCodewordsCount=function(t,n){switch(n){case Qs.L:return bu[(t-1)*4+0];case Qs.M:return bu[(t-1)*4+1];case Qs.Q:return bu[(t-1)*4+2];case Qs.H:return bu[(t-1)*4+3];default:return}};var SE={},dh={};const Dl=new Uint8Array(512),Cd=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)Dl[n]=t,Cd[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)Dl[n]=Dl[n-255]})();dh.log=function(t){if(t<1)throw new Error("log("+t+")");return Cd[t]};dh.exp=function(t){return Dl[t]};dh.mul=function(t,n){return t===0||n===0?0:Dl[Cd[t]+Cd[n]]};(function(e){const t=dh;e.mul=function(i,r){const a=new Uint8Array(i.length+r.length-1);for(let c=0;c<i.length;c++)for(let h=0;h<r.length;h++)a[c+h]^=t.mul(i[c],r[h]);return a},e.mod=function(i,r){let a=new Uint8Array(i);for(;a.length-r.length>=0;){const c=a[0];for(let g=0;g<r.length;g++)a[g]^=t.mul(r[g],c);let h=0;for(;h<a.length&&a[h]===0;)h++;a=a.slice(h)}return a},e.generateECPolynomial=function(i){let r=new Uint8Array([1]);for(let a=0;a<i;a++)r=e.mul(r,new Uint8Array([1,t.exp(a)]));return r}})(SE);const CE=SE;function Ym(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Ym.prototype.initialize=function(t){this.degree=t,this.genPoly=CE.generateECPolynomial(this.degree)};Ym.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const i=CE.mod(n,this.genPoly),r=this.degree-i.length;if(r>0){const a=new Uint8Array(this.degree);return a.set(i,r),a}return i};var I5=Ym,TE={},wr={},qm={};qm.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var Wi={};const NE="[0-9]+",D5="[A-Z $%*+\\-./:]+";let nc="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";nc=nc.replace(/u/g,"\\u");const R5="(?:(?![A-Z0-9 $%*+\\-./:]|"+nc+`)(?:.|[\r
]))+`;Wi.KANJI=new RegExp(nc,"g");Wi.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Wi.BYTE=new RegExp(R5,"g");Wi.NUMERIC=new RegExp(NE,"g");Wi.ALPHANUMERIC=new RegExp(D5,"g");const O5=new RegExp("^"+nc+"$"),j5=new RegExp("^"+NE+"$"),k5=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Wi.testKanji=function(t){return O5.test(t)};Wi.testNumeric=function(t){return j5.test(t)};Wi.testAlphanumeric=function(t){return k5.test(t)};(function(e){const t=qm,n=Wi;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,c){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(c))throw new Error("Invalid version: "+c);return c>=1&&c<10?a.ccBits[0]:c<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return n.testNumeric(a)?e.NUMERIC:n.testAlphanumeric(a)?e.ALPHANUMERIC:n.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function i(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+r)}}e.from=function(a,c){if(e.isValid(a))return a;try{return i(a)}catch{return c}}})(wr);(function(e){const t=$n,n=uh,i=ch,r=wr,a=qm,c=7973,h=t.getBCHDigit(c);function g(E,A,O){for(let I=1;I<=40;I++)if(A<=e.getCapacity(I,O,E))return I}function p(E,A){return r.getCharCountIndicator(E,A)+4}function y(E,A){let O=0;return E.forEach(function(I){const B=p(I.mode,A);O+=B+I.getBitsLength()}),O}function w(E,A){for(let O=1;O<=40;O++)if(y(E,O)<=e.getCapacity(O,A,r.MIXED))return O}e.from=function(A,O){return a.isValid(A)?parseInt(A,10):O},e.getCapacity=function(A,O,I){if(!a.isValid(A))throw new Error("Invalid QR Code version");typeof I>"u"&&(I=r.BYTE);const B=t.getSymbolTotalCodewords(A),T=n.getTotalCodewordsCount(A,O),N=(B-T)*8;if(I===r.MIXED)return N;const C=N-p(I,A);switch(I){case r.NUMERIC:return Math.floor(C/10*3);case r.ALPHANUMERIC:return Math.floor(C/11*2);case r.KANJI:return Math.floor(C/13);case r.BYTE:default:return Math.floor(C/8)}},e.getBestVersionForData=function(A,O){let I;const B=i.from(O,i.M);if(Array.isArray(A)){if(A.length>1)return w(A,B);if(A.length===0)return 1;I=A[0]}else I=A;return g(I.mode,I.getLength(),B)},e.getEncodedBits=function(A){if(!a.isValid(A)||A<7)throw new Error("Invalid QR Code version");let O=A<<12;for(;t.getBCHDigit(O)-h>=0;)O^=c<<t.getBCHDigit(O)-h;return A<<12|O}})(TE);var _E={};const r1=$n,ME=1335,L5=21522,ey=r1.getBCHDigit(ME);_E.getEncodedBits=function(t,n){const i=t.bit<<3|n;let r=i<<10;for(;r1.getBCHDigit(r)-ey>=0;)r^=ME<<r1.getBCHDigit(r)-ey;return(i<<10|r)^L5};var IE={};const B5=wr;function po(e){this.mode=B5.NUMERIC,this.data=e.toString()}po.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};po.prototype.getLength=function(){return this.data.length};po.prototype.getBitsLength=function(){return po.getBitsLength(this.data.length)};po.prototype.write=function(t){let n,i,r;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),r=parseInt(i,10),t.put(r,10);const a=this.data.length-n;a>0&&(i=this.data.substr(n),r=parseInt(i,10),t.put(r,a*3+1))};var P5=po;const U5=wr,If=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function xo(e){this.mode=U5.ALPHANUMERIC,this.data=e}xo.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};xo.prototype.getLength=function(){return this.data.length};xo.prototype.getBitsLength=function(){return xo.getBitsLength(this.data.length)};xo.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let i=If.indexOf(this.data[n])*45;i+=If.indexOf(this.data[n+1]),t.put(i,11)}this.data.length%2&&t.put(If.indexOf(this.data[n]),6)};var F5=xo;const V5=wr;function yo(e){this.mode=V5.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}yo.getBitsLength=function(t){return t*8};yo.prototype.getLength=function(){return this.data.length};yo.prototype.getBitsLength=function(){return yo.getBitsLength(this.data.length)};yo.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var z5=yo;const H5=wr,G5=$n;function bo(e){this.mode=H5.KANJI,this.data=e}bo.getBitsLength=function(t){return t*13};bo.prototype.getLength=function(){return this.data.length};bo.prototype.getBitsLength=function(){return bo.getBitsLength(this.data.length)};bo.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=G5.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var Y5=bo,DE={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,i,r){var a={},c={};c[i]=0;var h=t.PriorityQueue.make();h.push(i,0);for(var g,p,y,w,E,A,O,I,B;!h.empty();){g=h.pop(),p=g.value,w=g.cost,E=n[p]||{};for(y in E)E.hasOwnProperty(y)&&(A=E[y],O=w+A,I=c[y],B=typeof c[y]>"u",(B||I>O)&&(c[y]=O,h.push(y,O),a[y]=p))}if(typeof r<"u"&&typeof c[r]>"u"){var T=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(T)}return a},extract_shortest_path_from_predecessor_list:function(n,i){for(var r=[],a=i;a;)r.push(a),n[a],a=n[a];return r.reverse(),r},find_path:function(n,i,r){var a=t.single_source_shortest_paths(n,i,r);return t.extract_shortest_path_from_predecessor_list(a,r)},PriorityQueue:{make:function(n){var i=t.PriorityQueue,r={},a;n=n||{};for(a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);return r.queue=[],r.sorter=n.sorter||i.default_sorter,r},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var r={value:n,cost:i};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(DE);var q5=DE.exports;(function(e){const t=wr,n=P5,i=F5,r=z5,a=Y5,c=Wi,h=$n,g=q5;function p(T){return unescape(encodeURIComponent(T)).length}function y(T,N,C){const k=[];let z;for(;(z=T.exec(C))!==null;)k.push({data:z[0],index:z.index,mode:N,length:z[0].length});return k}function w(T){const N=y(c.NUMERIC,t.NUMERIC,T),C=y(c.ALPHANUMERIC,t.ALPHANUMERIC,T);let k,z;return h.isKanjiModeEnabled()?(k=y(c.BYTE,t.BYTE,T),z=y(c.KANJI,t.KANJI,T)):(k=y(c.BYTE_KANJI,t.BYTE,T),z=[]),N.concat(C,k,z).sort(function(L,F){return L.index-F.index}).map(function(L){return{data:L.data,mode:L.mode,length:L.length}})}function E(T,N){switch(N){case t.NUMERIC:return n.getBitsLength(T);case t.ALPHANUMERIC:return i.getBitsLength(T);case t.KANJI:return a.getBitsLength(T);case t.BYTE:return r.getBitsLength(T)}}function A(T){return T.reduce(function(N,C){const k=N.length-1>=0?N[N.length-1]:null;return k&&k.mode===C.mode?(N[N.length-1].data+=C.data,N):(N.push(C),N)},[])}function O(T){const N=[];for(let C=0;C<T.length;C++){const k=T[C];switch(k.mode){case t.NUMERIC:N.push([k,{data:k.data,mode:t.ALPHANUMERIC,length:k.length},{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.ALPHANUMERIC:N.push([k,{data:k.data,mode:t.BYTE,length:k.length}]);break;case t.KANJI:N.push([k,{data:k.data,mode:t.BYTE,length:p(k.data)}]);break;case t.BYTE:N.push([{data:k.data,mode:t.BYTE,length:p(k.data)}])}}return N}function I(T,N){const C={},k={start:{}};let z=["start"];for(let D=0;D<T.length;D++){const L=T[D],F=[];for(let U=0;U<L.length;U++){const Y=L[U],J=""+D+U;F.push(J),C[J]={node:Y,lastCount:0},k[J]={};for(let ee=0;ee<z.length;ee++){const de=z[ee];C[de]&&C[de].node.mode===Y.mode?(k[de][J]=E(C[de].lastCount+Y.length,Y.mode)-E(C[de].lastCount,Y.mode),C[de].lastCount+=Y.length):(C[de]&&(C[de].lastCount=Y.length),k[de][J]=E(Y.length,Y.mode)+4+t.getCharCountIndicator(Y.mode,N))}}z=F}for(let D=0;D<z.length;D++)k[z[D]].end=0;return{map:k,table:C}}function B(T,N){let C;const k=t.getBestModeForData(T);if(C=t.from(N,k),C!==t.BYTE&&C.bit<k.bit)throw new Error('"'+T+'" cannot be encoded with mode '+t.toString(C)+`.
 Suggested mode is: `+t.toString(k));switch(C===t.KANJI&&!h.isKanjiModeEnabled()&&(C=t.BYTE),C){case t.NUMERIC:return new n(T);case t.ALPHANUMERIC:return new i(T);case t.KANJI:return new a(T);case t.BYTE:return new r(T)}}e.fromArray=function(N){return N.reduce(function(C,k){return typeof k=="string"?C.push(B(k,null)):k.data&&C.push(B(k.data,k.mode)),C},[])},e.fromString=function(N,C){const k=w(N,h.isKanjiModeEnabled()),z=O(k),D=I(z,C),L=g.find_path(D.map,"start","end"),F=[];for(let U=1;U<L.length-1;U++)F.push(D.table[L[U]].node);return e.fromArray(A(F))},e.rawSplit=function(N){return e.fromArray(w(N,h.isKanjiModeEnabled()))}})(IE);const hh=$n,Df=ch,X5=N5,W5=_5,Z5=vE,K5=EE,a1=AE,o1=uh,Q5=I5,Td=TE,$5=_E,J5=wr,Rf=IE;function eM(e,t){const n=e.size,i=K5.getPositions(t);for(let r=0;r<i.length;r++){const a=i[r][0],c=i[r][1];for(let h=-1;h<=7;h++)if(!(a+h<=-1||n<=a+h))for(let g=-1;g<=7;g++)c+g<=-1||n<=c+g||(h>=0&&h<=6&&(g===0||g===6)||g>=0&&g<=6&&(h===0||h===6)||h>=2&&h<=4&&g>=2&&g<=4?e.set(a+h,c+g,!0,!0):e.set(a+h,c+g,!1,!0))}}function tM(e){const t=e.size;for(let n=8;n<t-8;n++){const i=n%2===0;e.set(n,6,i,!0),e.set(6,n,i,!0)}}function nM(e,t){const n=Z5.getPositions(t);for(let i=0;i<n.length;i++){const r=n[i][0],a=n[i][1];for(let c=-2;c<=2;c++)for(let h=-2;h<=2;h++)c===-2||c===2||h===-2||h===2||c===0&&h===0?e.set(r+c,a+h,!0,!0):e.set(r+c,a+h,!1,!0)}}function iM(e,t){const n=e.size,i=Td.getEncodedBits(t);let r,a,c;for(let h=0;h<18;h++)r=Math.floor(h/3),a=h%3+n-8-3,c=(i>>h&1)===1,e.set(r,a,c,!0),e.set(a,r,c,!0)}function Of(e,t,n){const i=e.size,r=$5.getEncodedBits(t,n);let a,c;for(a=0;a<15;a++)c=(r>>a&1)===1,a<6?e.set(a,8,c,!0):a<8?e.set(a+1,8,c,!0):e.set(i-15+a,8,c,!0),a<8?e.set(8,i-a-1,c,!0):a<9?e.set(8,15-a-1+1,c,!0):e.set(8,15-a-1,c,!0);e.set(i-8,8,1,!0)}function sM(e,t){const n=e.size;let i=-1,r=n-1,a=7,c=0;for(let h=n-1;h>0;h-=2)for(h===6&&h--;;){for(let g=0;g<2;g++)if(!e.isReserved(r,h-g)){let p=!1;c<t.length&&(p=(t[c]>>>a&1)===1),e.set(r,h-g,p),a--,a===-1&&(c++,a=7)}if(r+=i,r<0||n<=r){r-=i,i=-i;break}}}function rM(e,t,n){const i=new X5;n.forEach(function(g){i.put(g.mode.bit,4),i.put(g.getLength(),J5.getCharCountIndicator(g.mode,e)),g.write(i)});const r=hh.getSymbolTotalCodewords(e),a=o1.getTotalCodewordsCount(e,t),c=(r-a)*8;for(i.getLengthInBits()+4<=c&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const h=(c-i.getLengthInBits())/8;for(let g=0;g<h;g++)i.put(g%2?17:236,8);return aM(i,e,t)}function aM(e,t,n){const i=hh.getSymbolTotalCodewords(t),r=o1.getTotalCodewordsCount(t,n),a=i-r,c=o1.getBlocksCount(t,n),h=i%c,g=c-h,p=Math.floor(i/c),y=Math.floor(a/c),w=y+1,E=p-y,A=new Q5(E);let O=0;const I=new Array(c),B=new Array(c);let T=0;const N=new Uint8Array(e.buffer);for(let L=0;L<c;L++){const F=L<g?y:w;I[L]=N.slice(O,O+F),B[L]=A.encode(I[L]),O+=F,T=Math.max(T,F)}const C=new Uint8Array(i);let k=0,z,D;for(z=0;z<T;z++)for(D=0;D<c;D++)z<I[D].length&&(C[k++]=I[D][z]);for(z=0;z<E;z++)for(D=0;D<c;D++)C[k++]=B[D][z];return C}function oM(e,t,n,i){let r;if(Array.isArray(e))r=Rf.fromArray(e);else if(typeof e=="string"){let p=t;if(!p){const y=Rf.rawSplit(e);p=Td.getBestVersionForData(y,n)}r=Rf.fromString(e,p||40)}else throw new Error("Invalid data");const a=Td.getBestVersionForData(r,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=a;else if(t<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const c=rM(t,n,r),h=hh.getSymbolSize(t),g=new W5(h);return eM(g,t),tM(g),nM(g,t),Of(g,n,0),t>=7&&iM(g,t),sM(g,c),isNaN(i)&&(i=a1.getBestMask(g,Of.bind(null,g,n))),a1.applyMask(i,g),Of(g,n,i),{modules:g,version:t,errorCorrectionLevel:n,maskPattern:i,segments:r}}bE.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let i=Df.M,r,a;return typeof n<"u"&&(i=Df.from(n.errorCorrectionLevel,Df.M),r=Td.from(n.version),a=a1.from(n.maskPattern),n.toSJISFunc&&hh.setToSJISFunction(n.toSJISFunc)),oM(t,r,i,a)};var RE={},Xm={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(a){return[a,a]}))),i.length===6&&i.push("F","F");const r=parseInt(i.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+i.slice(0,6).join("")}}e.getOptions=function(i){i||(i={}),i.color||(i.color={});const r=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,a=i.width&&i.width>=21?i.width:void 0,c=i.scale||4;return{width:a,scale:a?4:c,margin:r,color:{dark:t(i.color.dark||"#000000ff"),light:t(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},e.getScale=function(i,r){return r.width&&r.width>=i+r.margin*2?r.width/(i+r.margin*2):r.scale},e.getImageWidth=function(i,r){const a=e.getScale(i,r);return Math.floor((i+r.margin*2)*a)},e.qrToImageData=function(i,r,a){const c=r.modules.size,h=r.modules.data,g=e.getScale(c,a),p=Math.floor((c+a.margin*2)*g),y=a.margin*g,w=[a.color.light,a.color.dark];for(let E=0;E<p;E++)for(let A=0;A<p;A++){let O=(E*p+A)*4,I=a.color.light;if(E>=y&&A>=y&&E<p-y&&A<p-y){const B=Math.floor((E-y)/g),T=Math.floor((A-y)/g);I=w[h[B*c+T]?1:0]}i[O++]=I.r,i[O++]=I.g,i[O++]=I.b,i[O]=I.a}}})(Xm);(function(e){const t=Xm;function n(r,a,c){r.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=c,a.width=c,a.style.height=c+"px",a.style.width=c+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,c,h){let g=h,p=c;typeof g>"u"&&(!c||!c.getContext)&&(g=c,c=void 0),c||(p=i()),g=t.getOptions(g);const y=t.getImageWidth(a.modules.size,g),w=p.getContext("2d"),E=w.createImageData(y,y);return t.qrToImageData(E.data,a,g),n(w,p,y),w.putImageData(E,0,0),p},e.renderToDataURL=function(a,c,h){let g=h;typeof g>"u"&&(!c||!c.getContext)&&(g=c,c=void 0),g||(g={});const p=e.render(a,c,g),y=g.type||"image/png",w=g.rendererOpts||{};return p.toDataURL(y,w.quality)}})(RE);var OE={};const lM=Xm;function ty(e,t){const n=e.a/255,i=t+'="'+e.hex+'"';return n<1?i+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function jf(e,t,n){let i=e+t;return typeof n<"u"&&(i+=" "+n),i}function cM(e,t,n){let i="",r=0,a=!1,c=0;for(let h=0;h<e.length;h++){const g=Math.floor(h%t),p=Math.floor(h/t);!g&&!a&&(a=!0),e[h]?(c++,h>0&&g>0&&e[h-1]||(i+=a?jf("M",g+n,.5+p+n):jf("m",r,0),r=0,a=!1),g+1<t&&e[h+1]||(i+=jf("h",c),c=0)):r++}return i}OE.render=function(t,n,i){const r=lM.getOptions(n),a=t.modules.size,c=t.modules.data,h=a+r.margin*2,g=r.color.light.a?"<path "+ty(r.color.light,"fill")+' d="M0 0h'+h+"v"+h+'H0z"/>':"",p="<path "+ty(r.color.dark,"stroke")+' d="'+cM(c,a,r.margin)+'"/>',y='viewBox="0 0 '+h+" "+h+'"',E='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+y+' shape-rendering="crispEdges">'+g+p+`</svg>
`;return typeof i=="function"&&i(null,E),E};const uM=C5,l1=bE,jE=RE,dM=OE;function Wm(e,t,n,i,r){const a=[].slice.call(arguments,1),c=a.length,h=typeof a[c-1]=="function";if(!h&&!uM())throw new Error("Callback required as last argument");if(h){if(c<2)throw new Error("Too few arguments provided");c===2?(r=n,n=t,t=i=void 0):c===3&&(t.getContext&&typeof r>"u"?(r=i,i=void 0):(r=i,i=n,n=t,t=void 0))}else{if(c<1)throw new Error("Too few arguments provided");return c===1?(n=t,t=i=void 0):c===2&&!t.getContext&&(i=n,n=t,t=void 0),new Promise(function(g,p){try{const y=l1.create(n,i);g(e(y,t,i))}catch(y){p(y)}})}try{const g=l1.create(n,i);r(null,e(g,t,i))}catch(g){r(g)}}Xi.create=l1.create;Xi.toCanvas=Wm.bind(null,jE.render);Xi.toDataURL=Wm.bind(null,jE.renderToDataURL);Xi.toString=Wm.bind(null,function(e,t,n){return dM.render(e,n)});function hM({userCompany:e}){var z;const[t,n]=j.useState([]),[i,r]=j.useState([]),[a,c]=j.useState(!1),[h,g]=j.useState(null),[p,y]=j.useState(!0),[w,E]=j.useState({company_id:"",name:"",description:"",date:"",location:"",max_attendees:1e3});j.useEffect(()=>{A(),O()},[]);const A=async()=>{try{let D=ue.from("events").select(`
          *,
          company:companies(name)
        `);e&&(D=D.eq("company_id",e.company_id));const{data:L,error:F}=await D.order("created_at",{ascending:!1});if(F)throw F;const U=(L==null?void 0:L.map(J=>({...J,company:Array.isArray(J.company)?J.company[0]:J.company})))||[],Y=await Promise.all(U.map(async J=>{const{data:ee}=await ue.from("attendees").select("id, checked_in").eq("event_id",J.id);return{...J,attendee_count:(ee==null?void 0:ee.length)||0,checked_in_count:(ee==null?void 0:ee.filter(de=>de.checked_in).length)||0}}));n(Y)}catch(D){oe.error("Error fetching events: "+D.message)}finally{y(!1)}},O=async()=>{try{let D=ue.from("companies").select("*").order("name");e&&(D=D.eq("id",e.company_id));const{data:L,error:F}=await D;if(F)throw F;r(L)}catch(D){oe.error("Error fetching companies: "+D.message)}},I=async D=>{if(D.preventDefault(),!(!w.name.trim()||!w.company_id))try{if(h){const{error:L}=await ue.from("events").update({company_id:w.company_id,name:w.name,description:w.description||null,date:w.date||null,location:w.location||null,max_attendees:w.max_attendees}).eq("id",h.id);if(L)throw L;oe.success("Event updated successfully!")}else{const{data:L,error:F}=await ue.from("events").insert([{company_id:w.company_id,name:w.name,description:w.description||null,date:w.date||null,location:w.location||null,max_attendees:w.max_attendees}]).select();if(F)throw F;const U=`${window.location.origin}/public/register/${L[0].id}`,Y=await Xi.toDataURL(U,{width:300,margin:2,errorCorrectionLevel:"M"});await ue.from("events").update({registration_qr:Y}).eq("id",L[0].id),oe.success("Event created successfully!")}T(),A()}catch(L){oe.error("Error saving event: "+L.message)}},B=async D=>{if(confirm("Are you sure you want to delete this event? This will also delete all attendees."))try{const{error:L}=await ue.from("events").delete().eq("id",D);if(L)throw L;oe.success("Event deleted successfully!"),A()}catch(L){oe.error("Error deleting event: "+L.message)}},T=()=>{E({company_id:e?e.company_id:"",name:"",description:"",date:"",location:"",max_attendees:1e3}),g(null),c(!1)},N=D=>{g(D),E({company_id:e?e.company_id:D.company_id,name:D.name,description:D.description||"",date:D.date?new Date(D.date).toISOString().slice(0,16):"",location:D.location||"",max_attendees:D.max_attendees||1e3}),c(!0)},C=D=>`${window.location.origin}/public/register/${D}`,k=D=>{if(!D.registration_qr)return;const L=document.createElement("a");L.href=D.registration_qr,L.download=`${D.name}-registration-qr.png`,L.click()};return p?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Management"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage events across all companies"})]}),m.jsxs("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[m.jsx(tc,{className:"h-5 w-5 mr-2"}),"Add Event"]})]}),m.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-6",children:t.map(D=>m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow",children:[m.jsxs("div",{className:"flex justify-between items-start mb-4",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-1",children:D.name}),m.jsx("p",{className:"text-sm text-blue-600 font-medium",children:D.company.name})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{onClick:()=>N(D),className:"text-gray-400 hover:text-blue-600 transition-colors",children:m.jsx(lh,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>B(D.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:m.jsx(hr,{className:"h-4 w-4"})})]})]}),D.description&&m.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:D.description}),m.jsxs("div",{className:"space-y-2 mb-4",children:[D.date&&m.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[m.jsx(Yn,{className:"h-4 w-4 mr-2"}),m.jsx("span",{children:new Date(D.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),D.location&&m.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[m.jsx(ea,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"truncate",children:D.location})]}),m.jsxs("div",{className:"flex items-center text-gray-600 text-sm",children:[m.jsx(fn,{className:"h-4 w-4 mr-2"}),m.jsxs("span",{children:[D.attendee_count," registered • ",D.checked_in_count," checked in"]})]})]}),D.registration_qr&&m.jsx("div",{className:"border-t pt-4 mb-4",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Registration QR Code"}),m.jsx("div",{className:"flex justify-center mb-3",children:m.jsx("img",{src:D.registration_qr,alt:"Registration QR Code",className:"w-32 h-32 border border-gray-200 rounded-lg"})}),m.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"Scan to register for this event"})]})}),m.jsx("div",{className:"border-t pt-4",children:m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:()=>navigator.clipboard.writeText(C(D.id)),className:"text-blue-600 hover:text-blue-700 text-sm font-medium flex items-center",children:[m.jsx(z6,{className:"h-4 w-4 mr-1"}),"Copy Link"]}),D.registration_qr&&m.jsxs("button",{onClick:()=>k(D),className:"text-green-600 hover:text-green-700 text-sm font-medium flex items-center",children:[m.jsx(dr,{className:"h-4 w-4 mr-1"}),"Download"]})]}),m.jsxs("span",{className:"text-xs text-gray-500",children:["Max: ",D.max_attendees]})]})})]},D.id))}),t.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(Yn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No events found"}),m.jsx("p",{className:"text-gray-600 mb-4",children:"Create your first event to get started"}),m.jsx("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Event"})]}),a&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:h?"Edit Event":"Create New Event"}),m.jsxs("form",{onSubmit:I,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e?"Company":"Company *"}),e?m.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:((z=i.find(D=>D.id===e.company_id))==null?void 0:z.name)||"Your Company"}):m.jsxs("select",{value:w.company_id,onChange:D=>E({...w,company_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[m.jsx("option",{value:"",children:"Select a company"}),i.map(D=>m.jsx("option",{value:D.id,children:D.name},D.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Name *"}),m.jsx("input",{type:"text",value:w.name,onChange:D=>E({...w,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter event name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),m.jsx("textarea",{value:w.description,onChange:D=>E({...w,description:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter event description"})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),m.jsx("input",{type:"datetime-local",value:w.date,onChange:D=>E({...w,date:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attendees"}),m.jsx("input",{type:"number",value:w.max_attendees,onChange:D=>E({...w,max_attendees:parseInt(D.target.value)||1e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1"})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),m.jsx("input",{type:"text",value:w.location,onChange:D=>E({...w,location:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter event location"})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx("button",{type:"button",onClick:T,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:h?"Update Event":"Create Event"})]})]})]})})]})}function fM({userCompany:e}){const[t,n]=j.useState([]),[i,r]=j.useState([]),[a,c]=j.useState(""),[h,g]=j.useState(""),[p,y]=j.useState(!1),[w,E]=j.useState(!0),[A,O]=j.useState({event_id:"",name:"",email:"",phone:"",identification_number:"",staff_id:""});j.useEffect(()=>{I()},[]),j.useEffect(()=>{a?B():T()},[a]);const I=async()=>{try{let D=ue.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(D=D.eq("company_id",e.company_id));const{data:L,error:F}=await D.order("created_at",{ascending:!1});if(F)throw F;r(L),e&&L&&L.length>0&&c(L[0].id)}catch(D){oe.error("Error fetching events: "+D.message)}},B=async()=>{try{E(!0);let D=ue.from("attendees").select(`
          *,
          event:events(
            name,
            company:companies(name)
          )
        `);if(a)D=D.eq("event_id",a);else if(e){const U=i.map(Y=>Y.id);U.length>0&&(D=D.in("event_id",U))}const{data:L,error:F}=await D.order("created_at",{ascending:!1});if(F)throw F;n(L)}catch(D){oe.error("Error fetching attendees: "+D.message)}finally{E(!1)}},T=async()=>{try{E(!0);let D=ue.from("attendees").select(`
          *,
          event:events(
            name,
            company:companies(name)
          )
        `);if(e){const U=i.map(Y=>Y.id);U.length>0&&(D=D.in("event_id",U))}const{data:L,error:F}=await D.order("created_at",{ascending:!1});if(F)throw F;n(L)}catch(D){oe.error("Error fetching attendees: "+D.message)}finally{E(!1)}},N=async D=>{if(D.preventDefault(),!(!A.name.trim()||!A.event_id))try{const L=crypto.randomUUID(),F=`${L}|${A.event_id}|${A.name}`,U=await Xi.toDataURL(F,{width:200,margin:1,errorCorrectionLevel:"L"}),{error:Y}=await ue.from("attendees").insert([{id:L,event_id:A.event_id,name:A.name,email:A.email||null,phone:A.phone||null,identification_number:A.identification_number,staff_id:A.staff_id||null,qr_code:U}]);if(Y)throw Y;oe.success("Attendee added successfully!"),C(),a?B():T()}catch(L){oe.error("Error adding attendee: "+L.message)}},C=()=>{O({event_id:a,name:"",email:"",phone:"",identification_number:"",staff_id:""}),y(!1)},k=()=>{var Y;const D=[["Name","Email","Phone","Event","Checked In","Check-in Time"],...z.map(J=>[J.name,J.email||"",J.phone||"",J.event.name,J.checked_in?"Yes":"No",J.check_in_time?new Date(J.check_in_time).toLocaleString():""])].map(J=>J.join(",")).join(`
`),L=new Blob([D],{type:"text/csv"}),F=window.URL.createObjectURL(L),U=document.createElement("a");U.href=F,U.download=`attendees-${a?(Y=i.find(J=>J.id===a))==null?void 0:Y.name:"all"}-${new Date().toISOString().split("T")[0]}.csv`,U.click(),window.URL.revokeObjectURL(F)},z=t.filter(D=>D.name.toLowerCase().includes(h.toLowerCase())||D.email&&D.email.toLowerCase().includes(h.toLowerCase())||D.identification_number&&D.identification_number.toLowerCase().includes(h.toLowerCase())||D.staff_id&&D.staff_id.toLowerCase().includes(h.toLowerCase()));return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendee Management"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage event attendees and registrations"})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs("button",{onClick:k,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center",children:[m.jsx(gE,{className:"h-5 w-5 mr-2"}),"Export CSV"]}),m.jsxs("button",{onClick:()=>{O({...A,event_id:a}),y(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[m.jsx(s1,{className:"h-5 w-5 mr-2"}),"Add Attendee"]})]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[!e&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Event"}),m.jsxs("select",{value:a,onChange:D=>c(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"All Events"}),i.map(D=>m.jsxs("option",{value:D.id,children:[D.name," (",D.company.name,")"]},D.id))]})]}),e&&i.length>1&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),m.jsx("select",{value:a,onChange:D=>c(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:i.map(D=>m.jsx("option",{value:D.id,children:D.name},D.id))})]}),m.jsxs("div",{className:e&&i.length<=1?"md:col-span-2":"",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Attendees"}),m.jsxs("div",{className:"relative",children:[m.jsx(a5,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),m.jsx("input",{type:"text",value:h,onChange:D=>g(D.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search by name, email, ID number, or staff ID"})]})]})]})}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[w?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendee"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Identification"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Event"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(D=>m.jsxs("tr",{className:"hover:bg-gray-50",children:[m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.name}),D.staff_id&&m.jsxs("div",{className:"text-sm text-gray-500",children:["Staff: ",D.staff_id]})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.identification_number})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{children:[m.jsx("div",{className:"text-sm font-medium text-gray-900",children:D.event.name}),m.jsx("div",{className:"text-sm text-gray-500",children:D.event.company.name})]})}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:m.jsxs("div",{className:"text-sm text-gray-900",children:[D.email&&m.jsx("div",{children:D.email}),D.phone&&m.jsx("div",{children:D.phone})]})}),m.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[m.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${D.checked_in?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:D.checked_in?"Checked In":"Registered"}),D.check_in_time&&m.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(D.check_in_time).toLocaleString()})]}),m.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:m.jsxs("button",{onClick:()=>window.open(`/public/ticket/${D.id}`,"_blank"),className:"text-blue-600 hover:text-blue-900 flex items-center",children:[m.jsx(dr,{className:"h-4 w-4 mr-1"}),"View Ticket"]})})]},D.id))})]})}),z.length===0&&!w&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(fn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No attendees found"}),m.jsx("p",{className:"text-gray-600 mb-4",children:h?"No attendees match your search criteria":"No attendees registered yet"})]})]}),p&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add New Attendee"}),m.jsxs("form",{onSubmit:N,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event *"}),m.jsxs("select",{value:A.event_id,onChange:D=>O({...A,event_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[m.jsx("option",{value:"",children:"Select an event"}),i.map(D=>m.jsx("option",{value:D.id,children:e?D.name:`${D.name} (${D.company.name})`},D.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),m.jsx("input",{type:"text",value:A.name,onChange:D=>O({...A,name:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter full name",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Identification Number *"}),m.jsx("input",{type:"text",value:A.identification_number,onChange:D=>O({...A,identification_number:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter identification number",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff ID"}),m.jsx("input",{type:"text",value:A.staff_id,onChange:D=>O({...A,staff_id:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter staff ID (optional)"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email"}),m.jsx("input",{type:"email",value:A.email,onChange:D=>O({...A,email:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter email"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),m.jsx("input",{type:"tel",value:A.phone,onChange:D=>O({...A,phone:D.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter phone number"})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx("button",{type:"button",onClick:C,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Add Attendee"})]})]})]})})]})}var ge;(function(e){e[e.QR_CODE=0]="QR_CODE",e[e.AZTEC=1]="AZTEC",e[e.CODABAR=2]="CODABAR",e[e.CODE_39=3]="CODE_39",e[e.CODE_93=4]="CODE_93",e[e.CODE_128=5]="CODE_128",e[e.DATA_MATRIX=6]="DATA_MATRIX",e[e.MAXICODE=7]="MAXICODE",e[e.ITF=8]="ITF",e[e.EAN_13=9]="EAN_13",e[e.EAN_8=10]="EAN_8",e[e.PDF_417=11]="PDF_417",e[e.RSS_14=12]="RSS_14",e[e.RSS_EXPANDED=13]="RSS_EXPANDED",e[e.UPC_A=14]="UPC_A",e[e.UPC_E=15]="UPC_E",e[e.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ge||(ge={}));var ny=new Map([[ge.QR_CODE,"QR_CODE"],[ge.AZTEC,"AZTEC"],[ge.CODABAR,"CODABAR"],[ge.CODE_39,"CODE_39"],[ge.CODE_93,"CODE_93"],[ge.CODE_128,"CODE_128"],[ge.DATA_MATRIX,"DATA_MATRIX"],[ge.MAXICODE,"MAXICODE"],[ge.ITF,"ITF"],[ge.EAN_13,"EAN_13"],[ge.EAN_8,"EAN_8"],[ge.PDF_417,"PDF_417"],[ge.RSS_14,"RSS_14"],[ge.RSS_EXPANDED,"RSS_EXPANDED"],[ge.UPC_A,"UPC_A"],[ge.UPC_E,"UPC_E"],[ge.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),iy;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.URL=1]="URL"})(iy||(iy={}));function mM(e){return Object.values(ge).includes(e)}var fr;(function(e){e[e.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",e[e.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(fr||(fr={}));var Ei=function(){function e(){}return e.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",e.SCAN_DEFAULT_FPS=2,e.DEFAULT_DISABLE_FLIP=!1,e.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,e.DEFAULT_SUPPORTED_SCAN_TYPE=[fr.SCAN_TYPE_CAMERA,fr.SCAN_TYPE_FILE],e}(),kE=function(){function e(t,n){this.format=t,this.formatName=n}return e.prototype.toString=function(){return this.formatName},e.create=function(t){if(!ny.has(t))throw"".concat(t," not in html5QrcodeSupportedFormatsTextMap");return new e(t,ny.get(t))},e}(),sy=function(){function e(){}return e.createFromText=function(t){var n={text:t};return{decodedText:t,result:n}},e.createFromQrcodeResult=function(t){return{decodedText:t.text,result:t}},e}(),c1;(function(e){e[e.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",e[e.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",e[e.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(c1||(c1={}));var LE=function(){function e(){}return e.createFrom=function(t){return{errorMessage:t,type:c1.UNKWOWN_ERROR}},e}(),BE=function(){function e(t){this.verbose=t}return e.prototype.log=function(t){this.verbose&&console.log(t)},e.prototype.warn=function(t){this.verbose&&console.warn(t)},e.prototype.logError=function(t,n){(this.verbose||n===!0)&&console.error(t)},e.prototype.logErrors=function(t){if(t.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(t)},e}();function Li(e){return typeof e>"u"||e===null}function gM(e,t,n){return e>n?n:e<t?t:e}var Ha=function(){function e(){}return e.codeParseError=function(t){return"QR code parse error, error = ".concat(t)},e.errorGettingUserMedia=function(t){return"Error getting userMedia, error = ".concat(t)},e.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},e.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},e.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},e.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},e.scannerPaused=function(){return"Scanner paused"},e}(),Ze=function(){function e(){}return e.scanningStatus=function(){return"Scanning"},e.idleStatus=function(){return"Idle"},e.errorStatus=function(){return"Error"},e.permissionStatus=function(){return"Permission"},e.noCameraFoundErrorStatus=function(){return"No Cameras"},e.lastMatch=function(t){return"Last Match: ".concat(t)},e.codeScannerTitle=function(){return"Code Scanner"},e.cameraPermissionTitle=function(){return"Request Camera Permissions"},e.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},e.noCameraFound=function(){return"No camera found"},e.scanButtonStopScanningText=function(){return"Stop Scanning"},e.scanButtonStartScanningText=function(){return"Start Scanning"},e.torchOnButton=function(){return"Switch On Torch"},e.torchOffButton=function(){return"Switch Off Torch"},e.torchOnFailedMessage=function(){return"Failed to turn on torch"},e.torchOffFailedMessage=function(){return"Failed to turn off torch"},e.scanButtonScanningStarting=function(){return"Launching Camera..."},e.textIfCameraScanSelected=function(){return"Scan an Image File"},e.textIfFileScanSelected=function(){return"Scan using camera directly"},e.selectCamera=function(){return"Select Camera"},e.fileSelectionChooseImage=function(){return"Choose Image"},e.fileSelectionChooseAnother=function(){return"Choose Another"},e.fileSelectionNoImageSelected=function(){return"No image choosen"},e.anonymousCameraPrefix=function(){return"Anonymous Camera"},e.dragAndDropMessage=function(){return"Or drop an image to scan"},e.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},e.zoom=function(){return"zoom"},e.loadingImage=function(){return"Loading image..."},e.cameraScanAltText=function(){return"Camera based scan"},e.fileScanAltText=function(){return"Fule based scan"},e}(),ry=function(){function e(){}return e.poweredBy=function(){return"Powered by "},e.reportIssues=function(){return"Report issues"},e}(),PE=function(){function e(){}return e.isMediaStreamConstraintsValid=function(t,n){if(typeof t!="object"){var i=typeof t;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var r=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],a=new Set(r),c=Object.keys(t),h=0,g=c;h<g.length;h++){var p=g[h];if(a.has(p))return n.logError("".concat(p," is not supported videoConstaints."),!0),!1}return!0},e}(),u1={exports:{}};(function(e,t){(function(n,i){i(t)})(sn,function(n){function i(_){return _==null}var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,s){_.__proto__=s}||function(_,s){for(var o in s)s.hasOwnProperty(o)&&(_[o]=s[o])};function a(_,s){r(_,s);function o(){this.constructor=_}_.prototype=s===null?Object.create(s):(o.prototype=s.prototype,new o)}function c(_,s){var o=Object.setPrototypeOf;o?o(_,s):_.__proto__=s}function h(_,s){s===void 0&&(s=_.constructor);var o=Error.captureStackTrace;o&&o(_,s)}var g=function(_){a(s,_);function s(o){var l=this.constructor,u=_.call(this,o)||this;return Object.defineProperty(u,"name",{value:l.name,enumerable:!1}),c(u,l.prototype),h(u),u}return s}(Error);class p extends g{constructor(s=void 0){super(s),this.message=s}getKind(){return this.constructor.kind}}p.kind="Exception";class y extends p{}y.kind="ArgumentException";class w extends p{}w.kind="IllegalArgumentException";class E{constructor(s){if(this.binarizer=s,s===null)throw new w("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(s,o){return this.binarizer.getBlackRow(s,o)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(s,o,l,u){const d=this.binarizer.getLuminanceSource().crop(s,o,l,u);return new E(this.binarizer.createBinarizer(d))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new E(this.binarizer.createBinarizer(s))}rotateCounterClockwise45(){const s=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new E(this.binarizer.createBinarizer(s))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class A extends p{static getChecksumInstance(){return new A}}A.kind="ChecksumException";class O{constructor(s){this.source=s}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class I{static arraycopy(s,o,l,u,d){for(;d--;)l[u++]=s[o++]}static currentTimeMillis(){return Date.now()}}class B extends p{}B.kind="IndexOutOfBoundsException";class T extends B{constructor(s=void 0,o=void 0){super(o),this.index=s,this.message=o}}T.kind="ArrayIndexOutOfBoundsException";class N{static fill(s,o){for(let l=0,u=s.length;l<u;l++)s[l]=o}static fillWithin(s,o,l,u){N.rangeCheck(s.length,o,l);for(let d=o;d<l;d++)s[d]=u}static rangeCheck(s,o,l){if(o>l)throw new w("fromIndex("+o+") > toIndex("+l+")");if(o<0)throw new T(o);if(l>s)throw new T(l)}static asList(...s){return s}static create(s,o,l){return Array.from({length:s}).map(d=>Array.from({length:o}).fill(l))}static createInt32Array(s,o,l){return Array.from({length:s}).map(d=>Int32Array.from({length:o}).fill(l))}static equals(s,o){if(!s||!o||!s.length||!o.length||s.length!==o.length)return!1;for(let l=0,u=s.length;l<u;l++)if(s[l]!==o[l])return!1;return!0}static hashCode(s){if(s===null)return 0;let o=1;for(const l of s)o=31*o+l;return o}static fillUint8Array(s,o){for(let l=0;l!==s.length;l++)s[l]=o}static copyOf(s,o){return s.slice(0,o)}static copyOfUint8Array(s,o){if(s.length<=o){const l=new Uint8Array(o);return l.set(s),l}return s.slice(0,o)}static copyOfRange(s,o,l){const u=l-o,d=new Int32Array(u);return I.arraycopy(s,o,d,0,u),d}static binarySearch(s,o,l){l===void 0&&(l=N.numberComparator);let u=0,d=s.length-1;for(;u<=d;){const f=d+u>>1,x=l(o,s[f]);if(x>0)u=f+1;else if(x<0)d=f-1;else return f}return-u-1}static numberComparator(s,o){return s-o}}class C{static numberOfTrailingZeros(s){let o;if(s===0)return 32;let l=31;return o=s<<16,o!==0&&(l-=16,s=o),o=s<<8,o!==0&&(l-=8,s=o),o=s<<4,o!==0&&(l-=4,s=o),o=s<<2,o!==0&&(l-=2,s=o),l-(s<<1>>>31)}static numberOfLeadingZeros(s){if(s===0)return 32;let o=1;return s>>>16||(o+=16,s<<=16),s>>>24||(o+=8,s<<=8),s>>>28||(o+=4,s<<=4),s>>>30||(o+=2,s<<=2),o-=s>>>31,o}static toHexString(s){return s.toString(16)}static toBinaryString(s){return String(parseInt(String(s),2))}static bitCount(s){return s=s-(s>>>1&1431655765),s=(s&858993459)+(s>>>2&858993459),s=s+(s>>>4)&252645135,s=s+(s>>>8),s=s+(s>>>16),s&63}static truncDivision(s,o){return Math.trunc(s/o)}static parseInt(s,o=void 0){return parseInt(s,o)}}C.MIN_VALUE_32_BITS=-2147483648,C.MAX_VALUE=Number.MAX_SAFE_INTEGER;class k{constructor(s,o){s===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=s,o==null?this.bits=k.makeArray(s):this.bits=o)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(s){if(s>this.bits.length*32){const o=k.makeArray(s);I.arraycopy(this.bits,0,o,0,this.bits.length),this.bits=o}}get(s){return(this.bits[Math.floor(s/32)]&1<<(s&31))!==0}set(s){this.bits[Math.floor(s/32)]|=1<<(s&31)}flip(s){this.bits[Math.floor(s/32)]^=1<<(s&31)}getNextSet(s){const o=this.size;if(s>=o)return o;const l=this.bits;let u=Math.floor(s/32),d=l[u];d&=~((1<<(s&31))-1);const f=l.length;for(;d===0;){if(++u===f)return o;d=l[u]}const x=u*32+C.numberOfTrailingZeros(d);return x>o?o:x}getNextUnset(s){const o=this.size;if(s>=o)return o;const l=this.bits;let u=Math.floor(s/32),d=~l[u];d&=~((1<<(s&31))-1);const f=l.length;for(;d===0;){if(++u===f)return o;d=~l[u]}const x=u*32+C.numberOfTrailingZeros(d);return x>o?o:x}setBulk(s,o){this.bits[Math.floor(s/32)]=o}setRange(s,o){if(o<s||s<0||o>this.size)throw new w;if(o===s)return;o--;const l=Math.floor(s/32),u=Math.floor(o/32),d=this.bits;for(let f=l;f<=u;f++){const x=f>l?0:s&31,v=(2<<(f<u?31:o&31))-(1<<x);d[f]|=v}}clear(){const s=this.bits.length,o=this.bits;for(let l=0;l<s;l++)o[l]=0}isRange(s,o,l){if(o<s||s<0||o>this.size)throw new w;if(o===s)return!0;o--;const u=Math.floor(s/32),d=Math.floor(o/32),f=this.bits;for(let x=u;x<=d;x++){const b=x>u?0:s&31,S=(2<<(x<d?31:o&31))-(1<<b)&4294967295;if((f[x]&S)!==(l?S:0))return!1}return!0}appendBit(s){this.ensureCapacity(this.size+1),s&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(s,o){if(o<0||o>32)throw new w("Num bits must be between 0 and 32");this.ensureCapacity(this.size+o);for(let l=o;l>0;l--)this.appendBit((s>>l-1&1)===1)}appendBitArray(s){const o=s.size;this.ensureCapacity(this.size+o);for(let l=0;l<o;l++)this.appendBit(s.get(l))}xor(s){if(this.size!==s.size)throw new w("Sizes don't match");const o=this.bits;for(let l=0,u=o.length;l<u;l++)o[l]^=s.bits[l]}toBytes(s,o,l,u){for(let d=0;d<u;d++){let f=0;for(let x=0;x<8;x++)this.get(s)&&(f|=1<<7-x),s++;o[l+d]=f}}getBitArray(){return this.bits}reverse(){const s=new Int32Array(this.bits.length),o=Math.floor((this.size-1)/32),l=o+1,u=this.bits;for(let d=0;d<l;d++){let f=u[d];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,s[o-d]=f}if(this.size!==l*32){const d=l*32-this.size;let f=s[0]>>>d;for(let x=1;x<l;x++){const b=s[x];f|=b<<32-d,s[x-1]=f,f=b>>>d}s[l-1]=f}this.bits=s}static makeArray(s){return new Int32Array(Math.floor((s+31)/32))}equals(s){if(!(s instanceof k))return!1;const o=s;return this.size===o.size&&N.equals(this.bits,o.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let s="";for(let o=0,l=this.size;o<l;o++)o&7||(s+=" "),s+=this.get(o)?"X":".";return s}clone(){return new k(this.size,this.bits.slice())}}var z;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(z||(z={}));var D=z;class L extends p{static getFormatInstance(){return new L}}L.kind="FormatException";var F;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(F||(F={}));class U{constructor(s,o,l,...u){this.valueIdentifier=s,this.name=l,typeof o=="number"?this.values=Int32Array.from([o]):this.values=o,this.otherEncodingNames=u,U.VALUE_IDENTIFIER_TO_ECI.set(s,this),U.NAME_TO_ECI.set(l,this);const d=this.values;for(let f=0,x=d.length;f!==x;f++){const b=d[f];U.VALUES_TO_ECI.set(b,this)}for(const f of u)U.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(s){if(s<0||s>=900)throw new L("incorect value");const o=U.VALUES_TO_ECI.get(s);if(o===void 0)throw new L("incorect value");return o}static getCharacterSetECIByName(s){const o=U.NAME_TO_ECI.get(s);if(o===void 0)throw new L("incorect value");return o}equals(s){if(!(s instanceof U))return!1;const o=s;return this.getName()===o.getName()}}U.VALUE_IDENTIFIER_TO_ECI=new Map,U.VALUES_TO_ECI=new Map,U.NAME_TO_ECI=new Map,U.Cp437=new U(F.Cp437,Int32Array.from([0,2]),"Cp437"),U.ISO8859_1=new U(F.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),U.ISO8859_2=new U(F.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),U.ISO8859_3=new U(F.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),U.ISO8859_4=new U(F.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),U.ISO8859_5=new U(F.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),U.ISO8859_6=new U(F.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),U.ISO8859_7=new U(F.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),U.ISO8859_8=new U(F.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),U.ISO8859_9=new U(F.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),U.ISO8859_10=new U(F.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),U.ISO8859_11=new U(F.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),U.ISO8859_13=new U(F.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),U.ISO8859_14=new U(F.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),U.ISO8859_15=new U(F.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),U.ISO8859_16=new U(F.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),U.SJIS=new U(F.SJIS,20,"SJIS","Shift_JIS"),U.Cp1250=new U(F.Cp1250,21,"Cp1250","windows-1250"),U.Cp1251=new U(F.Cp1251,22,"Cp1251","windows-1251"),U.Cp1252=new U(F.Cp1252,23,"Cp1252","windows-1252"),U.Cp1256=new U(F.Cp1256,24,"Cp1256","windows-1256"),U.UnicodeBigUnmarked=new U(F.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),U.UTF8=new U(F.UTF8,26,"UTF8","UTF-8"),U.ASCII=new U(F.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),U.Big5=new U(F.Big5,28,"Big5"),U.GB18030=new U(F.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),U.EUC_KR=new U(F.EUC_KR,30,"EUC_KR","EUC-KR");class Y extends p{}Y.kind="UnsupportedOperationException";class J{static decode(s,o){const l=this.encodingName(o);return this.customDecoder?this.customDecoder(s,l):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(l)?this.decodeFallback(s,l):new TextDecoder(l).decode(s)}static shouldDecodeOnFallback(s){return!J.isBrowser()&&s==="ISO-8859-1"}static encode(s,o){const l=this.encodingName(o);return this.customEncoder?this.customEncoder(s,l):typeof TextEncoder>"u"?this.encodeFallback(s):new TextEncoder().encode(s)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(s){return typeof s=="string"?s:s.getName()}static encodingCharacterSet(s){return s instanceof U?s:U.getCharacterSetECIByName(s)}static decodeFallback(s,o){const l=this.encodingCharacterSet(o);if(J.isDecodeFallbackSupported(l)){let u="";for(let d=0,f=s.length;d<f;d++){let x=s[d].toString(16);x.length<2&&(x="0"+x),u+="%"+x}return decodeURIComponent(u)}if(l.equals(U.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(s.buffer));throw new Y(`Encoding ${this.encodingName(o)} not supported by fallback.`)}static isDecodeFallbackSupported(s){return s.equals(U.UTF8)||s.equals(U.ISO8859_1)||s.equals(U.ASCII)}static encodeFallback(s){const l=btoa(unescape(encodeURIComponent(s))).split(""),u=[];for(let d=0;d<l.length;d++)u.push(l[d].charCodeAt(0));return new Uint8Array(u)}}class ee{static castAsNonUtf8Char(s,o=null){const l=o?o.getName():this.ISO88591;return J.decode(new Uint8Array([s]),l)}static guessEncoding(s,o){if(o!=null&&o.get(D.CHARACTER_SET)!==void 0)return o.get(D.CHARACTER_SET).toString();const l=s.length;let u=!0,d=!0,f=!0,x=0,b=0,v=0,S=0,M=0,R=0,V=0,H=0,G=0,q=0,Q=0;const le=s.length>3&&s[0]===239&&s[1]===187&&s[2]===191;for(let ce=0;ce<l&&(u||d||f);ce++){const re=s[ce]&255;f&&(x>0?re&128?x--:f=!1:re&128&&(re&64?(x++,re&32?(x++,re&16?(x++,re&8?f=!1:S++):v++):b++):f=!1)),u&&(re>127&&re<160?u=!1:re>159&&(re<192||re===215||re===247)&&Q++),d&&(M>0?re<64||re===127||re>252?d=!1:M--:re===128||re===160||re>239?d=!1:re>160&&re<224?(R++,H=0,V++,V>G&&(G=V)):re>127?(M++,V=0,H++,H>q&&(q=H)):(V=0,H=0))}return f&&x>0&&(f=!1),d&&M>0&&(d=!1),f&&(le||b+v+S>0)?ee.UTF8:d&&(ee.ASSUME_SHIFT_JIS||G>=3||q>=3)?ee.SHIFT_JIS:u&&d?G===2&&R===2||Q*10>=l?ee.SHIFT_JIS:ee.ISO88591:u?ee.ISO88591:d?ee.SHIFT_JIS:f?ee.UTF8:ee.PLATFORM_DEFAULT_ENCODING}static format(s,...o){let l=-1;function u(f,x,b,v,S,M){if(f==="%%")return"%";if(o[++l]===void 0)return;f=v?parseInt(v.substr(1)):void 0;let R=S?parseInt(S.substr(1)):void 0,V;switch(M){case"s":V=o[l];break;case"c":V=o[l][0];break;case"f":V=parseFloat(o[l]).toFixed(f);break;case"p":V=parseFloat(o[l]).toPrecision(f);break;case"e":V=parseFloat(o[l]).toExponential(f);break;case"x":V=parseInt(o[l]).toString(R||16);break;case"d":V=parseFloat(parseInt(o[l],R||10).toPrecision(f)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(R);let H=parseInt(b),G=b&&b[0]+""=="0"?"0":" ";for(;V.length<H;)V=x!==void 0?V+G:G+V;return V}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}static getBytes(s,o){return J.encode(s,o)}static getCharCode(s,o=0){return s.charCodeAt(o)}static getCharAt(s){return String.fromCharCode(s)}}ee.SHIFT_JIS=U.SJIS.getName(),ee.GB2312="GB2312",ee.ISO88591=U.ISO8859_1.getName(),ee.EUC_JP="EUC_JP",ee.UTF8=U.UTF8.getName(),ee.PLATFORM_DEFAULT_ENCODING=ee.UTF8,ee.ASSUME_SHIFT_JIS=!1;class de{constructor(s=""){this.value=s}enableDecoding(s){return this.encoding=s,this}append(s){return typeof s=="string"?this.value+=s.toString():this.encoding?this.value+=ee.castAsNonUtf8Char(s,this.encoding):this.value+=String.fromCharCode(s),this}appendChars(s,o,l){for(let u=o;o<o+l;u++)this.append(s[u]);return this}length(){return this.value.length}charAt(s){return this.value.charAt(s)}deleteCharAt(s){this.value=this.value.substr(0,s)+this.value.substring(s+1)}setCharAt(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+1)}substring(s,o){return this.value.substring(s,o)}setLengthToZero(){this.value=""}toString(){return this.value}insert(s,o){this.value=this.value.substr(0,s)+o+this.value.substr(s+o.length)}}class be{constructor(s,o,l,u){if(this.width=s,this.height=o,this.rowSize=l,this.bits=u,o==null&&(o=s),this.height=o,s<1||o<1)throw new w("Both dimensions must be greater than 0");l==null&&(l=Math.floor((s+31)/32)),this.rowSize=l,u==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(s){const o=s.length,l=s[0].length,u=new be(l,o);for(let d=0;d<o;d++){const f=s[d];for(let x=0;x<l;x++)f[x]&&u.set(x,d)}return u}static parseFromString(s,o,l){if(s===null)throw new w("stringRepresentation cannot be null");const u=new Array(s.length);let d=0,f=0,x=-1,b=0,v=0;for(;v<s.length;)if(s.charAt(v)===`
`||s.charAt(v)==="\r"){if(d>f){if(x===-1)x=d-f;else if(d-f!==x)throw new w("row lengths do not match");f=d,b++}v++}else if(s.substring(v,v+o.length)===o)v+=o.length,u[d]=!0,d++;else if(s.substring(v,v+l.length)===l)v+=l.length,u[d]=!1,d++;else throw new w("illegal character encountered: "+s.substring(v));if(d>f){if(x===-1)x=d-f;else if(d-f!==x)throw new w("row lengths do not match");b++}const S=new be(x,b);for(let M=0;M<d;M++)u[M]&&S.set(Math.floor(M%x),Math.floor(M/x));return S}get(s,o){const l=o*this.rowSize+Math.floor(s/32);return(this.bits[l]>>>(s&31)&1)!==0}set(s,o){const l=o*this.rowSize+Math.floor(s/32);this.bits[l]|=1<<(s&31)&4294967295}unset(s,o){const l=o*this.rowSize+Math.floor(s/32);this.bits[l]&=~(1<<(s&31)&4294967295)}flip(s,o){const l=o*this.rowSize+Math.floor(s/32);this.bits[l]^=1<<(s&31)&4294967295}xor(s){if(this.width!==s.getWidth()||this.height!==s.getHeight()||this.rowSize!==s.getRowSize())throw new w("input matrix dimensions do not match");const o=new k(Math.floor(this.width/32)+1),l=this.rowSize,u=this.bits;for(let d=0,f=this.height;d<f;d++){const x=d*l,b=s.getRow(d,o).getBitArray();for(let v=0;v<l;v++)u[x+v]^=b[v]}}clear(){const s=this.bits,o=s.length;for(let l=0;l<o;l++)s[l]=0}setRegion(s,o,l,u){if(o<0||s<0)throw new w("Left and top must be nonnegative");if(u<1||l<1)throw new w("Height and width must be at least 1");const d=s+l,f=o+u;if(f>this.height||d>this.width)throw new w("The region must fit inside the matrix");const x=this.rowSize,b=this.bits;for(let v=o;v<f;v++){const S=v*x;for(let M=s;M<d;M++)b[S+Math.floor(M/32)]|=1<<(M&31)&4294967295}}getRow(s,o){o==null||o.getSize()<this.width?o=new k(this.width):o.clear();const l=this.rowSize,u=this.bits,d=s*l;for(let f=0;f<l;f++)o.setBulk(f*32,u[d+f]);return o}setRow(s,o){I.arraycopy(o.getBitArray(),0,this.bits,s*this.rowSize,this.rowSize)}rotate180(){const s=this.getWidth(),o=this.getHeight();let l=new k(s),u=new k(s);for(let d=0,f=Math.floor((o+1)/2);d<f;d++)l=this.getRow(d,l),u=this.getRow(o-1-d,u),l.reverse(),u.reverse(),this.setRow(d,u),this.setRow(o-1-d,l)}getEnclosingRectangle(){const s=this.width,o=this.height,l=this.rowSize,u=this.bits;let d=s,f=o,x=-1,b=-1;for(let v=0;v<o;v++)for(let S=0;S<l;S++){const M=u[v*l+S];if(M!==0){if(v<f&&(f=v),v>b&&(b=v),S*32<d){let R=0;for(;!(M<<31-R&4294967295);)R++;S*32+R<d&&(d=S*32+R)}if(S*32+31>x){let R=31;for(;!(M>>>R);)R--;S*32+R>x&&(x=S*32+R)}}}return x<d||b<f?null:Int32Array.from([d,f,x-d+1,b-f+1])}getTopLeftOnBit(){const s=this.rowSize,o=this.bits;let l=0;for(;l<o.length&&o[l]===0;)l++;if(l===o.length)return null;const u=l/s;let d=l%s*32;const f=o[l];let x=0;for(;!(f<<31-x&4294967295);)x++;return d+=x,Int32Array.from([d,u])}getBottomRightOnBit(){const s=this.rowSize,o=this.bits;let l=o.length-1;for(;l>=0&&o[l]===0;)l--;if(l<0)return null;const u=Math.floor(l/s);let d=Math.floor(l%s)*32;const f=o[l];let x=31;for(;!(f>>>x);)x--;return d+=x,Int32Array.from([d,u])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(s){if(!(s instanceof be))return!1;const o=s;return this.width===o.width&&this.height===o.height&&this.rowSize===o.rowSize&&N.equals(this.bits,o.bits)}hashCode(){let s=this.width;return s=31*s+this.width,s=31*s+this.height,s=31*s+this.rowSize,s=31*s+N.hashCode(this.bits),s}toString(s="X ",o="  ",l=`
`){return this.buildToString(s,o,l)}buildToString(s,o,l){let u=new de;for(let d=0,f=this.height;d<f;d++){for(let x=0,b=this.width;x<b;x++)u.append(this.get(x,d)?s:o);u.append(l)}return u.toString()}clone(){return new be(this.width,this.height,this.rowSize,this.bits.slice())}}class Z extends p{static getNotFoundInstance(){return new Z}}Z.kind="NotFoundException";class ie extends O{constructor(s){super(s),this.luminances=ie.EMPTY,this.buckets=new Int32Array(ie.LUMINANCE_BUCKETS)}getBlackRow(s,o){const l=this.getLuminanceSource(),u=l.getWidth();o==null||o.getSize()<u?o=new k(u):o.clear(),this.initArrays(u);const d=l.getRow(s,this.luminances),f=this.buckets;for(let b=0;b<u;b++)f[(d[b]&255)>>ie.LUMINANCE_SHIFT]++;const x=ie.estimateBlackPoint(f);if(u<3)for(let b=0;b<u;b++)(d[b]&255)<x&&o.set(b);else{let b=d[0]&255,v=d[1]&255;for(let S=1;S<u-1;S++){const M=d[S+1]&255;(v*4-b-M)/2<x&&o.set(S),b=v,v=M}}return o}getBlackMatrix(){const s=this.getLuminanceSource(),o=s.getWidth(),l=s.getHeight(),u=new be(o,l);this.initArrays(o);const d=this.buckets;for(let b=1;b<5;b++){const v=Math.floor(l*b/5),S=s.getRow(v,this.luminances),M=Math.floor(o*4/5);for(let R=Math.floor(o/5);R<M;R++){const V=S[R]&255;d[V>>ie.LUMINANCE_SHIFT]++}}const f=ie.estimateBlackPoint(d),x=s.getMatrix();for(let b=0;b<l;b++){const v=b*o;for(let S=0;S<o;S++)(x[v+S]&255)<f&&u.set(S,b)}return u}createBinarizer(s){return new ie(s)}initArrays(s){this.luminances.length<s&&(this.luminances=new Uint8ClampedArray(s));const o=this.buckets;for(let l=0;l<ie.LUMINANCE_BUCKETS;l++)o[l]=0}static estimateBlackPoint(s){const o=s.length;let l=0,u=0,d=0;for(let S=0;S<o;S++)s[S]>d&&(u=S,d=s[S]),s[S]>l&&(l=s[S]);let f=0,x=0;for(let S=0;S<o;S++){const M=S-u,R=s[S]*M*M;R>x&&(f=S,x=R)}if(u>f){const S=u;u=f,f=S}if(f-u<=o/16)throw new Z;let b=f-1,v=-1;for(let S=f-1;S>u;S--){const M=S-u,R=M*M*(f-S)*(l-s[S]);R>v&&(b=S,v=R)}return b<<ie.LUMINANCE_SHIFT}}ie.LUMINANCE_BITS=5,ie.LUMINANCE_SHIFT=8-ie.LUMINANCE_BITS,ie.LUMINANCE_BUCKETS=1<<ie.LUMINANCE_BITS,ie.EMPTY=Uint8ClampedArray.from([0]);class se extends ie{constructor(s){super(s),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const s=this.getLuminanceSource(),o=s.getWidth(),l=s.getHeight();if(o>=se.MINIMUM_DIMENSION&&l>=se.MINIMUM_DIMENSION){const u=s.getMatrix();let d=o>>se.BLOCK_SIZE_POWER;o&se.BLOCK_SIZE_MASK&&d++;let f=l>>se.BLOCK_SIZE_POWER;l&se.BLOCK_SIZE_MASK&&f++;const x=se.calculateBlackPoints(u,d,f,o,l),b=new be(o,l);se.calculateThresholdForBlock(u,d,f,o,l,x,b),this.matrix=b}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(s){return new se(s)}static calculateThresholdForBlock(s,o,l,u,d,f,x){const b=d-se.BLOCK_SIZE,v=u-se.BLOCK_SIZE;for(let S=0;S<l;S++){let M=S<<se.BLOCK_SIZE_POWER;M>b&&(M=b);const R=se.cap(S,2,l-3);for(let V=0;V<o;V++){let H=V<<se.BLOCK_SIZE_POWER;H>v&&(H=v);const G=se.cap(V,2,o-3);let q=0;for(let le=-2;le<=2;le++){const ce=f[R+le];q+=ce[G-2]+ce[G-1]+ce[G]+ce[G+1]+ce[G+2]}const Q=q/25;se.thresholdBlock(s,H,M,Q,u,x)}}}static cap(s,o,l){return s<o?o:s>l?l:s}static thresholdBlock(s,o,l,u,d,f){for(let x=0,b=l*d+o;x<se.BLOCK_SIZE;x++,b+=d)for(let v=0;v<se.BLOCK_SIZE;v++)(s[b+v]&255)<=u&&f.set(o+v,l+x)}static calculateBlackPoints(s,o,l,u,d){const f=d-se.BLOCK_SIZE,x=u-se.BLOCK_SIZE,b=new Array(l);for(let v=0;v<l;v++){b[v]=new Int32Array(o);let S=v<<se.BLOCK_SIZE_POWER;S>f&&(S=f);for(let M=0;M<o;M++){let R=M<<se.BLOCK_SIZE_POWER;R>x&&(R=x);let V=0,H=255,G=0;for(let Q=0,le=S*u+R;Q<se.BLOCK_SIZE;Q++,le+=u){for(let ce=0;ce<se.BLOCK_SIZE;ce++){const re=s[le+ce]&255;V+=re,re<H&&(H=re),re>G&&(G=re)}if(G-H>se.MIN_DYNAMIC_RANGE)for(Q++,le+=u;Q<se.BLOCK_SIZE;Q++,le+=u)for(let ce=0;ce<se.BLOCK_SIZE;ce++)V+=s[le+ce]&255}let q=V>>se.BLOCK_SIZE_POWER*2;if(G-H<=se.MIN_DYNAMIC_RANGE&&(q=H/2,v>0&&M>0)){const Q=(b[v-1][M]+2*b[v][M-1]+b[v-1][M-1])/4;H<Q&&(q=Q)}b[v][M]=q}}return b}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class W{constructor(s,o){this.width=s,this.height=o}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(s,o,l,u){throw new Y("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new Y("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new Y("This luminance source does not support rotation by 45 degrees.")}toString(){const s=new Uint8ClampedArray(this.width);let o=new de;for(let l=0;l<this.height;l++){const u=this.getRow(l,s);for(let d=0;d<this.width;d++){const f=u[d]&255;let x;f<64?x="#":f<128?x="+":f<192?x=".":x=" ",o.append(x)}o.append(`
`)}return o.toString()}}class ae extends W{constructor(s){super(s.getWidth(),s.getHeight()),this.delegate=s}getRow(s,o){const l=this.delegate.getRow(s,o),u=this.getWidth();for(let d=0;d<u;d++)l[d]=255-(l[d]&255);return l}getMatrix(){const s=this.delegate.getMatrix(),o=this.getWidth()*this.getHeight(),l=new Uint8ClampedArray(o);for(let u=0;u<o;u++)l[u]=255-(s[u]&255);return l}isCropSupported(){return this.delegate.isCropSupported()}crop(s,o,l,u){return new ae(this.delegate.crop(s,o,l,u))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new ae(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new ae(this.delegate.rotateCounterClockwise45())}}class $ extends W{constructor(s){super(s.width,s.height),this.canvas=s,this.tempCanvasElement=null,this.buffer=$.makeBufferFromCanvasImageData(s)}static makeBufferFromCanvasImageData(s){const o=s.getContext("2d").getImageData(0,0,s.width,s.height);return $.toGrayscaleBuffer(o.data,s.width,s.height)}static toGrayscaleBuffer(s,o,l){const u=new Uint8ClampedArray(o*l);for(let d=0,f=0,x=s.length;d<x;d+=4,f++){let b;if(s[d+3]===0)b=255;else{const S=s[d],M=s[d+1],R=s[d+2];b=306*S+601*M+117*R+512>>10}u[f]=b}return u}getRow(s,o){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth(),u=s*l;return o===null?o=this.buffer.slice(u,u+l):(o.length<l&&(o=new Uint8ClampedArray(l)),o.set(this.buffer.slice(u,u+l))),o}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(s,o,l,u){return super.crop(s,o,l,u),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const s=this.canvas.ownerDocument.createElement("canvas");s.width=this.canvas.width,s.height=this.canvas.height,this.tempCanvasElement=s}return this.tempCanvasElement}rotate(s){const o=this.getTempCanvasElement(),l=o.getContext("2d"),u=s*$.DEGREE_TO_RADIANS,d=this.canvas.width,f=this.canvas.height,x=Math.ceil(Math.abs(Math.cos(u))*d+Math.abs(Math.sin(u))*f),b=Math.ceil(Math.abs(Math.sin(u))*d+Math.abs(Math.cos(u))*f);return o.width=x,o.height=b,l.translate(x/2,b/2),l.rotate(u),l.drawImage(this.canvas,d/-2,f/-2),this.buffer=$.makeBufferFromCanvasImageData(o),this}invert(){return new ae(this)}}$.DEGREE_TO_RADIANS=Math.PI/180;class fe{constructor(s,o,l){this.deviceId=s,this.label=o,this.kind="videoinput",this.groupId=l||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Ae=(globalThis||sn||self||window||void 0)&&(globalThis||sn||self||window||void 0).__awaiter||function(_,s,o,l){function u(d){return d instanceof o?d:new o(function(f){f(d)})}return new(o||(o=Promise))(function(d,f){function x(S){try{v(l.next(S))}catch(M){f(M)}}function b(S){try{v(l.throw(S))}catch(M){f(M)}}function v(S){S.done?d(S.value):u(S.value).then(x,b)}v((l=l.apply(_,s||[])).next())})};class Qe{constructor(s,o=500,l){this.reader=s,this.timeBetweenScansMillis=o,this._hints=l,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(s){this._timeBetweenDecodingAttempts=s<0?0:s}set hints(s){this._hints=s||null}get hints(){return this._hints}listVideoInputDevices(){return Ae(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const s=yield navigator.mediaDevices.enumerateDevices(),o=[];for(const l of s){const u=l.kind==="video"?"videoinput":l.kind;if(u!=="videoinput")continue;const d=l.deviceId||l.id,f=l.label||`Video device ${o.length+1}`,x=l.groupId,b={deviceId:d,label:f,kind:u,groupId:x};o.push(b)}return o})}getVideoInputDevices(){return Ae(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(o=>new fe(o.deviceId,o.label))})}findDeviceById(s){return Ae(this,void 0,void 0,function*(){const o=yield this.listVideoInputDevices();return o?o.find(l=>l.deviceId===s):null})}decodeFromInputVideoDevice(s,o){return Ae(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(s,o)})}decodeOnceFromVideoDevice(s,o){return Ae(this,void 0,void 0,function*(){this.reset();let l;s?l={deviceId:{exact:s}}:l={facingMode:"environment"};const u={video:l};return yield this.decodeOnceFromConstraints(u,o)})}decodeOnceFromConstraints(s,o){return Ae(this,void 0,void 0,function*(){const l=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeOnceFromStream(l,o)})}decodeOnceFromStream(s,o){return Ae(this,void 0,void 0,function*(){this.reset();const l=yield this.attachStreamToVideo(s,o);return yield this.decodeOnce(l)})}decodeFromInputVideoDeviceContinuously(s,o,l){return Ae(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(s,o,l)})}decodeFromVideoDevice(s,o,l){return Ae(this,void 0,void 0,function*(){let u;s?u={deviceId:{exact:s}}:u={facingMode:"environment"};const d={video:u};return yield this.decodeFromConstraints(d,o,l)})}decodeFromConstraints(s,o,l){return Ae(this,void 0,void 0,function*(){const u=yield navigator.mediaDevices.getUserMedia(s);return yield this.decodeFromStream(u,o,l)})}decodeFromStream(s,o,l){return Ae(this,void 0,void 0,function*(){this.reset();const u=yield this.attachStreamToVideo(s,o);return yield this.decodeContinuously(u,l)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(s,o){return Ae(this,void 0,void 0,function*(){const l=this.prepareVideoElement(o);return this.addVideoSource(l,s),this.videoElement=l,this.stream=s,yield this.playVideoOnLoadAsync(l),l})}playVideoOnLoadAsync(s){return new Promise((o,l)=>this.playVideoOnLoad(s,()=>o()))}playVideoOnLoad(s,o){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(s),s.addEventListener("ended",this.videoEndedListener),s.addEventListener("canplay",this.videoCanPlayListener),s.addEventListener("playing",o),this.tryPlayVideo(s)}isVideoPlaying(s){return s.currentTime>0&&!s.paused&&!s.ended&&s.readyState>2}tryPlayVideo(s){return Ae(this,void 0,void 0,function*(){if(this.isVideoPlaying(s)){console.warn("Trying to play video that is already playing.");return}try{yield s.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(s,o){const l=document.getElementById(s);if(!l)throw new y(`element with id '${s}' not found`);if(l.nodeName.toLowerCase()!==o.toLowerCase())throw new y(`element with id '${s}' must be an ${o} element`);return l}decodeFromImage(s,o){if(!s&&!o)throw new y("either imageElement with a src set or an url must be provided");return o&&!s?this.decodeFromImageUrl(o):this.decodeFromImageElement(s)}decodeFromVideo(s,o){if(!s&&!o)throw new y("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrl(o):this.decodeFromVideoElement(s)}decodeFromVideoContinuously(s,o,l){if(s===void 0&&o===void 0)throw new y("Either an element with a src set or an URL must be provided");return o&&!s?this.decodeFromVideoUrlContinuously(o,l):this.decodeFromVideoElementContinuously(s,l)}decodeFromImageElement(s){if(!s)throw new y("An image element must be provided.");this.reset();const o=this.prepareImageElement(s);this.imageElement=o;let l;return this.isImageLoaded(o)?l=this.decodeOnce(o,!1,!0):l=this._decodeOnLoadImage(o),l}decodeFromVideoElement(s){const o=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideo(o)}decodeFromVideoElementContinuously(s,o){const l=this._decodeFromVideoElementSetup(s);return this._decodeOnLoadVideoContinuously(l,o)}_decodeFromVideoElementSetup(s){if(!s)throw new y("A video element must be provided.");this.reset();const o=this.prepareVideoElement(s);return this.videoElement=o,o}decodeFromImageUrl(s){if(!s)throw new y("An URL must be provided.");this.reset();const o=this.prepareImageElement();this.imageElement=o;const l=this._decodeOnLoadImage(o);return o.src=s,l}decodeFromVideoUrl(s){if(!s)throw new y("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),l=this.decodeFromVideoElement(o);return o.src=s,l}decodeFromVideoUrlContinuously(s,o){if(!s)throw new y("An URL must be provided.");this.reset();const l=this.prepareVideoElement(),u=this.decodeFromVideoElementContinuously(l,o);return l.src=s,u}_decodeOnLoadImage(s){return new Promise((o,l)=>{this.imageLoadedListener=()=>this.decodeOnce(s,!1,!0).then(o,l),s.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(s){return Ae(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(s),yield this.decodeOnce(s)})}_decodeOnLoadVideoContinuously(s,o){return Ae(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(s),this.decodeContinuously(s,o)})}isImageLoaded(s){return!(!s.complete||s.naturalWidth===0)}prepareImageElement(s){let o;return typeof s>"u"&&(o=document.createElement("img"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"img")),s instanceof HTMLImageElement&&(o=s),o}prepareVideoElement(s){let o;return!s&&typeof document<"u"&&(o=document.createElement("video"),o.width=200,o.height=200),typeof s=="string"&&(o=this.getMediaElement(s,"video")),s instanceof HTMLVideoElement&&(o=s),o.setAttribute("autoplay","true"),o.setAttribute("muted","true"),o.setAttribute("playsinline","true"),o}decodeOnce(s,o=!0,l=!0){this._stopAsyncDecode=!1;const u=(d,f)=>{if(this._stopAsyncDecode){f(new Z("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const x=this.decode(s);d(x)}catch(x){const b=o&&x instanceof Z,S=(x instanceof A||x instanceof L)&&l;if(b||S)return setTimeout(u,this._timeBetweenDecodingAttempts,d,f);f(x)}};return new Promise((d,f)=>u(d,f))}decodeContinuously(s,o){this._stopContinuousDecode=!1;const l=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const u=this.decode(s);o(u,null),setTimeout(l,this.timeBetweenScansMillis)}catch(u){o(null,u);const d=u instanceof A||u instanceof L,f=u instanceof Z;(d||f)&&setTimeout(l,this._timeBetweenDecodingAttempts)}};l()}decode(s){const o=this.createBinaryBitmap(s);return this.decodeBitmap(o)}_isHTMLVideoElement(s){return s.videoWidth!==0}drawFrameOnCanvas(s,o,l){o||(o={sx:0,sy:0,sWidth:s.videoWidth,sHeight:s.videoHeight,dx:0,dy:0,dWidth:s.videoWidth,dHeight:s.videoHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}drawImageOnCanvas(s,o,l=this.captureCanvasContext){o||(o={sx:0,sy:0,sWidth:s.naturalWidth,sHeight:s.naturalHeight,dx:0,dy:0,dWidth:s.naturalWidth,dHeight:s.naturalHeight}),l||(l=this.captureCanvasContext),l.drawImage(s,o.sx,o.sy,o.sWidth,o.sHeight,o.dx,o.dy,o.dWidth,o.dHeight)}createBinaryBitmap(s){this.getCaptureCanvasContext(s),this._isHTMLVideoElement(s)?this.drawFrameOnCanvas(s):this.drawImageOnCanvas(s);const o=this.getCaptureCanvas(s),l=new $(o),u=new se(l);return new E(u)}getCaptureCanvasContext(s){if(!this.captureCanvasContext){const l=this.getCaptureCanvas(s).getContext("2d");this.captureCanvasContext=l}return this.captureCanvasContext}getCaptureCanvas(s){if(!this.captureCanvas){const o=this.createCaptureCanvas(s);this.captureCanvas=o}return this.captureCanvas}decodeBitmap(s){return this.reader.decode(s,this._hints)}createCaptureCanvas(s){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const o=document.createElement("canvas");let l,u;return typeof s<"u"&&(s instanceof HTMLVideoElement?(l=s.videoWidth,u=s.videoHeight):s instanceof HTMLImageElement&&(l=s.naturalWidth||s.width,u=s.naturalHeight||s.height)),o.style.width=l+"px",o.style.height=u+"px",o.width=l,o.height=u,o}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(s=>s.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(s,o){try{s.srcObject=o}catch{s.src=URL.createObjectURL(o)}}cleanVideoSource(s){try{s.srcObject=null}catch{s.src=""}this.videoElement.removeAttribute("src")}}class Te{constructor(s,o,l=o==null?0:8*o.length,u,d,f=I.currentTimeMillis()){this.text=s,this.rawBytes=o,this.numBits=l,this.resultPoints=u,this.format=d,this.timestamp=f,this.text=s,this.rawBytes=o,l==null?this.numBits=o==null?0:8*o.length:this.numBits=l,this.resultPoints=u,this.format=d,this.resultMetadata=null,f==null?this.timestamp=I.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(s,o){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(s,o)}putAllMetadata(s){s!==null&&(this.resultMetadata===null?this.resultMetadata=s:this.resultMetadata=new Map(s))}addResultPoints(s){const o=this.resultPoints;if(o===null)this.resultPoints=s;else if(s!==null&&s.length>0){const l=new Array(o.length+s.length);I.arraycopy(o,0,l,0,o.length),I.arraycopy(s,0,l,o.length,s.length),this.resultPoints=l}}getTimestamp(){return this.timestamp}toString(){return this.text}}var mn;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(mn||(mn={}));var xe=mn,xh;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(xh||(xh={}));var Ht=xh;class Bo{constructor(s,o,l,u,d=-1,f=-1){this.rawBytes=s,this.text=o,this.byteSegments=l,this.ecLevel=u,this.structuredAppendSequenceNumber=d,this.structuredAppendParity=f,this.numBits=s==null?0:8*s.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(s){this.numBits=s}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(s){this.errorsCorrected=s}getErasures(){return this.erasures}setErasures(s){this.erasures=s}getOther(){return this.other}setOther(s){this.other=s}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Po{exp(s){return this.expTable[s]}log(s){if(s===0)throw new w;return this.logTable[s]}static addOrSubtract(s,o){return s^o}}class En{constructor(s,o){if(o.length===0)throw new w;this.field=s;const l=o.length;if(l>1&&o[0]===0){let u=1;for(;u<l&&o[u]===0;)u++;u===l?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(l-u),I.arraycopy(o,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);const o=this.coefficients;let l;if(s===1){l=0;for(let f=0,x=o.length;f!==x;f++){const b=o[f];l=Po.addOrSubtract(l,b)}return l}l=o[0];const u=o.length,d=this.field;for(let f=1;f<u;f++)l=Po.addOrSubtract(d.multiply(s,l),o[f]);return l}addOrSubtract(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,l=s.coefficients;if(o.length>l.length){const f=o;o=l,l=f}let u=new Int32Array(l.length);const d=l.length-o.length;I.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=Po.addOrSubtract(o[f-d],l[f]);return new En(this.field,u)}multiply(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(this.isZero()||s.isZero())return this.field.getZero();const o=this.coefficients,l=o.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1),x=this.field;for(let b=0;b<l;b++){const v=o[b];for(let S=0;S<d;S++)f[b+S]=Po.addOrSubtract(f[b+S],x.multiply(v,u[S]))}return new En(x,f)}multiplyScalar(s){if(s===0)return this.field.getZero();if(s===1)return this;const o=this.coefficients.length,l=this.field,u=new Int32Array(o),d=this.coefficients;for(let f=0;f<o;f++)u[f]=l.multiply(d[f],s);return new En(l,u)}multiplyByMonomial(s,o){if(s<0)throw new w;if(o===0)return this.field.getZero();const l=this.coefficients,u=l.length,d=new Int32Array(u+s),f=this.field;for(let x=0;x<u;x++)d[x]=f.multiply(l[x],o);return new En(f,d)}divide(s){if(!this.field.equals(s.field))throw new w("GenericGFPolys do not have same GenericGF field");if(s.isZero())throw new w("Divide by 0");const o=this.field;let l=o.getZero(),u=this;const d=s.getCoefficient(s.getDegree()),f=o.inverse(d);for(;u.getDegree()>=s.getDegree()&&!u.isZero();){const x=u.getDegree()-s.getDegree(),b=o.multiply(u.getCoefficient(u.getDegree()),f),v=s.multiplyByMonomial(x,b),S=o.buildMonomial(x,b);l=l.addOrSubtract(S),u=u.addOrSubtract(v)}return[l,u]}toString(){let s="";for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);if(l!==0){if(l<0?(s+=" - ",l=-l):s.length>0&&(s+=" + "),o===0||l!==1){const u=this.field.log(l);u===0?s+="1":u===1?s+="a":(s+="a^",s+=u)}o!==0&&(o===1?s+="x":(s+="x^",s+=o))}}return s}}class Uc extends p{}Uc.kind="ArithmeticException";class ze extends Po{constructor(s,o,l){super(),this.primitive=s,this.size=o,this.generatorBase=l;const u=new Int32Array(o);let d=1;for(let x=0;x<o;x++)u[x]=d,d*=2,d>=o&&(d^=s,d&=o-1);this.expTable=u;const f=new Int32Array(o);for(let x=0;x<o-1;x++)f[u[x]]=x;this.logTable=f,this.zero=new En(this,Int32Array.from([0])),this.one=new En(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new w;if(o===0)return this.zero;const l=new Int32Array(s+1);return l[0]=o,new En(this,l)}inverse(s){if(s===0)throw new Uc;return this.expTable[this.size-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+C.toHexString(this.primitive)+","+this.size+")"}equals(s){return s===this}}ze.AZTEC_DATA_12=new ze(4201,4096,1),ze.AZTEC_DATA_10=new ze(1033,1024,1),ze.AZTEC_DATA_6=new ze(67,64,1),ze.AZTEC_PARAM=new ze(19,16,1),ze.QR_CODE_FIELD_256=new ze(285,256,0),ze.DATA_MATRIX_FIELD_256=new ze(301,256,1),ze.AZTEC_DATA_8=ze.DATA_MATRIX_FIELD_256,ze.MAXICODE_FIELD_64=ze.AZTEC_DATA_6;class oa extends p{}oa.kind="ReedSolomonException";class _i extends p{}_i.kind="IllegalStateException";class Uo{constructor(s){this.field=s}decode(s,o){const l=this.field,u=new En(l,s),d=new Int32Array(o);let f=!0;for(let V=0;V<o;V++){const H=u.evaluateAt(l.exp(V+l.getGeneratorBase()));d[d.length-1-V]=H,H!==0&&(f=!1)}if(f)return;const x=new En(l,d),b=this.runEuclideanAlgorithm(l.buildMonomial(o,1),x,o),v=b[0],S=b[1],M=this.findErrorLocations(v),R=this.findErrorMagnitudes(S,M);for(let V=0;V<M.length;V++){const H=s.length-1-l.log(M[V]);if(H<0)throw new oa("Bad error location");s[H]=ze.addOrSubtract(s[H],R[V])}}runEuclideanAlgorithm(s,o,l){if(s.getDegree()<o.getDegree()){const V=s;s=o,o=V}const u=this.field;let d=s,f=o,x=u.getZero(),b=u.getOne();for(;f.getDegree()>=(l/2|0);){let V=d,H=x;if(d=f,x=b,d.isZero())throw new oa("r_{i-1} was zero");f=V;let G=u.getZero();const q=d.getCoefficient(d.getDegree()),Q=u.inverse(q);for(;f.getDegree()>=d.getDegree()&&!f.isZero();){const le=f.getDegree()-d.getDegree(),ce=u.multiply(f.getCoefficient(f.getDegree()),Q);G=G.addOrSubtract(u.buildMonomial(le,ce)),f=f.addOrSubtract(d.multiplyByMonomial(le,ce))}if(b=G.multiply(x).addOrSubtract(H),f.getDegree()>=d.getDegree())throw new _i("Division algorithm failed to reduce polynomial?")}const v=b.getCoefficient(0);if(v===0)throw new oa("sigmaTilde(0) was zero");const S=u.inverse(v),M=b.multiplyScalar(S),R=f.multiplyScalar(S);return[M,R]}findErrorLocations(s){const o=s.getDegree();if(o===1)return Int32Array.from([s.getCoefficient(1)]);const l=new Int32Array(o);let u=0;const d=this.field;for(let f=1;f<d.getSize()&&u<o;f++)s.evaluateAt(f)===0&&(l[u]=d.inverse(f),u++);if(u!==o)throw new oa("Error locator degree does not match number of roots");return l}findErrorMagnitudes(s,o){const l=o.length,u=new Int32Array(l),d=this.field;for(let f=0;f<l;f++){const x=d.inverse(o[f]);let b=1;for(let v=0;v<l;v++)if(f!==v){const S=d.multiply(o[v],x),M=S&1?S&-2:S|1;b=d.multiply(b,M)}u[f]=d.multiply(s.evaluateAt(x),d.inverse(b)),d.getGeneratorBase()!==0&&(u[f]=d.multiply(u[f],x))}return u}}var Qt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(Qt||(Qt={}));class rt{decode(s){this.ddata=s;let o=s.getBits(),l=this.extractBits(o),u=this.correctBits(l),d=rt.convertBoolArrayToByteArray(u),f=rt.getEncodedData(u),x=new Bo(d,f,null,null);return x.setNumBits(u.length),x}static highLevelDecode(s){return this.getEncodedData(s)}static getEncodedData(s){let o=s.length,l=Qt.UPPER,u=Qt.UPPER,d="",f=0;for(;f<o;)if(u===Qt.BINARY){if(o-f<5)break;let x=rt.readCode(s,f,5);if(f+=5,x===0){if(o-f<11)break;x=rt.readCode(s,f,11)+31,f+=11}for(let b=0;b<x;b++){if(o-f<8){f=o;break}const v=rt.readCode(s,f,8);d+=ee.castAsNonUtf8Char(v),f+=8}u=l}else{let x=u===Qt.DIGIT?4:5;if(o-f<x)break;let b=rt.readCode(s,f,x);f+=x;let v=rt.getCharacter(u,b);v.startsWith("CTRL_")?(l=u,u=rt.getTable(v.charAt(5)),v.charAt(6)==="L"&&(l=u)):(d+=v,u=l)}return d}static getTable(s){switch(s){case"L":return Qt.LOWER;case"P":return Qt.PUNCT;case"M":return Qt.MIXED;case"D":return Qt.DIGIT;case"B":return Qt.BINARY;case"U":default:return Qt.UPPER}}static getCharacter(s,o){switch(s){case Qt.UPPER:return rt.UPPER_TABLE[o];case Qt.LOWER:return rt.LOWER_TABLE[o];case Qt.MIXED:return rt.MIXED_TABLE[o];case Qt.PUNCT:return rt.PUNCT_TABLE[o];case Qt.DIGIT:return rt.DIGIT_TABLE[o];default:throw new _i("Bad table")}}correctBits(s){let o,l;this.ddata.getNbLayers()<=2?(l=6,o=ze.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(l=8,o=ze.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(l=10,o=ze.AZTEC_DATA_10):(l=12,o=ze.AZTEC_DATA_12);let u=this.ddata.getNbDatablocks(),d=s.length/l;if(d<u)throw new L;let f=s.length%l,x=new Int32Array(d);for(let R=0;R<d;R++,f+=l)x[R]=rt.readCode(s,f,l);try{new Uo(o).decode(x,d-u)}catch(R){throw new L(R)}let b=(1<<l)-1,v=0;for(let R=0;R<u;R++){let V=x[R];if(V===0||V===b)throw new L;(V===1||V===b-1)&&v++}let S=new Array(u*l-v),M=0;for(let R=0;R<u;R++){let V=x[R];if(V===1||V===b-1)S.fill(V>1,M,M+l-1),M+=l-1;else for(let H=l-1;H>=0;--H)S[M++]=(V&1<<H)!==0}return S}extractBits(s){let o=this.ddata.isCompact(),l=this.ddata.getNbLayers(),u=(o?11:14)+l*4,d=new Int32Array(u),f=new Array(this.totalBitsInLayer(l,o));if(o)for(let x=0;x<d.length;x++)d[x]=x;else{let x=u+1+2*C.truncDivision(C.truncDivision(u,2)-1,15),b=u/2,v=C.truncDivision(x,2);for(let S=0;S<b;S++){let M=S+C.truncDivision(S,15);d[b-S-1]=v-M-1,d[b+S]=v+M+1}}for(let x=0,b=0;x<l;x++){let v=(l-x)*4+(o?9:12),S=x*2,M=u-1-S;for(let R=0;R<v;R++){let V=R*2;for(let H=0;H<2;H++)f[b+V+H]=s.get(d[S+H],d[S+R]),f[b+2*v+V+H]=s.get(d[S+R],d[M-H]),f[b+4*v+V+H]=s.get(d[M-H],d[M-R]),f[b+6*v+V+H]=s.get(d[M-R],d[S+H])}b+=v*8}return f}static readCode(s,o,l){let u=0;for(let d=o;d<o+l;d++)u<<=1,s[d]&&(u|=1);return u}static readByte(s,o){let l=s.length-o;return l>=8?rt.readCode(s,o,8):rt.readCode(s,o,l)<<8-l}static convertBoolArrayToByteArray(s){let o=new Uint8Array((s.length+7)/8);for(let l=0;l<o.length;l++)o[l]=rt.readByte(s,8*l);return o}totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}rt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],rt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],rt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],rt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],rt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Fe{constructor(){}static round(s){return s===NaN?0:s<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:s>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:s+(s<0?-.5:.5)|0}static distance(s,o,l,u){const d=s-l,f=o-u;return Math.sqrt(d*d+f*f)}static sum(s){let o=0;for(let l=0,u=s.length;l!==u;l++){const d=s[l];o+=d}return o}}class Fc{static floatToIntBits(s){return s}}Fc.MAX_VALUE=Number.MAX_SAFE_INTEGER;class pe{constructor(s,o){this.x=s,this.y=o}getX(){return this.x}getY(){return this.y}equals(s){if(s instanceof pe){const o=s;return this.x===o.x&&this.y===o.y}return!1}hashCode(){return 31*Fc.floatToIntBits(this.x)+Fc.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(s){const o=this.distance(s[0],s[1]),l=this.distance(s[1],s[2]),u=this.distance(s[0],s[2]);let d,f,x;if(l>=o&&l>=u?(f=s[0],d=s[1],x=s[2]):u>=l&&u>=o?(f=s[1],d=s[0],x=s[2]):(f=s[2],d=s[0],x=s[1]),this.crossProductZ(d,f,x)<0){const b=d;d=x,x=b}s[0]=d,s[1]=f,s[2]=x}static distance(s,o){return Fe.distance(s.x,s.y,o.x,o.y)}static crossProductZ(s,o,l){const u=o.x,d=o.y;return(l.x-u)*(s.y-d)-(l.y-d)*(s.x-u)}}class Vc{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Dg extends Vc{constructor(s,o,l,u,d){super(s,o),this.compact=l,this.nbDatablocks=u,this.nbLayers=d}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zi{constructor(s,o,l,u){this.image=s,this.height=s.getHeight(),this.width=s.getWidth(),o==null&&(o=Zi.INIT_SIZE),l==null&&(l=s.getWidth()/2|0),u==null&&(u=s.getHeight()/2|0);const d=o/2|0;if(this.leftInit=l-d,this.rightInit=l+d,this.upInit=u-d,this.downInit=u+d,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new Z}detect(){let s=this.leftInit,o=this.rightInit,l=this.upInit,u=this.downInit,d=!1,f=!0,x=!1,b=!1,v=!1,S=!1,M=!1;const R=this.width,V=this.height;for(;f;){f=!1;let H=!0;for(;(H||!b)&&o<R;)H=this.containsBlackPoint(l,u,o,!1),H?(o++,f=!0,b=!0):b||o++;if(o>=R){d=!0;break}let G=!0;for(;(G||!v)&&u<V;)G=this.containsBlackPoint(s,o,u,!0),G?(u++,f=!0,v=!0):v||u++;if(u>=V){d=!0;break}let q=!0;for(;(q||!S)&&s>=0;)q=this.containsBlackPoint(l,u,s,!1),q?(s--,f=!0,S=!0):S||s--;if(s<0){d=!0;break}let Q=!0;for(;(Q||!M)&&l>=0;)Q=this.containsBlackPoint(s,o,l,!0),Q?(l--,f=!0,M=!0):M||l--;if(l<0){d=!0;break}f&&(x=!0)}if(!d&&x){const H=o-s;let G=null;for(let ce=1;G===null&&ce<H;ce++)G=this.getBlackPointOnSegment(s,u-ce,s+ce,u);if(G==null)throw new Z;let q=null;for(let ce=1;q===null&&ce<H;ce++)q=this.getBlackPointOnSegment(s,l+ce,s+ce,l);if(q==null)throw new Z;let Q=null;for(let ce=1;Q===null&&ce<H;ce++)Q=this.getBlackPointOnSegment(o,l+ce,o-ce,l);if(Q==null)throw new Z;let le=null;for(let ce=1;le===null&&ce<H;ce++)le=this.getBlackPointOnSegment(o,u-ce,o-ce,u);if(le==null)throw new Z;return this.centerEdges(le,G,Q,q)}else throw new Z}getBlackPointOnSegment(s,o,l,u){const d=Fe.round(Fe.distance(s,o,l,u)),f=(l-s)/d,x=(u-o)/d,b=this.image;for(let v=0;v<d;v++){const S=Fe.round(s+v*f),M=Fe.round(o+v*x);if(b.get(S,M))return new pe(S,M)}return null}centerEdges(s,o,l,u){const d=s.getX(),f=s.getY(),x=o.getX(),b=o.getY(),v=l.getX(),S=l.getY(),M=u.getX(),R=u.getY(),V=Zi.CORR;return d<this.width/2?[new pe(M-V,R+V),new pe(x+V,b+V),new pe(v-V,S-V),new pe(d+V,f-V)]:[new pe(M+V,R+V),new pe(x+V,b-V),new pe(v-V,S+V),new pe(d-V,f-V)]}containsBlackPoint(s,o,l,u){const d=this.image;if(u){for(let f=s;f<=o;f++)if(d.get(f,l))return!0}else for(let f=s;f<=o;f++)if(d.get(l,f))return!0;return!1}}Zi.INIT_SIZE=10,Zi.CORR=1;class yh{static checkAndNudgePoints(s,o){const l=s.getWidth(),u=s.getHeight();let d=!0;for(let f=0;f<o.length&&d;f+=2){const x=Math.floor(o[f]),b=Math.floor(o[f+1]);if(x<-1||x>l||b<-1||b>u)throw new Z;d=!1,x===-1?(o[f]=0,d=!0):x===l&&(o[f]=l-1,d=!0),b===-1?(o[f+1]=0,d=!0):b===u&&(o[f+1]=u-1,d=!0)}d=!0;for(let f=o.length-2;f>=0&&d;f-=2){const x=Math.floor(o[f]),b=Math.floor(o[f+1]);if(x<-1||x>l||b<-1||b>u)throw new Z;d=!1,x===-1?(o[f]=0,d=!0):x===l&&(o[f]=l-1,d=!0),b===-1?(o[f+1]=0,d=!0):b===u&&(o[f+1]=u-1,d=!0)}}}class gi{constructor(s,o,l,u,d,f,x,b,v){this.a11=s,this.a21=o,this.a31=l,this.a12=u,this.a22=d,this.a32=f,this.a13=x,this.a23=b,this.a33=v}static quadrilateralToQuadrilateral(s,o,l,u,d,f,x,b,v,S,M,R,V,H,G,q){const Q=gi.quadrilateralToSquare(s,o,l,u,d,f,x,b);return gi.squareToQuadrilateral(v,S,M,R,V,H,G,q).times(Q)}transformPoints(s){const o=s.length,l=this.a11,u=this.a12,d=this.a13,f=this.a21,x=this.a22,b=this.a23,v=this.a31,S=this.a32,M=this.a33;for(let R=0;R<o;R+=2){const V=s[R],H=s[R+1],G=d*V+b*H+M;s[R]=(l*V+f*H+v)/G,s[R+1]=(u*V+x*H+S)/G}}transformPointsWithValues(s,o){const l=this.a11,u=this.a12,d=this.a13,f=this.a21,x=this.a22,b=this.a23,v=this.a31,S=this.a32,M=this.a33,R=s.length;for(let V=0;V<R;V++){const H=s[V],G=o[V],q=d*H+b*G+M;s[V]=(l*H+f*G+v)/q,o[V]=(u*H+x*G+S)/q}}static squareToQuadrilateral(s,o,l,u,d,f,x,b){const v=s-l+d-x,S=o-u+f-b;if(v===0&&S===0)return new gi(l-s,d-l,s,u-o,f-u,o,0,0,1);{const M=l-d,R=x-d,V=u-f,H=b-f,G=M*H-R*V,q=(v*H-R*S)/G,Q=(M*S-v*V)/G;return new gi(l-s+q*l,x-s+Q*x,s,u-o+q*u,b-o+Q*b,o,q,Q,1)}}static quadrilateralToSquare(s,o,l,u,d,f,x,b){return gi.squareToQuadrilateral(s,o,l,u,d,f,x,b).buildAdjoint()}buildAdjoint(){return new gi(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(s){return new gi(this.a11*s.a11+this.a21*s.a12+this.a31*s.a13,this.a11*s.a21+this.a21*s.a22+this.a31*s.a23,this.a11*s.a31+this.a21*s.a32+this.a31*s.a33,this.a12*s.a11+this.a22*s.a12+this.a32*s.a13,this.a12*s.a21+this.a22*s.a22+this.a32*s.a23,this.a12*s.a31+this.a22*s.a32+this.a32*s.a33,this.a13*s.a11+this.a23*s.a12+this.a33*s.a13,this.a13*s.a21+this.a23*s.a22+this.a33*s.a23,this.a13*s.a31+this.a23*s.a32+this.a33*s.a33)}}class Rg extends yh{sampleGrid(s,o,l,u,d,f,x,b,v,S,M,R,V,H,G,q,Q,le,ce){const re=gi.quadrilateralToQuadrilateral(u,d,f,x,b,v,S,M,R,V,H,G,q,Q,le,ce);return this.sampleGridWithTransform(s,o,l,re)}sampleGridWithTransform(s,o,l,u){if(o<=0||l<=0)throw new Z;const d=new be(o,l),f=new Float32Array(2*o);for(let x=0;x<l;x++){const b=f.length,v=x+.5;for(let S=0;S<b;S+=2)f[S]=S/2+.5,f[S+1]=v;u.transformPoints(f),yh.checkAndNudgePoints(s,f);try{for(let S=0;S<b;S+=2)s.get(Math.floor(f[S]),Math.floor(f[S+1]))&&d.set(S/2,x)}catch{throw new Z}}return d}}class Ss{static setGridSampler(s){Ss.gridSampler=s}static getInstance(){return Ss.gridSampler}}Ss.gridSampler=new Rg;class gn{constructor(s,o){this.x=s,this.y=o}toResultPoint(){return new pe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Og{constructor(s){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=s}detect(){return this.detectMirror(!1)}detectMirror(s){let o=this.getMatrixCenter(),l=this.getBullsEyeCorners(o);if(s){let f=l[0];l[0]=l[2],l[2]=f}this.extractParameters(l);let u=this.sampleGrid(this.image,l[this.shift%4],l[(this.shift+1)%4],l[(this.shift+2)%4],l[(this.shift+3)%4]),d=this.getMatrixCornerPoints(l);return new Dg(u,d,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(s){if(!this.isValidPoint(s[0])||!this.isValidPoint(s[1])||!this.isValidPoint(s[2])||!this.isValidPoint(s[3]))throw new Z;let o=2*this.nbCenterLayers,l=new Int32Array([this.sampleLine(s[0],s[1],o),this.sampleLine(s[1],s[2],o),this.sampleLine(s[2],s[3],o),this.sampleLine(s[3],s[0],o)]);this.shift=this.getRotation(l,o);let u=0;for(let f=0;f<4;f++){let x=l[(this.shift+f)%4];this.compact?(u<<=7,u+=x>>1&127):(u<<=10,u+=(x>>2&992)+(x>>1&31))}let d=this.getCorrectedParameterData(u,this.compact);this.compact?(this.nbLayers=(d>>6)+1,this.nbDataBlocks=(d&63)+1):(this.nbLayers=(d>>11)+1,this.nbDataBlocks=(d&2047)+1)}getRotation(s,o){let l=0;s.forEach((u,d,f)=>{let x=(u>>o-2<<1)+(u&1);l=(l<<3)+x}),l=((l&1)<<11)+(l>>1);for(let u=0;u<4;u++)if(C.bitCount(l^this.EXPECTED_CORNER_BITS[u])<=2)return u;throw new Z}getCorrectedParameterData(s,o){let l,u;o?(l=7,u=2):(l=10,u=4);let d=l-u,f=new Int32Array(l);for(let b=l-1;b>=0;--b)f[b]=s&15,s>>=4;try{new Uo(ze.AZTEC_PARAM).decode(f,d)}catch{throw new Z}let x=0;for(let b=0;b<u;b++)x=(x<<4)+f[b];return x}getBullsEyeCorners(s){let o=s,l=s,u=s,d=s,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let M=this.getFirstDifferent(o,f,1,-1),R=this.getFirstDifferent(l,f,1,1),V=this.getFirstDifferent(u,f,-1,1),H=this.getFirstDifferent(d,f,-1,-1);if(this.nbCenterLayers>2){let G=this.distancePoint(H,M)*this.nbCenterLayers/(this.distancePoint(d,o)*(this.nbCenterLayers+2));if(G<.75||G>1.25||!this.isWhiteOrBlackRectangle(M,R,V,H))break}o=M,l=R,u=V,d=H,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new Z;this.compact=this.nbCenterLayers===5;let x=new pe(o.getX()+.5,o.getY()-.5),b=new pe(l.getX()+.5,l.getY()+.5),v=new pe(u.getX()-.5,u.getY()+.5),S=new pe(d.getX()-.5,d.getY()-.5);return this.expandSquare([x,b,v,S],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let s,o,l,u;try{let x=new Zi(this.image).detect();s=x[0],o=x[1],l=x[2],u=x[3]}catch{let b=this.image.getWidth()/2,v=this.image.getHeight()/2;s=this.getFirstDifferent(new gn(b+7,v-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new gn(b+7,v+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new gn(b-7,v+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new gn(b-7,v-7),!1,-1,-1).toResultPoint()}let d=Fe.round((s.getX()+u.getX()+o.getX()+l.getX())/4),f=Fe.round((s.getY()+u.getY()+o.getY()+l.getY())/4);try{let x=new Zi(this.image,15,d,f).detect();s=x[0],o=x[1],l=x[2],u=x[3]}catch{s=this.getFirstDifferent(new gn(d+7,f-7),!1,1,-1).toResultPoint(),o=this.getFirstDifferent(new gn(d+7,f+7),!1,1,1).toResultPoint(),l=this.getFirstDifferent(new gn(d-7,f+7),!1,-1,1).toResultPoint(),u=this.getFirstDifferent(new gn(d-7,f-7),!1,-1,-1).toResultPoint()}return d=Fe.round((s.getX()+u.getX()+o.getX()+l.getX())/4),f=Fe.round((s.getY()+u.getY()+o.getY()+l.getY())/4),new gn(d,f)}getMatrixCornerPoints(s){return this.expandSquare(s,2*this.nbCenterLayers,this.getDimension())}sampleGrid(s,o,l,u,d){let f=Ss.getInstance(),x=this.getDimension(),b=x/2-this.nbCenterLayers,v=x/2+this.nbCenterLayers;return f.sampleGrid(s,x,x,b,b,v,b,v,v,b,v,o.getX(),o.getY(),l.getX(),l.getY(),u.getX(),u.getY(),d.getX(),d.getY())}sampleLine(s,o,l){let u=0,d=this.distanceResultPoint(s,o),f=d/l,x=s.getX(),b=s.getY(),v=f*(o.getX()-s.getX())/d,S=f*(o.getY()-s.getY())/d;for(let M=0;M<l;M++)this.image.get(Fe.round(x+M*v),Fe.round(b+M*S))&&(u|=1<<l-M-1);return u}isWhiteOrBlackRectangle(s,o,l,u){let d=3;s=new gn(s.getX()-d,s.getY()+d),o=new gn(o.getX()-d,o.getY()-d),l=new gn(l.getX()+d,l.getY()-d),u=new gn(u.getX()+d,u.getY()+d);let f=this.getColor(u,s);if(f===0)return!1;let x=this.getColor(s,o);return x!==f||(x=this.getColor(o,l),x!==f)?!1:(x=this.getColor(l,u),x===f)}getColor(s,o){let l=this.distancePoint(s,o),u=(o.getX()-s.getX())/l,d=(o.getY()-s.getY())/l,f=0,x=s.getX(),b=s.getY(),v=this.image.get(s.getX(),s.getY()),S=Math.ceil(l);for(let R=0;R<S;R++)x+=u,b+=d,this.image.get(Fe.round(x),Fe.round(b))!==v&&f++;let M=f/l;return M>.1&&M<.9?0:M<=.1===v?1:-1}getFirstDifferent(s,o,l,u){let d=s.getX()+l,f=s.getY()+u;for(;this.isValid(d,f)&&this.image.get(d,f)===o;)d+=l,f+=u;for(d-=l,f-=u;this.isValid(d,f)&&this.image.get(d,f)===o;)d+=l;for(d-=l;this.isValid(d,f)&&this.image.get(d,f)===o;)f+=u;return f-=u,new gn(d,f)}expandSquare(s,o,l){let u=l/(2*o),d=s[0].getX()-s[2].getX(),f=s[0].getY()-s[2].getY(),x=(s[0].getX()+s[2].getX())/2,b=(s[0].getY()+s[2].getY())/2,v=new pe(x+u*d,b+u*f),S=new pe(x-u*d,b-u*f);d=s[1].getX()-s[3].getX(),f=s[1].getY()-s[3].getY(),x=(s[1].getX()+s[3].getX())/2,b=(s[1].getY()+s[3].getY())/2;let M=new pe(x+u*d,b+u*f),R=new pe(x-u*d,b-u*f);return[v,M,S,R]}isValid(s,o){return s>=0&&s<this.image.getWidth()&&o>0&&o<this.image.getHeight()}isValidPoint(s){let o=Fe.round(s.getX()),l=Fe.round(s.getY());return this.isValid(o,l)}distancePoint(s,o){return Fe.distance(s.getX(),s.getY(),o.getX(),o.getY())}distanceResultPoint(s,o){return Fe.distance(s.getX(),s.getY(),o.getX(),o.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(C.truncDivision(this.nbLayers-4,8)+1)+15}}class zc{decode(s,o=null){let l=null,u=new Og(s.getBlackMatrix()),d=null,f=null;try{let S=u.detectMirror(!1);d=S.getPoints(),this.reportFoundResultPoints(o,d),f=new rt().decode(S)}catch(S){l=S}if(f==null)try{let S=u.detectMirror(!0);d=S.getPoints(),this.reportFoundResultPoints(o,d),f=new rt().decode(S)}catch(S){throw l??S}let x=new Te(f.getText(),f.getRawBytes(),f.getNumBits(),d,xe.AZTEC,I.currentTimeMillis()),b=f.getByteSegments();b!=null&&x.putMetadata(Ht.BYTE_SEGMENTS,b);let v=f.getECLevel();return v!=null&&x.putMetadata(Ht.ERROR_CORRECTION_LEVEL,v),x}reportFoundResultPoints(s,o){if(s!=null){let l=s.get(D.NEED_RESULT_POINT_CALLBACK);l!=null&&o.forEach((u,d,f)=>{l.foundPossibleResultPoint(u)})}}reset(){}}class wA extends Qe{constructor(s=500){super(new zc,s)}}class Rt{decode(s,o){try{return this.doDecode(s,o)}catch{if(o&&o.get(D.TRY_HARDER)===!0&&s.isRotateSupported()){const d=s.rotateCounterClockwise(),f=this.doDecode(d,o),x=f.getResultMetadata();let b=270;x!==null&&x.get(Ht.ORIENTATION)===!0&&(b=b+x.get(Ht.ORIENTATION)%360),f.putMetadata(Ht.ORIENTATION,b);const v=f.getResultPoints();if(v!==null){const S=d.getHeight();for(let M=0;M<v.length;M++)v[M]=new pe(S-v[M].getY()-1,v[M].getX())}return f}else throw new Z}}reset(){}doDecode(s,o){const l=s.getWidth(),u=s.getHeight();let d=new k(l);const f=o&&o.get(D.TRY_HARDER)===!0,x=Math.max(1,u>>(f?8:5));let b;f?b=u:b=15;const v=Math.trunc(u/2);for(let S=0;S<b;S++){const M=Math.trunc((S+1)/2),R=(S&1)===0,V=v+x*(R?M:-M);if(V<0||V>=u)break;try{d=s.getBlackRow(V,d)}catch{continue}for(let H=0;H<2;H++){if(H===1&&(d.reverse(),o&&o.get(D.NEED_RESULT_POINT_CALLBACK)===!0)){const G=new Map;o.forEach((q,Q)=>G.set(Q,q)),G.delete(D.NEED_RESULT_POINT_CALLBACK),o=G}try{const G=this.decodeRow(V,d,o);if(H===1){G.putMetadata(Ht.ORIENTATION,180);const q=G.getResultPoints();q!==null&&(q[0]=new pe(l-q[0].getX()-1,q[0].getY()),q[1]=new pe(l-q[1].getX()-1,q[1].getY()))}return G}catch{}}}throw new Z}static recordPattern(s,o,l){const u=l.length;for(let v=0;v<u;v++)l[v]=0;const d=s.getSize();if(o>=d)throw new Z;let f=!s.get(o),x=0,b=o;for(;b<d;){if(s.get(b)!==f)l[x]++;else{if(++x===u)break;l[x]=1,f=!f}b++}if(!(x===u||x===u-1&&b===d))throw new Z}static recordPatternInReverse(s,o,l){let u=l.length,d=s.get(o);for(;o>0&&u>=0;)s.get(--o)!==d&&(u--,d=!d);if(u>=0)throw new Z;Rt.recordPattern(s,o+1,l)}static patternMatchVariance(s,o,l){const u=s.length;let d=0,f=0;for(let v=0;v<u;v++)d+=s[v],f+=o[v];if(d<f)return Number.POSITIVE_INFINITY;const x=d/f;l*=x;let b=0;for(let v=0;v<u;v++){const S=s[v],M=o[v]*x,R=S>M?S-M:M-S;if(R>l)return Number.POSITIVE_INFINITY;b+=R}return b/d}}class he extends Rt{static findStartPattern(s){const o=s.getSize(),l=s.getNextSet(0);let u=0,d=Int32Array.from([0,0,0,0,0,0]),f=l,x=!1;const b=6;for(let v=l;v<o;v++)if(s.get(v)!==x)d[u]++;else{if(u===b-1){let S=he.MAX_AVG_VARIANCE,M=-1;for(let R=he.CODE_START_A;R<=he.CODE_START_C;R++){const V=Rt.patternMatchVariance(d,he.CODE_PATTERNS[R],he.MAX_INDIVIDUAL_VARIANCE);V<S&&(S=V,M=R)}if(M>=0&&s.isRange(Math.max(0,f-(v-f)/2),f,!1))return Int32Array.from([f,v,M]);f+=d[0]+d[1],d=d.slice(2,d.length-1),d[u-1]=0,d[u]=0,u--}else u++;d[u]=1,x=!x}throw new Z}static decodeCode(s,o,l){Rt.recordPattern(s,l,o);let u=he.MAX_AVG_VARIANCE,d=-1;for(let f=0;f<he.CODE_PATTERNS.length;f++){const x=he.CODE_PATTERNS[f],b=this.patternMatchVariance(o,x,he.MAX_INDIVIDUAL_VARIANCE);b<u&&(u=b,d=f)}if(d>=0)return d;throw new Z}decodeRow(s,o,l){const u=l&&l.get(D.ASSUME_GS1)===!0,d=he.findStartPattern(o),f=d[2];let x=0;const b=new Uint8Array(20);b[x++]=f;let v;switch(f){case he.CODE_START_A:v=he.CODE_CODE_A;break;case he.CODE_START_B:v=he.CODE_CODE_B;break;case he.CODE_START_C:v=he.CODE_CODE_C;break;default:throw new L}let S=!1,M=!1,R="",V=d[0],H=d[1];const G=Int32Array.from([0,0,0,0,0,0]);let q=0,Q=0,le=f,ce=0,re=!0,Le=!1,Ne=!1;for(;!S;){const pa=M;switch(M=!1,q=Q,Q=he.decodeCode(o,G,H),b[x++]=Q,Q!==he.CODE_STOP&&(re=!0),Q!==he.CODE_STOP&&(ce++,le+=ce*Q),V=H,H+=G.reduce((ZA,KA)=>ZA+KA,0),Q){case he.CODE_START_A:case he.CODE_START_B:case he.CODE_START_C:throw new L}switch(v){case he.CODE_CODE_A:if(Q<64)Ne===Le?R+=String.fromCharCode(32+Q):R+=String.fromCharCode(32+Q+128),Ne=!1;else if(Q<96)Ne===Le?R+=String.fromCharCode(Q-64):R+=String.fromCharCode(Q+64),Ne=!1;else switch(Q!==he.CODE_STOP&&(re=!1),Q){case he.CODE_FNC_1:u&&(R.length===0?R+="]C1":R+="");break;case he.CODE_FNC_2:case he.CODE_FNC_3:break;case he.CODE_FNC_4_A:!Le&&Ne?(Le=!0,Ne=!1):Le&&Ne?(Le=!1,Ne=!1):Ne=!0;break;case he.CODE_SHIFT:M=!0,v=he.CODE_CODE_B;break;case he.CODE_CODE_B:v=he.CODE_CODE_B;break;case he.CODE_CODE_C:v=he.CODE_CODE_C;break;case he.CODE_STOP:S=!0;break}break;case he.CODE_CODE_B:if(Q<96)Ne===Le?R+=String.fromCharCode(32+Q):R+=String.fromCharCode(32+Q+128),Ne=!1;else switch(Q!==he.CODE_STOP&&(re=!1),Q){case he.CODE_FNC_1:u&&(R.length===0?R+="]C1":R+="");break;case he.CODE_FNC_2:case he.CODE_FNC_3:break;case he.CODE_FNC_4_B:!Le&&Ne?(Le=!0,Ne=!1):Le&&Ne?(Le=!1,Ne=!1):Ne=!0;break;case he.CODE_SHIFT:M=!0,v=he.CODE_CODE_A;break;case he.CODE_CODE_A:v=he.CODE_CODE_A;break;case he.CODE_CODE_C:v=he.CODE_CODE_C;break;case he.CODE_STOP:S=!0;break}break;case he.CODE_CODE_C:if(Q<100)Q<10&&(R+="0"),R+=Q;else switch(Q!==he.CODE_STOP&&(re=!1),Q){case he.CODE_FNC_1:u&&(R.length===0?R+="]C1":R+="");break;case he.CODE_CODE_A:v=he.CODE_CODE_A;break;case he.CODE_CODE_B:v=he.CODE_CODE_B;break;case he.CODE_STOP:S=!0;break}break}pa&&(v=v===he.CODE_CODE_A?he.CODE_CODE_B:he.CODE_CODE_A)}const Tn=H-V;if(H=o.getNextUnset(H),!o.isRange(H,Math.min(o.getSize(),H+(H-V)/2),!1))throw new Z;if(le-=ce*q,le%103!==q)throw new A;const xi=R.length;if(xi===0)throw new Z;xi>0&&re&&(v===he.CODE_CODE_C?R=R.substring(0,xi-2):R=R.substring(0,xi-1));const Nn=(d[1]+d[0])/2,it=V+Tn/2,en=b.length,Bn=new Uint8Array(en);for(let pa=0;pa<en;pa++)Bn[pa]=b[pa];const ga=[new pe(Nn,s),new pe(it,s)];return new Te(R,Bn,0,ga,xe.CODE_128,new Date().getTime())}}he.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],he.MAX_AVG_VARIANCE=.25,he.MAX_INDIVIDUAL_VARIANCE=.7,he.CODE_SHIFT=98,he.CODE_CODE_C=99,he.CODE_CODE_B=100,he.CODE_CODE_A=101,he.CODE_FNC_1=102,he.CODE_FNC_2=97,he.CODE_FNC_3=96,he.CODE_FNC_4_A=101,he.CODE_FNC_4_B=100,he.CODE_START_A=103,he.CODE_START_B=104,he.CODE_START_C=105,he.CODE_STOP=106;class Bt extends Rt{constructor(s=!1,o=!1){super(),this.usingCheckDigit=s,this.extendedMode=o,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(s,o,l){let u=this.counters;u.fill(0),this.decodeRowResult="";let d=Bt.findAsteriskPattern(o,u),f=o.getNextSet(d[1]),x=o.getSize(),b,v;do{Bt.recordPattern(o,f,u);let G=Bt.toNarrowWidePattern(u);if(G<0)throw new Z;b=Bt.patternToChar(G),this.decodeRowResult+=b,v=f;for(let q of u)f+=q;f=o.getNextSet(f)}while(b!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let S=0;for(let G of u)S+=G;let M=f-v-S;if(f!==x&&M*2<S)throw new Z;if(this.usingCheckDigit){let G=this.decodeRowResult.length-1,q=0;for(let Q=0;Q<G;Q++)q+=Bt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Q));if(this.decodeRowResult.charAt(G)!==Bt.ALPHABET_STRING.charAt(q%43))throw new A;this.decodeRowResult=this.decodeRowResult.substring(0,G)}if(this.decodeRowResult.length===0)throw new Z;let R;this.extendedMode?R=Bt.decodeExtended(this.decodeRowResult):R=this.decodeRowResult;let V=(d[1]+d[0])/2,H=v+S/2;return new Te(R,null,0,[new pe(V,s),new pe(H,s)],xe.CODE_39,new Date().getTime())}static findAsteriskPattern(s,o){let l=s.getSize(),u=s.getNextSet(0),d=0,f=u,x=!1,b=o.length;for(let v=u;v<l;v++)if(s.get(v)!==x)o[d]++;else{if(d===b-1){if(this.toNarrowWidePattern(o)===Bt.ASTERISK_ENCODING&&s.isRange(Math.max(0,f-Math.floor((v-f)/2)),f,!1))return[f,v];f+=o[0]+o[1],o.copyWithin(0,2,2+d-1),o[d-1]=0,o[d]=0,d--}else d++;o[d]=1,x=!x}throw new Z}static toNarrowWidePattern(s){let o=s.length,l=0,u;do{let d=2147483647;for(let b of s)b<d&&b>l&&(d=b);l=d,u=0;let f=0,x=0;for(let b=0;b<o;b++){let v=s[b];v>l&&(x|=1<<o-1-b,u++,f+=v)}if(u===3){for(let b=0;b<o&&u>0;b++){let v=s[b];if(v>l&&(u--,v*2>=f))return-1}return x}}while(u>3);return-1}static patternToChar(s){for(let o=0;o<Bt.CHARACTER_ENCODINGS.length;o++)if(Bt.CHARACTER_ENCODINGS[o]===s)return Bt.ALPHABET_STRING.charAt(o);if(s===Bt.ASTERISK_ENCODING)return"*";throw new Z}static decodeExtended(s){let o=s.length,l="";for(let u=0;u<o;u++){let d=s.charAt(u);if(d==="+"||d==="$"||d==="%"||d==="/"){let f=s.charAt(u+1),x="\0";switch(d){case"+":if(f>="A"&&f<="Z")x=String.fromCharCode(f.charCodeAt(0)+32);else throw new L;break;case"$":if(f>="A"&&f<="Z")x=String.fromCharCode(f.charCodeAt(0)-64);else throw new L;break;case"%":if(f>="A"&&f<="E")x=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")x=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")x=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")x=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")x="\0";else if(f==="V")x="@";else if(f==="W")x="`";else if(f==="X"||f==="Y"||f==="Z")x="";else throw new L;break;case"/":if(f>="A"&&f<="O")x=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")x=":";else throw new L;break}l+=x,u++}else l+=d}return l}}Bt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Bt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Bt.ASTERISK_ENCODING=148;class tt extends Rt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(s,o,l){let u=this.decodeStart(o),d=this.decodeEnd(o),f=new de;tt.decodeMiddle(o,u[1],d[0],f);let x=f.toString(),b=null;l!=null&&(b=l.get(D.ALLOWED_LENGTHS)),b==null&&(b=tt.DEFAULT_ALLOWED_LENGTHS);let v=x.length,S=!1,M=0;for(let H of b){if(v===H){S=!0;break}H>M&&(M=H)}if(!S&&v>M&&(S=!0),!S)throw new L;const R=[new pe(u[1],s),new pe(d[0],s)];return new Te(x,null,0,R,xe.ITF,new Date().getTime())}static decodeMiddle(s,o,l,u){let d=new Int32Array(10),f=new Int32Array(5),x=new Int32Array(5);for(d.fill(0),f.fill(0),x.fill(0);o<l;){Rt.recordPattern(s,o,d);for(let v=0;v<5;v++){let S=2*v;f[v]=d[S],x[v]=d[S+1]}let b=tt.decodeDigit(f);u.append(b.toString()),b=this.decodeDigit(x),u.append(b.toString()),d.forEach(function(v){o+=v})}}decodeStart(s){let o=tt.skipWhiteSpace(s),l=tt.findGuardPattern(s,o,tt.START_PATTERN);return this.narrowLineWidth=(l[1]-l[0])/4,this.validateQuietZone(s,l[0]),l}validateQuietZone(s,o){let l=this.narrowLineWidth*10;l=l<o?l:o;for(let u=o-1;l>0&&u>=0&&!s.get(u);u--)l--;if(l!==0)throw new Z}static skipWhiteSpace(s){const o=s.getSize(),l=s.getNextSet(0);if(l===o)throw new Z;return l}decodeEnd(s){s.reverse();try{let o=tt.skipWhiteSpace(s),l;try{l=tt.findGuardPattern(s,o,tt.END_PATTERN_REVERSED[0])}catch(d){d instanceof Z&&(l=tt.findGuardPattern(s,o,tt.END_PATTERN_REVERSED[1]))}this.validateQuietZone(s,l[0]);let u=l[0];return l[0]=s.getSize()-l[1],l[1]=s.getSize()-u,l}finally{s.reverse()}}static findGuardPattern(s,o,l){let u=l.length,d=new Int32Array(u),f=s.getSize(),x=!1,b=0,v=o;d.fill(0);for(let S=o;S<f;S++)if(s.get(S)!==x)d[b]++;else{if(b===u-1){if(Rt.patternMatchVariance(d,l,tt.MAX_INDIVIDUAL_VARIANCE)<tt.MAX_AVG_VARIANCE)return[v,S];v+=d[0]+d[1],I.arraycopy(d,2,d,0,b-1),d[b-1]=0,d[b]=0,b--}else b++;d[b]=1,x=!x}throw new Z}static decodeDigit(s){let o=tt.MAX_AVG_VARIANCE,l=-1,u=tt.PATTERNS.length;for(let d=0;d<u;d++){let f=tt.PATTERNS[d],x=Rt.patternMatchVariance(s,f,tt.MAX_INDIVIDUAL_VARIANCE);x<o?(o=x,l=d):x===o&&(l=-1)}if(l>=0)return l%10;throw new Z}}tt.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],tt.MAX_AVG_VARIANCE=.38,tt.MAX_INDIVIDUAL_VARIANCE=.5,tt.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],tt.START_PATTERN=Int32Array.from([1,1,1,1]),tt.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class vt extends Rt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(s){let o=!1,l,u=0,d=Int32Array.from([0,0,0]);for(;!o;){d=Int32Array.from([0,0,0]),l=vt.findGuardPattern(s,u,!1,this.START_END_PATTERN,d);let f=l[0];u=l[1];let x=f-(u-f);x>=0&&(o=s.isRange(x,f,!1))}return l}static checkChecksum(s){return vt.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let l=parseInt(s.charAt(o-1),10);return vt.getStandardUPCEANChecksum(s.substring(0,o-1))===l}static getStandardUPCEANChecksum(s){let o=s.length,l=0;for(let u=o-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new L;l+=d}l*=3;for(let u=o-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new L;l+=d}return(1e3-l)%10}static decodeEnd(s,o){return vt.findGuardPattern(s,o,!1,vt.START_END_PATTERN,new Int32Array(vt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(s,o,l,u){return this.findGuardPattern(s,o,l,u,new Int32Array(u.length))}static findGuardPattern(s,o,l,u,d){let f=s.getSize();o=l?s.getNextUnset(o):s.getNextSet(o);let x=0,b=o,v=u.length,S=l;for(let M=o;M<f;M++)if(s.get(M)!==S)d[x]++;else{if(x===v-1){if(Rt.patternMatchVariance(d,u,vt.MAX_INDIVIDUAL_VARIANCE)<vt.MAX_AVG_VARIANCE)return Int32Array.from([b,M]);b+=d[0]+d[1];let R=d.slice(2,d.length-1);for(let V=0;V<x-1;V++)d[V]=R[V];d[x-1]=0,d[x]=0,x--}else x++;d[x]=1,S=!S}throw new Z}static decodeDigit(s,o,l,u){this.recordPattern(s,l,o);let d=this.MAX_AVG_VARIANCE,f=-1,x=u.length;for(let b=0;b<x;b++){let v=u[b],S=Rt.patternMatchVariance(o,v,vt.MAX_INDIVIDUAL_VARIANCE);S<d&&(d=S,f=b)}if(f>=0)return f;throw new Z}}vt.MAX_AVG_VARIANCE=.48,vt.MAX_INDIVIDUAL_VARIANCE=.7,vt.START_END_PATTERN=Int32Array.from([1,1,1]),vt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),vt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),vt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Fo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,u),f=u.toString(),x=Fo.parseExtensionString(f),b=[new pe((l[0]+l[1])/2,s),new pe(d,s)],v=new Te(f,null,0,b,xe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&v.putAllMetadata(x),v}decodeMiddle(s,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=o[1],x=0;for(let v=0;v<5&&f<d;v++){let S=vt.decodeDigit(s,u,f,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let M of u)f+=M;S>=10&&(x|=1<<4-v),v!==4&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==5)throw new Z;let b=this.determineCheckDigit(x);if(Fo.extensionChecksum(l.toString())!==b)throw new Z;return f}static extensionChecksum(s){let o=s.length,l=0;for(let u=o-2;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;l*=3;for(let u=o-1;u>=0;u-=2)l+=s.charAt(u).charCodeAt(0)-48;return l*=3,l%10}determineCheckDigit(s){for(let o=0;o<10;o++)if(s===this.CHECK_DIGIT_ENCODINGS[o])return o;throw new Z}static parseExtensionString(s){if(s.length!==5)return null;let o=Fo.parseExtension5String(s);return o==null?null:new Map([[Ht.SUGGESTED_PRICE,o]])}static parseExtension5String(s){let o;switch(s.charAt(0)){case"0":o="£";break;case"5":o="$";break;case"9":switch(s){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}o="";break;default:o="";break}let l=parseInt(s.substring(1)),u=(l/100).toString(),d=l%100,f=d<10?"0"+d:d.toString();return o+u+"."+f}}class bh{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(s,o,l){let u=this.decodeRowStringBuffer,d=this.decodeMiddle(o,l,u),f=u.toString(),x=bh.parseExtensionString(f),b=[new pe((l[0]+l[1])/2,s),new pe(d,s)],v=new Te(f,null,0,b,xe.UPC_EAN_EXTENSION,new Date().getTime());return x!=null&&v.putAllMetadata(x),v}decodeMiddle(s,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=o[1],x=0;for(let b=0;b<2&&f<d;b++){let v=vt.decodeDigit(s,u,f,vt.L_AND_G_PATTERNS);l+=String.fromCharCode(48+v%10);for(let S of u)f+=S;v>=10&&(x|=1<<1-b),b!==1&&(f=s.getNextSet(f),f=s.getNextUnset(f))}if(l.length!==2)throw new Z;if(parseInt(l.toString())%4!==x)throw new Z;return f}static parseExtensionString(s){return s.length!==2?null:new Map([[Ht.ISSUE_NUMBER,parseInt(s)]])}}class jg{static decodeRow(s,o,l){let u=vt.findGuardPattern(o,l,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Fo().decodeRow(s,o,u)}catch{return new bh().decodeRow(s,o,u)}}}jg.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class He extends vt{constructor(){super(),this.decodeRowStringBuffer="",He.L_AND_G_PATTERNS=He.L_PATTERNS.map(s=>Int32Array.from(s));for(let s=10;s<20;s++){let o=He.L_PATTERNS[s-10],l=new Int32Array(o.length);for(let u=0;u<o.length;u++)l[u]=o[o.length-u-1];He.L_AND_G_PATTERNS[s]=l}}decodeRow(s,o,l){let u=He.findStartGuardPattern(o),d=l==null?null:l.get(D.NEED_RESULT_POINT_CALLBACK);if(d!=null){const re=new pe((u[0]+u[1])/2,s);d.foundPossibleResultPoint(re)}let f=this.decodeMiddle(o,u,this.decodeRowStringBuffer),x=f.rowOffset,b=f.resultString;if(d!=null){const re=new pe(x,s);d.foundPossibleResultPoint(re)}let v=this.decodeEnd(o,x);if(d!=null){const re=new pe((v[0]+v[1])/2,s);d.foundPossibleResultPoint(re)}let S=v[1],M=S+(S-v[0]);if(M>=o.getSize()||!o.isRange(S,M,!1))throw new Z;let R=b.toString();if(R.length<8)throw new L;if(!He.checkChecksum(R))throw new A;let V=(u[1]+u[0])/2,H=(v[1]+v[0])/2,G=this.getBarcodeFormat(),q=[new pe(V,s),new pe(H,s)],Q=new Te(R,null,0,q,G,new Date().getTime()),le=0;try{let re=jg.decodeRow(s,o,v[1]);Q.putMetadata(Ht.UPC_EAN_EXTENSION,re.getText()),Q.putAllMetadata(re.getResultMetadata()),Q.addResultPoints(re.getResultPoints()),le=re.getText().length}catch{}let ce=l==null?null:l.get(D.ALLOWED_EAN_EXTENSIONS);if(ce!=null){let re=!1;for(let Le in ce)if(le.toString()===Le){re=!0;break}if(!re)throw new Z}return Q}decodeEnd(s,o){return He.findGuardPattern(s,o,!1,He.START_END_PATTERN,new Int32Array(He.START_END_PATTERN.length).fill(0))}static checkChecksum(s){return He.checkStandardUPCEANChecksum(s)}static checkStandardUPCEANChecksum(s){let o=s.length;if(o===0)return!1;let l=parseInt(s.charAt(o-1),10);return He.getStandardUPCEANChecksum(s.substring(0,o-1))===l}static getStandardUPCEANChecksum(s){let o=s.length,l=0;for(let u=o-1;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new L;l+=d}l*=3;for(let u=o-2;u>=0;u-=2){let d=s.charAt(u).charCodeAt(0)-48;if(d<0||d>9)throw new L;l+=d}return(1e3-l)%10}}class Er extends He{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,l){let u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=o[1],x=0;for(let v=0;v<6&&f<d;v++){let S=He.decodeDigit(s,u,f,He.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let M of u)f+=M;S>=10&&(x|=1<<5-v)}l=Er.determineFirstDigit(l,x),f=He.findGuardPattern(s,f,!0,He.MIDDLE_PATTERN,new Int32Array(He.MIDDLE_PATTERN.length).fill(0))[1];for(let v=0;v<6&&f<d;v++){let S=He.decodeDigit(s,u,f,He.L_PATTERNS);l+=String.fromCharCode(48+S);for(let M of u)f+=M}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return xe.EAN_13}static determineFirstDigit(s,o){for(let l=0;l<10;l++)if(o===this.FIRST_DIGIT_ENCODINGS[l])return s=String.fromCharCode(48+l)+s,s;throw new Z}}Er.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class kg extends He{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(s,o,l){const u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f=o[1];for(let b=0;b<4&&f<d;b++){let v=He.decodeDigit(s,u,f,He.L_PATTERNS);l+=String.fromCharCode(48+v);for(let S of u)f+=S}f=He.findGuardPattern(s,f,!0,He.MIDDLE_PATTERN,new Int32Array(He.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<4&&f<d;b++){let v=He.decodeDigit(s,u,f,He.L_PATTERNS);l+=String.fromCharCode(48+v);for(let S of u)f+=S}return{rowOffset:f,resultString:l}}getBarcodeFormat(){return xe.EAN_8}}class Lg extends He{constructor(){super(...arguments),this.ean13Reader=new Er}getBarcodeFormat(){return xe.UPC_A}decode(s,o){return this.maybeReturnResult(this.ean13Reader.decode(s))}decodeRow(s,o,l){return this.maybeReturnResult(this.ean13Reader.decodeRow(s,o,l))}decodeMiddle(s,o,l){return this.ean13Reader.decodeMiddle(s,o,l)}maybeReturnResult(s){let o=s.getText();if(o.charAt(0)==="0"){let l=new Te(o.substring(1),null,null,s.getResultPoints(),xe.UPC_A);return s.getResultMetadata()!=null&&l.putAllMetadata(s.getResultMetadata()),l}else throw new Z}reset(){this.ean13Reader.reset()}}class pi extends He{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(s,o,l){const u=this.decodeMiddleCounters.map(v=>v);u[0]=0,u[1]=0,u[2]=0,u[3]=0;const d=s.getSize();let f=o[1],x=0;for(let v=0;v<6&&f<d;v++){const S=pi.decodeDigit(s,u,f,pi.L_AND_G_PATTERNS);l+=String.fromCharCode(48+S%10);for(let M of u)f+=M;S>=10&&(x|=1<<5-v)}let b=pi.determineNumSysAndCheckDigit(l,x);return{rowOffset:f,resultString:b}}decodeEnd(s,o){return pi.findGuardPatternWithoutCounters(s,o,!0,pi.MIDDLE_END_PATTERN)}checkChecksum(s){return He.checkChecksum(pi.convertUPCEtoUPCA(s))}static determineNumSysAndCheckDigit(s,o){for(let l=0;l<=1;l++)for(let u=0;u<10;u++)if(o===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[l][u]){let d=String.fromCharCode(48+l),f=String.fromCharCode(48+u);return d+s+f}throw Z.getNotFoundInstance()}getBarcodeFormat(){return xe.UPC_E}static convertUPCEtoUPCA(s){const o=s.slice(1,7).split("").map(d=>d.charCodeAt(0)),l=new de;l.append(s.charAt(0));let u=o[5];switch(u){case 0:case 1:case 2:l.appendChars(o,0,2),l.append(u),l.append("0000"),l.appendChars(o,2,3);break;case 3:l.appendChars(o,0,3),l.append("00000"),l.appendChars(o,3,2);break;case 4:l.appendChars(o,0,4),l.append("00000"),l.append(o[4]);break;default:l.appendChars(o,0,5),l.append("0000"),l.append(u);break}return s.length>=8&&l.append(s.charAt(7)),l.toString()}}pi.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),pi.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class wh extends Rt{constructor(s){super();let o=s==null?null:s.get(D.POSSIBLE_FORMATS),l=[];i(o)?(l.push(new Er),l.push(new Lg),l.push(new kg),l.push(new pi)):(o.indexOf(xe.EAN_13)>-1&&l.push(new Er),o.indexOf(xe.UPC_A)>-1&&l.push(new Lg),o.indexOf(xe.EAN_8)>-1&&l.push(new kg),o.indexOf(xe.UPC_E)>-1&&l.push(new pi)),this.readers=l}decodeRow(s,o,l){for(let u of this.readers)try{const d=u.decodeRow(s,o,l),f=d.getBarcodeFormat()===xe.EAN_13&&d.getText().charAt(0)==="0",x=l==null?null:l.get(D.POSSIBLE_FORMATS),b=x==null||x.includes(xe.UPC_A);if(f&&b){const v=d.getRawBytes(),S=new Te(d.getText().substring(1),v,v?v.length:null,d.getResultPoints(),xe.UPC_A);return S.putAllMetadata(d.getResultMetadata()),S}return d}catch{}throw new Z}reset(){for(let s of this.readers)s.reset()}}class on extends Rt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(s,o){for(let l=0;l<o.length;l++)if(Rt.patternMatchVariance(s,o[l],on.MAX_INDIVIDUAL_VARIANCE)<on.MAX_AVG_VARIANCE)return l;throw new Z}static count(s){return Fe.sum(new Int32Array(s))}static increment(s,o){let l=0,u=o[0];for(let d=1;d<s.length;d++)o[d]>u&&(u=o[d],l=d);s[l]++}static decrement(s,o){let l=0,u=o[0];for(let d=1;d<s.length;d++)o[d]<u&&(u=o[d],l=d);s[l]--}static isFinderPattern(s){let o=s[0]+s[1],l=o+s[2]+s[3],u=o/l;if(u>=on.MIN_FINDER_PATTERN_RATIO&&u<=on.MAX_FINDER_PATTERN_RATIO){let d=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let x of s)x>f&&(f=x),x<d&&(d=x);return f<10*d}return!1}}on.MAX_AVG_VARIANCE=.2,on.MAX_INDIVIDUAL_VARIANCE=.45,on.MIN_FINDER_PATTERN_RATIO=9.5/12,on.MAX_FINDER_PATTERN_RATIO=12.5/14;class la{constructor(s,o){this.value=s,this.checksumPortion=o}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(s){if(!(s instanceof la))return!1;const o=s;return this.value===o.value&&this.checksumPortion===o.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Hc{constructor(s,o,l,u,d){this.value=s,this.startEnd=o,this.value=s,this.startEnd=o,this.resultPoints=new Array,this.resultPoints.push(new pe(l,d)),this.resultPoints.push(new pe(u,d))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(s){if(!(s instanceof Hc))return!1;const o=s;return this.value===o.value}hashCode(){return this.value}}class Mi{constructor(){}static getRSSvalue(s,o,l){let u=0;for(let b of s)u+=b;let d=0,f=0,x=s.length;for(let b=0;b<x-1;b++){let v;for(v=1,f|=1<<b;v<s[b];v++,f&=~(1<<b)){let S=Mi.combins(u-v-1,x-b-2);if(l&&f===0&&u-v-(x-b-1)>=x-b-1&&(S-=Mi.combins(u-v-(x-b),x-b-2)),x-b-1>1){let M=0;for(let R=u-v-(x-b-2);R>o;R--)M+=Mi.combins(u-v-R-1,x-b-3);S-=M*(x-1-b)}else u-v>o&&S--;d+=S}u-=v}return d}static combins(s,o){let l,u;s-o>o?(u=o,l=s-o):(u=s-o,l=o);let d=1,f=1;for(let x=s;x>l;x--)d*=x,f<=u&&(d/=f,f++);for(;f<=u;)d/=f,f++;return d}}class vA{static buildBitArray(s){let o=s.length*2-1;s[s.length-1].getRightChar()==null&&(o-=1);let l=12*o,u=new k(l),d=0,x=s[0].getRightChar().getValue();for(let b=11;b>=0;--b)x&1<<b&&u.set(d),d++;for(let b=1;b<s.length;++b){let v=s[b],S=v.getLeftChar().getValue();for(let M=11;M>=0;--M)S&1<<M&&u.set(d),d++;if(v.getRightChar()!=null){let M=v.getRightChar().getValue();for(let R=11;R>=0;--R)M&1<<R&&u.set(d),d++}}return u}}class Ar{constructor(s,o){o?this.decodedInformation=null:(this.finished=s,this.decodedInformation=o)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class vh{constructor(s){this.newPosition=s}getNewPosition(){return this.newPosition}}class An extends vh{constructor(s,o){super(s),this.value=o}getValue(){return this.value}isFNC1(){return this.value===An.FNC1}}An.FNC1="$";class Sr extends vh{constructor(s,o,l){super(s),l?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=o}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Jn extends vh{constructor(s,o,l){if(super(s),o<0||o>10||l<0||l>10)throw new L;this.firstDigit=o,this.secondDigit=l}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Jn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Jn.FNC1}isAnyFNC1(){return this.firstDigit===Jn.FNC1||this.secondDigit===Jn.FNC1}}Jn.FNC1=10;class me{constructor(){}static parseFieldsInGeneralPurpose(s){if(!s)return null;if(s.length<2)throw new Z;let o=s.substring(0,2);for(let d of me.TWO_DIGIT_DATA_LENGTH)if(d[0]===o)return d[1]===me.VARIABLE_LENGTH?me.processVariableAI(2,d[2],s):me.processFixedAI(2,d[1],s);if(s.length<3)throw new Z;let l=s.substring(0,3);for(let d of me.THREE_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===me.VARIABLE_LENGTH?me.processVariableAI(3,d[2],s):me.processFixedAI(3,d[1],s);for(let d of me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(d[0]===l)return d[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,d[2],s):me.processFixedAI(4,d[1],s);if(s.length<4)throw new Z;let u=s.substring(0,4);for(let d of me.FOUR_DIGIT_DATA_LENGTH)if(d[0]===u)return d[1]===me.VARIABLE_LENGTH?me.processVariableAI(4,d[2],s):me.processFixedAI(4,d[1],s);throw new Z}static processFixedAI(s,o,l){if(l.length<s)throw new Z;let u=l.substring(0,s);if(l.length<s+o)throw new Z;let d=l.substring(s,s+o),f=l.substring(s+o),x="("+u+")"+d,b=me.parseFieldsInGeneralPurpose(f);return b==null?x:x+b}static processVariableAI(s,o,l){let u=l.substring(0,s),d;l.length<s+o?d=l.length:d=s+o;let f=l.substring(s,d),x=l.substring(d),b="("+u+")"+f,v=me.parseFieldsInGeneralPurpose(x);return v==null?b:b+v}}me.VARIABLE_LENGTH=[],me.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",me.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",me.VARIABLE_LENGTH,20],["22",me.VARIABLE_LENGTH,29],["30",me.VARIABLE_LENGTH,8],["37",me.VARIABLE_LENGTH,8],["90",me.VARIABLE_LENGTH,30],["91",me.VARIABLE_LENGTH,30],["92",me.VARIABLE_LENGTH,30],["93",me.VARIABLE_LENGTH,30],["94",me.VARIABLE_LENGTH,30],["95",me.VARIABLE_LENGTH,30],["96",me.VARIABLE_LENGTH,30],["97",me.VARIABLE_LENGTH,3],["98",me.VARIABLE_LENGTH,30],["99",me.VARIABLE_LENGTH,30]],me.THREE_DIGIT_DATA_LENGTH=[["240",me.VARIABLE_LENGTH,30],["241",me.VARIABLE_LENGTH,30],["242",me.VARIABLE_LENGTH,6],["250",me.VARIABLE_LENGTH,30],["251",me.VARIABLE_LENGTH,30],["253",me.VARIABLE_LENGTH,17],["254",me.VARIABLE_LENGTH,20],["400",me.VARIABLE_LENGTH,30],["401",me.VARIABLE_LENGTH,30],["402",17],["403",me.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",me.VARIABLE_LENGTH,20],["421",me.VARIABLE_LENGTH,15],["422",3],["423",me.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],me.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",me.VARIABLE_LENGTH,15],["391",me.VARIABLE_LENGTH,18],["392",me.VARIABLE_LENGTH,15],["393",me.VARIABLE_LENGTH,18],["703",me.VARIABLE_LENGTH,30]],me.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",me.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",me.VARIABLE_LENGTH,20],["8003",me.VARIABLE_LENGTH,30],["8004",me.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",me.VARIABLE_LENGTH,30],["8008",me.VARIABLE_LENGTH,12],["8018",18],["8020",me.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",me.VARIABLE_LENGTH,70],["8200",me.VARIABLE_LENGTH,70]];class ca{constructor(s){this.buffer=new de,this.information=s}decodeAllCodes(s,o){let l=o,u=null;do{let d=this.decodeGeneralPurposeField(l,u),f=me.parseFieldsInGeneralPurpose(d.getNewString());if(f!=null&&s.append(f),d.isRemaining()?u=""+d.getRemainingValue():u=null,l===d.getNewPosition())break;l=d.getNewPosition()}while(!0);return s.toString()}isStillNumeric(s){if(s+7>this.information.getSize())return s+4<=this.information.getSize();for(let o=s;o<s+3;++o)if(this.information.get(o))return!0;return this.information.get(s+3)}decodeNumeric(s){if(s+7>this.information.getSize()){let d=this.extractNumericValueFromBitArray(s,4);return d===0?new Jn(this.information.getSize(),Jn.FNC1,Jn.FNC1):new Jn(this.information.getSize(),d-1,Jn.FNC1)}let o=this.extractNumericValueFromBitArray(s,7),l=(o-8)/11,u=(o-8)%11;return new Jn(s+7,l,u)}extractNumericValueFromBitArray(s,o){return ca.extractNumericValueFromBitArray(this.information,s,o)}static extractNumericValueFromBitArray(s,o,l){let u=0;for(let d=0;d<l;++d)s.get(o+d)&&(u|=1<<l-d-1);return u}decodeGeneralPurposeField(s,o){this.buffer.setLengthToZero(),o!=null&&this.buffer.append(o),this.current.setPosition(s);let l=this.parseBlocks();return l!=null&&l.isRemaining()?new Sr(this.current.getPosition(),this.buffer.toString(),l.getRemainingValue()):new Sr(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let s,o;do{let l=this.current.getPosition();if(this.current.isAlpha()?(o=this.parseAlphaBlock(),s=o.isFinished()):this.current.isIsoIec646()?(o=this.parseIsoIec646Block(),s=o.isFinished()):(o=this.parseNumericBlock(),s=o.isFinished()),!(l!==this.current.getPosition())&&!s)break}while(!s);return o.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let s=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFirstDigitFNC1()){let o;return s.isSecondDigitFNC1()?o=new Sr(this.current.getPosition(),this.buffer.toString()):o=new Sr(this.current.getPosition(),this.buffer.toString(),s.getSecondDigit()),new Ar(!0,o)}if(this.buffer.append(s.getFirstDigit()),s.isSecondDigitFNC1()){let o=new Sr(this.current.getPosition(),this.buffer.toString());return new Ar(!0,o)}this.buffer.append(s.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ar(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let s=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Sr(this.current.getPosition(),this.buffer.toString());return new Ar(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ar(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let s=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(s.getNewPosition()),s.isFNC1()){let o=new Sr(this.current.getPosition(),this.buffer.toString());return new Ar(!0,o)}this.buffer.append(s.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ar(!1)}isStillIsoIec646(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+7>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<116)return!0;if(s+8>this.information.getSize())return!1;let u=this.extractNumericValueFromBitArray(s,8);return u>=232&&u<253}decodeIsoIec646(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new An(s+5,An.FNC1);if(o>=5&&o<15)return new An(s+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(s,7);if(l>=64&&l<90)return new An(s+7,""+(l+1));if(l>=90&&l<116)return new An(s+7,""+(l+7));let u=this.extractNumericValueFromBitArray(s,8),d;switch(u){case 232:d="!";break;case 233:d='"';break;case 234:d="%";break;case 235:d="&";break;case 236:d="'";break;case 237:d="(";break;case 238:d=")";break;case 239:d="*";break;case 240:d="+";break;case 241:d=",";break;case 242:d="-";break;case 243:d=".";break;case 244:d="/";break;case 245:d=":";break;case 246:d=";";break;case 247:d="<";break;case 248:d="=";break;case 249:d=">";break;case 250:d="?";break;case 251:d="_";break;case 252:d=" ";break;default:throw new L}return new An(s+8,d)}isStillAlpha(s){if(s+5>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(s,5);if(o>=5&&o<16)return!0;if(s+6>this.information.getSize())return!1;let l=this.extractNumericValueFromBitArray(s,6);return l>=16&&l<63}decodeAlphanumeric(s){let o=this.extractNumericValueFromBitArray(s,5);if(o===15)return new An(s+5,An.FNC1);if(o>=5&&o<15)return new An(s+5,"0"+(o-5));let l=this.extractNumericValueFromBitArray(s,6);if(l>=32&&l<58)return new An(s+6,""+(l+33));let u;switch(l){case 58:u="*";break;case 59:u=",";break;case 60:u="-";break;case 61:u=".";break;case 62:u="/";break;default:throw new _i("Decoding invalid alphanumeric value: "+l)}return new An(s+6,u)}isAlphaTo646ToAlphaLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<5&&o+s<this.information.getSize();++o)if(o===2){if(!this.information.get(s+2))return!1}else if(this.information.get(s+o))return!1;return!0}isAlphaOr646ToNumericLatch(s){if(s+3>this.information.getSize())return!1;for(let o=s;o<s+3;++o)if(this.information.get(o))return!1;return!0}isNumericToAlphaNumericLatch(s){if(s+1>this.information.getSize())return!1;for(let o=0;o<4&&o+s<this.information.getSize();++o)if(this.information.get(s+o))return!1;return!0}}class Eh{constructor(s){this.information=s,this.generalDecoder=new ca(s)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Sn extends Eh{constructor(s){super(s)}encodeCompressedGtin(s,o){s.append("(01)");let l=s.length();s.append("9"),this.encodeCompressedGtinWithoutAI(s,o,l)}encodeCompressedGtinWithoutAI(s,o,l){for(let u=0;u<4;++u){let d=this.getGeneralDecoder().extractNumericValueFromBitArray(o+10*u,10);d/100===0&&s.append("0"),d/10===0&&s.append("0"),s.append(d)}Sn.appendCheckDigit(s,l)}static appendCheckDigit(s,o){let l=0;for(let u=0;u<13;u++){let d=s.charAt(u+o).charCodeAt(0)-48;l+=u&1?d:3*d}l=10-l%10,l===10&&(l=0),s.append(l)}}Sn.GTIN_SIZE=40;class ua extends Sn{constructor(s){super(s)}parseInformation(){let s=new de;s.append("(01)");let o=s.length(),l=this.getGeneralDecoder().extractNumericValueFromBitArray(ua.HEADER_SIZE,4);return s.append(l),this.encodeCompressedGtinWithoutAI(s,ua.HEADER_SIZE+4,o),this.getGeneralDecoder().decodeAllCodes(s,ua.HEADER_SIZE+44)}}ua.HEADER_SIZE=4;class Gc extends Eh{constructor(s){super(s)}parseInformation(){let s=new de;return this.getGeneralDecoder().decodeAllCodes(s,Gc.HEADER_SIZE)}}Gc.HEADER_SIZE=5;class Yc extends Sn{constructor(s){super(s)}encodeCompressedWeight(s,o,l){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(o,l);this.addWeightCode(s,u);let d=this.checkWeight(u),f=1e5;for(let x=0;x<5;++x)d/f===0&&s.append("0"),f/=10;s.append(d)}}class Ii extends Yc{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()!=Ii.HEADER_SIZE+Yc.GTIN_SIZE+Ii.WEIGHT_SIZE)throw new Z;let s=new de;return this.encodeCompressedGtin(s,Ii.HEADER_SIZE),this.encodeCompressedWeight(s,Ii.HEADER_SIZE+Yc.GTIN_SIZE,Ii.WEIGHT_SIZE),s.toString()}}Ii.HEADER_SIZE=5,Ii.WEIGHT_SIZE=15;class EA extends Ii{constructor(s){super(s)}addWeightCode(s,o){s.append("(3103)")}checkWeight(s){return s}}class AA extends Ii{constructor(s){super(s)}addWeightCode(s,o){o<1e4?s.append("(3202)"):s.append("(3203)")}checkWeight(s){return s<1e4?s:s-1e4}}class Di extends Sn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<Di.HEADER_SIZE+Sn.GTIN_SIZE)throw new Z;let s=new de;this.encodeCompressedGtin(s,Di.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(Di.HEADER_SIZE+Sn.GTIN_SIZE,Di.LAST_DIGIT_SIZE);s.append("(392"),s.append(o),s.append(")");let l=this.getGeneralDecoder().decodeGeneralPurposeField(Di.HEADER_SIZE+Sn.GTIN_SIZE+Di.LAST_DIGIT_SIZE,null);return s.append(l.getNewString()),s.toString()}}Di.HEADER_SIZE=8,Di.LAST_DIGIT_SIZE=2;class pn extends Sn{constructor(s){super(s)}parseInformation(){if(this.getInformation().getSize()<pn.HEADER_SIZE+Sn.GTIN_SIZE)throw new Z;let s=new de;this.encodeCompressedGtin(s,pn.HEADER_SIZE);let o=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Sn.GTIN_SIZE,pn.LAST_DIGIT_SIZE);s.append("(393"),s.append(o),s.append(")");let l=this.getGeneralDecoder().extractNumericValueFromBitArray(pn.HEADER_SIZE+Sn.GTIN_SIZE+pn.LAST_DIGIT_SIZE,pn.FIRST_THREE_DIGITS_SIZE);l/100==0&&s.append("0"),l/10==0&&s.append("0"),s.append(l);let u=this.getGeneralDecoder().decodeGeneralPurposeField(pn.HEADER_SIZE+Sn.GTIN_SIZE+pn.LAST_DIGIT_SIZE+pn.FIRST_THREE_DIGITS_SIZE,null);return s.append(u.getNewString()),s.toString()}}pn.HEADER_SIZE=8,pn.LAST_DIGIT_SIZE=2,pn.FIRST_THREE_DIGITS_SIZE=10;class ht extends Yc{constructor(s,o,l){super(s),this.dateCode=l,this.firstAIdigits=o}parseInformation(){if(this.getInformation().getSize()!=ht.HEADER_SIZE+ht.GTIN_SIZE+ht.WEIGHT_SIZE+ht.DATE_SIZE)throw new Z;let s=new de;return this.encodeCompressedGtin(s,ht.HEADER_SIZE),this.encodeCompressedWeight(s,ht.HEADER_SIZE+ht.GTIN_SIZE,ht.WEIGHT_SIZE),this.encodeCompressedDate(s,ht.HEADER_SIZE+ht.GTIN_SIZE+ht.WEIGHT_SIZE),s.toString()}encodeCompressedDate(s,o){let l=this.getGeneralDecoder().extractNumericValueFromBitArray(o,ht.DATE_SIZE);if(l==38400)return;s.append("("),s.append(this.dateCode),s.append(")");let u=l%32;l/=32;let d=l%12+1;l/=12;let f=l;f/10==0&&s.append("0"),s.append(f),d/10==0&&s.append("0"),s.append(d),u/10==0&&s.append("0"),s.append(u)}addWeightCode(s,o){s.append("("),s.append(this.firstAIdigits),s.append(o/1e5),s.append(")")}checkWeight(s){return s%1e5}}ht.HEADER_SIZE=8,ht.WEIGHT_SIZE=20,ht.DATE_SIZE=16;function Bg(_){try{if(_.get(1))return new ua(_);if(!_.get(2))return new Gc(_);switch(ca.extractNumericValueFromBitArray(_,1,4)){case 4:return new EA(_);case 5:return new AA(_)}switch(ca.extractNumericValueFromBitArray(_,1,5)){case 12:return new Di(_);case 13:return new pn(_)}switch(ca.extractNumericValueFromBitArray(_,1,7)){case 56:return new ht(_,"310","11");case 57:return new ht(_,"320","11");case 58:return new ht(_,"310","13");case 59:return new ht(_,"320","13");case 60:return new ht(_,"310","15");case 61:return new ht(_,"320","15");case 62:return new ht(_,"310","17");case 63:return new ht(_,"320","17")}}catch(s){throw console.log(s),new _i("unknown decoder: "+_)}}class Cs{constructor(s,o,l,u){this.leftchar=s,this.rightchar=o,this.finderpattern=l,this.maybeLast=u}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(s,o){return s instanceof Cs?Cs.equalsOrNull(s.leftchar,o.leftchar)&&Cs.equalsOrNull(s.rightchar,o.rightchar)&&Cs.equalsOrNull(s.finderpattern,o.finderpattern):!1}static equalsOrNull(s,o){return s===null?o===null:Cs.equals(s,o)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Ah{constructor(s,o,l){this.pairs=s,this.rowNumber=o,this.wasReversed=l}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(s){return this.checkEqualitity(this,s)}toString(){return"{ "+this.pairs+" }"}equals(s,o){return s instanceof Ah?this.checkEqualitity(s,o)&&s.wasReversed===o.wasReversed:!1}checkEqualitity(s,o){if(!s||!o)return;let l;return s.forEach((u,d)=>{o.forEach(f=>{u.getLeftChar().getValue()===f.getLeftChar().getValue()&&u.getRightChar().getValue()===f.getRightChar().getValue()&&u.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(l=!0)})}),l}}class ne extends on{constructor(s){super(...arguments),this.pairs=new Array(ne.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=s===!0}decodeRow(s,o,l){this.pairs.length=0,this.startFromEven=!1;try{return ne.constructResult(this.decodeRow2pairs(s,o))}catch(u){this.verbose&&console.log(u)}return this.pairs.length=0,this.startFromEven=!0,ne.constructResult(this.decodeRow2pairs(s,o))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(s,o){let l=!1;for(;!l;)try{this.pairs.push(this.retrieveNextPair(o,this.pairs,s))}catch(d){if(d instanceof Z){if(!this.pairs.length)throw new Z;l=!0}}if(this.checkChecksum())return this.pairs;let u;if(this.rows.length?u=!0:u=!1,this.storeRow(s,!1),u){let d=this.checkRowsBoolean(!1);if(d!=null||(d=this.checkRowsBoolean(!0),d!=null))return d}throw new Z}checkRowsBoolean(s){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,s&&(this.rows=this.rows.reverse());let o=null;try{o=this.checkRows(new Array,0)}catch(l){this.verbose&&console.log(l)}return s&&(this.rows=this.rows.reverse()),o}checkRows(s,o){for(let l=o;l<this.rows.length;l++){let u=this.rows[l];this.pairs.length=0;for(let f of s)this.pairs.push(f.getPairs());if(this.pairs.push(u.getPairs()),!ne.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let d=new Array(s);d.push(u);try{return this.checkRows(d,l+1)}catch(f){this.verbose&&console.log(f)}}throw new Z}static isValidSequence(s){for(let o of ne.FINDER_PATTERN_SEQUENCES){if(s.length>o.length)continue;let l=!0;for(let u=0;u<s.length;u++)if(s[u].getFinderPattern().getValue()!=o[u]){l=!1;break}if(l)return!0}return!1}storeRow(s,o){let l=0,u=!1,d=!1;for(;l<this.rows.length;){let f=this.rows[l];if(f.getRowNumber()>s){d=f.isEquivalent(this.pairs);break}u=f.isEquivalent(this.pairs),l++}d||u||ne.isPartialRow(this.pairs,this.rows)||(this.rows.push(l,new Ah(this.pairs,s,o)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(s,o){for(let l of o)if(l.getPairs().length!==s.length){for(let u of l.getPairs())for(let d of s)if(Cs.equals(u,d))break}}static isPartialRow(s,o){for(let l of o){let u=!0;for(let d of s){let f=!1;for(let x of l.getPairs())if(d.equals(x)){f=!0;break}if(!f){u=!1;break}}if(u)return!0}return!1}getRows(){return this.rows}static constructResult(s){let o=vA.buildBitArray(s),u=Bg(o).parseInformation(),d=s[0].getFinderPattern().getResultPoints(),f=s[s.length-1].getFinderPattern().getResultPoints(),x=[d[0],d[1],f[0],f[1]];return new Te(u,null,null,x,xe.RSS_EXPANDED,null)}checkChecksum(){let s=this.pairs.get(0),o=s.getLeftChar(),l=s.getRightChar();if(l==null)return!1;let u=l.getChecksumPortion(),d=2;for(let x=1;x<this.pairs.size();++x){let b=this.pairs.get(x);u+=b.getLeftChar().getChecksumPortion(),d++;let v=b.getRightChar();v!=null&&(u+=v.getChecksumPortion(),d++)}return u%=211,211*(d-4)+u==o.getValue()}static getNextSecondBar(s,o){let l;return s.get(o)?(l=s.getNextUnset(o),l=s.getNextSet(l)):(l=s.getNextSet(o),l=s.getNextUnset(l)),l}retrieveNextPair(s,o,l){let u=o.length%2==0;this.startFromEven&&(u=!u);let d,f=!0,x=-1;do this.findNextPair(s,o,x),d=this.parseFoundFinderPattern(s,l,u),d==null?x=ne.getNextSecondBar(s,this.startEnd[0]):f=!1;while(f);let b=this.decodeDataCharacter(s,d,u,!0);if(!this.isEmptyPair(o)&&o[o.length-1].mustBeLast())throw new Z;let v;try{v=this.decodeDataCharacter(s,d,u,!1)}catch(S){v=null,this.verbose&&console.log(S)}return new Cs(b,v,d,!0)}isEmptyPair(s){return s.length===0}findNextPair(s,o,l){let u=this.getDecodeFinderCounters();u[0]=0,u[1]=0,u[2]=0,u[3]=0;let d=s.getSize(),f;l>=0?f=l:this.isEmptyPair(o)?f=0:f=o[o.length-1].getFinderPattern().getStartEnd()[1];let x=o.length%2!=0;this.startFromEven&&(x=!x);let b=!1;for(;f<d&&(b=!s.get(f),!!b);)f++;let v=0,S=f;for(let M=f;M<d;M++)if(s.get(M)!=b)u[v]++;else{if(v==3){if(x&&ne.reverseCounters(u),ne.isFinderPattern(u)){this.startEnd[0]=S,this.startEnd[1]=M;return}x&&ne.reverseCounters(u),S+=u[0]+u[1],u[0]=u[2],u[1]=u[3],u[2]=0,u[3]=0,v--}else v++;u[v]=1,b=!b}throw new Z}static reverseCounters(s){let o=s.length;for(let l=0;l<o/2;++l){let u=s[l];s[l]=s[o-l-1],s[o-l-1]=u}}parseFoundFinderPattern(s,o,l){let u,d,f;if(l){let v=this.startEnd[0]-1;for(;v>=0&&!s.get(v);)v--;v++,u=this.startEnd[0]-v,d=v,f=this.startEnd[1]}else d=this.startEnd[0],f=s.getNextUnset(this.startEnd[1]+1),u=f-this.startEnd[1];let x=this.getDecodeFinderCounters();I.arraycopy(x,0,x,1,x.length-1),x[0]=u;let b;try{b=this.parseFinderValue(x,ne.FINDER_PATTERNS)}catch{return null}return new Hc(b,[d,f],d,f,o)}decodeDataCharacter(s,o,l,u){let d=this.getDataCharacterCounters();for(let it=0;it<d.length;it++)d[it]=0;if(u)ne.recordPatternInReverse(s,o.getStartEnd()[0],d);else{ne.recordPattern(s,o.getStartEnd()[1],d);for(let it=0,en=d.length-1;it<en;it++,en--){let Bn=d[it];d[it]=d[en],d[en]=Bn}}let f=17,x=Fe.sum(new Int32Array(d))/f,b=(o.getStartEnd()[1]-o.getStartEnd()[0])/15;if(Math.abs(x-b)/b>.3)throw new Z;let v=this.getOddCounts(),S=this.getEvenCounts(),M=this.getOddRoundingErrors(),R=this.getEvenRoundingErrors();for(let it=0;it<d.length;it++){let en=1*d[it]/x,Bn=en+.5;if(Bn<1){if(en<.3)throw new Z;Bn=1}else if(Bn>8){if(en>8.7)throw new Z;Bn=8}let ga=it/2;it&1?(S[ga]=Bn,R[ga]=en-Bn):(v[ga]=Bn,M[ga]=en-Bn)}this.adjustOddEvenCounts(f);let V=4*o.getValue()+(l?0:2)+(u?0:1)-1,H=0,G=0;for(let it=v.length-1;it>=0;it--){if(ne.isNotA1left(o,l,u)){let en=ne.WEIGHTS[V][2*it];G+=v[it]*en}H+=v[it]}let q=0;for(let it=S.length-1;it>=0;it--)if(ne.isNotA1left(o,l,u)){let en=ne.WEIGHTS[V][2*it+1];q+=S[it]*en}let Q=G+q;if(H&1||H>13||H<4)throw new Z;let le=(13-H)/2,ce=ne.SYMBOL_WIDEST[le],re=9-ce,Le=Mi.getRSSvalue(v,ce,!0),Ne=Mi.getRSSvalue(S,re,!1),Tn=ne.EVEN_TOTAL_SUBSET[le],xi=ne.GSUM[le],Nn=Le*Tn+Ne+xi;return new la(Nn,Q)}static isNotA1left(s,o,l){return!(s.getValue()==0&&o&&l)}adjustOddEvenCounts(s){let o=Fe.sum(new Int32Array(this.getOddCounts())),l=Fe.sum(new Int32Array(this.getEvenCounts())),u=!1,d=!1;o>13?d=!0:o<4&&(u=!0);let f=!1,x=!1;l>13?x=!0:l<4&&(f=!0);let b=o+l-s,v=(o&1)==1,S=(l&1)==0;if(b==1)if(v){if(S)throw new Z;d=!0}else{if(!S)throw new Z;x=!0}else if(b==-1)if(v){if(S)throw new Z;u=!0}else{if(!S)throw new Z;f=!0}else if(b==0){if(v){if(!S)throw new Z;o<l?(u=!0,x=!0):(d=!0,f=!0)}else if(S)throw new Z}else throw new Z;if(u){if(d)throw new Z;ne.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(d&&ne.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(x)throw new Z;ne.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&ne.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ne.SYMBOL_WIDEST=[7,5,4,3,1],ne.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ne.GSUM=[0,348,1388,2948,3988],ne.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ne.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ne.FINDER_PAT_A=0,ne.FINDER_PAT_B=1,ne.FINDER_PAT_C=2,ne.FINDER_PAT_D=3,ne.FINDER_PAT_E=4,ne.FINDER_PAT_F=5,ne.FINDER_PATTERN_SEQUENCES=[[ne.FINDER_PAT_A,ne.FINDER_PAT_A],[ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B],[ne.FINDER_PAT_A,ne.FINDER_PAT_C,ne.FINDER_PAT_B,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_C],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_E,ne.FINDER_PAT_B,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F],[ne.FINDER_PAT_A,ne.FINDER_PAT_A,ne.FINDER_PAT_B,ne.FINDER_PAT_B,ne.FINDER_PAT_C,ne.FINDER_PAT_D,ne.FINDER_PAT_D,ne.FINDER_PAT_E,ne.FINDER_PAT_E,ne.FINDER_PAT_F,ne.FINDER_PAT_F]],ne.MAX_PAIRS=11;class SA extends la{constructor(s,o,l){super(s,o),this.count=0,this.finderPattern=l}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Et extends on{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(s,o,l){const u=this.decodePair(o,!1,s,l);Et.addOrTally(this.possibleLeftPairs,u),o.reverse();let d=this.decodePair(o,!0,s,l);Et.addOrTally(this.possibleRightPairs,d),o.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let x of this.possibleRightPairs)if(x.getCount()>1&&Et.checkChecksum(f,x))return Et.constructResult(f,x)}throw new Z}static addOrTally(s,o){if(o==null)return;let l=!1;for(let u of s)if(u.getValue()===o.getValue()){u.incrementCount(),l=!0;break}l||s.push(o)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(s,o){let l=4537077*s.getValue()+o.getValue(),u=new String(l).toString(),d=new de;for(let v=13-u.length;v>0;v--)d.append("0");d.append(u);let f=0;for(let v=0;v<13;v++){let S=d.charAt(v).charCodeAt(0)-48;f+=v&1?S:3*S}f=10-f%10,f===10&&(f=0),d.append(f.toString());let x=s.getFinderPattern().getResultPoints(),b=o.getFinderPattern().getResultPoints();return new Te(d.toString(),null,0,[x[0],x[1],b[0],b[1]],xe.RSS_14,new Date().getTime())}static checkChecksum(s,o){let l=(s.getChecksumPortion()+16*o.getChecksumPortion())%79,u=9*s.getFinderPattern().getValue()+o.getFinderPattern().getValue();return u>72&&u--,u>8&&u--,l===u}decodePair(s,o,l,u){try{let d=this.findFinderPattern(s,o),f=this.parseFoundFinderPattern(s,l,o,d),x=u==null?null:u.get(D.NEED_RESULT_POINT_CALLBACK);if(x!=null){let S=(d[0]+d[1])/2;o&&(S=s.getSize()-1-S),x.foundPossibleResultPoint(new pe(S,l))}let b=this.decodeDataCharacter(s,f,!0),v=this.decodeDataCharacter(s,f,!1);return new SA(1597*b.getValue()+v.getValue(),b.getChecksumPortion()+4*v.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(s,o,l){let u=this.getDataCharacterCounters();for(let q=0;q<u.length;q++)u[q]=0;if(l)Rt.recordPatternInReverse(s,o.getStartEnd()[0],u);else{Rt.recordPattern(s,o.getStartEnd()[1]+1,u);for(let q=0,Q=u.length-1;q<Q;q++,Q--){let le=u[q];u[q]=u[Q],u[Q]=le}}let d=l?16:15,f=Fe.sum(new Int32Array(u))/d,x=this.getOddCounts(),b=this.getEvenCounts(),v=this.getOddRoundingErrors(),S=this.getEvenRoundingErrors();for(let q=0;q<u.length;q++){let Q=u[q]/f,le=Math.floor(Q+.5);le<1?le=1:le>8&&(le=8);let ce=Math.floor(q/2);q&1?(b[ce]=le,S[ce]=Q-le):(x[ce]=le,v[ce]=Q-le)}this.adjustOddEvenCounts(l,d);let M=0,R=0;for(let q=x.length-1;q>=0;q--)R*=9,R+=x[q],M+=x[q];let V=0,H=0;for(let q=b.length-1;q>=0;q--)V*=9,V+=b[q],H+=b[q];let G=R+3*V;if(l){if(M&1||M>12||M<4)throw new Z;let q=(12-M)/2,Q=Et.OUTSIDE_ODD_WIDEST[q],le=9-Q,ce=Mi.getRSSvalue(x,Q,!1),re=Mi.getRSSvalue(b,le,!0),Le=Et.OUTSIDE_EVEN_TOTAL_SUBSET[q],Ne=Et.OUTSIDE_GSUM[q];return new la(ce*Le+re+Ne,G)}else{if(H&1||H>10||H<4)throw new Z;let q=(10-H)/2,Q=Et.INSIDE_ODD_WIDEST[q],le=9-Q,ce=Mi.getRSSvalue(x,Q,!0),re=Mi.getRSSvalue(b,le,!1),Le=Et.INSIDE_ODD_TOTAL_SUBSET[q],Ne=Et.INSIDE_GSUM[q];return new la(re*Le+ce+Ne,G)}}findFinderPattern(s,o){let l=this.getDecodeFinderCounters();l[0]=0,l[1]=0,l[2]=0,l[3]=0;let u=s.getSize(),d=!1,f=0;for(;f<u&&(d=!s.get(f),o!==d);)f++;let x=0,b=f;for(let v=f;v<u;v++)if(s.get(v)!==d)l[x]++;else{if(x===3){if(on.isFinderPattern(l))return[b,v];b+=l[0]+l[1],l[0]=l[2],l[1]=l[3],l[2]=0,l[3]=0,x--}else x++;l[x]=1,d=!d}throw new Z}parseFoundFinderPattern(s,o,l,u){let d=s.get(u[0]),f=u[0]-1;for(;f>=0&&d!==s.get(f);)f--;f++;const x=u[0]-f,b=this.getDecodeFinderCounters(),v=new Int32Array(b.length);I.arraycopy(b,0,v,1,b.length-1),v[0]=x;const S=this.parseFinderValue(v,Et.FINDER_PATTERNS);let M=f,R=u[1];return l&&(M=s.getSize()-1-M,R=s.getSize()-1-R),new Hc(S,[f,u[1]],M,R,o)}adjustOddEvenCounts(s,o){let l=Fe.sum(new Int32Array(this.getOddCounts())),u=Fe.sum(new Int32Array(this.getEvenCounts())),d=!1,f=!1,x=!1,b=!1;s?(l>12?f=!0:l<4&&(d=!0),u>12?b=!0:u<4&&(x=!0)):(l>11?f=!0:l<5&&(d=!0),u>10?b=!0:u<4&&(x=!0));let v=l+u-o,S=(l&1)===(s?1:0),M=(u&1)===1;if(v===1)if(S){if(M)throw new Z;f=!0}else{if(!M)throw new Z;b=!0}else if(v===-1)if(S){if(M)throw new Z;d=!0}else{if(!M)throw new Z;x=!0}else if(v===0){if(S){if(!M)throw new Z;l<u?(d=!0,b=!0):(f=!0,x=!0)}else if(M)throw new Z}else throw new Z;if(d){if(f)throw new Z;on.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&on.decrement(this.getOddCounts(),this.getOddRoundingErrors()),x){if(b)throw new Z;on.increment(this.getEvenCounts(),this.getOddRoundingErrors())}b&&on.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Et.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Et.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Et.OUTSIDE_GSUM=[0,161,961,2015,2715],Et.INSIDE_GSUM=[0,336,1036,1516],Et.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Et.INSIDE_ODD_WIDEST=[2,4,6,8],Et.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class da extends Rt{constructor(s,o){super(),this.readers=[],this.verbose=o===!0;const l=s?s.get(D.POSSIBLE_FORMATS):null,u=s&&s.get(D.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;l?((l.includes(xe.EAN_13)||l.includes(xe.UPC_A)||l.includes(xe.EAN_8)||l.includes(xe.UPC_E))&&this.readers.push(new wh(s)),l.includes(xe.CODE_39)&&this.readers.push(new Bt(u)),l.includes(xe.CODE_128)&&this.readers.push(new he),l.includes(xe.ITF)&&this.readers.push(new tt),l.includes(xe.RSS_14)&&this.readers.push(new Et),l.includes(xe.RSS_EXPANDED)&&this.readers.push(new ne(this.verbose))):(this.readers.push(new wh(s)),this.readers.push(new Bt),this.readers.push(new wh(s)),this.readers.push(new he),this.readers.push(new tt),this.readers.push(new Et),this.readers.push(new ne(this.verbose)))}decodeRow(s,o,l){for(let u=0;u<this.readers.length;u++)try{return this.readers[u].decodeRow(s,o,l)}catch{}throw new Z}reset(){this.readers.forEach(s=>s.reset())}}class CA extends Qe{constructor(s=500,o){super(new da(o),s,o)}}class Xe{constructor(s,o,l){this.ecCodewords=s,this.ecBlocks=[o],l&&this.ecBlocks.push(l)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Ge{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Pe{constructor(s,o,l,u,d,f){this.versionNumber=s,this.symbolSizeRows=o,this.symbolSizeColumns=l,this.dataRegionSizeRows=u,this.dataRegionSizeColumns=d,this.ecBlocks=f;let x=0;const b=f.getECCodewords(),v=f.getECBlocks();for(let S of v)x+=S.getCount()*(S.getDataCodewords()+b);this.totalCodewords=x}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(s,o){if(s&1||o&1)throw new L;for(let l of Pe.VERSIONS)if(l.symbolSizeRows===s&&l.symbolSizeColumns===o)return l;throw new L}toString(){return""+this.versionNumber}static buildVersions(){return[new Pe(1,10,10,8,8,new Xe(5,new Ge(1,3))),new Pe(2,12,12,10,10,new Xe(7,new Ge(1,5))),new Pe(3,14,14,12,12,new Xe(10,new Ge(1,8))),new Pe(4,16,16,14,14,new Xe(12,new Ge(1,12))),new Pe(5,18,18,16,16,new Xe(14,new Ge(1,18))),new Pe(6,20,20,18,18,new Xe(18,new Ge(1,22))),new Pe(7,22,22,20,20,new Xe(20,new Ge(1,30))),new Pe(8,24,24,22,22,new Xe(24,new Ge(1,36))),new Pe(9,26,26,24,24,new Xe(28,new Ge(1,44))),new Pe(10,32,32,14,14,new Xe(36,new Ge(1,62))),new Pe(11,36,36,16,16,new Xe(42,new Ge(1,86))),new Pe(12,40,40,18,18,new Xe(48,new Ge(1,114))),new Pe(13,44,44,20,20,new Xe(56,new Ge(1,144))),new Pe(14,48,48,22,22,new Xe(68,new Ge(1,174))),new Pe(15,52,52,24,24,new Xe(42,new Ge(2,102))),new Pe(16,64,64,14,14,new Xe(56,new Ge(2,140))),new Pe(17,72,72,16,16,new Xe(36,new Ge(4,92))),new Pe(18,80,80,18,18,new Xe(48,new Ge(4,114))),new Pe(19,88,88,20,20,new Xe(56,new Ge(4,144))),new Pe(20,96,96,22,22,new Xe(68,new Ge(4,174))),new Pe(21,104,104,24,24,new Xe(56,new Ge(6,136))),new Pe(22,120,120,18,18,new Xe(68,new Ge(6,175))),new Pe(23,132,132,20,20,new Xe(62,new Ge(8,163))),new Pe(24,144,144,22,22,new Xe(62,new Ge(8,156),new Ge(2,155))),new Pe(25,8,18,6,16,new Xe(7,new Ge(1,5))),new Pe(26,8,32,6,14,new Xe(11,new Ge(1,10))),new Pe(27,12,26,10,24,new Xe(14,new Ge(1,16))),new Pe(28,12,36,10,16,new Xe(18,new Ge(1,22))),new Pe(29,16,36,14,16,new Xe(24,new Ge(1,32))),new Pe(30,16,48,14,22,new Xe(28,new Ge(1,49)))]}}Pe.VERSIONS=Pe.buildVersions();class Sh{constructor(s){const o=s.getHeight();if(o<8||o>144||o&1)throw new L;this.version=Sh.readVersion(s),this.mappingBitMatrix=this.extractDataRegion(s),this.readMappingMatrix=new be(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(s){const o=s.getHeight(),l=s.getWidth();return Pe.getVersionForDimensions(o,l)}readCodewords(){const s=new Int8Array(this.version.getTotalCodewords());let o=0,l=4,u=0;const d=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let x=!1,b=!1,v=!1,S=!1;do if(l===d&&u===0&&!x)s[o++]=this.readCorner1(d,f)&255,l-=2,u+=2,x=!0;else if(l===d-2&&u===0&&f&3&&!b)s[o++]=this.readCorner2(d,f)&255,l-=2,u+=2,b=!0;else if(l===d+4&&u===2&&!(f&7)&&!v)s[o++]=this.readCorner3(d,f)&255,l-=2,u+=2,v=!0;else if(l===d-2&&u===0&&(f&7)===4&&!S)s[o++]=this.readCorner4(d,f)&255,l-=2,u+=2,S=!0;else{do l<d&&u>=0&&!this.readMappingMatrix.get(u,l)&&(s[o++]=this.readUtah(l,u,d,f)&255),l-=2,u+=2;while(l>=0&&u<f);l+=1,u+=3;do l>=0&&u<f&&!this.readMappingMatrix.get(u,l)&&(s[o++]=this.readUtah(l,u,d,f)&255),l+=2,u-=2;while(l<d&&u>=0);l+=3,u+=1}while(l<d||u<f);if(o!==this.version.getTotalCodewords())throw new L;return s}readModule(s,o,l,u){return s<0&&(s+=l,o+=4-(l+4&7)),o<0&&(o+=u,s+=4-(u+4&7)),this.readMappingMatrix.set(o,s),this.mappingBitMatrix.get(o,s)}readUtah(s,o,l,u){let d=0;return this.readModule(s-2,o-2,l,u)&&(d|=1),d<<=1,this.readModule(s-2,o-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,o-2,l,u)&&(d|=1),d<<=1,this.readModule(s-1,o-1,l,u)&&(d|=1),d<<=1,this.readModule(s-1,o,l,u)&&(d|=1),d<<=1,this.readModule(s,o-2,l,u)&&(d|=1),d<<=1,this.readModule(s,o-1,l,u)&&(d|=1),d<<=1,this.readModule(s,o,l,u)&&(d|=1),d}readCorner1(s,o){let l=0;return this.readModule(s-1,0,s,o)&&(l|=1),l<<=1,this.readModule(s-1,1,s,o)&&(l|=1),l<<=1,this.readModule(s-1,2,s,o)&&(l|=1),l<<=1,this.readModule(0,o-2,s,o)&&(l|=1),l<<=1,this.readModule(0,o-1,s,o)&&(l|=1),l<<=1,this.readModule(1,o-1,s,o)&&(l|=1),l<<=1,this.readModule(2,o-1,s,o)&&(l|=1),l<<=1,this.readModule(3,o-1,s,o)&&(l|=1),l}readCorner2(s,o){let l=0;return this.readModule(s-3,0,s,o)&&(l|=1),l<<=1,this.readModule(s-2,0,s,o)&&(l|=1),l<<=1,this.readModule(s-1,0,s,o)&&(l|=1),l<<=1,this.readModule(0,o-4,s,o)&&(l|=1),l<<=1,this.readModule(0,o-3,s,o)&&(l|=1),l<<=1,this.readModule(0,o-2,s,o)&&(l|=1),l<<=1,this.readModule(0,o-1,s,o)&&(l|=1),l<<=1,this.readModule(1,o-1,s,o)&&(l|=1),l}readCorner3(s,o){let l=0;return this.readModule(s-1,0,s,o)&&(l|=1),l<<=1,this.readModule(s-1,o-1,s,o)&&(l|=1),l<<=1,this.readModule(0,o-3,s,o)&&(l|=1),l<<=1,this.readModule(0,o-2,s,o)&&(l|=1),l<<=1,this.readModule(0,o-1,s,o)&&(l|=1),l<<=1,this.readModule(1,o-3,s,o)&&(l|=1),l<<=1,this.readModule(1,o-2,s,o)&&(l|=1),l<<=1,this.readModule(1,o-1,s,o)&&(l|=1),l}readCorner4(s,o){let l=0;return this.readModule(s-3,0,s,o)&&(l|=1),l<<=1,this.readModule(s-2,0,s,o)&&(l|=1),l<<=1,this.readModule(s-1,0,s,o)&&(l|=1),l<<=1,this.readModule(0,o-2,s,o)&&(l|=1),l<<=1,this.readModule(0,o-1,s,o)&&(l|=1),l<<=1,this.readModule(1,o-1,s,o)&&(l|=1),l<<=1,this.readModule(2,o-1,s,o)&&(l|=1),l<<=1,this.readModule(3,o-1,s,o)&&(l|=1),l}extractDataRegion(s){const o=this.version.getSymbolSizeRows(),l=this.version.getSymbolSizeColumns();if(s.getHeight()!==o)throw new w("Dimension of bitMatrix must match the version size");const u=this.version.getDataRegionSizeRows(),d=this.version.getDataRegionSizeColumns(),f=o/u|0,x=l/d|0,b=f*u,v=x*d,S=new be(v,b);for(let M=0;M<f;++M){const R=M*u;for(let V=0;V<x;++V){const H=V*d;for(let G=0;G<u;++G){const q=M*(u+2)+1+G,Q=R+G;for(let le=0;le<d;++le){const ce=V*(d+2)+1+le;if(s.get(ce,q)){const re=H+le;S.set(re,Q)}}}}}return S}}class Ch{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o){const l=o.getECBlocks();let u=0;const d=l.getECBlocks();for(let G of d)u+=G.getCount();const f=new Array(u);let x=0;for(let G of d)for(let q=0;q<G.getCount();q++){const Q=G.getDataCodewords(),le=l.getECCodewords()+Q;f[x++]=new Ch(Q,new Uint8Array(le))}const v=f[0].codewords.length-l.getECCodewords(),S=v-1;let M=0;for(let G=0;G<S;G++)for(let q=0;q<x;q++)f[q].codewords[G]=s[M++];const R=o.getVersionNumber()===24,V=R?8:x;for(let G=0;G<V;G++)f[G].codewords[v-1]=s[M++];const H=f[0].codewords.length;for(let G=v;G<H;G++)for(let q=0;q<x;q++){const Q=R?(q+8)%x:q,le=R&&Q>7?G-1:G;f[Q].codewords[le]=s[M++]}if(M!==s.length)throw new w;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class Th{constructor(s){this.bytes=s,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(s){if(s<1||s>32||s>this.available())throw new w(""+s);let o=0,l=this.bitOffset,u=this.byteOffset;const d=this.bytes;if(l>0){const f=8-l,x=s<f?s:f,b=f-x,v=255>>8-x<<b;o=(d[u]&v)>>b,s-=x,l+=x,l===8&&(l=0,u++)}if(s>0){for(;s>=8;)o=o<<8|d[u]&255,u++,s-=8;if(s>0){const f=8-s,x=255>>f<<f;o=o<<s|(d[u]&x)>>f,l+=s}}return this.bitOffset=l,this.byteOffset=u,o}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var Pt;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(Pt||(Pt={}));class Ts{static decode(s){const o=new Th(s),l=new de,u=new de,d=new Array;let f=Pt.ASCII_ENCODE;do if(f===Pt.ASCII_ENCODE)f=this.decodeAsciiSegment(o,l,u);else{switch(f){case Pt.C40_ENCODE:this.decodeC40Segment(o,l);break;case Pt.TEXT_ENCODE:this.decodeTextSegment(o,l);break;case Pt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(o,l);break;case Pt.EDIFACT_ENCODE:this.decodeEdifactSegment(o,l);break;case Pt.BASE256_ENCODE:this.decodeBase256Segment(o,l,d);break;default:throw new L}f=Pt.ASCII_ENCODE}while(f!==Pt.PAD_ENCODE&&o.available()>0);return u.length()>0&&l.append(u.toString()),new Bo(s,l.toString(),d.length===0?null:d,null)}static decodeAsciiSegment(s,o,l){let u=!1;do{let d=s.readBits(8);if(d===0)throw new L;if(d<=128)return u&&(d+=128),o.append(String.fromCharCode(d-1)),Pt.ASCII_ENCODE;if(d===129)return Pt.PAD_ENCODE;if(d<=229){const f=d-130;f<10&&o.append("0"),o.append(""+f)}else switch(d){case 230:return Pt.C40_ENCODE;case 231:return Pt.BASE256_ENCODE;case 232:o.append("");break;case 233:case 234:break;case 235:u=!0;break;case 236:o.append("[)>05"),l.insert(0,"");break;case 237:o.append("[)>06"),l.insert(0,"");break;case 238:return Pt.ANSIX12_ENCODE;case 239:return Pt.TEXT_ENCODE;case 240:return Pt.EDIFACT_ENCODE;case 241:break;default:if(d!==254||s.available()!==0)throw new L;break}}while(s.available()>0);return Pt.ASCII_ENCODE}static decodeC40Segment(s,o){let l=!1;const u=[];let d=0;do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let x=0;x<3;x++){const b=u[x];switch(d){case 0:if(b<3)d=b+1;else if(b<this.C40_BASIC_SET_CHARS.length){const v=this.C40_BASIC_SET_CHARS[b];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else throw new L;break;case 1:l?(o.append(String.fromCharCode(b+128)),l=!1):o.append(String.fromCharCode(b)),d=0;break;case 2:if(b<this.C40_SHIFT2_SET_CHARS.length){const v=this.C40_SHIFT2_SET_CHARS[b];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else switch(b){case 27:o.append("");break;case 30:l=!0;break;default:throw new L}d=0;break;case 3:l?(o.append(String.fromCharCode(b+224)),l=!1):o.append(String.fromCharCode(b+96)),d=0;break;default:throw new L}}}while(s.available()>0)}static decodeTextSegment(s,o){let l=!1,u=[],d=0;do{if(s.available()===8)return;const f=s.readBits(8);if(f===254)return;this.parseTwoBytes(f,s.readBits(8),u);for(let x=0;x<3;x++){const b=u[x];switch(d){case 0:if(b<3)d=b+1;else if(b<this.TEXT_BASIC_SET_CHARS.length){const v=this.TEXT_BASIC_SET_CHARS[b];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else throw new L;break;case 1:l?(o.append(String.fromCharCode(b+128)),l=!1):o.append(String.fromCharCode(b)),d=0;break;case 2:if(b<this.TEXT_SHIFT2_SET_CHARS.length){const v=this.TEXT_SHIFT2_SET_CHARS[b];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v)}else switch(b){case 27:o.append("");break;case 30:l=!0;break;default:throw new L}d=0;break;case 3:if(b<this.TEXT_SHIFT3_SET_CHARS.length){const v=this.TEXT_SHIFT3_SET_CHARS[b];l?(o.append(String.fromCharCode(v.charCodeAt(0)+128)),l=!1):o.append(v),d=0}else throw new L;break;default:throw new L}}}while(s.available()>0)}static decodeAnsiX12Segment(s,o){const l=[];do{if(s.available()===8)return;const u=s.readBits(8);if(u===254)return;this.parseTwoBytes(u,s.readBits(8),l);for(let d=0;d<3;d++){const f=l[d];switch(f){case 0:o.append("\r");break;case 1:o.append("*");break;case 2:o.append(">");break;case 3:o.append(" ");break;default:if(f<14)o.append(String.fromCharCode(f+44));else if(f<40)o.append(String.fromCharCode(f+51));else throw new L;break}}}while(s.available()>0)}static parseTwoBytes(s,o,l){let u=(s<<8)+o-1,d=Math.floor(u/1600);l[0]=d,u-=d*1600,d=Math.floor(u/40),l[1]=d,l[2]=u-d*40}static decodeEdifactSegment(s,o){do{if(s.available()<=16)return;for(let l=0;l<4;l++){let u=s.readBits(6);if(u===31){const d=8-s.getBitOffset();d!==8&&s.readBits(d);return}u&32||(u|=64),o.append(String.fromCharCode(u))}}while(s.available()>0)}static decodeBase256Segment(s,o,l){let u=1+s.getByteOffset();const d=this.unrandomize255State(s.readBits(8),u++);let f;if(d===0?f=s.available()/8|0:d<250?f=d:f=250*(d-249)+this.unrandomize255State(s.readBits(8),u++),f<0)throw new L;const x=new Uint8Array(f);for(let b=0;b<f;b++){if(s.available()<8)throw new L;x[b]=this.unrandomize255State(s.readBits(8),u++)}l.push(x);try{o.append(J.decode(x,ee.ISO88591))}catch(b){throw new _i("Platform does not support required encoding: "+b.message)}}static unrandomize255State(s,o){const l=149*o%255+1,u=s-l;return u>=0?u:u+256}}Ts.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Ts.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Ts.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Ts.TEXT_SHIFT2_SET_CHARS=Ts.C40_SHIFT2_SET_CHARS,Ts.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class TA{constructor(){this.rsDecoder=new Uo(ze.DATA_MATRIX_FIELD_256)}decode(s){const o=new Sh(s),l=o.getVersion(),u=o.readCodewords(),d=Ch.getDataBlocks(u,l);let f=0;for(let v of d)f+=v.getNumDataCodewords();const x=new Uint8Array(f),b=d.length;for(let v=0;v<b;v++){const S=d[v],M=S.getCodewords(),R=S.getNumDataCodewords();this.correctErrors(M,R);for(let V=0;V<R;V++)x[V*b+v]=M[V]}return Ts.decode(x)}correctErrors(s,o){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-o)}catch{throw new A}for(let u=0;u<o;u++)s[u]=l[u]}}class _t{constructor(s){this.image=s,this.rectangleDetector=new Zi(this.image)}detect(){const s=this.rectangleDetector.detect();let o=this.detectSolid1(s);if(o=this.detectSolid2(o),o[3]=this.correctTopRight(o),!o[3])throw new Z;o=this.shiftToModuleCenter(o);const l=o[0],u=o[1],d=o[2],f=o[3];let x=this.transitionsBetween(l,f)+1,b=this.transitionsBetween(d,f)+1;(x&1)===1&&(x+=1),(b&1)===1&&(b+=1),4*x<7*b&&4*b<7*x&&(x=b=Math.max(x,b));let v=_t.sampleGrid(this.image,l,u,d,f,x,b);return new Vc(v,[l,u,d,f])}static shiftPoint(s,o,l){let u=(o.getX()-s.getX())/(l+1),d=(o.getY()-s.getY())/(l+1);return new pe(s.getX()+u,s.getY()+d)}static moveAway(s,o,l){let u=s.getX(),d=s.getY();return u<o?u-=1:u+=1,d<l?d-=1:d+=1,new pe(u,d)}detectSolid1(s){let o=s[0],l=s[1],u=s[3],d=s[2],f=this.transitionsBetween(o,l),x=this.transitionsBetween(l,u),b=this.transitionsBetween(u,d),v=this.transitionsBetween(d,o),S=f,M=[d,o,l,u];return S>x&&(S=x,M[0]=o,M[1]=l,M[2]=u,M[3]=d),S>b&&(S=b,M[0]=l,M[1]=u,M[2]=d,M[3]=o),S>v&&(M[0]=u,M[1]=d,M[2]=o,M[3]=l),M}detectSolid2(s){let o=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(o,d),x=_t.shiftPoint(l,u,(f+1)*4),b=_t.shiftPoint(u,l,(f+1)*4),v=this.transitionsBetween(x,o),S=this.transitionsBetween(b,d);return v<S?(s[0]=o,s[1]=l,s[2]=u,s[3]=d):(s[0]=l,s[1]=u,s[2]=d,s[3]=o),s}correctTopRight(s){let o=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(o,d),x=this.transitionsBetween(l,d),b=_t.shiftPoint(o,l,(x+1)*4),v=_t.shiftPoint(u,l,(f+1)*4);f=this.transitionsBetween(b,d),x=this.transitionsBetween(v,d);let S=new pe(d.getX()+(u.getX()-l.getX())/(f+1),d.getY()+(u.getY()-l.getY())/(f+1)),M=new pe(d.getX()+(o.getX()-l.getX())/(x+1),d.getY()+(o.getY()-l.getY())/(x+1));if(!this.isValid(S))return this.isValid(M)?M:null;if(!this.isValid(M))return S;let R=this.transitionsBetween(b,S)+this.transitionsBetween(v,S),V=this.transitionsBetween(b,M)+this.transitionsBetween(v,M);return R>V?S:M}shiftToModuleCenter(s){let o=s[0],l=s[1],u=s[2],d=s[3],f=this.transitionsBetween(o,d)+1,x=this.transitionsBetween(u,d)+1,b=_t.shiftPoint(o,l,x*4),v=_t.shiftPoint(u,l,f*4);f=this.transitionsBetween(b,d)+1,x=this.transitionsBetween(v,d)+1,(f&1)===1&&(f+=1),(x&1)===1&&(x+=1);let S=(o.getX()+l.getX()+u.getX()+d.getX())/4,M=(o.getY()+l.getY()+u.getY()+d.getY())/4;o=_t.moveAway(o,S,M),l=_t.moveAway(l,S,M),u=_t.moveAway(u,S,M),d=_t.moveAway(d,S,M);let R,V;return b=_t.shiftPoint(o,l,x*4),b=_t.shiftPoint(b,d,f*4),R=_t.shiftPoint(l,o,x*4),R=_t.shiftPoint(R,u,f*4),v=_t.shiftPoint(u,d,x*4),v=_t.shiftPoint(v,l,f*4),V=_t.shiftPoint(d,u,x*4),V=_t.shiftPoint(V,o,f*4),[b,R,v,V]}isValid(s){return s.getX()>=0&&s.getX()<this.image.getWidth()&&s.getY()>0&&s.getY()<this.image.getHeight()}static sampleGrid(s,o,l,u,d,f,x){return Ss.getInstance().sampleGrid(s,f,x,.5,.5,f-.5,.5,f-.5,x-.5,.5,x-.5,o.getX(),o.getY(),d.getX(),d.getY(),u.getX(),u.getY(),l.getX(),l.getY())}transitionsBetween(s,o){let l=Math.trunc(s.getX()),u=Math.trunc(s.getY()),d=Math.trunc(o.getX()),f=Math.trunc(o.getY()),x=Math.abs(f-u)>Math.abs(d-l);if(x){let G=l;l=u,u=G,G=d,d=f,f=G}let b=Math.abs(d-l),v=Math.abs(f-u),S=-b/2,M=u<f?1:-1,R=l<d?1:-1,V=0,H=this.image.get(x?u:l,x?l:u);for(let G=l,q=u;G!==d;G+=R){let Q=this.image.get(x?q:G,x?G:q);if(Q!==H&&(V++,H=Q),S+=v,S>0){if(q===f)break;q+=M,S-=b}}return V}}class Ns{constructor(){this.decoder=new TA}decode(s,o=null){let l,u;if(o!=null&&o.has(D.PURE_BARCODE)){const v=Ns.extractPureBits(s.getBlackMatrix());l=this.decoder.decode(v),u=Ns.NO_POINTS}else{const v=new _t(s.getBlackMatrix()).detect();l=this.decoder.decode(v.getBits()),u=v.getPoints()}const d=l.getRawBytes(),f=new Te(l.getText(),d,8*d.length,u,xe.DATA_MATRIX,I.currentTimeMillis()),x=l.getByteSegments();x!=null&&f.putMetadata(Ht.BYTE_SEGMENTS,x);const b=l.getECLevel();return b!=null&&f.putMetadata(Ht.ERROR_CORRECTION_LEVEL,b),f}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(o==null||l==null)throw new Z;const u=this.moduleSize(o,s);let d=o[1];const f=l[1];let x=o[0];const v=(l[0]-x+1)/u,S=(f-d+1)/u;if(v<=0||S<=0)throw new Z;const M=u/2;d+=M,x+=M;const R=new be(v,S);for(let V=0;V<S;V++){const H=d+V*u;for(let G=0;G<v;G++)s.get(x+G*u,H)&&R.set(G,V)}return R}static moduleSize(s,o){const l=o.getWidth();let u=s[0];const d=s[1];for(;u<l&&o.get(u,d);)u++;if(u===l)throw new Z;const f=u-s[0];if(f===0)throw new Z;return f}}Ns.NO_POINTS=[];class NA extends Qe{constructor(s=500){super(new Ns,s)}}var ha;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(ha||(ha={}));class at{constructor(s,o,l){this.value=s,this.stringValue=o,this.bits=l,at.FOR_BITS.set(l,this),at.FOR_VALUE.set(s,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(s){switch(s){case"L":return at.L;case"M":return at.M;case"Q":return at.Q;case"H":return at.H;default:throw new y(s+"not available")}}toString(){return this.stringValue}equals(s){if(!(s instanceof at))return!1;const o=s;return this.value===o.value}static forBits(s){if(s<0||s>=at.FOR_BITS.size)throw new w;return at.FOR_BITS.get(s)}}at.FOR_BITS=new Map,at.FOR_VALUE=new Map,at.L=new at(ha.L,"L",1),at.M=new at(ha.M,"M",0),at.Q=new at(ha.Q,"Q",3),at.H=new at(ha.H,"H",2);class ln{constructor(s){this.errorCorrectionLevel=at.forBits(s>>3&3),this.dataMask=s&7}static numBitsDiffering(s,o){return C.bitCount(s^o)}static decodeFormatInformation(s,o){const l=ln.doDecodeFormatInformation(s,o);return l!==null?l:ln.doDecodeFormatInformation(s^ln.FORMAT_INFO_MASK_QR,o^ln.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(s,o){let l=Number.MAX_SAFE_INTEGER,u=0;for(const d of ln.FORMAT_INFO_DECODE_LOOKUP){const f=d[0];if(f===s||f===o)return new ln(d[1]);let x=ln.numBitsDiffering(s,f);x<l&&(u=d[1],l=x),s!==o&&(x=ln.numBitsDiffering(o,f),x<l&&(u=d[1],l=x))}return l<=3?new ln(u):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(s){if(!(s instanceof ln))return!1;const o=s;return this.errorCorrectionLevel===o.errorCorrectionLevel&&this.dataMask===o.dataMask}}ln.FORMAT_INFO_MASK_QR=21522,ln.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class X{constructor(s,...o){this.ecCodewordsPerBlock=s,this.ecBlocks=o}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let s=0;const o=this.ecBlocks;for(const l of o)s+=l.getCount();return s}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class P{constructor(s,o){this.count=s,this.dataCodewords=o}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class ye{constructor(s,o,...l){this.versionNumber=s,this.alignmentPatternCenters=o,this.ecBlocks=l;let u=0;const d=l[0].getECCodewordsPerBlock(),f=l[0].getECBlocks();for(const x of f)u+=x.getCount()*(x.getDataCodewords()+d);this.totalCodewords=u}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(s){return this.ecBlocks[s.getValue()]}static getProvisionalVersionForDimension(s){if(s%4!==1)throw new L;try{return this.getVersionForNumber((s-17)/4)}catch{throw new L}}static getVersionForNumber(s){if(s<1||s>40)throw new w;return ye.VERSIONS[s-1]}static decodeVersionInformation(s){let o=Number.MAX_SAFE_INTEGER,l=0;for(let u=0;u<ye.VERSION_DECODE_INFO.length;u++){const d=ye.VERSION_DECODE_INFO[u];if(d===s)return ye.getVersionForNumber(u+7);const f=ln.numBitsDiffering(s,d);f<o&&(l=u+7,o=f)}return o<=3?ye.getVersionForNumber(l):null}buildFunctionPattern(){const s=this.getDimensionForVersion(),o=new be(s);o.setRegion(0,0,9,9),o.setRegion(s-8,0,8,9),o.setRegion(0,s-8,9,8);const l=this.alignmentPatternCenters.length;for(let u=0;u<l;u++){const d=this.alignmentPatternCenters[u]-2;for(let f=0;f<l;f++)u===0&&(f===0||f===l-1)||u===l-1&&f===0||o.setRegion(this.alignmentPatternCenters[f]-2,d,5,5)}return o.setRegion(6,9,1,s-17),o.setRegion(9,6,s-17,1),this.versionNumber>6&&(o.setRegion(s-11,0,3,6),o.setRegion(0,s-11,6,3)),o}toString(){return""+this.versionNumber}}ye.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),ye.VERSIONS=[new ye(1,new Int32Array(0),new X(7,new P(1,19)),new X(10,new P(1,16)),new X(13,new P(1,13)),new X(17,new P(1,9))),new ye(2,Int32Array.from([6,18]),new X(10,new P(1,34)),new X(16,new P(1,28)),new X(22,new P(1,22)),new X(28,new P(1,16))),new ye(3,Int32Array.from([6,22]),new X(15,new P(1,55)),new X(26,new P(1,44)),new X(18,new P(2,17)),new X(22,new P(2,13))),new ye(4,Int32Array.from([6,26]),new X(20,new P(1,80)),new X(18,new P(2,32)),new X(26,new P(2,24)),new X(16,new P(4,9))),new ye(5,Int32Array.from([6,30]),new X(26,new P(1,108)),new X(24,new P(2,43)),new X(18,new P(2,15),new P(2,16)),new X(22,new P(2,11),new P(2,12))),new ye(6,Int32Array.from([6,34]),new X(18,new P(2,68)),new X(16,new P(4,27)),new X(24,new P(4,19)),new X(28,new P(4,15))),new ye(7,Int32Array.from([6,22,38]),new X(20,new P(2,78)),new X(18,new P(4,31)),new X(18,new P(2,14),new P(4,15)),new X(26,new P(4,13),new P(1,14))),new ye(8,Int32Array.from([6,24,42]),new X(24,new P(2,97)),new X(22,new P(2,38),new P(2,39)),new X(22,new P(4,18),new P(2,19)),new X(26,new P(4,14),new P(2,15))),new ye(9,Int32Array.from([6,26,46]),new X(30,new P(2,116)),new X(22,new P(3,36),new P(2,37)),new X(20,new P(4,16),new P(4,17)),new X(24,new P(4,12),new P(4,13))),new ye(10,Int32Array.from([6,28,50]),new X(18,new P(2,68),new P(2,69)),new X(26,new P(4,43),new P(1,44)),new X(24,new P(6,19),new P(2,20)),new X(28,new P(6,15),new P(2,16))),new ye(11,Int32Array.from([6,30,54]),new X(20,new P(4,81)),new X(30,new P(1,50),new P(4,51)),new X(28,new P(4,22),new P(4,23)),new X(24,new P(3,12),new P(8,13))),new ye(12,Int32Array.from([6,32,58]),new X(24,new P(2,92),new P(2,93)),new X(22,new P(6,36),new P(2,37)),new X(26,new P(4,20),new P(6,21)),new X(28,new P(7,14),new P(4,15))),new ye(13,Int32Array.from([6,34,62]),new X(26,new P(4,107)),new X(22,new P(8,37),new P(1,38)),new X(24,new P(8,20),new P(4,21)),new X(22,new P(12,11),new P(4,12))),new ye(14,Int32Array.from([6,26,46,66]),new X(30,new P(3,115),new P(1,116)),new X(24,new P(4,40),new P(5,41)),new X(20,new P(11,16),new P(5,17)),new X(24,new P(11,12),new P(5,13))),new ye(15,Int32Array.from([6,26,48,70]),new X(22,new P(5,87),new P(1,88)),new X(24,new P(5,41),new P(5,42)),new X(30,new P(5,24),new P(7,25)),new X(24,new P(11,12),new P(7,13))),new ye(16,Int32Array.from([6,26,50,74]),new X(24,new P(5,98),new P(1,99)),new X(28,new P(7,45),new P(3,46)),new X(24,new P(15,19),new P(2,20)),new X(30,new P(3,15),new P(13,16))),new ye(17,Int32Array.from([6,30,54,78]),new X(28,new P(1,107),new P(5,108)),new X(28,new P(10,46),new P(1,47)),new X(28,new P(1,22),new P(15,23)),new X(28,new P(2,14),new P(17,15))),new ye(18,Int32Array.from([6,30,56,82]),new X(30,new P(5,120),new P(1,121)),new X(26,new P(9,43),new P(4,44)),new X(28,new P(17,22),new P(1,23)),new X(28,new P(2,14),new P(19,15))),new ye(19,Int32Array.from([6,30,58,86]),new X(28,new P(3,113),new P(4,114)),new X(26,new P(3,44),new P(11,45)),new X(26,new P(17,21),new P(4,22)),new X(26,new P(9,13),new P(16,14))),new ye(20,Int32Array.from([6,34,62,90]),new X(28,new P(3,107),new P(5,108)),new X(26,new P(3,41),new P(13,42)),new X(30,new P(15,24),new P(5,25)),new X(28,new P(15,15),new P(10,16))),new ye(21,Int32Array.from([6,28,50,72,94]),new X(28,new P(4,116),new P(4,117)),new X(26,new P(17,42)),new X(28,new P(17,22),new P(6,23)),new X(30,new P(19,16),new P(6,17))),new ye(22,Int32Array.from([6,26,50,74,98]),new X(28,new P(2,111),new P(7,112)),new X(28,new P(17,46)),new X(30,new P(7,24),new P(16,25)),new X(24,new P(34,13))),new ye(23,Int32Array.from([6,30,54,78,102]),new X(30,new P(4,121),new P(5,122)),new X(28,new P(4,47),new P(14,48)),new X(30,new P(11,24),new P(14,25)),new X(30,new P(16,15),new P(14,16))),new ye(24,Int32Array.from([6,28,54,80,106]),new X(30,new P(6,117),new P(4,118)),new X(28,new P(6,45),new P(14,46)),new X(30,new P(11,24),new P(16,25)),new X(30,new P(30,16),new P(2,17))),new ye(25,Int32Array.from([6,32,58,84,110]),new X(26,new P(8,106),new P(4,107)),new X(28,new P(8,47),new P(13,48)),new X(30,new P(7,24),new P(22,25)),new X(30,new P(22,15),new P(13,16))),new ye(26,Int32Array.from([6,30,58,86,114]),new X(28,new P(10,114),new P(2,115)),new X(28,new P(19,46),new P(4,47)),new X(28,new P(28,22),new P(6,23)),new X(30,new P(33,16),new P(4,17))),new ye(27,Int32Array.from([6,34,62,90,118]),new X(30,new P(8,122),new P(4,123)),new X(28,new P(22,45),new P(3,46)),new X(30,new P(8,23),new P(26,24)),new X(30,new P(12,15),new P(28,16))),new ye(28,Int32Array.from([6,26,50,74,98,122]),new X(30,new P(3,117),new P(10,118)),new X(28,new P(3,45),new P(23,46)),new X(30,new P(4,24),new P(31,25)),new X(30,new P(11,15),new P(31,16))),new ye(29,Int32Array.from([6,30,54,78,102,126]),new X(30,new P(7,116),new P(7,117)),new X(28,new P(21,45),new P(7,46)),new X(30,new P(1,23),new P(37,24)),new X(30,new P(19,15),new P(26,16))),new ye(30,Int32Array.from([6,26,52,78,104,130]),new X(30,new P(5,115),new P(10,116)),new X(28,new P(19,47),new P(10,48)),new X(30,new P(15,24),new P(25,25)),new X(30,new P(23,15),new P(25,16))),new ye(31,Int32Array.from([6,30,56,82,108,134]),new X(30,new P(13,115),new P(3,116)),new X(28,new P(2,46),new P(29,47)),new X(30,new P(42,24),new P(1,25)),new X(30,new P(23,15),new P(28,16))),new ye(32,Int32Array.from([6,34,60,86,112,138]),new X(30,new P(17,115)),new X(28,new P(10,46),new P(23,47)),new X(30,new P(10,24),new P(35,25)),new X(30,new P(19,15),new P(35,16))),new ye(33,Int32Array.from([6,30,58,86,114,142]),new X(30,new P(17,115),new P(1,116)),new X(28,new P(14,46),new P(21,47)),new X(30,new P(29,24),new P(19,25)),new X(30,new P(11,15),new P(46,16))),new ye(34,Int32Array.from([6,34,62,90,118,146]),new X(30,new P(13,115),new P(6,116)),new X(28,new P(14,46),new P(23,47)),new X(30,new P(44,24),new P(7,25)),new X(30,new P(59,16),new P(1,17))),new ye(35,Int32Array.from([6,30,54,78,102,126,150]),new X(30,new P(12,121),new P(7,122)),new X(28,new P(12,47),new P(26,48)),new X(30,new P(39,24),new P(14,25)),new X(30,new P(22,15),new P(41,16))),new ye(36,Int32Array.from([6,24,50,76,102,128,154]),new X(30,new P(6,121),new P(14,122)),new X(28,new P(6,47),new P(34,48)),new X(30,new P(46,24),new P(10,25)),new X(30,new P(2,15),new P(64,16))),new ye(37,Int32Array.from([6,28,54,80,106,132,158]),new X(30,new P(17,122),new P(4,123)),new X(28,new P(29,46),new P(14,47)),new X(30,new P(49,24),new P(10,25)),new X(30,new P(24,15),new P(46,16))),new ye(38,Int32Array.from([6,32,58,84,110,136,162]),new X(30,new P(4,122),new P(18,123)),new X(28,new P(13,46),new P(32,47)),new X(30,new P(48,24),new P(14,25)),new X(30,new P(42,15),new P(32,16))),new ye(39,Int32Array.from([6,26,54,82,110,138,166]),new X(30,new P(20,117),new P(4,118)),new X(28,new P(40,47),new P(7,48)),new X(30,new P(43,24),new P(22,25)),new X(30,new P(10,15),new P(67,16))),new ye(40,Int32Array.from([6,30,58,86,114,142,170]),new X(30,new P(19,118),new P(6,119)),new X(28,new P(18,47),new P(31,48)),new X(30,new P(34,24),new P(34,25)),new X(30,new P(20,15),new P(61,16)))];var Gt;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(Gt||(Gt={}));class ei{constructor(s,o){this.value=s,this.isMasked=o}unmaskBitMatrix(s,o){for(let l=0;l<o;l++)for(let u=0;u<o;u++)this.isMasked(l,u)&&s.flip(u,l)}}ei.values=new Map([[Gt.DATA_MASK_000,new ei(Gt.DATA_MASK_000,(_,s)=>(_+s&1)===0)],[Gt.DATA_MASK_001,new ei(Gt.DATA_MASK_001,(_,s)=>(_&1)===0)],[Gt.DATA_MASK_010,new ei(Gt.DATA_MASK_010,(_,s)=>s%3===0)],[Gt.DATA_MASK_011,new ei(Gt.DATA_MASK_011,(_,s)=>(_+s)%3===0)],[Gt.DATA_MASK_100,new ei(Gt.DATA_MASK_100,(_,s)=>(Math.floor(_/2)+Math.floor(s/3)&1)===0)],[Gt.DATA_MASK_101,new ei(Gt.DATA_MASK_101,(_,s)=>_*s%6===0)],[Gt.DATA_MASK_110,new ei(Gt.DATA_MASK_110,(_,s)=>_*s%6<3)],[Gt.DATA_MASK_111,new ei(Gt.DATA_MASK_111,(_,s)=>(_+s+_*s%3&1)===0)]]);class _A{constructor(s){const o=s.getHeight();if(o<21||(o&3)!==1)throw new L;this.bitMatrix=s}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let s=0;for(let d=0;d<6;d++)s=this.copyBit(d,8,s);s=this.copyBit(7,8,s),s=this.copyBit(8,8,s),s=this.copyBit(8,7,s);for(let d=5;d>=0;d--)s=this.copyBit(8,d,s);const o=this.bitMatrix.getHeight();let l=0;const u=o-7;for(let d=o-1;d>=u;d--)l=this.copyBit(8,d,l);for(let d=o-8;d<o;d++)l=this.copyBit(d,8,l);if(this.parsedFormatInfo=ln.decodeFormatInformation(s,l),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new L}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const s=this.bitMatrix.getHeight(),o=Math.floor((s-17)/4);if(o<=6)return ye.getVersionForNumber(o);let l=0;const u=s-11;for(let f=5;f>=0;f--)for(let x=s-9;x>=u;x--)l=this.copyBit(x,f,l);let d=ye.decodeVersionInformation(l);if(d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;l=0;for(let f=5;f>=0;f--)for(let x=s-9;x>=u;x--)l=this.copyBit(f,x,l);if(d=ye.decodeVersionInformation(l),d!==null&&d.getDimensionForVersion()===s)return this.parsedVersion=d,d;throw new L}copyBit(s,o,l){return(this.isMirror?this.bitMatrix.get(o,s):this.bitMatrix.get(s,o))?l<<1|1:l<<1}readCodewords(){const s=this.readFormatInformation(),o=this.readVersion(),l=ei.values.get(s.getDataMask()),u=this.bitMatrix.getHeight();l.unmaskBitMatrix(this.bitMatrix,u);const d=o.buildFunctionPattern();let f=!0;const x=new Uint8Array(o.getTotalCodewords());let b=0,v=0,S=0;for(let M=u-1;M>0;M-=2){M===6&&M--;for(let R=0;R<u;R++){const V=f?u-1-R:R;for(let H=0;H<2;H++)d.get(M-H,V)||(S++,v<<=1,this.bitMatrix.get(M-H,V)&&(v|=1),S===8&&(x[b++]=v,S=0,v=0))}f=!f}if(b!==o.getTotalCodewords())throw new L;return x}remask(){if(this.parsedFormatInfo===null)return;const s=ei.values[this.parsedFormatInfo.getDataMask()],o=this.bitMatrix.getHeight();s.unmaskBitMatrix(this.bitMatrix,o)}setMirror(s){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=s}mirror(){const s=this.bitMatrix;for(let o=0,l=s.getWidth();o<l;o++)for(let u=o+1,d=s.getHeight();u<d;u++)s.get(o,u)!==s.get(u,o)&&(s.flip(u,o),s.flip(o,u))}}class Nh{constructor(s,o){this.numDataCodewords=s,this.codewords=o}static getDataBlocks(s,o,l){if(s.length!==o.getTotalCodewords())throw new w;const u=o.getECBlocksForLevel(l);let d=0;const f=u.getECBlocks();for(const H of f)d+=H.getCount();const x=new Array(d);let b=0;for(const H of f)for(let G=0;G<H.getCount();G++){const q=H.getDataCodewords(),Q=u.getECCodewordsPerBlock()+q;x[b++]=new Nh(q,new Uint8Array(Q))}const v=x[0].codewords.length;let S=x.length-1;for(;S>=0&&x[S].codewords.length!==v;)S--;S++;const M=v-u.getECCodewordsPerBlock();let R=0;for(let H=0;H<M;H++)for(let G=0;G<b;G++)x[G].codewords[H]=s[R++];for(let H=S;H<b;H++)x[H].codewords[M]=s[R++];const V=x[0].codewords.length;for(let H=M;H<V;H++)for(let G=0;G<b;G++){const q=G<S?H:H+1;x[G].codewords[q]=s[R++]}return x}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var ti;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(ti||(ti={}));class we{constructor(s,o,l,u){this.value=s,this.stringValue=o,this.characterCountBitsForVersions=l,this.bits=u,we.FOR_BITS.set(u,this),we.FOR_VALUE.set(s,this)}static forBits(s){const o=we.FOR_BITS.get(s);if(o===void 0)throw new w;return o}getCharacterCountBits(s){const o=s.getVersionNumber();let l;return o<=9?l=0:o<=26?l=1:l=2,this.characterCountBitsForVersions[l]}getValue(){return this.value}getBits(){return this.bits}equals(s){if(!(s instanceof we))return!1;const o=s;return this.value===o.value}toString(){return this.stringValue}}we.FOR_BITS=new Map,we.FOR_VALUE=new Map,we.TERMINATOR=new we(ti.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),we.NUMERIC=new we(ti.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),we.ALPHANUMERIC=new we(ti.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),we.STRUCTURED_APPEND=new we(ti.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),we.BYTE=new we(ti.BYTE,"BYTE",Int32Array.from([8,16,16]),4),we.ECI=new we(ti.ECI,"ECI",Int32Array.from([0,0,0]),7),we.KANJI=new we(ti.KANJI,"KANJI",Int32Array.from([8,10,12]),8),we.FNC1_FIRST_POSITION=new we(ti.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),we.FNC1_SECOND_POSITION=new we(ti.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),we.HANZI=new we(ti.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class yt{static decode(s,o,l,u){const d=new Th(s);let f=new de;const x=new Array;let b=-1,v=-1;try{let S=null,M=!1,R;do{if(d.available()<4)R=we.TERMINATOR;else{const V=d.readBits(4);R=we.forBits(V)}switch(R){case we.TERMINATOR:break;case we.FNC1_FIRST_POSITION:case we.FNC1_SECOND_POSITION:M=!0;break;case we.STRUCTURED_APPEND:if(d.available()<16)throw new L;b=d.readBits(8),v=d.readBits(8);break;case we.ECI:const V=yt.parseECIValue(d);if(S=U.getCharacterSetECIByValue(V),S===null)throw new L;break;case we.HANZI:const H=d.readBits(4),G=d.readBits(R.getCharacterCountBits(o));H===yt.GB2312_SUBSET&&yt.decodeHanziSegment(d,f,G);break;default:const q=d.readBits(R.getCharacterCountBits(o));switch(R){case we.NUMERIC:yt.decodeNumericSegment(d,f,q);break;case we.ALPHANUMERIC:yt.decodeAlphanumericSegment(d,f,q,M);break;case we.BYTE:yt.decodeByteSegment(d,f,q,S,x,u);break;case we.KANJI:yt.decodeKanjiSegment(d,f,q);break;default:throw new L}break}}while(R!==we.TERMINATOR)}catch{throw new L}return new Bo(s,f.toString(),x.length===0?null:x,l===null?null:l.toString(),b,v)}static decodeHanziSegment(s,o,l){if(l*13>s.available())throw new L;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const f=s.readBits(13);let x=f/96<<8&4294967295|f%96;x<959?x+=41377:x+=42657,u[d]=x>>8&255,u[d+1]=x&255,d+=2,l--}try{o.append(J.decode(u,ee.GB2312))}catch(f){throw new L(f)}}static decodeKanjiSegment(s,o,l){if(l*13>s.available())throw new L;const u=new Uint8Array(2*l);let d=0;for(;l>0;){const f=s.readBits(13);let x=f/192<<8&4294967295|f%192;x<7936?x+=33088:x+=49472,u[d]=x>>8,u[d+1]=x,d+=2,l--}try{o.append(J.decode(u,ee.SHIFT_JIS))}catch(f){throw new L(f)}}static decodeByteSegment(s,o,l,u,d,f){if(8*l>s.available())throw new L;const x=new Uint8Array(l);for(let v=0;v<l;v++)x[v]=s.readBits(8);let b;u===null?b=ee.guessEncoding(x,f):b=u.getName();try{o.append(J.decode(x,b))}catch(v){throw new L(v)}d.push(x)}static toAlphaNumericChar(s){if(s>=yt.ALPHANUMERIC_CHARS.length)throw new L;return yt.ALPHANUMERIC_CHARS[s]}static decodeAlphanumericSegment(s,o,l,u){const d=o.length();for(;l>1;){if(s.available()<11)throw new L;const f=s.readBits(11);o.append(yt.toAlphaNumericChar(Math.floor(f/45))),o.append(yt.toAlphaNumericChar(f%45)),l-=2}if(l===1){if(s.available()<6)throw new L;o.append(yt.toAlphaNumericChar(s.readBits(6)))}if(u)for(let f=d;f<o.length();f++)o.charAt(f)==="%"&&(f<o.length()-1&&o.charAt(f+1)==="%"?o.deleteCharAt(f+1):o.setCharAt(f,""))}static decodeNumericSegment(s,o,l){for(;l>=3;){if(s.available()<10)throw new L;const u=s.readBits(10);if(u>=1e3)throw new L;o.append(yt.toAlphaNumericChar(Math.floor(u/100))),o.append(yt.toAlphaNumericChar(Math.floor(u/10)%10)),o.append(yt.toAlphaNumericChar(u%10)),l-=3}if(l===2){if(s.available()<7)throw new L;const u=s.readBits(7);if(u>=100)throw new L;o.append(yt.toAlphaNumericChar(Math.floor(u/10))),o.append(yt.toAlphaNumericChar(u%10))}else if(l===1){if(s.available()<4)throw new L;const u=s.readBits(4);if(u>=10)throw new L;o.append(yt.toAlphaNumericChar(u))}}static parseECIValue(s){const o=s.readBits(8);if(!(o&128))return o&127;if((o&192)===128){const l=s.readBits(8);return(o&63)<<8&4294967295|l}if((o&224)===192){const l=s.readBits(16);return(o&31)<<16&4294967295|l}throw new L}}yt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",yt.GB2312_SUBSET=1;class Pg{constructor(s){this.mirrored=s}isMirrored(){return this.mirrored}applyMirroredCorrection(s){if(!this.mirrored||s===null||s.length<3)return;const o=s[0];s[0]=s[2],s[2]=o}}class MA{constructor(){this.rsDecoder=new Uo(ze.QR_CODE_FIELD_256)}decodeBooleanArray(s,o){return this.decodeBitMatrix(be.parseFromBooleanArray(s),o)}decodeBitMatrix(s,o){const l=new _A(s);let u=null;try{return this.decodeBitMatrixParser(l,o)}catch(d){u=d}try{l.remask(),l.setMirror(!0),l.readVersion(),l.readFormatInformation(),l.mirror();const d=this.decodeBitMatrixParser(l,o);return d.setOther(new Pg(!0)),d}catch(d){throw u!==null?u:d}}decodeBitMatrixParser(s,o){const l=s.readVersion(),u=s.readFormatInformation().getErrorCorrectionLevel(),d=s.readCodewords(),f=Nh.getDataBlocks(d,l,u);let x=0;for(const S of f)x+=S.getNumDataCodewords();const b=new Uint8Array(x);let v=0;for(const S of f){const M=S.getCodewords(),R=S.getNumDataCodewords();this.correctErrors(M,R);for(let V=0;V<R;V++)b[v++]=M[V]}return yt.decode(b,l,u,o)}correctErrors(s,o){const l=new Int32Array(s);try{this.rsDecoder.decode(l,s.length-o)}catch{throw new A}for(let u=0;u<o;u++)s[u]=l[u]}}class _h extends pe{constructor(s,o,l){super(s,o),this.estimatedModuleSize=l}aboutEquals(s,o,l){if(Math.abs(o-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,o,l){const u=(this.getX()+o)/2,d=(this.getY()+s)/2,f=(this.estimatedModuleSize+l)/2;return new _h(u,d,f)}}class qc{constructor(s,o,l,u,d,f,x){this.image=s,this.startX=o,this.startY=l,this.width=u,this.height=d,this.moduleSize=f,this.resultPointCallback=x,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const s=this.startX,o=this.height,l=this.width,u=s+l,d=this.startY+o/2,f=new Int32Array(3),x=this.image;for(let b=0;b<o;b++){const v=d+(b&1?-Math.floor((b+1)/2):Math.floor((b+1)/2));f[0]=0,f[1]=0,f[2]=0;let S=s;for(;S<u&&!x.get(S,v);)S++;let M=0;for(;S<u;){if(x.get(S,v))if(M===1)f[1]++;else if(M===2){if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,v,S);if(R!==null)return R}f[0]=f[2],f[1]=1,f[2]=0,M=1}else f[++M]++;else M===1&&M++,f[M]++;S++}if(this.foundPatternCross(f)){const R=this.handlePossibleCenter(f,v,u);if(R!==null)return R}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new Z}static centerFromEnd(s,o){return o-s[2]-s[1]/2}foundPatternCross(s){const o=this.moduleSize,l=o/2;for(let u=0;u<3;u++)if(Math.abs(o-s[u])>=l)return!1;return!0}crossCheckVertical(s,o,l,u){const d=this.image,f=d.getHeight(),x=this.crossCheckStateCount;x[0]=0,x[1]=0,x[2]=0;let b=s;for(;b>=0&&d.get(o,b)&&x[1]<=l;)x[1]++,b--;if(b<0||x[1]>l)return NaN;for(;b>=0&&!d.get(o,b)&&x[0]<=l;)x[0]++,b--;if(x[0]>l)return NaN;for(b=s+1;b<f&&d.get(o,b)&&x[1]<=l;)x[1]++,b++;if(b===f||x[1]>l)return NaN;for(;b<f&&!d.get(o,b)&&x[2]<=l;)x[2]++,b++;if(x[2]>l)return NaN;const v=x[0]+x[1]+x[2];return 5*Math.abs(v-u)>=2*u?NaN:this.foundPatternCross(x)?qc.centerFromEnd(x,b):NaN}handlePossibleCenter(s,o,l){const u=s[0]+s[1]+s[2],d=qc.centerFromEnd(s,l),f=this.crossCheckVertical(o,d,2*s[1],u);if(!isNaN(f)){const x=(s[0]+s[1]+s[2])/3;for(const v of this.possibleCenters)if(v.aboutEquals(x,f,d))return v.combineEstimate(f,d,x);const b=new _h(d,f,x);this.possibleCenters.push(b),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(b)}return null}}class Mh extends pe{constructor(s,o,l,u){super(s,o),this.estimatedModuleSize=l,this.count=u,u===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(s,o,l){if(Math.abs(o-this.getY())<=s&&Math.abs(l-this.getX())<=s){const u=Math.abs(s-this.estimatedModuleSize);return u<=1||u<=this.estimatedModuleSize}return!1}combineEstimate(s,o,l){const u=this.count+1,d=(this.count*this.getX()+o)/u,f=(this.count*this.getY()+s)/u,x=(this.count*this.estimatedModuleSize+l)/u;return new Mh(d,f,x,u)}}class IA{constructor(s){this.bottomLeft=s[0],this.topLeft=s[1],this.topRight=s[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Yt{constructor(s,o){this.image=s,this.resultPointCallback=o,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=o}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(s){const o=s!=null&&s.get(D.TRY_HARDER)!==void 0,l=s!=null&&s.get(D.PURE_BARCODE)!==void 0,u=this.image,d=u.getHeight(),f=u.getWidth();let x=Math.floor(3*d/(4*Yt.MAX_MODULES));(x<Yt.MIN_SKIP||o)&&(x=Yt.MIN_SKIP);let b=!1;const v=new Int32Array(5);for(let M=x-1;M<d&&!b;M+=x){v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0;let R=0;for(let V=0;V<f;V++)if(u.get(V,M))(R&1)===1&&R++,v[R]++;else if(R&1)v[R]++;else if(R===4)if(Yt.foundPatternCross(v)){if(this.handlePossibleCenter(v,M,V,l)===!0)if(x=2,this.hasSkipped===!0)b=this.haveMultiplyConfirmedCenters();else{const G=this.findRowSkip();G>v[2]&&(M+=G-v[2]-x,V=f-1)}else{v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,R=3;continue}R=0,v[0]=0,v[1]=0,v[2]=0,v[3]=0,v[4]=0}else v[0]=v[2],v[1]=v[3],v[2]=v[4],v[3]=1,v[4]=0,R=3;else v[++R]++;Yt.foundPatternCross(v)&&this.handlePossibleCenter(v,M,f,l)===!0&&(x=v[0],this.hasSkipped&&(b=this.haveMultiplyConfirmedCenters()))}const S=this.selectBestPatterns();return pe.orderBestPatterns(S),new IA(S)}static centerFromEnd(s,o){return o-s[4]-s[3]-s[2]/2}static foundPatternCross(s){let o=0;for(let d=0;d<5;d++){const f=s[d];if(f===0)return!1;o+=f}if(o<7)return!1;const l=o/7,u=l/2;return Math.abs(l-s[0])<u&&Math.abs(l-s[1])<u&&Math.abs(3*l-s[2])<3*u&&Math.abs(l-s[3])<u&&Math.abs(l-s[4])<u}getCrossCheckStateCount(){const s=this.crossCheckStateCount;return s[0]=0,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s}crossCheckDiagonal(s,o,l,u){const d=this.getCrossCheckStateCount();let f=0;const x=this.image;for(;s>=f&&o>=f&&x.get(o-f,s-f);)d[2]++,f++;if(s<f||o<f)return!1;for(;s>=f&&o>=f&&!x.get(o-f,s-f)&&d[1]<=l;)d[1]++,f++;if(s<f||o<f||d[1]>l)return!1;for(;s>=f&&o>=f&&x.get(o-f,s-f)&&d[0]<=l;)d[0]++,f++;if(d[0]>l)return!1;const b=x.getHeight(),v=x.getWidth();for(f=1;s+f<b&&o+f<v&&x.get(o+f,s+f);)d[2]++,f++;if(s+f>=b||o+f>=v)return!1;for(;s+f<b&&o+f<v&&!x.get(o+f,s+f)&&d[3]<l;)d[3]++,f++;if(s+f>=b||o+f>=v||d[3]>=l)return!1;for(;s+f<b&&o+f<v&&x.get(o+f,s+f)&&d[4]<l;)d[4]++,f++;if(d[4]>=l)return!1;const S=d[0]+d[1]+d[2]+d[3]+d[4];return Math.abs(S-u)<2*u&&Yt.foundPatternCross(d)}crossCheckVertical(s,o,l,u){const d=this.image,f=d.getHeight(),x=this.getCrossCheckStateCount();let b=s;for(;b>=0&&d.get(o,b);)x[2]++,b--;if(b<0)return NaN;for(;b>=0&&!d.get(o,b)&&x[1]<=l;)x[1]++,b--;if(b<0||x[1]>l)return NaN;for(;b>=0&&d.get(o,b)&&x[0]<=l;)x[0]++,b--;if(x[0]>l)return NaN;for(b=s+1;b<f&&d.get(o,b);)x[2]++,b++;if(b===f)return NaN;for(;b<f&&!d.get(o,b)&&x[3]<l;)x[3]++,b++;if(b===f||x[3]>=l)return NaN;for(;b<f&&d.get(o,b)&&x[4]<l;)x[4]++,b++;if(x[4]>=l)return NaN;const v=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(v-u)>=2*u?NaN:Yt.foundPatternCross(x)?Yt.centerFromEnd(x,b):NaN}crossCheckHorizontal(s,o,l,u){const d=this.image,f=d.getWidth(),x=this.getCrossCheckStateCount();let b=s;for(;b>=0&&d.get(b,o);)x[2]++,b--;if(b<0)return NaN;for(;b>=0&&!d.get(b,o)&&x[1]<=l;)x[1]++,b--;if(b<0||x[1]>l)return NaN;for(;b>=0&&d.get(b,o)&&x[0]<=l;)x[0]++,b--;if(x[0]>l)return NaN;for(b=s+1;b<f&&d.get(b,o);)x[2]++,b++;if(b===f)return NaN;for(;b<f&&!d.get(b,o)&&x[3]<l;)x[3]++,b++;if(b===f||x[3]>=l)return NaN;for(;b<f&&d.get(b,o)&&x[4]<l;)x[4]++,b++;if(x[4]>=l)return NaN;const v=x[0]+x[1]+x[2]+x[3]+x[4];return 5*Math.abs(v-u)>=u?NaN:Yt.foundPatternCross(x)?Yt.centerFromEnd(x,b):NaN}handlePossibleCenter(s,o,l,u){const d=s[0]+s[1]+s[2]+s[3]+s[4];let f=Yt.centerFromEnd(s,l),x=this.crossCheckVertical(o,Math.floor(f),s[2],d);if(!isNaN(x)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(x),s[2],d),!isNaN(f)&&(!u||this.crossCheckDiagonal(Math.floor(x),Math.floor(f),s[2],d)))){const b=d/7;let v=!1;const S=this.possibleCenters;for(let M=0,R=S.length;M<R;M++){const V=S[M];if(V.aboutEquals(b,x,f)){S[M]=V.combineEstimate(x,f,b),v=!0;break}}if(!v){const M=new Mh(f,x,b);S.push(M),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(M)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let o=null;for(const l of this.possibleCenters)if(l.getCount()>=Yt.CENTER_QUORUM)if(o==null)o=l;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-l.getX())-Math.abs(o.getY()-l.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let s=0,o=0;const l=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Yt.CENTER_QUORUM&&(s++,o+=f.getEstimatedModuleSize());if(s<3)return!1;const u=o/l;let d=0;for(const f of this.possibleCenters)d+=Math.abs(f.getEstimatedModuleSize()-u);return d<=.05*o}selectBestPatterns(){const s=this.possibleCenters.length;if(s<3)throw new Z;const o=this.possibleCenters;let l;if(s>3){let u=0,d=0;for(const b of this.possibleCenters){const v=b.getEstimatedModuleSize();u+=v,d+=v*v}l=u/s;let f=Math.sqrt(d/s-l*l);o.sort((b,v)=>{const S=Math.abs(v.getEstimatedModuleSize()-l),M=Math.abs(b.getEstimatedModuleSize()-l);return S<M?-1:S>M?1:0});const x=Math.max(.2*l,f);for(let b=0;b<o.length&&o.length>3;b++){const v=o[b];Math.abs(v.getEstimatedModuleSize()-l)>x&&(o.splice(b,1),b--)}}if(o.length>3){let u=0;for(const d of o)u+=d.getEstimatedModuleSize();l=u/o.length,o.sort((d,f)=>{if(f.getCount()===d.getCount()){const x=Math.abs(f.getEstimatedModuleSize()-l),b=Math.abs(d.getEstimatedModuleSize()-l);return x<b?1:x>b?-1:0}else return f.getCount()-d.getCount()}),o.splice(3)}return[o[0],o[1],o[2]]}}Yt.CENTER_QUORUM=2,Yt.MIN_SKIP=3,Yt.MAX_MODULES=57;class Vo{constructor(s){this.image=s}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(s){this.resultPointCallback=s==null?null:s.get(D.NEED_RESULT_POINT_CALLBACK);const l=new Yt(this.image,this.resultPointCallback).find(s);return this.processFinderPatternInfo(l)}processFinderPatternInfo(s){const o=s.getTopLeft(),l=s.getTopRight(),u=s.getBottomLeft(),d=this.calculateModuleSize(o,l,u);if(d<1)throw new Z("No pattern found in proccess finder.");const f=Vo.computeDimension(o,l,u,d),x=ye.getProvisionalVersionForDimension(f),b=x.getDimensionForVersion()-7;let v=null;if(x.getAlignmentPatternCenters().length>0){const V=l.getX()-o.getX()+u.getX(),H=l.getY()-o.getY()+u.getY(),G=1-3/b,q=Math.floor(o.getX()+G*(V-o.getX())),Q=Math.floor(o.getY()+G*(H-o.getY()));for(let le=4;le<=16;le<<=1)try{v=this.findAlignmentInRegion(d,q,Q,le);break}catch(ce){if(!(ce instanceof Z))throw ce}}const S=Vo.createTransform(o,l,u,v,f),M=Vo.sampleGrid(this.image,S,f);let R;return v===null?R=[u,o,l]:R=[u,o,l,v],new Vc(M,R)}static createTransform(s,o,l,u,d){const f=d-3.5;let x,b,v,S;return u!==null?(x=u.getX(),b=u.getY(),v=f-3,S=v):(x=o.getX()-s.getX()+l.getX(),b=o.getY()-s.getY()+l.getY(),v=f,S=f),gi.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,v,S,3.5,f,s.getX(),s.getY(),o.getX(),o.getY(),x,b,l.getX(),l.getY())}static sampleGrid(s,o,l){return Ss.getInstance().sampleGridWithTransform(s,l,l,o)}static computeDimension(s,o,l,u){const d=Fe.round(pe.distance(s,o)/u),f=Fe.round(pe.distance(s,l)/u);let x=Math.floor((d+f)/2)+7;switch(x&3){case 0:x++;break;case 2:x--;break;case 3:throw new Z("Dimensions could be not found.")}return x}calculateModuleSize(s,o,l){return(this.calculateModuleSizeOneWay(s,o)+this.calculateModuleSizeOneWay(s,l))/2}calculateModuleSizeOneWay(s,o){const l=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(o.getX()),Math.floor(o.getY())),u=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(o.getX()),Math.floor(o.getY()),Math.floor(s.getX()),Math.floor(s.getY()));return isNaN(l)?u/7:isNaN(u)?l/7:(l+u)/14}sizeOfBlackWhiteBlackRunBothWays(s,o,l,u){let d=this.sizeOfBlackWhiteBlackRun(s,o,l,u),f=1,x=s-(l-s);x<0?(f=s/(s-x),x=0):x>=this.image.getWidth()&&(f=(this.image.getWidth()-1-s)/(x-s),x=this.image.getWidth()-1);let b=Math.floor(o-(u-o)*f);return f=1,b<0?(f=o/(o-b),b=0):b>=this.image.getHeight()&&(f=(this.image.getHeight()-1-o)/(b-o),b=this.image.getHeight()-1),x=Math.floor(s+(x-s)*f),d+=this.sizeOfBlackWhiteBlackRun(s,o,x,b),d-1}sizeOfBlackWhiteBlackRun(s,o,l,u){const d=Math.abs(u-o)>Math.abs(l-s);if(d){let V=s;s=o,o=V,V=l,l=u,u=V}const f=Math.abs(l-s),x=Math.abs(u-o);let b=-f/2;const v=s<l?1:-1,S=o<u?1:-1;let M=0;const R=l+v;for(let V=s,H=o;V!==R;V+=v){const G=d?H:V,q=d?V:H;if(M===1===this.image.get(G,q)){if(M===2)return Fe.distance(V,H,s,o);M++}if(b+=x,b>0){if(H===u)break;H+=S,b-=f}}return M===2?Fe.distance(l+v,u,s,o):NaN}findAlignmentInRegion(s,o,l,u){const d=Math.floor(u*s),f=Math.max(0,o-d),x=Math.min(this.image.getWidth()-1,o+d);if(x-f<s*3)throw new Z("Alignment top exceeds estimated module size.");const b=Math.max(0,l-d),v=Math.min(this.image.getHeight()-1,l+d);if(v-b<s*3)throw new Z("Alignment bottom exceeds estimated module size.");return new qc(this.image,f,b,x-f,v-b,s,this.resultPointCallback).find()}}class _s{constructor(){this.decoder=new MA}getDecoder(){return this.decoder}decode(s,o){let l,u;if(o!=null&&o.get(D.PURE_BARCODE)!==void 0){const b=_s.extractPureBits(s.getBlackMatrix());l=this.decoder.decodeBitMatrix(b,o),u=_s.NO_POINTS}else{const b=new Vo(s.getBlackMatrix()).detect(o);l=this.decoder.decodeBitMatrix(b.getBits(),o),u=b.getPoints()}l.getOther()instanceof Pg&&l.getOther().applyMirroredCorrection(u);const d=new Te(l.getText(),l.getRawBytes(),void 0,u,xe.QR_CODE,void 0),f=l.getByteSegments();f!==null&&d.putMetadata(Ht.BYTE_SEGMENTS,f);const x=l.getECLevel();return x!==null&&d.putMetadata(Ht.ERROR_CORRECTION_LEVEL,x),l.hasStructuredAppend()&&(d.putMetadata(Ht.STRUCTURED_APPEND_SEQUENCE,l.getStructuredAppendSequenceNumber()),d.putMetadata(Ht.STRUCTURED_APPEND_PARITY,l.getStructuredAppendParity())),d}reset(){}static extractPureBits(s){const o=s.getTopLeftOnBit(),l=s.getBottomRightOnBit();if(o===null||l===null)throw new Z;const u=this.moduleSize(o,s);let d=o[1],f=l[1],x=o[0],b=l[0];if(x>=b||d>=f)throw new Z;if(f-d!==b-x&&(b=x+(f-d),b>=s.getWidth()))throw new Z;const v=Math.round((b-x+1)/u),S=Math.round((f-d+1)/u);if(v<=0||S<=0)throw new Z;if(S!==v)throw new Z;const M=Math.floor(u/2);d+=M,x+=M;const R=x+Math.floor((v-1)*u)-b;if(R>0){if(R>M)throw new Z;x-=R}const V=d+Math.floor((S-1)*u)-f;if(V>0){if(V>M)throw new Z;d-=V}const H=new be(v,S);for(let G=0;G<S;G++){const q=d+Math.floor(G*u);for(let Q=0;Q<v;Q++)s.get(x+Math.floor(Q*u),q)&&H.set(Q,G)}return H}static moduleSize(s,o){const l=o.getHeight(),u=o.getWidth();let d=s[0],f=s[1],x=!0,b=0;for(;d<u&&f<l;){if(x!==o.get(d,f)){if(++b===5)break;x=!x}d++,f++}if(d===u||f===l)throw new Z;return(d-s[0])/7}}_s.NO_POINTS=new Array;class Ee{PDF417Common(){}static getBitCountSum(s){return Fe.sum(s)}static toIntArray(s){if(s==null||!s.length)return Ee.EMPTY_INT_ARRAY;const o=new Int32Array(s.length);let l=0;for(const u of s)o[l++]=u;return o}static getCodeword(s){const o=N.binarySearch(Ee.SYMBOL_TABLE,s&262143);return o<0?-1:(Ee.CODEWORD_TABLE[o]-1)%Ee.NUMBER_OF_CODEWORDS}}Ee.NUMBER_OF_CODEWORDS=929,Ee.MAX_CODEWORDS_IN_BARCODE=Ee.NUMBER_OF_CODEWORDS-1,Ee.MIN_ROWS_IN_BARCODE=3,Ee.MAX_ROWS_IN_BARCODE=90,Ee.MODULES_IN_CODEWORD=17,Ee.MODULES_IN_STOP_PATTERN=18,Ee.BARS_IN_MODULE=8,Ee.EMPTY_INT_ARRAY=new Int32Array([]),Ee.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Ee.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class DA{constructor(s,o){this.bits=s,this.points=o}getBits(){return this.bits}getPoints(){return this.points}}class Me{static detectMultiple(s,o,l){let u=s.getBlackMatrix(),d=Me.detect(l,u);return d.length||(u=u.clone(),u.rotate180(),d=Me.detect(l,u)),new DA(u,d)}static detect(s,o){const l=new Array;let u=0,d=0,f=!1;for(;u<o.getHeight();){const x=Me.findVertices(o,u,d);if(x[0]==null&&x[3]==null){if(!f)break;f=!1,d=0;for(const b of l)b[1]!=null&&(u=Math.trunc(Math.max(u,b[1].getY()))),b[3]!=null&&(u=Math.max(u,Math.trunc(b[3].getY())));u+=Me.ROW_STEP;continue}if(f=!0,l.push(x),!s)break;x[2]!=null?(d=Math.trunc(x[2].getX()),u=Math.trunc(x[2].getY())):(d=Math.trunc(x[4].getX()),u=Math.trunc(x[4].getY()))}return l}static findVertices(s,o,l){const u=s.getHeight(),d=s.getWidth(),f=new Array(8);return Me.copyToResult(f,Me.findRowsWithPattern(s,u,d,o,l,Me.START_PATTERN),Me.INDEXES_START_PATTERN),f[4]!=null&&(l=Math.trunc(f[4].getX()),o=Math.trunc(f[4].getY())),Me.copyToResult(f,Me.findRowsWithPattern(s,u,d,o,l,Me.STOP_PATTERN),Me.INDEXES_STOP_PATTERN),f}static copyToResult(s,o,l){for(let u=0;u<l.length;u++)s[l[u]]=o[u]}static findRowsWithPattern(s,o,l,u,d,f){const x=new Array(4);let b=!1;const v=new Int32Array(f.length);for(;u<o;u+=Me.ROW_STEP){let M=Me.findGuardPattern(s,d,u,l,!1,f,v);if(M!=null){for(;u>0;){const R=Me.findGuardPattern(s,d,--u,l,!1,f,v);if(R!=null)M=R;else{u++;break}}x[0]=new pe(M[0],u),x[1]=new pe(M[1],u),b=!0;break}}let S=u+1;if(b){let M=0,R=Int32Array.from([Math.trunc(x[0].getX()),Math.trunc(x[1].getX())]);for(;S<o;S++){const V=Me.findGuardPattern(s,R[0],S,l,!1,f,v);if(V!=null&&Math.abs(R[0]-V[0])<Me.MAX_PATTERN_DRIFT&&Math.abs(R[1]-V[1])<Me.MAX_PATTERN_DRIFT)R=V,M=0;else{if(M>Me.SKIPPED_ROW_COUNT_MAX)break;M++}}S-=M+1,x[2]=new pe(R[0],S),x[3]=new pe(R[1],S)}return S-u<Me.BARCODE_MIN_HEIGHT&&N.fill(x,null),x}static findGuardPattern(s,o,l,u,d,f,x){N.fillWithin(x,0,x.length,0);let b=o,v=0;for(;s.get(b,l)&&b>0&&v++<Me.MAX_PIXEL_DRIFT;)b--;let S=b,M=0,R=f.length;for(let V=d;S<u;S++)if(s.get(S,l)!==V)x[M]++;else{if(M===R-1){if(Me.patternMatchVariance(x,f,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE)return new Int32Array([b,S]);b+=x[0]+x[1],I.arraycopy(x,2,x,0,M-1),x[M-1]=0,x[M]=0,M--}else M++;x[M]=1,V=!V}return M===R-1&&Me.patternMatchVariance(x,f,Me.MAX_INDIVIDUAL_VARIANCE)<Me.MAX_AVG_VARIANCE?new Int32Array([b,S-1]):null}static patternMatchVariance(s,o,l){let u=s.length,d=0,f=0;for(let v=0;v<u;v++)d+=s[v],f+=o[v];if(d<f)return 1/0;let x=d/f;l*=x;let b=0;for(let v=0;v<u;v++){let S=s[v],M=o[v]*x,R=S>M?S-M:M-S;if(R>l)return 1/0;b+=R}return b/d}}Me.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Me.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Me.MAX_AVG_VARIANCE=.42,Me.MAX_INDIVIDUAL_VARIANCE=.8,Me.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Me.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Me.MAX_PIXEL_DRIFT=3,Me.MAX_PATTERN_DRIFT=5,Me.SKIPPED_ROW_COUNT_MAX=25,Me.ROW_STEP=5,Me.BARCODE_MIN_HEIGHT=10;class $t{constructor(s,o){if(o.length===0)throw new w;this.field=s;let l=o.length;if(l>1&&o[0]===0){let u=1;for(;u<l&&o[u]===0;)u++;u===l?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(l-u),I.arraycopy(o,u,this.coefficients,0,this.coefficients.length))}else this.coefficients=o}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(s){return this.coefficients[this.coefficients.length-1-s]}evaluateAt(s){if(s===0)return this.getCoefficient(0);if(s===1){let u=0;for(let d of this.coefficients)u=this.field.add(u,d);return u}let o=this.coefficients[0],l=this.coefficients.length;for(let u=1;u<l;u++)o=this.field.add(this.field.multiply(s,o),this.coefficients[u]);return o}add(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero())return s;if(s.isZero())return this;let o=this.coefficients,l=s.coefficients;if(o.length>l.length){let f=o;o=l,l=f}let u=new Int32Array(l.length),d=l.length-o.length;I.arraycopy(l,0,u,0,d);for(let f=d;f<l.length;f++)u[f]=this.field.add(o[f-d],l[f]);return new $t(this.field,u)}subtract(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");return s.isZero()?this:this.add(s.negative())}multiply(s){return s instanceof $t?this.multiplyOther(s):this.multiplyScalar(s)}multiplyOther(s){if(!this.field.equals(s.field))throw new w("ModulusPolys do not have same ModulusGF field");if(this.isZero()||s.isZero())return new $t(this.field,new Int32Array([0]));let o=this.coefficients,l=o.length,u=s.coefficients,d=u.length,f=new Int32Array(l+d-1);for(let x=0;x<l;x++){let b=o[x];for(let v=0;v<d;v++)f[x+v]=this.field.add(f[x+v],this.field.multiply(b,u[v]))}return new $t(this.field,f)}negative(){let s=this.coefficients.length,o=new Int32Array(s);for(let l=0;l<s;l++)o[l]=this.field.subtract(0,this.coefficients[l]);return new $t(this.field,o)}multiplyScalar(s){if(s===0)return new $t(this.field,new Int32Array([0]));if(s===1)return this;let o=this.coefficients.length,l=new Int32Array(o);for(let u=0;u<o;u++)l[u]=this.field.multiply(this.coefficients[u],s);return new $t(this.field,l)}multiplyByMonomial(s,o){if(s<0)throw new w;if(o===0)return new $t(this.field,new Int32Array([0]));let l=this.coefficients.length,u=new Int32Array(l+s);for(let d=0;d<l;d++)u[d]=this.field.multiply(this.coefficients[d],o);return new $t(this.field,u)}toString(){let s=new de;for(let o=this.getDegree();o>=0;o--){let l=this.getCoefficient(o);l!==0&&(l<0?(s.append(" - "),l=-l):s.length()>0&&s.append(" + "),(o===0||l!==1)&&s.append(l),o!==0&&(o===1?s.append("x"):(s.append("x^"),s.append(o))))}return s.toString()}}class RA{add(s,o){return(s+o)%this.modulus}subtract(s,o){return(this.modulus+s-o)%this.modulus}exp(s){return this.expTable[s]}log(s){if(s===0)throw new w;return this.logTable[s]}inverse(s){if(s===0)throw new Uc;return this.expTable[this.modulus-this.logTable[s]-1]}multiply(s,o){return s===0||o===0?0:this.expTable[(this.logTable[s]+this.logTable[o])%(this.modulus-1)]}getSize(){return this.modulus}equals(s){return s===this}}class Ih extends RA{constructor(s,o){super(),this.modulus=s,this.expTable=new Int32Array(s),this.logTable=new Int32Array(s);let l=1;for(let u=0;u<s;u++)this.expTable[u]=l,l=l*o%s;for(let u=0;u<s-1;u++)this.logTable[this.expTable[u]]=u;this.zero=new $t(this,new Int32Array([0])),this.one=new $t(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(s,o){if(s<0)throw new w;if(o===0)return this.zero;let l=new Int32Array(s+1);return l[0]=o,new $t(this,l)}}Ih.PDF417_GF=new Ih(Ee.NUMBER_OF_CODEWORDS,3);class Ug{constructor(){this.field=Ih.PDF417_GF}decode(s,o,l){let u=new $t(this.field,s),d=new Int32Array(o),f=!1;for(let H=o;H>0;H--){let G=u.evaluateAt(this.field.exp(H));d[o-H]=G,G!==0&&(f=!0)}if(!f)return 0;let x=this.field.getOne();if(l!=null)for(const H of l){let G=this.field.exp(s.length-1-H),q=new $t(this.field,new Int32Array([this.field.subtract(0,G),1]));x=x.multiply(q)}let b=new $t(this.field,d),v=this.runEuclideanAlgorithm(this.field.buildMonomial(o,1),b,o),S=v[0],M=v[1],R=this.findErrorLocations(S),V=this.findErrorMagnitudes(M,S,R);for(let H=0;H<R.length;H++){let G=s.length-1-this.field.log(R[H]);if(G<0)throw A.getChecksumInstance();s[G]=this.field.subtract(s[G],V[H])}return R.length}runEuclideanAlgorithm(s,o,l){if(s.getDegree()<o.getDegree()){let R=s;s=o,o=R}let u=s,d=o,f=this.field.getZero(),x=this.field.getOne();for(;d.getDegree()>=Math.round(l/2);){let R=u,V=f;if(u=d,f=x,u.isZero())throw A.getChecksumInstance();d=R;let H=this.field.getZero(),G=u.getCoefficient(u.getDegree()),q=this.field.inverse(G);for(;d.getDegree()>=u.getDegree()&&!d.isZero();){let Q=d.getDegree()-u.getDegree(),le=this.field.multiply(d.getCoefficient(d.getDegree()),q);H=H.add(this.field.buildMonomial(Q,le)),d=d.subtract(u.multiplyByMonomial(Q,le))}x=H.multiply(f).subtract(V).negative()}let b=x.getCoefficient(0);if(b===0)throw A.getChecksumInstance();let v=this.field.inverse(b),S=x.multiply(v),M=d.multiply(v);return[S,M]}findErrorLocations(s){let o=s.getDegree(),l=new Int32Array(o),u=0;for(let d=1;d<this.field.getSize()&&u<o;d++)s.evaluateAt(d)===0&&(l[u]=this.field.inverse(d),u++);if(u!==o)throw A.getChecksumInstance();return l}findErrorMagnitudes(s,o,l){let u=o.getDegree(),d=new Int32Array(u);for(let v=1;v<=u;v++)d[u-v]=this.field.multiply(v,o.getCoefficient(v));let f=new $t(this.field,d),x=l.length,b=new Int32Array(x);for(let v=0;v<x;v++){let S=this.field.inverse(l[v]),M=this.field.subtract(0,s.evaluateAt(S)),R=this.field.inverse(f.evaluateAt(S));b[v]=this.field.multiply(M,R)}return b}}class Cr{constructor(s,o,l,u,d){s instanceof Cr?this.constructor_2(s):this.constructor_1(s,o,l,u,d)}constructor_1(s,o,l,u,d){const f=o==null||l==null,x=u==null||d==null;if(f&&x)throw new Z;f?(o=new pe(0,u.getY()),l=new pe(0,d.getY())):x&&(u=new pe(s.getWidth()-1,o.getY()),d=new pe(s.getWidth()-1,l.getY())),this.image=s,this.topLeft=o,this.bottomLeft=l,this.topRight=u,this.bottomRight=d,this.minX=Math.trunc(Math.min(o.getX(),l.getX())),this.maxX=Math.trunc(Math.max(u.getX(),d.getX())),this.minY=Math.trunc(Math.min(o.getY(),u.getY())),this.maxY=Math.trunc(Math.max(l.getY(),d.getY()))}constructor_2(s){this.image=s.image,this.topLeft=s.getTopLeft(),this.bottomLeft=s.getBottomLeft(),this.topRight=s.getTopRight(),this.bottomRight=s.getBottomRight(),this.minX=s.getMinX(),this.maxX=s.getMaxX(),this.minY=s.getMinY(),this.maxY=s.getMaxY()}static merge(s,o){return s==null?o:o==null?s:new Cr(s.image,s.topLeft,s.bottomLeft,o.topRight,o.bottomRight)}addMissingRows(s,o,l){let u=this.topLeft,d=this.bottomLeft,f=this.topRight,x=this.bottomRight;if(s>0){let b=l?this.topLeft:this.topRight,v=Math.trunc(b.getY()-s);v<0&&(v=0);let S=new pe(b.getX(),v);l?u=S:f=S}if(o>0){let b=l?this.bottomLeft:this.bottomRight,v=Math.trunc(b.getY()+o);v>=this.image.getHeight()&&(v=this.image.getHeight()-1);let S=new pe(b.getX(),v);l?d=S:x=S}return new Cr(this.image,u,d,f,x)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class OA{constructor(s,o,l,u){this.columnCount=s,this.errorCorrectionLevel=u,this.rowCountUpperPart=o,this.rowCountLowerPart=l,this.rowCount=o+l}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class zo{constructor(){this.buffer=""}static form(s,o){let l=-1;function u(f,x,b,v,S,M){if(f==="%%")return"%";if(o[++l]===void 0)return;f=v?parseInt(v.substr(1)):void 0;let R=S?parseInt(S.substr(1)):void 0,V;switch(M){case"s":V=o[l];break;case"c":V=o[l][0];break;case"f":V=parseFloat(o[l]).toFixed(f);break;case"p":V=parseFloat(o[l]).toPrecision(f);break;case"e":V=parseFloat(o[l]).toExponential(f);break;case"x":V=parseInt(o[l]).toString(R||16);break;case"d":V=parseFloat(parseInt(o[l],R||10).toPrecision(f)).toFixed(0);break}V=typeof V=="object"?JSON.stringify(V):(+V).toString(R);let H=parseInt(b),G=b&&b[0]+""=="0"?"0":" ";for(;V.length<H;)V=x!==void 0?V+G:G+V;return V}let d=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return s.replace(d,u)}format(s,...o){this.buffer+=zo.form(s,o)}toString(){return this.buffer}}class Ho{constructor(s){this.boundingBox=new Cr(s),this.codewords=new Array(s.getMaxY()-s.getMinY()+1)}getCodewordNearby(s){let o=this.getCodeword(s);if(o!=null)return o;for(let l=1;l<Ho.MAX_NEARBY_DISTANCE;l++){let u=this.imageRowToCodewordIndex(s)-l;if(u>=0&&(o=this.codewords[u],o!=null)||(u=this.imageRowToCodewordIndex(s)+l,u<this.codewords.length&&(o=this.codewords[u],o!=null)))return o}return null}imageRowToCodewordIndex(s){return s-this.boundingBox.getMinY()}setCodeword(s,o){this.codewords[this.imageRowToCodewordIndex(s)]=o}getCodeword(s){return this.codewords[this.imageRowToCodewordIndex(s)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const s=new zo;let o=0;for(const l of this.codewords){if(l==null){s.format("%3d:    |   %n",o++);continue}s.format("%3d: %3d|%3d%n",o++,l.getRowNumber(),l.getValue())}return s.toString()}}Ho.MAX_NEARBY_DISTANCE=5;class Go{constructor(){this.values=new Map}setValue(s){s=Math.trunc(s);let o=this.values.get(s);o==null&&(o=0),o++,this.values.set(s,o)}getValue(){let s=-1,o=new Array;for(const[l,u]of this.values.entries()){const d={getKey:()=>l,getValue:()=>u};d.getValue()>s?(s=d.getValue(),o=[],o.push(d.getKey())):d.getValue()===s&&o.push(d.getKey())}return Ee.toIntArray(o)}getConfidence(s){return this.values.get(s)}}class Fg extends Ho{constructor(s,o){super(s),this._isLeft=o}setRowNumbers(){for(let s of this.getCodewords())s!=null&&s.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(s){let o=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(o,s);let l=this.getBoundingBox(),u=this._isLeft?l.getTopLeft():l.getTopRight(),d=this._isLeft?l.getBottomLeft():l.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.imageRowToCodewordIndex(Math.trunc(d.getY())),b=-1,v=1,S=0;for(let M=f;M<x;M++){if(o[M]==null)continue;let R=o[M],V=R.getRowNumber()-b;if(V===0)S++;else if(V===1)v=Math.max(v,S),S=1,b=R.getRowNumber();else if(V<0||R.getRowNumber()>=s.getRowCount()||V>M)o[M]=null;else{let H;v>2?H=(v-2)*V:H=V;let G=H>=M;for(let q=1;q<=H&&!G;q++)G=o[M-q]!=null;G?o[M]=null:(b=R.getRowNumber(),S=1)}}}getRowHeights(){let s=this.getBarcodeMetadata();if(s==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(s);let o=new Int32Array(s.getRowCount());for(let l of this.getCodewords())if(l!=null){let u=l.getRowNumber();if(u>=o.length)continue;o[u]++}return o}adjustIncompleteIndicatorColumnRowNumbers(s){let o=this.getBoundingBox(),l=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),d=this.imageRowToCodewordIndex(Math.trunc(l.getY())),f=this.imageRowToCodewordIndex(Math.trunc(u.getY())),x=this.getCodewords(),b=-1;for(let v=d;v<f;v++){if(x[v]==null)continue;let S=x[v];S.setRowNumberAsRowIndicatorColumn();let M=S.getRowNumber()-b;M===0||(M===1?b=S.getRowNumber():S.getRowNumber()>=s.getRowCount()?x[v]=null:b=S.getRowNumber())}}getBarcodeMetadata(){let s=this.getCodewords(),o=new Go,l=new Go,u=new Go,d=new Go;for(let x of s){if(x==null)continue;x.setRowNumberAsRowIndicatorColumn();let b=x.getValue()%30,v=x.getRowNumber();switch(this._isLeft||(v+=2),v%3){case 0:l.setValue(b*3+1);break;case 1:d.setValue(b/3),u.setValue(b%3);break;case 2:o.setValue(b+1);break}}if(o.getValue().length===0||l.getValue().length===0||u.getValue().length===0||d.getValue().length===0||o.getValue()[0]<1||l.getValue()[0]+u.getValue()[0]<Ee.MIN_ROWS_IN_BARCODE||l.getValue()[0]+u.getValue()[0]>Ee.MAX_ROWS_IN_BARCODE)return null;let f=new OA(o.getValue()[0],l.getValue()[0],u.getValue()[0],d.getValue()[0]);return this.removeIncorrectCodewords(s,f),f}removeIncorrectCodewords(s,o){for(let l=0;l<s.length;l++){let u=s[l];if(s[l]==null)continue;let d=u.getValue()%30,f=u.getRowNumber();if(f>o.getRowCount()){s[l]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:d*3+1!==o.getRowCountUpperPart()&&(s[l]=null);break;case 1:(Math.trunc(d/3)!==o.getErrorCorrectionLevel()||d%3!==o.getRowCountLowerPart())&&(s[l]=null);break;case 2:d+1!==o.getColumnCount()&&(s[l]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class Yo{constructor(s,o){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=s,this.barcodeColumnCount=s.getColumnCount(),this.boundingBox=o,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let s=Ee.MAX_CODEWORDS_IN_BARCODE,o;do o=s,s=this.adjustRowNumbersAndGetCount();while(s>0&&s<o);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(s){s!=null&&s.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let s=this.adjustRowNumbersByRow();if(s===0)return 0;for(let o=1;o<this.barcodeColumnCount+1;o++){let l=this.detectionResultColumns[o].getCodewords();for(let u=0;u<l.length;u++)l[u]!=null&&(l[u].hasValidRowNumber()||this.adjustRowNumbers(o,u,l))}return s}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let s=this.detectionResultColumns[0].getCodewords(),o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<s.length;l++)if(s[l]!=null&&o[l]!=null&&s[l].getRowNumber()===o[l].getRowNumber())for(let u=1;u<=this.barcodeColumnCount;u++){let d=this.detectionResultColumns[u].getCodewords()[l];d!=null&&(d.setRowNumber(s[l].getRowNumber()),d.hasValidRowNumber()||(this.detectionResultColumns[u].getCodewords()[l]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let s=0,o=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let u=o[l].getRowNumber(),d=0;for(let f=this.barcodeColumnCount+1;f>0&&d<this.ADJUST_ROW_NUMBER_SKIP;f--){let x=this.detectionResultColumns[f].getCodewords()[l];x!=null&&(d=Yo.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||s++)}}return s}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let s=0,o=this.detectionResultColumns[0].getCodewords();for(let l=0;l<o.length;l++){if(o[l]==null)continue;let u=o[l].getRowNumber(),d=0;for(let f=1;f<this.barcodeColumnCount+1&&d<this.ADJUST_ROW_NUMBER_SKIP;f++){let x=this.detectionResultColumns[f].getCodewords()[l];x!=null&&(d=Yo.adjustRowNumberIfValid(u,d,x),x.hasValidRowNumber()||s++)}}return s}static adjustRowNumberIfValid(s,o,l){return l==null||l.hasValidRowNumber()||(l.isValidRowNumber(s)?(l.setRowNumber(s),o=0):++o),o}adjustRowNumbers(s,o,l){if(!this.detectionResultColumns[s-1])return;let u=l[o],d=this.detectionResultColumns[s-1].getCodewords(),f=d;this.detectionResultColumns[s+1]!=null&&(f=this.detectionResultColumns[s+1].getCodewords());let x=new Array(14);x[2]=d[o],x[3]=f[o],o>0&&(x[0]=l[o-1],x[4]=d[o-1],x[5]=f[o-1]),o>1&&(x[8]=l[o-2],x[10]=d[o-2],x[11]=f[o-2]),o<l.length-1&&(x[1]=l[o+1],x[6]=d[o+1],x[7]=f[o+1]),o<l.length-2&&(x[9]=l[o+2],x[12]=d[o+2],x[13]=f[o+2]);for(let b of x)if(Yo.adjustRowNumber(u,b))return}static adjustRowNumber(s,o){return o==null?!1:o.hasValidRowNumber()&&o.getBucket()===s.getBucket()?(s.setRowNumber(o.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(s){this.boundingBox=s}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(s,o){this.detectionResultColumns[s]=o}getDetectionResultColumn(s){return this.detectionResultColumns[s]}toString(){let s=this.detectionResultColumns[0];s==null&&(s=this.detectionResultColumns[this.barcodeColumnCount+1]);let o=new zo;for(let l=0;l<s.getCodewords().length;l++){o.format("CW %3d:",l);for(let u=0;u<this.barcodeColumnCount+2;u++){if(this.detectionResultColumns[u]==null){o.format("    |   ");continue}let d=this.detectionResultColumns[u].getCodewords()[l];if(d==null){o.format("    |   ");continue}o.format(" %3d|%3d",d.getRowNumber(),d.getValue())}o.format("%n")}return o.toString()}}class qo{constructor(s,o,l,u){this.rowNumber=qo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(s),this.endX=Math.trunc(o),this.bucket=Math.trunc(l),this.value=Math.trunc(u)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(s){return s!==qo.BARCODE_ROW_UNKNOWN&&this.bucket===s%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(s){this.rowNumber=s}toString(){return this.rowNumber+"|"+this.value}}qo.BARCODE_ROW_UNKNOWN=-1;class Cn{static initialize(){for(let s=0;s<Ee.SYMBOL_TABLE.length;s++){let o=Ee.SYMBOL_TABLE[s],l=o&1;for(let u=0;u<Ee.BARS_IN_MODULE;u++){let d=0;for(;(o&1)===l;)d+=1,o>>=1;l=o&1,Cn.RATIOS_TABLE[s]||(Cn.RATIOS_TABLE[s]=new Array(Ee.BARS_IN_MODULE)),Cn.RATIOS_TABLE[s][Ee.BARS_IN_MODULE-u-1]=Math.fround(d/Ee.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(s){let o=Cn.getDecodedCodewordValue(Cn.sampleBitCounts(s));return o!==-1?o:Cn.getClosestDecodedValue(s)}static sampleBitCounts(s){let o=Fe.sum(s),l=new Int32Array(Ee.BARS_IN_MODULE),u=0,d=0;for(let f=0;f<Ee.MODULES_IN_CODEWORD;f++){let x=o/(2*Ee.MODULES_IN_CODEWORD)+f*o/Ee.MODULES_IN_CODEWORD;d+s[u]<=x&&(d+=s[u],u++),l[u]++}return l}static getDecodedCodewordValue(s){let o=Cn.getBitValue(s);return Ee.getCodeword(o)===-1?-1:o}static getBitValue(s){let o=0;for(let l=0;l<s.length;l++)for(let u=0;u<s[l];u++)o=o<<1|(l%2===0?1:0);return Math.trunc(o)}static getClosestDecodedValue(s){let o=Fe.sum(s),l=new Array(Ee.BARS_IN_MODULE);if(o>1)for(let f=0;f<l.length;f++)l[f]=Math.fround(s[f]/o);let u=Fc.MAX_VALUE,d=-1;this.bSymbolTableReady||Cn.initialize();for(let f=0;f<Cn.RATIOS_TABLE.length;f++){let x=0,b=Cn.RATIOS_TABLE[f];for(let v=0;v<Ee.BARS_IN_MODULE;v++){let S=Math.fround(b[v]-l[v]);if(x+=Math.fround(S*S),x>=u)break}x<u&&(u=x,d=Ee.SYMBOL_TABLE[f])}return d}}Cn.bSymbolTableReady=!1,Cn.RATIOS_TABLE=new Array(Ee.SYMBOL_TABLE.length).map(_=>new Array(Ee.BARS_IN_MODULE));class Vg{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(s){this.segmentIndex=s}getFileId(){return this.fileId}setFileId(s){this.fileId=s}getOptionalData(){return this.optionalData}setOptionalData(s){this.optionalData=s}isLastSegment(){return this.lastSegment}setLastSegment(s){this.lastSegment=s}getSegmentCount(){return this.segmentCount}setSegmentCount(s){this.segmentCount=s}getSender(){return this.sender||null}setSender(s){this.sender=s}getAddressee(){return this.addressee||null}setAddressee(s){this.addressee=s}getFileName(){return this.fileName}setFileName(s){this.fileName=s}getFileSize(){return this.fileSize}setFileSize(s){this.fileSize=s}getChecksum(){return this.checksum}setChecksum(s){this.checksum=s}getTimestamp(){return this.timestamp}setTimestamp(s){this.timestamp=s}}class zg{static parseLong(s,o=void 0){return parseInt(s,o)}}class Hg extends p{}Hg.kind="NullPointerException";class jA{writeBytes(s){this.writeBytesOffset(s,0,s.length)}writeBytesOffset(s,o,l){if(s==null)throw new Hg;if(o<0||o>s.length||l<0||o+l>s.length||o+l<0)throw new B;if(l===0)return;for(let u=0;u<l;u++)this.write(s[o+u])}flush(){}close(){}}class kA extends p{}class LA extends jA{constructor(s=32){if(super(),this.count=0,s<0)throw new w("Negative initial size: "+s);this.buf=new Uint8Array(s)}ensureCapacity(s){s-this.buf.length>0&&this.grow(s)}grow(s){let l=this.buf.length<<1;if(l-s<0&&(l=s),l<0){if(s<0)throw new kA;l=C.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,l)}write(s){this.ensureCapacity(this.count+1),this.buf[this.count]=s,this.count+=1}writeBytesOffset(s,o,l){if(o<0||o>s.length||l<0||o+l-s.length>0)throw new B;this.ensureCapacity(this.count+l),I.arraycopy(s,o,this.buf,this.count,l),this.count+=l}writeTo(s){s.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(s){return s?typeof s=="string"?this.toString_string(s):this.toString_number(s):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(s){return new String(this.buf).toString()}toString_number(s){return new String(this.buf).toString()}close(){}}var $e;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})($e||($e={}));function Gg(){if(typeof window<"u")return window.BigInt||null;if(typeof sn<"u")return sn.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Xc;function Ms(_){if(typeof Xc>"u"&&(Xc=Gg()),Xc===null)throw new Error("BigInt is not supported!");return Xc(_)}function BA(){let _=[];_[0]=Ms(1);let s=Ms(900);_[1]=s;for(let o=2;o<16;o++)_[o]=_[o-1]*s;return _}class K{static decode(s,o){let l=new de(""),u=U.ISO8859_1;l.enableDecoding(u);let d=1,f=s[d++],x=new Vg;for(;d<s[0];){switch(f){case K.TEXT_COMPACTION_MODE_LATCH:d=K.textCompaction(s,d,l);break;case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:d=K.byteCompaction(f,s,u,d,l);break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:l.append(s[d++]);break;case K.NUMERIC_COMPACTION_MODE_LATCH:d=K.numericCompaction(s,d,l);break;case K.ECI_CHARSET:U.getCharacterSetECIByValue(s[d++]);break;case K.ECI_GENERAL_PURPOSE:d+=2;break;case K.ECI_USER_DEFINED:d++;break;case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:d=K.decodeMacroBlock(s,d,x);break;case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:throw new L;default:d--,d=K.textCompaction(s,d,l);break}if(d<s.length)f=s[d++];else throw L.getFormatInstance()}if(l.length()===0)throw L.getFormatInstance();let b=new Bo(null,l.toString(),null,o);return b.setOther(x),b}static decodeMacroBlock(s,o,l){if(o+K.NUMBER_OF_SEQUENCE_CODEWORDS>s[0])throw L.getFormatInstance();let u=new Int32Array(K.NUMBER_OF_SEQUENCE_CODEWORDS);for(let x=0;x<K.NUMBER_OF_SEQUENCE_CODEWORDS;x++,o++)u[x]=s[o];l.setSegmentIndex(C.parseInt(K.decodeBase900toBase10(u,K.NUMBER_OF_SEQUENCE_CODEWORDS)));let d=new de;o=K.textCompaction(s,o,d),l.setFileId(d.toString());let f=-1;for(s[o]===K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=o+1);o<s[0];)switch(s[o]){case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(o++,s[o]){case K.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let x=new de;o=K.textCompaction(s,o+1,x),l.setFileName(x.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let b=new de;o=K.textCompaction(s,o+1,b),l.setSender(b.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let v=new de;o=K.textCompaction(s,o+1,v),l.setAddressee(v.toString());break;case K.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let S=new de;o=K.numericCompaction(s,o+1,S),l.setSegmentCount(C.parseInt(S.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let M=new de;o=K.numericCompaction(s,o+1,M),l.setTimestamp(zg.parseLong(M.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let R=new de;o=K.numericCompaction(s,o+1,R),l.setChecksum(C.parseInt(R.toString()));break;case K.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let V=new de;o=K.numericCompaction(s,o+1,V),l.setFileSize(zg.parseLong(V.toString()));break;default:throw L.getFormatInstance()}break;case K.MACRO_PDF417_TERMINATOR:o++,l.setLastSegment(!0);break;default:throw L.getFormatInstance()}if(f!==-1){let x=o-f;l.isLastSegment()&&x--,l.setOptionalData(N.copyOfRange(s,f,f+x))}return o}static textCompaction(s,o,l){let u=new Int32Array((s[0]-o)*2),d=new Int32Array((s[0]-o)*2),f=0,x=!1;for(;o<s[0]&&!x;){let b=s[o++];if(b<K.TEXT_COMPACTION_MODE_LATCH)u[f]=b/30,u[f+1]=b%30,f+=2;else switch(b){case K.TEXT_COMPACTION_MODE_LATCH:u[f++]=K.TEXT_COMPACTION_MODE_LATCH;break;case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:o--,x=!0;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u[f]=K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,b=s[o++],d[f]=b,f++;break}}return K.decodeTextCompaction(u,d,f,l),o}static decodeTextCompaction(s,o,l,u){let d=$e.ALPHA,f=$e.ALPHA,x=0;for(;x<l;){let b=s[x],v="";switch(d){case $e.ALPHA:if(b<26)v=String.fromCharCode(65+b);else switch(b){case 26:v=" ";break;case K.LL:d=$e.LOWER;break;case K.ML:d=$e.MIXED;break;case K.PS:f=d,d=$e.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[x]);break;case K.TEXT_COMPACTION_MODE_LATCH:d=$e.ALPHA;break}break;case $e.LOWER:if(b<26)v=String.fromCharCode(97+b);else switch(b){case 26:v=" ";break;case K.AS:f=d,d=$e.ALPHA_SHIFT;break;case K.ML:d=$e.MIXED;break;case K.PS:f=d,d=$e.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[x]);break;case K.TEXT_COMPACTION_MODE_LATCH:d=$e.ALPHA;break}break;case $e.MIXED:if(b<K.PL)v=K.MIXED_CHARS[b];else switch(b){case K.PL:d=$e.PUNCT;break;case 26:v=" ";break;case K.LL:d=$e.LOWER;break;case K.AL:d=$e.ALPHA;break;case K.PS:f=d,d=$e.PUNCT_SHIFT;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[x]);break;case K.TEXT_COMPACTION_MODE_LATCH:d=$e.ALPHA;break}break;case $e.PUNCT:if(b<K.PAL)v=K.PUNCT_CHARS[b];else switch(b){case K.PAL:d=$e.ALPHA;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[x]);break;case K.TEXT_COMPACTION_MODE_LATCH:d=$e.ALPHA;break}break;case $e.ALPHA_SHIFT:if(d=f,b<26)v=String.fromCharCode(65+b);else switch(b){case 26:v=" ";break;case K.TEXT_COMPACTION_MODE_LATCH:d=$e.ALPHA;break}break;case $e.PUNCT_SHIFT:if(d=f,b<K.PAL)v=K.PUNCT_CHARS[b];else switch(b){case K.PAL:d=$e.ALPHA;break;case K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:u.append(o[x]);break;case K.TEXT_COMPACTION_MODE_LATCH:d=$e.ALPHA;break}break}v!==""&&u.append(v),x++}}static byteCompaction(s,o,l,u,d){let f=new LA,x=0,b=0,v=!1;switch(s){case K.BYTE_COMPACTION_MODE_LATCH:let S=new Int32Array(6),M=o[u++];for(;u<o[0]&&!v;)switch(S[x++]=M,b=900*b+M,M=o[u++],M){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:u--,v=!0;break;default:if(x%5===0&&x>0){for(let R=0;R<6;++R)f.write(Number(Ms(b)>>Ms(8*(5-R))));b=0,x=0}break}u===o[0]&&M<K.TEXT_COMPACTION_MODE_LATCH&&(S[x++]=M);for(let R=0;R<x;R++)f.write(S[R]);break;case K.BYTE_COMPACTION_MODE_LATCH_6:for(;u<o[0]&&!v;){let R=o[u++];if(R<K.TEXT_COMPACTION_MODE_LATCH)x++,b=900*b+R;else switch(R){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.NUMERIC_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:u--,v=!0;break}if(x%5===0&&x>0){for(let V=0;V<6;++V)f.write(Number(Ms(b)>>Ms(8*(5-V))));b=0,x=0}}break}return d.append(J.decode(f.toByteArray(),l)),u}static numericCompaction(s,o,l){let u=0,d=!1,f=new Int32Array(K.MAX_NUMERIC_CODEWORDS);for(;o<s[0]&&!d;){let x=s[o++];if(o===s[0]&&(d=!0),x<K.TEXT_COMPACTION_MODE_LATCH)f[u]=x,u++;else switch(x){case K.TEXT_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH:case K.BYTE_COMPACTION_MODE_LATCH_6:case K.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case K.MACRO_PDF417_TERMINATOR:o--,d=!0;break}(u%K.MAX_NUMERIC_CODEWORDS===0||x===K.NUMERIC_COMPACTION_MODE_LATCH||d)&&u>0&&(l.append(K.decodeBase900toBase10(f,u)),u=0)}return o}static decodeBase900toBase10(s,o){let l=Ms(0);for(let d=0;d<o;d++)l+=K.EXP900[o-d-1]*Ms(s[d]);let u=l.toString();if(u.charAt(0)!=="1")throw new L;return u.substring(1)}}K.TEXT_COMPACTION_MODE_LATCH=900,K.BYTE_COMPACTION_MODE_LATCH=901,K.NUMERIC_COMPACTION_MODE_LATCH=902,K.BYTE_COMPACTION_MODE_LATCH_6=924,K.ECI_USER_DEFINED=925,K.ECI_GENERAL_PURPOSE=926,K.ECI_CHARSET=927,K.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,K.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,K.MACRO_PDF417_TERMINATOR=922,K.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,K.MAX_NUMERIC_CODEWORDS=15,K.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,K.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,K.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,K.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,K.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,K.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,K.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,K.PL=25,K.LL=27,K.AS=27,K.ML=28,K.AL=28,K.PS=29,K.PAL=29,K.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,K.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",K.EXP900=Gg()?BA():[],K.NUMBER_OF_SEQUENCE_CODEWORDS=2;class De{constructor(){}static decode(s,o,l,u,d,f,x){let b=new Cr(s,o,l,u,d),v=null,S=null,M;for(let H=!0;;H=!1){if(o!=null&&(v=De.getRowIndicatorColumn(s,b,o,!0,f,x)),u!=null&&(S=De.getRowIndicatorColumn(s,b,u,!1,f,x)),M=De.merge(v,S),M==null)throw Z.getNotFoundInstance();let G=M.getBoundingBox();if(H&&G!=null&&(G.getMinY()<b.getMinY()||G.getMaxY()>b.getMaxY()))b=G;else break}M.setBoundingBox(b);let R=M.getBarcodeColumnCount()+1;M.setDetectionResultColumn(0,v),M.setDetectionResultColumn(R,S);let V=v!=null;for(let H=1;H<=R;H++){let G=V?H:R-H;if(M.getDetectionResultColumn(G)!==void 0)continue;let q;G===0||G===R?q=new Fg(b,G===0):q=new Ho(b),M.setDetectionResultColumn(G,q);let Q=-1,le=Q;for(let ce=b.getMinY();ce<=b.getMaxY();ce++){if(Q=De.getStartColumn(M,G,ce,V),Q<0||Q>b.getMaxX()){if(le===-1)continue;Q=le}let re=De.detectCodeword(s,b.getMinX(),b.getMaxX(),V,Q,ce,f,x);re!=null&&(q.setCodeword(ce,re),le=Q,f=Math.min(f,re.getWidth()),x=Math.max(x,re.getWidth()))}}return De.createDecoderResult(M)}static merge(s,o){if(s==null&&o==null)return null;let l=De.getBarcodeMetadata(s,o);if(l==null)return null;let u=Cr.merge(De.adjustBoundingBox(s),De.adjustBoundingBox(o));return new Yo(l,u)}static adjustBoundingBox(s){if(s==null)return null;let o=s.getRowHeights();if(o==null)return null;let l=De.getMax(o),u=0;for(let x of o)if(u+=l-x,x>0)break;let d=s.getCodewords();for(let x=0;u>0&&d[x]==null;x++)u--;let f=0;for(let x=o.length-1;x>=0&&(f+=l-o[x],!(o[x]>0));x--);for(let x=d.length-1;f>0&&d[x]==null;x--)f--;return s.getBoundingBox().addMissingRows(u,f,s.isLeft())}static getMax(s){let o=-1;for(let l of s)o=Math.max(o,l);return o}static getBarcodeMetadata(s,o){let l;if(s==null||(l=s.getBarcodeMetadata())==null)return o==null?null:o.getBarcodeMetadata();let u;return o==null||(u=o.getBarcodeMetadata())==null?l:l.getColumnCount()!==u.getColumnCount()&&l.getErrorCorrectionLevel()!==u.getErrorCorrectionLevel()&&l.getRowCount()!==u.getRowCount()?null:l}static getRowIndicatorColumn(s,o,l,u,d,f){let x=new Fg(o,u);for(let b=0;b<2;b++){let v=b===0?1:-1,S=Math.trunc(Math.trunc(l.getX()));for(let M=Math.trunc(Math.trunc(l.getY()));M<=o.getMaxY()&&M>=o.getMinY();M+=v){let R=De.detectCodeword(s,0,s.getWidth(),u,S,M,d,f);R!=null&&(x.setCodeword(M,R),u?S=R.getStartX():S=R.getEndX())}}return x}static adjustCodewordCount(s,o){let l=o[0][1],u=l.getValue(),d=s.getBarcodeColumnCount()*s.getBarcodeRowCount()-De.getNumberOfECCodeWords(s.getBarcodeECLevel());if(u.length===0){if(d<1||d>Ee.MAX_CODEWORDS_IN_BARCODE)throw Z.getNotFoundInstance();l.setValue(d)}else u[0]!==d&&l.setValue(d)}static createDecoderResult(s){let o=De.createBarcodeMatrix(s);De.adjustCodewordCount(s,o);let l=new Array,u=new Int32Array(s.getBarcodeRowCount()*s.getBarcodeColumnCount()),d=[],f=new Array;for(let b=0;b<s.getBarcodeRowCount();b++)for(let v=0;v<s.getBarcodeColumnCount();v++){let S=o[b][v+1].getValue(),M=b*s.getBarcodeColumnCount()+v;S.length===0?l.push(M):S.length===1?u[M]=S[0]:(f.push(M),d.push(S))}let x=new Array(d.length);for(let b=0;b<x.length;b++)x[b]=d[b];return De.createDecoderResultFromAmbiguousValues(s.getBarcodeECLevel(),u,Ee.toIntArray(l),Ee.toIntArray(f),x)}static createDecoderResultFromAmbiguousValues(s,o,l,u,d){let f=new Int32Array(u.length),x=100;for(;x-- >0;){for(let b=0;b<f.length;b++)o[u[b]]=d[b][f[b]];try{return De.decodeCodewords(o,s,l)}catch(b){if(!(b instanceof A))throw b}if(f.length===0)throw A.getChecksumInstance();for(let b=0;b<f.length;b++)if(f[b]<d[b].length-1){f[b]++;break}else if(f[b]=0,b===f.length-1)throw A.getChecksumInstance()}throw A.getChecksumInstance()}static createBarcodeMatrix(s){let o=Array.from({length:s.getBarcodeRowCount()},()=>new Array(s.getBarcodeColumnCount()+2));for(let u=0;u<o.length;u++)for(let d=0;d<o[u].length;d++)o[u][d]=new Go;let l=0;for(let u of s.getDetectionResultColumns()){if(u!=null){for(let d of u.getCodewords())if(d!=null){let f=d.getRowNumber();if(f>=0){if(f>=o.length)continue;o[f][l].setValue(d.getValue())}}}l++}return o}static isValidBarcodeColumn(s,o){return o>=0&&o<=s.getBarcodeColumnCount()+1}static getStartColumn(s,o,l,u){let d=u?1:-1,f=null;if(De.isValidBarcodeColumn(s,o-d)&&(f=s.getDetectionResultColumn(o-d).getCodeword(l)),f!=null)return u?f.getEndX():f.getStartX();if(f=s.getDetectionResultColumn(o).getCodewordNearby(l),f!=null)return u?f.getStartX():f.getEndX();if(De.isValidBarcodeColumn(s,o-d)&&(f=s.getDetectionResultColumn(o-d).getCodewordNearby(l)),f!=null)return u?f.getEndX():f.getStartX();let x=0;for(;De.isValidBarcodeColumn(s,o-d);){o-=d;for(let b of s.getDetectionResultColumn(o).getCodewords())if(b!=null)return(u?b.getEndX():b.getStartX())+d*x*(b.getEndX()-b.getStartX());x++}return u?s.getBoundingBox().getMinX():s.getBoundingBox().getMaxX()}static detectCodeword(s,o,l,u,d,f,x,b){d=De.adjustCodewordStartColumn(s,o,l,u,d,f);let v=De.getModuleBitCount(s,o,l,u,d,f);if(v==null)return null;let S,M=Fe.sum(v);if(u)S=d+M;else{for(let H=0;H<v.length/2;H++){let G=v[H];v[H]=v[v.length-1-H],v[v.length-1-H]=G}S=d,d=S-M}if(!De.checkCodewordSkew(M,x,b))return null;let R=Cn.getDecodedValue(v),V=Ee.getCodeword(R);return V===-1?null:new qo(d,S,De.getCodewordBucketNumber(R),V)}static getModuleBitCount(s,o,l,u,d,f){let x=d,b=new Int32Array(8),v=0,S=u?1:-1,M=u;for(;(u?x<l:x>=o)&&v<b.length;)s.get(x,f)===M?(b[v]++,x+=S):(v++,M=!M);return v===b.length||x===(u?l:o)&&v===b.length-1?b:null}static getNumberOfECCodeWords(s){return 2<<s}static adjustCodewordStartColumn(s,o,l,u,d,f){let x=d,b=u?-1:1;for(let v=0;v<2;v++){for(;(u?x>=o:x<l)&&u===s.get(x,f);){if(Math.abs(d-x)>De.CODEWORD_SKEW_SIZE)return d;x+=b}b=-b,u=!u}return x}static checkCodewordSkew(s,o,l){return o-De.CODEWORD_SKEW_SIZE<=s&&s<=l+De.CODEWORD_SKEW_SIZE}static decodeCodewords(s,o,l){if(s.length===0)throw L.getFormatInstance();let u=1<<o+1,d=De.correctErrors(s,l,u);De.verifyCodewordCount(s,u);let f=K.decode(s,""+o);return f.setErrorsCorrected(d),f.setErasures(l.length),f}static correctErrors(s,o,l){if(o!=null&&o.length>l/2+De.MAX_ERRORS||l<0||l>De.MAX_EC_CODEWORDS)throw A.getChecksumInstance();return De.errorCorrection.decode(s,l,o)}static verifyCodewordCount(s,o){if(s.length<4)throw L.getFormatInstance();let l=s[0];if(l>s.length)throw L.getFormatInstance();if(l===0)if(o<s.length)s[0]=s.length-o;else throw L.getFormatInstance()}static getBitCountForCodeword(s){let o=new Int32Array(8),l=0,u=o.length-1;for(;!((s&1)!==l&&(l=s&1,u--,u<0));)o[u]++,s>>=1;return o}static getCodewordBucketNumber(s){return s instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(s):this.getCodewordBucketNumber_number(s)}static getCodewordBucketNumber_number(s){return De.getCodewordBucketNumber(De.getBitCountForCodeword(s))}static getCodewordBucketNumber_Int32Array(s){return(s[0]-s[2]+s[4]-s[6]+9)%9}static toString(s){let o=new zo;for(let l=0;l<s.length;l++){o.format("Row %2d: ",l);for(let u=0;u<s[l].length;u++){let d=s[l][u];d.getValue().length===0?o.format("        ",null):o.format("%4d(%2d)",d.getValue()[0],d.getConfidence(d.getValue()[0]))}o.format("%n")}return o.toString()}}De.CODEWORD_SKEW_SIZE=2,De.MAX_ERRORS=3,De.MAX_EC_CODEWORDS=512,De.errorCorrection=new Ug;class Jt{decode(s,o=null){let l=Jt.decode(s,o,!1);if(l==null||l.length===0||l[0]==null)throw Z.getNotFoundInstance();return l[0]}decodeMultiple(s,o=null){try{return Jt.decode(s,o,!0)}catch(l){throw l instanceof L||l instanceof A?Z.getNotFoundInstance():l}}static decode(s,o,l){const u=new Array,d=Me.detectMultiple(s,o,l);for(const f of d.getPoints()){const x=De.decode(d.getBits(),f[4],f[5],f[6],f[7],Jt.getMinCodewordWidth(f),Jt.getMaxCodewordWidth(f)),b=new Te(x.getText(),x.getRawBytes(),void 0,f,xe.PDF_417);b.putMetadata(Ht.ERROR_CORRECTION_LEVEL,x.getECLevel());const v=x.getOther();v!=null&&b.putMetadata(Ht.PDF417_EXTRA_METADATA,v),u.push(b)}return u.map(f=>f)}static getMaxWidth(s,o){return s==null||o==null?0:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMinWidth(s,o){return s==null||o==null?C.MAX_VALUE:Math.trunc(Math.abs(s.getX()-o.getX()))}static getMaxCodewordWidth(s){return Math.floor(Math.max(Math.max(Jt.getMaxWidth(s[0],s[4]),Jt.getMaxWidth(s[6],s[2])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN),Math.max(Jt.getMaxWidth(s[1],s[5]),Jt.getMaxWidth(s[7],s[3])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(s){return Math.floor(Math.min(Math.min(Jt.getMinWidth(s[0],s[4]),Jt.getMinWidth(s[6],s[2])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN),Math.min(Jt.getMinWidth(s[1],s[5]),Jt.getMinWidth(s[7],s[3])*Ee.MODULES_IN_CODEWORD/Ee.MODULES_IN_STOP_PATTERN)))}reset(){}}class Wc extends p{}Wc.kind="ReaderException";class Yg{constructor(s,o){this.verbose=s===!0,o&&this.setHints(o)}decode(s,o){return o&&this.setHints(o),this.decodeInternal(s)}decodeWithState(s){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(s)}setHints(s){this.hints=s;const o=!i(s)&&s.get(D.TRY_HARDER)===!0,l=i(s)?null:s.get(D.POSSIBLE_FORMATS),u=new Array;if(!i(l)){const d=l.some(f=>f===xe.UPC_A||f===xe.UPC_E||f===xe.EAN_13||f===xe.EAN_8||f===xe.CODABAR||f===xe.CODE_39||f===xe.CODE_93||f===xe.CODE_128||f===xe.ITF||f===xe.RSS_14||f===xe.RSS_EXPANDED);d&&!o&&u.push(new da(s,this.verbose)),l.includes(xe.QR_CODE)&&u.push(new _s),l.includes(xe.DATA_MATRIX)&&u.push(new Ns),l.includes(xe.AZTEC)&&u.push(new zc),l.includes(xe.PDF_417)&&u.push(new Jt),d&&o&&u.push(new da(s,this.verbose))}u.length===0&&(o||u.push(new da(s,this.verbose)),u.push(new _s),u.push(new Ns),u.push(new zc),u.push(new Jt),o&&u.push(new da(s,this.verbose))),this.readers=u}reset(){if(this.readers!==null)for(const s of this.readers)s.reset()}decodeInternal(s){if(this.readers===null)throw new Wc("No readers where selected, nothing can be read.");for(const o of this.readers)try{return o.decode(s,this.hints)}catch(l){if(l instanceof Wc)continue}throw new Z("No MultiFormat Readers were able to detect the code.")}}class PA extends Qe{constructor(s=null,o=500){const l=new Yg;l.setHints(s),super(l,o)}decodeBitmap(s){return this.reader.decodeWithState(s)}}class UA extends Qe{constructor(s=500){super(new Jt,s)}}class FA extends Qe{constructor(s=500){super(new _s,s)}}var Dh;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Dh||(Dh={}));var Ut=Dh;class Rh{constructor(s){this.field=s,this.cachedGenerators=[],this.cachedGenerators.push(new En(s,Int32Array.from([1])))}buildGenerator(s){const o=this.cachedGenerators;if(s>=o.length){let l=o[o.length-1];const u=this.field;for(let d=o.length;d<=s;d++){const f=l.multiply(new En(u,Int32Array.from([1,u.exp(d-1+u.getGeneratorBase())])));o.push(f),l=f}}return o[s]}encode(s,o){if(o===0)throw new w("No error correction bytes");const l=s.length-o;if(l<=0)throw new w("No data bytes provided");const u=this.buildGenerator(o),d=new Int32Array(l);I.arraycopy(s,0,d,0,l);let f=new En(this.field,d);f=f.multiplyByMonomial(o,1);const b=f.divide(u)[1].getCoefficients(),v=o-b.length;for(let S=0;S<v;S++)s[l+S]=0;I.arraycopy(b,0,s,l+v,b.length)}}class At{constructor(){}static applyMaskPenaltyRule1(s){return At.applyMaskPenaltyRule1Internal(s,!0)+At.applyMaskPenaltyRule1Internal(s,!1)}static applyMaskPenaltyRule2(s){let o=0;const l=s.getArray(),u=s.getWidth(),d=s.getHeight();for(let f=0;f<d-1;f++){const x=l[f];for(let b=0;b<u-1;b++){const v=x[b];v===x[b+1]&&v===l[f+1][b]&&v===l[f+1][b+1]&&o++}}return At.N2*o}static applyMaskPenaltyRule3(s){let o=0;const l=s.getArray(),u=s.getWidth(),d=s.getHeight();for(let f=0;f<d;f++)for(let x=0;x<u;x++){const b=l[f];x+6<u&&b[x]===1&&b[x+1]===0&&b[x+2]===1&&b[x+3]===1&&b[x+4]===1&&b[x+5]===0&&b[x+6]===1&&(At.isWhiteHorizontal(b,x-4,x)||At.isWhiteHorizontal(b,x+7,x+11))&&o++,f+6<d&&l[f][x]===1&&l[f+1][x]===0&&l[f+2][x]===1&&l[f+3][x]===1&&l[f+4][x]===1&&l[f+5][x]===0&&l[f+6][x]===1&&(At.isWhiteVertical(l,x,f-4,f)||At.isWhiteVertical(l,x,f+7,f+11))&&o++}return o*At.N3}static isWhiteHorizontal(s,o,l){o=Math.max(o,0),l=Math.min(l,s.length);for(let u=o;u<l;u++)if(s[u]===1)return!1;return!0}static isWhiteVertical(s,o,l,u){l=Math.max(l,0),u=Math.min(u,s.length);for(let d=l;d<u;d++)if(s[d][o]===1)return!1;return!0}static applyMaskPenaltyRule4(s){let o=0;const l=s.getArray(),u=s.getWidth(),d=s.getHeight();for(let b=0;b<d;b++){const v=l[b];for(let S=0;S<u;S++)v[S]===1&&o++}const f=s.getHeight()*s.getWidth();return Math.floor(Math.abs(o*2-f)*10/f)*At.N4}static getDataMaskBit(s,o,l){let u,d;switch(s){case 0:u=l+o&1;break;case 1:u=l&1;break;case 2:u=o%3;break;case 3:u=(l+o)%3;break;case 4:u=Math.floor(l/2)+Math.floor(o/3)&1;break;case 5:d=l*o,u=(d&1)+d%3;break;case 6:d=l*o,u=(d&1)+d%3&1;break;case 7:d=l*o,u=d%3+(l+o&1)&1;break;default:throw new w("Invalid mask pattern: "+s)}return u===0}static applyMaskPenaltyRule1Internal(s,o){let l=0;const u=o?s.getHeight():s.getWidth(),d=o?s.getWidth():s.getHeight(),f=s.getArray();for(let x=0;x<u;x++){let b=0,v=-1;for(let S=0;S<d;S++){const M=o?f[x][S]:f[S][x];M===v?b++:(b>=5&&(l+=At.N1+(b-5)),b=1,v=M)}b>=5&&(l+=At.N1+(b-5))}return l}}At.N1=3,At.N2=3,At.N3=40,At.N4=10;class Zc{constructor(s,o){this.width=s,this.height=o;const l=new Array(o);for(let u=0;u!==o;u++)l[u]=new Uint8Array(s);this.bytes=l}getHeight(){return this.height}getWidth(){return this.width}get(s,o){return this.bytes[o][s]}getArray(){return this.bytes}setNumber(s,o,l){this.bytes[o][s]=l}setBoolean(s,o,l){this.bytes[o][s]=l?1:0}clear(s){for(const o of this.bytes)N.fill(o,s)}equals(s){if(!(s instanceof Zc))return!1;const o=s;if(this.width!==o.width||this.height!==o.height)return!1;for(let l=0,u=this.height;l<u;++l){const d=this.bytes[l],f=o.bytes[l];for(let x=0,b=this.width;x<b;++x)if(d[x]!==f[x])return!1}return!0}toString(){const s=new de;for(let o=0,l=this.height;o<l;++o){const u=this.bytes[o];for(let d=0,f=this.width;d<f;++d)switch(u[d]){case 0:s.append(" 0");break;case 1:s.append(" 1");break;default:s.append("  ");break}s.append(`
`)}return s.toString()}}class Tr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const s=new de;return s.append(`<<
`),s.append(" mode: "),s.append(this.mode?this.mode.toString():"null"),s.append(`
 ecLevel: `),s.append(this.ecLevel?this.ecLevel.toString():"null"),s.append(`
 version: `),s.append(this.version?this.version.toString():"null"),s.append(`
 maskPattern: `),s.append(this.maskPattern.toString()),this.matrix?(s.append(`
 matrix:
`),s.append(this.matrix.toString())):s.append(`
 matrix: null
`),s.append(`>>
`),s.toString()}setMode(s){this.mode=s}setECLevel(s){this.ecLevel=s}setVersion(s){this.version=s}setMaskPattern(s){this.maskPattern=s}setMatrix(s){this.matrix=s}static isValidMaskPattern(s){return s>=0&&s<Tr.NUM_MASK_PATTERNS}}Tr.NUM_MASK_PATTERNS=8;class nt extends p{}nt.kind="WriterException";class ve{constructor(){}static clearMatrix(s){s.clear(255)}static buildMatrix(s,o,l,u,d){ve.clearMatrix(d),ve.embedBasicPatterns(l,d),ve.embedTypeInfo(o,u,d),ve.maybeEmbedVersionInfo(l,d),ve.embedDataBits(s,u,d)}static embedBasicPatterns(s,o){ve.embedPositionDetectionPatternsAndSeparators(o),ve.embedDarkDotAtLeftBottomCorner(o),ve.maybeEmbedPositionAdjustmentPatterns(s,o),ve.embedTimingPatterns(o)}static embedTypeInfo(s,o,l){const u=new k;ve.makeTypeInfoBits(s,o,u);for(let d=0,f=u.getSize();d<f;++d){const x=u.get(u.getSize()-1-d),b=ve.TYPE_INFO_COORDINATES[d],v=b[0],S=b[1];if(l.setBoolean(v,S,x),d<8){const M=l.getWidth()-d-1;l.setBoolean(M,8,x)}else{const R=l.getHeight()-7+(d-8);l.setBoolean(8,R,x)}}}static maybeEmbedVersionInfo(s,o){if(s.getVersionNumber()<7)return;const l=new k;ve.makeVersionInfoBits(s,l);let u=6*3-1;for(let d=0;d<6;++d)for(let f=0;f<3;++f){const x=l.get(u);u--,o.setBoolean(d,o.getHeight()-11+f,x),o.setBoolean(o.getHeight()-11+f,d,x)}}static embedDataBits(s,o,l){let u=0,d=-1,f=l.getWidth()-1,x=l.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);x>=0&&x<l.getHeight();){for(let b=0;b<2;++b){const v=f-b;if(!ve.isEmpty(l.get(v,x)))continue;let S;u<s.getSize()?(S=s.get(u),++u):S=!1,o!==255&&At.getDataMaskBit(o,v,x)&&(S=!S),l.setBoolean(v,x,S)}x+=d}d=-d,x+=d,f-=2}if(u!==s.getSize())throw new nt("Not all bits consumed: "+u+"/"+s.getSize())}static findMSBSet(s){return 32-C.numberOfLeadingZeros(s)}static calculateBCHCode(s,o){if(o===0)throw new w("0 polynomial");const l=ve.findMSBSet(o);for(s<<=l-1;ve.findMSBSet(s)>=l;)s^=o<<ve.findMSBSet(s)-l;return s}static makeTypeInfoBits(s,o,l){if(!Tr.isValidMaskPattern(o))throw new nt("Invalid mask pattern");const u=s.getBits()<<3|o;l.appendBits(u,5);const d=ve.calculateBCHCode(u,ve.TYPE_INFO_POLY);l.appendBits(d,10);const f=new k;if(f.appendBits(ve.TYPE_INFO_MASK_PATTERN,15),l.xor(f),l.getSize()!==15)throw new nt("should not happen but we got: "+l.getSize())}static makeVersionInfoBits(s,o){o.appendBits(s.getVersionNumber(),6);const l=ve.calculateBCHCode(s.getVersionNumber(),ve.VERSION_INFO_POLY);if(o.appendBits(l,12),o.getSize()!==18)throw new nt("should not happen but we got: "+o.getSize())}static isEmpty(s){return s===255}static embedTimingPatterns(s){for(let o=8;o<s.getWidth()-8;++o){const l=(o+1)%2;ve.isEmpty(s.get(o,6))&&s.setNumber(o,6,l),ve.isEmpty(s.get(6,o))&&s.setNumber(6,o,l)}}static embedDarkDotAtLeftBottomCorner(s){if(s.get(8,s.getHeight()-8)===0)throw new nt;s.setNumber(8,s.getHeight()-8,1)}static embedHorizontalSeparationPattern(s,o,l){for(let u=0;u<8;++u){if(!ve.isEmpty(l.get(s+u,o)))throw new nt;l.setNumber(s+u,o,0)}}static embedVerticalSeparationPattern(s,o,l){for(let u=0;u<7;++u){if(!ve.isEmpty(l.get(s,o+u)))throw new nt;l.setNumber(s,o+u,0)}}static embedPositionAdjustmentPattern(s,o,l){for(let u=0;u<5;++u){const d=ve.POSITION_ADJUSTMENT_PATTERN[u];for(let f=0;f<5;++f)l.setNumber(s+f,o+u,d[f])}}static embedPositionDetectionPattern(s,o,l){for(let u=0;u<7;++u){const d=ve.POSITION_DETECTION_PATTERN[u];for(let f=0;f<7;++f)l.setNumber(s+f,o+u,d[f])}}static embedPositionDetectionPatternsAndSeparators(s){const o=ve.POSITION_DETECTION_PATTERN[0].length;ve.embedPositionDetectionPattern(0,0,s),ve.embedPositionDetectionPattern(s.getWidth()-o,0,s),ve.embedPositionDetectionPattern(0,s.getWidth()-o,s);const l=8;ve.embedHorizontalSeparationPattern(0,l-1,s),ve.embedHorizontalSeparationPattern(s.getWidth()-l,l-1,s),ve.embedHorizontalSeparationPattern(0,s.getWidth()-l,s);const u=7;ve.embedVerticalSeparationPattern(u,0,s),ve.embedVerticalSeparationPattern(s.getHeight()-u-1,0,s),ve.embedVerticalSeparationPattern(u,s.getHeight()-u,s)}static maybeEmbedPositionAdjustmentPatterns(s,o){if(s.getVersionNumber()<2)return;const l=s.getVersionNumber()-1,u=ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[l];for(let d=0,f=u.length;d!==f;d++){const x=u[d];if(x>=0)for(let b=0;b!==f;b++){const v=u[b];v>=0&&ve.isEmpty(o.get(v,x))&&ve.embedPositionAdjustmentPattern(v-2,x-2,o)}}}}ve.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),ve.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),ve.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),ve.VERSION_INFO_POLY=7973,ve.TYPE_INFO_POLY=1335,ve.TYPE_INFO_MASK_PATTERN=21522;class VA{constructor(s,o){this.dataBytes=s,this.errorCorrectionBytes=o}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class ct{constructor(){}static calculateMaskPenalty(s){return At.applyMaskPenaltyRule1(s)+At.applyMaskPenaltyRule2(s)+At.applyMaskPenaltyRule3(s)+At.applyMaskPenaltyRule4(s)}static encode(s,o,l=null){let u=ct.DEFAULT_BYTE_MODE_ENCODING;const d=l!==null&&l.get(Ut.CHARACTER_SET)!==void 0;d&&(u=l.get(Ut.CHARACTER_SET).toString());const f=this.chooseMode(s,u),x=new k;if(f===we.BYTE&&(d||ct.DEFAULT_BYTE_MODE_ENCODING!==u)){const ce=U.getCharacterSetECIByName(u);ce!==void 0&&this.appendECI(ce,x)}this.appendModeInfo(f,x);const b=new k;this.appendBytes(s,f,b,u);let v;if(l!==null&&l.get(Ut.QR_VERSION)!==void 0){const ce=Number.parseInt(l.get(Ut.QR_VERSION).toString(),10);v=ye.getVersionForNumber(ce);const re=this.calculateBitsNeeded(f,x,b,v);if(!this.willFit(re,v,o))throw new nt("Data too big for requested version")}else v=this.recommendVersion(o,f,x,b);const S=new k;S.appendBitArray(x);const M=f===we.BYTE?b.getSizeInBytes():s.length;this.appendLengthInfo(M,v,f,S),S.appendBitArray(b);const R=v.getECBlocksForLevel(o),V=v.getTotalCodewords()-R.getTotalECCodewords();this.terminateBits(V,S);const H=this.interleaveWithECBytes(S,v.getTotalCodewords(),V,R.getNumBlocks()),G=new Tr;G.setECLevel(o),G.setMode(f),G.setVersion(v);const q=v.getDimensionForVersion(),Q=new Zc(q,q),le=this.chooseMaskPattern(H,o,v,Q);return G.setMaskPattern(le),ve.buildMatrix(H,o,v,le,Q),G.setMatrix(Q),G}static recommendVersion(s,o,l,u){const d=this.calculateBitsNeeded(o,l,u,ye.getVersionForNumber(1)),f=this.chooseVersion(d,s),x=this.calculateBitsNeeded(o,l,u,f);return this.chooseVersion(x,s)}static calculateBitsNeeded(s,o,l,u){return o.getSize()+s.getCharacterCountBits(u)+l.getSize()}static getAlphanumericCode(s){return s<ct.ALPHANUMERIC_TABLE.length?ct.ALPHANUMERIC_TABLE[s]:-1}static chooseMode(s,o=null){if(U.SJIS.getName()===o&&this.isOnlyDoubleByteKanji(s))return we.KANJI;let l=!1,u=!1;for(let d=0,f=s.length;d<f;++d){const x=s.charAt(d);if(ct.isDigit(x))l=!0;else if(this.getAlphanumericCode(x.charCodeAt(0))!==-1)u=!0;else return we.BYTE}return u?we.ALPHANUMERIC:l?we.NUMERIC:we.BYTE}static isOnlyDoubleByteKanji(s){let o;try{o=J.encode(s,U.SJIS)}catch{return!1}const l=o.length;if(l%2!==0)return!1;for(let u=0;u<l;u+=2){const d=o[u]&255;if((d<129||d>159)&&(d<224||d>235))return!1}return!0}static chooseMaskPattern(s,o,l,u){let d=Number.MAX_SAFE_INTEGER,f=-1;for(let x=0;x<Tr.NUM_MASK_PATTERNS;x++){ve.buildMatrix(s,o,l,x,u);let b=this.calculateMaskPenalty(u);b<d&&(d=b,f=x)}return f}static chooseVersion(s,o){for(let l=1;l<=40;l++){const u=ye.getVersionForNumber(l);if(ct.willFit(s,u,o))return u}throw new nt("Data too big")}static willFit(s,o,l){const u=o.getTotalCodewords(),f=o.getECBlocksForLevel(l).getTotalECCodewords(),x=u-f,b=(s+7)/8;return x>=b}static terminateBits(s,o){const l=s*8;if(o.getSize()>l)throw new nt("data bits cannot fit in the QR Code"+o.getSize()+" > "+l);for(let f=0;f<4&&o.getSize()<l;++f)o.appendBit(!1);const u=o.getSize()&7;if(u>0)for(let f=u;f<8;f++)o.appendBit(!1);const d=s-o.getSizeInBytes();for(let f=0;f<d;++f)o.appendBits(f&1?17:236,8);if(o.getSize()!==l)throw new nt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(s,o,l,u,d,f){if(u>=l)throw new nt("Block ID too large");const x=s%l,b=l-x,v=Math.floor(s/l),S=v+1,M=Math.floor(o/l),R=M+1,V=v-M,H=S-R;if(V!==H)throw new nt("EC bytes mismatch");if(l!==b+x)throw new nt("RS blocks mismatch");if(s!==(M+V)*b+(R+H)*x)throw new nt("Total bytes mismatch");u<b?(d[0]=M,f[0]=V):(d[0]=R,f[0]=H)}static interleaveWithECBytes(s,o,l,u){if(s.getSizeInBytes()!==l)throw new nt("Number of bits and data bytes does not match");let d=0,f=0,x=0;const b=new Array;for(let S=0;S<u;++S){const M=new Int32Array(1),R=new Int32Array(1);ct.getNumDataBytesAndNumECBytesForBlockID(o,l,u,S,M,R);const V=M[0],H=new Uint8Array(V);s.toBytes(8*d,H,0,V);const G=ct.generateECBytes(H,R[0]);b.push(new VA(H,G)),f=Math.max(f,V),x=Math.max(x,G.length),d+=M[0]}if(l!==d)throw new nt("Data bytes does not match offset");const v=new k;for(let S=0;S<f;++S)for(const M of b){const R=M.getDataBytes();S<R.length&&v.appendBits(R[S],8)}for(let S=0;S<x;++S)for(const M of b){const R=M.getErrorCorrectionBytes();S<R.length&&v.appendBits(R[S],8)}if(o!==v.getSizeInBytes())throw new nt("Interleaving error: "+o+" and "+v.getSizeInBytes()+" differ.");return v}static generateECBytes(s,o){const l=s.length,u=new Int32Array(l+o);for(let f=0;f<l;f++)u[f]=s[f]&255;new Rh(ze.QR_CODE_FIELD_256).encode(u,o);const d=new Uint8Array(o);for(let f=0;f<o;f++)d[f]=u[l+f];return d}static appendModeInfo(s,o){o.appendBits(s.getBits(),4)}static appendLengthInfo(s,o,l,u){const d=l.getCharacterCountBits(o);if(s>=1<<d)throw new nt(s+" is bigger than "+((1<<d)-1));u.appendBits(s,d)}static appendBytes(s,o,l,u){switch(o){case we.NUMERIC:ct.appendNumericBytes(s,l);break;case we.ALPHANUMERIC:ct.appendAlphanumericBytes(s,l);break;case we.BYTE:ct.append8BitBytes(s,l,u);break;case we.KANJI:ct.appendKanjiBytes(s,l);break;default:throw new nt("Invalid mode: "+o)}}static getDigit(s){return s.charCodeAt(0)-48}static isDigit(s){const o=ct.getDigit(s);return o>=0&&o<=9}static appendNumericBytes(s,o){const l=s.length;let u=0;for(;u<l;){const d=ct.getDigit(s.charAt(u));if(u+2<l){const f=ct.getDigit(s.charAt(u+1)),x=ct.getDigit(s.charAt(u+2));o.appendBits(d*100+f*10+x,10),u+=3}else if(u+1<l){const f=ct.getDigit(s.charAt(u+1));o.appendBits(d*10+f,7),u+=2}else o.appendBits(d,4),u++}}static appendAlphanumericBytes(s,o){const l=s.length;let u=0;for(;u<l;){const d=ct.getAlphanumericCode(s.charCodeAt(u));if(d===-1)throw new nt;if(u+1<l){const f=ct.getAlphanumericCode(s.charCodeAt(u+1));if(f===-1)throw new nt;o.appendBits(d*45+f,11),u+=2}else o.appendBits(d,6),u++}}static append8BitBytes(s,o,l){let u;try{u=J.encode(s,l)}catch(d){throw new nt(d)}for(let d=0,f=u.length;d!==f;d++){const x=u[d];o.appendBits(x,8)}}static appendKanjiBytes(s,o){let l;try{l=J.encode(s,U.SJIS)}catch(d){throw new nt(d)}const u=l.length;for(let d=0;d<u;d+=2){const f=l[d]&255,x=l[d+1]&255,b=f<<8&4294967295|x;let v=-1;if(b>=33088&&b<=40956?v=b-33088:b>=57408&&b<=60351&&(v=b-49472),v===-1)throw new nt("Invalid byte sequence");const S=(v>>8)*192+(v&255);o.appendBits(S,13)}}static appendECI(s,o){o.appendBits(we.ECI.getBits(),4),o.appendBits(s.getValue(),8)}}ct.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),ct.DEFAULT_BYTE_MODE_ENCODING=U.UTF8.getName();class Nr{write(s,o,l,u=null){if(s.length===0)throw new w("Found empty contents");if(o<0||l<0)throw new w("Requested dimensions are too small: "+o+"x"+l);let d=at.L,f=Nr.QUIET_ZONE_SIZE;u!==null&&(u.get(Ut.ERROR_CORRECTION)!==void 0&&(d=at.fromString(u.get(Ut.ERROR_CORRECTION).toString())),u.get(Ut.MARGIN)!==void 0&&(f=Number.parseInt(u.get(Ut.MARGIN).toString(),10)));const x=ct.encode(s,d,u);return this.renderResult(x,o,l,f)}writeToDom(s,o,l,u,d=null){typeof s=="string"&&(s=document.querySelector(s));const f=this.write(o,l,u,d);s&&s.appendChild(f)}renderResult(s,o,l,u){const d=s.getMatrix();if(d===null)throw new _i;const f=d.getWidth(),x=d.getHeight(),b=f+u*2,v=x+u*2,S=Math.max(o,b),M=Math.max(l,v),R=Math.min(Math.floor(S/b),Math.floor(M/v)),V=Math.floor((S-f*R)/2),H=Math.floor((M-x*R)/2),G=this.createSVGElement(S,M);for(let q=0,Q=H;q<x;q++,Q+=R)for(let le=0,ce=V;le<f;le++,ce+=R)if(d.get(le,q)===1){const re=this.createSvgRectElement(ce,Q,R,R);G.appendChild(re)}return G}createSVGElement(s,o){const l=document.createElementNS(Nr.SVG_NS,"svg");return l.setAttributeNS(null,"height",s.toString()),l.setAttributeNS(null,"width",o.toString()),l}createSvgRectElement(s,o,l,u){const d=document.createElementNS(Nr.SVG_NS,"rect");return d.setAttributeNS(null,"x",s.toString()),d.setAttributeNS(null,"y",o.toString()),d.setAttributeNS(null,"height",l.toString()),d.setAttributeNS(null,"width",u.toString()),d.setAttributeNS(null,"fill","#000000"),d}}Nr.QUIET_ZONE_SIZE=4,Nr.SVG_NS="http://www.w3.org/2000/svg";class fa{encode(s,o,l,u,d){if(s.length===0)throw new w("Found empty contents");if(o!==xe.QR_CODE)throw new w("Can only encode QR_CODE, but got "+o);if(l<0||u<0)throw new w(`Requested dimensions are too small: ${l}x${u}`);let f=at.L,x=fa.QUIET_ZONE_SIZE;d!==null&&(d.get(Ut.ERROR_CORRECTION)!==void 0&&(f=at.fromString(d.get(Ut.ERROR_CORRECTION).toString())),d.get(Ut.MARGIN)!==void 0&&(x=Number.parseInt(d.get(Ut.MARGIN).toString(),10)));const b=ct.encode(s,f,d);return fa.renderResult(b,l,u,x)}static renderResult(s,o,l,u){const d=s.getMatrix();if(d===null)throw new _i;const f=d.getWidth(),x=d.getHeight(),b=f+u*2,v=x+u*2,S=Math.max(o,b),M=Math.max(l,v),R=Math.min(Math.floor(S/b),Math.floor(M/v)),V=Math.floor((S-f*R)/2),H=Math.floor((M-x*R)/2),G=new be(S,M);for(let q=0,Q=H;q<x;q++,Q+=R)for(let le=0,ce=V;le<f;le++,ce+=R)d.get(le,q)===1&&G.setRegion(ce,Q,R,R);return G}}fa.QUIET_ZONE_SIZE=4;class zA{encode(s,o,l,u,d){let f;switch(o){case xe.QR_CODE:f=new fa;break;default:throw new w("No encoder available for format "+o)}return f.encode(s,o,l,u,d)}}class Ri extends W{constructor(s,o,l,u,d,f,x,b){if(super(f,x),this.yuvData=s,this.dataWidth=o,this.dataHeight=l,this.left=u,this.top=d,u+f>o||d+x>l)throw new w("Crop rectangle does not fit within image data.");b&&this.reverseHorizontal(f,x)}getRow(s,o){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return I.arraycopy(this.yuvData,u,o,0,l),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.yuvData;const l=s*o,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return I.arraycopy(this.yuvData,d,u,0,l),u;for(let f=0;f<o;f++){const x=f*s;I.arraycopy(this.yuvData,d,u,x,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,o,l,u){return new Ri(this.yuvData,this.dataWidth,this.dataHeight,this.left+s,this.top+o,l,u,!1)}renderThumbnail(){const s=this.getWidth()/Ri.THUMBNAIL_SCALE_FACTOR,o=this.getHeight()/Ri.THUMBNAIL_SCALE_FACTOR,l=new Int32Array(s*o),u=this.yuvData;let d=this.top*this.dataWidth+this.left;for(let f=0;f<o;f++){const x=f*s;for(let b=0;b<s;b++){const v=u[d+b*Ri.THUMBNAIL_SCALE_FACTOR]&255;l[x+b]=4278190080|v*65793}d+=this.dataWidth*Ri.THUMBNAIL_SCALE_FACTOR}return l}getThumbnailWidth(){return this.getWidth()/Ri.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Ri.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(s,o){const l=this.yuvData;for(let u=0,d=this.top*this.dataWidth+this.left;u<o;u++,d+=this.dataWidth){const f=d+s/2;for(let x=d,b=d+s-1;x<f;x++,b--){const v=l[x];l[x]=l[b],l[b]=v}}}invert(){return new ae(this)}}Ri.THUMBNAIL_SCALE_FACTOR=2;class Oh extends W{constructor(s,o,l,u,d,f,x){if(super(o,l),this.dataWidth=u,this.dataHeight=d,this.left=f,this.top=x,s.BYTES_PER_ELEMENT===4){const b=o*l,v=new Uint8ClampedArray(b);for(let S=0;S<b;S++){const M=s[S],R=M>>16&255,V=M>>7&510,H=M&255;v[S]=(R+V+H)/4&255}this.luminances=v}else this.luminances=s;if(u===void 0&&(this.dataWidth=o),d===void 0&&(this.dataHeight=l),f===void 0&&(this.left=0),x===void 0&&(this.top=0),this.left+o>this.dataWidth||this.top+l>this.dataHeight)throw new w("Crop rectangle does not fit within image data.")}getRow(s,o){if(s<0||s>=this.getHeight())throw new w("Requested row is outside the image: "+s);const l=this.getWidth();(o==null||o.length<l)&&(o=new Uint8ClampedArray(l));const u=(s+this.top)*this.dataWidth+this.left;return I.arraycopy(this.luminances,u,o,0,l),o}getMatrix(){const s=this.getWidth(),o=this.getHeight();if(s===this.dataWidth&&o===this.dataHeight)return this.luminances;const l=s*o,u=new Uint8ClampedArray(l);let d=this.top*this.dataWidth+this.left;if(s===this.dataWidth)return I.arraycopy(this.luminances,d,u,0,l),u;for(let f=0;f<o;f++){const x=f*s;I.arraycopy(this.luminances,d,u,x,s),d+=this.dataWidth}return u}isCropSupported(){return!0}crop(s,o,l,u){return new Oh(this.luminances,l,u,this.dataWidth,this.dataHeight,this.left+s,this.top+o)}invert(){return new ae(this)}}class qg extends U{static forName(s){return this.getCharacterSetECIByName(s)}}class jh{}jh.ISO_8859_1=U.ISO8859_1;class Xg{isCompact(){return this.compact}setCompact(s){this.compact=s}getSize(){return this.size}setSize(s){this.size=s}getLayers(){return this.layers}setLayers(s){this.layers=s}getCodeWords(){return this.codeWords}setCodeWords(s){this.codeWords=s}getMatrix(){return this.matrix}setMatrix(s){this.matrix=s}}class Wg{static singletonList(s){return[s]}static min(s,o){return s.sort(o)[0]}}class HA{constructor(s){this.previous=s}getPrevious(){return this.previous}}class ma extends HA{constructor(s,o,l){super(s),this.value=o,this.bitCount=l}appendTo(s,o){s.appendBits(this.value,this.bitCount)}add(s,o){return new ma(this,s,o)}addBinaryShift(s,o){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ma(this,s,o)}toString(){let s=this.value&(1<<this.bitCount)-1;return s|=1<<this.bitCount,"<"+C.toBinaryString(s|1<<this.bitCount).substring(1)+">"}}class kh extends ma{constructor(s,o,l){super(s,0,0),this.binaryShiftStart=o,this.binaryShiftByteCount=l}appendTo(s,o){for(let l=0;l<this.binaryShiftByteCount;l++)(l===0||l===31&&this.binaryShiftByteCount<=62)&&(s.appendBits(31,5),this.binaryShiftByteCount>62?s.appendBits(this.binaryShiftByteCount-31,16):l===0?s.appendBits(Math.min(this.binaryShiftByteCount,31),5):s.appendBits(this.binaryShiftByteCount-31,5)),s.appendBits(o[this.binaryShiftStart+l],8)}addBinaryShift(s,o){return new kh(this,s,o)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function GA(_,s,o){return new kh(_,s,o)}function Xo(_,s,o){return new ma(_,s,o)}const YA=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Is=0,Kc=1,ni=2,Zg=3,Oi=4,qA=new ma(null,0,0),Lh=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function XA(_){for(let s of _)N.fill(s,-1);return _[Is][Oi]=0,_[Kc][Oi]=0,_[Kc][Is]=28,_[Zg][Oi]=0,_[ni][Oi]=0,_[ni][Is]=15,_}const Kg=XA(N.createInt32Array(6,6));class ji{constructor(s,o,l,u){this.token=s,this.mode=o,this.binaryShiftByteCount=l,this.bitCount=u}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(s,o){let l=this.bitCount,u=this.token;if(s!==this.mode){let f=Lh[this.mode][s];u=Xo(u,f&65535,f>>16),l+=f>>16}let d=s===ni?4:5;return u=Xo(u,o,d),new ji(u,s,0,l+d)}shiftAndAppend(s,o){let l=this.token,u=this.mode===ni?4:5;return l=Xo(l,Kg[this.mode][s],u),l=Xo(l,o,5),new ji(l,this.mode,0,this.bitCount+u+5)}addBinaryShiftChar(s){let o=this.token,l=this.mode,u=this.bitCount;if(this.mode===Oi||this.mode===ni){let x=Lh[l][Is];o=Xo(o,x&65535,x>>16),u+=x>>16,l=Is}let d=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ji(o,l,this.binaryShiftByteCount+1,u+d);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(s+1)),f}endBinaryShift(s){if(this.binaryShiftByteCount===0)return this;let o=this.token;return o=GA(o,s-this.binaryShiftByteCount,this.binaryShiftByteCount),new ji(o,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(s){let o=this.bitCount+(Lh[this.mode][s.mode]>>16);return this.binaryShiftByteCount<s.binaryShiftByteCount?o+=ji.calculateBinaryShiftCost(s)-ji.calculateBinaryShiftCost(this):this.binaryShiftByteCount>s.binaryShiftByteCount&&s.binaryShiftByteCount>0&&(o+=10),o<=s.bitCount}toBitArray(s){let o=[];for(let u=this.endBinaryShift(s.length).token;u!==null;u=u.getPrevious())o.unshift(u);let l=new k;for(const u of o)u.appendTo(l,s);return l}toString(){return ee.format("%s bits=%d bytes=%d",YA[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(s){return s.binaryShiftByteCount>62?21:s.binaryShiftByteCount>31?20:s.binaryShiftByteCount>0?10:0}}ji.INITIAL_STATE=new ji(qA,Is,0,0);function WA(_){const s=ee.getCharCode(" "),o=ee.getCharCode("."),l=ee.getCharCode(",");_[Is][s]=1;const u=ee.getCharCode("Z"),d=ee.getCharCode("A");for(let R=d;R<=u;R++)_[Is][R]=R-d+2;_[Kc][s]=1;const f=ee.getCharCode("z"),x=ee.getCharCode("a");for(let R=x;R<=f;R++)_[Kc][R]=R-x+2;_[ni][s]=1;const b=ee.getCharCode("9"),v=ee.getCharCode("0");for(let R=v;R<=b;R++)_[ni][R]=R-v+2;_[ni][l]=12,_[ni][o]=13;const S=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let R=0;R<S.length;R++)_[Zg][ee.getCharCode(S[R])]=R;const M=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let R=0;R<M.length;R++)ee.getCharCode(M[R])>0&&(_[Oi][ee.getCharCode(M[R])]=R);return _}const Bh=WA(N.createInt32Array(5,256));class Wo{constructor(s){this.text=s}encode(){const s=ee.getCharCode(" "),o=ee.getCharCode(`
`);let l=Wg.singletonList(ji.INITIAL_STATE);for(let d=0;d<this.text.length;d++){let f,x=d+1<this.text.length?this.text[d+1]:0;switch(this.text[d]){case ee.getCharCode("\r"):f=x===o?2:0;break;case ee.getCharCode("."):f=x===s?3:0;break;case ee.getCharCode(","):f=x===s?4:0;break;case ee.getCharCode(":"):f=x===s?5:0;break;default:f=0}f>0?(l=Wo.updateStateListForPair(l,d,f),d++):l=this.updateStateListForChar(l,d)}return Wg.min(l,(d,f)=>d.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(s,o){const l=[];for(let u of s)this.updateStateForChar(u,o,l);return Wo.simplifyStates(l)}updateStateForChar(s,o,l){let u=this.text[o]&255,d=Bh[s.getMode()][u]>0,f=null;for(let x=0;x<=Oi;x++){let b=Bh[x][u];if(b>0){if(f==null&&(f=s.endBinaryShift(o)),!d||x===s.getMode()||x===ni){const v=f.latchAndAppend(x,b);l.push(v)}if(!d&&Kg[s.getMode()][x]>=0){const v=f.shiftAndAppend(x,b);l.push(v)}}}if(s.getBinaryShiftByteCount()>0||Bh[s.getMode()][u]===0){let x=s.addBinaryShiftChar(o);l.push(x)}}static updateStateListForPair(s,o,l){const u=[];for(let d of s)this.updateStateForPair(d,o,l,u);return this.simplifyStates(u)}static updateStateForPair(s,o,l,u){let d=s.endBinaryShift(o);if(u.push(d.latchAndAppend(Oi,l)),s.getMode()!==Oi&&u.push(d.shiftAndAppend(Oi,l)),l===3||l===4){let f=d.latchAndAppend(ni,16-l).latchAndAppend(ni,1);u.push(f)}if(s.getBinaryShiftByteCount()>0){let f=s.addBinaryShiftChar(o).addBinaryShiftChar(o+1);u.push(f)}}static simplifyStates(s){let o=[];for(const l of s){let u=!0;for(const d of o){if(d.isBetterThanOrEqualTo(l)){u=!1;break}l.isBetterThanOrEqualTo(d)&&(o=o.filter(f=>f!==d))}u&&o.push(l)}return o}}class Ve{constructor(){}static encodeBytes(s){return Ve.encode(s,Ve.DEFAULT_EC_PERCENT,Ve.DEFAULT_AZTEC_LAYERS)}static encode(s,o,l){let u=new Wo(s).encode(),d=C.truncDivision(u.getSize()*o,100)+11,f=u.getSize()+d,x,b,v,S,M;if(l!==Ve.DEFAULT_AZTEC_LAYERS){if(x=l<0,b=Math.abs(l),b>(x?Ve.MAX_NB_BITS_COMPACT:Ve.MAX_NB_BITS))throw new w(ee.format("Illegal value %s for layers",l));v=Ve.totalBitsInLayer(b,x),S=Ve.WORD_SIZE[b];let re=v-v%S;if(M=Ve.stuffBits(u,S),M.getSize()+d>re)throw new w("Data to large for user specified layer");if(x&&M.getSize()>S*64)throw new w("Data to large for user specified layer")}else{S=0,M=null;for(let re=0;;re++){if(re>Ve.MAX_NB_BITS)throw new w("Data too large for an Aztec code");if(x=re<=3,b=x?re+1:re,v=Ve.totalBitsInLayer(b,x),f>v)continue;(M==null||S!==Ve.WORD_SIZE[b])&&(S=Ve.WORD_SIZE[b],M=Ve.stuffBits(u,S));let Le=v-v%S;if(!(x&&M.getSize()>S*64)&&M.getSize()+d<=Le)break}}let R=Ve.generateCheckWords(M,v,S),V=M.getSize()/S,H=Ve.generateModeMessage(x,b,V),G=(x?11:14)+b*4,q=new Int32Array(G),Q;if(x){Q=G;for(let re=0;re<q.length;re++)q[re]=re}else{Q=G+1+2*C.truncDivision(C.truncDivision(G,2)-1,15);let re=C.truncDivision(G,2),Le=C.truncDivision(Q,2);for(let Ne=0;Ne<re;Ne++){let Tn=Ne+C.truncDivision(Ne,15);q[re-Ne-1]=Le-Tn-1,q[re+Ne]=Le+Tn+1}}let le=new be(Q);for(let re=0,Le=0;re<b;re++){let Ne=(b-re)*4+(x?9:12);for(let Tn=0;Tn<Ne;Tn++){let xi=Tn*2;for(let Nn=0;Nn<2;Nn++)R.get(Le+xi+Nn)&&le.set(q[re*2+Nn],q[re*2+Tn]),R.get(Le+Ne*2+xi+Nn)&&le.set(q[re*2+Tn],q[G-1-re*2-Nn]),R.get(Le+Ne*4+xi+Nn)&&le.set(q[G-1-re*2-Nn],q[G-1-re*2-Tn]),R.get(Le+Ne*6+xi+Nn)&&le.set(q[G-1-re*2-Tn],q[re*2+Nn])}Le+=Ne*8}if(Ve.drawModeMessage(le,x,Q,H),x)Ve.drawBullsEye(le,C.truncDivision(Q,2),5);else{Ve.drawBullsEye(le,C.truncDivision(Q,2),7);for(let re=0,Le=0;re<C.truncDivision(G,2)-1;re+=15,Le+=16)for(let Ne=C.truncDivision(Q,2)&1;Ne<Q;Ne+=2)le.set(C.truncDivision(Q,2)-Le,Ne),le.set(C.truncDivision(Q,2)+Le,Ne),le.set(Ne,C.truncDivision(Q,2)-Le),le.set(Ne,C.truncDivision(Q,2)+Le)}let ce=new Xg;return ce.setCompact(x),ce.setSize(Q),ce.setLayers(b),ce.setCodeWords(V),ce.setMatrix(le),ce}static drawBullsEye(s,o,l){for(let u=0;u<l;u+=2)for(let d=o-u;d<=o+u;d++)s.set(d,o-u),s.set(d,o+u),s.set(o-u,d),s.set(o+u,d);s.set(o-l,o-l),s.set(o-l+1,o-l),s.set(o-l,o-l+1),s.set(o+l,o-l),s.set(o+l,o-l+1),s.set(o+l,o+l-1)}static generateModeMessage(s,o,l){let u=new k;return s?(u.appendBits(o-1,2),u.appendBits(l-1,6),u=Ve.generateCheckWords(u,28,4)):(u.appendBits(o-1,5),u.appendBits(l-1,11),u=Ve.generateCheckWords(u,40,4)),u}static drawModeMessage(s,o,l,u){let d=C.truncDivision(l,2);if(o)for(let f=0;f<7;f++){let x=d-3+f;u.get(f)&&s.set(x,d-5),u.get(f+7)&&s.set(d+5,x),u.get(20-f)&&s.set(x,d+5),u.get(27-f)&&s.set(d-5,x)}else for(let f=0;f<10;f++){let x=d-5+f+C.truncDivision(f,5);u.get(f)&&s.set(x,d-7),u.get(f+10)&&s.set(d+7,x),u.get(29-f)&&s.set(x,d+7),u.get(39-f)&&s.set(d-7,x)}}static generateCheckWords(s,o,l){let u=s.getSize()/l,d=new Rh(Ve.getGF(l)),f=C.truncDivision(o,l),x=Ve.bitsToWords(s,l,f);d.encode(x,f-u);let b=o%l,v=new k;v.appendBits(0,b);for(const S of Array.from(x))v.appendBits(S,l);return v}static bitsToWords(s,o,l){let u=new Int32Array(l),d,f;for(d=0,f=s.getSize()/o;d<f;d++){let x=0;for(let b=0;b<o;b++)x|=s.get(d*o+b)?1<<o-b-1:0;u[d]=x}return u}static getGF(s){switch(s){case 4:return ze.AZTEC_PARAM;case 6:return ze.AZTEC_DATA_6;case 8:return ze.AZTEC_DATA_8;case 10:return ze.AZTEC_DATA_10;case 12:return ze.AZTEC_DATA_12;default:throw new w("Unsupported word size "+s)}}static stuffBits(s,o){let l=new k,u=s.getSize(),d=(1<<o)-2;for(let f=0;f<u;f+=o){let x=0;for(let b=0;b<o;b++)(f+b>=u||s.get(f+b))&&(x|=1<<o-1-b);(x&d)===d?(l.appendBits(x&d,o),f--):x&d?l.appendBits(x,o):(l.appendBits(x|1,o),f--)}return l}static totalBitsInLayer(s,o){return((o?88:112)+16*s)*s}}Ve.DEFAULT_EC_PERCENT=33,Ve.DEFAULT_AZTEC_LAYERS=0,Ve.MAX_NB_BITS=32,Ve.MAX_NB_BITS_COMPACT=4,Ve.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Qc{encode(s,o,l,u){return this.encodeWithHints(s,o,l,u,null)}encodeWithHints(s,o,l,u,d){let f=jh.ISO_8859_1,x=Ve.DEFAULT_EC_PERCENT,b=Ve.DEFAULT_AZTEC_LAYERS;return d!=null&&(d.has(Ut.CHARACTER_SET)&&(f=qg.forName(d.get(Ut.CHARACTER_SET).toString())),d.has(Ut.ERROR_CORRECTION)&&(x=C.parseInt(d.get(Ut.ERROR_CORRECTION).toString())),d.has(Ut.AZTEC_LAYERS)&&(b=C.parseInt(d.get(Ut.AZTEC_LAYERS).toString()))),Qc.encodeLayers(s,o,l,u,f,x,b)}static encodeLayers(s,o,l,u,d,f,x){if(o!==xe.AZTEC)throw new w("Can only encode AZTEC, but got "+o);let b=Ve.encode(ee.getBytes(s,d),f,x);return Qc.renderResult(b,l,u)}static renderResult(s,o,l){let u=s.getMatrix();if(u==null)throw new _i;let d=u.getWidth(),f=u.getHeight(),x=Math.max(o,d),b=Math.max(l,f),v=Math.min(x/d,b/f),S=(x-d*v)/2,M=(b-f*v)/2,R=new be(x,b);for(let V=0,H=M;V<f;V++,H+=v)for(let G=0,q=S;G<d;G++,q+=v)u.get(G,V)&&R.setRegion(q,H,v,v);return R}}n.AbstractExpandedDecoder=Eh,n.ArgumentException=y,n.ArithmeticException=Uc,n.AztecCode=Xg,n.AztecCodeReader=zc,n.AztecCodeWriter=Qc,n.AztecDecoder=rt,n.AztecDetector=Og,n.AztecDetectorResult=Dg,n.AztecEncoder=Ve,n.AztecHighLevelEncoder=Wo,n.AztecPoint=gn,n.BarcodeFormat=xe,n.Binarizer=O,n.BinaryBitmap=E,n.BitArray=k,n.BitMatrix=be,n.BitSource=Th,n.BrowserAztecCodeReader=wA,n.BrowserBarcodeReader=CA,n.BrowserCodeReader=Qe,n.BrowserDatamatrixCodeReader=NA,n.BrowserMultiFormatReader=PA,n.BrowserPDF417Reader=UA,n.BrowserQRCodeReader=FA,n.BrowserQRCodeSvgWriter=Nr,n.CharacterSetECI=U,n.ChecksumException=A,n.Code128Reader=he,n.Code39Reader=Bt,n.DataMatrixDecodedBitStreamParser=Ts,n.DataMatrixReader=Ns,n.DecodeHintType=D,n.DecoderResult=Bo,n.DefaultGridSampler=Rg,n.DetectorResult=Vc,n.EAN13Reader=Er,n.EncodeHintType=Ut,n.Exception=p,n.FormatException=L,n.GenericGF=ze,n.GenericGFPoly=En,n.GlobalHistogramBinarizer=ie,n.GridSampler=yh,n.GridSamplerInstance=Ss,n.HTMLCanvasElementLuminanceSource=$,n.HybridBinarizer=se,n.ITFReader=tt,n.IllegalArgumentException=w,n.IllegalStateException=_i,n.InvertedLuminanceSource=ae,n.LuminanceSource=W,n.MathUtils=Fe,n.MultiFormatOneDReader=da,n.MultiFormatReader=Yg,n.MultiFormatWriter=zA,n.NotFoundException=Z,n.OneDReader=Rt,n.PDF417DecodedBitStreamParser=K,n.PDF417DecoderErrorCorrection=Ug,n.PDF417Reader=Jt,n.PDF417ResultMetadata=Vg,n.PerspectiveTransform=gi,n.PlanarYUVLuminanceSource=Ri,n.QRCodeByteMatrix=Zc,n.QRCodeDataMask=ei,n.QRCodeDecodedBitStreamParser=yt,n.QRCodeDecoderErrorCorrectionLevel=at,n.QRCodeDecoderFormatInformation=ln,n.QRCodeEncoder=ct,n.QRCodeEncoderQRCode=Tr,n.QRCodeMaskUtil=At,n.QRCodeMatrixUtil=ve,n.QRCodeMode=we,n.QRCodeReader=_s,n.QRCodeVersion=ye,n.QRCodeWriter=fa,n.RGBLuminanceSource=Oh,n.RSS14Reader=Et,n.RSSExpandedReader=ne,n.ReaderException=Wc,n.ReedSolomonDecoder=Uo,n.ReedSolomonEncoder=Rh,n.ReedSolomonException=oa,n.Result=Te,n.ResultMetadataType=Ht,n.ResultPoint=pe,n.StringUtils=ee,n.UnsupportedOperationException=Y,n.VideoInputDevice=fe,n.WhiteRectangleDetector=Zi,n.WriterException=nt,n.ZXingArrays=N,n.ZXingCharset=qg,n.ZXingInteger=C,n.ZXingStandardCharsets=jh,n.ZXingStringBuilder=de,n.ZXingStringEncoding=J,n.ZXingSystem=I,n.createAbstractExpandedDecoder=Bg,Object.defineProperty(n,"__esModule",{value:!0})})})(u1,u1.exports);var ut=u1.exports;const pM=D1(ut),xM=QA({__proto__:null,default:pM},[ut]);var ay=function(){function e(t,n,i){if(this.formatMap=new Map([[ge.QR_CODE,ut.BarcodeFormat.QR_CODE],[ge.AZTEC,ut.BarcodeFormat.AZTEC],[ge.CODABAR,ut.BarcodeFormat.CODABAR],[ge.CODE_39,ut.BarcodeFormat.CODE_39],[ge.CODE_93,ut.BarcodeFormat.CODE_93],[ge.CODE_128,ut.BarcodeFormat.CODE_128],[ge.DATA_MATRIX,ut.BarcodeFormat.DATA_MATRIX],[ge.MAXICODE,ut.BarcodeFormat.MAXICODE],[ge.ITF,ut.BarcodeFormat.ITF],[ge.EAN_13,ut.BarcodeFormat.EAN_13],[ge.EAN_8,ut.BarcodeFormat.EAN_8],[ge.PDF_417,ut.BarcodeFormat.PDF_417],[ge.RSS_14,ut.BarcodeFormat.RSS_14],[ge.RSS_EXPANDED,ut.BarcodeFormat.RSS_EXPANDED],[ge.UPC_A,ut.BarcodeFormat.UPC_A],[ge.UPC_E,ut.BarcodeFormat.UPC_E],[ge.UPC_EAN_EXTENSION,ut.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!xM)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var r=this.createZXingFormats(t),a=new Map;a.set(ut.DecodeHintType.POSSIBLE_FORMATS,r),a.set(ut.DecodeHintType.TRY_HARDER,!1),this.hints=a}return e.prototype.decodeAsync=function(t){var n=this;return new Promise(function(i,r){try{i(n.decode(t))}catch(a){r(a)}})},e.prototype.decode=function(t){var n=new ut.MultiFormatReader(this.verbose,this.hints),i=new ut.HTMLCanvasElementLuminanceSource(t),r=new ut.BinaryBitmap(new ut.HybridBinarizer(i)),a=n.decode(r);return{text:a.text,format:kE.create(this.toHtml5QrcodeSupportedFormats(a.format)),debugData:this.createDebugData()}},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,r){t.set(n,i)}),t},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createZXingFormats=function(t){for(var n=[],i=0,r=t;i<r.length;i++){var a=r[i];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.logError("".concat(a," is not supported by")+"ZXingHtml5QrcodeShim")}return n},e.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},e}(),yM=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},bM=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},oy=function(){function e(t,n,i){if(this.formatMap=new Map([[ge.QR_CODE,"qr_code"],[ge.AZTEC,"aztec"],[ge.CODABAR,"codabar"],[ge.CODE_39,"code_39"],[ge.CODE_93,"code_93"],[ge.CODE_128,"code_128"],[ge.DATA_MATRIX,"data_matrix"],[ge.ITF,"itf"],[ge.EAN_13,"ean_13"],[ge.EAN_8,"ean_8"],[ge.PDF_417,"pdf417"],[ge.UPC_A,"upc_a"],[ge.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!e.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var r=this.createBarcodeDetectorFormats(t);if(this.detector=new BarcodeDetector(r),!this.detector)throw"BarcodeDetector detector not supported"}return e.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var t=new BarcodeDetector({formats:["qr_code"]});return typeof t<"u"},e.prototype.decodeAsync=function(t){return yM(this,void 0,void 0,function(){var n,i;return bM(this,function(r){switch(r.label){case 0:return[4,this.detector.detect(t)];case 1:if(n=r.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:kE.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},e.prototype.selectLargestBarcode=function(t){for(var n=null,i=0,r=0,a=t;r<a.length;r++){var c=a[r],h=c.boundingBox.width*c.boundingBox.height;h>i&&(i=h,n=c)}if(!n)throw"No largest barcode found";return n},e.prototype.createBarcodeDetectorFormats=function(t){for(var n=[],i=0,r=t;i<r.length;i++){var a=r[i];this.formatMap.has(a)?n.push(this.formatMap.get(a)):this.logger.warn("".concat(a," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},e.prototype.toHtml5QrcodeSupportedFormats=function(t){if(!this.reverseFormatMap.has(t))throw"reverseFormatMap doesn't have ".concat(t);return this.reverseFormatMap.get(t)},e.prototype.createReverseFormatMap=function(){var t=new Map;return this.formatMap.forEach(function(n,i,r){t.set(n,i)}),t},e.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},e}(),ly=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},cy=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},wM=function(){function e(t,n,i,r){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&oy.isSupported()?(this.primaryDecoder=new oy(t,i,r),this.secondaryDecoder=new ay(t,i,r)):this.primaryDecoder=new ay(t,i,r)}return e.prototype.decodeAsync=function(t){return ly(this,void 0,void 0,function(){var n;return cy(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(t)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},e.prototype.decodeRobustlyAsync=function(t){return ly(this,void 0,void 0,function(){var n,i;return cy(this,function(r){switch(r.label){case 0:n=performance.now(),r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(t)];case 2:return[2,r.sent()];case 3:if(i=r.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(t)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},e.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},e.prototype.possiblyLogPerformance=function(t){if(this.verbose){var n=performance.now()-t;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},e.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var t=0,n=0,i=this.executionResults;n<i.length;n++){var r=i[n];t+=r}var a=t/this.executionResults.length;console.log("".concat(a," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},e}(),Zm=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Nd=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},_d=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},UE=function(){function e(t,n){this.name=t,this.track=n}return e.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},e.prototype.apply=function(t){var n={};n[this.name]=t;var i={advanced:[n]};return this.track.applyConstraints(i)},e.prototype.value=function(){var t=this.track.getSettings();if(this.name in t){var n=t[this.name];return n}return null},e}(),vM=function(e){Zm(t,e);function t(n,i){return e.call(this,n,i)||this}return t.prototype.min=function(){return this.getCapabilities().min},t.prototype.max=function(){return this.getCapabilities().max},t.prototype.step=function(){return this.getCapabilities().step},t.prototype.apply=function(n){var i={};i[this.name]=n;var r={advanced:[i]};return this.track.applyConstraints(r)},t.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},t.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},t}(UE),EM=function(e){Zm(t,e);function t(n){return e.call(this,"zoom",n)||this}return t}(vM),AM=function(e){Zm(t,e);function t(n){return e.call(this,"torch",n)||this}return t}(UE),SM=function(){function e(t){this.track=t}return e.prototype.zoomFeature=function(){return new EM(this.track)},e.prototype.torchFeature=function(){return new AM(this.track)},e}(),CM=function(){function e(t,n,i){this.isClosed=!1,this.parentElement=t,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),t.append(this.surface)}return e.prototype.createVideoElement=function(t){var n=document.createElement("video");return n.style.width="".concat(t,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},e.prototype.setupSurface=function(){var t=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=t.surface.clientWidth,r=t.surface.clientHeight;t.callbacks.onRenderSurfaceReady(i,r),t.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},e.create=function(t,n,i,r){return Nd(this,void 0,void 0,function(){var a,c;return _d(this,function(h){switch(h.label){case 0:return a=new e(t,n,r),i.aspectRatio?(c={aspectRatio:i.aspectRatio},[4,a.getFirstTrackOrFail().applyConstraints(c)]):[3,2];case 1:h.sent(),h.label=2;case 2:return a.setupSurface(),[2,a]}})})},e.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},e.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},e.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},e.prototype.resume=function(t){this.failIfClosed();var n=this,i=function(){setTimeout(t,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},e.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},e.prototype.getSurface=function(){return this.failIfClosed(),this.surface},e.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},e.prototype.applyVideoConstraints=function(t){return Nd(this,void 0,void 0,function(){return _d(this,function(n){if("aspectRatio"in t)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(t)]})})},e.prototype.close=function(){if(this.isClosed)return Promise.resolve();var t=this;return new Promise(function(n,i){var r=t.mediaStream.getVideoTracks(),a=r.length,c=0;t.mediaStream.getVideoTracks().forEach(function(h){t.mediaStream.removeTrack(h),h.stop(),++c,c>=a&&(t.isClosed=!0,t.parentElement.removeChild(t.surface),n())})})},e.prototype.getCapabilities=function(){return new SM(this.getFirstTrackOrFail())},e}(),TM=function(){function e(t){this.mediaStream=t}return e.prototype.render=function(t,n,i){return Nd(this,void 0,void 0,function(){return _d(this,function(r){return[2,CM.create(t,this.mediaStream,n,i)]})})},e.create=function(t){return Nd(this,void 0,void 0,function(){var n,i;return _d(this,function(r){switch(r.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:t},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=r.sent(),[2,new e(i)]}})})},e}(),uy=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},dy=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},NM=function(){function e(){}return e.failIfNotSupported=function(){return uy(this,void 0,void 0,function(){return dy(this,function(t){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new e]})})},e.prototype.create=function(t){return uy(this,void 0,void 0,function(){return dy(this,function(n){return[2,TM.create(t)]})})},e}(),_M=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},MM=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},IM=function(){function e(){}return e.retrieve=function(){if(navigator.mediaDevices)return e.getCamerasFromMediaDevices();var t=MediaStreamTrack;return MediaStreamTrack&&t.getSources?e.getCamerasFromMediaStreamTrack():e.rejectWithError()},e.rejectWithError=function(){var t=Ha.unableToQuerySupportedDevices();return e.isHttpsOrLocalhost()||(t=Ha.insecureContextCameraQueryError()),Promise.reject(t)},e.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var t=location.host.split(":")[0];return t==="127.0.0.1"||t==="localhost"},e.getCamerasFromMediaDevices=function(){return _M(this,void 0,void 0,function(){var t,n,i,r,a,c,h;return MM(this,function(g){switch(g.label){case 0:return t=function(p){for(var y=p.getVideoTracks(),w=0,E=y;w<E.length;w++){var A=E[w];A.enabled=!1,A.stop(),p.removeTrack(A)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=g.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=g.sent(),r=[],a=0,c=i;a<c.length;a++)h=c[a],h.kind==="videoinput"&&r.push({id:h.deviceId,label:h.label});return t(n),[2,r]}})})},e.getCamerasFromMediaStreamTrack=function(){return new Promise(function(t,n){var i=function(a){for(var c=[],h=0,g=a;h<g.length;h++){var p=g[h];p.kind==="video"&&c.push({id:p.id,label:p.label})}t(c)},r=MediaStreamTrack;r.getSources(i)})},e}(),St;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.NOT_STARTED=1]="NOT_STARTED",e[e.SCANNING=2]="SCANNING",e[e.PAUSED=3]="PAUSED"})(St||(St={}));var DM=function(){function e(){this.state=St.NOT_STARTED,this.onGoingTransactionNewState=St.UNKNOWN}return e.prototype.directTransition=function(t){this.failIfTransitionOngoing(),this.validateTransition(t),this.state=t},e.prototype.startTransition=function(t){return this.failIfTransitionOngoing(),this.validateTransition(t),this.onGoingTransactionNewState=t,this},e.prototype.execute=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var t=this.onGoingTransactionNewState;this.onGoingTransactionNewState=St.UNKNOWN,this.directTransition(t)},e.prototype.cancel=function(){if(this.onGoingTransactionNewState===St.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=St.UNKNOWN},e.prototype.getState=function(){return this.state},e.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==St.UNKNOWN)throw"Cannot transition to a new state, already under transition"},e.prototype.validateTransition=function(t){switch(this.state){case St.UNKNOWN:throw"Transition from unknown is not allowed";case St.NOT_STARTED:this.failIfNewStateIs(t,[St.PAUSED]);break;case St.SCANNING:break;case St.PAUSED:break}},e.prototype.failIfNewStateIs=function(t,n){for(var i=0,r=n;i<r.length;i++){var a=r[i];if(t===a)throw"Cannot transition from ".concat(this.state," to ").concat(t)}},e}(),RM=function(){function e(t){this.stateManager=t}return e.prototype.startTransition=function(t){return this.stateManager.startTransition(t)},e.prototype.directTransition=function(t){this.stateManager.directTransition(t)},e.prototype.getState=function(){return this.stateManager.getState()},e.prototype.canScanFile=function(){return this.stateManager.getState()===St.NOT_STARTED},e.prototype.isScanning=function(){return this.stateManager.getState()!==St.NOT_STARTED},e.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===St.SCANNING},e.prototype.isPaused=function(){return this.stateManager.getState()===St.PAUSED},e}(),OM=function(){function e(){}return e.create=function(){return new RM(new DM)},e}(),jM=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(i[a]=r[a])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function i(){this.constructor=t}t.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Fn=function(e){jM(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.DEFAULT_WIDTH=300,t.DEFAULT_WIDTH_OFFSET=2,t.FILE_SCAN_MIN_HEIGHT=300,t.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,t.MIN_QR_BOX_SIZE=50,t.SHADED_LEFT=1,t.SHADED_RIGHT=2,t.SHADED_TOP=3,t.SHADED_BOTTOM=4,t.SHADED_REGION_ELEMENT_ID="qr-shaded-region",t.VERBOSE=!1,t.BORDER_SHADER_DEFAULT_COLOR="#ffffff",t.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",t}(Ei),kM=function(){function e(t,n){this.logger=n,this.fps=Fn.SCAN_DEFAULT_FPS,t?(t.fps&&(this.fps=t.fps),this.disableFlip=t.disableFlip===!0,this.qrbox=t.qrbox,this.aspectRatio=t.aspectRatio,this.videoConstraints=t.videoConstraints):this.disableFlip=Fn.DEFAULT_DISABLE_FLIP}return e.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?PE.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},e.prototype.isShadedBoxEnabled=function(){return!Li(this.qrbox)},e.create=function(t,n){return new e(t,n)},e}(),hy=function(){function e(t,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.elementId=t,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new BE(this.verbose),this.qrcode=new wM(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=OM.create()}return e.prototype.start=function(t,n,i,r){var a=this;if(!t)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var c;r?c=r:c=this.verbose?this.logger.log:function(){};var h=kM.create(n,this.logger);this.clearElement();var g=!1;h.videoConstraints&&(h.isMediaStreamConstraintsValid()?g=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var p=g,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Fn.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var w=this,E=this.stateManagerProxy.startTransition(St.SCANNING);return new Promise(function(A,O){var I=p?h.videoConstraints:w.createVideoConstraints(t);if(!I){E.cancel(),O("videoConstraints should be defined");return}var B={};(!p||h.aspectRatio)&&(B.aspectRatio=h.aspectRatio);var T={onRenderSurfaceReady:function(N,C){w.setupUi(N,C,h),w.isScanning=!0,w.foreverScan(h,i,c)}};NM.failIfNotSupported().then(function(N){N.create(I).then(function(C){return C.render(a.element,B,T).then(function(k){w.renderedCamera=k,E.execute(),A(null)}).catch(function(k){E.cancel(),O(k)})}).catch(function(C){E.cancel(),O(Ha.errorGettingUserMedia(C))})}).catch(function(N){E.cancel(),O(Ha.cameraStreamingNotSupported())})})},e.prototype.pause=function(t){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(St.PAUSED),this.showPausedState(),(Li(t)||t!==!0)&&(t=!1),t&&this.renderedCamera&&this.renderedCamera.pause()},e.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var t=this,n=function(){t.stateManagerProxy.directTransition(St.SCANNING),t.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},e.prototype.getState=function(){return this.stateManagerProxy.getState()},e.prototype.stop=function(){var t=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(St.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(t.element){var a=document.getElementById(Fn.SHADED_REGION_ELEMENT_ID);a&&t.element.removeChild(a)}},r=this;return this.renderedCamera.close().then(function(){return r.renderedCamera=null,r.element&&(r.element.removeChild(r.canvasElement),r.canvasElement=null),i(),r.qrRegion&&(r.qrRegion=null),r.context&&(r.context=null),n.execute(),r.hidePausedState(),r.isScanning=!1,Promise.resolve()})},e.prototype.scanFile=function(t,n){return this.scanFileV2(t,n).then(function(i){return i.decodedText})},e.prototype.scanFileV2=function(t,n){var i=this;if(!t||!(t instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(Li(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(r,a){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(t);var c=new Image;c.onload=function(){var h=c.width,g=c.height,p=document.getElementById(i.elementId),y=p.clientWidth?p.clientWidth:Fn.DEFAULT_WIDTH,w=Math.max(p.clientHeight?p.clientHeight:g,Fn.FILE_SCAN_MIN_HEIGHT),E=i.computeCanvasDrawConfig(h,g,y,w);if(n){var A=i.createCanvasElement(y,w,"qr-canvas-visible");A.style.display="inline-block",p.appendChild(A);var O=A.getContext("2d");if(!O)throw"Unable to get 2d context from canvas";O.canvas.width=y,O.canvas.height=w,O.drawImage(c,0,0,h,g,E.x,E.y,E.width,E.height)}var I=Fn.FILE_SCAN_HIDDEN_CANVAS_PADDING,B=Math.max(c.width,E.width),T=Math.max(c.height,E.height),N=B+2*I,C=T+2*I,k=i.createCanvasElement(N,C);p.appendChild(k);var z=k.getContext("2d");if(!z)throw"Unable to get 2d context from canvas";z.canvas.width=N,z.canvas.height=C,z.drawImage(c,0,0,h,g,I,I,B,T);try{i.qrcode.decodeRobustlyAsync(k).then(function(D){r(sy.createFromQrcodeResult(D))}).catch(a)}catch(D){a("QR code parse error, error = ".concat(D))}},c.onerror=a,c.onabort=a,c.onstalled=a,c.onsuspend=a,c.src=URL.createObjectURL(t)})},e.prototype.clear=function(){this.clearElement()},e.getCameras=function(){return IM.retrieve()},e.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},e.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},e.prototype.applyVideoConstraints=function(t){if(t){if(!PE.isMediaStreamConstraintsValid(t,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(t)},e.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},e.prototype.getSupportedFormats=function(t){var n=[ge.QR_CODE,ge.AZTEC,ge.CODABAR,ge.CODE_39,ge.CODE_93,ge.CODE_128,ge.DATA_MATRIX,ge.MAXICODE,ge.ITF,ge.EAN_13,ge.EAN_8,ge.PDF_417,ge.RSS_14,ge.RSS_EXPANDED,ge.UPC_A,ge.UPC_E,ge.UPC_EAN_EXTENSION];if(!t||typeof t=="boolean"||!t.formatsToSupport)return n;if(!Array.isArray(t.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(t.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],r=0,a=t.formatsToSupport;r<a.length;r++){var c=a[r];mM(c)?i.push(c):this.logger.warn("Invalid format: ".concat(c," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},e.prototype.getUseBarCodeDetectorIfSupported=function(t){if(Li(t))return!0;if(!Li(t.useBarCodeDetectorIfSupported))return t.useBarCodeDetectorIfSupported!==!1;if(Li(t.experimentalFeatures))return!0;var n=t.experimentalFeatures;return Li(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},e.prototype.validateQrboxSize=function(t,n,i){var r=this,a=i.qrbox;this.validateQrboxConfig(a);var c=this.toQrdimensions(t,n,a),h=function(p){if(p<Fn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Fn.MIN_QR_BOX_SIZE,"px.")},g=function(p){return p>t&&(r.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),p=t),p};h(c.width),h(c.height),c.width=g(c.width)},e.prototype.validateQrboxConfig=function(t){if(typeof t!="number"&&typeof t!="function"&&(t.width===void 0||t.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},e.prototype.toQrdimensions=function(t,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(t,n)}catch(r){throw new Error("qrbox config was passed as a function but it failed with unknown error"+r)}return i},e.prototype.setupUi=function(t,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(t,n,i);var r=Li(i.qrbox)?{width:t,height:n}:i.qrbox;this.validateQrboxConfig(r);var a=this.toQrdimensions(t,n,r);a.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var c=i.isShadedBoxEnabled()&&a.height<=n,h={x:0,y:0,width:t,height:n},g=c?this.getShadedRegionBounds(t,n,a):h,p=this.createCanvasElement(g.width,g.height),y={willReadFrequently:!0},w=p.getContext("2d",y);w.canvas.width=g.width,w.canvas.height=g.height,this.element.append(p),c&&this.possiblyInsertShadingElement(this.element,t,n,a),this.createScannerPausedUiElement(this.element),this.qrRegion=g,this.context=w,this.canvasElement=p},e.prototype.createScannerPausedUiElement=function(t){var n=document.createElement("div");n.innerText=Ha.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",t.appendChild(n),this.scannerPausedUiElement=n},e.prototype.scanContext=function(t,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(r){return t(r.text,sy.createFromQrcodeResult(r)),i.possiblyUpdateShaders(!0),!0}).catch(function(r){i.possiblyUpdateShaders(!1);var a=Ha.codeParseError(r);return n(a,LE.createFrom(a)),!1})},e.prototype.foreverScan=function(t,n,i){var r=this;if(this.shouldScan&&this.renderedCamera){var a=this.renderedCamera.getSurface(),c=a.videoWidth/a.clientWidth,h=a.videoHeight/a.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var g=this.qrRegion.width*c,p=this.qrRegion.height*h,y=this.qrRegion.x*c,w=this.qrRegion.y*h;this.context.drawImage(a,y,w,g,p,0,0,this.qrRegion.width,this.qrRegion.height);var E=function(){r.foreverScanTimeout=setTimeout(function(){r.foreverScan(t,n,i)},r.getTimeoutFps(t.fps))};this.scanContext(n,i).then(function(A){!A&&t.disableFlip!==!0?(r.context.translate(r.context.canvas.width,0),r.context.scale(-1,1),r.scanContext(n,i).finally(function(){E()})):E()}).catch(function(A){r.logger.logError("Error happend while scanning context",A),E()})}},e.prototype.createVideoConstraints=function(t){if(typeof t=="string")return{deviceId:{exact:t}};if(typeof t=="object"){var n="facingMode",i="deviceId",r={user:!0,environment:!0},a="exact",c=function(O){if(O in r)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(O,"'")},h=Object.keys(t);if(h.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(h.length," keys");var g=Object.keys(t)[0];if(g!==n&&g!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(g===n){var p=t.facingMode;if(typeof p=="string"){if(c(p))return{facingMode:p}}else if(typeof p=="object")if(a in p){if(c(p["".concat(a)]))return{facingMode:{exact:p["".concat(a)]}}}else throw"'facingMode' should be string or object with"+" ".concat(a," as key.");else{var y=typeof p;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var w=t.deviceId;if(typeof w=="string")return{deviceId:w};if(typeof w=="object"){if(a in w)return{deviceId:{exact:w["".concat(a)]}};throw"'deviceId' should be string or object with"+" ".concat(a," as key.")}else{var E=typeof w;throw"Invalid type of 'deviceId' = ".concat(E)}}}var A=typeof t;throw"Invalid type of 'cameraIdOrConfig' = ".concat(A)},e.prototype.computeCanvasDrawConfig=function(t,n,i,r){if(t<=i&&n<=r){var a=(i-t)/2,c=(r-n)/2;return{x:a,y:c,width:t,height:n}}else{var h=t,g=n;return t>i&&(n=i/t*n,t=i),n>r&&(t=r/n*t,n=r),this.logger.log("Image downsampled from "+"".concat(h,"X").concat(g)+" to ".concat(t,"X").concat(n,".")),this.computeCanvasDrawConfig(t,n,i,r)}},e.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var t=document.getElementById(this.elementId);t&&(t.innerHTML="")},e.prototype.possiblyUpdateShaders=function(t){this.qrMatch!==t&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=t?Fn.BORDER_SHADER_MATCH_COLOR:Fn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=t)},e.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},e.prototype.createCanvasElement=function(t,n,i){var r=t,a=n,c=document.createElement("canvas");return c.style.width="".concat(r,"px"),c.style.height="".concat(a,"px"),c.style.display="none",c.id=Li(i)?"qr-canvas":i,c},e.prototype.getShadedRegionBounds=function(t,n,i){if(i.width>t||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(t-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},e.prototype.possiblyInsertShadingElement=function(t,n,i,r){if(!(n-r.width<1||i-r.height<1)){var a=document.createElement("div");a.style.position="absolute";var c=(n-r.width)/2,h=(i-r.height)/2;if(a.style.borderLeft="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderRight="".concat(c,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderTop="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),a.style.borderBottom="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),a.style.boxSizing="border-box",a.style.top="0px",a.style.bottom="0px",a.style.left="0px",a.style.right="0px",a.id="".concat(Fn.SHADED_REGION_ELEMENT_ID),n-r.width<11||i-r.height<11)this.hasBorderShaders=!1;else{var g=5,p=40;this.insertShaderBorders(a,p,g,-g,null,0,!0),this.insertShaderBorders(a,p,g,-g,null,0,!1),this.insertShaderBorders(a,p,g,null,-g,0,!0),this.insertShaderBorders(a,p,g,null,-g,0,!1),this.insertShaderBorders(a,g,p+g,-g,null,-g,!0),this.insertShaderBorders(a,g,p+g,null,-g,-g,!0),this.insertShaderBorders(a,g,p+g,-g,null,-g,!1),this.insertShaderBorders(a,g,p+g,null,-g,-g,!1),this.hasBorderShaders=!0}t.append(a)}},e.prototype.insertShaderBorders=function(t,n,i,r,a,c,h){var g=document.createElement("div");g.style.position="absolute",g.style.backgroundColor=Fn.BORDER_SHADER_DEFAULT_COLOR,g.style.width="".concat(n,"px"),g.style.height="".concat(i,"px"),r!==null&&(g.style.top="".concat(r,"px")),a!==null&&(g.style.bottom="".concat(a,"px")),h?g.style.left="".concat(c,"px"):g.style.right="".concat(c,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(g),t.appendChild(g)},e.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},e.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},e.prototype.getTimeoutFps=function(t){return 1e3/t},e}(),Km="data:image/svg+xml;base64,",LM=Km+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",BM=Km+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",fy=Km+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",PM="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",my=function(){function e(){}return e.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},e}(),UM=function(){function e(){this.data=my.createDefault();var t=localStorage.getItem(e.LOCAL_STORAGE_KEY);t?this.data=JSON.parse(t):this.reset()}return e.prototype.hasCameraPermissions=function(){return this.data.hasPermission},e.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},e.prototype.setHasPermission=function(t){this.data.hasPermission=t,this.flush()},e.prototype.setLastUsedCameraId=function(t){this.data.lastUsedCameraId=t,this.flush()},e.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},e.prototype.reset=function(){this.data=my.createDefault(),this.flush()},e.prototype.flush=function(){localStorage.setItem(e.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},e.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",e}(),FM=function(){function e(){this.infoDiv=document.createElement("div")}return e.prototype.renderInto=function(t){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=ry.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),r=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(r);var a=document.createElement("a");a.innerText=ry.reportIssues(),a.href="https://github.com/mebjas/html5-qrcode/issues",a.target="new",a.style.color="white",this.infoDiv.appendChild(a),t.appendChild(this.infoDiv)},e.prototype.show=function(){this.infoDiv.style.display="block"},e.prototype.hide=function(){this.infoDiv.style.display="none"},e}(),VM=function(){function e(t,n){this.isShowingInfoIcon=!0,this.onTapIn=t,this.onTapOut=n,this.infoIcon=document.createElement("img")}return e.prototype.renderInto=function(t){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=fy,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},t.appendChild(this.infoIcon)},e.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},e.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},e.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=PM,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=fy,this.infoIcon.style.opacity="0.6")},e}(),zM=function(){function e(){var t=this;this.infoDiv=new FM,this.infoIcon=new VM(function(){t.infoDiv.show()},function(){t.infoDiv.hide()})}return e.prototype.renderInto=function(t){this.infoDiv.renderInto(t),this.infoIcon.renderInto(t)},e}(),HM=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},GM=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},gy=function(){function e(){}return e.hasPermissions=function(){return HM(this,void 0,void 0,function(){var t,n,i,r;return GM(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(t=a.sent(),n=0,i=t;n<i.length;n++)if(r=i[n],r.kind==="videoinput"&&r.label)return[2,!0];return[2,!1]}})})},e}(),js=function(){function e(t){this.supportedScanTypes=this.validateAndReturnScanTypes(t)}return e.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},e.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},e.prototype.isCameraScanRequired=function(){for(var t=0,n=this.supportedScanTypes;t<n.length;t++){var i=n[t];if(e.isCameraScanType(i))return!0}return!1},e.isCameraScanType=function(t){return t===fr.SCAN_TYPE_CAMERA},e.isFileScanType=function(t){return t===fr.SCAN_TYPE_FILE},e.prototype.validateAndReturnScanTypes=function(t){if(!t||t.length===0)return Ei.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Ei.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(t.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,r=t;i<r.length;i++){var a=r[i];if(!Ei.DEFAULT_SUPPORTED_SCAN_TYPE.includes(a))throw"Unsupported scan type ".concat(a)}return t},e}(),qn=function(){function e(){}return e.ALL_ELEMENT_CLASS="html5-qrcode-element",e.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",e.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",e.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",e.TORCH_BUTTON_ID="html5-qrcode-button-torch",e.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",e.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",e.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",e.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",e.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",e.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",e}(),ls=function(){function e(){}return e.createElement=function(t,n){var i=document.createElement(t);return i.id=n,i.classList.add(qn.ALL_ELEMENT_CLASS),t==="button"&&i.setAttribute("type","button"),i},e}(),FE=function(e,t,n,i){function r(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function h(y){try{p(i.next(y))}catch(w){c(w)}}function g(y){try{p(i.throw(y))}catch(w){c(w)}}function p(y){y.done?a(y.value):r(y.value).then(h,g)}p((i=i.apply(e,t||[])).next())})},VE=function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},i,r,a,c;return c={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function h(p){return function(y){return g([p,y])}}function g(p){if(i)throw new TypeError("Generator is already executing.");for(;c&&(c=0,p[0]&&(n=0)),n;)try{if(i=1,r&&(a=p[0]&2?r.return:p[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,p[1])).done)return a;switch(r=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,r=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=t.call(e,n)}catch(y){p=[6,y],r=0}finally{i=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}},py=function(){function e(t,n,i){this.isTorchOn=!1,this.torchCapability=t,this.buttonController=n,this.onTorchActionFailureCallback=i}return e.prototype.isTorchEnabled=function(){return this.isTorchOn},e.prototype.flipState=function(){return FE(this,void 0,void 0,function(){var t,n;return VE(this,function(i){switch(i.label){case 0:this.buttonController.disable(),t=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(t)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),t),[3,4];case 3:return n=i.sent(),this.propagateFailure(t,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},e.prototype.updateUiBasedOnLatestSettings=function(t,n){t===n?(this.buttonController.setText(n?Ze.torchOffButton():Ze.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},e.prototype.propagateFailure=function(t,n){var i=t?Ze.torchOnFailedMessage():Ze.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},e.prototype.reset=function(){this.isTorchOn=!1},e}(),YM=function(){function e(t,n){this.onTorchActionFailureCallback=n,this.torchButton=ls.createElement("button",qn.TORCH_BUTTON_ID),this.torchController=new py(t,this,n)}return e.prototype.render=function(t,n){var i=this;this.torchButton.innerText=Ze.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var r=this;this.torchButton.addEventListener("click",function(a){return FE(i,void 0,void 0,function(){return VE(this,function(c){switch(c.label){case 0:return[4,r.torchController.flipState()];case 1:return c.sent(),r.torchController.isTorchEnabled()?(r.torchButton.classList.remove(qn.TORCH_BUTTON_CLASS_TORCH_OFF),r.torchButton.classList.add(qn.TORCH_BUTTON_CLASS_TORCH_ON)):(r.torchButton.classList.remove(qn.TORCH_BUTTON_CLASS_TORCH_ON),r.torchButton.classList.add(qn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),t.appendChild(this.torchButton)},e.prototype.updateTorchCapability=function(t){this.torchController=new py(t,this,this.onTorchActionFailureCallback)},e.prototype.getTorchButton=function(){return this.torchButton},e.prototype.hide=function(){this.torchButton.style.display="none"},e.prototype.show=function(){this.torchButton.style.display="inline-block"},e.prototype.disable=function(){this.torchButton.disabled=!0},e.prototype.enable=function(){this.torchButton.disabled=!1},e.prototype.setText=function(t){this.torchButton.innerText=t},e.prototype.reset=function(){this.torchButton.innerText=Ze.torchOnButton(),this.torchController.reset()},e.create=function(t,n,i,r){var a=new e(n,r);return a.render(t,i),a},e}(),qM=function(){function e(t,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",t.appendChild(this.fileBasedScanRegion);var r=document.createElement("label");r.setAttribute("for",this.getFileScanInputId()),r.style.display="inline-block",this.fileBasedScanRegion.appendChild(r),this.fileSelectionButton=ls.createElement("button",qn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(h){r.click()}),r.append(this.fileSelectionButton),this.fileScanInput=ls.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",r.appendChild(this.fileScanInput);var a=this;this.fileScanInput.addEventListener("change",function(h){if(!(h==null||h.target==null)){var g=h.target;if(!(g.files&&g.files.length===0)){var p=g.files,y=p[0],w=y.name;a.setImageNameToButton(w),i(y)}}});var c=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(c),this.fileBasedScanRegion.addEventListener("dragenter",function(h){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(h){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(h){a.fileBasedScanRegion.style.border=a.fileBasedScanRegionActiveBorder(),h.stopPropagation(),h.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(h){h.stopPropagation(),h.preventDefault(),a.fileBasedScanRegion.style.border=a.fileBasedScanRegionDefaultBorder();var g=h.dataTransfer;if(g){var p=g.files;if(!p||p.length===0)return;for(var y=!1,w=0;w<p.length;++w){var E=p.item(w);if(E){var A=/image.*/;if(E.type.match(A)){y=!0;var O=E.name;a.setImageNameToButton(O),i(E),c.innerText=Ze.dragAndDropMessage();break}}}y||(c.innerText=Ze.dragAndDropMessageOnlyImages())}})}return e.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},e.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},e.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},e.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},e.prototype.createFileBasedScanRegion=function(){var t=document.createElement("div");return t.style.textAlign="center",t.style.margin="auto",t.style.width="80%",t.style.maxWidth="600px",t.style.border=this.fileBasedScanRegionDefaultBorder(),t.style.padding="10px",t.style.marginBottom="10px",t},e.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},e.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},e.prototype.createDragAndDropMessage=function(){var t=document.createElement("div");return t.innerText=Ze.dragAndDropMessage(),t.style.fontWeight="400",t},e.prototype.setImageNameToButton=function(t){var n=20;if(t.length>n){var i=t.substring(0,8),r=t.length,a=t.substring(r-8,r);t="".concat(i,"....").concat(a)}var c=Ze.fileSelectionChooseAnother()+" - "+t;this.fileSelectionButton.innerText=c},e.prototype.setInitialValueToButton=function(){var t=Ze.fileSelectionChooseImage()+" - "+Ze.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=t},e.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},e.create=function(t,n,i){var r=new e(t,n,i);return r},e}(),XM=function(){function e(t){this.selectElement=ls.createElement("select",qn.CAMERA_SELECTION_SELECT_ID),this.cameras=t,this.options=[]}return e.prototype.render=function(t){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var r=Ze.selectCamera();n.innerText="".concat(r," (").concat(this.cameras.length,")  ")}for(var a=1,c=0,h=this.cameras;c<h.length;c++){var g=h[c],p=g.id,y=g.label==null?p:g.label;(!y||y==="")&&(y=[Ze.anonymousCameraPrefix(),a++].join(" "));var w=document.createElement("option");w.value=p,w.innerText=y,this.options.push(w),this.selectElement.appendChild(w)}n.appendChild(this.selectElement),t.appendChild(n)},e.prototype.disable=function(){this.selectElement.disabled=!0},e.prototype.isDisabled=function(){return this.selectElement.disabled===!0},e.prototype.enable=function(){this.selectElement.disabled=!1},e.prototype.getValue=function(){return this.selectElement.value},e.prototype.hasValue=function(t){for(var n=0,i=this.options;n<i.length;n++){var r=i[n];if(r.value===t)return!0}return!1},e.prototype.setValue=function(t){if(!this.hasValue(t))throw new Error("".concat(t," is not present in the camera list."));this.selectElement.value=t},e.prototype.hasSingleItem=function(){return this.cameras.length===1},e.prototype.numCameras=function(){return this.cameras.length},e.create=function(t,n){var i=new e(n);return i.render(t),i},e}(),WM=function(){function e(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=ls.createElement("input",qn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return e.prototype.render=function(t,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",t.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=Ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var r=this;this.rangeInput.addEventListener("input",function(){return r.onValueChange()}),this.rangeInput.addEventListener("change",function(){return r.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},e.prototype.onValueChange=function(){var t=Ze.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(t),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},e.prototype.setValues=function(t,n,i,r){this.rangeInput.min=t.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=r.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},e.prototype.show=function(){this.zoomElementContainer.style.display="block"},e.prototype.hide=function(){this.zoomElementContainer.style.display="none"},e.prototype.setOnCameraZoomValueChangeCallback=function(t){this.onChangeCallback=t},e.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},e.create=function(t,n){var i=new e;return i.render(t,n),i},e}(),Vn;(function(e){e[e.STATUS_DEFAULT=0]="STATUS_DEFAULT",e[e.STATUS_SUCCESS=1]="STATUS_SUCCESS",e[e.STATUS_WARNING=2]="STATUS_WARNING",e[e.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Vn||(Vn={}));function ZM(e){return{fps:e.fps,qrbox:e.qrbox,aspectRatio:e.aspectRatio,disableFlip:e.disableFlip,videoConstraints:e.videoConstraints}}function KM(e,t){return{formatsToSupport:e.formatsToSupport,useBarCodeDetectorIfSupported:e.useBarCodeDetectorIfSupported,experimentalFeatures:e.experimentalFeatures,verbose:t}}var QM=function(){function e(t,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=t,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(t))throw"HTML Element with id=".concat(t," not found");this.scanTypeSelector=new js(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new BE(this.verbose),this.persistedDataManager=new UM,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return e.prototype.render=function(t,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(a,c){if(t)t(a,c);else{if(i.lastMatchFound===a)return;i.lastMatchFound=a,i.setHeaderMessage(Ze.lastMatch(a),Vn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(a,c){n&&n(a,c)};var r=document.getElementById(this.elementId);if(!r)throw"HTML Element with id=".concat(this.elementId," not found");r.innerHTML="",this.createBasicLayout(r),this.html5Qrcode=new hy(this.getScanRegionId(),KM(this.config,this.verbose))},e.prototype.pause=function(t){(Li(t)||t!==!0)&&(t=!1),this.getHtml5QrcodeOrFail().pause(t)},e.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},e.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},e.prototype.clear=function(){var t=this,n=function(){var i=document.getElementById(t.elementId);i&&(i.innerHTML="",t.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,r){if(!t.html5Qrcode){i();return}t.html5Qrcode.isScanning?t.html5Qrcode.stop().then(function(a){if(!t.html5Qrcode){i();return}t.html5Qrcode.clear(),n(),i()}).catch(function(a){t.verbose&&t.logger.logError("Unable to stop qrcode scanner",a),r(a)}):(t.html5Qrcode.clear(),n(),i())}):Promise.resolve()},e.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},e.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},e.prototype.applyVideoConstraints=function(t){return this.getHtml5QrcodeOrFail().applyVideoConstraints(t)},e.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},e.prototype.createConfig=function(t){return t?(t.fps||(t.fps=Ei.SCAN_DEFAULT_FPS),t.rememberLastUsedCamera!==!Ei.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(t.rememberLastUsedCamera=Ei.DEFAULT_REMEMBER_LAST_CAMERA_USED),t.supportedScanTypes||(t.supportedScanTypes=Ei.DEFAULT_SUPPORTED_SCAN_TYPE),t):{fps:Ei.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Ei.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Ei.DEFAULT_SUPPORTED_SCAN_TYPE}},e.prototype.createBasicLayout=function(t){t.style.position="relative",t.style.padding="0px",t.style.border="1px solid silver",this.createHeader(t);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",t.appendChild(n),js.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var r=document.createElement("div"),a=this.getDashboardId();r.id=a,r.style.width="100%",t.appendChild(r),this.setupInitialDashboard(r)},e.prototype.resetBasicLayout=function(t){t.style.border="none"},e.prototype.setupInitialDashboard=function(t){this.createSection(t),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},e.prototype.createHeader=function(t){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",t.appendChild(n);var i=new zM;i.renderInto(n);var r=document.createElement("div");r.id=this.getHeaderMessageContainerId(),r.style.display="none",r.style.textAlign="center",r.style.fontSize="14px",r.style.padding="2px 10px",r.style.margin="4px",r.style.borderTop="1px solid #f6f6f6",n.appendChild(r)},e.prototype.createSection=function(t){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",t.appendChild(n)},e.prototype.createCameraListUi=function(t,n,i){var r=this;r.showHideScanTypeSwapLink(!1),r.setHeaderMessage(Ze.cameraPermissionRequesting());var a=function(){i||r.createPermissionButton(t,n)};hy.getCameras().then(function(c){r.persistedDataManager.setHasPermission(!0),r.showHideScanTypeSwapLink(!0),r.resetHeaderMessage(),c&&c.length>0?(t.removeChild(n),r.renderCameraSelection(c)):(r.setHeaderMessage(Ze.noCameraFound(),Vn.STATUS_WARNING),a())}).catch(function(c){r.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:a(),r.setHeaderMessage(c,Vn.STATUS_WARNING),r.showHideScanTypeSwapLink(!0)})},e.prototype.createPermissionButton=function(t,n){var i=this,r=ls.createElement("button",this.getCameraPermissionButtonId());r.innerText=Ze.cameraPermissionTitle(),r.addEventListener("click",function(){r.disabled=!0,i.createCameraListUi(t,n,r)}),n.appendChild(r)},e.prototype.createPermissionsUi=function(t,n){var i=this;if(js.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){gy.hasPermissions().then(function(r){r?i.createCameraListUi(t,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n))}).catch(function(r){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(t,n)});return}this.createPermissionButton(t,n)},e.prototype.createSectionControlPanel=function(){var t=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");t.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=js.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var r=document.createElement("div");r.style.textAlign="center",i.appendChild(r),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,r),this.renderFileScanUi(n)},e.prototype.renderFileScanUi=function(t){var n=js.isFileScanType(this.currentScanType),i=this,r=function(a){if(!i.html5Qrcode)throw"html5Qrcode not defined";js.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(Ze.loadingImage()),i.html5Qrcode.scanFileV2(a,!0).then(function(c){i.resetHeaderMessage(),i.qrCodeSuccessCallback(c.decodedText,c)}).catch(function(c){i.setHeaderMessage(c,Vn.STATUS_WARNING),i.qrCodeErrorCallback(c,LE.createFrom(c))}))};this.fileSelectionUi=qM.create(t,n,r)},e.prototype.renderCameraSelection=function(t){var n=this,i=this,r=document.getElementById(this.getDashboardSectionCameraScanRegionId());r.style.textAlign="center";var a=WM.create(r,!1),c=function(I){var B=I.zoomFeature();if(B.isSupported()){a.setOnCameraZoomValueChangeCallback(function(N){B.apply(N)});var T=1;n.config.defaultZoomValueIfSupported&&(T=n.config.defaultZoomValueIfSupported),T=gM(T,B.min(),B.max()),a.setValues(B.min(),B.max(),T,B.step()),a.show()}},h=XM.create(r,t),g=document.createElement("span"),p=ls.createElement("button",qn.CAMERA_START_BUTTON_ID);p.innerText=Ze.scanButtonStartScanningText(),g.appendChild(p);var y=ls.createElement("button",qn.CAMERA_STOP_BUTTON_ID);y.innerText=Ze.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,g.appendChild(y);var w,E=function(I){if(!I.torchFeature().isSupported()){w&&w.hide();return}w?w.updateTorchCapability(I.torchFeature()):w=YM.create(g,I.torchFeature(),{display:"none",marginLeft:"5px"},function(B){i.setHeaderMessage(B,Vn.STATUS_WARNING)}),w.show()};r.appendChild(g);var A=function(I){I||(p.style.display="none"),p.innerText=Ze.scanButtonStartScanningText(),p.style.opacity="1",p.disabled=!1,I&&(p.style.display="inline-block")};if(p.addEventListener("click",function(I){p.innerText=Ze.scanButtonScanningStarting(),h.disable(),p.disabled=!0,p.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var B=h.getValue();i.persistedDataManager.setLastUsedCameraId(B),i.html5Qrcode.start(B,ZM(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(T){y.disabled=!1,y.style.display="inline-block",A(!1);var N=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&E(N),n.config.showZoomSliderIfSupported===!0&&c(N)}).catch(function(T){i.showHideScanTypeSwapLink(!0),h.enable(),A(!0),i.setHeaderMessage(T,Vn.STATUS_WARNING)})}),h.hasSingleItem()&&p.click(),y.addEventListener("click",function(I){if(!i.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,i.html5Qrcode.stop().then(function(B){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),h.enable(),p.disabled=!1,y.style.display="none",p.style.display="inline-block",w&&(w.reset(),w.hide()),a.removeOnCameraZoomValueChangeCallback(),a.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(B){y.disabled=!1,i.setHeaderMessage(B,Vn.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var O=i.persistedDataManager.getLastUsedCameraId();h.hasValue(O)?(h.setValue(O),p.click()):i.persistedDataManager.resetLastUsedCameraId()}},e.prototype.createSectionSwap=function(){var t=this,n=Ze.textIfCameraScanSelected(),i=Ze.textIfFileScanSelected(),r=document.getElementById(this.getDashboardSectionId()),a=document.createElement("div");a.style.textAlign="center";var c=ls.createElement("span",this.getDashboardSectionSwapLinkId());c.style.textDecoration="underline",c.style.cursor="pointer",c.innerText=js.isCameraScanType(this.currentScanType)?n:i,c.addEventListener("click",function(){if(!t.sectionSwapAllowed){t.verbose&&t.logger.logError("Section swap called when not allowed");return}t.resetHeaderMessage(),t.fileSelectionUi.resetValue(),t.sectionSwapAllowed=!1,js.isCameraScanType(t.currentScanType)?(t.clearScanRegion(),t.getCameraScanRegion().style.display="none",t.fileSelectionUi.show(),c.innerText=i,t.currentScanType=fr.SCAN_TYPE_FILE,t.insertFileScanImageToScanRegion()):(t.clearScanRegion(),t.getCameraScanRegion().style.display="block",t.fileSelectionUi.hide(),c.innerText=n,t.currentScanType=fr.SCAN_TYPE_CAMERA,t.insertCameraScanImageToScanRegion(),t.startCameraScanIfPermissionExistsOnSwap()),t.sectionSwapAllowed=!0}),a.appendChild(c),r.appendChild(a)},e.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var t=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){gy.hasPermissions().then(function(i){if(i){var r=document.getElementById(n.getCameraPermissionButtonId());if(!r)throw t.logger.logError("Permission button not found, fail;"),"Permission button not found";r.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},e.prototype.resetHeaderMessage=function(){var t=document.getElementById(this.getHeaderMessageContainerId());t.style.display="none"},e.prototype.setHeaderMessage=function(t,n){n||(n=Vn.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=t,i.style.display="block",n){case Vn.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Vn.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Vn.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},e.prototype.showHideScanTypeSwapLink=function(t){this.scanTypeSelector.hasMoreThanOneScanType()&&(t!==!0&&(t=!1),this.sectionSwapAllowed=t,this.getDashboardSectionSwapLink().style.display=t?"inline-block":"none")},e.prototype.insertCameraScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=LM,this.cameraScanImage.alt=Ze.cameraScanAltText()},e.prototype.insertFileScanImageToScanRegion=function(){var t=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(t.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=BM,this.fileScanImage.alt=Ze.fileScanAltText()},e.prototype.clearScanRegion=function(){var t=document.getElementById(this.getScanRegionId());t.innerHTML=""},e.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},e.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},e.prototype.getDashboardSectionSwapLinkId=function(){return qn.SCAN_TYPE_CHANGE_ANCHOR_ID},e.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},e.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},e.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},e.prototype.getCameraPermissionButtonId=function(){return qn.CAMERA_PERMISSION_BUTTON_ID},e.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},e.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},e.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},e}();function $M(){const[e,t]=j.useState([]),[n,i]=j.useState(""),[r,a]=j.useState(!1),[c,h]=j.useState(""),[g,p]=j.useState([]),[y,w]=j.useState({total:0,checkedIn:0}),E=j.useRef(null),[A,O]=j.useState("");j.useEffect(()=>{I()},[]),j.useEffect(()=>{n&&(T(),N(),B())},[n]),j.useEffect(()=>()=>{E.current&&E.current.clear()},[]);const I=async()=>{try{const{data:F,error:U}=await ue.from("events").select(`
          id,
          name,
          registration_qr,
          company:companies(name)
        `).order("created_at",{ascending:!1});if(U)throw U;const Y=(F==null?void 0:F.map(J=>({...J,company:Array.isArray(J.company)?J.company[0]:J.company})))||[];t(Y)}catch(F){oe.error("Error fetching events: "+F.message)}},B=async()=>{try{const F=`${window.location.origin}/admin/checkin?event=${n}`,U=await Xi.toDataURL(F,{width:200,margin:2,errorCorrectionLevel:"M"});O(U)}catch(F){console.error("Error generating QR code:",F)}},T=async()=>{try{const{data:F,error:U}=await ue.from("attendees").select("id, checked_in").eq("event_id",n);if(U)throw U;w({total:F.length,checkedIn:F.filter(Y=>Y.checked_in).length})}catch(F){console.error("Error fetching stats:",F)}},N=async()=>{try{const{data:F,error:U}=await ue.from("attendees").select(`
          id,
          name,
          identification_number,
          staff_id,
          check_in_time,
          event:events(name)
        `).eq("event_id",n).eq("checked_in",!0).order("check_in_time",{ascending:!1}).limit(10);if(U)throw U;p(F)}catch(F){console.error("Error fetching recent check-ins:",F)}},C=()=>{if(!n){oe.error("Please select an event first");return}a(!0);const F=new QM("qr-reader",{fps:10,qrbox:{width:250,height:250},aspectRatio:1,disableFlip:!1},!1);F.render(U=>{z(U),F.clear(),a(!1)},U=>{console.log("QR scan error:",U)}),E.current=F},k=()=>{E.current&&(E.current.clear(),E.current=null),a(!1)},z=async F=>{try{const U=await D(F);U.success?(oe.success(U.message),T(),N()):oe.error(U.message)}catch(U){oe.error("Error processing check-in: "+U.message)}},D=async F=>{try{if(F.includes("|")){const U=F.split("|");if(U.length!==3)return{success:!1,message:"Invalid QR code format"};const Y=U[0],{data:J,error:ee}=await ue.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            event:events(name)
          `).eq("id",Y).single();if(ee||!J)return{success:!1,message:"Attendee not found"};if(J.event_id!==n)return{success:!1,message:"This ticket is not valid for the selected event"};if(J.checked_in)return{success:!1,message:`${J.name} is already checked in`};const{error:de}=await ue.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",J.id);if(de)throw de;return{success:!0,attendee:J,message:`${J.name} checked in successfully!`}}else{const{data:U,error:Y}=await ue.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            event:events(name)
          `).eq("event_id",n).or(`identification_number.eq.${F},staff_id.eq.${F}`);if(Y)throw Y;if(!U||U.length===0)return{success:!1,message:"No attendee found with this ID"};const J=U[0];if(J.checked_in)return{success:!1,message:`${J.name} is already checked in`};const{error:ee}=await ue.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",J.id);if(ee)throw ee;return{success:!0,attendee:J,message:`${J.name} checked in successfully!`}}}catch(U){return{success:!1,message:"Error processing check-in: "+U.message}}},L=async F=>{if(F.preventDefault(),!c.trim())return;const U=await D(c);U.success?(oe.success(U.message),h(""),T(),N()):oe.error(U.message)};return m.jsxs("div",{children:[m.jsx("div",{className:"flex justify-between items-center mb-8",children:m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Check-In System"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Scan QR codes to check in attendees"})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),m.jsxs("select",{value:n,onChange:F=>i(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"Choose an event to start check-in"}),e.map(F=>m.jsxs("option",{value:F.id,children:[F.name," (",F.company.name,")"]},F.id))]})]}),n&&m.jsx("div",{className:"flex items-end",children:m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[m.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Check-in Progress"}),m.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[y.checkedIn," / ",y.total]}),m.jsxs("div",{className:"text-sm text-blue-600",children:[y.total>0?Math.round(y.checkedIn/y.total*100):0,"% complete"]})]})})]})}),n&&m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(Sd,{className:"h-6 w-6 mr-2"}),"Camera Scanner"]}),m.jsxs("div",{className:"space-y-4",children:[r?m.jsxs("div",{children:[m.jsx("div",{id:"qr-reader",className:"w-full"}),m.jsx("button",{onClick:k,className:"w-full mt-4 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors",children:"Stop Scanner"})]}):m.jsxs("div",{children:[m.jsxs("button",{onClick:C,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[m.jsx(Sd,{className:"h-5 w-5 mr-2"}),"Start Camera Scanner"]}),m.jsx("p",{className:"text-sm text-gray-600 mt-2 text-center",children:"Click to activate camera and scan QR codes"})]}),m.jsxs("div",{className:"border-t pt-4",children:[m.jsx("h3",{className:"font-medium mb-2",children:"Manual ID Entry"}),m.jsxs("form",{onSubmit:L,className:"space-y-3",children:[m.jsx("input",{type:"text",value:c,onChange:F=>h(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ID number or Staff ID"}),m.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[m.jsx(i1,{className:"h-4 w-4 mr-2"}),"Check In"]})]})]})]})]}),A&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(dr,{className:"h-6 w-6 mr-2"}),"Event QR Code"]}),m.jsxs("div",{className:"text-center",children:[m.jsx("img",{src:A,alt:"Event QR Code",className:"w-48 h-48 mx-auto border border-gray-200 rounded-lg mb-3"}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Event Check-in QR Code"}),m.jsx("p",{className:"text-xs text-gray-500",children:"Share this QR code for quick access to check-in"})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 lg:col-span-2",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(fn,{className:"h-6 w-6 mr-2"}),"Recent Check-ins"]}),m.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[g.map(F=>m.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[m.jsx(ar,{className:"h-5 w-5 text-green-600 mr-3"}),m.jsxs("div",{className:"flex-1",children:[m.jsx("div",{className:"font-medium text-gray-900",children:F.name}),m.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",F.identification_number]}),F.staff_id&&m.jsxs("div",{className:"text-sm text-gray-600",children:["Staff: ",F.staff_id]}),m.jsx("div",{className:"text-xs text-gray-500",children:new Date(F.check_in_time).toLocaleTimeString()})]})]},F.id)),g.length===0&&m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(fn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"No check-ins yet"})]})]})]})]}),!n&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(dr,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Event"}),m.jsx("p",{className:"text-gray-600",children:"Choose an event from the dropdown above to start checking in attendees"})]})]})}const Qm=j.createContext({});function $m(e){const t=j.useRef(null);return t.current===null&&(t.current=e()),t.current}const Jm=typeof window<"u",zE=Jm?j.useLayoutEffect:j.useEffect,fh=j.createContext(null);function eg(e,t){e.indexOf(t)===-1&&e.push(t)}function tg(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ws=(e,t,n)=>n>t?t:n<e?e:n;let ng=()=>{};const vs={},HE=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function GE(e){return typeof e=="object"&&e!==null}const YE=e=>/^0[^.\s]+$/u.test(e);function ig(e){let t;return()=>(t===void 0&&(t=e()),t)}const hi=e=>e,JM=(e,t)=>n=>t(e(n)),kc=(...e)=>e.reduce(JM),ic=(e,t,n)=>{const i=t-e;return i===0?1:(n-e)/i};class sg{constructor(){this.subscriptions=[]}add(t){return eg(this.subscriptions,t),()=>tg(this.subscriptions,t)}notify(t,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](t,n,i);else for(let a=0;a<r;a++){const c=this.subscriptions[a];c&&c(t,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const zi=e=>e*1e3,Hi=e=>e/1e3;function qE(e,t){return t?e*(1e3/t):0}const XE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,eI=1e-7,tI=12;function nI(e,t,n,i,r){let a,c,h=0;do c=t+(n-t)/2,a=XE(c,i,r)-e,a>0?n=c:t=c;while(Math.abs(a)>eI&&++h<tI);return c}function Lc(e,t,n,i){if(e===t&&n===i)return hi;const r=a=>nI(a,0,1,e,n);return a=>a===0||a===1?a:XE(r(a),t,i)}const WE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,ZE=e=>t=>1-e(1-t),KE=Lc(.33,1.53,.69,.99),rg=ZE(KE),QE=WE(rg),$E=e=>(e*=2)<1?.5*rg(e):.5*(2-Math.pow(2,-10*(e-1))),ag=e=>1-Math.sin(Math.acos(e)),JE=ZE(ag),e3=WE(ag),iI=Lc(.42,0,1,1),sI=Lc(0,0,.58,1),t3=Lc(.42,0,.58,1),rI=e=>Array.isArray(e)&&typeof e[0]!="number",n3=e=>Array.isArray(e)&&typeof e[0]=="number",aI={linear:hi,easeIn:iI,easeInOut:t3,easeOut:sI,circIn:ag,circInOut:e3,circOut:JE,backIn:rg,backInOut:QE,backOut:KE,anticipate:$E},oI=e=>typeof e=="string",xy=e=>{if(n3(e)){ng(e.length===4);const[t,n,i,r]=e;return Lc(t,n,i,r)}else if(oI(e))return aI[e];return e},wu=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function lI(e,t){let n=new Set,i=new Set,r=!1,a=!1;const c=new WeakSet;let h={delta:0,timestamp:0,isProcessing:!1};function g(y){c.has(y)&&(p.schedule(y),e()),y(h)}const p={schedule:(y,w=!1,E=!1)=>{const O=E&&r?n:i;return w&&c.add(y),O.has(y)||O.add(y),y},cancel:y=>{i.delete(y),c.delete(y)},process:y=>{if(h=y,r){a=!0;return}r=!0,[n,i]=[i,n],n.forEach(g),n.clear(),r=!1,a&&(a=!1,p.process(y))}};return p}const cI=40;function i3(e,t){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=wu.reduce((C,k)=>(C[k]=lI(a),C),{}),{setup:h,read:g,resolveKeyframes:p,preUpdate:y,update:w,preRender:E,render:A,postRender:O}=c,I=()=>{const C=vs.useManualTiming?r.timestamp:performance.now();n=!1,vs.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(C-r.timestamp,cI),1)),r.timestamp=C,r.isProcessing=!0,h.process(r),g.process(r),p.process(r),y.process(r),w.process(r),E.process(r),A.process(r),O.process(r),r.isProcessing=!1,n&&t&&(i=!1,e(I))},B=()=>{n=!0,i=!0,r.isProcessing||e(I)};return{schedule:wu.reduce((C,k)=>{const z=c[k];return C[k]=(D,L=!1,F=!1)=>(n||B(),z.schedule(D,L,F)),C},{}),cancel:C=>{for(let k=0;k<wu.length;k++)c[wu[k]].cancel(C)},state:r,steps:c}}const{schedule:pt,cancel:mr,state:tn,steps:kf}=i3(typeof requestAnimationFrame<"u"?requestAnimationFrame:hi,!0);let Fu;function uI(){Fu=void 0}const jn={now:()=>(Fu===void 0&&jn.set(tn.isProcessing||vs.useManualTiming?tn.timestamp:performance.now()),Fu),set:e=>{Fu=e,queueMicrotask(uI)}},s3=e=>t=>typeof t=="string"&&t.startsWith(e),og=s3("--"),dI=s3("var(--"),lg=e=>dI(e)?hI.test(e.split("/*")[0].trim()):!1,hI=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,jo={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},sc={...jo,transform:e=>ws(0,1,e)},vu={...jo,default:1},Rl=e=>Math.round(e*1e5)/1e5,cg=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function fI(e){return e==null}const mI=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,ug=(e,t)=>n=>!!(typeof n=="string"&&mI.test(n)&&n.startsWith(e)||t&&!fI(n)&&Object.prototype.hasOwnProperty.call(n,t)),r3=(e,t,n)=>i=>{if(typeof i!="string")return i;const[r,a,c,h]=i.match(cg);return{[e]:parseFloat(r),[t]:parseFloat(a),[n]:parseFloat(c),alpha:h!==void 0?parseFloat(h):1}},gI=e=>ws(0,255,e),Lf={...jo,transform:e=>Math.round(gI(e))},Ur={test:ug("rgb","red"),parse:r3("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:i=1})=>"rgba("+Lf.transform(e)+", "+Lf.transform(t)+", "+Lf.transform(n)+", "+Rl(sc.transform(i))+")"};function pI(e){let t="",n="",i="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),i=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),i=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,i+=i,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const d1={test:ug("#"),parse:pI,transform:Ur.transform},Bc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Bs=Bc("deg"),Gi=Bc("%"),Se=Bc("px"),xI=Bc("vh"),yI=Bc("vw"),yy={...Gi,parse:e=>Gi.parse(e)/100,transform:e=>Gi.transform(e*100)},Ga={test:ug("hsl","hue"),parse:r3("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:i=1})=>"hsla("+Math.round(e)+", "+Gi.transform(Rl(t))+", "+Gi.transform(Rl(n))+", "+Rl(sc.transform(i))+")"},jt={test:e=>Ur.test(e)||d1.test(e)||Ga.test(e),parse:e=>Ur.test(e)?Ur.parse(e):Ga.test(e)?Ga.parse(e):d1.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ur.transform(e):Ga.transform(e),getAnimatableNone:e=>{const t=jt.parse(e);return t.alpha=0,jt.transform(t)}},bI=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function wI(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(cg))==null?void 0:t.length)||0)+(((n=e.match(bI))==null?void 0:n.length)||0)>0}const a3="number",o3="color",vI="var",EI="var(",by="${}",AI=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function rc(e){const t=e.toString(),n=[],i={color:[],number:[],var:[]},r=[];let a=0;const h=t.replace(AI,g=>(jt.test(g)?(i.color.push(a),r.push(o3),n.push(jt.parse(g))):g.startsWith(EI)?(i.var.push(a),r.push(vI),n.push(g)):(i.number.push(a),r.push(a3),n.push(parseFloat(g))),++a,by)).split(by);return{values:n,split:h,indexes:i,types:r}}function l3(e){return rc(e).values}function c3(e){const{split:t,types:n}=rc(e),i=t.length;return r=>{let a="";for(let c=0;c<i;c++)if(a+=t[c],r[c]!==void 0){const h=n[c];h===a3?a+=Rl(r[c]):h===o3?a+=jt.transform(r[c]):a+=r[c]}return a}}const SI=e=>typeof e=="number"?0:jt.test(e)?jt.getAnimatableNone(e):e;function CI(e){const t=l3(e);return c3(e)(t.map(SI))}const gr={test:wI,parse:l3,createTransformer:c3,getAnimatableNone:CI};function Bf(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function TI({hue:e,saturation:t,lightness:n,alpha:i}){e/=360,t/=100,n/=100;let r=0,a=0,c=0;if(!t)r=a=c=n;else{const h=n<.5?n*(1+t):n+t-n*t,g=2*n-h;r=Bf(g,h,e+1/3),a=Bf(g,h,e),c=Bf(g,h,e-1/3)}return{red:Math.round(r*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:i}}function Md(e,t){return n=>n>0?t:e}const wt=(e,t,n)=>e+(t-e)*n,Pf=(e,t,n)=>{const i=e*e,r=n*(t*t-i)+i;return r<0?0:Math.sqrt(r)},NI=[d1,Ur,Ga],_I=e=>NI.find(t=>t.test(e));function wy(e){const t=_I(e);if(!t)return!1;let n=t.parse(e);return t===Ga&&(n=TI(n)),n}const vy=(e,t)=>{const n=wy(e),i=wy(t);if(!n||!i)return Md(e,t);const r={...n};return a=>(r.red=Pf(n.red,i.red,a),r.green=Pf(n.green,i.green,a),r.blue=Pf(n.blue,i.blue,a),r.alpha=wt(n.alpha,i.alpha,a),Ur.transform(r))},h1=new Set(["none","hidden"]);function MI(e,t){return h1.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function II(e,t){return n=>wt(e,t,n)}function dg(e){return typeof e=="number"?II:typeof e=="string"?lg(e)?Md:jt.test(e)?vy:OI:Array.isArray(e)?u3:typeof e=="object"?jt.test(e)?vy:DI:Md}function u3(e,t){const n=[...e],i=n.length,r=e.map((a,c)=>dg(a)(a,t[c]));return a=>{for(let c=0;c<i;c++)n[c]=r[c](a);return n}}function DI(e,t){const n={...e,...t},i={};for(const r in n)e[r]!==void 0&&t[r]!==void 0&&(i[r]=dg(e[r])(e[r],t[r]));return r=>{for(const a in i)n[a]=i[a](r);return n}}function RI(e,t){const n=[],i={color:0,var:0,number:0};for(let r=0;r<t.values.length;r++){const a=t.types[r],c=e.indexes[a][i[a]],h=e.values[c]??0;n[r]=h,i[a]++}return n}const OI=(e,t)=>{const n=gr.createTransformer(t),i=rc(e),r=rc(t);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?h1.has(e)&&!r.values.length||h1.has(t)&&!i.values.length?MI(e,t):kc(u3(RI(i,r),r.values),n):Md(e,t)};function d3(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?wt(e,t,n):dg(e)(e,t)}const jI=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>pt.update(t,n),stop:()=>mr(t),now:()=>tn.isProcessing?tn.timestamp:jn.now()}},h3=(e,t,n=10)=>{let i="";const r=Math.max(Math.round(t/n),2);for(let a=0;a<r;a++)i+=Math.round(e(a/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},Id=2e4;function hg(e){let t=0;const n=50;let i=e.next(t);for(;!i.done&&t<Id;)t+=n,i=e.next(t);return t>=Id?1/0:t}function kI(e,t=100,n){const i=n({...e,keyframes:[0,t]}),r=Math.min(hg(i),Id);return{type:"keyframes",ease:a=>i.next(r*a).value/t,duration:Hi(r)}}const LI=5;function f3(e,t,n){const i=Math.max(t-LI,0);return qE(n-e(i),t-i)}const Ct={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Uf=.001;function BI({duration:e=Ct.duration,bounce:t=Ct.bounce,velocity:n=Ct.velocity,mass:i=Ct.mass}){let r,a,c=1-t;c=ws(Ct.minDamping,Ct.maxDamping,c),e=ws(Ct.minDuration,Ct.maxDuration,Hi(e)),c<1?(r=p=>{const y=p*c,w=y*e,E=y-n,A=f1(p,c),O=Math.exp(-w);return Uf-E/A*O},a=p=>{const w=p*c*e,E=w*n+n,A=Math.pow(c,2)*Math.pow(p,2)*e,O=Math.exp(-w),I=f1(Math.pow(p,2),c);return(-r(p)+Uf>0?-1:1)*((E-A)*O)/I}):(r=p=>{const y=Math.exp(-p*e),w=(p-n)*e+1;return-Uf+y*w},a=p=>{const y=Math.exp(-p*e),w=(n-p)*(e*e);return y*w});const h=5/e,g=UI(r,a,h);if(e=zi(e),isNaN(g))return{stiffness:Ct.stiffness,damping:Ct.damping,duration:e};{const p=Math.pow(g,2)*i;return{stiffness:p,damping:c*2*Math.sqrt(i*p),duration:e}}}const PI=12;function UI(e,t,n){let i=n;for(let r=1;r<PI;r++)i=i-e(i)/t(i);return i}function f1(e,t){return e*Math.sqrt(1-t*t)}const FI=["duration","bounce"],VI=["stiffness","damping","mass"];function Ey(e,t){return t.some(n=>e[n]!==void 0)}function zI(e){let t={velocity:Ct.velocity,stiffness:Ct.stiffness,damping:Ct.damping,mass:Ct.mass,isResolvedFromDuration:!1,...e};if(!Ey(e,VI)&&Ey(e,FI))if(e.visualDuration){const n=e.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,a=2*ws(.05,1,1-(e.bounce||0))*Math.sqrt(r);t={...t,mass:Ct.mass,stiffness:r,damping:a}}else{const n=BI(e);t={...t,...n,mass:Ct.mass},t.isResolvedFromDuration=!0}return t}function Dd(e=Ct.visualDuration,t=Ct.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:i,restDelta:r}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],h={done:!1,value:a},{stiffness:g,damping:p,mass:y,duration:w,velocity:E,isResolvedFromDuration:A}=zI({...n,velocity:-Hi(n.velocity||0)}),O=E||0,I=p/(2*Math.sqrt(g*y)),B=c-a,T=Hi(Math.sqrt(g/y)),N=Math.abs(B)<5;i||(i=N?Ct.restSpeed.granular:Ct.restSpeed.default),r||(r=N?Ct.restDelta.granular:Ct.restDelta.default);let C;if(I<1){const z=f1(T,I);C=D=>{const L=Math.exp(-I*T*D);return c-L*((O+I*T*B)/z*Math.sin(z*D)+B*Math.cos(z*D))}}else if(I===1)C=z=>c-Math.exp(-T*z)*(B+(O+T*B)*z);else{const z=T*Math.sqrt(I*I-1);C=D=>{const L=Math.exp(-I*T*D),F=Math.min(z*D,300);return c-L*((O+I*T*B)*Math.sinh(F)+z*B*Math.cosh(F))/z}}const k={calculatedDuration:A&&w||null,next:z=>{const D=C(z);if(A)h.done=z>=w;else{let L=z===0?O:0;I<1&&(L=z===0?zi(O):f3(C,z,D));const F=Math.abs(L)<=i,U=Math.abs(c-D)<=r;h.done=F&&U}return h.value=h.done?c:D,h},toString:()=>{const z=Math.min(hg(k),Id),D=h3(L=>k.next(z*L).value,z,30);return z+"ms "+D},toTransition:()=>{}};return k}Dd.applyToOptions=e=>{const t=kI(e,100,Dd);return e.ease=t.ease,e.duration=zi(t.duration),e.type="keyframes",e};function m1({keyframes:e,velocity:t=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:a=500,modifyTarget:c,min:h,max:g,restDelta:p=.5,restSpeed:y}){const w=e[0],E={done:!1,value:w},A=F=>h!==void 0&&F<h||g!==void 0&&F>g,O=F=>h===void 0?g:g===void 0||Math.abs(h-F)<Math.abs(g-F)?h:g;let I=n*t;const B=w+I,T=c===void 0?B:c(B);T!==B&&(I=T-w);const N=F=>-I*Math.exp(-F/i),C=F=>T+N(F),k=F=>{const U=N(F),Y=C(F);E.done=Math.abs(U)<=p,E.value=E.done?T:Y};let z,D;const L=F=>{A(E.value)&&(z=F,D=Dd({keyframes:[E.value,O(E.value)],velocity:f3(C,F,E.value),damping:r,stiffness:a,restDelta:p,restSpeed:y}))};return L(0),{calculatedDuration:null,next:F=>{let U=!1;return!D&&z===void 0&&(U=!0,k(F),L(F)),z!==void 0&&F>=z?D.next(F-z):(!U&&k(F),E)}}}function HI(e,t,n){const i=[],r=n||vs.mix||d3,a=e.length-1;for(let c=0;c<a;c++){let h=r(e[c],e[c+1]);if(t){const g=Array.isArray(t)?t[c]||hi:t;h=kc(g,h)}i.push(h)}return i}function GI(e,t,{clamp:n=!0,ease:i,mixer:r}={}){const a=e.length;if(ng(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const h=HI(t,i,r),g=h.length,p=y=>{if(c&&y<e[0])return t[0];let w=0;if(g>1)for(;w<e.length-2&&!(y<e[w+1]);w++);const E=ic(e[w],e[w+1],y);return h[w](E)};return n?y=>p(ws(e[0],e[a-1],y)):p}function YI(e,t){const n=e[e.length-1];for(let i=1;i<=t;i++){const r=ic(0,t,i);e.push(wt(n,1,r))}}function qI(e){const t=[0];return YI(t,e.length-1),t}function XI(e,t){return e.map(n=>n*t)}function WI(e,t){return e.map(()=>t||t3).splice(0,e.length-1)}function Ol({duration:e=300,keyframes:t,times:n,ease:i="easeInOut"}){const r=rI(i)?i.map(xy):xy(i),a={done:!1,value:t[0]},c=XI(n&&n.length===t.length?n:qI(t),e),h=GI(c,t,{ease:Array.isArray(r)?r:WI(t,r)});return{calculatedDuration:e,next:g=>(a.value=h(g),a.done=g>=e,a)}}const ZI=e=>e!==null;function fg(e,{repeat:t,repeatType:n="loop"},i,r=1){const a=e.filter(ZI),h=r<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!h||i===void 0?a[h]:i}const KI={decay:m1,inertia:m1,tween:Ol,keyframes:Ol,spring:Dd};function m3(e){typeof e.type=="string"&&(e.type=KI[e.type])}class mg{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const QI=e=>e/100;class gg extends mg{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:n}=this.options;n&&n.updatedAt!==jn.now()&&this.tick(jn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;m3(t);const{type:n=Ol,repeat:i=0,repeatDelay:r=0,repeatType:a,velocity:c=0}=t;let{keyframes:h}=t;const g=n||Ol;g!==Ol&&typeof h[0]!="number"&&(this.mixKeyframes=kc(QI,d3(h[0],h[1])),h=[0,100]);const p=g({...t,keyframes:h});a==="mirror"&&(this.mirroredGenerator=g({...t,keyframes:[...h].reverse(),velocity:-c})),p.calculatedDuration===null&&(p.calculatedDuration=hg(p));const{calculatedDuration:y}=p;this.calculatedDuration=y,this.resolvedDuration=y+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=p}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:i,totalDuration:r,mixKeyframes:a,mirroredGenerator:c,resolvedDuration:h,calculatedDuration:g}=this;if(this.startTime===null)return i.next(0);const{delay:p=0,keyframes:y,repeat:w,repeatType:E,repeatDelay:A,type:O,onUpdate:I,finalKeyframe:B}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-r/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const T=this.currentTime-p*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?T<0:T>r;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let C=this.currentTime,k=i;if(w){const F=Math.min(this.currentTime,r)/h;let U=Math.floor(F),Y=F%1;!Y&&F>=1&&(Y=1),Y===1&&U--,U=Math.min(U,w+1),!!(U%2)&&(E==="reverse"?(Y=1-Y,A&&(Y-=A/h)):E==="mirror"&&(k=c)),C=ws(0,1,Y)*h}const z=N?{done:!1,value:y[0]}:k.next(C);a&&(z.value=a(z.value));let{done:D}=z;!N&&g!==null&&(D=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const L=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return L&&O!==m1&&(z.value=fg(y,this.options,B,this.speed)),I&&I(z.value),L&&this.finish(),z}then(t,n){return this.finished.then(t,n)}get duration(){return Hi(this.calculatedDuration)}get time(){return Hi(this.currentTime)}set time(t){var n;t=zi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(jn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Hi(this.currentTime))}play(){var r,a;if(this.isStopped)return;const{driver:t=jI,startTime:n}=this.options;this.driver||(this.driver=t(c=>this.tick(c))),(a=(r=this.options).onPlay)==null||a.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(jn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function $I(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Fr=e=>e*180/Math.PI,g1=e=>{const t=Fr(Math.atan2(e[1],e[0]));return p1(t)},JI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:g1,rotateZ:g1,skewX:e=>Fr(Math.atan(e[1])),skewY:e=>Fr(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},p1=e=>(e=e%360,e<0&&(e+=360),e),Ay=g1,Sy=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Cy=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),eD={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Sy,scaleY:Cy,scale:e=>(Sy(e)+Cy(e))/2,rotateX:e=>p1(Fr(Math.atan2(e[6],e[5]))),rotateY:e=>p1(Fr(Math.atan2(-e[2],e[0]))),rotateZ:Ay,rotate:Ay,skewX:e=>Fr(Math.atan(e[4])),skewY:e=>Fr(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function x1(e){return e.includes("scale")?1:0}function y1(e,t){if(!e||e==="none")return x1(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=eD,r=n;else{const h=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=JI,r=h}if(!r)return x1(t);const a=i[t],c=r[1].split(",").map(nD);return typeof a=="function"?a(c):c[a]}const tD=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return y1(n,t)};function nD(e){return parseFloat(e.trim())}const ko=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lo=new Set(ko),Ty=e=>e===jo||e===Se,iD=new Set(["x","y","z"]),sD=ko.filter(e=>!iD.has(e));function rD(e){const t=[];return sD.forEach(n=>{const i=e.getValue(n);i!==void 0&&(t.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),t}const Wr={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>y1(t,"x"),y:(e,{transform:t})=>y1(t,"y")};Wr.translateX=Wr.x;Wr.translateY=Wr.y;const Zr=new Set;let b1=!1,w1=!1,v1=!1;function g3(){if(w1){const e=Array.from(Zr).filter(i=>i.needsMeasurement),t=new Set(e.map(i=>i.element)),n=new Map;t.forEach(i=>{const r=rD(i);r.length&&(n.set(i,r),i.render())}),e.forEach(i=>i.measureInitialState()),t.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([a,c])=>{var h;(h=i.getValue(a))==null||h.set(c)})}),e.forEach(i=>i.measureEndState()),e.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}w1=!1,b1=!1,Zr.forEach(e=>e.complete(v1)),Zr.clear()}function p3(){Zr.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(w1=!0)})}function aD(){v1=!0,p3(),g3(),v1=!1}class pg{constructor(t,n,i,r,a,c=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=i,this.motionValue=r,this.element=a,this.isAsync=c}scheduleResolve(){this.state="scheduled",this.isAsync?(Zr.add(this),b1||(b1=!0,pt.read(p3),pt.resolveKeyframes(g3))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:i,motionValue:r}=this;if(t[0]===null){const a=r==null?void 0:r.get(),c=t[t.length-1];if(a!==void 0)t[0]=a;else if(i&&n){const h=i.readValue(n,c);h!=null&&(t[0]=h)}t[0]===void 0&&(t[0]=c),r&&a===void 0&&r.set(t[0])}$I(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Zr.delete(this)}cancel(){this.state==="scheduled"&&(Zr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const oD=e=>e.startsWith("--");function lD(e,t,n){oD(t)?e.style.setProperty(t,n):e.style[t]=n}const cD=ig(()=>window.ScrollTimeline!==void 0),uD={};function dD(e,t){const n=ig(e);return()=>uD[t]??n()}const x3=dD(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),hl=([e,t,n,i])=>`cubic-bezier(${e}, ${t}, ${n}, ${i})`,Ny={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:hl([0,.65,.55,1]),circOut:hl([.55,0,1,.45]),backIn:hl([.31,.01,.66,-.59]),backOut:hl([.33,1.53,.69,.99])};function y3(e,t){if(e)return typeof e=="function"?x3()?h3(e,t):"ease-out":n3(e)?hl(e):Array.isArray(e)?e.map(n=>y3(n,t)||Ny.easeOut):Ny[e]}function hD(e,t,n,{delay:i=0,duration:r=300,repeat:a=0,repeatType:c="loop",ease:h="easeOut",times:g}={},p=void 0){const y={[t]:n};g&&(y.offset=g);const w=y3(h,r);Array.isArray(w)&&(y.easing=w);const E={delay:i,duration:r,easing:Array.isArray(w)?"linear":w,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal"};return p&&(E.pseudoElement=p),e.animate(y,E)}function b3(e){return typeof e=="function"&&"applyToOptions"in e}function fD({type:e,...t}){return b3(e)&&x3()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class mD extends mg{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:i,keyframes:r,pseudoElement:a,allowFlatten:c=!1,finalKeyframe:h,onComplete:g}=t;this.isPseudoElement=!!a,this.allowFlatten=c,this.options=t,ng(typeof t.type!="string");const p=fD(t);this.animation=hD(n,i,r,p,a),p.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const y=fg(r,this.options,h,this.speed);this.updateMotionValue?this.updateMotionValue(y):lD(n,i,y),this.animation.cancel()}g==null||g(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,i;const t=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Hi(Number(t))}get time(){return Hi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=zi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&cD()?(this.animation.timeline=t,hi):n(this)}}const w3={anticipate:$E,backInOut:QE,circInOut:e3};function gD(e){return e in w3}function pD(e){typeof e.ease=="string"&&gD(e.ease)&&(e.ease=w3[e.ease])}const _y=10;class xD extends mD{constructor(t){pD(t),m3(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:i,onComplete:r,element:a,...c}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const h=new gg({...c,autoplay:!1}),g=zi(this.finishedTime??this.time);n.setWithVelocity(h.sample(g-_y).value,h.sample(g).value,_y),h.stop()}}const My=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(gr.test(e)||e==="0")&&!e.startsWith("url("));function yD(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function bD(e,t,n,i){const r=e[0];if(r===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],c=My(r,t),h=My(a,t);return!c||!h?!1:yD(e)||(n==="spring"||b3(n))&&i}const wD=new Set(["opacity","clipPath","filter","transform"]),vD=ig(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function ED(e){var y;const{motionValue:t,name:n,repeatDelay:i,repeatType:r,damping:a,type:c}=e;if(!(((y=t==null?void 0:t.owner)==null?void 0:y.current)instanceof HTMLElement))return!1;const{onUpdate:g,transformTemplate:p}=t.owner.getProps();return vD()&&n&&wD.has(n)&&(n!=="transform"||!p)&&!g&&!i&&r!=="mirror"&&a!==0&&c!=="inertia"}const AD=40;class SD extends mg{constructor({autoplay:t=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:a=0,repeatType:c="loop",keyframes:h,name:g,motionValue:p,element:y,...w}){var O;super(),this.stop=()=>{var I,B;this._animation&&(this._animation.stop(),(I=this.stopTimeline)==null||I.call(this)),(B=this.keyframeResolver)==null||B.cancel()},this.createdAt=jn.now();const E={autoplay:t,delay:n,type:i,repeat:r,repeatDelay:a,repeatType:c,name:g,motionValue:p,element:y,...w},A=(y==null?void 0:y.KeyframeResolver)||pg;this.keyframeResolver=new A(h,(I,B,T)=>this.onKeyframesResolved(I,B,E,!T),g,p,y),(O=this.keyframeResolver)==null||O.scheduleResolve()}onKeyframesResolved(t,n,i,r){this.keyframeResolver=void 0;const{name:a,type:c,velocity:h,delay:g,isHandoff:p,onUpdate:y}=i;this.resolvedAt=jn.now(),bD(t,a,c,h)||((vs.instantAnimations||!g)&&(y==null||y(fg(t,i,n))),t[0]=t[t.length-1],i.duration=0,i.repeat=0);const E={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>AD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:t},A=!p&&ED(E)?new xD({...E,element:E.motionValue.owner.current}):new gg(E);A.finished.then(()=>this.notifyFinished()).catch(hi),this.pendingTimeline&&(this.stopTimeline=A.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=A}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),aD()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const CD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function TD(e){const t=CD.exec(e);if(!t)return[,];const[,n,i,r]=t;return[`--${n??i}`,r]}function v3(e,t,n=1){const[i,r]=TD(e);if(!i)return;const a=window.getComputedStyle(t).getPropertyValue(i);if(a){const c=a.trim();return HE(c)?parseFloat(c):c}return lg(r)?v3(r,t,n+1):r}function xg(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const E3=new Set(["width","height","top","left","right","bottom",...ko]),ND={test:e=>e==="auto",parse:e=>e},A3=e=>t=>t.test(e),S3=[jo,Se,Gi,Bs,yI,xI,ND],Iy=e=>S3.find(A3(e));function _D(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||YE(e):!0}const MD=new Set(["brightness","contrast","saturate","opacity"]);function ID(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[i]=n.match(cg)||[];if(!i)return e;const r=n.replace(i,"");let a=MD.has(t)?1:0;return i!==n&&(a*=100),t+"("+a+r+")"}const DD=/\b([a-z-]*)\(.*?\)/gu,E1={...gr,getAnimatableNone:e=>{const t=e.match(DD);return t?t.map(ID).join(" "):e}},Dy={...jo,transform:Math.round},RD={rotate:Bs,rotateX:Bs,rotateY:Bs,rotateZ:Bs,scale:vu,scaleX:vu,scaleY:vu,scaleZ:vu,skew:Bs,skewX:Bs,skewY:Bs,distance:Se,translateX:Se,translateY:Se,translateZ:Se,x:Se,y:Se,z:Se,perspective:Se,transformPerspective:Se,opacity:sc,originX:yy,originY:yy,originZ:Se},yg={borderWidth:Se,borderTopWidth:Se,borderRightWidth:Se,borderBottomWidth:Se,borderLeftWidth:Se,borderRadius:Se,radius:Se,borderTopLeftRadius:Se,borderTopRightRadius:Se,borderBottomRightRadius:Se,borderBottomLeftRadius:Se,width:Se,maxWidth:Se,height:Se,maxHeight:Se,top:Se,right:Se,bottom:Se,left:Se,padding:Se,paddingTop:Se,paddingRight:Se,paddingBottom:Se,paddingLeft:Se,margin:Se,marginTop:Se,marginRight:Se,marginBottom:Se,marginLeft:Se,backgroundPositionX:Se,backgroundPositionY:Se,...RD,zIndex:Dy,fillOpacity:sc,strokeOpacity:sc,numOctaves:Dy},OD={...yg,color:jt,backgroundColor:jt,outlineColor:jt,fill:jt,stroke:jt,borderColor:jt,borderTopColor:jt,borderRightColor:jt,borderBottomColor:jt,borderLeftColor:jt,filter:E1,WebkitFilter:E1},C3=e=>OD[e];function T3(e,t){let n=C3(e);return n!==E1&&(n=gr),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const jD=new Set(["auto","none","0"]);function kD(e,t,n){let i=0,r;for(;i<e.length&&!r;){const a=e[i];typeof a=="string"&&!jD.has(a)&&rc(a).values.length&&(r=e[i]),i++}if(r&&n)for(const a of t)e[a]=T3(n,r)}class LD extends pg{constructor(t,n,i,r,a){super(t,n,i,r,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let g=0;g<t.length;g++){let p=t[g];if(typeof p=="string"&&(p=p.trim(),lg(p))){const y=v3(p,n.current);y!==void 0&&(t[g]=y),g===t.length-1&&(this.finalKeyframe=p)}}if(this.resolveNoneKeyframes(),!E3.has(i)||t.length!==2)return;const[r,a]=t,c=Iy(r),h=Iy(a);if(c!==h)if(Ty(c)&&Ty(h))for(let g=0;g<t.length;g++){const p=t[g];typeof p=="string"&&(t[g]=parseFloat(p))}else Wr[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,i=[];for(let r=0;r<t.length;r++)(t[r]===null||_D(t[r]))&&i.push(r);i.length&&kD(t,i,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:i}=this;if(!t||!t.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Wr[i](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&t.getValue(i,r).jump(r,!1)}measureEndState(){var h;const{element:t,name:n,unresolvedKeyframes:i}=this;if(!t||!t.current)return;const r=t.getValue(n);r&&r.jump(this.measuredOrigin,!1);const a=i.length-1,c=i[a];i[a]=Wr[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(h=this.removedTransforms)!=null&&h.length&&this.removedTransforms.forEach(([g,p])=>{t.getValue(g).set(p)}),this.resolveNoneKeyframes()}}function BD(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let i=document;const r=(n==null?void 0:n[e])??i.querySelectorAll(e);return r?Array.from(r):[]}return Array.from(e)}const N3=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function _3(e){return GE(e)&&"offsetHeight"in e}const Ry=30,PD=e=>!isNaN(parseFloat(e));class UD{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{var c,h;const a=jn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((c=this.events.change)==null||c.notify(this.current),this.dependents))for(const g of this.dependents)g.dirty();r&&((h=this.events.renderRequest)==null||h.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=jn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=PD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new sg);const i=this.events[t].add(n);return t==="change"?()=>{i(),pt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-i}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=jn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Ry)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Ry);return qE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function wo(e,t){return new UD(e,t)}const{schedule:bg}=i3(queueMicrotask,!1),bi={x:!1,y:!1};function M3(){return bi.x||bi.y}function FD(e){return e==="x"||e==="y"?bi[e]?null:(bi[e]=!0,()=>{bi[e]=!1}):bi.x||bi.y?null:(bi.x=bi.y=!0,()=>{bi.x=bi.y=!1})}function I3(e,t){const n=BD(e),i=new AbortController,r={passive:!0,...t,signal:i.signal};return[n,r,()=>i.abort()]}function Oy(e){return!(e.pointerType==="touch"||M3())}function VD(e,t,n={}){const[i,r,a]=I3(e,n),c=h=>{if(!Oy(h))return;const{target:g}=h,p=t(g,h);if(typeof p!="function"||!g)return;const y=w=>{Oy(w)&&(p(w),g.removeEventListener("pointerleave",y))};g.addEventListener("pointerleave",y,r)};return i.forEach(h=>{h.addEventListener("pointerenter",c,r)}),a}const D3=(e,t)=>t?e===t?!0:D3(e,t.parentElement):!1,wg=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,zD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function HD(e){return zD.has(e.tagName)||e.tabIndex!==-1}const Vu=new WeakSet;function jy(e){return t=>{t.key==="Enter"&&e(t)}}function Ff(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const GD=(e,t)=>{const n=e.currentTarget;if(!n)return;const i=jy(()=>{if(Vu.has(n))return;Ff(n,"down");const r=jy(()=>{Ff(n,"up")}),a=()=>Ff(n,"cancel");n.addEventListener("keyup",r,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",i,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),t)};function ky(e){return wg(e)&&!M3()}function YD(e,t,n={}){const[i,r,a]=I3(e,n),c=h=>{const g=h.currentTarget;if(!ky(h))return;Vu.add(g);const p=t(g,h),y=(A,O)=>{window.removeEventListener("pointerup",w),window.removeEventListener("pointercancel",E),Vu.has(g)&&Vu.delete(g),ky(A)&&typeof p=="function"&&p(A,{success:O})},w=A=>{y(A,g===window||g===document||n.useGlobalTarget||D3(g,A.target))},E=A=>{y(A,!1)};window.addEventListener("pointerup",w,r),window.addEventListener("pointercancel",E,r)};return i.forEach(h=>{(n.useGlobalTarget?window:h).addEventListener("pointerdown",c,r),_3(h)&&(h.addEventListener("focus",p=>GD(p,r)),!HD(h)&&!h.hasAttribute("tabindex")&&(h.tabIndex=0))}),a}function R3(e){return GE(e)&&"ownerSVGElement"in e}function qD(e){return R3(e)&&e.tagName==="svg"}const hn=e=>!!(e&&e.getVelocity),XD=[...S3,jt,gr],WD=e=>XD.find(A3(e)),vg=j.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class ZD extends j.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=_3(i)&&i.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=r-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function KD({children:e,isPresent:t,anchorX:n,root:i}){const r=j.useId(),a=j.useRef(null),c=j.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:h}=j.useContext(vg);return j.useInsertionEffect(()=>{const{width:g,height:p,top:y,left:w,right:E}=c.current;if(t||!a.current||!g||!p)return;const A=n==="left"?`left: ${w}`:`right: ${E}`;a.current.dataset.motionPopId=r;const O=document.createElement("style");h&&(O.nonce=h);const I=i??document.head;return I.appendChild(O),O.sheet&&O.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${g}px !important;
            height: ${p}px !important;
            ${A}px !important;
            top: ${y}px !important;
          }
        `),()=>{I.removeChild(O),I.contains(O)&&I.removeChild(O)}},[t]),m.jsx(ZD,{isPresent:t,childRef:a,sizeRef:c,children:j.cloneElement(e,{ref:a})})}const QD=({children:e,initial:t,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:a,mode:c,anchorX:h,root:g})=>{const p=$m($D),y=j.useId();let w=!0,E=j.useMemo(()=>(w=!1,{id:y,initial:t,isPresent:n,custom:r,onExitComplete:A=>{p.set(A,!0);for(const O of p.values())if(!O)return;i&&i()},register:A=>(p.set(A,!1),()=>p.delete(A))}),[n,p,i]);return a&&w&&(E={...E}),j.useMemo(()=>{p.forEach((A,O)=>p.set(O,!1))},[n]),j.useEffect(()=>{!n&&!p.size&&i&&i()},[n]),c==="popLayout"&&(e=m.jsx(KD,{isPresent:n,anchorX:h,root:g,children:e})),m.jsx(fh.Provider,{value:E,children:e})};function $D(){return new Map}function O3(e=!0){const t=j.useContext(fh);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=t,a=j.useId();j.useEffect(()=>{if(e)return r(a)},[e]);const c=j.useCallback(()=>e&&i&&i(a),[a,i,e]);return!n&&i?[!1,c]:[!0]}const Eu=e=>e.key||"";function Ly(e){const t=[];return j.Children.forEach(e,n=>{j.isValidElement(n)&&t.push(n)}),t}const j3=({children:e,custom:t,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:a="sync",propagate:c=!1,anchorX:h="left",root:g})=>{const[p,y]=O3(c),w=j.useMemo(()=>Ly(e),[e]),E=c&&!p?[]:w.map(Eu),A=j.useRef(!0),O=j.useRef(w),I=$m(()=>new Map),[B,T]=j.useState(w),[N,C]=j.useState(w);zE(()=>{A.current=!1,O.current=w;for(let D=0;D<N.length;D++){const L=Eu(N[D]);E.includes(L)?I.delete(L):I.get(L)!==!0&&I.set(L,!1)}},[N,E.length,E.join("-")]);const k=[];if(w!==B){let D=[...w];for(let L=0;L<N.length;L++){const F=N[L],U=Eu(F);E.includes(U)||(D.splice(L,0,F),k.push(F))}return a==="wait"&&k.length&&(D=k),C(Ly(D)),T(w),null}const{forceRender:z}=j.useContext(Qm);return m.jsx(m.Fragment,{children:N.map(D=>{const L=Eu(D),F=c&&!p?!1:w===N||E.includes(L),U=()=>{if(I.has(L))I.set(L,!0);else return;let Y=!0;I.forEach(J=>{J||(Y=!1)}),Y&&(z==null||z(),C(O.current),c&&(y==null||y()),i&&i())};return m.jsx(QD,{isPresent:F,initial:!A.current||n?void 0:!1,custom:t,presenceAffectsLayout:r,mode:a,root:g,onExitComplete:F?void 0:U,anchorX:h,children:D},L)})})},k3=j.createContext({strict:!1}),By={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},vo={};for(const e in By)vo[e]={isEnabled:t=>By[e].some(n=>!!t[n])};function JD(e){for(const t in e)vo[t]={...vo[t],...e[t]}}const eR=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Rd(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||eR.has(e)}let L3=e=>!Rd(e);function tR(e){typeof e=="function"&&(L3=t=>t.startsWith("on")?!Rd(t):e(t))}try{tR(require("@emotion/is-prop-valid").default)}catch{}function nR(e,t,n){const i={};for(const r in e)r==="values"&&typeof e.values=="object"||(L3(r)||n===!0&&Rd(r)||!t&&!Rd(r)||e.draggable&&r.startsWith("onDrag"))&&(i[r]=e[r]);return i}const mh=j.createContext({});function gh(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ac(e){return typeof e=="string"||Array.isArray(e)}const Eg=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ag=["initial",...Eg];function ph(e){return gh(e.animate)||Ag.some(t=>ac(e[t]))}function B3(e){return!!(ph(e)||e.variants)}function iR(e,t){if(ph(e)){const{initial:n,animate:i}=e;return{initial:n===!1||ac(n)?n:void 0,animate:ac(i)?i:void 0}}return e.inherit!==!1?t:{}}function sR(e){const{initial:t,animate:n}=iR(e,j.useContext(mh));return j.useMemo(()=>({initial:t,animate:n}),[Py(t),Py(n)])}function Py(e){return Array.isArray(e)?e.join(" "):e}const oc={};function rR(e){for(const t in e)oc[t]=e[t],og(t)&&(oc[t].isCSSVariable=!0)}function P3(e,{layout:t,layoutId:n}){return Lo.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!oc[e]||e==="opacity")}const aR={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},oR=ko.length;function lR(e,t,n){let i="",r=!0;for(let a=0;a<oR;a++){const c=ko[a],h=e[c];if(h===void 0)continue;let g=!0;if(typeof h=="number"?g=h===(c.startsWith("scale")?1:0):g=parseFloat(h)===0,!g||n){const p=N3(h,yg[c]);if(!g){r=!1;const y=aR[c]||c;i+=`${y}(${p}) `}n&&(t[c]=p)}}return i=i.trim(),n?i=n(t,r?"":i):r&&(i="none"),i}function Sg(e,t,n){const{style:i,vars:r,transformOrigin:a}=e;let c=!1,h=!1;for(const g in t){const p=t[g];if(Lo.has(g)){c=!0;continue}else if(og(g)){r[g]=p;continue}else{const y=N3(p,yg[g]);g.startsWith("origin")?(h=!0,a[g]=y):i[g]=y}}if(t.transform||(c||n?i.transform=lR(t,e.transform,n):i.transform&&(i.transform="none")),h){const{originX:g="50%",originY:p="50%",originZ:y=0}=a;i.transformOrigin=`${g} ${p} ${y}`}}const Cg=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function U3(e,t,n){for(const i in t)!hn(t[i])&&!P3(i,n)&&(e[i]=t[i])}function cR({transformTemplate:e},t){return j.useMemo(()=>{const n=Cg();return Sg(n,t,e),Object.assign({},n.vars,n.style)},[t])}function uR(e,t){const n=e.style||{},i={};return U3(i,n,e),Object.assign(i,cR(e,t)),i}function dR(e,t){const n={},i=uR(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=i,n}const hR={offset:"stroke-dashoffset",array:"stroke-dasharray"},fR={offset:"strokeDashoffset",array:"strokeDasharray"};function mR(e,t,n=1,i=0,r=!0){e.pathLength=1;const a=r?hR:fR;e[a.offset]=Se.transform(-i);const c=Se.transform(t),h=Se.transform(n);e[a.array]=`${c} ${h}`}function F3(e,{attrX:t,attrY:n,attrScale:i,pathLength:r,pathSpacing:a=1,pathOffset:c=0,...h},g,p,y){if(Sg(e,h,p),g){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:w,style:E}=e;w.transform&&(E.transform=w.transform,delete w.transform),(E.transform||w.transformOrigin)&&(E.transformOrigin=w.transformOrigin??"50% 50%",delete w.transformOrigin),E.transform&&(E.transformBox=(y==null?void 0:y.transformBox)??"fill-box",delete w.transformBox),t!==void 0&&(w.x=t),n!==void 0&&(w.y=n),i!==void 0&&(w.scale=i),r!==void 0&&mR(w,r,a,c,!1)}const V3=()=>({...Cg(),attrs:{}}),z3=e=>typeof e=="string"&&e.toLowerCase()==="svg";function gR(e,t,n,i){const r=j.useMemo(()=>{const a=V3();return F3(a,t,z3(i),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};U3(a,e.style,e),r.style={...a,...r.style}}return r}const pR=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Tg(e){return typeof e!="string"||e.includes("-")?!1:!!(pR.indexOf(e)>-1||/[A-Z]/u.test(e))}function xR(e,t,n,{latestValues:i},r,a=!1){const h=(Tg(e)?gR:dR)(t,i,r,e),g=nR(t,typeof e=="string",a),p=e!==j.Fragment?{...g,...h,ref:n}:{},{children:y}=t,w=j.useMemo(()=>hn(y)?y.get():y,[y]);return j.createElement(e,{...p,children:w})}function Uy(e){const t=[{},{}];return e==null||e.values.forEach((n,i)=>{t[0][i]=n.get(),t[1][i]=n.getVelocity()}),t}function Ng(e,t,n,i){if(typeof t=="function"){const[r,a]=Uy(i);t=t(n!==void 0?n:e.custom,r,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[r,a]=Uy(i);t=t(n!==void 0?n:e.custom,r,a)}return t}function zu(e){return hn(e)?e.get():e}function yR({scrapeMotionValuesFromProps:e,createRenderState:t},n,i,r){return{latestValues:bR(n,i,r,e),renderState:t()}}function bR(e,t,n,i){const r={},a=i(e,{});for(const E in a)r[E]=zu(a[E]);let{initial:c,animate:h}=e;const g=ph(e),p=B3(e);t&&p&&!g&&e.inherit!==!1&&(c===void 0&&(c=t.initial),h===void 0&&(h=t.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const w=y?h:c;if(w&&typeof w!="boolean"&&!gh(w)){const E=Array.isArray(w)?w:[w];for(let A=0;A<E.length;A++){const O=Ng(e,E[A]);if(O){const{transitionEnd:I,transition:B,...T}=O;for(const N in T){let C=T[N];if(Array.isArray(C)){const k=y?C.length-1:0;C=C[k]}C!==null&&(r[N]=C)}for(const N in I)r[N]=I[N]}}}return r}const H3=e=>(t,n)=>{const i=j.useContext(mh),r=j.useContext(fh),a=()=>yR(e,t,i,r);return n?a():$m(a)};function _g(e,t,n){var a;const{style:i}=e,r={};for(const c in i)(hn(i[c])||t.style&&hn(t.style[c])||P3(c,e)||((a=n==null?void 0:n.getValue(c))==null?void 0:a.liveStyle)!==void 0)&&(r[c]=i[c]);return r}const wR=H3({scrapeMotionValuesFromProps:_g,createRenderState:Cg});function G3(e,t,n){const i=_g(e,t,n);for(const r in e)if(hn(e[r])||hn(t[r])){const a=ko.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[a]=e[r]}return i}const vR=H3({scrapeMotionValuesFromProps:G3,createRenderState:V3}),ER=Symbol.for("motionComponentSymbol");function Ya(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function AR(e,t,n){return j.useCallback(i=>{i&&e.onMount&&e.onMount(i),t&&(i?t.mount(i):t.unmount()),n&&(typeof n=="function"?n(i):Ya(n)&&(n.current=i))},[t])}const Mg=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),SR="framerAppearId",Y3="data-"+Mg(SR),q3=j.createContext({});function CR(e,t,n,i,r){var I,B;const{visualElement:a}=j.useContext(mh),c=j.useContext(k3),h=j.useContext(fh),g=j.useContext(vg).reducedMotion,p=j.useRef(null);i=i||c.renderer,!p.current&&i&&(p.current=i(e,{visualState:t,parent:a,props:n,presenceContext:h,blockInitialAnimation:h?h.initial===!1:!1,reducedMotionConfig:g}));const y=p.current,w=j.useContext(q3);y&&!y.projection&&r&&(y.type==="html"||y.type==="svg")&&TR(p.current,n,r,w);const E=j.useRef(!1);j.useInsertionEffect(()=>{y&&E.current&&y.update(n,h)});const A=n[Y3],O=j.useRef(!!A&&!((I=window.MotionHandoffIsComplete)!=null&&I.call(window,A))&&((B=window.MotionHasOptimisedAnimation)==null?void 0:B.call(window,A)));return zE(()=>{y&&(E.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),y.scheduleRenderMicrotask(),O.current&&y.animationState&&y.animationState.animateChanges())}),j.useEffect(()=>{y&&(!O.current&&y.animationState&&y.animationState.animateChanges(),O.current&&(queueMicrotask(()=>{var T;(T=window.MotionHandoffMarkAsComplete)==null||T.call(window,A)}),O.current=!1))}),y}function TR(e,t,n,i){const{layoutId:r,layout:a,drag:c,dragConstraints:h,layoutScroll:g,layoutRoot:p,layoutCrossfade:y}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:X3(e.parent)),e.projection.setOptions({layoutId:r,layout:a,alwaysMeasureLayout:!!c||h&&Ya(h),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:i,crossfade:y,layoutScroll:g,layoutRoot:p})}function X3(e){if(e)return e.options.allowProjection!==!1?e.projection:X3(e.parent)}function Vf(e,{forwardMotionProps:t=!1}={},n,i){n&&JD(n);const r=Tg(e)?vR:wR;function a(h,g){let p;const y={...j.useContext(vg),...h,layoutId:NR(h)},{isStatic:w}=y,E=sR(h),A=r(h,w);if(!w&&Jm){_R();const O=MR(y);p=O.MeasureLayout,E.visualElement=CR(e,A,y,i,O.ProjectionNode)}return m.jsxs(mh.Provider,{value:E,children:[p&&E.visualElement?m.jsx(p,{visualElement:E.visualElement,...y}):null,xR(e,h,AR(A,E.visualElement,g),A,w,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const c=j.forwardRef(a);return c[ER]=e,c}function NR({layoutId:e}){const t=j.useContext(Qm).id;return t&&e!==void 0?t+"-"+e:e}function _R(e,t){j.useContext(k3).strict}function MR(e){const{drag:t,layout:n}=vo;if(!t&&!n)return{};const i={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function IR(e,t){if(typeof Proxy>"u")return Vf;const n=new Map,i=(a,c)=>Vf(a,c,e,t),r=(a,c)=>i(a,c);return new Proxy(r,{get:(a,c)=>c==="create"?i:(n.has(c)||n.set(c,Vf(c,void 0,e,t)),n.get(c))})}function W3({top:e,left:t,right:n,bottom:i}){return{x:{min:t,max:n},y:{min:e,max:i}}}function DR({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function RR(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),i=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function zf(e){return e===void 0||e===1}function A1({scale:e,scaleX:t,scaleY:n}){return!zf(e)||!zf(t)||!zf(n)}function Lr(e){return A1(e)||Z3(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Z3(e){return Fy(e.x)||Fy(e.y)}function Fy(e){return e&&e!=="0%"}function Od(e,t,n){const i=e-n,r=t*i;return n+r}function Vy(e,t,n,i,r){return r!==void 0&&(e=Od(e,r,i)),Od(e,n,i)+t}function S1(e,t=0,n=1,i,r){e.min=Vy(e.min,t,n,i,r),e.max=Vy(e.max,t,n,i,r)}function K3(e,{x:t,y:n}){S1(e.x,t.translate,t.scale,t.originPoint),S1(e.y,n.translate,n.scale,n.originPoint)}const zy=.999999999999,Hy=1.0000000000001;function OR(e,t,n,i=!1){const r=n.length;if(!r)return;t.x=t.y=1;let a,c;for(let h=0;h<r;h++){a=n[h],c=a.projectionDelta;const{visualElement:g}=a.options;g&&g.props.style&&g.props.style.display==="contents"||(i&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Xa(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,K3(e,c)),i&&Lr(a.latestValues)&&Xa(e,a.latestValues))}t.x<Hy&&t.x>zy&&(t.x=1),t.y<Hy&&t.y>zy&&(t.y=1)}function qa(e,t){e.min=e.min+t,e.max=e.max+t}function Gy(e,t,n,i,r=.5){const a=wt(e.min,e.max,r);S1(e,t,n,a,i)}function Xa(e,t){Gy(e.x,t.x,t.scaleX,t.scale,t.originX),Gy(e.y,t.y,t.scaleY,t.scale,t.originY)}function Q3(e,t){return W3(RR(e.getBoundingClientRect(),t))}function jR(e,t,n){const i=Q3(e,n),{scroll:r}=t;return r&&(qa(i.x,r.offset.x),qa(i.y,r.offset.y)),i}const Yy=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wa=()=>({x:Yy(),y:Yy()}),qy=()=>({min:0,max:0}),It=()=>({x:qy(),y:qy()}),C1={current:null},$3={current:!1};function kR(){if($3.current=!0,!!Jm)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>C1.current=e.matches;e.addEventListener("change",t),t()}else C1.current=!1}const LR=new WeakMap;function BR(e,t,n){for(const i in t){const r=t[i],a=n[i];if(hn(r))e.addValue(i,r);else if(hn(a))e.addValue(i,wo(r,{owner:e}));else if(a!==r)if(e.hasValue(i)){const c=e.getValue(i);c.liveStyle===!0?c.jump(r):c.hasAnimated||c.set(r)}else{const c=e.getStaticValue(i);e.addValue(i,wo(c!==void 0?c:r,{owner:e}))}}for(const i in n)t[i]===void 0&&e.removeValue(i);return t}const Xy=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class PR{scrapeMotionValuesFromProps(t,n,i){return{}}constructor({parent:t,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:a,visualState:c},h={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pg,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const E=jn.now();this.renderScheduledAt<E&&(this.renderScheduledAt=E,pt.render(this.render,!1,!0))};const{latestValues:g,renderState:p}=c;this.latestValues=g,this.baseTarget={...g},this.initialValues=n.initial?{...g}:{},this.renderState=p,this.parent=t,this.props=n,this.presenceContext=i,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=h,this.blockInitialAnimation=!!a,this.isControllingVariants=ph(n),this.isVariantNode=B3(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:y,...w}=this.scrapeMotionValuesFromProps(n,{},this);for(const E in w){const A=w[E];g[E]!==void 0&&hn(A)&&A.set(g[E],!1)}}mount(t){this.current=t,LR.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),$3.current||kR(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:C1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),mr(this.notifyUpdate),mr(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const i=Lo.has(t);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",h=>{this.latestValues[t]=h,this.props.onUpdate&&pt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{r(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in vo){const n=vo[t];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[t]&&r&&i(this.props)&&(this.features[t]=new r(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):It()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<Xy.length;i++){const r=Xy[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const a="on"+r,c=t[a];c&&(this.propEventSubscriptions[r]=this.on(r,c))}this.prevMotionValues=BR(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const i=this.values.get(t);n!==i&&(i&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let i=this.values.get(t);return i===void 0&&n!==void 0&&(i=wo(n===null?void 0:n,{owner:this}),this.addValue(t,i)),i}readValue(t,n){let i=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return i!=null&&(typeof i=="string"&&(HE(i)||YE(i))?i=parseFloat(i):!WD(i)&&gr.test(n)&&(i=T3(t,n)),this.setBaseTarget(t,hn(i)?i.get():i)),hn(i)?i.get():i}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const c=Ng(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);c&&(i=c[t])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,t);return r!==void 0&&!hn(r)?r:this.initialValues[t]!==void 0&&i===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new sg),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){bg.render(this.render)}}class J3 extends PR{constructor(){super(...arguments),this.KeyframeResolver=LD}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:i}){delete n[t],delete i[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;hn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function eA(e,{style:t,vars:n},i,r){const a=e.style;let c;for(c in t)a[c]=t[c];r==null||r.applyProjectionStyles(a,i);for(c in n)a.setProperty(c,n[c])}function UR(e){return window.getComputedStyle(e)}class FR extends J3{constructor(){super(...arguments),this.type="html",this.renderInstance=eA}readValueFromInstance(t,n){var i;if(Lo.has(n))return(i=this.projection)!=null&&i.isProjecting?x1(n):tD(t,n);{const r=UR(t),a=(og(n)?r.getPropertyValue(n):r[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Q3(t,n)}build(t,n,i){Sg(t,n,i.transformTemplate)}scrapeMotionValuesFromProps(t,n,i){return _g(t,n,i)}}const tA=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function VR(e,t,n,i){eA(e,t,void 0,i);for(const r in t.attrs)e.setAttribute(tA.has(r)?r:Mg(r),t.attrs[r])}class zR extends J3{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=It}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Lo.has(n)){const i=C3(n);return i&&i.default||0}return n=tA.has(n)?n:Mg(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,i){return G3(t,n,i)}build(t,n,i){F3(t,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(t,n,i,r){VR(t,n,i,r)}mount(t){this.isSVGTag=z3(t.tagName),super.mount(t)}}const HR=(e,t)=>Tg(e)?new zR(t):new FR(t,{allowProjection:e!==j.Fragment});function lc(e,t,n){const i=e.getProps();return Ng(i,t,n!==void 0?n:i.custom,e)}const T1=e=>Array.isArray(e);function GR(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,wo(n))}function YR(e){return T1(e)?e[e.length-1]||0:e}function qR(e,t){const n=lc(e,t);let{transitionEnd:i={},transition:r={},...a}=n||{};a={...a,...i};for(const c in a){const h=YR(a[c]);GR(e,c,h)}}function XR(e){return!!(hn(e)&&e.add)}function N1(e,t){const n=e.getValue("willChange");if(XR(n))return n.add(t);if(!n&&vs.WillChange){const i=new vs.WillChange("auto");e.addValue("willChange",i),i.add(t)}}function nA(e){return e.props[Y3]}const WR=e=>e!==null;function ZR(e,{repeat:t,repeatType:n="loop"},i){const r=e.filter(WR),a=t&&n!=="loop"&&t%2===1?0:r.length-1;return r[a]}const KR={type:"spring",stiffness:500,damping:25,restSpeed:10},QR=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),$R={type:"keyframes",duration:.8},JR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},eO=(e,{keyframes:t})=>t.length>2?$R:Lo.has(e)?e.startsWith("scale")?QR(t[1]):KR:JR;function tO({when:e,delay:t,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:a,repeatType:c,repeatDelay:h,from:g,elapsed:p,...y}){return!!Object.keys(y).length}const Ig=(e,t,n,i={},r,a)=>c=>{const h=xg(i,e)||{},g=h.delay||i.delay||0;let{elapsed:p=0}=i;p=p-zi(g);const y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...h,delay:-p,onUpdate:E=>{t.set(E),h.onUpdate&&h.onUpdate(E)},onComplete:()=>{c(),h.onComplete&&h.onComplete()},name:e,motionValue:t,element:a?void 0:r};tO(h)||Object.assign(y,eO(e,y)),y.duration&&(y.duration=zi(y.duration)),y.repeatDelay&&(y.repeatDelay=zi(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let w=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(w=!0)),(vs.instantAnimations||vs.skipAnimations)&&(w=!0,y.duration=0,y.delay=0),y.allowFlatten=!h.type&&!h.ease,w&&!a&&t.get()!==void 0){const E=ZR(y.keyframes,h);if(E!==void 0){pt.update(()=>{y.onUpdate(E),y.onComplete()});return}}return h.isSync?new gg(y):new SD(y)};function nO({protectedKeys:e,needsAnimating:t},n){const i=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,i}function iA(e,t,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:c,...h}=t;i&&(a=i);const g=[],p=r&&e.animationState&&e.animationState.getState()[r];for(const y in h){const w=e.getValue(y,e.latestValues[y]??null),E=h[y];if(E===void 0||p&&nO(p,y))continue;const A={delay:n,...xg(a||{},y)},O=w.get();if(O!==void 0&&!w.isAnimating&&!Array.isArray(E)&&E===O&&!A.velocity)continue;let I=!1;if(window.MotionHandoffAnimation){const T=nA(e);if(T){const N=window.MotionHandoffAnimation(T,y,pt);N!==null&&(A.startTime=N,I=!0)}}N1(e,y),w.start(Ig(y,w,E,e.shouldReduceMotion&&E3.has(y)?{type:!1}:A,e,I));const B=w.animation;B&&g.push(B)}return c&&Promise.all(g).then(()=>{pt.update(()=>{c&&qR(e,c)})}),g}function _1(e,t,n={}){var g;const i=lc(e,t,n.type==="exit"?(g=e.presenceContext)==null?void 0:g.custom:void 0);let{transition:r=e.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const a=i?()=>Promise.all(iA(e,i,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(p=0)=>{const{delayChildren:y=0,staggerChildren:w,staggerDirection:E}=r;return iO(e,t,p,y,w,E,n)}:()=>Promise.resolve(),{when:h}=r;if(h){const[p,y]=h==="beforeChildren"?[a,c]:[c,a];return p().then(()=>y())}else return Promise.all([a(),c(n.delay)])}function iO(e,t,n=0,i=0,r=0,a=1,c){const h=[],g=e.variantChildren.size,p=(g-1)*r,y=typeof i=="function",w=y?E=>i(E,g):a===1?(E=0)=>E*r:(E=0)=>p-E*r;return Array.from(e.variantChildren).sort(sO).forEach((E,A)=>{E.notify("AnimationStart",t),h.push(_1(E,t,{...c,delay:n+(y?0:i)+w(A)}).then(()=>E.notify("AnimationComplete",t)))}),Promise.all(h)}function sO(e,t){return e.sortNodePosition(t)}function rO(e,t,n={}){e.notify("AnimationStart",t);let i;if(Array.isArray(t)){const r=t.map(a=>_1(e,a,n));i=Promise.all(r)}else if(typeof t=="string")i=_1(e,t,n);else{const r=typeof t=="function"?lc(e,t,n.custom):t;i=Promise.all(iA(e,r,n))}return i.then(()=>{e.notify("AnimationComplete",t)})}function sA(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}const aO=Ag.length;function rA(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?rA(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<aO;n++){const i=Ag[n],r=e.props[i];(ac(r)||r===!1)&&(t[i]=r)}return t}const oO=[...Eg].reverse(),lO=Eg.length;function cO(e){return t=>Promise.all(t.map(({animation:n,options:i})=>rO(e,n,i)))}function uO(e){let t=cO(e),n=Wy(),i=!0;const r=g=>(p,y)=>{var E;const w=lc(e,y,g==="exit"?(E=e.presenceContext)==null?void 0:E.custom:void 0);if(w){const{transition:A,transitionEnd:O,...I}=w;p={...p,...I,...O}}return p};function a(g){t=g(e)}function c(g){const{props:p}=e,y=rA(e.parent)||{},w=[],E=new Set;let A={},O=1/0;for(let B=0;B<lO;B++){const T=oO[B],N=n[T],C=p[T]!==void 0?p[T]:y[T],k=ac(C),z=T===g?N.isActive:null;z===!1&&(O=B);let D=C===y[T]&&C!==p[T]&&k;if(D&&i&&e.manuallyAnimateOnMount&&(D=!1),N.protectedKeys={...A},!N.isActive&&z===null||!C&&!N.prevProp||gh(C)||typeof C=="boolean")continue;const L=dO(N.prevProp,C);let F=L||T===g&&N.isActive&&!D&&k||B>O&&k,U=!1;const Y=Array.isArray(C)?C:[C];let J=Y.reduce(r(T),{});z===!1&&(J={});const{prevResolvedValues:ee={}}=N,de={...ee,...J},be=se=>{F=!0,E.has(se)&&(U=!0,E.delete(se)),N.needsAnimating[se]=!0;const W=e.getValue(se);W&&(W.liveStyle=!1)};for(const se in de){const W=J[se],ae=ee[se];if(A.hasOwnProperty(se))continue;let $=!1;T1(W)&&T1(ae)?$=!sA(W,ae):$=W!==ae,$?W!=null?be(se):E.add(se):W!==void 0&&E.has(se)?be(se):N.protectedKeys[se]=!0}N.prevProp=C,N.prevResolvedValues=J,N.isActive&&(A={...A,...J}),i&&e.blockInitialAnimation&&(F=!1),F&&(!(D&&L)||U)&&w.push(...Y.map(se=>({animation:se,options:{type:T}})))}if(E.size){const B={};if(typeof p.initial!="boolean"){const T=lc(e,Array.isArray(p.initial)?p.initial[0]:p.initial);T&&T.transition&&(B.transition=T.transition)}E.forEach(T=>{const N=e.getBaseTarget(T),C=e.getValue(T);C&&(C.liveStyle=!0),B[T]=N??null}),w.push({animation:B})}let I=!!w.length;return i&&(p.initial===!1||p.initial===p.animate)&&!e.manuallyAnimateOnMount&&(I=!1),i=!1,I?t(w):Promise.resolve()}function h(g,p){var w;if(n[g].isActive===p)return Promise.resolve();(w=e.variantChildren)==null||w.forEach(E=>{var A;return(A=E.animationState)==null?void 0:A.setActive(g,p)}),n[g].isActive=p;const y=c(g);for(const E in n)n[E].protectedKeys={};return y}return{animateChanges:c,setActive:h,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Wy(),i=!0}}}function dO(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!sA(t,e):!1}function Dr(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Wy(){return{animate:Dr(!0),whileInView:Dr(),whileHover:Dr(),whileTap:Dr(),whileDrag:Dr(),whileFocus:Dr(),exit:Dr()}}class vr{constructor(t){this.isMounted=!1,this.node=t}update(){}}class hO extends vr{constructor(t){super(t),t.animationState||(t.animationState=uO(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();gh(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let fO=0;class mO extends vr{constructor(){super(...arguments),this.id=fO++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===i)return;const r=this.node.animationState.setActive("exit",!t);n&&!t&&r.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const gO={animation:{Feature:hO},exit:{Feature:mO}};function cc(e,t,n,i={passive:!0}){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n)}function Pc(e){return{point:{x:e.pageX,y:e.pageY}}}const pO=e=>t=>wg(t)&&e(t,Pc(t));function jl(e,t,n,i){return cc(e,t,pO(n),i)}const aA=1e-4,xO=1-aA,yO=1+aA,oA=.01,bO=0-oA,wO=0+oA;function wn(e){return e.max-e.min}function vO(e,t,n){return Math.abs(e-t)<=n}function Zy(e,t,n,i=.5){e.origin=i,e.originPoint=wt(t.min,t.max,e.origin),e.scale=wn(n)/wn(t),e.translate=wt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=xO&&e.scale<=yO||isNaN(e.scale))&&(e.scale=1),(e.translate>=bO&&e.translate<=wO||isNaN(e.translate))&&(e.translate=0)}function kl(e,t,n,i){Zy(e.x,t.x,n.x,i?i.originX:void 0),Zy(e.y,t.y,n.y,i?i.originY:void 0)}function Ky(e,t,n){e.min=n.min+t.min,e.max=e.min+wn(t)}function EO(e,t,n){Ky(e.x,t.x,n.x),Ky(e.y,t.y,n.y)}function Qy(e,t,n){e.min=t.min-n.min,e.max=e.min+wn(t)}function Ll(e,t,n){Qy(e.x,t.x,n.x),Qy(e.y,t.y,n.y)}function si(e){return[e("x"),e("y")]}const lA=({current:e})=>e?e.ownerDocument.defaultView:null,$y=(e,t)=>Math.abs(e-t);function AO(e,t){const n=$y(e.x,t.x),i=$y(e.y,t.y);return Math.sqrt(n**2+i**2)}class cA{constructor(t,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:a=!1,distanceThreshold:c=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=Gf(this.lastMoveEventInfo,this.history),A=this.startEvent!==null,O=AO(E.offset,{x:0,y:0})>=this.distanceThreshold;if(!A&&!O)return;const{point:I}=E,{timestamp:B}=tn;this.history.push({...I,timestamp:B});const{onStart:T,onMove:N}=this.handlers;A||(T&&T(this.lastMoveEvent,E),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,E)},this.handlePointerMove=(E,A)=>{this.lastMoveEvent=E,this.lastMoveEventInfo=Hf(A,this.transformPagePoint),pt.update(this.updatePoint,!0)},this.handlePointerUp=(E,A)=>{this.end();const{onEnd:O,onSessionEnd:I,resumeAnimation:B}=this.handlers;if(this.dragSnapToOrigin&&B&&B(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=Gf(E.type==="pointercancel"?this.lastMoveEventInfo:Hf(A,this.transformPagePoint),this.history);this.startEvent&&O&&O(E,T),I&&I(E,T)},!wg(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=c,this.contextWindow=r||window;const h=Pc(t),g=Hf(h,this.transformPagePoint),{point:p}=g,{timestamp:y}=tn;this.history=[{...p,timestamp:y}];const{onSessionStart:w}=n;w&&w(t,Gf(g,this.history)),this.removeListeners=kc(jl(this.contextWindow,"pointermove",this.handlePointerMove),jl(this.contextWindow,"pointerup",this.handlePointerUp),jl(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),mr(this.updatePoint)}}function Hf(e,t){return t?{point:t(e.point)}:e}function Jy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gf({point:e},t){return{point:e,delta:Jy(e,uA(t)),offset:Jy(e,SO(t)),velocity:CO(t,.1)}}function SO(e){return e[0]}function uA(e){return e[e.length-1]}function CO(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,i=null;const r=uA(e);for(;n>=0&&(i=e[n],!(r.timestamp-i.timestamp>zi(t)));)n--;if(!i)return{x:0,y:0};const a=Hi(r.timestamp-i.timestamp);if(a===0)return{x:0,y:0};const c={x:(r.x-i.x)/a,y:(r.y-i.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function TO(e,{min:t,max:n},i){return t!==void 0&&e<t?e=i?wt(t,e,i.min):Math.max(e,t):n!==void 0&&e>n&&(e=i?wt(n,e,i.max):Math.min(e,n)),e}function e2(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function NO(e,{top:t,left:n,bottom:i,right:r}){return{x:e2(e.x,n,r),y:e2(e.y,t,i)}}function t2(e,t){let n=t.min-e.min,i=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,i]=[i,n]),{min:n,max:i}}function _O(e,t){return{x:t2(e.x,t.x),y:t2(e.y,t.y)}}function MO(e,t){let n=.5;const i=wn(e),r=wn(t);return r>i?n=ic(t.min,t.max-i,e.min):i>r&&(n=ic(e.min,e.max-r,t.min)),ws(0,1,n)}function IO(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const M1=.35;function DO(e=M1){return e===!1?e=0:e===!0&&(e=M1),{x:n2(e,"left","right"),y:n2(e,"top","bottom")}}function n2(e,t,n){return{min:i2(e,t),max:i2(e,n)}}function i2(e,t){return typeof e=="number"?e:e[t]||0}const RO=new WeakMap;class OO{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=It(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const a=w=>{const{dragSnapToOrigin:E}=this.getProps();E?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Pc(w).point)},c=(w,E)=>{const{drag:A,dragPropagation:O,onDragStart:I}=this.getProps();if(A&&!O&&(this.openDragLock&&this.openDragLock(),this.openDragLock=FD(A),!this.openDragLock))return;this.latestPointerEvent=w,this.latestPanInfo=E,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),si(T=>{let N=this.getAxisMotionValue(T).get()||0;if(Gi.test(N)){const{projection:C}=this.visualElement;if(C&&C.layout){const k=C.layout.layoutBox[T];k&&(N=wn(k)*(parseFloat(N)/100))}}this.originPoint[T]=N}),I&&pt.postRender(()=>I(w,E)),N1(this.visualElement,"transform");const{animationState:B}=this.visualElement;B&&B.setActive("whileDrag",!0)},h=(w,E)=>{this.latestPointerEvent=w,this.latestPanInfo=E;const{dragPropagation:A,dragDirectionLock:O,onDirectionLock:I,onDrag:B}=this.getProps();if(!A&&!this.openDragLock)return;const{offset:T}=E;if(O&&this.currentDirection===null){this.currentDirection=jO(T),this.currentDirection!==null&&I&&I(this.currentDirection);return}this.updateAxis("x",E.point,T),this.updateAxis("y",E.point,T),this.visualElement.render(),B&&B(w,E)},g=(w,E)=>{this.latestPointerEvent=w,this.latestPanInfo=E,this.stop(w,E),this.latestPointerEvent=null,this.latestPanInfo=null},p=()=>si(w=>{var E;return this.getAnimationState(w)==="paused"&&((E=this.getAxisMotionValue(w).animation)==null?void 0:E.play())}),{dragSnapToOrigin:y}=this.getProps();this.panSession=new cA(t,{onSessionStart:a,onStart:c,onMove:h,onSessionEnd:g,resumeAnimation:p},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:y,distanceThreshold:i,contextWindow:lA(this.visualElement)})}stop(t,n){const i=t||this.latestPointerEvent,r=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!r||!i)return;const{velocity:c}=r;this.startAnimation(c);const{onDragEnd:h}=this.getProps();h&&pt.postRender(()=>h(i,r))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,i){const{drag:r}=this.getProps();if(!i||!Au(t,r,this.currentDirection))return;const a=this.getAxisMotionValue(t);let c=this.originPoint[t]+i[t];this.constraints&&this.constraints[t]&&(c=TO(c,this.constraints[t],this.elastic[t])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,r=this.constraints;t&&Ya(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&i?this.constraints=NO(i.layoutBox,t):this.constraints=!1,this.elastic=DO(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&si(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=IO(i.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ya(t))return!1;const i=t.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const a=jR(i,r.root,this.visualElement.getTransformPagePoint());let c=_O(r.layout.layoutBox,a);if(n){const h=n(DR(c));this.hasMutatedConstraints=!!h,h&&(c=W3(h))}return c}startAnimation(t){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:h}=this.getProps(),g=this.constraints||{},p=si(y=>{if(!Au(y,n,this.currentDirection))return;let w=g&&g[y]||{};c&&(w={min:0,max:0});const E=r?200:1e6,A=r?40:1e7,O={type:"inertia",velocity:i?t[y]:0,bounceStiffness:E,bounceDamping:A,timeConstant:750,restDelta:1,restSpeed:10,...a,...w};return this.startAxisValueAnimation(y,O)});return Promise.all(p).then(h)}startAxisValueAnimation(t,n){const i=this.getAxisMotionValue(t);return N1(this.visualElement,t),i.start(Ig(t,i,0,n,this.visualElement,!1))}stopAnimation(){si(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){si(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(t,(i.initial?i.initial[t]:void 0)||0)}snapToCursor(t){si(n=>{const{drag:i}=this.getProps();if(!Au(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,a=this.getAxisMotionValue(n);if(r&&r.layout){const{min:c,max:h}=r.layout.layoutBox[n];a.set(t[n]-wt(c,h,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!Ya(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};si(c=>{const h=this.getAxisMotionValue(c);if(h&&this.constraints!==!1){const g=h.get();r[c]=MO({min:g,max:g},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),si(c=>{if(!Au(c,t,null))return;const h=this.getAxisMotionValue(c),{min:g,max:p}=this.constraints[c];h.set(wt(g,p,r[c]))})}addListeners(){if(!this.visualElement.current)return;RO.set(this.visualElement,this);const t=this.visualElement.current,n=jl(t,"pointerdown",g=>{const{drag:p,dragListener:y=!0}=this.getProps();p&&y&&this.start(g)}),i=()=>{const{dragConstraints:g}=this.getProps();Ya(g)&&g.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,a=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),pt.read(i);const c=cc(window,"resize",()=>this.scalePositionWithinConstraints()),h=r.addEventListener("didUpdate",({delta:g,hasLayoutChanged:p})=>{this.isDragging&&p&&(si(y=>{const w=this.getAxisMotionValue(y);w&&(this.originPoint[y]+=g[y].translate,w.set(w.get()+g[y].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),h&&h()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:a=!1,dragElastic:c=M1,dragMomentum:h=!0}=t;return{...t,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:a,dragElastic:c,dragMomentum:h}}}function Au(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function jO(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class kO extends vr{constructor(t){super(t),this.removeGroupControls=hi,this.removeListeners=hi,this.controls=new OO(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||hi}unmount(){this.removeGroupControls(),this.removeListeners()}}const s2=e=>(t,n)=>{e&&pt.postRender(()=>e(t,n))};class LO extends vr{constructor(){super(...arguments),this.removePointerDownListener=hi}onPointerDown(t){this.session=new cA(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:lA(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:s2(t),onStart:s2(n),onMove:i,onEnd:(a,c)=>{delete this.session,r&&pt.postRender(()=>r(a,c))}}}mount(){this.removePointerDownListener=jl(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Hu={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function r2(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const rl={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Se.test(e))e=parseFloat(e);else return e;const n=r2(e,t.target.x),i=r2(e,t.target.y);return`${n}% ${i}%`}},BO={correct:(e,{treeScale:t,projectionDelta:n})=>{const i=e,r=gr.parse(e);if(r.length>5)return i;const a=gr.createTransformer(e),c=typeof r[0]!="number"?1:0,h=n.x.scale*t.x,g=n.y.scale*t.y;r[0+c]/=h,r[1+c]/=g;const p=wt(h,g,.5);return typeof r[2+c]=="number"&&(r[2+c]/=p),typeof r[3+c]=="number"&&(r[3+c]/=p),a(r)}};let a2=!1;class PO extends j.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:a}=t;rR(UO),a&&(n.group&&n.group.add(a),i&&i.register&&r&&i.register(a),a2&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Hu.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:i,drag:r,isPresent:a}=this.props,{projection:c}=i;return c&&(c.isPresent=a,a2=!0,r||t.layoutDependency!==n||n===void 0||t.isPresent!==a?c.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?c.promote():c.relegate()||pt.postRender(()=>{const h=c.getStack();(!h||!h.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),bg.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=t;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function dA(e){const[t,n]=O3(),i=j.useContext(Qm);return m.jsx(PO,{...e,layoutGroup:i,switchLayoutGroup:j.useContext(q3),isPresent:t,safeToRemove:n})}const UO={borderRadius:{...rl,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:rl,borderTopRightRadius:rl,borderBottomLeftRadius:rl,borderBottomRightRadius:rl,boxShadow:BO};function FO(e,t,n){const i=hn(e)?e:wo(e);return i.start(Ig("",i,t,n)),i.animation}const VO=(e,t)=>e.depth-t.depth;class zO{constructor(){this.children=[],this.isDirty=!1}add(t){eg(this.children,t),this.isDirty=!0}remove(t){tg(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(VO),this.isDirty=!1,this.children.forEach(t)}}function HO(e,t){const n=jn.now(),i=({timestamp:r})=>{const a=r-n;a>=t&&(mr(i),e(a-t))};return pt.setup(i,!0),()=>mr(i)}const hA=["TopLeft","TopRight","BottomLeft","BottomRight"],GO=hA.length,o2=e=>typeof e=="string"?parseFloat(e):e,l2=e=>typeof e=="number"||Se.test(e);function YO(e,t,n,i,r,a){r?(e.opacity=wt(0,n.opacity??1,qO(i)),e.opacityExit=wt(t.opacity??1,0,XO(i))):a&&(e.opacity=wt(t.opacity??1,n.opacity??1,i));for(let c=0;c<GO;c++){const h=`border${hA[c]}Radius`;let g=c2(t,h),p=c2(n,h);if(g===void 0&&p===void 0)continue;g||(g=0),p||(p=0),g===0||p===0||l2(g)===l2(p)?(e[h]=Math.max(wt(o2(g),o2(p),i),0),(Gi.test(p)||Gi.test(g))&&(e[h]+="%")):e[h]=p}(t.rotate||n.rotate)&&(e.rotate=wt(t.rotate||0,n.rotate||0,i))}function c2(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const qO=fA(0,.5,JE),XO=fA(.5,.95,hi);function fA(e,t,n){return i=>i<e?0:i>t?1:n(ic(e,t,i))}function u2(e,t){e.min=t.min,e.max=t.max}function ii(e,t){u2(e.x,t.x),u2(e.y,t.y)}function d2(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function h2(e,t,n,i,r){return e-=t,e=Od(e,1/n,i),r!==void 0&&(e=Od(e,1/r,i)),e}function WO(e,t=0,n=1,i=.5,r,a=e,c=e){if(Gi.test(t)&&(t=parseFloat(t),t=wt(c.min,c.max,t/100)-c.min),typeof t!="number")return;let h=wt(a.min,a.max,i);e===a&&(h-=t),e.min=h2(e.min,t,n,h,r),e.max=h2(e.max,t,n,h,r)}function f2(e,t,[n,i,r],a,c){WO(e,t[n],t[i],t[r],t.scale,a,c)}const ZO=["x","scaleX","originX"],KO=["y","scaleY","originY"];function m2(e,t,n,i){f2(e.x,t,ZO,n?n.x:void 0,i?i.x:void 0),f2(e.y,t,KO,n?n.y:void 0,i?i.y:void 0)}function g2(e){return e.translate===0&&e.scale===1}function mA(e){return g2(e.x)&&g2(e.y)}function p2(e,t){return e.min===t.min&&e.max===t.max}function QO(e,t){return p2(e.x,t.x)&&p2(e.y,t.y)}function x2(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function gA(e,t){return x2(e.x,t.x)&&x2(e.y,t.y)}function y2(e){return wn(e.x)/wn(e.y)}function b2(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class $O{constructor(){this.members=[]}add(t){eg(this.members,t),t.scheduleRender()}remove(t){if(tg(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(r=>t===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const a=this.members[r];if(a.isPresent!==!1){i=a;break}}return i?(this.promote(i),!0):!1}promote(t,n){const i=this.lead;if(t!==i&&(this.prevLead=i,this.lead=t,t.show(),i)){i.instance&&i.scheduleRender(),t.scheduleRender(),t.resumeFrom=i,n&&(t.resumeFrom.preserveOpacity=!0),i.snapshot&&(t.snapshot=i.snapshot,t.snapshot.latestValues=i.animationValues||i.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:r}=t.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:i}=t;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function JO(e,t,n){let i="";const r=e.x.translate/t.x,a=e.y.translate/t.y,c=(n==null?void 0:n.z)||0;if((r||a||c)&&(i=`translate3d(${r}px, ${a}px, ${c}px) `),(t.x!==1||t.y!==1)&&(i+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:p,rotate:y,rotateX:w,rotateY:E,skewX:A,skewY:O}=n;p&&(i=`perspective(${p}px) ${i}`),y&&(i+=`rotate(${y}deg) `),w&&(i+=`rotateX(${w}deg) `),E&&(i+=`rotateY(${E}deg) `),A&&(i+=`skewX(${A}deg) `),O&&(i+=`skewY(${O}deg) `)}const h=e.x.scale*t.x,g=e.y.scale*t.y;return(h!==1||g!==1)&&(i+=`scale(${h}, ${g})`),i||"none"}const Yf=["","X","Y","Z"],ej=1e3;let tj=0;function qf(e,t,n,i){const{latestValues:r}=t;r[e]&&(n[e]=r[e],t.setStaticValue(e,0),i&&(i[e]=0))}function pA(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=nA(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",pt,!(r||a))}const{parent:i}=e;i&&!i.hasCheckedOptimisedAppear&&pA(i)}function xA({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(c={},h=t==null?void 0:t()){this.id=tj++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(sj),this.nodes.forEach(lj),this.nodes.forEach(cj),this.nodes.forEach(rj)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=h?h.root||h:this,this.path=h?[...h.path,h]:[],this.parent=h,this.depth=h?h.depth+1:0;for(let g=0;g<this.path.length;g++)this.path[g].shouldResetTransform=!0;this.root===this&&(this.nodes=new zO)}addEventListener(c,h){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new sg),this.eventHandlers.get(c).add(h)}notifyListeners(c,...h){const g=this.eventHandlers.get(c);g&&g.notify(...h)}hasListeners(c){return this.eventHandlers.has(c)}mount(c){if(this.instance)return;this.isSVG=R3(c)&&!qD(c),this.instance=c;const{layoutId:h,layout:g,visualElement:p}=this.options;if(p&&!p.current&&p.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(g||h)&&(this.isLayoutDirty=!0),e){let y,w=0;const E=()=>this.root.updateBlockedByResize=!1;pt.read(()=>{w=window.innerWidth}),e(c,()=>{const A=window.innerWidth;A!==w&&(w=A,this.root.updateBlockedByResize=!0,y&&y(),y=HO(E,250),Hu.hasAnimatedSinceResize&&(Hu.hasAnimatedSinceResize=!1,this.nodes.forEach(E2)))})}h&&this.root.registerSharedNode(h,this),this.options.animate!==!1&&p&&(h||g)&&this.addEventListener("didUpdate",({delta:y,hasLayoutChanged:w,hasRelativeLayoutChanged:E,layout:A})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const O=this.options.transition||p.getDefaultTransition()||mj,{onLayoutAnimationStart:I,onLayoutAnimationComplete:B}=p.getProps(),T=!this.targetLayout||!gA(this.targetLayout,A),N=!w&&E;if(this.options.layoutRoot||this.resumeFrom||N||w&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const C={...xg(O,"layout"),onPlay:I,onComplete:B};(p.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C),this.setAnimationOrigin(y,N)}else w||E2(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=A})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),mr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(uj),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&pA(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const w=this.path[y];w.shouldResetTransform=!0,w.updateScroll("snapshot"),w.options.layoutRoot&&w.willUpdate(!1)}const{layoutId:h,layout:g}=this.options;if(h===void 0&&!g)return;const p=this.getTransformTemplate();this.prevTransformTemplateValue=p?p(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(w2);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(v2);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(oj),this.nodes.forEach(nj),this.nodes.forEach(ij)):this.nodes.forEach(v2),this.clearAllSnapshots();const h=jn.now();tn.delta=ws(0,1e3/60,h-tn.timestamp),tn.timestamp=h,tn.isProcessing=!0,kf.update.process(tn),kf.preRender.process(tn),kf.render.process(tn),tn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bg.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(aj),this.sharedNodes.forEach(dj)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!wn(this.snapshot.measuredBox.x)&&!wn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let g=0;g<this.path.length;g++)this.path[g].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=It(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:h}=this.options;h&&h.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let h=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(h=!1),h&&this.instance){const g=i(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:g,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:g}}}resetTransform(){if(!r)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,h=this.projectionDelta&&!mA(this.projectionDelta),g=this.getTransformTemplate(),p=g?g(this.latestValues,""):void 0,y=p!==this.prevTransformTemplateValue;c&&this.instance&&(h||Lr(this.latestValues)||y)&&(r(this.instance,p),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const h=this.measurePageBox();let g=this.removeElementScroll(h);return c&&(g=this.removeTransform(g)),gj(g),{animationId:this.root.animationId,measuredBox:h,layoutBox:g,latestValues:{},source:this.id}}measurePageBox(){var p;const{visualElement:c}=this.options;if(!c)return It();const h=c.measureViewportBox();if(!(((p=this.scroll)==null?void 0:p.wasRoot)||this.path.some(pj))){const{scroll:y}=this.root;y&&(qa(h.x,y.offset.x),qa(h.y,y.offset.y))}return h}removeElementScroll(c){var g;const h=It();if(ii(h,c),(g=this.scroll)!=null&&g.wasRoot)return h;for(let p=0;p<this.path.length;p++){const y=this.path[p],{scroll:w,options:E}=y;y!==this.root&&w&&E.layoutScroll&&(w.wasRoot&&ii(h,c),qa(h.x,w.offset.x),qa(h.y,w.offset.y))}return h}applyTransform(c,h=!1){const g=It();ii(g,c);for(let p=0;p<this.path.length;p++){const y=this.path[p];!h&&y.options.layoutScroll&&y.scroll&&y!==y.root&&Xa(g,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Lr(y.latestValues)&&Xa(g,y.latestValues)}return Lr(this.latestValues)&&Xa(g,this.latestValues),g}removeTransform(c){const h=It();ii(h,c);for(let g=0;g<this.path.length;g++){const p=this.path[g];if(!p.instance||!Lr(p.latestValues))continue;A1(p.latestValues)&&p.updateSnapshot();const y=It(),w=p.measurePageBox();ii(y,w),m2(h,p.latestValues,p.snapshot?p.snapshot.layoutBox:void 0,y)}return Lr(this.latestValues)&&m2(h,this.latestValues),h}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==tn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var E;const h=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=h.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=h.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=h.isSharedProjectionDirty);const g=!!this.resumingFrom||this!==h;if(!(c||g&&this.isSharedProjectionDirty||this.isProjectionDirty||(E=this.parent)!=null&&E.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:w}=this.options;if(!(!this.layout||!(y||w))){if(this.resolvedRelativeTargetAt=tn.timestamp,!this.targetDelta&&!this.relativeTarget){const A=this.getClosestProjectingParent();A&&A.layout&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),Ll(this.relativeTargetOrigin,this.layout.layoutBox,A.layout.layoutBox),ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=It(),this.targetWithTransforms=It()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),EO(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ii(this.target,this.layout.layoutBox),K3(this.target,this.targetDelta)):ii(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const A=this.getClosestProjectingParent();A&&!!A.resumingFrom==!!this.resumingFrom&&!A.options.layoutScroll&&A.target&&this.animationProgress!==1?(this.relativeParent=A,this.forceRelativeParentToResolveTarget(),this.relativeTarget=It(),this.relativeTargetOrigin=It(),Ll(this.relativeTargetOrigin,this.target,A.target),ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||A1(this.parent.latestValues)||Z3(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var O;const c=this.getLead(),h=!!this.resumingFrom||this!==c;let g=!0;if((this.isProjectionDirty||(O=this.parent)!=null&&O.isProjectionDirty)&&(g=!1),h&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(g=!1),this.resolvedRelativeTargetAt===tn.timestamp&&(g=!1),g)return;const{layout:p,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(p||y))return;ii(this.layoutCorrected,this.layout.layoutBox);const w=this.treeScale.x,E=this.treeScale.y;OR(this.layoutCorrected,this.treeScale,this.path,h),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=It());const{target:A}=c;if(!A){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(d2(this.prevProjectionDelta.x,this.projectionDelta.x),d2(this.prevProjectionDelta.y,this.projectionDelta.y)),kl(this.projectionDelta,this.layoutCorrected,A,this.latestValues),(this.treeScale.x!==w||this.treeScale.y!==E||!b2(this.projectionDelta.x,this.prevProjectionDelta.x)||!b2(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",A))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var h;if((h=this.options.visualElement)==null||h.scheduleRender(),c){const g=this.getStack();g&&g.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wa(),this.projectionDelta=Wa(),this.projectionDeltaWithTransform=Wa()}setAnimationOrigin(c,h=!1){const g=this.snapshot,p=g?g.latestValues:{},y={...this.latestValues},w=Wa();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!h;const E=It(),A=g?g.source:void 0,O=this.layout?this.layout.source:void 0,I=A!==O,B=this.getStack(),T=!B||B.members.length<=1,N=!!(I&&!T&&this.options.crossfade===!0&&!this.path.some(fj));this.animationProgress=0;let C;this.mixTargetDelta=k=>{const z=k/1e3;A2(w.x,c.x,z),A2(w.y,c.y,z),this.setTargetDelta(w),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ll(E,this.layout.layoutBox,this.relativeParent.layout.layoutBox),hj(this.relativeTarget,this.relativeTargetOrigin,E,z),C&&QO(this.relativeTarget,C)&&(this.isProjectionDirty=!1),C||(C=It()),ii(C,this.relativeTarget)),I&&(this.animationValues=y,YO(y,p,this.latestValues,z,N,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=z},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){var h,g,p;this.notifyListeners("animationStart"),(h=this.currentAnimation)==null||h.stop(),(p=(g=this.resumingFrom)==null?void 0:g.currentAnimation)==null||p.stop(),this.pendingAnimation&&(mr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pt.update(()=>{Hu.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=wo(0)),this.currentAnimation=FO(this.motionValue,[0,1e3],{...c,velocity:0,isSync:!0,onUpdate:y=>{this.mixTargetDelta(y),c.onUpdate&&c.onUpdate(y)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(ej),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:h,target:g,layout:p,latestValues:y}=c;if(!(!h||!g||!p)){if(this!==c&&this.layout&&p&&yA(this.options.animationType,this.layout.layoutBox,p.layoutBox)){g=this.target||It();const w=wn(this.layout.layoutBox.x);g.x.min=c.target.x.min,g.x.max=g.x.min+w;const E=wn(this.layout.layoutBox.y);g.y.min=c.target.y.min,g.y.max=g.y.min+E}ii(h,g),Xa(h,y),kl(this.projectionDeltaWithTransform,this.layoutCorrected,h,y)}}registerSharedNode(c,h){this.sharedNodes.has(c)||this.sharedNodes.set(c,new $O),this.sharedNodes.get(c).add(h);const p=h.options.initialPromotionConfig;h.promote({transition:p?p.transition:void 0,preserveFollowOpacity:p&&p.shouldPreserveFollowOpacity?p.shouldPreserveFollowOpacity(h):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var h;const{layoutId:c}=this.options;return c?((h=this.getStack())==null?void 0:h.lead)||this:this}getPrevLead(){var h;const{layoutId:c}=this.options;return c?(h=this.getStack())==null?void 0:h.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:h,preserveFollowOpacity:g}={}){const p=this.getStack();p&&p.promote(this,g),c&&(this.projectionDelta=void 0,this.needsReset=!0),h&&this.setOptions({transition:h})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let h=!1;const{latestValues:g}=c;if((g.z||g.rotate||g.rotateX||g.rotateY||g.rotateZ||g.skewX||g.skewY)&&(h=!0),!h)return;const p={};g.z&&qf("z",c,p,this.animationValues);for(let y=0;y<Yf.length;y++)qf(`rotate${Yf[y]}`,c,p,this.animationValues),qf(`skew${Yf[y]}`,c,p,this.animationValues);c.render();for(const y in p)c.setStaticValue(y,p[y]),this.animationValues&&(this.animationValues[y]=p[y]);c.scheduleRender()}applyProjectionStyles(c,h){if(!this.instance||this.isSVG)return;if(!this.isVisible){c.visibility="hidden";return}const g=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,c.visibility="",c.opacity="",c.pointerEvents=zu(h==null?void 0:h.pointerEvents)||"",c.transform=g?g(this.latestValues,""):"none";return}const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){this.options.layoutId&&(c.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,c.pointerEvents=zu(h==null?void 0:h.pointerEvents)||""),this.hasProjected&&!Lr(this.latestValues)&&(c.transform=g?g({},""):"none",this.hasProjected=!1);return}c.visibility="";const y=p.animationValues||p.latestValues;this.applyTransformsToTarget();let w=JO(this.projectionDeltaWithTransform,this.treeScale,y);g&&(w=g(y,w)),c.transform=w;const{x:E,y:A}=this.projectionDelta;c.transformOrigin=`${E.origin*100}% ${A.origin*100}% 0`,p.animationValues?c.opacity=p===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:c.opacity=p===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const O in oc){if(y[O]===void 0)continue;const{correct:I,applyTo:B,isCSSVariable:T}=oc[O],N=w==="none"?y[O]:I(y[O],p);if(B){const C=B.length;for(let k=0;k<C;k++)c[B[k]]=N}else T?this.options.visualElement.renderState.vars[O]=N:c[O]=N}this.options.layoutId&&(c.pointerEvents=p===this?zu(h==null?void 0:h.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var h;return(h=c.currentAnimation)==null?void 0:h.stop()}),this.root.nodes.forEach(w2),this.root.sharedNodes.clear()}}}function nj(e){e.updateLayout()}function ij(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=e.layout,{animationType:a}=e.options,c=t.source!==e.layout.source;a==="size"?si(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],A=wn(E);E.min=i[w].min,E.max=E.min+A}):yA(a,t.layoutBox,i)&&si(w=>{const E=c?t.measuredBox[w]:t.layoutBox[w],A=wn(i[w]);E.max=E.min+A,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[w].max=e.relativeTarget[w].min+A)});const h=Wa();kl(h,i,t.layoutBox);const g=Wa();c?kl(g,e.applyTransform(r,!0),t.measuredBox):kl(g,i,t.layoutBox);const p=!mA(h);let y=!1;if(!e.resumeFrom){const w=e.getClosestProjectingParent();if(w&&!w.resumeFrom){const{snapshot:E,layout:A}=w;if(E&&A){const O=It();Ll(O,t.layoutBox,E.layoutBox);const I=It();Ll(I,i,A.layoutBox),gA(O,I)||(y=!0),w.options.layoutRoot&&(e.relativeTarget=I,e.relativeTargetOrigin=O,e.relativeParent=w)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:g,layoutDelta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:y})}else if(e.isLead()){const{onExitComplete:i}=e.options;i&&i()}e.options.transition=void 0}function sj(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function rj(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function aj(e){e.clearSnapshot()}function w2(e){e.clearMeasurements()}function v2(e){e.isLayoutDirty=!1}function oj(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function E2(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function lj(e){e.resolveTargetDelta()}function cj(e){e.calcProjection()}function uj(e){e.resetSkewAndRotation()}function dj(e){e.removeLeadSnapshot()}function A2(e,t,n){e.translate=wt(t.translate,0,n),e.scale=wt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function S2(e,t,n,i){e.min=wt(t.min,n.min,i),e.max=wt(t.max,n.max,i)}function hj(e,t,n,i){S2(e.x,t.x,n.x,i),S2(e.y,t.y,n.y,i)}function fj(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const mj={duration:.45,ease:[.4,0,.1,1]},C2=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),T2=C2("applewebkit/")&&!C2("chrome/")?Math.round:hi;function N2(e){e.min=T2(e.min),e.max=T2(e.max)}function gj(e){N2(e.x),N2(e.y)}function yA(e,t,n){return e==="position"||e==="preserve-aspect"&&!vO(y2(t),y2(n),.2)}function pj(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const xj=xA({attachResizeListener:(e,t)=>cc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xf={current:void 0},bA=xA({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Xf.current){const e=new xj({});e.mount(window),e.setOptions({layoutScroll:!0}),Xf.current=e}return Xf.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),yj={pan:{Feature:LO},drag:{Feature:kO,ProjectionNode:bA,MeasureLayout:dA}};function _2(e,t,n){const{props:i}=e;e.animationState&&i.whileHover&&e.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,a=i[r];a&&pt.postRender(()=>a(t,Pc(t)))}class bj extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=VD(t,(n,i)=>(_2(this.node,i,"Start"),r=>_2(this.node,r,"End"))))}unmount(){}}class wj extends vr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kc(cc(this.node.current,"focus",()=>this.onFocus()),cc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function M2(e,t,n){const{props:i}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&i.whileTap&&e.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),a=i[r];a&&pt.postRender(()=>a(t,Pc(t)))}class vj extends vr{mount(){const{current:t}=this.node;t&&(this.unmount=YD(t,(n,i)=>(M2(this.node,i,"Start"),(r,{success:a})=>M2(this.node,r,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const I1=new WeakMap,Wf=new WeakMap,Ej=e=>{const t=I1.get(e.target);t&&t(e)},Aj=e=>{e.forEach(Ej)};function Sj({root:e,...t}){const n=e||document;Wf.has(n)||Wf.set(n,{});const i=Wf.get(n),r=JSON.stringify(t);return i[r]||(i[r]=new IntersectionObserver(Aj,{root:e,...t})),i[r]}function Cj(e,t,n){const i=Sj(t);return I1.set(e,n),i.observe(e),()=>{I1.delete(e),i.unobserve(e)}}const Tj={some:0,all:1};class Nj extends vr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:a}=t,c={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Tj[r]},h=g=>{const{isIntersecting:p}=g;if(this.isInView===p||(this.isInView=p,a&&!p&&this.hasEnteredView))return;p&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",p);const{onViewportEnter:y,onViewportLeave:w}=this.node.getProps(),E=p?y:w;E&&E(g)};return Cj(this.node.current,c,h)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(_j(t,n))&&this.startObserver()}unmount(){}}function _j({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Mj={inView:{Feature:Nj},tap:{Feature:vj},focus:{Feature:wj},hover:{Feature:bj}},Ij={layout:{ProjectionNode:bA,MeasureLayout:dA}},Dj={...gO,...Mj,...yj,...Ij},zn=IR(Dj,HR);function Rj(){const[e,t]=j.useState([]),[n,i]=j.useState(""),[r,a]=j.useState(null),[c,h]=j.useState(!1),[g,p]=j.useState({showCompany:!0,showTime:!0,autoHide:!0,hideDelay:5e3,backgroundColor:"#1e40af",textColor:"#ffffff"});j.useEffect(()=>{y()},[]),j.useEffect(()=>{if(n){const A=ue.channel("check-ins").on("postgres_changes",{event:"UPDATE",schema:"public",table:"attendees",filter:`event_id=eq.${n}`},O=>{O.new.checked_in&&!O.old.checked_in&&a({id:O.new.id,name:O.new.name,company:O.new.company,check_in_time:O.new.check_in_time})}).subscribe();return()=>{A.unsubscribe()}}},[n]),j.useEffect(()=>{if(r&&g.autoHide){const A=setTimeout(()=>{a(null)},g.hideDelay);return()=>clearTimeout(A)}},[r,g.autoHide,g.hideDelay]);const y=async()=>{try{const{data:A,error:O}=await ue.from("events").select("id, name, company:companies(name)").order("created_at",{ascending:!1});if(O)throw O;if(A){const I=A.map(B=>({...B,company:Array.isArray(B.company)?B.company[0]:B.company}));t(I)}}catch(A){console.error("Error fetching events:",A)}},w=()=>{c?document.exitFullscreen():document.documentElement.requestFullscreen(),h(!c)},E=()=>m.jsx("div",{className:"h-full flex items-center justify-center relative",style:{backgroundColor:g.backgroundColor,color:g.textColor},children:m.jsx(j3,{children:r?m.jsx(zn.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",duration:.8},className:"text-center",children:m.jsxs(zn.div,{initial:{y:20},animate:{y:0},className:"mb-8",children:[m.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:"Welcome!"}),m.jsx("div",{className:"text-4xl md:text-6xl font-semibold mb-2",children:r.name}),g.showCompany&&r.company&&m.jsx("div",{className:"text-2xl md:text-4xl opacity-80",children:r.company}),g.showTime&&m.jsx("div",{className:"text-xl md:text-2xl opacity-60 mt-4",children:new Date(r.check_in_time).toLocaleTimeString()})]})}):m.jsxs(zn.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[m.jsx(fn,{className:"h-32 w-32 mx-auto mb-8 opacity-50"}),m.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Welcome to the Event"}),m.jsx("p",{className:"text-xl md:text-2xl opacity-80",children:"Waiting for check-ins..."})]})})});return c?m.jsxs("div",{className:"fixed inset-0 z-50",children:[m.jsx(E,{}),m.jsx("button",{onClick:w,className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-colors",children:"Exit Fullscreen"})]}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome Monitor"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Display latest check-ins on external monitor"})]}),m.jsxs("button",{onClick:w,disabled:!n,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(W6,{className:"h-5 w-5 mr-2"}),"Fullscreen"]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(xE,{className:"h-6 w-6 mr-2"}),"Settings"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event"}),m.jsxs("select",{value:n,onChange:A=>i(A.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"Select an event"}),e.map(A=>m.jsxs("option",{value:A.id,children:[A.name," (",A.company.name,")"]},A.id))]})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:g.showCompany,onChange:A=>p({...g,showCompany:A.target.checked}),className:"mr-2"}),m.jsx("span",{className:"text-sm",children:"Show Company"})]}),m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:g.showTime,onChange:A=>p({...g,showTime:A.target.checked}),className:"mr-2"}),m.jsx("span",{className:"text-sm",children:"Show Check-in Time"})]}),m.jsxs("label",{className:"flex items-center",children:[m.jsx("input",{type:"checkbox",checked:g.autoHide,onChange:A=>p({...g,autoHide:A.target.checked}),className:"mr-2"}),m.jsx("span",{className:"text-sm",children:"Auto Hide"})]})]}),g.autoHide&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hide Delay (seconds)"}),m.jsx("input",{type:"number",value:g.hideDelay/1e3,onChange:A=>p({...g,hideDelay:parseInt(A.target.value)*1e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"30"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),m.jsx("input",{type:"color",value:g.backgroundColor,onChange:A=>p({...g,backgroundColor:A.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),m.jsx("input",{type:"color",value:g.textColor,onChange:A=>p({...g,textColor:A.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]})]}),m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(ec,{className:"h-6 w-6 mr-2"}),"Preview"]}),m.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:n?m.jsx(E,{}):m.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:m.jsxs("div",{className:"text-center",children:[m.jsx(ec,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"Select an event to see preview"})]})})}),m.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[m.jsx("p",{children:"• This preview shows how the welcome screen will appear"}),m.jsx("p",{children:'• Click "Fullscreen" to display on external monitor'}),m.jsx("p",{children:"• New check-ins will automatically appear in real-time"})]})]})})]})]})}function Oj({userCompany:e}){const[t,n]=j.useState([]),[i,r]=j.useState(""),[a,c]=j.useState([]),[h,g]=j.useState(!1),[p,y]=j.useState(null),[w,E]=j.useState([]),[A,O]=j.useState(""),[I,B]=j.useState(!1);j.useEffect(()=>{T()},[]),j.useEffect(()=>{i&&N()},[i]);const T=async()=>{try{let F=ue.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(F=F.eq("company_id",e.company_id));const{data:U,error:Y}=await F.order("created_at",{ascending:!1});if(Y)throw Y;const J=(U==null?void 0:U.map(ee=>({...ee,company:Array.isArray(ee.company)?ee.company[0]:ee.company})))||[];n(J),e&&J&&J.length>0&&r(J[0].id)}catch(F){oe.error("Error fetching events: "+F.message)}},N=async()=>{try{const{data:F,error:U}=await ue.from("attendees").select("id, name, company").eq("event_id",i).eq("checked_in",!0);if(U)throw U;c(F)}catch(F){oe.error("Error fetching attendees: "+F.message)}},C=()=>{if(a.length===0){oe.error("No checked-in attendees available for draw");return}const F=a.filter(ee=>!w.find(de=>de.id===ee.id));if(F.length===0){oe.error("All attendees have already won!");return}g(!0),y(null);let U=0;const Y=30,J=setInterval(()=>{const ee=F[Math.floor(Math.random()*F.length)];if(O(ee.name),U++,U>=Y){clearInterval(J);const de=F[Math.floor(Math.random()*F.length)];y(de),O(de.name),g(!1),oe.success(`🎉 ${de.name} wins!`)}},100)},k=()=>{p&&(E([...w,p]),y(null),O(""))},z=()=>{y(null),O(""),g(!1),E([])},D=()=>{I?document.exitFullscreen():document.documentElement.requestFullscreen(),B(!I)},L=()=>m.jsxs("div",{className:"h-full bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 flex items-center justify-center relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0",children:[...Array(20)].map((F,U)=>m.jsx(zn.div,{className:"absolute w-2 h-2 bg-white rounded-full opacity-30",animate:{x:[0,Math.random()*100-50],y:[0,Math.random()*100-50],scale:[0,1,0]},transition:{duration:3,repeat:1/0,delay:Math.random()*2},style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`}},U))}),m.jsx("div",{className:"text-center text-white z-10",children:m.jsxs(j3,{mode:"wait",children:[!h&&!p&&m.jsxs(zn.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"space-y-8",children:[m.jsx(za,{className:"h-32 w-32 mx-auto mb-8"}),m.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:"Lucky Draw"}),m.jsx("p",{className:"text-2xl md:text-3xl opacity-80",children:"Ready to pick a winner?"})]}),h&&m.jsxs(zn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-8",children:[m.jsx(zn.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:m.jsx(u5,{className:"h-24 w-24 mx-auto mb-8"})}),m.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-8",children:"Drawing..."}),m.jsx(zn.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-3xl md:text-5xl font-semibold bg-white bg-opacity-20 rounded-lg p-6",children:A},A)]}),p&&m.jsxs(zn.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{opacity:0},className:"space-y-8",children:[m.jsx(zn.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:m.jsx(Qx,{className:"h-32 w-32 mx-auto mb-8 text-yellow-300"})}),m.jsx(zn.h1,{className:"text-4xl md:text-6xl font-bold mb-4",animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},children:"🎉 WINNER! 🎉"}),m.jsx(zn.div,{initial:{y:20},animate:{y:0},className:"text-4xl md:text-6xl font-bold bg-white bg-opacity-20 rounded-lg p-8",children:p.name}),p.company&&m.jsx(zn.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-2xl md:text-3xl opacity-80",children:p.company})]})]})})]});return I?m.jsxs("div",{className:"fixed inset-0 z-50",children:[m.jsx(L,{}),m.jsxs("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-4",children:[!h&&!p&&m.jsx("button",{onClick:C,className:"bg-white text-purple-600 px-8 py-4 rounded-lg font-bold text-xl hover:bg-gray-100 transition-colors",children:"Start Draw"}),p&&m.jsxs(m.Fragment,{children:[m.jsx("button",{onClick:k,className:"bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-green-700 transition-colors",children:"Confirm Winner"}),m.jsx("button",{onClick:C,className:"bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-blue-700 transition-colors",children:"Draw Again"})]}),m.jsx("button",{onClick:D,className:"bg-gray-600 text-white px-6 py-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Exit"})]})]}):m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Lucky Draw"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Random winner selection from checked-in attendees"})]}),m.jsxs("button",{onClick:D,disabled:!i,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(za,{className:"h-5 w-5 mr-2"}),"Fullscreen Draw"]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(za,{className:"h-6 w-6 mr-2"}),"Draw Controls"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?m.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):m.jsxs("select",{value:i,onChange:F=>r(F.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[!e&&m.jsx("option",{value:"",children:"Select an event"}),t.map(F=>m.jsx("option",{value:F.id,children:e?F.name:`${F.name} (${F.company.name})`},F.id))]})]}),i&&m.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[m.jsxs("div",{className:"flex items-center text-purple-700 mb-2",children:[m.jsx(fn,{className:"h-5 w-5 mr-2"}),m.jsx("span",{className:"font-medium",children:"Eligible Participants"})]}),m.jsx("div",{className:"text-2xl font-bold text-purple-900",children:a.filter(F=>!w.find(U=>U.id===F.id)).length}),m.jsxs("div",{className:"text-sm text-purple-600",children:[a.length," total checked-in • ",w.length," already won"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("button",{onClick:C,disabled:!i||h||a.length===0,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[m.jsx(pE,{className:"h-5 w-5 mr-2"}),h?"Drawing...":"Start Lucky Draw"]}),p&&m.jsx("button",{onClick:k,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Confirm Winner"}),m.jsxs("button",{onClick:z,className:"w-full bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors flex items-center justify-center",children:[m.jsx(n5,{className:"h-4 w-4 mr-2"}),"Reset All"]})]})]})]}),m.jsxs("div",{className:"lg:col-span-2",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Preview"}),m.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:i?m.jsx(L,{}):m.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:m.jsxs("div",{className:"text-center",children:[m.jsx(za,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"Select an event to see preview"})]})})})]}),w.length>0&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(Qx,{className:"h-6 w-6 mr-2 text-yellow-500"}),"Previous Winners"]}),m.jsx("div",{className:"space-y-2",children:w.map((F,U)=>m.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[m.jsx("div",{className:"w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:U+1}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900",children:F.name}),F.company&&m.jsx("div",{className:"text-sm text-gray-600",children:F.company})]})]},F.id))})]})]})]})]})}function jj({userCompany:e}){const[t,n]=j.useState([]),[i,r]=j.useState(""),[a,c]=j.useState([]),[h,g]=j.useState(0),[p,y]=j.useState(!1),[w,E]=j.useState(""),[A,O]=j.useState(!1);j.useEffect(()=>{I()},[]),j.useEffect(()=>{i&&(B(),T())},[i]),j.useEffect(()=>{let D;return p&&a.length>0&&(D=setInterval(()=>{g(L=>(L+1)%a.length)},3e3)),()=>clearInterval(D)},[p,a.length]);const I=async()=>{try{let D=ue.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(D=D.eq("company_id",e.company_id));const{data:L,error:F}=await D.order("created_at",{ascending:!1});if(F)throw F;const U=L.map(Y=>({...Y,company:Array.isArray(Y.company)?Y.company[0]:Y.company}));n(U),e&&U&&U.length>0&&r(U[0].id)}catch(D){oe.error("Error fetching events: "+D.message)}},B=async()=>{try{O(!0);const{data:D,error:L}=await ue.from("gallery_photos").select("*").eq("event_id",i).order("created_at",{ascending:!1});if(L)throw L;c(D)}catch(D){oe.error("Error fetching photos: "+D.message)}finally{O(!1)}},T=async()=>{try{const D=`${window.location.origin}/public/gallery/${i}`,L=await Xi.toDataURL(D);E(L)}catch(D){console.error("Error generating QR code:",D)}},N=async D=>{if(confirm("Are you sure you want to delete this photo?"))try{const{error:L}=await ue.from("gallery_photos").delete().eq("id",D);if(L)throw L;oe.success("Photo deleted successfully"),B()}catch(L){oe.error("Error deleting photo: "+L.message)}},C=()=>{const D=[...a].sort(()=>Math.random()-.5);c(D),g(0)},k=(D,L)=>{const F=document.createElement("a");F.href=D,F.download=`gallery-photo-${L+1}.jpg`,F.click()},z=()=>{var D,L,F;return m.jsx("div",{className:"h-full bg-black flex items-center justify-center relative",children:a.length>0?m.jsxs("div",{className:"relative w-full h-full",children:[m.jsx("img",{src:(D=a[h])==null?void 0:D.photo_url,alt:"Gallery",className:"w-full h-full object-contain"}),m.jsxs("div",{className:"absolute bottom-8 left-8 text-white bg-black bg-opacity-50 rounded-lg p-4",children:[m.jsx("div",{className:"text-lg font-semibold",children:((L=a[h])==null?void 0:L.attendee_name)||"Anonymous"}),m.jsx("div",{className:"text-sm opacity-80",children:new Date((F=a[h])==null?void 0:F.created_at).toLocaleString()})]}),m.jsxs("div",{className:"absolute bottom-8 right-8 text-white bg-black bg-opacity-50 rounded-lg px-4 py-2",children:[h+1," / ",a.length]})]}):m.jsxs("div",{className:"text-white text-center",children:[m.jsx(fs,{className:"h-24 w-24 mx-auto mb-4 opacity-50"}),m.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Photos Yet"}),m.jsx("p",{className:"opacity-80",children:"Waiting for attendees to upload photos..."})]})})};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Event Gallery"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage photo uploads and slideshow display"})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs("button",{onClick:C,disabled:a.length===0,className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center disabled:opacity-50",children:[m.jsx(yE,{className:"h-5 w-5 mr-2"}),"Shuffle"]}),m.jsx("button",{onClick:()=>y(!p),disabled:a.length===0,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:p?"Stop Slideshow":"Start Slideshow"})]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(dr,{className:"h-6 w-6 mr-2"}),"Gallery Setup"]}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?m.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):m.jsxs("select",{value:i,onChange:D=>r(D.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&m.jsx("option",{value:"",children:"Select an event"}),t.map(D=>m.jsx("option",{value:D.id,children:e?D.name:`${D.name} (${D.company.name})`},D.id))]})]}),i&&w&&m.jsxs("div",{className:"text-center",children:[m.jsx("h3",{className:"font-medium mb-2",children:"Upload QR Code"}),m.jsx("img",{src:w,alt:"Gallery QR Code",className:"w-48 h-48 mx-auto border rounded-lg"}),m.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Attendees scan this to upload photos"}),m.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/public/gallery/${i}`),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm",children:"Copy Upload Link"})]}),i&&m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[m.jsx("div",{className:"text-blue-700 font-medium mb-1",children:"Gallery Stats"}),m.jsx("div",{className:"text-2xl font-bold text-blue-900",children:a.length}),m.jsx("div",{className:"text-sm text-blue-600",children:"Photos uploaded"})]})]})]}),m.jsxs("div",{className:"lg:col-span-2",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(fs,{className:"h-6 w-6 mr-2"}),"Gallery Display"]}),m.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4",children:i?m.jsx(z,{}):m.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:m.jsxs("div",{className:"text-center",children:[m.jsx(fs,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"Select an event to see gallery"})]})})}),a.length>0&&m.jsxs("div",{className:"flex justify-center space-x-2",children:[m.jsx("button",{onClick:()=>g(Math.max(0,h-1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Previous"}),m.jsxs("span",{className:"px-3 py-1 bg-gray-100 rounded",children:[h+1," / ",a.length]}),m.jsx("button",{onClick:()=>g(Math.min(a.length-1,h+1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Next"})]})]}),a.length>0&&m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[m.jsx("h2",{className:"text-xl font-semibold mb-4",children:"All Photos"}),A?m.jsx("div",{className:"flex items-center justify-center h-32",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-4",children:a.map((D,L)=>m.jsxs("div",{className:"relative group",children:[m.jsx("img",{src:D.photo_url,alt:"Gallery",className:"w-full h-24 object-cover rounded-lg cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>g(L)}),m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:m.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex space-x-2",children:[m.jsx("button",{onClick:()=>k(D.photo_url,L),className:"text-white hover:text-blue-300 transition-colors",children:m.jsx(gE,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>N(D.id),className:"text-white hover:text-red-300 transition-colors",children:m.jsx(hr,{className:"h-4 w-4"})})]})}),D.attendee_name&&m.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1 rounded-b-lg truncate",children:D.attendee_name})]},D.id))})]})]})]})]})}function kj({userCompany:e}){const[t,n]=j.useState([]),[i,r]=j.useState(""),[a,c]=j.useState([]),[h,g]=j.useState([]),[p,y]=j.useState(!1),[w,E]=j.useState(null),[A,O]=j.useState(null),[I,B]=j.useState({table_number:1,table_type:"Regular",capacity:8,quantity:1}),T=["VVIP","VIP","Regular","Staff"],N={VVIP:"bg-purple-500",VIP:"bg-yellow-500",Regular:"bg-blue-500",Staff:"bg-gray-500"};j.useEffect(()=>{C()},[]),j.useEffect(()=>{i&&(k(),z())},[i]);const C=async()=>{try{let W=ue.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(W=W.eq("company_id",e.company_id));const{data:ae,error:$}=await W.order("created_at",{ascending:!1});if($)throw $;const fe=(ae==null?void 0:ae.map(Ae=>({...Ae,company:Array.isArray(Ae.company)?Ae.company[0]:Ae.company})))||[];n(fe),e&&fe&&fe.length>0&&r(fe[0].id)}catch(W){oe.error("Error fetching events: "+W.message)}},k=async()=>{try{const{data:W,error:ae}=await ue.from("tables").select("*").eq("event_id",i).order("table_number");if(ae)throw ae;c(W)}catch(W){oe.error("Error fetching tables: "+W.message)}},z=async()=>{try{const{data:W,error:ae}=await ue.from("attendees").select("id, name, company, table_assignment").eq("event_id",i);if(ae)throw ae;g(W)}catch(W){oe.error("Error fetching attendees: "+W.message)}},D=async W=>{W.preventDefault();try{if(w){const{error:ae}=await ue.from("tables").update({table_number:I.table_number,table_type:I.table_type,capacity:I.capacity}).eq("id",w.id);if(ae)throw ae;oe.success("Table updated successfully")}else{const ae=[],$=I.table_number;for(let Ae=0;Ae<I.quantity;Ae++)ae.push({event_id:i,table_number:$+Ae,table_type:I.table_type,capacity:I.capacity});const{error:fe}=await ue.from("tables").insert(ae);if(fe)throw fe;oe.success(`${I.quantity} table(s) created successfully`)}U(),k()}catch(ae){oe.error("Error saving table: "+ae.message)}},L=async W=>{var ae;if(confirm("Are you sure you want to delete this table? Attendees will be unassigned."))try{await ue.from("attendees").update({table_assignment:null}).eq("table_assignment",(ae=a.find(fe=>fe.id===W))==null?void 0:ae.table_number.toString());const{error:$}=await ue.from("tables").delete().eq("id",W);if($)throw $;oe.success("Table deleted successfully"),k(),z()}catch($){oe.error("Error deleting table: "+$.message)}},F=async(W,ae)=>{try{const{error:$}=await ue.from("attendees").update({table_assignment:(ae==null?void 0:ae.toString())||null}).eq("id",W);if($)throw $;z()}catch($){oe.error("Error assigning attendee: "+$.message)}},U=()=>{B({table_number:Math.max(...a.map(W=>W.table_number),0)+1,table_type:"Regular",capacity:8,quantity:1}),E(null),y(!1)},Y=W=>{E(W),B({table_number:W.table_number,table_type:W.table_type,capacity:W.capacity,quantity:1}),y(!0)},J=W=>h.filter(ae=>ae.table_assignment===W.toString()),ee=h.filter(W=>!W.table_assignment),de=async()=>{if(confirm("This will randomly assign all unassigned attendees to available regular tables. Continue?"))try{const W=a.filter(Te=>Te.table_type==="Regular"),ae=[];if(W.forEach(Te=>{const mn=J(Te.table_number),xe=Te.capacity-mn.length;xe>0&&ae.push({tableNumber:Te.table_number,availableSeats:xe})}),ae.length===0){oe.error("No available seats in regular tables");return}const $=[...ee].sort(()=>Math.random()-.5),fe=[];let Ae=0,Qe=0;for(const Te of $){if(Ae>=ae.length)break;const mn=ae[Ae];fe.push({attendeeId:Te.id,tableNumber:mn.tableNumber}),Qe++,Qe>=mn.availableSeats&&(Ae++,Qe=0)}for(const Te of fe)await ue.from("attendees").update({table_assignment:Te.tableNumber.toString()}).eq("id",Te.attendeeId);oe.success(`${fe.length} attendees randomly assigned to regular tables`),z()}catch(W){oe.error("Error randomizing seating: "+W.message)}},be=(W,ae)=>{O(ae),W.dataTransfer.effectAllowed="move"},Z=W=>{W.preventDefault(),W.dataTransfer.dropEffect="move"},ie=async(W,ae)=>{if(W.preventDefault(),!A)return;const $=a.find(Ae=>Ae.table_number===ae);if(!$)return;if(J(ae).length>=$.capacity){oe.error("Table is full");return}await F(A.id,ae),O(null)},se=async W=>{W.preventDefault(),A&&(await F(A.id,null),O(null))};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seating Arrangement"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage tables and assign attendees"})]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs("button",{onClick:de,disabled:!i||ee.length===0,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:[m.jsx(yE,{className:"h-5 w-5 mr-2"}),"Randomize Seating"]}),m.jsxs("button",{onClick:()=>y(!0),disabled:!i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[m.jsx(tc,{className:"h-5 w-5 mr-2"}),"Add Table"]})]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?m.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):m.jsxs("select",{value:i,onChange:W=>r(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&m.jsx("option",{value:"",children:"Choose an event"}),t.map(W=>m.jsx("option",{value:W.id,children:e?W.name:`${W.name} (${W.company.name})`},W.id))]})]}),i&&m.jsx("div",{className:"flex items-end",children:m.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[m.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Seating Summary"}),m.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[a.reduce((W,ae)=>W+ae.capacity,0)," seats"]}),m.jsxs("div",{className:"text-sm text-blue-600",children:[a.length," tables • ",h.filter(W=>W.table_assignment).length," assigned"]})]})})]})}),i&&m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(ea,{className:"h-6 w-6 mr-2"}),"Table Layout"]}),m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6",children:a.map(W=>{const ae=J(W.table_number);return m.jsxs("div",{className:`relative p-4 rounded-lg text-white ${N[W.table_type]} hover:opacity-80 transition-opacity`,onDragOver:Z,onDrop:$=>ie($,W.table_number),children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"font-bold text-lg",children:["Table ",W.table_number]}),m.jsx("div",{className:"text-sm opacity-90",children:W.table_type})]}),m.jsxs("div",{className:"flex space-x-1",children:[m.jsx("button",{onClick:()=>Y(W),className:"text-white hover:text-gray-200 transition-colors",children:m.jsx(lh,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>L(W.id),className:"text-white hover:text-red-200 transition-colors",children:m.jsx(hr,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"text-sm",children:[ae.length," / ",W.capacity," seats"]}),m.jsxs("div",{className:"mt-2 space-y-1",children:[ae.slice(0,3).map($=>m.jsx("div",{className:"text-xs bg-white bg-opacity-20 rounded px-2 py-1 truncate cursor-move",draggable:!0,onDragStart:fe=>be(fe,$),children:$.name},$.id)),ae.length>3&&m.jsxs("div",{className:"text-xs opacity-75",children:["+",ae.length-3," more"]})]})]},W.id)})}),a.length===0&&m.jsxs("div",{className:"text-center py-12 text-gray-500",children:[m.jsx(ea,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No tables created yet"}),m.jsx("p",{className:"text-sm",children:"Add tables to start arranging seating"})]}),m.jsxs("div",{className:"border-t pt-4",children:[m.jsx("h3",{className:"font-medium mb-2",children:"Table Types"}),m.jsx("div",{className:"flex flex-wrap gap-2",children:T.map(W=>m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:`w-4 h-4 rounded ${N[W]} mr-2`}),m.jsx("span",{className:"text-sm",children:W})]},W))})]})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(fn,{className:"h-6 w-6 mr-2"}),"Unassigned Attendees"]}),m.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto border-2 border-dashed border-gray-300 rounded-lg p-4 min-h-32",onDragOver:Z,onDrop:se,children:[ee.map(W=>m.jsxs("div",{className:"p-3 border border-gray-200 rounded-lg cursor-move hover:bg-gray-50 transition-colors",draggable:!0,onDragStart:ae=>be(ae,W),children:[m.jsx("div",{className:"font-medium text-gray-900",children:W.name}),W.company&&m.jsx("div",{className:"text-sm text-gray-600",children:W.company}),m.jsxs("select",{value:"",onChange:ae=>F(W.id,ae.target.value?parseInt(ae.target.value):null),className:"mt-2 w-full text-sm px-2 py-1 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500",onClick:ae=>ae.stopPropagation(),children:[m.jsx("option",{value:"",children:"Assign to table..."}),a.map(ae=>{const $=J(ae.table_number),fe=$.length<ae.capacity;return m.jsxs("option",{value:ae.table_number,disabled:!fe,children:["Table ",ae.table_number," (",ae.table_type,") - ",$.length,"/",ae.capacity,!fe&&" (Full)"]},ae.id)})]})]},W.id)),ee.length===0&&m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(fn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"All attendees assigned"}),m.jsx("p",{className:"text-xs mt-1",children:"Drag attendees here to unassign"})]})]}),h.filter(W=>W.table_assignment).length>0&&m.jsxs("div",{className:"mt-6 pt-4 border-t",children:[m.jsx("h3",{className:"font-medium mb-2",children:"Assigned Attendees"}),m.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:h.filter(W=>W.table_assignment).map(W=>m.jsxs("div",{className:"flex justify-between items-center text-sm",children:[m.jsx("span",{children:W.name}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("span",{className:"text-gray-600",children:["Table ",W.table_assignment]}),m.jsx("button",{onClick:()=>F(W.id,null),className:"text-red-600 hover:text-red-700",children:m.jsx(hr,{className:"h-3 w-3"})})]})]},W.id))})]})]})]}),p&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:w?"Edit Table":"Add New Table"}),m.jsxs("form",{onSubmit:D,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table Number"}),m.jsx("input",{type:"number",value:I.table_number,onChange:W=>B({...I,table_number:parseInt(W.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",required:!0}),!w&&m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Starting table number (will increment for multiple tables)"})]}),!w&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),m.jsx("input",{type:"number",value:I.quantity,onChange:W=>B({...I,quantity:parseInt(W.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"20",required:!0}),m.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Number of tables to create with these settings"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table Type"}),m.jsx("select",{value:I.table_type,onChange:W=>B({...I,table_type:W.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:T.map(W=>m.jsx("option",{value:W,children:W},W))})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Capacity"}),m.jsx("input",{type:"number",value:I.capacity,onChange:W=>B({...I,capacity:parseInt(W.target.value)||8}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"20",required:!0})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx("button",{type:"button",onClick:U,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsxs("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[m.jsx(s5,{className:"h-4 w-4 mr-2"}),w?"Update Table":`Create ${I.quantity} Table${I.quantity>1?"s":""}`]})]})]})]})})]})}function Lj(){const[e,t]=j.useState([]),[n,i]=j.useState([]),[r,a]=j.useState(new Date().getFullYear()),[c,h]=j.useState(!0);j.useEffect(()=>{g(),p()},[r]);const g=async()=>{try{h(!0);const{data:I,error:B}=await ue.from("events").select(`
          id,
          created_at,
          company_id
        `).gte("created_at",`${r}-01-01`).lt("created_at",`${r+1}-01-01`);if(B)throw B;const T=(I==null?void 0:I.map(L=>L.id))||[],{data:N,error:C}=await ue.from("attendees").select("id, event_id, checked_in, created_at").in("event_id",T);if(C)throw C;const{data:k,error:z}=await ue.from("companies").select("id, created_at").gte("created_at",`${r}-01-01`).lt("created_at",`${r+1}-01-01`);if(z)throw z;const D=[];for(let L=0;L<12;L++){const F=new Date(r,L,1),U=new Date(r,L+1,0),Y=(I==null?void 0:I.filter(de=>{const be=new Date(de.created_at);return be>=F&&be<=U}))||[],J=(N==null?void 0:N.filter(de=>{const be=new Date(de.created_at);return be>=F&&be<=U}))||[],ee=(k==null?void 0:k.filter(de=>{const be=new Date(de.created_at);return be>=F&&be<=U}))||[];D.push({month:F.toLocaleDateString("en-US",{month:"short"}),events:Y.length,attendees:J.length,checkedIn:J.filter(de=>de.checked_in).length,companies:ee.length})}t(D)}catch(I){oe.error("Error fetching monthly progress: "+I.message)}finally{h(!1)}},p=async()=>{try{const{data:I,error:B}=await ue.from("companies").select(`
          id,
          name,
          events!inner(
            id,
            attendees(id, checked_in)
          )
        `);if(B)throw B;const T=(I==null?void 0:I.map(N=>{const C=N.events||[],k=C.flatMap(z=>z.attendees||[]);return{id:N.id,name:N.name,events:C.length,attendees:k.length,checkedIn:k.filter(z=>z.checked_in).length}}))||[];i(T.sort((N,C)=>C.attendees-N.attendees))}catch(I){console.error("Error fetching company progress:",I)}},y=e.reduce((I,B)=>I+B.events,0),w=e.reduce((I,B)=>I+B.attendees,0),E=e.reduce((I,B)=>I+B.checkedIn,0),A=e.reduce((I,B)=>I+B.companies,0),O=Math.max(...e.map(I=>Math.max(I.events,I.attendees/10,I.checkedIn/10)));return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Monthly Progress"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Track monthly performance and growth"})]}),m.jsx("div",{children:m.jsx("select",{value:r,onChange:I=>a(parseInt(I.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:5},(I,B)=>new Date().getFullYear()-B).map(I=>m.jsx("option",{value:I,children:I},I))})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(Yn,{className:"h-8 w-8 text-blue-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:y}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Events"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(fn,{className:"h-8 w-8 text-green-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w}),m.jsx("div",{className:"text-sm text-gray-600",children:"Total Attendees"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(dl,{className:"h-8 w-8 text-purple-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:E}),m.jsx("div",{className:"text-sm text-gray-600",children:"Checked In"})]})]})}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(hs,{className:"h-8 w-8 text-orange-600 mr-3"}),m.jsxs("div",{children:[m.jsx("div",{className:"text-2xl font-bold text-gray-900",children:A}),m.jsx("div",{className:"text-sm text-gray-600",children:"New Companies"})]})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(Jl,{className:"h-6 w-6 mr-2"}),"Monthly Trends (",r,")"]}),c?m.jsx("div",{className:"flex items-center justify-center h-64",children:m.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):m.jsx("div",{className:"space-y-4",children:e.map((I,B)=>m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"font-medium",children:I.month}),m.jsxs("span",{className:"text-gray-600",children:[I.events," events • ",I.attendees," attendees"]})]}),m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-16 text-xs text-gray-600",children:"Events"}),m.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${O>0?I.events/O*100:0}%`}})}),m.jsx("div",{className:"w-8 text-xs text-right",children:I.events})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-16 text-xs text-gray-600",children:"Attendees"}),m.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${O>0?I.attendees/10/O*100:0}%`}})}),m.jsx("div",{className:"w-8 text-xs text-right",children:I.attendees})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-16 text-xs text-gray-600",children:"Check-ins"}),m.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-300",style:{width:`${O>0?I.checkedIn/10/O*100:0}%`}})}),m.jsx("div",{className:"w-8 text-xs text-right",children:I.checkedIn})]})]})]},B))})]}),m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(hs,{className:"h-6 w-6 mr-2"}),"Company Performance"]}),m.jsxs("div",{className:"space-y-4",children:[n.slice(0,10).map((I,B)=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:B+1}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-gray-900",children:I.name}),m.jsxs("div",{className:"text-sm text-gray-600",children:[I.events," events • ",I.attendees," attendees"]})]})]}),m.jsxs("div",{className:"text-right",children:[m.jsx("div",{className:"text-lg font-bold text-gray-900",children:I.checkedIn}),m.jsx("div",{className:"text-xs text-gray-600",children:"checked in"})]})]},I.id)),n.length===0&&m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(hs,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"No company data available"})]})]})]})]})]})}function Bj({userCompany:e}){const[t,n]=j.useState([]),[i,r]=j.useState(""),[a,c]=j.useState([]),[h,g]=j.useState(""),[p,y]=j.useState([]),[w,E]=j.useState(!1),[A,O]=j.useState(!1),[I,B]=j.useState(null),[T,N]=j.useState(""),[C,k]=j.useState({title:"",description:""}),[z,D]=j.useState({title:"",photo_url:""});j.useEffect(()=>{L()},[]),j.useEffect(()=>{i&&F()},[i]),j.useEffect(()=>{h&&(U(),Y())},[h]);const L=async()=>{try{let $=ue.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&($=$.eq("company_id",e.company_id));const{data:fe,error:Ae}=await $.order("created_at",{ascending:!1});if(Ae)throw Ae;const Qe=(fe==null?void 0:fe.map(Te=>({...Te,company:Array.isArray(Te.company)?Te.company[0]:Te.company})))||[];n(Qe),e&&Qe&&Qe.length>0&&r(Qe[0].id)}catch($){oe.error("Error fetching events: "+$.message)}},F=async()=>{try{const{data:$,error:fe}=await ue.from("voting_sessions").select("*").eq("event_id",i).order("created_at",{ascending:!1});if(fe)throw fe;c($)}catch($){oe.error("Error fetching voting sessions: "+$.message)}},U=async()=>{try{const{data:$,error:fe}=await ue.from("voting_photos").select("*").eq("voting_session_id",h).order("created_at",{ascending:!1});if(fe)throw fe;const Ae=await Promise.all($.map(async Qe=>{const{data:Te}=await ue.from("votes").select("id").eq("voting_photo_id",Qe.id);return{...Qe,vote_count:(Te==null?void 0:Te.length)||0}}));y(Ae)}catch($){oe.error("Error fetching photos: "+$.message)}},Y=async()=>{try{const $=`${window.location.origin}/public/voting/${h}`,fe=await Xi.toDataURL($);N(fe)}catch($){console.error("Error generating QR code:",$)}},J=async $=>{$.preventDefault();try{if(I){const{error:fe}=await ue.from("voting_sessions").update({title:C.title,description:C.description||null}).eq("id",I.id);if(fe)throw fe;oe.success("Voting session updated successfully")}else{const{error:fe}=await ue.from("voting_sessions").insert([{event_id:i,title:C.title,description:C.description||null}]);if(fe)throw fe;oe.success("Voting session created successfully")}ie(),F()}catch(fe){oe.error("Error saving voting session: "+fe.message)}},ee=async $=>{$.preventDefault();try{const{error:fe}=await ue.from("voting_photos").insert([{voting_session_id:h,title:z.title,photo_url:z.photo_url}]);if(fe)throw fe;oe.success("Photo added successfully"),se(),U()}catch(fe){oe.error("Error adding photo: "+fe.message)}},de=async($,fe)=>{try{fe&&await ue.from("voting_sessions").update({is_active:!1}).eq("event_id",i);const{error:Ae}=await ue.from("voting_sessions").update({is_active:fe}).eq("id",$);if(Ae)throw Ae;oe.success(`Voting session ${fe?"activated":"deactivated"}`),F()}catch(Ae){oe.error("Error updating session status: "+Ae.message)}},be=async $=>{if(confirm("Are you sure you want to delete this voting session? This will also delete all photos and votes."))try{const{error:fe}=await ue.from("voting_sessions").delete().eq("id",$);if(fe)throw fe;oe.success("Voting session deleted successfully"),F(),h===$&&(g(""),y([]))}catch(fe){oe.error("Error deleting session: "+fe.message)}},Z=async $=>{if(confirm("Are you sure you want to delete this photo? This will also delete all votes for it."))try{const{error:fe}=await ue.from("voting_photos").delete().eq("id",$);if(fe)throw fe;oe.success("Photo deleted successfully"),U()}catch(fe){oe.error("Error deleting photo: "+fe.message)}},ie=()=>{k({title:"",description:""}),B(null),E(!1)},se=()=>{D({title:"",photo_url:""}),O(!1)},W=$=>{B($),k({title:$.title,description:$.description||""}),E(!0)},ae=async $=>{var Ae;const fe=(Ae=$.target.files)==null?void 0:Ae[0];if(fe){if(fe.size>10*1024*1024){oe.error("File size must be less than 10MB");return}if(!fe.type.startsWith("image/")){oe.error("Please select an image file");return}try{const Qe=new FileReader;Qe.onload=Te=>{var xe;const mn=(xe=Te.target)==null?void 0:xe.result;D({...z,photo_url:mn})},Qe.readAsDataURL(fe)}catch(Qe){oe.error("Error uploading file: "+Qe.message)}}};return m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between items-center mb-8",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voting Administration"}),m.jsx("p",{className:"text-gray-600 mt-2",children:"Manage voting sessions and photos"})]}),m.jsxs("button",{onClick:()=>E(!0),disabled:!i,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[m.jsx(tc,{className:"h-5 w-5 mr-2"}),"New Voting Session"]})]}),m.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&t.length<=1?"Event":"Select Event"}),e&&t.length===1?m.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:t[0].name}):m.jsxs("select",{value:i,onChange:$=>r($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&m.jsx("option",{value:"",children:"Select an event"}),t.map($=>m.jsx("option",{value:$.id,children:e?$.name:`${$.name} (${$.company.name})`},$.id))]})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Voting Session"}),m.jsxs("select",{value:h,onChange:$=>g($.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[m.jsx("option",{value:"",children:"Select a voting session"}),a.map($=>m.jsxs("option",{value:$.id,children:[$.title," ",$.is_active&&"(Active)"]},$.id))]})]})]})}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[m.jsx(or,{className:"h-6 w-6 mr-2"}),"Voting Sessions"]}),m.jsxs("div",{className:"space-y-3",children:[a.map($=>m.jsxs("div",{className:`p-4 border rounded-lg ${$.is_active?"border-green-500 bg-green-50":"border-gray-200"}`,children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-gray-900",children:$.title}),$.description&&m.jsx("p",{className:"text-sm text-gray-600",children:$.description})]}),m.jsxs("div",{className:"flex space-x-1",children:[m.jsx("button",{onClick:()=>de($.id,!$.is_active),className:`p-1 rounded ${$.is_active?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,children:$.is_active?m.jsx(Q6,{className:"h-4 w-4"}):m.jsx(pE,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>W($),className:"text-gray-400 hover:text-blue-600 transition-colors",children:m.jsx(lh,{className:"h-4 w-4"})}),m.jsx("button",{onClick:()=>be($.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:m.jsx(hr,{className:"h-4 w-4"})})]})]}),m.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",new Date($.created_at).toLocaleDateString()]})]},$.id)),a.length===0&&i&&m.jsxs("div",{className:"text-center py-8 text-gray-500",children:[m.jsx(or,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),m.jsx("p",{children:"No voting sessions yet"})]})]})]}),m.jsx("div",{className:"lg:col-span-2",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[m.jsx(fs,{className:"h-6 w-6 mr-2"}),"Voting Photos"]}),m.jsxs("button",{onClick:()=>O(!0),disabled:!h,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:[m.jsx(tc,{className:"h-5 w-5 mr-2"}),"Add Photo"]})]}),h&&T&&m.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Voting QR Code"}),m.jsx("p",{className:"text-sm text-blue-700",children:"Share this QR code for attendees to vote"})]}),m.jsx("img",{src:T,alt:"Voting QR Code",className:"w-24 h-24 border rounded-lg"})]})}),p.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map($=>m.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[m.jsx("img",{src:$.photo_url,alt:$.title,className:"w-full h-48 object-cover"}),m.jsxs("div",{className:"p-4",children:[m.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:$.title}),m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsxs("span",{className:"text-sm text-gray-600",children:[$.vote_count," votes"]}),m.jsx("button",{onClick:()=>Z($.id),className:"text-red-600 hover:text-red-700",children:m.jsx(hr,{className:"h-4 w-4"})})]})]})]},$.id))}):h?m.jsxs("div",{className:"text-center py-12 text-gray-500",children:[m.jsx(fs,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"No photos added yet"}),m.jsx("p",{className:"text-sm",children:"Add photos for attendees to vote on"})]}):m.jsxs("div",{className:"text-center py-12 text-gray-500",children:[m.jsx(or,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),m.jsx("p",{children:"Select a voting session to manage photos"})]})]})})]}),w&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:I?"Edit Voting Session":"Create Voting Session"}),m.jsxs("form",{onSubmit:J,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),m.jsx("input",{type:"text",value:C.title,onChange:$=>k({...C,title:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter voting session title",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),m.jsx("textarea",{value:C.description,onChange:$=>k({...C,description:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter description (optional)"})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx("button",{type:"button",onClick:ie,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:I?"Update Session":"Create Session"})]})]})]})}),A&&m.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:m.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[m.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Voting Photo"}),m.jsxs("form",{onSubmit:ee,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo Title *"}),m.jsx("input",{type:"text",value:z.title,onChange:$=>D({...z,title:$.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter photo title",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo *"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:z.photo_url?m.jsxs("div",{className:"space-y-2",children:[m.jsx("img",{src:z.photo_url,alt:"Preview",className:"max-w-full h-32 object-contain mx-auto rounded"}),m.jsx("button",{type:"button",onClick:()=>D({...z,photo_url:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):m.jsxs("div",{children:[m.jsx(Hm,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),m.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Click to upload photo"}),m.jsx("input",{type:"file",accept:"image/*",onChange:ae,className:"hidden",id:"photo-upload"}),m.jsx("label",{htmlFor:"photo-upload",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),m.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[m.jsx("button",{type:"button",onClick:se,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!z.photo_url,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:"Add Photo"})]})]})]})})]})}function Pj(){const{eventId:e}=_c(),[t,n]=j.useState(null),[i,r]=j.useState(!1),[a,c]=j.useState(!1),[h,g]=j.useState(""),[p,y]=j.useState(null),[w,E]=j.useState(null);j.useEffect(()=>{e&&A()},[e]);const A=async()=>{try{const{data:T,error:N}=await ue.from("events").select(`
          id,
          name,
          description,
          company:companies(name)
        `).eq("id",e).single();if(N)throw N;const C={...T,company:Array.isArray(T.company)?T.company[0]??{name:""}:T.company};n(C)}catch{oe.error("Event not found")}},O=T=>{var C;const N=(C=T.target.files)==null?void 0:C[0];if(N){if(N.size>10*1024*1024){oe.error("File size must be less than 10MB");return}if(!N.type.startsWith("image/")){oe.error("Please select an image file");return}y(N);const k=URL.createObjectURL(N);E(k)}},I=async()=>{if(!(!p||!t)){r(!0);try{const T=new FileReader;T.onload=async N=>{var z;const C=(z=N.target)==null?void 0:z.result,{error:k}=await ue.from("gallery_photos").insert([{event_id:t.id,attendee_name:h.trim()||null,photo_url:C}]);if(k)throw k;oe.success("Photo uploaded successfully!"),c(!0),y(null),E(null),g("")},T.readAsDataURL(p)}catch(T){oe.error("Error uploading photo: "+T.message)}finally{r(!1)}}},B=()=>{c(!1),y(null),E(null),g("")};return t?a?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:m.jsx("div",{className:"max-w-md w-full text-center",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[m.jsx(ar,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Photo Uploaded!"}),m.jsxs("p",{className:"text-gray-600 mb-6",children:["Thank you for sharing your moment from ",t.name]}),m.jsx("button",{onClick:B,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Another Photo"})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4",children:m.jsx("div",{className:"max-w-2xl mx-auto",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsxs("div",{className:"bg-blue-600 text-white px-4 md:px-6 py-6 md:py-8 text-center",children:[m.jsx(Sd,{className:"h-12 w-12 mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"Share Your Photo"}),m.jsx("p",{className:"text-blue-100",children:t.name}),m.jsx("p",{className:"text-blue-200 text-sm",children:t.company.name})]}),m.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),m.jsx("input",{type:"text",value:h,onChange:T=>g(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Photo"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 md:p-6 text-center hover:border-blue-400 transition-colors",children:w?m.jsxs("div",{className:"space-y-4",children:[m.jsx("img",{src:w,alt:"Preview",className:"max-w-full h-48 md:h-64 object-contain mx-auto rounded-lg"}),m.jsx("button",{onClick:()=>{y(null),E(null)},className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):m.jsxs("div",{children:[m.jsx(fs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600 mb-2",children:"Click to select a photo"}),m.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG up to 10MB"}),m.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",id:"photo-upload"}),m.jsx("label",{htmlFor:"photo-upload",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),p&&m.jsxs("button",{onClick:I,disabled:i,className:"w-full bg-green-600 text-white py-2 md:py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center disabled:opacity-50 text-sm md:text-base",children:[m.jsx(Hm,{className:"h-5 w-5 mr-2"}),i?"Uploading...":"Upload Photo"]})]}),m.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[m.jsx("p",{children:"• Your photo will be added to the event gallery"}),m.jsx("p",{children:"• Photos may be displayed during the event"}),m.jsx("p",{children:"• By uploading, you consent to public display"})]})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}function Uj(){const{eventId:e}=_c(),t=Nc(),[n,i]=j.useState(null),[r,a]=j.useState(!0),[c,h]=j.useState(!1),[g,p]=j.useState({name:"",email:"",phone:"",identification_number:"",staff_id:""});j.useEffect(()=>{e&&y()},[e]);const y=async()=>{try{const{data:E,error:A}=await ue.from("events").select("*").eq("id",e).single();if(A)throw A;i(E)}catch{oe.error("Event not found"),t("/")}finally{a(!1)}},w=async E=>{if(E.preventDefault(),!(!n||!g.name.trim()||!g.identification_number.trim())){h(!0);try{const A=crypto.randomUUID(),O=`${A}|${n.id}|${g.name}`,I=await Xi.toDataURL(O,{width:200,margin:1,errorCorrectionLevel:"L"}),{error:B}=await ue.from("attendees").insert([{id:A,event_id:n.id,name:g.name,email:g.email||null,phone:g.phone||null,identification_number:g.identification_number,staff_id:g.staff_id||null,qr_code:I}]);if(B)throw B;oe.success("Registration successful!"),t(`/public/ticket/${A}`)}catch(A){oe.error("Registration failed: "+A.message)}finally{h(!1)}}};return r?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?m.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"max-w-2xl mx-auto",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsxs("div",{className:"bg-blue-600 text-white px-4 md:px-6 py-6 md:py-8",children:[m.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-4",children:n.name}),n.description&&m.jsx("p",{className:"text-blue-100 mb-4",children:n.description}),m.jsxs("div",{className:"space-y-2",children:[n.date&&m.jsxs("div",{className:"flex items-center text-blue-100",children:[m.jsx(Yn,{className:"h-5 w-5 mr-2"}),m.jsx("span",{className:"text-sm md:text-base",children:new Date(n.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),n.location&&m.jsxs("div",{className:"flex items-center text-blue-100",children:[m.jsx(ea,{className:"h-5 w-5 mr-2"}),m.jsx("span",{className:"text-sm md:text-base",children:n.location})]})]})]}),m.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8",children:[m.jsx("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-6",children:"Register for Event"}),m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),m.jsx("input",{type:"text",id:"name",required:!0,value:g.name,onChange:E=>p({...g,name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your full name"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"identification_number",className:"block text-sm font-medium text-gray-700 mb-2",children:"Identification Number *"}),m.jsx("input",{type:"text",id:"identification_number",required:!0,value:g.identification_number,onChange:E=>p({...g,identification_number:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your identification number"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"staff_id",className:"block text-sm font-medium text-gray-700 mb-2",children:"Staff ID"}),m.jsx("input",{type:"text",id:"staff_id",value:g.staff_id,onChange:E=>p({...g,staff_id:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your staff ID (optional)"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),m.jsx("input",{type:"email",id:"email",value:g.email,onChange:E=>p({...g,email:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),m.jsx("input",{type:"tel",id:"phone",value:g.phone,onChange:E=>p({...g,phone:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your phone number"})]}),m.jsx("button",{type:"submit",disabled:c,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 font-medium text-sm md:text-base",children:c?"Registering...":"Register Now"})]})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),m.jsx("p",{className:"text-gray-600",children:"The event you're looking for doesn't exist."})]})})}function Fj(){const{attendeeId:e}=_c(),[t,n]=j.useState(null),[i,r]=j.useState(!0);j.useEffect(()=>{e&&a()},[e]);const a=async()=>{try{const{data:c,error:h}=await ue.from("attendees").select(`
          *,
          event:events (
            name,
            description,
            date,
            location
          )
        `).eq("id",e).single();if(h)throw h;n(c)}catch{oe.error("Ticket not found")}finally{r(!1)}};return i?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?m.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4 sm:px-6 lg:px-8",children:m.jsx("div",{className:"max-w-md mx-auto",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 md:px-6 py-6 md:py-8 text-center",children:[m.jsx(dr,{className:"h-12 w-12 mx-auto mb-4"}),m.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Event Ticket"}),t.checked_in&&m.jsxs("div",{className:"mt-4 flex items-center justify-center text-green-200",children:[m.jsx(ar,{className:"h-5 w-5 mr-2"}),m.jsx("span",{children:"Checked In"})]})]}),m.jsxs("div",{className:"px-4 md:px-6 py-6 border-b border-gray-200",children:[m.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 mb-3",children:t.event.name}),t.event.description&&m.jsx("p",{className:"text-gray-600 mb-4",children:t.event.description}),m.jsxs("div",{className:"space-y-2",children:[t.event.date&&m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(Yn,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"text-sm",children:new Date(t.event.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.event.location&&m.jsxs("div",{className:"flex items-center text-gray-600",children:[m.jsx(ea,{className:"h-4 w-4 mr-2"}),m.jsx("span",{className:"text-sm",children:t.event.location})]})]})]}),m.jsxs("div",{className:"px-4 md:px-6 py-6 border-b border-gray-200",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Attendee Information"}),m.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[m.jsxs("div",{children:[m.jsx("strong",{children:"Name:"})," ",t.name]}),m.jsxs("div",{children:[m.jsx("strong",{children:"ID Number:"})," ",t.identification_number]}),t.staff_id&&m.jsxs("div",{children:[m.jsx("strong",{children:"Staff ID:"})," ",t.staff_id]}),t.email&&m.jsxs("div",{children:[m.jsx("strong",{children:"Email:"})," ",t.email]}),t.phone&&m.jsxs("div",{children:[m.jsx("strong",{children:"Phone:"})," ",t.phone]})]})]}),m.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8 text-center",children:[m.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Check-in QR Code"}),t.qr_code&&m.jsx("div",{className:"flex justify-center",children:m.jsx("img",{src:t.qr_code,alt:"QR Code for check-in",className:"w-40 h-40 md:w-48 md:h-48 border border-gray-200 rounded-lg"})}),m.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Present this QR code at the event for check-in"})]}),t.checked_in&&t.check_in_time&&m.jsx("div",{className:"bg-green-50 px-4 md:px-6 py-4",children:m.jsxs("div",{className:"flex items-center justify-center text-green-800",children:[m.jsx(ar,{className:"h-5 w-5 mr-2"}),m.jsxs("span",{className:"text-sm font-medium",children:["Checked in at ",new Date(t.check_in_time).toLocaleString()]})]})})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ticket Not Found"}),m.jsx("p",{className:"text-gray-600",children:"The ticket you're looking for doesn't exist."})]})})}function Vj(){const{eventId:e}=_c(),[t,n]=j.useState(null),[i,r]=j.useState(!1),[a,c]=j.useState(!1),[h,g]=j.useState(""),[p,y]=j.useState(null),[w,E]=j.useState(null);j.useEffect(()=>{e&&A()},[e]);const A=async()=>{try{const{data:T,error:N}=await ue.from("events").select(`
          id,
          name,
          description,
          company:companies(name)
        `).eq("id",e).single();if(N)throw N;const C={...T,company:Array.isArray(T.company)?T.company[0]??{name:""}:T.company};n(C)}catch{oe.error("Event not found")}},O=T=>{var C;const N=(C=T.target.files)==null?void 0:C[0];if(N){if(N.size>10*1024*1024){oe.error("File size must be less than 10MB");return}if(!N.type.startsWith("image/")){oe.error("Please select an image file");return}y(N);const k=URL.createObjectURL(N);E(k)}},I=async()=>{if(!(!p||!t)){r(!0);try{const T=new FileReader;T.onload=async N=>{var z;const C=(z=N.target)==null?void 0:z.result,{error:k}=await ue.from("gallery_photos").insert([{event_id:t.id,attendee_name:h.trim()||null,photo_url:C}]);if(k)throw k;oe.success("Photo uploaded successfully!"),c(!0),y(null),E(null),g("")},T.readAsDataURL(p)}catch(T){oe.error("Error uploading photo: "+T.message)}finally{r(!1)}}},B=()=>{c(!1),y(null),E(null),g("")};return t?a?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:m.jsx("div",{className:"max-w-md w-full text-center",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[m.jsx(ar,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Photo Uploaded!"}),m.jsxs("p",{className:"text-gray-600 mb-6",children:["Thank you for sharing your moment from ",t.name]}),m.jsx("button",{onClick:B,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Another Photo"})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4",children:m.jsx("div",{className:"max-w-2xl mx-auto",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsxs("div",{className:"bg-blue-600 text-white px-4 md:px-6 py-6 md:py-8 text-center",children:[m.jsx(Sd,{className:"h-12 w-12 mx-auto mb-4"}),m.jsx("h1",{className:"text-2xl md:text-3xl font-bold mb-2",children:"Share Your Photo"}),m.jsx("p",{className:"text-blue-100",children:t.name}),m.jsx("p",{className:"text-blue-200 text-sm",children:t.company.name})]}),m.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8",children:[m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),m.jsx("input",{type:"text",value:h,onChange:T=>g(T.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your name"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Photo"}),m.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 md:p-6 text-center hover:border-blue-400 transition-colors",children:w?m.jsxs("div",{className:"space-y-4",children:[m.jsx("img",{src:w,alt:"Preview",className:"max-w-full h-48 md:h-64 object-contain mx-auto rounded-lg"}),m.jsx("button",{onClick:()=>{y(null),E(null)},className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):m.jsxs("div",{children:[m.jsx(fs,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),m.jsx("p",{className:"text-gray-600 mb-2",children:"Click to select a photo"}),m.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG up to 10MB"}),m.jsx("input",{type:"file",accept:"image/*",onChange:O,className:"hidden",id:"photo-upload"}),m.jsx("label",{htmlFor:"photo-upload",className:"mt-4 inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),p&&m.jsxs("button",{onClick:I,disabled:i,className:"w-full bg-green-600 text-white py-2 md:py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center disabled:opacity-50 text-sm md:text-base",children:[m.jsx(Hm,{className:"h-5 w-5 mr-2"}),i?"Uploading...":"Upload Photo"]})]}),m.jsxs("div",{className:"mt-8 text-center text-sm text-gray-600",children:[m.jsx("p",{children:"• Your photo will be added to the event gallery"}),m.jsx("p",{children:"• Photos may be displayed during the event"}),m.jsx("p",{children:"• By uploading, you consent to public display"})]})]})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}function zj(){const{sessionId:e}=_c(),[t,n]=j.useState(null),[i,r]=j.useState([]),[a,c]=j.useState(null),[h,g]=j.useState(0),[p,y]=j.useState(!1),[w,E]=j.useState(!0),[A,O]=j.useState(!1),[I,B]=j.useState(!1),[T,N]=j.useState(""),[C,k]=j.useState(!0);j.useEffect(()=>{e&&z()},[e]),j.useEffect(()=>{if(e&&a){D(),L();const Y=ue.channel("votes").on("postgres_changes",{event:"*",schema:"public",table:"votes"},()=>{D()}).subscribe();return()=>{Y.unsubscribe()}}},[e,a]);const z=async()=>{var Y,J,ee,de;try{const{data:be,error:Z}=await ue.from("voting_sessions").select(`
        id,
        title,
        description,
        event:events(
          id,
          name,
          company:companies(name)
        )
      `).eq("id",e).eq("is_active",!0).single();if(Z||!be)throw Z;const ie={id:be.id,title:be.title,description:be.description,event:{id:(Y=be.event[0])==null?void 0:Y.id,name:(J=be.event[0])==null?void 0:J.name,company:Array.isArray((ee=be.event[0])==null?void 0:ee.company)?be.event[0].company[0]:(de=be.event[0])==null?void 0:de.company}};n(ie)}catch{oe.error("Voting session not found or not active")}finally{E(!1)}},D=async()=>{if(a)try{const{data:Y,error:J}=await ue.from("voting_photos").select("*").eq("voting_session_id",e).order("created_at",{ascending:!1});if(J)throw J;const ee=await Promise.all(Y.map(async Z=>{const{data:ie}=await ue.from("votes").select("id, attendee_id").eq("voting_photo_id",Z.id),se=(ie==null?void 0:ie.some(W=>W.attendee_id===a.id))||!1;return{...Z,vote_count:(ie==null?void 0:ie.length)||0,user_voted:se}})),de=ee.reduce((Z,ie)=>Z+ie.vote_count,0);g(de);const be=ee.map(Z=>({...Z,vote_percentage:de>0?Z.vote_count/de*100:0}));r(be)}catch(Y){console.error("Error fetching photos:",Y)}},L=async()=>{if(!(!a||i.length===0))try{const{data:Y,error:J}=await ue.from("votes").select("id").eq("attendee_id",a.id).in("voting_photo_id",i.map(ee=>ee.id));if(J)throw J;y(((Y==null?void 0:Y.length)||0)>0)}catch(Y){console.error("Error checking vote status:",Y)}},F=async Y=>{if(Y.preventDefault(),!!T.trim())try{E(!0);const{data:J,error:ee}=await ue.from("attendees").select("id, name, identification_number, event_id").eq("identification_number",T.trim()).single();if(ee||!J){oe.error("Attendee not found. Please check your identification number.");return}if(t&&J.event_id!==t.event.id){oe.error("You are not registered for this event.");return}c(J),k(!1),oe.success(`Welcome, ${J.name}!`)}catch(J){oe.error("Error logging in: "+J.message)}finally{E(!1)}},U=async Y=>{if(!(!a||A))try{O(!0);const{data:J}=await ue.from("votes").select("id").eq("attendee_id",a.id).in("voting_photo_id",i.map(de=>de.id));if(J&&J.length>0){oe.error("You have already voted in this session"),y(!0);return}const{error:ee}=await ue.from("votes").insert([{voting_photo_id:Y,attendee_id:a.id}]);if(ee)throw ee;oe.success("Vote cast successfully!"),y(!0),B(!0),D()}catch(J){oe.error("Error casting vote: "+J.message)}finally{O(!1)}};return w?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):t?C?m.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4",children:m.jsx("div",{className:"max-w-md mx-auto",children:m.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx(or,{className:"h-16 w-16 text-purple-600 mx-auto mb-4"}),m.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Join Voting"}),m.jsx("h2",{className:"text-lg md:text-xl text-purple-600 mb-2",children:t.title}),m.jsx("p",{className:"text-gray-600",children:t.event.name}),m.jsx("p",{className:"text-sm text-gray-500",children:t.event.company.name})]}),m.jsxs("form",{onSubmit:F,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Identification Number"}),m.jsx("input",{type:"text",value:T,onChange:Y=>N(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your identification number",required:!0})]}),m.jsx("button",{type:"submit",disabled:w,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:w?"Verifying...":"Join Voting"})]}),t.description&&m.jsx("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg",children:m.jsx("p",{className:"text-sm text-purple-700",children:t.description})})]})})}):m.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8 px-4",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-6 mb-6",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:t.title}),m.jsx("p",{className:"text-base md:text-lg text-purple-600 mb-2",children:t.event.name}),m.jsx("p",{className:"text-gray-600",children:t.event.company.name}),t.description&&m.jsx("p",{className:"text-gray-600 mt-2",children:t.description}),m.jsxs("div",{className:"mt-4 flex flex-col md:flex-row items-center justify-center space-y-2 md:space-y-0 md:space-x-4 text-sm text-gray-500",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(fn,{className:"h-4 w-4 mr-1"}),m.jsxs("span",{children:["Welcome, ",a==null?void 0:a.name]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(Jl,{className:"h-4 w-4 mr-1"}),m.jsxs("span",{children:[h," total votes"]})]})]})]})}),p&&m.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:m.jsxs("div",{className:"flex items-center",children:[m.jsx(ar,{className:"h-5 w-5 text-green-600 mr-2"}),m.jsx("span",{className:"text-green-800 font-medium",children:"Thank you for voting!"})]})}),p&&m.jsx("div",{className:"text-center mb-6",children:m.jsx("button",{onClick:()=>B(!I),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:I?"Hide Results":"Show Results"})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:i.map(Y=>m.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[m.jsx("img",{src:Y.photo_url,alt:Y.title,className:"w-full h-48 md:h-64 object-cover"}),m.jsxs("div",{className:"p-4 md:p-6",children:[m.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:Y.title}),p?I?m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between items-center",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Votes"}),m.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Y.vote_count," (",Y.vote_percentage.toFixed(1),"%)"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 md:h-3",children:m.jsx("div",{className:`h-2 md:h-3 rounded-full transition-all duration-500 ${Y.user_voted?"bg-green-500":"bg-purple-500"}`,style:{width:`${Y.vote_percentage}%`}})}),Y.user_voted&&m.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[m.jsx(ar,{className:"h-4 w-4 mr-1"}),m.jsx("span",{children:"You voted for this"})]})]}):m.jsxs("div",{className:"text-center py-2 md:py-3 text-gray-500",children:[m.jsx(ar,{className:"h-8 w-8 mx-auto mb-2"}),m.jsx("p",{children:"Vote cast successfully!"})]}):m.jsxs("button",{onClick:()=>U(Y.id),disabled:A,className:"w-full bg-purple-600 text-white py-2 md:py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center text-sm md:text-base",children:[m.jsx(or,{className:"h-5 w-5 mr-2"}),A?"Voting...":"Vote for This"]})]})]},Y.id))}),i.length===0&&m.jsxs("div",{className:"text-center py-12",children:[m.jsx(or,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Photos Available"}),m.jsx("p",{className:"text-gray-600",children:"No photos have been added to this voting session yet."})]})]})}):m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Voting Session Not Found"}),m.jsx("p",{className:"text-gray-600",children:"The voting session may have ended or doesn't exist."})]})})}function Hj(){const[e,t]=j.useState(null),[n,i]=j.useState(null),[r,a]=j.useState(!0),[c,h]=j.useState(!0);j.useEffect(()=>{if("https://rqebhtnaklgxevgbkfkq.supabase.co".includes("your-project")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJxZWJodG5ha2xneGV2Z2JrZmtxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMwODQ0OTksImV4cCI6MjA2ODY2MDQ5OX0.n8QXCQJ2sSn9V3bIRZZv9Aoj-KM45vqUYOi0G_C7FYM".includes("your-anon-key")){h(!1),a(!1);return}ue.auth.getSession().then(({data:{session:E}})=>{t((E==null?void 0:E.user)??null),a(!1)}).catch(()=>{h(!1),a(!1)});const{data:{subscription:w}}=ue.auth.onAuthStateChange((E,A)=>{t((A==null?void 0:A.user)??null),A!=null&&A.user?g(A.user.id):i(null)});return()=>w.unsubscribe()},[]);const g=async p=>{try{const{data:y,error:w}=await ue.from("company_users").select(`
          *,
          company:companies(*)
        `).eq("id",p).maybeSingle();if(w){console.error("Error fetching user company:",w);return}i(y)}catch(y){console.error("Error fetching user company:",y)}};return c?r?m.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):m.jsx(lN,{children:m.jsxs("div",{className:"App",children:[m.jsx(o_,{position:"top-right"}),m.jsxs(Tx,{children:[m.jsx(Ot,{path:"/public/register/:eventId",element:m.jsx(Uj,{})}),m.jsx(Ot,{path:"/public/ticket/:attendeeId",element:m.jsx(Fj,{})}),m.jsx(Ot,{path:"/public/gallery/:eventId",element:m.jsx(Vj,{})}),m.jsx(Ot,{path:"/public/voting/:sessionId",element:m.jsx(zj,{})}),m.jsx(Ot,{path:"/auth",element:e?m.jsx(vf,{to:"/admin"}):m.jsx(E5,{})}),m.jsx(Ot,{path:"/admin/*",element:e?m.jsx(v5,{userCompany:n,children:m.jsxs(Tx,{children:[m.jsx(Ot,{path:"/",element:m.jsx(A5,{userCompany:n})}),m.jsx(Ot,{path:"/companies",element:m.jsx(S5,{})}),m.jsx(Ot,{path:"/events",element:m.jsx(hM,{userCompany:n})}),m.jsx(Ot,{path:"/progress",element:m.jsx(Lj,{})}),m.jsx(Ot,{path:"/attendees",element:m.jsx(fM,{userCompany:n})}),m.jsx(Ot,{path:"/checkin",element:m.jsx($M,{})}),m.jsx(Ot,{path:"/welcome-monitor",element:m.jsx(Rj,{})}),m.jsx(Ot,{path:"/lucky-draw",element:m.jsx(Oj,{userCompany:n})}),m.jsx(Ot,{path:"/gallery",element:m.jsx(jj,{userCompany:n})}),m.jsx(Ot,{path:"/seating",element:m.jsx(kj,{userCompany:n})}),m.jsx(Ot,{path:"/voting",element:m.jsx(Bj,{userCompany:n})}),m.jsx(Ot,{path:"/voting-monitor",element:m.jsx(Pj,{})})]})}):m.jsx(vf,{to:"/auth"})}),m.jsx(Ot,{path:"/",element:m.jsx(vf,{to:e?"/admin":"/auth"})})]})]})}):m.jsx(w5,{})}K4.createRoot(document.getElementById("root")).render(m.jsx(pS.StrictMode,{children:m.jsx(Hj,{})}));
