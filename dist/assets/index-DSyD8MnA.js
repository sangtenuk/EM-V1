var Qb=Object.defineProperty;var Yb=(e,t,n)=>t in e?Qb(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Dr=(e,t,n)=>Yb(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();var Cn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function M0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Xb(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),n}var bv={exports:{}},L0={},wv={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vl=Symbol.for("react.element"),Jb=Symbol.for("react.portal"),Zb=Symbol.for("react.fragment"),e2=Symbol.for("react.strict_mode"),t2=Symbol.for("react.profiler"),n2=Symbol.for("react.provider"),r2=Symbol.for("react.context"),s2=Symbol.for("react.forward_ref"),o2=Symbol.for("react.suspense"),a2=Symbol.for("react.memo"),i2=Symbol.for("react.lazy"),ip=Symbol.iterator;function l2(e){return e===null||typeof e!="object"?null:(e=ip&&e[ip]||e["@@iterator"],typeof e=="function"?e:null)}var Cv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bv=Object.assign,Av={};function za(e,t,n){this.props=e,this.context=t,this.refs=Av,this.updater=n||Cv}za.prototype.isReactComponent={};za.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};za.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function jv(){}jv.prototype=za.prototype;function Th(e,t,n){this.props=e,this.context=t,this.refs=Av,this.updater=n||Cv}var Ih=Th.prototype=new jv;Ih.constructor=Th;Bv(Ih,za.prototype);Ih.isPureReactComponent=!0;var lp=Array.isArray,kv=Object.prototype.hasOwnProperty,Rh={current:null},Dv={key:!0,ref:!0,__self:!0,__source:!0};function Fv(e,t,n){var r,o={},a=null,i=null;if(t!=null)for(r in t.ref!==void 0&&(i=t.ref),t.key!==void 0&&(a=""+t.key),t)kv.call(t,r)&&!Dv.hasOwnProperty(r)&&(o[r]=t[r]);var l=arguments.length-2;if(l===1)o.children=n;else if(1<l){for(var c=Array(l),x=0;x<l;x++)c[x]=arguments[x+2];o.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps,l)o[r]===void 0&&(o[r]=l[r]);return{$$typeof:vl,type:e,key:a,ref:i,props:o,_owner:Rh.current}}function c2(e,t){return{$$typeof:vl,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Mh(e){return typeof e=="object"&&e!==null&&e.$$typeof===vl}function u2(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var cp=/\/+/g;function Qu(e,t){return typeof e=="object"&&e!==null&&e.key!=null?u2(""+e.key):t.toString(36)}function Sc(e,t,n,r,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var i=!1;if(e===null)i=!0;else switch(a){case"string":case"number":i=!0;break;case"object":switch(e.$$typeof){case vl:case Jb:i=!0}}if(i)return i=e,o=o(i),e=r===""?"."+Qu(i,0):r,lp(o)?(n="",e!=null&&(n=e.replace(cp,"$&/")+"/"),Sc(o,t,n,"",function(x){return x})):o!=null&&(Mh(o)&&(o=c2(o,n+(!o.key||i&&i.key===o.key?"":(""+o.key).replace(cp,"$&/")+"/")+e)),t.push(o)),1;if(i=0,r=r===""?".":r+":",lp(e))for(var l=0;l<e.length;l++){a=e[l];var c=r+Qu(a,l);i+=Sc(a,t,n,c,o)}else if(c=l2(e),typeof c=="function")for(e=c.call(e),l=0;!(a=e.next()).done;)a=a.value,c=r+Qu(a,l++),i+=Sc(a,t,n,c,o);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return i}function rc(e,t,n){if(e==null)return e;var r=[],o=0;return Sc(e,r,"","",function(a){return t.call(n,a,o++)}),r}function d2(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Bn={current:null},Pc={transition:null},x2={ReactCurrentDispatcher:Bn,ReactCurrentBatchConfig:Pc,ReactCurrentOwner:Rh};function Nv(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:rc,forEach:function(e,t,n){rc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return rc(e,function(){t++}),t},toArray:function(e){return rc(e,function(t){return t})||[]},only:function(e){if(!Mh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};at.Component=za;at.Fragment=Zb;at.Profiler=t2;at.PureComponent=Th;at.StrictMode=e2;at.Suspense=o2;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x2;at.act=Nv;at.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Bv({},e.props),o=e.key,a=e.ref,i=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,i=Rh.current),t.key!==void 0&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)kv.call(t,c)&&!Dv.hasOwnProperty(c)&&(r[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var x=0;x<c;x++)l[x]=arguments[x+2];r.children=l}return{$$typeof:vl,type:e.type,key:o,ref:a,props:r,_owner:i}};at.createContext=function(e){return e={$$typeof:r2,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:n2,_context:e},e.Consumer=e};at.createElement=Fv;at.createFactory=function(e){var t=Fv.bind(null,e);return t.type=e,t};at.createRef=function(){return{current:null}};at.forwardRef=function(e){return{$$typeof:s2,render:e}};at.isValidElement=Mh;at.lazy=function(e){return{$$typeof:i2,_payload:{_status:-1,_result:e},_init:d2}};at.memo=function(e,t){return{$$typeof:a2,type:e,compare:t===void 0?null:t}};at.startTransition=function(e){var t=Pc.transition;Pc.transition={};try{e()}finally{Pc.transition=t}};at.unstable_act=Nv;at.useCallback=function(e,t){return Bn.current.useCallback(e,t)};at.useContext=function(e){return Bn.current.useContext(e)};at.useDebugValue=function(){};at.useDeferredValue=function(e){return Bn.current.useDeferredValue(e)};at.useEffect=function(e,t){return Bn.current.useEffect(e,t)};at.useId=function(){return Bn.current.useId()};at.useImperativeHandle=function(e,t,n){return Bn.current.useImperativeHandle(e,t,n)};at.useInsertionEffect=function(e,t){return Bn.current.useInsertionEffect(e,t)};at.useLayoutEffect=function(e,t){return Bn.current.useLayoutEffect(e,t)};at.useMemo=function(e,t){return Bn.current.useMemo(e,t)};at.useReducer=function(e,t,n){return Bn.current.useReducer(e,t,n)};at.useRef=function(e){return Bn.current.useRef(e)};at.useState=function(e){return Bn.current.useState(e)};at.useSyncExternalStore=function(e,t,n){return Bn.current.useSyncExternalStore(e,t,n)};at.useTransition=function(){return Bn.current.useTransition()};at.version="18.3.1";wv.exports=at;var A=wv.exports;const Lh=M0(A);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2=A,f2=Symbol.for("react.element"),m2=Symbol.for("react.fragment"),p2=Object.prototype.hasOwnProperty,g2=h2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,y2={key:!0,ref:!0,__self:!0,__source:!0};function _v(e,t,n){var r,o={},a=null,i=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(i=t.ref);for(r in t)p2.call(t,r)&&!y2.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)o[r]===void 0&&(o[r]=t[r]);return{$$typeof:f2,type:e,key:a,ref:i,props:o,_owner:g2.current}}L0.Fragment=m2;L0.jsx=_v;L0.jsxs=_v;bv.exports=L0;var s=bv.exports,Zd={},Sv={exports:{}},Wn={},Pv={exports:{}},Tv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(ne,_){var S=ne.length;ne.push(_);e:for(;0<S;){var U=S-1>>>1,$=ne[U];if(0<o($,_))ne[U]=_,ne[S]=$,S=U;else break e}}function n(ne){return ne.length===0?null:ne[0]}function r(ne){if(ne.length===0)return null;var _=ne[0],S=ne.pop();if(S!==_){ne[0]=S;e:for(var U=0,$=ne.length,R=$>>>1;U<R;){var H=2*(U+1)-1,me=ne[H],W=H+1,I=ne[W];if(0>o(me,S))W<$&&0>o(I,me)?(ne[U]=I,ne[W]=S,U=W):(ne[U]=me,ne[H]=S,U=H);else if(W<$&&0>o(I,S))ne[U]=I,ne[W]=S,U=W;else break e}}return _}function o(ne,_){var S=ne.sortIndex-_.sortIndex;return S!==0?S:ne.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,l=i.now();e.unstable_now=function(){return i.now()-l}}var c=[],x=[],d=1,f=null,m=3,v=!1,y=!1,C=!1,P=typeof setTimeout=="function"?setTimeout:null,B=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(ne){for(var _=n(x);_!==null;){if(_.callback===null)r(x);else if(_.startTime<=ne)r(x),_.sortIndex=_.expirationTime,t(c,_);else break;_=n(x)}}function j(ne){if(C=!1,b(ne),!y)if(n(c)!==null)y=!0,V(D);else{var _=n(x);_!==null&&xe(j,_.startTime-ne)}}function D(ne,_){y=!1,C&&(C=!1,B(N),N=-1),v=!0;var S=m;try{for(b(_),f=n(c);f!==null&&(!(f.expirationTime>_)||ne&&!J());){var U=f.callback;if(typeof U=="function"){f.callback=null,m=f.priorityLevel;var $=U(f.expirationTime<=_);_=e.unstable_now(),typeof $=="function"?f.callback=$:f===n(c)&&r(c),b(_)}else r(c);f=n(c)}if(f!==null)var R=!0;else{var H=n(x);H!==null&&xe(j,H.startTime-_),R=!1}return R}finally{f=null,m=S,v=!1}}var w=!1,E=null,N=-1,M=5,L=-1;function J(){return!(e.unstable_now()-L<M)}function se(){if(E!==null){var ne=e.unstable_now();L=ne;var _=!0;try{_=E(!0,ne)}finally{_?X():(w=!1,E=null)}}else w=!1}var X;if(typeof g=="function")X=function(){g(se)};else if(typeof MessageChannel<"u"){var Q=new MessageChannel,ce=Q.port2;Q.port1.onmessage=se,X=function(){ce.postMessage(null)}}else X=function(){P(se,0)};function V(ne){E=ne,w||(w=!0,X())}function xe(ne,_){N=P(function(){ne(e.unstable_now())},_)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){y||v||(y=!0,V(D))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var _=3;break;default:_=m}var S=m;m=_;try{return ne()}finally{m=S}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,_){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var S=m;m=ne;try{return _()}finally{m=S}},e.unstable_scheduleCallback=function(ne,_,S){var U=e.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?U+S:U):S=U,ne){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=S+$,ne={id:d++,callback:_,priorityLevel:ne,startTime:S,expirationTime:$,sortIndex:-1},S>U?(ne.sortIndex=S,t(x,ne),n(c)===null&&ne===n(x)&&(C?(B(N),N=-1):C=!0,xe(j,S-U))):(ne.sortIndex=$,t(c,ne),y||v||(y=!0,V(D))),ne},e.unstable_shouldYield=J,e.unstable_wrapCallback=function(ne){var _=m;return function(){var S=m;m=_;try{return ne.apply(this,arguments)}finally{m=S}}}})(Tv);Pv.exports=Tv;var v2=Pv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E2=A,zn=v2;function ke(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Iv=new Set,Wi={};function Ro(e,t){ja(e,t),ja(e+"Capture",t)}function ja(e,t){for(Wi[e]=t,e=0;e<t.length;e++)Iv.add(t[e])}var ts=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ex=Object.prototype.hasOwnProperty,b2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,up={},dp={};function w2(e){return ex.call(dp,e)?!0:ex.call(up,e)?!1:b2.test(e)?dp[e]=!0:(up[e]=!0,!1)}function C2(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function B2(e,t,n,r){if(t===null||typeof t>"u"||C2(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function An(e,t,n,r,o,a,i){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var an={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){an[e]=new An(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];an[t]=new An(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){an[e]=new An(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){an[e]=new An(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){an[e]=new An(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){an[e]=new An(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){an[e]=new An(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){an[e]=new An(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){an[e]=new An(e,5,!1,e.toLowerCase(),null,!1,!1)});var $h=/[\-:]([a-z])/g;function Oh(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace($h,Oh);an[t]=new An(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace($h,Oh);an[t]=new An(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace($h,Oh);an[t]=new An(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){an[e]=new An(e,1,!1,e.toLowerCase(),null,!1,!1)});an.xlinkHref=new An("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){an[e]=new An(e,1,!1,e.toLowerCase(),null,!0,!0)});function Uh(e,t,n,r){var o=an.hasOwnProperty(t)?an[t]:null;(o!==null?o.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(B2(t,n,o,r)&&(n=null),r||o===null?w2(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):o.mustUseProperty?e[o.propertyName]=n===null?o.type===3?!1:"":n:(t=o.attributeName,r=o.attributeNamespace,n===null?e.removeAttribute(t):(o=o.type,n=o===3||o===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var us=E2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sc=Symbol.for("react.element"),ea=Symbol.for("react.portal"),ta=Symbol.for("react.fragment"),Vh=Symbol.for("react.strict_mode"),tx=Symbol.for("react.profiler"),Rv=Symbol.for("react.provider"),Mv=Symbol.for("react.context"),zh=Symbol.for("react.forward_ref"),nx=Symbol.for("react.suspense"),rx=Symbol.for("react.suspense_list"),qh=Symbol.for("react.memo"),As=Symbol.for("react.lazy"),Lv=Symbol.for("react.offscreen"),xp=Symbol.iterator;function ci(e){return e===null||typeof e!="object"?null:(e=xp&&e[xp]||e["@@iterator"],typeof e=="function"?e:null)}var Mt=Object.assign,Yu;function Ei(e){if(Yu===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Yu=t&&t[1]||""}return`
`+Yu+e}var Xu=!1;function Ju(e,t){if(!e||Xu)return"";Xu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(x){var r=x}Reflect.construct(e,[],t)}else{try{t.call()}catch(x){r=x}e.call(t.prototype)}else{try{throw Error()}catch(x){r=x}e()}}catch(x){if(x&&r&&typeof x.stack=="string"){for(var o=x.stack.split(`
`),a=r.stack.split(`
`),i=o.length-1,l=a.length-1;1<=i&&0<=l&&o[i]!==a[l];)l--;for(;1<=i&&0<=l;i--,l--)if(o[i]!==a[l]){if(i!==1||l!==1)do if(i--,l--,0>l||o[i]!==a[l]){var c=`
`+o[i].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=i&&0<=l);break}}}finally{Xu=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ei(e):""}function A2(e){switch(e.tag){case 5:return Ei(e.type);case 16:return Ei("Lazy");case 13:return Ei("Suspense");case 19:return Ei("SuspenseList");case 0:case 2:case 15:return e=Ju(e.type,!1),e;case 11:return e=Ju(e.type.render,!1),e;case 1:return e=Ju(e.type,!0),e;default:return""}}function sx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ta:return"Fragment";case ea:return"Portal";case tx:return"Profiler";case Vh:return"StrictMode";case nx:return"Suspense";case rx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Mv:return(e.displayName||"Context")+".Consumer";case Rv:return(e._context.displayName||"Context")+".Provider";case zh:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qh:return t=e.displayName||null,t!==null?t:sx(e.type)||"Memo";case As:t=e._payload,e=e._init;try{return sx(e(t))}catch{}}return null}function j2(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return sx(t);case 8:return t===Vh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function qs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function $v(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function k2(e){var t=$v(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var o=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(i){r=""+i,a.call(this,i)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(i){r=""+i},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function oc(e){e._valueTracker||(e._valueTracker=k2(e))}function Ov(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=$v(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Jc(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ox(e,t){var n=t.checked;return Mt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function hp(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=qs(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Uv(e,t){t=t.checked,t!=null&&Uh(e,"checked",t,!1)}function ax(e,t){Uv(e,t);var n=qs(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ix(e,t.type,n):t.hasOwnProperty("defaultValue")&&ix(e,t.type,qs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function fp(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ix(e,t,n){(t!=="number"||Jc(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var bi=Array.isArray;function ya(e,t,n,r){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&r&&(e[n].defaultSelected=!0)}else{for(n=""+qs(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,r&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function lx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Mt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function mp(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ke(92));if(bi(n)){if(1<n.length)throw Error(ke(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:qs(n)}}function Vv(e,t){var n=qs(t.value),r=qs(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function pp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function zv(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?zv(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ac,qv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,o){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,o)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ac=ac||document.createElement("div"),ac.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ac.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ki(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var ji={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},D2=["Webkit","ms","Moz","O"];Object.keys(ji).forEach(function(e){D2.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ji[t]=ji[e]})});function Wv(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||ji.hasOwnProperty(e)&&ji[e]?(""+t).trim():t+"px"}function Kv(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,o=Wv(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,o):e[n]=o}}var F2=Mt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ux(e,t){if(t){if(F2[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ke(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ke(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ke(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ke(62))}}function dx(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xx=null;function Wh(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hx=null,va=null,Ea=null;function gp(e){if(e=wl(e)){if(typeof hx!="function")throw Error(ke(280));var t=e.stateNode;t&&(t=z0(t),hx(e.stateNode,e.type,t))}}function Hv(e){va?Ea?Ea.push(e):Ea=[e]:va=e}function Gv(){if(va){var e=va,t=Ea;if(Ea=va=null,gp(e),t)for(e=0;e<t.length;e++)gp(t[e])}}function Qv(e,t){return e(t)}function Yv(){}var Zu=!1;function Xv(e,t,n){if(Zu)return e(t,n);Zu=!0;try{return Qv(e,t,n)}finally{Zu=!1,(va!==null||Ea!==null)&&(Yv(),Gv())}}function Hi(e,t){var n=e.stateNode;if(n===null)return null;var r=z0(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ke(231,t,typeof n));return n}var fx=!1;if(ts)try{var ui={};Object.defineProperty(ui,"passive",{get:function(){fx=!0}}),window.addEventListener("test",ui,ui),window.removeEventListener("test",ui,ui)}catch{fx=!1}function N2(e,t,n,r,o,a,i,l,c){var x=Array.prototype.slice.call(arguments,3);try{t.apply(n,x)}catch(d){this.onError(d)}}var ki=!1,Zc=null,e0=!1,mx=null,_2={onError:function(e){ki=!0,Zc=e}};function S2(e,t,n,r,o,a,i,l,c){ki=!1,Zc=null,N2.apply(_2,arguments)}function P2(e,t,n,r,o,a,i,l,c){if(S2.apply(this,arguments),ki){if(ki){var x=Zc;ki=!1,Zc=null}else throw Error(ke(198));e0||(e0=!0,mx=x)}}function Mo(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Jv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function yp(e){if(Mo(e)!==e)throw Error(ke(188))}function T2(e){var t=e.alternate;if(!t){if(t=Mo(e),t===null)throw Error(ke(188));return t!==e?null:e}for(var n=e,r=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(r=o.return,r!==null){n=r;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return yp(o),e;if(a===r)return yp(o),t;a=a.sibling}throw Error(ke(188))}if(n.return!==r.return)n=o,r=a;else{for(var i=!1,l=o.child;l;){if(l===n){i=!0,n=o,r=a;break}if(l===r){i=!0,r=o,n=a;break}l=l.sibling}if(!i){for(l=a.child;l;){if(l===n){i=!0,n=a,r=o;break}if(l===r){i=!0,r=a,n=o;break}l=l.sibling}if(!i)throw Error(ke(189))}}if(n.alternate!==r)throw Error(ke(190))}if(n.tag!==3)throw Error(ke(188));return n.stateNode.current===n?e:t}function Zv(e){return e=T2(e),e!==null?e9(e):null}function e9(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=e9(e);if(t!==null)return t;e=e.sibling}return null}var t9=zn.unstable_scheduleCallback,vp=zn.unstable_cancelCallback,I2=zn.unstable_shouldYield,R2=zn.unstable_requestPaint,Wt=zn.unstable_now,M2=zn.unstable_getCurrentPriorityLevel,Kh=zn.unstable_ImmediatePriority,n9=zn.unstable_UserBlockingPriority,t0=zn.unstable_NormalPriority,L2=zn.unstable_LowPriority,r9=zn.unstable_IdlePriority,$0=null,Pr=null;function $2(e){if(Pr&&typeof Pr.onCommitFiberRoot=="function")try{Pr.onCommitFiberRoot($0,e,void 0,(e.current.flags&128)===128)}catch{}}var yr=Math.clz32?Math.clz32:V2,O2=Math.log,U2=Math.LN2;function V2(e){return e>>>=0,e===0?32:31-(O2(e)/U2|0)|0}var ic=64,lc=4194304;function wi(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function n0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,o=e.suspendedLanes,a=e.pingedLanes,i=n&268435455;if(i!==0){var l=i&~o;l!==0?r=wi(l):(a&=i,a!==0&&(r=wi(a)))}else i=n&~o,i!==0?r=wi(i):a!==0&&(r=wi(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&o)&&(o=r&-r,a=t&-t,o>=a||o===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-yr(t),o=1<<n,r|=e[n],t&=~o;return r}function z2(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function q2(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-yr(a),l=1<<i,c=o[i];c===-1?(!(l&n)||l&r)&&(o[i]=z2(l,t)):c<=t&&(e.expiredLanes|=l),a&=~l}}function px(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function s9(){var e=ic;return ic<<=1,!(ic&4194240)&&(ic=64),e}function ed(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function El(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-yr(t),e[t]=n}function W2(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var o=31-yr(n),a=1<<o;t[o]=0,r[o]=-1,e[o]=-1,n&=~a}}function Hh(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-yr(n),o=1<<r;o&t|e[r]&t&&(e[r]|=t),n&=~o}}var yt=0;function o9(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var a9,Gh,i9,l9,c9,gx=!1,cc=[],Is=null,Rs=null,Ms=null,Gi=new Map,Qi=new Map,Ds=[],K2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ep(e,t){switch(e){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Rs=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":Gi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(t.pointerId)}}function di(e,t,n,r,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[o]},t!==null&&(t=wl(t),t!==null&&Gh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function H2(e,t,n,r,o){switch(t){case"focusin":return Is=di(Is,e,t,n,r,o),!0;case"dragenter":return Rs=di(Rs,e,t,n,r,o),!0;case"mouseover":return Ms=di(Ms,e,t,n,r,o),!0;case"pointerover":var a=o.pointerId;return Gi.set(a,di(Gi.get(a)||null,e,t,n,r,o)),!0;case"gotpointercapture":return a=o.pointerId,Qi.set(a,di(Qi.get(a)||null,e,t,n,r,o)),!0}return!1}function u9(e){var t=bo(e.target);if(t!==null){var n=Mo(t);if(n!==null){if(t=n.tag,t===13){if(t=Jv(n),t!==null){e.blockedOn=t,c9(e.priority,function(){i9(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Tc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=yx(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);xx=r,n.target.dispatchEvent(r),xx=null}else return t=wl(n),t!==null&&Gh(t),e.blockedOn=n,!1;t.shift()}return!0}function bp(e,t,n){Tc(e)&&n.delete(t)}function G2(){gx=!1,Is!==null&&Tc(Is)&&(Is=null),Rs!==null&&Tc(Rs)&&(Rs=null),Ms!==null&&Tc(Ms)&&(Ms=null),Gi.forEach(bp),Qi.forEach(bp)}function xi(e,t){e.blockedOn===t&&(e.blockedOn=null,gx||(gx=!0,zn.unstable_scheduleCallback(zn.unstable_NormalPriority,G2)))}function Yi(e){function t(o){return xi(o,e)}if(0<cc.length){xi(cc[0],e);for(var n=1;n<cc.length;n++){var r=cc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Is!==null&&xi(Is,e),Rs!==null&&xi(Rs,e),Ms!==null&&xi(Ms,e),Gi.forEach(t),Qi.forEach(t),n=0;n<Ds.length;n++)r=Ds[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Ds.length&&(n=Ds[0],n.blockedOn===null);)u9(n),n.blockedOn===null&&Ds.shift()}var ba=us.ReactCurrentBatchConfig,r0=!0;function Q2(e,t,n,r){var o=yt,a=ba.transition;ba.transition=null;try{yt=1,Qh(e,t,n,r)}finally{yt=o,ba.transition=a}}function Y2(e,t,n,r){var o=yt,a=ba.transition;ba.transition=null;try{yt=4,Qh(e,t,n,r)}finally{yt=o,ba.transition=a}}function Qh(e,t,n,r){if(r0){var o=yx(e,t,n,r);if(o===null)ud(e,t,r,s0,n),Ep(e,r);else if(H2(o,e,t,n,r))r.stopPropagation();else if(Ep(e,r),t&4&&-1<K2.indexOf(e)){for(;o!==null;){var a=wl(o);if(a!==null&&a9(a),a=yx(e,t,n,r),a===null&&ud(e,t,r,s0,n),a===o)break;o=a}o!==null&&r.stopPropagation()}else ud(e,t,r,null,n)}}var s0=null;function yx(e,t,n,r){if(s0=null,e=Wh(r),e=bo(e),e!==null)if(t=Mo(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Jv(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return s0=e,null}function d9(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(M2()){case Kh:return 1;case n9:return 4;case t0:case L2:return 16;case r9:return 536870912;default:return 16}default:return 16}}var Ss=null,Yh=null,Ic=null;function x9(){if(Ic)return Ic;var e,t=Yh,n=t.length,r,o="value"in Ss?Ss.value:Ss.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var i=n-e;for(r=1;r<=i&&t[n-r]===o[a-r];r++);return Ic=o.slice(e,1<r?1-r:void 0)}function Rc(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function uc(){return!0}function wp(){return!1}function Kn(e){function t(n,r,o,a,i){this._reactName=n,this._targetInst=o,this.type=r,this.nativeEvent=a,this.target=i,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?uc:wp,this.isPropagationStopped=wp,this}return Mt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=uc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=uc)},persist:function(){},isPersistent:uc}),t}var qa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xh=Kn(qa),bl=Mt({},qa,{view:0,detail:0}),X2=Kn(bl),td,nd,hi,O0=Mt({},bl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jh,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==hi&&(hi&&e.type==="mousemove"?(td=e.screenX-hi.screenX,nd=e.screenY-hi.screenY):nd=td=0,hi=e),td)},movementY:function(e){return"movementY"in e?e.movementY:nd}}),Cp=Kn(O0),J2=Mt({},O0,{dataTransfer:0}),Z2=Kn(J2),e6=Mt({},bl,{relatedTarget:0}),rd=Kn(e6),t6=Mt({},qa,{animationName:0,elapsedTime:0,pseudoElement:0}),n6=Kn(t6),r6=Mt({},qa,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),s6=Kn(r6),o6=Mt({},qa,{data:0}),Bp=Kn(o6),a6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},i6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},l6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function c6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=l6[e])?!!t[e]:!1}function Jh(){return c6}var u6=Mt({},bl,{key:function(e){if(e.key){var t=a6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Rc(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?i6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jh,charCode:function(e){return e.type==="keypress"?Rc(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Rc(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),d6=Kn(u6),x6=Mt({},O0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ap=Kn(x6),h6=Mt({},bl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jh}),f6=Kn(h6),m6=Mt({},qa,{propertyName:0,elapsedTime:0,pseudoElement:0}),p6=Kn(m6),g6=Mt({},O0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),y6=Kn(g6),v6=[9,13,27,32],Zh=ts&&"CompositionEvent"in window,Di=null;ts&&"documentMode"in document&&(Di=document.documentMode);var E6=ts&&"TextEvent"in window&&!Di,h9=ts&&(!Zh||Di&&8<Di&&11>=Di),jp=" ",kp=!1;function f9(e,t){switch(e){case"keyup":return v6.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function m9(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var na=!1;function b6(e,t){switch(e){case"compositionend":return m9(t);case"keypress":return t.which!==32?null:(kp=!0,jp);case"textInput":return e=t.data,e===jp&&kp?null:e;default:return null}}function w6(e,t){if(na)return e==="compositionend"||!Zh&&f9(e,t)?(e=x9(),Ic=Yh=Ss=null,na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return h9&&t.locale!=="ko"?null:t.data;default:return null}}var C6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dp(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!C6[e.type]:t==="textarea"}function p9(e,t,n,r){Hv(r),t=o0(t,"onChange"),0<t.length&&(n=new Xh("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Fi=null,Xi=null;function B6(e){k9(e,0)}function U0(e){var t=oa(e);if(Ov(t))return e}function A6(e,t){if(e==="change")return t}var g9=!1;if(ts){var sd;if(ts){var od="oninput"in document;if(!od){var Fp=document.createElement("div");Fp.setAttribute("oninput","return;"),od=typeof Fp.oninput=="function"}sd=od}else sd=!1;g9=sd&&(!document.documentMode||9<document.documentMode)}function Np(){Fi&&(Fi.detachEvent("onpropertychange",y9),Xi=Fi=null)}function y9(e){if(e.propertyName==="value"&&U0(Xi)){var t=[];p9(t,Xi,e,Wh(e)),Xv(B6,t)}}function j6(e,t,n){e==="focusin"?(Np(),Fi=t,Xi=n,Fi.attachEvent("onpropertychange",y9)):e==="focusout"&&Np()}function k6(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return U0(Xi)}function D6(e,t){if(e==="click")return U0(t)}function F6(e,t){if(e==="input"||e==="change")return U0(t)}function N6(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Cr=typeof Object.is=="function"?Object.is:N6;function Ji(e,t){if(Cr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var o=n[r];if(!ex.call(t,o)||!Cr(e[o],t[o]))return!1}return!0}function _p(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Sp(e,t){var n=_p(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_p(n)}}function v9(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?v9(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function E9(){for(var e=window,t=Jc();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Jc(e.document)}return t}function ef(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _6(e){var t=E9(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&v9(n.ownerDocument.documentElement,n)){if(r!==null&&ef(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var o=n.textContent.length,a=Math.min(r.start,o);r=r.end===void 0?a:Math.min(r.end,o),!e.extend&&a>r&&(o=r,r=a,a=o),o=Sp(n,a);var i=Sp(n,r);o&&i&&(e.rangeCount!==1||e.anchorNode!==o.node||e.anchorOffset!==o.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&(t=t.createRange(),t.setStart(o.node,o.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var S6=ts&&"documentMode"in document&&11>=document.documentMode,ra=null,vx=null,Ni=null,Ex=!1;function Pp(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ex||ra==null||ra!==Jc(r)||(r=ra,"selectionStart"in r&&ef(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ni&&Ji(Ni,r)||(Ni=r,r=o0(vx,"onSelect"),0<r.length&&(t=new Xh("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=ra)))}function dc(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var sa={animationend:dc("Animation","AnimationEnd"),animationiteration:dc("Animation","AnimationIteration"),animationstart:dc("Animation","AnimationStart"),transitionend:dc("Transition","TransitionEnd")},ad={},b9={};ts&&(b9=document.createElement("div").style,"AnimationEvent"in window||(delete sa.animationend.animation,delete sa.animationiteration.animation,delete sa.animationstart.animation),"TransitionEvent"in window||delete sa.transitionend.transition);function V0(e){if(ad[e])return ad[e];if(!sa[e])return e;var t=sa[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in b9)return ad[e]=t[n];return e}var w9=V0("animationend"),C9=V0("animationiteration"),B9=V0("animationstart"),A9=V0("transitionend"),j9=new Map,Tp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Gs(e,t){j9.set(e,t),Ro(t,[e])}for(var id=0;id<Tp.length;id++){var ld=Tp[id],P6=ld.toLowerCase(),T6=ld[0].toUpperCase()+ld.slice(1);Gs(P6,"on"+T6)}Gs(w9,"onAnimationEnd");Gs(C9,"onAnimationIteration");Gs(B9,"onAnimationStart");Gs("dblclick","onDoubleClick");Gs("focusin","onFocus");Gs("focusout","onBlur");Gs(A9,"onTransitionEnd");ja("onMouseEnter",["mouseout","mouseover"]);ja("onMouseLeave",["mouseout","mouseover"]);ja("onPointerEnter",["pointerout","pointerover"]);ja("onPointerLeave",["pointerout","pointerover"]);Ro("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ro("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ro("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ro("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ro("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ci="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),I6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ci));function Ip(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,P2(r,t,void 0,e),e.currentTarget=null}function k9(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],o=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],c=l.instance,x=l.currentTarget;if(l=l.listener,c!==a&&o.isPropagationStopped())break e;Ip(o,l,x),a=c}else for(i=0;i<r.length;i++){if(l=r[i],c=l.instance,x=l.currentTarget,l=l.listener,c!==a&&o.isPropagationStopped())break e;Ip(o,l,x),a=c}}}if(e0)throw e=mx,e0=!1,mx=null,e}function jt(e,t){var n=t[Ax];n===void 0&&(n=t[Ax]=new Set);var r=e+"__bubble";n.has(r)||(D9(t,e,2,!1),n.add(r))}function cd(e,t,n){var r=0;t&&(r|=4),D9(n,e,r,t)}var xc="_reactListening"+Math.random().toString(36).slice(2);function Zi(e){if(!e[xc]){e[xc]=!0,Iv.forEach(function(n){n!=="selectionchange"&&(I6.has(n)||cd(n,!1,e),cd(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[xc]||(t[xc]=!0,cd("selectionchange",!1,t))}}function D9(e,t,n,r){switch(d9(t)){case 1:var o=Q2;break;case 4:o=Y2;break;default:o=Qh}n=o.bind(null,t,n,e),o=void 0,!fx||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),r?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function ud(e,t,n,r,o){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var i=r.tag;if(i===3||i===4){var l=r.stateNode.containerInfo;if(l===o||l.nodeType===8&&l.parentNode===o)break;if(i===4)for(i=r.return;i!==null;){var c=i.tag;if((c===3||c===4)&&(c=i.stateNode.containerInfo,c===o||c.nodeType===8&&c.parentNode===o))return;i=i.return}for(;l!==null;){if(i=bo(l),i===null)return;if(c=i.tag,c===5||c===6){r=a=i;continue e}l=l.parentNode}}r=r.return}Xv(function(){var x=a,d=Wh(n),f=[];e:{var m=j9.get(e);if(m!==void 0){var v=Xh,y=e;switch(e){case"keypress":if(Rc(n)===0)break e;case"keydown":case"keyup":v=d6;break;case"focusin":y="focus",v=rd;break;case"focusout":y="blur",v=rd;break;case"beforeblur":case"afterblur":v=rd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=Cp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=Z2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=f6;break;case w9:case C9:case B9:v=n6;break;case A9:v=p6;break;case"scroll":v=X2;break;case"wheel":v=y6;break;case"copy":case"cut":case"paste":v=s6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Ap}var C=(t&4)!==0,P=!C&&e==="scroll",B=C?m!==null?m+"Capture":null:m;C=[];for(var g=x,b;g!==null;){b=g;var j=b.stateNode;if(b.tag===5&&j!==null&&(b=j,B!==null&&(j=Hi(g,B),j!=null&&C.push(el(g,j,b)))),P)break;g=g.return}0<C.length&&(m=new v(m,y,null,n,d),f.push({event:m,listeners:C}))}}if(!(t&7)){e:{if(m=e==="mouseover"||e==="pointerover",v=e==="mouseout"||e==="pointerout",m&&n!==xx&&(y=n.relatedTarget||n.fromElement)&&(bo(y)||y[ns]))break e;if((v||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=x,y=y?bo(y):null,y!==null&&(P=Mo(y),y!==P||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=x),v!==y)){if(C=Cp,j="onMouseLeave",B="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(C=Ap,j="onPointerLeave",B="onPointerEnter",g="pointer"),P=v==null?m:oa(v),b=y==null?m:oa(y),m=new C(j,g+"leave",v,n,d),m.target=P,m.relatedTarget=b,j=null,bo(d)===x&&(C=new C(B,g+"enter",y,n,d),C.target=b,C.relatedTarget=P,j=C),P=j,v&&y)t:{for(C=v,B=y,g=0,b=C;b;b=Ko(b))g++;for(b=0,j=B;j;j=Ko(j))b++;for(;0<g-b;)C=Ko(C),g--;for(;0<b-g;)B=Ko(B),b--;for(;g--;){if(C===B||B!==null&&C===B.alternate)break t;C=Ko(C),B=Ko(B)}C=null}else C=null;v!==null&&Rp(f,m,v,C,!1),y!==null&&P!==null&&Rp(f,P,y,C,!0)}}e:{if(m=x?oa(x):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var D=A6;else if(Dp(m))if(g9)D=F6;else{D=k6;var w=j6}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=D6);if(D&&(D=D(e,x))){p9(f,D,n,d);break e}w&&w(e,m,x),e==="focusout"&&(w=m._wrapperState)&&w.controlled&&m.type==="number"&&ix(m,"number",m.value)}switch(w=x?oa(x):window,e){case"focusin":(Dp(w)||w.contentEditable==="true")&&(ra=w,vx=x,Ni=null);break;case"focusout":Ni=vx=ra=null;break;case"mousedown":Ex=!0;break;case"contextmenu":case"mouseup":case"dragend":Ex=!1,Pp(f,n,d);break;case"selectionchange":if(S6)break;case"keydown":case"keyup":Pp(f,n,d)}var E;if(Zh)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else na?f9(e,n)&&(N="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(h9&&n.locale!=="ko"&&(na||N!=="onCompositionStart"?N==="onCompositionEnd"&&na&&(E=x9()):(Ss=d,Yh="value"in Ss?Ss.value:Ss.textContent,na=!0)),w=o0(x,N),0<w.length&&(N=new Bp(N,e,null,n,d),f.push({event:N,listeners:w}),E?N.data=E:(E=m9(n),E!==null&&(N.data=E)))),(E=E6?b6(e,n):w6(e,n))&&(x=o0(x,"onBeforeInput"),0<x.length&&(d=new Bp("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:x}),d.data=E))}k9(f,t)})}function el(e,t,n){return{instance:e,listener:t,currentTarget:n}}function o0(e,t){for(var n=t+"Capture",r=[];e!==null;){var o=e,a=o.stateNode;o.tag===5&&a!==null&&(o=a,a=Hi(e,n),a!=null&&r.unshift(el(e,a,o)),a=Hi(e,t),a!=null&&r.push(el(e,a,o))),e=e.return}return r}function Ko(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Rp(e,t,n,r,o){for(var a=t._reactName,i=[];n!==null&&n!==r;){var l=n,c=l.alternate,x=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&x!==null&&(l=x,o?(c=Hi(n,a),c!=null&&i.unshift(el(n,c,l))):o||(c=Hi(n,a),c!=null&&i.push(el(n,c,l)))),n=n.return}i.length!==0&&e.push({event:t,listeners:i})}var R6=/\r\n?/g,M6=/\u0000|\uFFFD/g;function Mp(e){return(typeof e=="string"?e:""+e).replace(R6,`
`).replace(M6,"")}function hc(e,t,n){if(t=Mp(t),Mp(e)!==t&&n)throw Error(ke(425))}function a0(){}var bx=null,wx=null;function Cx(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Bx=typeof setTimeout=="function"?setTimeout:void 0,L6=typeof clearTimeout=="function"?clearTimeout:void 0,Lp=typeof Promise=="function"?Promise:void 0,$6=typeof queueMicrotask=="function"?queueMicrotask:typeof Lp<"u"?function(e){return Lp.resolve(null).then(e).catch(O6)}:Bx;function O6(e){setTimeout(function(){throw e})}function dd(e,t){var n=t,r=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"){if(r===0){e.removeChild(o),Yi(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=o}while(n);Yi(t)}function Ls(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function $p(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Wa=Math.random().toString(36).slice(2),_r="__reactFiber$"+Wa,tl="__reactProps$"+Wa,ns="__reactContainer$"+Wa,Ax="__reactEvents$"+Wa,U6="__reactListeners$"+Wa,V6="__reactHandles$"+Wa;function bo(e){var t=e[_r];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ns]||n[_r]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=$p(e);e!==null;){if(n=e[_r])return n;e=$p(e)}return t}e=n,n=e.parentNode}return null}function wl(e){return e=e[_r]||e[ns],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function oa(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ke(33))}function z0(e){return e[tl]||null}var jx=[],aa=-1;function Qs(e){return{current:e}}function Dt(e){0>aa||(e.current=jx[aa],jx[aa]=null,aa--)}function Bt(e,t){aa++,jx[aa]=e.current,e.current=t}var Ws={},pn=Qs(Ws),Tn=Qs(!1),_o=Ws;function ka(e,t){var n=e.type.contextTypes;if(!n)return Ws;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var o={},a;for(a in n)o[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function In(e){return e=e.childContextTypes,e!=null}function i0(){Dt(Tn),Dt(pn)}function Op(e,t,n){if(pn.current!==Ws)throw Error(ke(168));Bt(pn,t),Bt(Tn,n)}function F9(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var o in r)if(!(o in t))throw Error(ke(108,j2(e)||"Unknown",o));return Mt({},n,r)}function l0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ws,_o=pn.current,Bt(pn,e),Bt(Tn,Tn.current),!0}function Up(e,t,n){var r=e.stateNode;if(!r)throw Error(ke(169));n?(e=F9(e,t,_o),r.__reactInternalMemoizedMergedChildContext=e,Dt(Tn),Dt(pn),Bt(pn,e)):Dt(Tn),Bt(Tn,n)}var Qr=null,q0=!1,xd=!1;function N9(e){Qr===null?Qr=[e]:Qr.push(e)}function z6(e){q0=!0,N9(e)}function Ys(){if(!xd&&Qr!==null){xd=!0;var e=0,t=yt;try{var n=Qr;for(yt=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Qr=null,q0=!1}catch(o){throw Qr!==null&&(Qr=Qr.slice(e+1)),t9(Kh,Ys),o}finally{yt=t,xd=!1}}return null}var ia=[],la=0,c0=null,u0=0,Zn=[],er=0,So=null,Yr=1,Xr="";function fo(e,t){ia[la++]=u0,ia[la++]=c0,c0=e,u0=t}function _9(e,t,n){Zn[er++]=Yr,Zn[er++]=Xr,Zn[er++]=So,So=e;var r=Yr;e=Xr;var o=32-yr(r)-1;r&=~(1<<o),n+=1;var a=32-yr(t)+o;if(30<a){var i=o-o%5;a=(r&(1<<i)-1).toString(32),r>>=i,o-=i,Yr=1<<32-yr(t)+o|n<<o|r,Xr=a+e}else Yr=1<<a|n<<o|r,Xr=e}function tf(e){e.return!==null&&(fo(e,1),_9(e,1,0))}function nf(e){for(;e===c0;)c0=ia[--la],ia[la]=null,u0=ia[--la],ia[la]=null;for(;e===So;)So=Zn[--er],Zn[er]=null,Xr=Zn[--er],Zn[er]=null,Yr=Zn[--er],Zn[er]=null}var Un=null,On=null,Ft=!1,mr=null;function S9(e,t){var n=tr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Vp(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Un=e,On=Ls(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Un=e,On=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=So!==null?{id:Yr,overflow:Xr}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=tr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Un=e,On=null,!0):!1;default:return!1}}function kx(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Dx(e){if(Ft){var t=On;if(t){var n=t;if(!Vp(e,t)){if(kx(e))throw Error(ke(418));t=Ls(n.nextSibling);var r=Un;t&&Vp(e,t)?S9(r,n):(e.flags=e.flags&-4097|2,Ft=!1,Un=e)}}else{if(kx(e))throw Error(ke(418));e.flags=e.flags&-4097|2,Ft=!1,Un=e}}}function zp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Un=e}function fc(e){if(e!==Un)return!1;if(!Ft)return zp(e),Ft=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Cx(e.type,e.memoizedProps)),t&&(t=On)){if(kx(e))throw P9(),Error(ke(418));for(;t;)S9(e,t),t=Ls(t.nextSibling)}if(zp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ke(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){On=Ls(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}On=null}}else On=Un?Ls(e.stateNode.nextSibling):null;return!0}function P9(){for(var e=On;e;)e=Ls(e.nextSibling)}function Da(){On=Un=null,Ft=!1}function rf(e){mr===null?mr=[e]:mr.push(e)}var q6=us.ReactCurrentBatchConfig;function fi(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ke(309));var r=n.stateNode}if(!r)throw Error(ke(147,e));var o=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(i){var l=o.refs;i===null?delete l[a]:l[a]=i},t._stringRef=a,t)}if(typeof e!="string")throw Error(ke(284));if(!n._owner)throw Error(ke(290,e))}return e}function mc(e,t){throw e=Object.prototype.toString.call(t),Error(ke(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function qp(e){var t=e._init;return t(e._payload)}function T9(e){function t(B,g){if(e){var b=B.deletions;b===null?(B.deletions=[g],B.flags|=16):b.push(g)}}function n(B,g){if(!e)return null;for(;g!==null;)t(B,g),g=g.sibling;return null}function r(B,g){for(B=new Map;g!==null;)g.key!==null?B.set(g.key,g):B.set(g.index,g),g=g.sibling;return B}function o(B,g){return B=Vs(B,g),B.index=0,B.sibling=null,B}function a(B,g,b){return B.index=b,e?(b=B.alternate,b!==null?(b=b.index,b<g?(B.flags|=2,g):b):(B.flags|=2,g)):(B.flags|=1048576,g)}function i(B){return e&&B.alternate===null&&(B.flags|=2),B}function l(B,g,b,j){return g===null||g.tag!==6?(g=vd(b,B.mode,j),g.return=B,g):(g=o(g,b),g.return=B,g)}function c(B,g,b,j){var D=b.type;return D===ta?d(B,g,b.props.children,j,b.key):g!==null&&(g.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===As&&qp(D)===g.type)?(j=o(g,b.props),j.ref=fi(B,g,b),j.return=B,j):(j=zc(b.type,b.key,b.props,null,B.mode,j),j.ref=fi(B,g,b),j.return=B,j)}function x(B,g,b,j){return g===null||g.tag!==4||g.stateNode.containerInfo!==b.containerInfo||g.stateNode.implementation!==b.implementation?(g=Ed(b,B.mode,j),g.return=B,g):(g=o(g,b.children||[]),g.return=B,g)}function d(B,g,b,j,D){return g===null||g.tag!==7?(g=Do(b,B.mode,j,D),g.return=B,g):(g=o(g,b),g.return=B,g)}function f(B,g,b){if(typeof g=="string"&&g!==""||typeof g=="number")return g=vd(""+g,B.mode,b),g.return=B,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case sc:return b=zc(g.type,g.key,g.props,null,B.mode,b),b.ref=fi(B,null,g),b.return=B,b;case ea:return g=Ed(g,B.mode,b),g.return=B,g;case As:var j=g._init;return f(B,j(g._payload),b)}if(bi(g)||ci(g))return g=Do(g,B.mode,b,null),g.return=B,g;mc(B,g)}return null}function m(B,g,b,j){var D=g!==null?g.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return D!==null?null:l(B,g,""+b,j);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case sc:return b.key===D?c(B,g,b,j):null;case ea:return b.key===D?x(B,g,b,j):null;case As:return D=b._init,m(B,g,D(b._payload),j)}if(bi(b)||ci(b))return D!==null?null:d(B,g,b,j,null);mc(B,b)}return null}function v(B,g,b,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return B=B.get(b)||null,l(g,B,""+j,D);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case sc:return B=B.get(j.key===null?b:j.key)||null,c(g,B,j,D);case ea:return B=B.get(j.key===null?b:j.key)||null,x(g,B,j,D);case As:var w=j._init;return v(B,g,b,w(j._payload),D)}if(bi(j)||ci(j))return B=B.get(b)||null,d(g,B,j,D,null);mc(g,j)}return null}function y(B,g,b,j){for(var D=null,w=null,E=g,N=g=0,M=null;E!==null&&N<b.length;N++){E.index>N?(M=E,E=null):M=E.sibling;var L=m(B,E,b[N],j);if(L===null){E===null&&(E=M);break}e&&E&&L.alternate===null&&t(B,E),g=a(L,g,N),w===null?D=L:w.sibling=L,w=L,E=M}if(N===b.length)return n(B,E),Ft&&fo(B,N),D;if(E===null){for(;N<b.length;N++)E=f(B,b[N],j),E!==null&&(g=a(E,g,N),w===null?D=E:w.sibling=E,w=E);return Ft&&fo(B,N),D}for(E=r(B,E);N<b.length;N++)M=v(E,B,N,b[N],j),M!==null&&(e&&M.alternate!==null&&E.delete(M.key===null?N:M.key),g=a(M,g,N),w===null?D=M:w.sibling=M,w=M);return e&&E.forEach(function(J){return t(B,J)}),Ft&&fo(B,N),D}function C(B,g,b,j){var D=ci(b);if(typeof D!="function")throw Error(ke(150));if(b=D.call(b),b==null)throw Error(ke(151));for(var w=D=null,E=g,N=g=0,M=null,L=b.next();E!==null&&!L.done;N++,L=b.next()){E.index>N?(M=E,E=null):M=E.sibling;var J=m(B,E,L.value,j);if(J===null){E===null&&(E=M);break}e&&E&&J.alternate===null&&t(B,E),g=a(J,g,N),w===null?D=J:w.sibling=J,w=J,E=M}if(L.done)return n(B,E),Ft&&fo(B,N),D;if(E===null){for(;!L.done;N++,L=b.next())L=f(B,L.value,j),L!==null&&(g=a(L,g,N),w===null?D=L:w.sibling=L,w=L);return Ft&&fo(B,N),D}for(E=r(B,E);!L.done;N++,L=b.next())L=v(E,B,N,L.value,j),L!==null&&(e&&L.alternate!==null&&E.delete(L.key===null?N:L.key),g=a(L,g,N),w===null?D=L:w.sibling=L,w=L);return e&&E.forEach(function(se){return t(B,se)}),Ft&&fo(B,N),D}function P(B,g,b,j){if(typeof b=="object"&&b!==null&&b.type===ta&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case sc:e:{for(var D=b.key,w=g;w!==null;){if(w.key===D){if(D=b.type,D===ta){if(w.tag===7){n(B,w.sibling),g=o(w,b.props.children),g.return=B,B=g;break e}}else if(w.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===As&&qp(D)===w.type){n(B,w.sibling),g=o(w,b.props),g.ref=fi(B,w,b),g.return=B,B=g;break e}n(B,w);break}else t(B,w);w=w.sibling}b.type===ta?(g=Do(b.props.children,B.mode,j,b.key),g.return=B,B=g):(j=zc(b.type,b.key,b.props,null,B.mode,j),j.ref=fi(B,g,b),j.return=B,B=j)}return i(B);case ea:e:{for(w=b.key;g!==null;){if(g.key===w)if(g.tag===4&&g.stateNode.containerInfo===b.containerInfo&&g.stateNode.implementation===b.implementation){n(B,g.sibling),g=o(g,b.children||[]),g.return=B,B=g;break e}else{n(B,g);break}else t(B,g);g=g.sibling}g=Ed(b,B.mode,j),g.return=B,B=g}return i(B);case As:return w=b._init,P(B,g,w(b._payload),j)}if(bi(b))return y(B,g,b,j);if(ci(b))return C(B,g,b,j);mc(B,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,g!==null&&g.tag===6?(n(B,g.sibling),g=o(g,b),g.return=B,B=g):(n(B,g),g=vd(b,B.mode,j),g.return=B,B=g),i(B)):n(B,g)}return P}var Fa=T9(!0),I9=T9(!1),d0=Qs(null),x0=null,ca=null,sf=null;function of(){sf=ca=x0=null}function af(e){var t=d0.current;Dt(d0),e._currentValue=t}function Fx(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function wa(e,t){x0=e,sf=ca=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_n=!0),e.firstContext=null)}function sr(e){var t=e._currentValue;if(sf!==e)if(e={context:e,memoizedValue:t,next:null},ca===null){if(x0===null)throw Error(ke(308));ca=e,x0.dependencies={lanes:0,firstContext:e}}else ca=ca.next=e;return t}var wo=null;function lf(e){wo===null?wo=[e]:wo.push(e)}function R9(e,t,n,r){var o=t.interleaved;return o===null?(n.next=n,lf(t)):(n.next=o.next,o.next=n),t.interleaved=n,rs(e,r)}function rs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var js=!1;function cf(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function M9(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Zr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function $s(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,dt&2){var o=r.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),r.pending=t,rs(e,n)}return o=r.interleaved,o===null?(t.next=t,lf(r)):(t.next=o.next,o.next=t),r.interleaved=t,rs(e,n)}function Mc(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hh(e,n)}}function Wp(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?o=a=i:a=a.next=i,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function h0(e,t,n,r){var o=e.updateQueue;js=!1;var a=o.firstBaseUpdate,i=o.lastBaseUpdate,l=o.shared.pending;if(l!==null){o.shared.pending=null;var c=l,x=c.next;c.next=null,i===null?a=x:i.next=x,i=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==i&&(l===null?d.firstBaseUpdate=x:l.next=x,d.lastBaseUpdate=c))}if(a!==null){var f=o.baseState;i=0,d=x=c=null,l=a;do{var m=l.lane,v=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=e,C=l;switch(m=t,v=n,C.tag){case 1:if(y=C.payload,typeof y=="function"){f=y.call(v,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=C.payload,m=typeof y=="function"?y.call(v,f,m):y,m==null)break e;f=Mt({},f,m);break e;case 2:js=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,m=o.effects,m===null?o.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(x=d=v,c=f):d=d.next=v,i|=m;if(l=l.next,l===null){if(l=o.shared.pending,l===null)break;m=l,l=m.next,m.next=null,o.lastBaseUpdate=m,o.shared.pending=null}}while(!0);if(d===null&&(c=f),o.baseState=c,o.firstBaseUpdate=x,o.lastBaseUpdate=d,t=o.shared.interleaved,t!==null){o=t;do i|=o.lane,o=o.next;while(o!==t)}else a===null&&(o.shared.lanes=0);To|=i,e.lanes=i,e.memoizedState=f}}function Kp(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],o=r.callback;if(o!==null){if(r.callback=null,r=n,typeof o!="function")throw Error(ke(191,o));o.call(r)}}}var Cl={},Tr=Qs(Cl),nl=Qs(Cl),rl=Qs(Cl);function Co(e){if(e===Cl)throw Error(ke(174));return e}function uf(e,t){switch(Bt(rl,t),Bt(nl,e),Bt(Tr,Cl),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cx(t,e)}Dt(Tr),Bt(Tr,t)}function Na(){Dt(Tr),Dt(nl),Dt(rl)}function L9(e){Co(rl.current);var t=Co(Tr.current),n=cx(t,e.type);t!==n&&(Bt(nl,e),Bt(Tr,n))}function df(e){nl.current===e&&(Dt(Tr),Dt(nl))}var Pt=Qs(0);function f0(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hd=[];function xf(){for(var e=0;e<hd.length;e++)hd[e]._workInProgressVersionPrimary=null;hd.length=0}var Lc=us.ReactCurrentDispatcher,fd=us.ReactCurrentBatchConfig,Po=0,Rt=null,Gt=null,en=null,m0=!1,_i=!1,sl=0,W6=0;function dn(){throw Error(ke(321))}function hf(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Cr(e[n],t[n]))return!1;return!0}function ff(e,t,n,r,o,a){if(Po=a,Rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Lc.current=e===null||e.memoizedState===null?Q6:Y6,e=n(r,o),_i){a=0;do{if(_i=!1,sl=0,25<=a)throw Error(ke(301));a+=1,en=Gt=null,t.updateQueue=null,Lc.current=X6,e=n(r,o)}while(_i)}if(Lc.current=p0,t=Gt!==null&&Gt.next!==null,Po=0,en=Gt=Rt=null,m0=!1,t)throw Error(ke(300));return e}function mf(){var e=sl!==0;return sl=0,e}function Nr(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return en===null?Rt.memoizedState=en=e:en=en.next=e,en}function or(){if(Gt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Gt.next;var t=en===null?Rt.memoizedState:en.next;if(t!==null)en=t,Gt=e;else{if(e===null)throw Error(ke(310));Gt=e,e={memoizedState:Gt.memoizedState,baseState:Gt.baseState,baseQueue:Gt.baseQueue,queue:Gt.queue,next:null},en===null?Rt.memoizedState=en=e:en=en.next=e}return en}function ol(e,t){return typeof t=="function"?t(e):t}function md(e){var t=or(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=Gt,o=r.baseQueue,a=n.pending;if(a!==null){if(o!==null){var i=o.next;o.next=a.next,a.next=i}r.baseQueue=o=a,n.pending=null}if(o!==null){a=o.next,r=r.baseState;var l=i=null,c=null,x=a;do{var d=x.lane;if((Po&d)===d)c!==null&&(c=c.next={lane:0,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null}),r=x.hasEagerState?x.eagerState:e(r,x.action);else{var f={lane:d,action:x.action,hasEagerState:x.hasEagerState,eagerState:x.eagerState,next:null};c===null?(l=c=f,i=r):c=c.next=f,Rt.lanes|=d,To|=d}x=x.next}while(x!==null&&x!==a);c===null?i=r:c.next=l,Cr(r,t.memoizedState)||(_n=!0),t.memoizedState=r,t.baseState=i,t.baseQueue=c,n.lastRenderedState=r}if(e=n.interleaved,e!==null){o=e;do a=o.lane,Rt.lanes|=a,To|=a,o=o.next;while(o!==e)}else o===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function pd(e){var t=or(),n=t.queue;if(n===null)throw Error(ke(311));n.lastRenderedReducer=e;var r=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var i=o=o.next;do a=e(a,i.action),i=i.next;while(i!==o);Cr(a,t.memoizedState)||(_n=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function $9(){}function O9(e,t){var n=Rt,r=or(),o=t(),a=!Cr(r.memoizedState,o);if(a&&(r.memoizedState=o,_n=!0),r=r.queue,pf(z9.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||en!==null&&en.memoizedState.tag&1){if(n.flags|=2048,al(9,V9.bind(null,n,r,o,t),void 0,null),nn===null)throw Error(ke(349));Po&30||U9(n,t,o)}return o}function U9(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rt.updateQueue,t===null?(t={lastEffect:null,stores:null},Rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function V9(e,t,n,r){t.value=n,t.getSnapshot=r,q9(t)&&W9(e)}function z9(e,t,n){return n(function(){q9(t)&&W9(e)})}function q9(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Cr(e,n)}catch{return!0}}function W9(e){var t=rs(e,1);t!==null&&vr(t,e,1,-1)}function Hp(e){var t=Nr();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ol,lastRenderedState:e},t.queue=e,e=e.dispatch=G6.bind(null,Rt,e),[t.memoizedState,e]}function al(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Rt.updateQueue,t===null?(t={lastEffect:null,stores:null},Rt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function K9(){return or().memoizedState}function $c(e,t,n,r){var o=Nr();Rt.flags|=e,o.memoizedState=al(1|t,n,void 0,r===void 0?null:r)}function W0(e,t,n,r){var o=or();r=r===void 0?null:r;var a=void 0;if(Gt!==null){var i=Gt.memoizedState;if(a=i.destroy,r!==null&&hf(r,i.deps)){o.memoizedState=al(t,n,a,r);return}}Rt.flags|=e,o.memoizedState=al(1|t,n,a,r)}function Gp(e,t){return $c(8390656,8,e,t)}function pf(e,t){return W0(2048,8,e,t)}function H9(e,t){return W0(4,2,e,t)}function G9(e,t){return W0(4,4,e,t)}function Q9(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Y9(e,t,n){return n=n!=null?n.concat([e]):null,W0(4,4,Q9.bind(null,t,e),n)}function gf(){}function X9(e,t){var n=or();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hf(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function J9(e,t){var n=or();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&hf(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Z9(e,t,n){return Po&21?(Cr(n,t)||(n=s9(),Rt.lanes|=n,To|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_n=!0),e.memoizedState=n)}function K6(e,t){var n=yt;yt=n!==0&&4>n?n:4,e(!0);var r=fd.transition;fd.transition={};try{e(!1),t()}finally{yt=n,fd.transition=r}}function e8(){return or().memoizedState}function H6(e,t,n){var r=Us(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},t8(e))n8(t,n);else if(n=R9(e,t,n,r),n!==null){var o=wn();vr(n,e,r,o),r8(n,t,r)}}function G6(e,t,n){var r=Us(e),o={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(t8(e))n8(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var i=t.lastRenderedState,l=a(i,n);if(o.hasEagerState=!0,o.eagerState=l,Cr(l,i)){var c=t.interleaved;c===null?(o.next=o,lf(t)):(o.next=c.next,c.next=o),t.interleaved=o;return}}catch{}finally{}n=R9(e,t,o,r),n!==null&&(o=wn(),vr(n,e,r,o),r8(n,t,r))}}function t8(e){var t=e.alternate;return e===Rt||t!==null&&t===Rt}function n8(e,t){_i=m0=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function r8(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Hh(e,n)}}var p0={readContext:sr,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useInsertionEffect:dn,useLayoutEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useMutableSource:dn,useSyncExternalStore:dn,useId:dn,unstable_isNewReconciler:!1},Q6={readContext:sr,useCallback:function(e,t){return Nr().memoizedState=[e,t===void 0?null:t],e},useContext:sr,useEffect:Gp,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,$c(4194308,4,Q9.bind(null,t,e),n)},useLayoutEffect:function(e,t){return $c(4194308,4,e,t)},useInsertionEffect:function(e,t){return $c(4,2,e,t)},useMemo:function(e,t){var n=Nr();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Nr();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=H6.bind(null,Rt,e),[r.memoizedState,e]},useRef:function(e){var t=Nr();return e={current:e},t.memoizedState=e},useState:Hp,useDebugValue:gf,useDeferredValue:function(e){return Nr().memoizedState=e},useTransition:function(){var e=Hp(!1),t=e[0];return e=K6.bind(null,e[1]),Nr().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Rt,o=Nr();if(Ft){if(n===void 0)throw Error(ke(407));n=n()}else{if(n=t(),nn===null)throw Error(ke(349));Po&30||U9(r,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,Gp(z9.bind(null,r,a,e),[e]),r.flags|=2048,al(9,V9.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Nr(),t=nn.identifierPrefix;if(Ft){var n=Xr,r=Yr;n=(r&~(1<<32-yr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=sl++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=W6++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Y6={readContext:sr,useCallback:X9,useContext:sr,useEffect:pf,useImperativeHandle:Y9,useInsertionEffect:H9,useLayoutEffect:G9,useMemo:J9,useReducer:md,useRef:K9,useState:function(){return md(ol)},useDebugValue:gf,useDeferredValue:function(e){var t=or();return Z9(t,Gt.memoizedState,e)},useTransition:function(){var e=md(ol)[0],t=or().memoizedState;return[e,t]},useMutableSource:$9,useSyncExternalStore:O9,useId:e8,unstable_isNewReconciler:!1},X6={readContext:sr,useCallback:X9,useContext:sr,useEffect:pf,useImperativeHandle:Y9,useInsertionEffect:H9,useLayoutEffect:G9,useMemo:J9,useReducer:pd,useRef:K9,useState:function(){return pd(ol)},useDebugValue:gf,useDeferredValue:function(e){var t=or();return Gt===null?t.memoizedState=e:Z9(t,Gt.memoizedState,e)},useTransition:function(){var e=pd(ol)[0],t=or().memoizedState;return[e,t]},useMutableSource:$9,useSyncExternalStore:O9,useId:e8,unstable_isNewReconciler:!1};function xr(e,t){if(e&&e.defaultProps){t=Mt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Nx(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Mt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var K0={isMounted:function(e){return(e=e._reactInternals)?Mo(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=wn(),o=Us(e),a=Zr(r,o);a.payload=t,n!=null&&(a.callback=n),t=$s(e,a,o),t!==null&&(vr(t,e,o,r),Mc(t,e,o))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=wn(),o=Us(e),a=Zr(r,o);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=$s(e,a,o),t!==null&&(vr(t,e,o,r),Mc(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=wn(),r=Us(e),o=Zr(n,r);o.tag=2,t!=null&&(o.callback=t),t=$s(e,o,r),t!==null&&(vr(t,e,r,n),Mc(t,e,r))}};function Qp(e,t,n,r,o,a,i){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,i):t.prototype&&t.prototype.isPureReactComponent?!Ji(n,r)||!Ji(o,a):!0}function s8(e,t,n){var r=!1,o=Ws,a=t.contextType;return typeof a=="object"&&a!==null?a=sr(a):(o=In(t)?_o:pn.current,r=t.contextTypes,a=(r=r!=null)?ka(e,o):Ws),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=K0,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=o,e.__reactInternalMemoizedMaskedChildContext=a),t}function Yp(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&K0.enqueueReplaceState(t,t.state,null)}function _x(e,t,n,r){var o=e.stateNode;o.props=n,o.state=e.memoizedState,o.refs={},cf(e);var a=t.contextType;typeof a=="object"&&a!==null?o.context=sr(a):(a=In(t)?_o:pn.current,o.context=ka(e,a)),o.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Nx(e,t,a,n),o.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(t=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),t!==o.state&&K0.enqueueReplaceState(o,o.state,null),h0(e,n,o,r),o.state=e.memoizedState),typeof o.componentDidMount=="function"&&(e.flags|=4194308)}function _a(e,t){try{var n="",r=t;do n+=A2(r),r=r.return;while(r);var o=n}catch(a){o=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:o,digest:null}}function gd(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Sx(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var J6=typeof WeakMap=="function"?WeakMap:Map;function o8(e,t,n){n=Zr(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){y0||(y0=!0,Vx=r),Sx(e,t)},n}function a8(e,t,n){n=Zr(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var o=t.value;n.payload=function(){return r(o)},n.callback=function(){Sx(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Sx(e,t),typeof r!="function"&&(Os===null?Os=new Set([this]):Os.add(this));var i=t.stack;this.componentDidCatch(t.value,{componentStack:i!==null?i:""})}),n}function Xp(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new J6;var o=new Set;r.set(t,o)}else o=r.get(t),o===void 0&&(o=new Set,r.set(t,o));o.has(n)||(o.add(n),e=xw.bind(null,e,t,n),t.then(e,e))}function Jp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zp(e,t,n,r,o){return e.mode&1?(e.flags|=65536,e.lanes=o,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Zr(-1,1),t.tag=2,$s(n,t,1))),n.lanes|=1),e)}var Z6=us.ReactCurrentOwner,_n=!1;function vn(e,t,n,r){t.child=e===null?I9(t,null,n,r):Fa(t,e.child,n,r)}function eg(e,t,n,r,o){n=n.render;var a=t.ref;return wa(t,o),r=ff(e,t,n,r,a,o),n=mf(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ss(e,t,o)):(Ft&&n&&tf(t),t.flags|=1,vn(e,t,r,o),t.child)}function tg(e,t,n,r,o){if(e===null){var a=n.type;return typeof a=="function"&&!Af(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,i8(e,t,a,r,o)):(e=zc(n.type,null,r,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&o)){var i=a.memoizedProps;if(n=n.compare,n=n!==null?n:Ji,n(i,r)&&e.ref===t.ref)return ss(e,t,o)}return t.flags|=1,e=Vs(a,r),e.ref=t.ref,e.return=t,t.child=e}function i8(e,t,n,r,o){if(e!==null){var a=e.memoizedProps;if(Ji(a,r)&&e.ref===t.ref)if(_n=!1,t.pendingProps=r=a,(e.lanes&o)!==0)e.flags&131072&&(_n=!0);else return t.lanes=e.lanes,ss(e,t,o)}return Px(e,t,n,r,o)}function l8(e,t,n){var r=t.pendingProps,o=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Bt(da,$n),$n|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Bt(da,$n),$n|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Bt(da,$n),$n|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Bt(da,$n),$n|=r;return vn(e,t,o,n),t.child}function c8(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Px(e,t,n,r,o){var a=In(n)?_o:pn.current;return a=ka(t,a),wa(t,o),n=ff(e,t,n,r,a,o),r=mf(),e!==null&&!_n?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~o,ss(e,t,o)):(Ft&&r&&tf(t),t.flags|=1,vn(e,t,n,o),t.child)}function ng(e,t,n,r,o){if(In(n)){var a=!0;l0(t)}else a=!1;if(wa(t,o),t.stateNode===null)Oc(e,t),s8(t,n,r),_x(t,n,r,o),r=!0;else if(e===null){var i=t.stateNode,l=t.memoizedProps;i.props=l;var c=i.context,x=n.contextType;typeof x=="object"&&x!==null?x=sr(x):(x=In(n)?_o:pn.current,x=ka(t,x));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof i.getSnapshotBeforeUpdate=="function";f||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==r||c!==x)&&Yp(t,i,r,x),js=!1;var m=t.memoizedState;i.state=m,h0(t,r,i,o),c=t.memoizedState,l!==r||m!==c||Tn.current||js?(typeof d=="function"&&(Nx(t,n,d,r),c=t.memoizedState),(l=js||Qp(t,n,l,r,m,c,x))?(f||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount()),typeof i.componentDidMount=="function"&&(t.flags|=4194308)):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=x,r=l):(typeof i.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,M9(e,t),l=t.memoizedProps,x=t.type===t.elementType?l:xr(t.type,l),i.props=x,f=t.pendingProps,m=i.context,c=n.contextType,typeof c=="object"&&c!==null?c=sr(c):(c=In(n)?_o:pn.current,c=ka(t,c));var v=n.getDerivedStateFromProps;(d=typeof v=="function"||typeof i.getSnapshotBeforeUpdate=="function")||typeof i.UNSAFE_componentWillReceiveProps!="function"&&typeof i.componentWillReceiveProps!="function"||(l!==f||m!==c)&&Yp(t,i,r,c),js=!1,m=t.memoizedState,i.state=m,h0(t,r,i,o);var y=t.memoizedState;l!==f||m!==y||Tn.current||js?(typeof v=="function"&&(Nx(t,n,v,r),y=t.memoizedState),(x=js||Qp(t,n,x,r,m,y,c)||!1)?(d||typeof i.UNSAFE_componentWillUpdate!="function"&&typeof i.componentWillUpdate!="function"||(typeof i.componentWillUpdate=="function"&&i.componentWillUpdate(r,y,c),typeof i.UNSAFE_componentWillUpdate=="function"&&i.UNSAFE_componentWillUpdate(r,y,c)),typeof i.componentDidUpdate=="function"&&(t.flags|=4),typeof i.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=y),i.props=r,i.state=y,i.context=c,r=x):(typeof i.componentDidUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),typeof i.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Tx(e,t,n,r,a,o)}function Tx(e,t,n,r,o,a){c8(e,t);var i=(t.flags&128)!==0;if(!r&&!i)return o&&Up(t,n,!1),ss(e,t,a);r=t.stateNode,Z6.current=t;var l=i&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&i?(t.child=Fa(t,e.child,null,a),t.child=Fa(t,null,l,a)):vn(e,t,l,a),t.memoizedState=r.state,o&&Up(t,n,!0),t.child}function u8(e){var t=e.stateNode;t.pendingContext?Op(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Op(e,t.context,!1),uf(e,t.containerInfo)}function rg(e,t,n,r,o){return Da(),rf(o),t.flags|=256,vn(e,t,n,r),t.child}var Ix={dehydrated:null,treeContext:null,retryLane:0};function Rx(e){return{baseLanes:e,cachePool:null,transitions:null}}function d8(e,t,n){var r=t.pendingProps,o=Pt.current,a=!1,i=(t.flags&128)!==0,l;if((l=i)||(l=e!==null&&e.memoizedState===null?!1:(o&2)!==0),l?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(o|=1),Bt(Pt,o&1),e===null)return Dx(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(i=r.children,e=r.fallback,a?(r=t.mode,a=t.child,i={mode:"hidden",children:i},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=i):a=Q0(i,r,0,null),e=Do(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Rx(n),t.memoizedState=Ix,e):yf(t,i));if(o=e.memoizedState,o!==null&&(l=o.dehydrated,l!==null))return ew(e,t,i,r,l,o,n);if(a){a=r.fallback,i=t.mode,o=e.child,l=o.sibling;var c={mode:"hidden",children:r.children};return!(i&1)&&t.child!==o?(r=t.child,r.childLanes=0,r.pendingProps=c,t.deletions=null):(r=Vs(o,c),r.subtreeFlags=o.subtreeFlags&14680064),l!==null?a=Vs(l,a):(a=Do(a,i,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,i=e.child.memoizedState,i=i===null?Rx(n):{baseLanes:i.baseLanes|n,cachePool:null,transitions:i.transitions},a.memoizedState=i,a.childLanes=e.childLanes&~n,t.memoizedState=Ix,r}return a=e.child,e=a.sibling,r=Vs(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function yf(e,t){return t=Q0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function pc(e,t,n,r){return r!==null&&rf(r),Fa(t,e.child,null,n),e=yf(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ew(e,t,n,r,o,a,i){if(n)return t.flags&256?(t.flags&=-257,r=gd(Error(ke(422))),pc(e,t,i,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,o=t.mode,r=Q0({mode:"visible",children:r.children},o,0,null),a=Do(a,o,i,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&Fa(t,e.child,null,i),t.child.memoizedState=Rx(i),t.memoizedState=Ix,a);if(!(t.mode&1))return pc(e,t,i,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var l=r.dgst;return r=l,a=Error(ke(419)),r=gd(a,r,void 0),pc(e,t,i,r)}if(l=(i&e.childLanes)!==0,_n||l){if(r=nn,r!==null){switch(i&-i){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|i)?0:o,o!==0&&o!==a.retryLane&&(a.retryLane=o,rs(e,o),vr(r,e,o,-1))}return Bf(),r=gd(Error(ke(421))),pc(e,t,i,r)}return o.data==="$?"?(t.flags|=128,t.child=e.child,t=hw.bind(null,e),o._reactRetry=t,null):(e=a.treeContext,On=Ls(o.nextSibling),Un=t,Ft=!0,mr=null,e!==null&&(Zn[er++]=Yr,Zn[er++]=Xr,Zn[er++]=So,Yr=e.id,Xr=e.overflow,So=t),t=yf(t,r.children),t.flags|=4096,t)}function sg(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Fx(e.return,t,n)}function yd(e,t,n,r,o){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:o}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=o)}function x8(e,t,n){var r=t.pendingProps,o=r.revealOrder,a=r.tail;if(vn(e,t,r.children,n),r=Pt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sg(e,n,t);else if(e.tag===19)sg(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Bt(Pt,r),!(t.mode&1))t.memoizedState=null;else switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&f0(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),yd(t,!1,o,n,a);break;case"backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&f0(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}yd(t,!0,n,null,a);break;case"together":yd(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Oc(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ss(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),To|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(ke(153));if(t.child!==null){for(e=t.child,n=Vs(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Vs(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function tw(e,t,n){switch(t.tag){case 3:u8(t),Da();break;case 5:L9(t);break;case 1:In(t.type)&&l0(t);break;case 4:uf(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,o=t.memoizedProps.value;Bt(d0,r._currentValue),r._currentValue=o;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Bt(Pt,Pt.current&1),t.flags|=128,null):n&t.child.childLanes?d8(e,t,n):(Bt(Pt,Pt.current&1),e=ss(e,t,n),e!==null?e.sibling:null);Bt(Pt,Pt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return x8(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Bt(Pt,Pt.current),r)break;return null;case 22:case 23:return t.lanes=0,l8(e,t,n)}return ss(e,t,n)}var h8,Mx,f8,m8;h8=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Mx=function(){};f8=function(e,t,n,r){var o=e.memoizedProps;if(o!==r){e=t.stateNode,Co(Tr.current);var a=null;switch(n){case"input":o=ox(e,o),r=ox(e,r),a=[];break;case"select":o=Mt({},o,{value:void 0}),r=Mt({},r,{value:void 0}),a=[];break;case"textarea":o=lx(e,o),r=lx(e,r),a=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=a0)}ux(n,r);var i;n=null;for(x in o)if(!r.hasOwnProperty(x)&&o.hasOwnProperty(x)&&o[x]!=null)if(x==="style"){var l=o[x];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else x!=="dangerouslySetInnerHTML"&&x!=="children"&&x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&x!=="autoFocus"&&(Wi.hasOwnProperty(x)?a||(a=[]):(a=a||[]).push(x,null));for(x in r){var c=r[x];if(l=o!=null?o[x]:void 0,r.hasOwnProperty(x)&&c!==l&&(c!=null||l!=null))if(x==="style")if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(a||(a=[]),a.push(x,n)),n=c;else x==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(x,c)):x==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(x,""+c):x!=="suppressContentEditableWarning"&&x!=="suppressHydrationWarning"&&(Wi.hasOwnProperty(x)?(c!=null&&x==="onScroll"&&jt("scroll",e),a||l===c||(a=[])):(a=a||[]).push(x,c))}n&&(a=a||[]).push("style",n);var x=a;(t.updateQueue=x)&&(t.flags|=4)}};m8=function(e,t,n,r){n!==r&&(t.flags|=4)};function mi(e,t){if(!Ft)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function xn(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function nw(e,t,n){var r=t.pendingProps;switch(nf(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(t),null;case 1:return In(t.type)&&i0(),xn(t),null;case 3:return r=t.stateNode,Na(),Dt(Tn),Dt(pn),xf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(fc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mr!==null&&(Wx(mr),mr=null))),Mx(e,t),xn(t),null;case 5:df(t);var o=Co(rl.current);if(n=t.type,e!==null&&t.stateNode!=null)f8(e,t,n,r,o),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ke(166));return xn(t),null}if(e=Co(Tr.current),fc(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[_r]=t,r[tl]=a,e=(t.mode&1)!==0,n){case"dialog":jt("cancel",r),jt("close",r);break;case"iframe":case"object":case"embed":jt("load",r);break;case"video":case"audio":for(o=0;o<Ci.length;o++)jt(Ci[o],r);break;case"source":jt("error",r);break;case"img":case"image":case"link":jt("error",r),jt("load",r);break;case"details":jt("toggle",r);break;case"input":hp(r,a),jt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},jt("invalid",r);break;case"textarea":mp(r,a),jt("invalid",r)}ux(n,a),o=null;for(var i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="children"?typeof l=="string"?r.textContent!==l&&(a.suppressHydrationWarning!==!0&&hc(r.textContent,l,e),o=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&hc(r.textContent,l,e),o=["children",""+l]):Wi.hasOwnProperty(i)&&l!=null&&i==="onScroll"&&jt("scroll",r)}switch(n){case"input":oc(r),fp(r,a,!0);break;case"textarea":oc(r),pp(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=a0)}r=o,t.updateQueue=r,r!==null&&(t.flags|=4)}else{i=o.nodeType===9?o:o.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=zv(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=i.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=i.createElement(n,{is:r.is}):(e=i.createElement(n),n==="select"&&(i=e,r.multiple?i.multiple=!0:r.size&&(i.size=r.size))):e=i.createElementNS(e,n),e[_r]=t,e[tl]=r,h8(e,t,!1,!1),t.stateNode=e;e:{switch(i=dx(n,r),n){case"dialog":jt("cancel",e),jt("close",e),o=r;break;case"iframe":case"object":case"embed":jt("load",e),o=r;break;case"video":case"audio":for(o=0;o<Ci.length;o++)jt(Ci[o],e);o=r;break;case"source":jt("error",e),o=r;break;case"img":case"image":case"link":jt("error",e),jt("load",e),o=r;break;case"details":jt("toggle",e),o=r;break;case"input":hp(e,r),o=ox(e,r),jt("invalid",e);break;case"option":o=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},o=Mt({},r,{value:void 0}),jt("invalid",e);break;case"textarea":mp(e,r),o=lx(e,r),jt("invalid",e);break;default:o=r}ux(n,o),l=o;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Kv(e,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&qv(e,c)):a==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Ki(e,c):typeof c=="number"&&Ki(e,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wi.hasOwnProperty(a)?c!=null&&a==="onScroll"&&jt("scroll",e):c!=null&&Uh(e,a,c,i))}switch(n){case"input":oc(e),fp(e,r,!1);break;case"textarea":oc(e),pp(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qs(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?ya(e,!!r.multiple,a,!1):r.defaultValue!=null&&ya(e,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(e.onclick=a0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return xn(t),null;case 6:if(e&&t.stateNode!=null)m8(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ke(166));if(n=Co(rl.current),Co(Tr.current),fc(t)){if(r=t.stateNode,n=t.memoizedProps,r[_r]=t,(a=r.nodeValue!==n)&&(e=Un,e!==null))switch(e.tag){case 3:hc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&hc(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_r]=t,t.stateNode=r}return xn(t),null;case 13:if(Dt(Pt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ft&&On!==null&&t.mode&1&&!(t.flags&128))P9(),Da(),t.flags|=98560,a=!1;else if(a=fc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(ke(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(ke(317));a[_r]=t}else Da(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;xn(t),a=!1}else mr!==null&&(Wx(mr),mr=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Pt.current&1?Yt===0&&(Yt=3):Bf())),t.updateQueue!==null&&(t.flags|=4),xn(t),null);case 4:return Na(),Mx(e,t),e===null&&Zi(t.stateNode.containerInfo),xn(t),null;case 10:return af(t.type._context),xn(t),null;case 17:return In(t.type)&&i0(),xn(t),null;case 19:if(Dt(Pt),a=t.memoizedState,a===null)return xn(t),null;if(r=(t.flags&128)!==0,i=a.rendering,i===null)if(r)mi(a,!1);else{if(Yt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(i=f0(e),i!==null){for(t.flags|=128,mi(a,!1),r=i.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,i=a.alternate,i===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=i.childLanes,a.lanes=i.lanes,a.child=i.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=i.memoizedProps,a.memoizedState=i.memoizedState,a.updateQueue=i.updateQueue,a.type=i.type,e=i.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Bt(Pt,Pt.current&1|2),t.child}e=e.sibling}a.tail!==null&&Wt()>Sa&&(t.flags|=128,r=!0,mi(a,!1),t.lanes=4194304)}else{if(!r)if(e=f0(i),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),mi(a,!0),a.tail===null&&a.tailMode==="hidden"&&!i.alternate&&!Ft)return xn(t),null}else 2*Wt()-a.renderingStartTime>Sa&&n!==1073741824&&(t.flags|=128,r=!0,mi(a,!1),t.lanes=4194304);a.isBackwards?(i.sibling=t.child,t.child=i):(n=a.last,n!==null?n.sibling=i:t.child=i,a.last=i)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Wt(),t.sibling=null,n=Pt.current,Bt(Pt,r?n&1|2:n&1),t):(xn(t),null);case 22:case 23:return Cf(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?$n&1073741824&&(xn(t),t.subtreeFlags&6&&(t.flags|=8192)):xn(t),null;case 24:return null;case 25:return null}throw Error(ke(156,t.tag))}function rw(e,t){switch(nf(t),t.tag){case 1:return In(t.type)&&i0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Na(),Dt(Tn),Dt(pn),xf(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return df(t),null;case 13:if(Dt(Pt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ke(340));Da()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Dt(Pt),null;case 4:return Na(),null;case 10:return af(t.type._context),null;case 22:case 23:return Cf(),null;case 24:return null;default:return null}}var gc=!1,fn=!1,sw=typeof WeakSet=="function"?WeakSet:Set,Ve=null;function ua(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){$t(e,t,r)}else n.current=null}function Lx(e,t,n){try{n()}catch(r){$t(e,t,r)}}var og=!1;function ow(e,t){if(bx=r0,e=E9(),ef(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var o=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var i=0,l=-1,c=-1,x=0,d=0,f=e,m=null;t:for(;;){for(var v;f!==n||o!==0&&f.nodeType!==3||(l=i+o),f!==a||r!==0&&f.nodeType!==3||(c=i+r),f.nodeType===3&&(i+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===e)break t;if(m===n&&++x===o&&(l=i),m===a&&++d===r&&(c=i),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(wx={focusedElem:e,selectionRange:n},r0=!1,Ve=t;Ve!==null;)if(t=Ve,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ve=e;else for(;Ve!==null;){t=Ve;try{var y=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var C=y.memoizedProps,P=y.memoizedState,B=t.stateNode,g=B.getSnapshotBeforeUpdate(t.elementType===t.type?C:xr(t.type,C),P);B.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(j){$t(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,Ve=e;break}Ve=t.return}return y=og,og=!1,y}function Si(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&e)===e){var a=o.destroy;o.destroy=void 0,a!==void 0&&Lx(t,n,a)}o=o.next}while(o!==r)}}function H0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function $x(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function p8(e){var t=e.alternate;t!==null&&(e.alternate=null,p8(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[_r],delete t[tl],delete t[Ax],delete t[U6],delete t[V6])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function g8(e){return e.tag===5||e.tag===3||e.tag===4}function ag(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||g8(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ox(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=a0));else if(r!==4&&(e=e.child,e!==null))for(Ox(e,t,n),e=e.sibling;e!==null;)Ox(e,t,n),e=e.sibling}function Ux(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Ux(e,t,n),e=e.sibling;e!==null;)Ux(e,t,n),e=e.sibling}var rn=null,hr=!1;function bs(e,t,n){for(n=n.child;n!==null;)y8(e,t,n),n=n.sibling}function y8(e,t,n){if(Pr&&typeof Pr.onCommitFiberUnmount=="function")try{Pr.onCommitFiberUnmount($0,n)}catch{}switch(n.tag){case 5:fn||ua(n,t);case 6:var r=rn,o=hr;rn=null,bs(e,t,n),rn=r,hr=o,rn!==null&&(hr?(e=rn,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rn.removeChild(n.stateNode));break;case 18:rn!==null&&(hr?(e=rn,n=n.stateNode,e.nodeType===8?dd(e.parentNode,n):e.nodeType===1&&dd(e,n),Yi(e)):dd(rn,n.stateNode));break;case 4:r=rn,o=hr,rn=n.stateNode.containerInfo,hr=!0,bs(e,t,n),rn=r,hr=o;break;case 0:case 11:case 14:case 15:if(!fn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var a=o,i=a.destroy;a=a.tag,i!==void 0&&(a&2||a&4)&&Lx(n,t,i),o=o.next}while(o!==r)}bs(e,t,n);break;case 1:if(!fn&&(ua(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){$t(n,t,l)}bs(e,t,n);break;case 21:bs(e,t,n);break;case 22:n.mode&1?(fn=(r=fn)||n.memoizedState!==null,bs(e,t,n),fn=r):bs(e,t,n);break;default:bs(e,t,n)}}function ig(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new sw),t.forEach(function(r){var o=fw.bind(null,e,r);n.has(r)||(n.add(r),r.then(o,o))})}}function cr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var o=n[r];try{var a=e,i=t,l=i;e:for(;l!==null;){switch(l.tag){case 5:rn=l.stateNode,hr=!1;break e;case 3:rn=l.stateNode.containerInfo,hr=!0;break e;case 4:rn=l.stateNode.containerInfo,hr=!0;break e}l=l.return}if(rn===null)throw Error(ke(160));y8(a,i,o),rn=null,hr=!1;var c=o.alternate;c!==null&&(c.return=null),o.return=null}catch(x){$t(o,t,x)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)v8(t,e),t=t.sibling}function v8(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(cr(t,e),Fr(e),r&4){try{Si(3,e,e.return),H0(3,e)}catch(C){$t(e,e.return,C)}try{Si(5,e,e.return)}catch(C){$t(e,e.return,C)}}break;case 1:cr(t,e),Fr(e),r&512&&n!==null&&ua(n,n.return);break;case 5:if(cr(t,e),Fr(e),r&512&&n!==null&&ua(n,n.return),e.flags&32){var o=e.stateNode;try{Ki(o,"")}catch(C){$t(e,e.return,C)}}if(r&4&&(o=e.stateNode,o!=null)){var a=e.memoizedProps,i=n!==null?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&Uv(o,a),dx(l,i);var x=dx(l,a);for(i=0;i<c.length;i+=2){var d=c[i],f=c[i+1];d==="style"?Kv(o,f):d==="dangerouslySetInnerHTML"?qv(o,f):d==="children"?Ki(o,f):Uh(o,d,f,x)}switch(l){case"input":ax(o,a);break;case"textarea":Vv(o,a);break;case"select":var m=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!a.multiple;var v=a.value;v!=null?ya(o,!!a.multiple,v,!1):m!==!!a.multiple&&(a.defaultValue!=null?ya(o,!!a.multiple,a.defaultValue,!0):ya(o,!!a.multiple,a.multiple?[]:"",!1))}o[tl]=a}catch(C){$t(e,e.return,C)}}break;case 6:if(cr(t,e),Fr(e),r&4){if(e.stateNode===null)throw Error(ke(162));o=e.stateNode,a=e.memoizedProps;try{o.nodeValue=a}catch(C){$t(e,e.return,C)}}break;case 3:if(cr(t,e),Fr(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Yi(t.containerInfo)}catch(C){$t(e,e.return,C)}break;case 4:cr(t,e),Fr(e);break;case 13:cr(t,e),Fr(e),o=e.child,o.flags&8192&&(a=o.memoizedState!==null,o.stateNode.isHidden=a,!a||o.alternate!==null&&o.alternate.memoizedState!==null||(bf=Wt())),r&4&&ig(e);break;case 22:if(d=n!==null&&n.memoizedState!==null,e.mode&1?(fn=(x=fn)||d,cr(t,e),fn=x):cr(t,e),Fr(e),r&8192){if(x=e.memoizedState!==null,(e.stateNode.isHidden=x)&&!d&&e.mode&1)for(Ve=e,d=e.child;d!==null;){for(f=Ve=d;Ve!==null;){switch(m=Ve,v=m.child,m.tag){case 0:case 11:case 14:case 15:Si(4,m,m.return);break;case 1:ua(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{t=r,y.props=t.memoizedProps,y.state=t.memoizedState,y.componentWillUnmount()}catch(C){$t(r,n,C)}}break;case 5:ua(m,m.return);break;case 22:if(m.memoizedState!==null){cg(f);continue}}v!==null?(v.return=m,Ve=v):cg(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{o=f.stateNode,x?(a=o.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=f.stateNode,c=f.memoizedProps.style,i=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Wv("display",i))}catch(C){$t(e,e.return,C)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=x?"":f.memoizedProps}catch(C){$t(e,e.return,C)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:cr(t,e),Fr(e),r&4&&ig(e);break;case 21:break;default:cr(t,e),Fr(e)}}function Fr(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(g8(n)){var r=n;break e}n=n.return}throw Error(ke(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ki(o,""),r.flags&=-33);var a=ag(e);Ux(e,a,o);break;case 3:case 4:var i=r.stateNode.containerInfo,l=ag(e);Ox(e,l,i);break;default:throw Error(ke(161))}}catch(c){$t(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function aw(e,t,n){Ve=e,E8(e)}function E8(e,t,n){for(var r=(e.mode&1)!==0;Ve!==null;){var o=Ve,a=o.child;if(o.tag===22&&r){var i=o.memoizedState!==null||gc;if(!i){var l=o.alternate,c=l!==null&&l.memoizedState!==null||fn;l=gc;var x=fn;if(gc=i,(fn=c)&&!x)for(Ve=o;Ve!==null;)i=Ve,c=i.child,i.tag===22&&i.memoizedState!==null?ug(o):c!==null?(c.return=i,Ve=c):ug(o);for(;a!==null;)Ve=a,E8(a),a=a.sibling;Ve=o,gc=l,fn=x}lg(e)}else o.subtreeFlags&8772&&a!==null?(a.return=o,Ve=a):lg(e)}}function lg(e){for(;Ve!==null;){var t=Ve;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:fn||H0(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!fn)if(n===null)r.componentDidMount();else{var o=t.elementType===t.type?n.memoizedProps:xr(t.type,n.memoizedProps);r.componentDidUpdate(o,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Kp(t,a,r);break;case 3:var i=t.updateQueue;if(i!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Kp(t,i,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var x=t.alternate;if(x!==null){var d=x.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Yi(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}fn||t.flags&512&&$x(t)}catch(m){$t(t,t.return,m)}}if(t===e){Ve=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ve=n;break}Ve=t.return}}function cg(e){for(;Ve!==null;){var t=Ve;if(t===e){Ve=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ve=n;break}Ve=t.return}}function ug(e){for(;Ve!==null;){var t=Ve;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{H0(4,t)}catch(c){$t(t,n,c)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var o=t.return;try{r.componentDidMount()}catch(c){$t(t,o,c)}}var a=t.return;try{$x(t)}catch(c){$t(t,a,c)}break;case 5:var i=t.return;try{$x(t)}catch(c){$t(t,i,c)}}}catch(c){$t(t,t.return,c)}if(t===e){Ve=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ve=l;break}Ve=t.return}}var iw=Math.ceil,g0=us.ReactCurrentDispatcher,vf=us.ReactCurrentOwner,nr=us.ReactCurrentBatchConfig,dt=0,nn=null,Ht=null,on=0,$n=0,da=Qs(0),Yt=0,il=null,To=0,G0=0,Ef=0,Pi=null,Dn=null,bf=0,Sa=1/0,Hr=null,y0=!1,Vx=null,Os=null,yc=!1,Ps=null,v0=0,Ti=0,zx=null,Uc=-1,Vc=0;function wn(){return dt&6?Wt():Uc!==-1?Uc:Uc=Wt()}function Us(e){return e.mode&1?dt&2&&on!==0?on&-on:q6.transition!==null?(Vc===0&&(Vc=s9()),Vc):(e=yt,e!==0||(e=window.event,e=e===void 0?16:d9(e.type)),e):1}function vr(e,t,n,r){if(50<Ti)throw Ti=0,zx=null,Error(ke(185));El(e,n,r),(!(dt&2)||e!==nn)&&(e===nn&&(!(dt&2)&&(G0|=n),Yt===4&&Fs(e,on)),Rn(e,r),n===1&&dt===0&&!(t.mode&1)&&(Sa=Wt()+500,q0&&Ys()))}function Rn(e,t){var n=e.callbackNode;q2(e,t);var r=n0(e,e===nn?on:0);if(r===0)n!==null&&vp(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&vp(n),t===1)e.tag===0?z6(dg.bind(null,e)):N9(dg.bind(null,e)),$6(function(){!(dt&6)&&Ys()}),n=null;else{switch(o9(r)){case 1:n=Kh;break;case 4:n=n9;break;case 16:n=t0;break;case 536870912:n=r9;break;default:n=t0}n=D8(n,b8.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function b8(e,t){if(Uc=-1,Vc=0,dt&6)throw Error(ke(327));var n=e.callbackNode;if(Ca()&&e.callbackNode!==n)return null;var r=n0(e,e===nn?on:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=E0(e,r);else{t=r;var o=dt;dt|=2;var a=C8();(nn!==e||on!==t)&&(Hr=null,Sa=Wt()+500,ko(e,t));do try{uw();break}catch(l){w8(e,l)}while(!0);of(),g0.current=a,dt=o,Ht!==null?t=0:(nn=null,on=0,t=Yt)}if(t!==0){if(t===2&&(o=px(e),o!==0&&(r=o,t=qx(e,o))),t===1)throw n=il,ko(e,0),Fs(e,r),Rn(e,Wt()),n;if(t===6)Fs(e,r);else{if(o=e.current.alternate,!(r&30)&&!lw(o)&&(t=E0(e,r),t===2&&(a=px(e),a!==0&&(r=a,t=qx(e,a))),t===1))throw n=il,ko(e,0),Fs(e,r),Rn(e,Wt()),n;switch(e.finishedWork=o,e.finishedLanes=r,t){case 0:case 1:throw Error(ke(345));case 2:mo(e,Dn,Hr);break;case 3:if(Fs(e,r),(r&130023424)===r&&(t=bf+500-Wt(),10<t)){if(n0(e,0)!==0)break;if(o=e.suspendedLanes,(o&r)!==r){wn(),e.pingedLanes|=e.suspendedLanes&o;break}e.timeoutHandle=Bx(mo.bind(null,e,Dn,Hr),t);break}mo(e,Dn,Hr);break;case 4:if(Fs(e,r),(r&4194240)===r)break;for(t=e.eventTimes,o=-1;0<r;){var i=31-yr(r);a=1<<i,i=t[i],i>o&&(o=i),r&=~a}if(r=o,r=Wt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*iw(r/1960))-r,10<r){e.timeoutHandle=Bx(mo.bind(null,e,Dn,Hr),r);break}mo(e,Dn,Hr);break;case 5:mo(e,Dn,Hr);break;default:throw Error(ke(329))}}}return Rn(e,Wt()),e.callbackNode===n?b8.bind(null,e):null}function qx(e,t){var n=Pi;return e.current.memoizedState.isDehydrated&&(ko(e,t).flags|=256),e=E0(e,t),e!==2&&(t=Dn,Dn=n,t!==null&&Wx(t)),e}function Wx(e){Dn===null?Dn=e:Dn.push.apply(Dn,e)}function lw(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var o=n[r],a=o.getSnapshot;o=o.value;try{if(!Cr(a(),o))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Fs(e,t){for(t&=~Ef,t&=~G0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-yr(t),r=1<<n;e[n]=-1,t&=~r}}function dg(e){if(dt&6)throw Error(ke(327));Ca();var t=n0(e,0);if(!(t&1))return Rn(e,Wt()),null;var n=E0(e,t);if(e.tag!==0&&n===2){var r=px(e);r!==0&&(t=r,n=qx(e,r))}if(n===1)throw n=il,ko(e,0),Fs(e,t),Rn(e,Wt()),n;if(n===6)throw Error(ke(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,mo(e,Dn,Hr),Rn(e,Wt()),null}function wf(e,t){var n=dt;dt|=1;try{return e(t)}finally{dt=n,dt===0&&(Sa=Wt()+500,q0&&Ys())}}function Io(e){Ps!==null&&Ps.tag===0&&!(dt&6)&&Ca();var t=dt;dt|=1;var n=nr.transition,r=yt;try{if(nr.transition=null,yt=1,e)return e()}finally{yt=r,nr.transition=n,dt=t,!(dt&6)&&Ys()}}function Cf(){$n=da.current,Dt(da)}function ko(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,L6(n)),Ht!==null)for(n=Ht.return;n!==null;){var r=n;switch(nf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&i0();break;case 3:Na(),Dt(Tn),Dt(pn),xf();break;case 5:df(r);break;case 4:Na();break;case 13:Dt(Pt);break;case 19:Dt(Pt);break;case 10:af(r.type._context);break;case 22:case 23:Cf()}n=n.return}if(nn=e,Ht=e=Vs(e.current,null),on=$n=t,Yt=0,il=null,Ef=G0=To=0,Dn=Pi=null,wo!==null){for(t=0;t<wo.length;t++)if(n=wo[t],r=n.interleaved,r!==null){n.interleaved=null;var o=r.next,a=n.pending;if(a!==null){var i=a.next;a.next=o,r.next=i}n.pending=r}wo=null}return e}function w8(e,t){do{var n=Ht;try{if(of(),Lc.current=p0,m0){for(var r=Rt.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}m0=!1}if(Po=0,en=Gt=Rt=null,_i=!1,sl=0,vf.current=null,n===null||n.return===null){Yt=1,il=t,Ht=null;break}e:{var a=e,i=n.return,l=n,c=t;if(t=on,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var x=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var v=Jp(i);if(v!==null){v.flags&=-257,Zp(v,i,l,a,t),v.mode&1&&Xp(a,x,t),t=v,c=x;var y=t.updateQueue;if(y===null){var C=new Set;C.add(c),t.updateQueue=C}else y.add(c);break e}else{if(!(t&1)){Xp(a,x,t),Bf();break e}c=Error(ke(426))}}else if(Ft&&l.mode&1){var P=Jp(i);if(P!==null){!(P.flags&65536)&&(P.flags|=256),Zp(P,i,l,a,t),rf(_a(c,l));break e}}a=c=_a(c,l),Yt!==4&&(Yt=2),Pi===null?Pi=[a]:Pi.push(a),a=i;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var B=o8(a,c,t);Wp(a,B);break e;case 1:l=c;var g=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof g.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Os===null||!Os.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t;var j=a8(a,l,t);Wp(a,j);break e}}a=a.return}while(a!==null)}A8(n)}catch(D){t=D,Ht===n&&n!==null&&(Ht=n=n.return);continue}break}while(!0)}function C8(){var e=g0.current;return g0.current=p0,e===null?p0:e}function Bf(){(Yt===0||Yt===3||Yt===2)&&(Yt=4),nn===null||!(To&268435455)&&!(G0&268435455)||Fs(nn,on)}function E0(e,t){var n=dt;dt|=2;var r=C8();(nn!==e||on!==t)&&(Hr=null,ko(e,t));do try{cw();break}catch(o){w8(e,o)}while(!0);if(of(),dt=n,g0.current=r,Ht!==null)throw Error(ke(261));return nn=null,on=0,Yt}function cw(){for(;Ht!==null;)B8(Ht)}function uw(){for(;Ht!==null&&!I2();)B8(Ht)}function B8(e){var t=k8(e.alternate,e,$n);e.memoizedProps=e.pendingProps,t===null?A8(e):Ht=t,vf.current=null}function A8(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=rw(n,t),n!==null){n.flags&=32767,Ht=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Yt=6,Ht=null;return}}else if(n=nw(n,t,$n),n!==null){Ht=n;return}if(t=t.sibling,t!==null){Ht=t;return}Ht=t=e}while(t!==null);Yt===0&&(Yt=5)}function mo(e,t,n){var r=yt,o=nr.transition;try{nr.transition=null,yt=1,dw(e,t,n,r)}finally{nr.transition=o,yt=r}return null}function dw(e,t,n,r){do Ca();while(Ps!==null);if(dt&6)throw Error(ke(327));n=e.finishedWork;var o=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ke(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(W2(e,a),e===nn&&(Ht=nn=null,on=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||yc||(yc=!0,D8(t0,function(){return Ca(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=nr.transition,nr.transition=null;var i=yt;yt=1;var l=dt;dt|=4,vf.current=null,ow(e,n),v8(n,e),_6(wx),r0=!!bx,wx=bx=null,e.current=n,aw(n),R2(),dt=l,yt=i,nr.transition=a}else e.current=n;if(yc&&(yc=!1,Ps=e,v0=o),a=e.pendingLanes,a===0&&(Os=null),$2(n.stateNode),Rn(e,Wt()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)o=t[n],r(o.value,{componentStack:o.stack,digest:o.digest});if(y0)throw y0=!1,e=Vx,Vx=null,e;return v0&1&&e.tag!==0&&Ca(),a=e.pendingLanes,a&1?e===zx?Ti++:(Ti=0,zx=e):Ti=0,Ys(),null}function Ca(){if(Ps!==null){var e=o9(v0),t=nr.transition,n=yt;try{if(nr.transition=null,yt=16>e?16:e,Ps===null)var r=!1;else{if(e=Ps,Ps=null,v0=0,dt&6)throw Error(ke(331));var o=dt;for(dt|=4,Ve=e.current;Ve!==null;){var a=Ve,i=a.child;if(Ve.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var x=l[c];for(Ve=x;Ve!==null;){var d=Ve;switch(d.tag){case 0:case 11:case 15:Si(8,d,a)}var f=d.child;if(f!==null)f.return=d,Ve=f;else for(;Ve!==null;){d=Ve;var m=d.sibling,v=d.return;if(p8(d),d===x){Ve=null;break}if(m!==null){m.return=v,Ve=m;break}Ve=v}}}var y=a.alternate;if(y!==null){var C=y.child;if(C!==null){y.child=null;do{var P=C.sibling;C.sibling=null,C=P}while(C!==null)}}Ve=a}}if(a.subtreeFlags&2064&&i!==null)i.return=a,Ve=i;else e:for(;Ve!==null;){if(a=Ve,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Si(9,a,a.return)}var B=a.sibling;if(B!==null){B.return=a.return,Ve=B;break e}Ve=a.return}}var g=e.current;for(Ve=g;Ve!==null;){i=Ve;var b=i.child;if(i.subtreeFlags&2064&&b!==null)b.return=i,Ve=b;else e:for(i=g;Ve!==null;){if(l=Ve,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:H0(9,l)}}catch(D){$t(l,l.return,D)}if(l===i){Ve=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,Ve=j;break e}Ve=l.return}}if(dt=o,Ys(),Pr&&typeof Pr.onPostCommitFiberRoot=="function")try{Pr.onPostCommitFiberRoot($0,e)}catch{}r=!0}return r}finally{yt=n,nr.transition=t}}return!1}function xg(e,t,n){t=_a(n,t),t=o8(e,t,1),e=$s(e,t,1),t=wn(),e!==null&&(El(e,1,t),Rn(e,t))}function $t(e,t,n){if(e.tag===3)xg(e,e,n);else for(;t!==null;){if(t.tag===3){xg(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Os===null||!Os.has(r))){e=_a(n,e),e=a8(t,e,1),t=$s(t,e,1),e=wn(),t!==null&&(El(t,1,e),Rn(t,e));break}}t=t.return}}function xw(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=wn(),e.pingedLanes|=e.suspendedLanes&n,nn===e&&(on&n)===n&&(Yt===4||Yt===3&&(on&130023424)===on&&500>Wt()-bf?ko(e,0):Ef|=n),Rn(e,t)}function j8(e,t){t===0&&(e.mode&1?(t=lc,lc<<=1,!(lc&130023424)&&(lc=4194304)):t=1);var n=wn();e=rs(e,t),e!==null&&(El(e,t,n),Rn(e,n))}function hw(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),j8(e,n)}function fw(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ke(314))}r!==null&&r.delete(t),j8(e,n)}var k8;k8=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Tn.current)_n=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _n=!1,tw(e,t,n);_n=!!(e.flags&131072)}else _n=!1,Ft&&t.flags&1048576&&_9(t,u0,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Oc(e,t),e=t.pendingProps;var o=ka(t,pn.current);wa(t,n),o=ff(null,t,r,e,o,n);var a=mf();return t.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,In(r)?(a=!0,l0(t)):a=!1,t.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,cf(t),o.updater=K0,t.stateNode=o,o._reactInternals=t,_x(t,r,e,n),t=Tx(null,t,r,!0,a,n)):(t.tag=0,Ft&&a&&tf(t),vn(null,t,o,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Oc(e,t),e=t.pendingProps,o=r._init,r=o(r._payload),t.type=r,o=t.tag=pw(r),e=xr(r,e),o){case 0:t=Px(null,t,r,e,n);break e;case 1:t=ng(null,t,r,e,n);break e;case 11:t=eg(null,t,r,e,n);break e;case 14:t=tg(null,t,r,xr(r.type,e),n);break e}throw Error(ke(306,r,""))}return t;case 0:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Px(e,t,r,o,n);case 1:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),ng(e,t,r,o,n);case 3:e:{if(u8(t),e===null)throw Error(ke(387));r=t.pendingProps,a=t.memoizedState,o=a.element,M9(e,t),h0(t,r,null,n);var i=t.memoizedState;if(r=i.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){o=_a(Error(ke(423)),t),t=rg(e,t,r,n,o);break e}else if(r!==o){o=_a(Error(ke(424)),t),t=rg(e,t,r,n,o);break e}else for(On=Ls(t.stateNode.containerInfo.firstChild),Un=t,Ft=!0,mr=null,n=I9(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Da(),r===o){t=ss(e,t,n);break e}vn(e,t,r,n)}t=t.child}return t;case 5:return L9(t),e===null&&Dx(t),r=t.type,o=t.pendingProps,a=e!==null?e.memoizedProps:null,i=o.children,Cx(r,o)?i=null:a!==null&&Cx(r,a)&&(t.flags|=32),c8(e,t),vn(e,t,i,n),t.child;case 6:return e===null&&Dx(t),null;case 13:return d8(e,t,n);case 4:return uf(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Fa(t,null,r,n):vn(e,t,r,n),t.child;case 11:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),eg(e,t,r,o,n);case 7:return vn(e,t,t.pendingProps,n),t.child;case 8:return vn(e,t,t.pendingProps.children,n),t.child;case 12:return vn(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,o=t.pendingProps,a=t.memoizedProps,i=o.value,Bt(d0,r._currentValue),r._currentValue=i,a!==null)if(Cr(a.value,i)){if(a.children===o.children&&!Tn.current){t=ss(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var l=a.dependencies;if(l!==null){i=a.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(a.tag===1){c=Zr(-1,n&-n),c.tag=2;var x=a.updateQueue;if(x!==null){x=x.shared;var d=x.pending;d===null?c.next=c:(c.next=d.next,d.next=c),x.pending=c}}a.lanes|=n,c=a.alternate,c!==null&&(c.lanes|=n),Fx(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(a.tag===10)i=a.type===t.type?null:a.child;else if(a.tag===18){if(i=a.return,i===null)throw Error(ke(341));i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),Fx(i,n,t),i=a.sibling}else i=a.child;if(i!==null)i.return=a;else for(i=a;i!==null;){if(i===t){i=null;break}if(a=i.sibling,a!==null){a.return=i.return,i=a;break}i=i.return}a=i}vn(e,t,o.children,n),t=t.child}return t;case 9:return o=t.type,r=t.pendingProps.children,wa(t,n),o=sr(o),r=r(o),t.flags|=1,vn(e,t,r,n),t.child;case 14:return r=t.type,o=xr(r,t.pendingProps),o=xr(r.type,o),tg(e,t,r,o,n);case 15:return i8(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,o=t.pendingProps,o=t.elementType===r?o:xr(r,o),Oc(e,t),t.tag=1,In(r)?(e=!0,l0(t)):e=!1,wa(t,n),s8(t,r,o),_x(t,r,o,n),Tx(null,t,r,!0,e,n);case 19:return x8(e,t,n);case 22:return l8(e,t,n)}throw Error(ke(156,t.tag))};function D8(e,t){return t9(e,t)}function mw(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tr(e,t,n,r){return new mw(e,t,n,r)}function Af(e){return e=e.prototype,!(!e||!e.isReactComponent)}function pw(e){if(typeof e=="function")return Af(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zh)return 11;if(e===qh)return 14}return 2}function Vs(e,t){var n=e.alternate;return n===null?(n=tr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function zc(e,t,n,r,o,a){var i=2;if(r=e,typeof e=="function")Af(e)&&(i=1);else if(typeof e=="string")i=5;else e:switch(e){case ta:return Do(n.children,o,a,t);case Vh:i=8,o|=8;break;case tx:return e=tr(12,n,t,o|2),e.elementType=tx,e.lanes=a,e;case nx:return e=tr(13,n,t,o),e.elementType=nx,e.lanes=a,e;case rx:return e=tr(19,n,t,o),e.elementType=rx,e.lanes=a,e;case Lv:return Q0(n,o,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Rv:i=10;break e;case Mv:i=9;break e;case zh:i=11;break e;case qh:i=14;break e;case As:i=16,r=null;break e}throw Error(ke(130,e==null?e:typeof e,""))}return t=tr(i,n,t,o),t.elementType=e,t.type=r,t.lanes=a,t}function Do(e,t,n,r){return e=tr(7,e,r,t),e.lanes=n,e}function Q0(e,t,n,r){return e=tr(22,e,r,t),e.elementType=Lv,e.lanes=n,e.stateNode={isHidden:!1},e}function vd(e,t,n){return e=tr(6,e,null,t),e.lanes=n,e}function Ed(e,t,n){return t=tr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function gw(e,t,n,r,o){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ed(0),this.expirationTimes=ed(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ed(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function jf(e,t,n,r,o,a,i,l,c){return e=new gw(e,t,n,l,c),t===1?(t=1,a===!0&&(t|=8)):t=0,a=tr(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},cf(a),e}function yw(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ea,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function F8(e){if(!e)return Ws;e=e._reactInternals;e:{if(Mo(e)!==e||e.tag!==1)throw Error(ke(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(In(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ke(171))}if(e.tag===1){var n=e.type;if(In(n))return F9(e,n,t)}return t}function N8(e,t,n,r,o,a,i,l,c){return e=jf(n,r,!0,e,o,a,i,l,c),e.context=F8(null),n=e.current,r=wn(),o=Us(n),a=Zr(r,o),a.callback=t??null,$s(n,a,o),e.current.lanes=o,El(e,o,r),Rn(e,r),e}function Y0(e,t,n,r){var o=t.current,a=wn(),i=Us(o);return n=F8(n),t.context===null?t.context=n:t.pendingContext=n,t=Zr(a,i),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=$s(o,t,i),e!==null&&(vr(e,o,i,a),Mc(e,o,i)),i}function b0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function hg(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function kf(e,t){hg(e,t),(e=e.alternate)&&hg(e,t)}function vw(){return null}var _8=typeof reportError=="function"?reportError:function(e){console.error(e)};function Df(e){this._internalRoot=e}X0.prototype.render=Df.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ke(409));Y0(e,t,null,null)};X0.prototype.unmount=Df.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Io(function(){Y0(null,e,null,null)}),t[ns]=null}};function X0(e){this._internalRoot=e}X0.prototype.unstable_scheduleHydration=function(e){if(e){var t=l9();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ds.length&&t!==0&&t<Ds[n].priority;n++);Ds.splice(n,0,e),n===0&&u9(e)}};function Ff(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function J0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function fg(){}function Ew(e,t,n,r,o){if(o){if(typeof r=="function"){var a=r;r=function(){var x=b0(i);a.call(x)}}var i=N8(t,r,e,0,null,!1,!1,"",fg);return e._reactRootContainer=i,e[ns]=i.current,Zi(e.nodeType===8?e.parentNode:e),Io(),i}for(;o=e.lastChild;)e.removeChild(o);if(typeof r=="function"){var l=r;r=function(){var x=b0(c);l.call(x)}}var c=jf(e,0,!1,null,null,!1,!1,"",fg);return e._reactRootContainer=c,e[ns]=c.current,Zi(e.nodeType===8?e.parentNode:e),Io(function(){Y0(t,c,n,r)}),c}function Z0(e,t,n,r,o){var a=n._reactRootContainer;if(a){var i=a;if(typeof o=="function"){var l=o;o=function(){var c=b0(i);l.call(c)}}Y0(t,i,e,o)}else i=Ew(n,t,e,o,r);return b0(i)}a9=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=wi(t.pendingLanes);n!==0&&(Hh(t,n|1),Rn(t,Wt()),!(dt&6)&&(Sa=Wt()+500,Ys()))}break;case 13:Io(function(){var r=rs(e,1);if(r!==null){var o=wn();vr(r,e,1,o)}}),kf(e,1)}};Gh=function(e){if(e.tag===13){var t=rs(e,134217728);if(t!==null){var n=wn();vr(t,e,134217728,n)}kf(e,134217728)}};i9=function(e){if(e.tag===13){var t=Us(e),n=rs(e,t);if(n!==null){var r=wn();vr(n,e,t,r)}kf(e,t)}};l9=function(){return yt};c9=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}};hx=function(e,t,n){switch(t){case"input":if(ax(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var o=z0(r);if(!o)throw Error(ke(90));Ov(r),ax(r,o)}}}break;case"textarea":Vv(e,n);break;case"select":t=n.value,t!=null&&ya(e,!!n.multiple,t,!1)}};Qv=wf;Yv=Io;var bw={usingClientEntryPoint:!1,Events:[wl,oa,z0,Hv,Gv,wf]},pi={findFiberByHostInstance:bo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ww={bundleType:pi.bundleType,version:pi.version,rendererPackageName:pi.rendererPackageName,rendererConfig:pi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:us.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Zv(e),e===null?null:e.stateNode},findFiberByHostInstance:pi.findFiberByHostInstance||vw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{$0=vc.inject(ww),Pr=vc}catch{}}Wn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bw;Wn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(t))throw Error(ke(200));return yw(e,t,null,n)};Wn.createRoot=function(e,t){if(!Ff(e))throw Error(ke(299));var n=!1,r="",o=_8;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),t=jf(e,1,!1,null,null,n,!1,r,o),e[ns]=t.current,Zi(e.nodeType===8?e.parentNode:e),new Df(t)};Wn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ke(188)):(e=Object.keys(e).join(","),Error(ke(268,e)));return e=Zv(t),e=e===null?null:e.stateNode,e};Wn.flushSync=function(e){return Io(e)};Wn.hydrate=function(e,t,n){if(!J0(t))throw Error(ke(200));return Z0(null,e,t,!0,n)};Wn.hydrateRoot=function(e,t,n){if(!Ff(e))throw Error(ke(405));var r=n!=null&&n.hydratedSources||null,o=!1,a="",i=_8;if(n!=null&&(n.unstable_strictMode===!0&&(o=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),t=N8(t,null,e,1,n??null,o,!1,a,i),e[ns]=t.current,Zi(e),r)for(e=0;e<r.length;e++)n=r[e],o=n._getVersion,o=o(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,o]:t.mutableSourceEagerHydrationData.push(n,o);return new X0(t)};Wn.render=function(e,t,n){if(!J0(t))throw Error(ke(200));return Z0(null,e,t,!1,n)};Wn.unmountComponentAtNode=function(e){if(!J0(e))throw Error(ke(40));return e._reactRootContainer?(Io(function(){Z0(null,null,e,!1,function(){e._reactRootContainer=null,e[ns]=null})}),!0):!1};Wn.unstable_batchedUpdates=wf;Wn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!J0(n))throw Error(ke(200));if(e==null||e._reactInternals===void 0)throw Error(ke(38));return Z0(e,t,n,!1,r)};Wn.version="18.3.1-next-f1338f8080-20240426";function S8(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(S8)}catch(e){console.error(e)}}S8(),Sv.exports=Wn;var Cw=Sv.exports,mg=Cw;Zd.createRoot=mg.createRoot,Zd.hydrateRoot=mg.hydrateRoot;/**
 * react-router v7.7.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var pg="popstate";function Bw(e={}){function t(r,o){let{pathname:a,search:i,hash:l}=r.location;return Kx("",{pathname:a,search:i,hash:l},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function n(r,o){return typeof o=="string"?o:ll(o)}return jw(t,n,null,e)}function _t(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function ar(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Aw(){return Math.random().toString(36).substring(2,10)}function gg(e,t){return{usr:e.state,key:e.key,idx:t}}function Kx(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Ka(t):t,state:n,key:t&&t.key||r||Aw()}}function ll({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Ka(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function jw(e,t,n,r={}){let{window:o=document.defaultView,v5Compat:a=!1}=r,i=o.history,l="POP",c=null,x=d();x==null&&(x=0,i.replaceState({...i.state,idx:x},""));function d(){return(i.state||{idx:null}).idx}function f(){l="POP";let P=d(),B=P==null?null:P-x;x=P,c&&c({action:l,location:C.location,delta:B})}function m(P,B){l="PUSH";let g=Kx(C.location,P,B);x=d()+1;let b=gg(g,x),j=C.createHref(g);try{i.pushState(b,"",j)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;o.location.assign(j)}a&&c&&c({action:l,location:C.location,delta:1})}function v(P,B){l="REPLACE";let g=Kx(C.location,P,B);x=d();let b=gg(g,x),j=C.createHref(g);i.replaceState(b,"",j),a&&c&&c({action:l,location:C.location,delta:0})}function y(P){return kw(P)}let C={get action(){return l},get location(){return e(o,i)},listen(P){if(c)throw new Error("A history only accepts one active listener");return o.addEventListener(pg,f),c=P,()=>{o.removeEventListener(pg,f),c=null}},createHref(P){return t(o,P)},createURL:y,encodeLocation(P){let B=y(P);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:m,replace:v,go(P){return i.go(P)}};return C}function kw(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),_t(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ll(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function P8(e,t,n="/"){return Dw(e,t,n,!1)}function Dw(e,t,n,r){let o=typeof t=="string"?Ka(t):t,a=os(o.pathname||"/",n);if(a==null)return null;let i=T8(e);Fw(i);let l=null;for(let c=0;l==null&&c<i.length;++c){let x=Ow(a);l=Lw(i[c],x,r)}return l}function T8(e,t=[],n=[],r=""){let o=(a,i,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:i,route:a};c.relativePath.startsWith("/")&&(_t(c.relativePath.startsWith(r),`Absolute route path "${c.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(r.length));let x=es([r,c.relativePath]),d=n.concat(c);a.children&&a.children.length>0&&(_t(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${x}".`),T8(a.children,t,d,x)),!(a.path==null&&!a.index)&&t.push({path:x,score:Rw(x,a.index),routesMeta:d})};return e.forEach((a,i)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))o(a,i);else for(let c of I8(a.path))o(a,i,c)}),t}function I8(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,o=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return o?[a,""]:[a];let i=I8(r.join("/")),l=[];return l.push(...i.map(c=>c===""?a:[a,c].join("/"))),o&&l.push(...i),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function Fw(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Mw(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var Nw=/^:[\w-]+$/,_w=3,Sw=2,Pw=1,Tw=10,Iw=-2,yg=e=>e==="*";function Rw(e,t){let n=e.split("/"),r=n.length;return n.some(yg)&&(r+=Iw),t&&(r+=Sw),n.filter(o=>!yg(o)).reduce((o,a)=>o+(Nw.test(a)?_w:a===""?Pw:Tw),r)}function Mw(e,t){return e.length===t.length&&e.slice(0,-1).every((r,o)=>r===t[o])?e[e.length-1]-t[t.length-1]:0}function Lw(e,t,n=!1){let{routesMeta:r}=e,o={},a="/",i=[];for(let l=0;l<r.length;++l){let c=r[l],x=l===r.length-1,d=a==="/"?t:t.slice(a.length)||"/",f=w0({path:c.relativePath,caseSensitive:c.caseSensitive,end:x},d),m=c.route;if(!f&&x&&n&&!r[r.length-1].route.index&&(f=w0({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(o,f.params),i.push({params:o,pathname:es([a,f.pathname]),pathnameBase:qw(es([a,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(a=es([a,f.pathnameBase]))}return i}function w0(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=$w(e.path,e.caseSensitive,e.end),o=t.match(n);if(!o)return null;let a=o[0],i=a.replace(/(.)\/+$/,"$1"),l=o.slice(1);return{params:r.reduce((x,{paramName:d,isOptional:f},m)=>{if(d==="*"){let y=l[m]||"";i=a.slice(0,a.length-y.length).replace(/(.)\/+$/,"$1")}const v=l[m];return f&&!v?x[d]=void 0:x[d]=(v||"").replace(/%2F/g,"/"),x},{}),pathname:a,pathnameBase:i,pattern:e}}function $w(e,t=!1,n=!0){ar(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),r]}function Ow(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return ar(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function os(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Uw(e,t="/"){let{pathname:n,search:r="",hash:o=""}=typeof e=="string"?Ka(e):e;return{pathname:n?n.startsWith("/")?n:Vw(n,t):t,search:Ww(r),hash:Kw(o)}}function Vw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?n.length>1&&n.pop():o!=="."&&n.push(o)}),n.length>1?n.join("/"):"/"}function bd(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function zw(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Nf(e){let t=zw(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function _f(e,t,n,r=!1){let o;typeof e=="string"?o=Ka(e):(o={...e},_t(!o.pathname||!o.pathname.includes("?"),bd("?","pathname","search",o)),_t(!o.pathname||!o.pathname.includes("#"),bd("#","pathname","hash",o)),_t(!o.search||!o.search.includes("#"),bd("#","search","hash",o)));let a=e===""||o.pathname==="",i=a?"/":o.pathname,l;if(i==null)l=n;else{let f=t.length-1;if(!r&&i.startsWith("..")){let m=i.split("/");for(;m[0]==="..";)m.shift(),f-=1;o.pathname=m.join("/")}l=f>=0?t[f]:"/"}let c=Uw(o,l),x=i&&i!=="/"&&i.endsWith("/"),d=(a||i===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(x||d)&&(c.pathname+="/"),c}var es=e=>e.join("/").replace(/\/\/+/g,"/"),qw=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),Ww=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Kw=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function Hw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var R8=["POST","PUT","PATCH","DELETE"];new Set(R8);var Gw=["GET",...R8];new Set(Gw);var Ha=A.createContext(null);Ha.displayName="DataRouter";var eu=A.createContext(null);eu.displayName="DataRouterState";A.createContext(!1);var M8=A.createContext({isTransitioning:!1});M8.displayName="ViewTransition";var Qw=A.createContext(new Map);Qw.displayName="Fetchers";var Yw=A.createContext(null);Yw.displayName="Await";var Br=A.createContext(null);Br.displayName="Navigation";var Bl=A.createContext(null);Bl.displayName="Location";var Ar=A.createContext({outlet:null,matches:[],isDataRoute:!1});Ar.displayName="Route";var Sf=A.createContext(null);Sf.displayName="RouteError";function Xw(e,{relative:t}={}){_t(Ga(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=A.useContext(Br),{hash:o,pathname:a,search:i}=Al(e,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:es([n,a])),r.createHref({pathname:l,search:i,hash:o})}function Ga(){return A.useContext(Bl)!=null}function Lr(){return _t(Ga(),"useLocation() may be used only in the context of a <Router> component."),A.useContext(Bl).location}var L8="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function $8(e){A.useContext(Br).static||A.useLayoutEffect(e)}function ds(){let{isDataRoute:e}=A.useContext(Ar);return e?u5():Jw()}function Jw(){_t(Ga(),"useNavigate() may be used only in the context of a <Router> component.");let e=A.useContext(Ha),{basename:t,navigator:n}=A.useContext(Br),{matches:r}=A.useContext(Ar),{pathname:o}=Lr(),a=JSON.stringify(Nf(r)),i=A.useRef(!1);return $8(()=>{i.current=!0}),A.useCallback((c,x={})=>{if(ar(i.current,L8),!i.current)return;if(typeof c=="number"){n.go(c);return}let d=_f(c,JSON.parse(a),o,x.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:es([t,d.pathname])),(x.replace?n.replace:n.push)(d,x.state,x)},[t,n,a,o,e])}A.createContext(null);function Lo(){let{matches:e}=A.useContext(Ar),t=e[e.length-1];return t?t.params:{}}function Al(e,{relative:t}={}){let{matches:n}=A.useContext(Ar),{pathname:r}=Lr(),o=JSON.stringify(Nf(n));return A.useMemo(()=>_f(e,JSON.parse(o),r,t==="path"),[e,o,r,t])}function Zw(e,t){return O8(e,t)}function O8(e,t,n,r){var B;_t(Ga(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=A.useContext(Br),{matches:a}=A.useContext(Ar),i=a[a.length-1],l=i?i.params:{},c=i?i.pathname:"/",x=i?i.pathnameBase:"/",d=i&&i.route;{let g=d&&d.path||"";U8(c,!d||g.endsWith("*")||g.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${g}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${g}"> to <Route path="${g==="/"?"*":`${g}/*`}">.`)}let f=Lr(),m;if(t){let g=typeof t=="string"?Ka(t):t;_t(x==="/"||((B=g.pathname)==null?void 0:B.startsWith(x)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${x}" but pathname "${g.pathname}" was given in the \`location\` prop.`),m=g}else m=f;let v=m.pathname||"/",y=v;if(x!=="/"){let g=x.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(g.length).join("/")}let C=P8(e,{pathname:y});ar(d||C!=null,`No routes matched location "${m.pathname}${m.search}${m.hash}" `),ar(C==null||C[C.length-1].route.element!==void 0||C[C.length-1].route.Component!==void 0||C[C.length-1].route.lazy!==void 0,`Matched leaf route at location "${m.pathname}${m.search}${m.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let P=s5(C&&C.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:es([x,o.encodeLocation?o.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?x:es([x,o.encodeLocation?o.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,n,r);return t&&P?A.createElement(Bl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...m},navigationType:"POP"}},P):P}function e5(){let e=c5(),t=Hw(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=A.createElement(A.Fragment,null,A.createElement("p",null," Hey developer "),A.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",A.createElement("code",{style:a},"ErrorBoundary")," or"," ",A.createElement("code",{style:a},"errorElement")," prop on your route.")),A.createElement(A.Fragment,null,A.createElement("h2",null,"Unexpected Application Error!"),A.createElement("h3",{style:{fontStyle:"italic"}},t),n?A.createElement("pre",{style:o},n):null,i)}var t5=A.createElement(e5,null),n5=class extends A.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?A.createElement(Ar.Provider,{value:this.props.routeContext},A.createElement(Sf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function r5({routeContext:e,match:t,children:n}){let r=A.useContext(Ha);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),A.createElement(Ar.Provider,{value:e},n)}function s5(e,t=[],n=null,r=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,a=n==null?void 0:n.errors;if(a!=null){let c=o.findIndex(x=>x.route.id&&(a==null?void 0:a[x.route.id])!==void 0);_t(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),o=o.slice(0,Math.min(o.length,c+1))}let i=!1,l=-1;if(n)for(let c=0;c<o.length;c++){let x=o[c];if((x.route.HydrateFallback||x.route.hydrateFallbackElement)&&(l=c),x.route.id){let{loaderData:d,errors:f}=n,m=x.route.loader&&!d.hasOwnProperty(x.route.id)&&(!f||f[x.route.id]===void 0);if(x.route.lazy||m){i=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,x,d)=>{let f,m=!1,v=null,y=null;n&&(f=a&&x.route.id?a[x.route.id]:void 0,v=x.route.errorElement||t5,i&&(l<0&&d===0?(U8("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,y=null):l===d&&(m=!0,y=x.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,d+1)),P=()=>{let B;return f?B=v:m?B=y:x.route.Component?B=A.createElement(x.route.Component,null):x.route.element?B=x.route.element:B=c,A.createElement(r5,{match:x,routeContext:{outlet:c,matches:C,isDataRoute:n!=null},children:B})};return n&&(x.route.ErrorBoundary||x.route.errorElement||d===0)?A.createElement(n5,{location:n.location,revalidation:n.revalidation,component:v,error:f,children:P(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):P()},null)}function Pf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function o5(e){let t=A.useContext(Ha);return _t(t,Pf(e)),t}function a5(e){let t=A.useContext(eu);return _t(t,Pf(e)),t}function i5(e){let t=A.useContext(Ar);return _t(t,Pf(e)),t}function Tf(e){let t=i5(e),n=t.matches[t.matches.length-1];return _t(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function l5(){return Tf("useRouteId")}function c5(){var r;let e=A.useContext(Sf),t=a5("useRouteError"),n=Tf("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function u5(){let{router:e}=o5("useNavigate"),t=Tf("useNavigate"),n=A.useRef(!1);return $8(()=>{n.current=!0}),A.useCallback(async(o,a={})=>{ar(n.current,L8),n.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:t,...a}))},[e,t])}var vg={};function U8(e,t,n){!t&&!vg[e]&&(vg[e]=!0,ar(!1,n))}A.memo(d5);function d5({routes:e,future:t,state:n}){return O8(e,void 0,n,t)}function wd({to:e,replace:t,state:n,relative:r}){_t(Ga(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=A.useContext(Br);ar(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=A.useContext(Ar),{pathname:i}=Lr(),l=ds(),c=_f(e,Nf(a),i,r==="path"),x=JSON.stringify(c);return A.useEffect(()=>{l(JSON.parse(x),{replace:t,state:n,relative:r})},[l,x,r,t,n]),null}function kt(e){_t(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function x5({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:o,static:a=!1}){_t(!Ga(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let i=e.replace(/^\/*/,"/"),l=A.useMemo(()=>({basename:i,navigator:o,static:a,future:{}}),[i,o,a]);typeof n=="string"&&(n=Ka(n));let{pathname:c="/",search:x="",hash:d="",state:f=null,key:m="default"}=n,v=A.useMemo(()=>{let y=os(c,i);return y==null?null:{location:{pathname:y,search:x,hash:d,state:f,key:m},navigationType:r}},[i,c,x,d,f,m,r]);return ar(v!=null,`<Router basename="${i}"> is not able to match the URL "${c}${x}${d}" because it does not start with the basename, so the <Router> won't render anything.`),v==null?null:A.createElement(Br.Provider,{value:l},A.createElement(Bl.Provider,{children:t,value:v}))}function Eg({children:e,location:t}){return Zw(Hx(e),t)}function Hx(e,t=[]){let n=[];return A.Children.forEach(e,(r,o)=>{if(!A.isValidElement(r))return;let a=[...t,o];if(r.type===A.Fragment){n.push.apply(n,Hx(r.props.children,a));return}_t(r.type===kt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),_t(!r.props.index||!r.props.children,"An index route cannot have child routes.");let i={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(i.children=Hx(r.props.children,a)),n.push(i)}),n}var qc="get",Wc="application/x-www-form-urlencoded";function tu(e){return e!=null&&typeof e.tagName=="string"}function h5(e){return tu(e)&&e.tagName.toLowerCase()==="button"}function f5(e){return tu(e)&&e.tagName.toLowerCase()==="form"}function m5(e){return tu(e)&&e.tagName.toLowerCase()==="input"}function p5(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function g5(e,t){return e.button===0&&(!t||t==="_self")&&!p5(e)}function Gx(e=""){return new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(o=>[n,o]):[[n,r]])},[]))}function y5(e,t){let n=Gx(e);return t&&t.forEach((r,o)=>{n.has(o)||t.getAll(o).forEach(a=>{n.append(o,a)})}),n}var Ec=null;function v5(){if(Ec===null)try{new FormData(document.createElement("form"),0),Ec=!1}catch{Ec=!0}return Ec}var E5=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cd(e){return e!=null&&!E5.has(e)?(ar(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Wc}"`),null):e}function b5(e,t){let n,r,o,a,i;if(f5(e)){let l=e.getAttribute("action");r=l?os(l,t):null,n=e.getAttribute("method")||qc,o=Cd(e.getAttribute("enctype"))||Wc,a=new FormData(e)}else if(h5(e)||m5(e)&&(e.type==="submit"||e.type==="image")){let l=e.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=e.getAttribute("formaction")||l.getAttribute("action");if(r=c?os(c,t):null,n=e.getAttribute("formmethod")||l.getAttribute("method")||qc,o=Cd(e.getAttribute("formenctype"))||Cd(l.getAttribute("enctype"))||Wc,a=new FormData(l,e),!v5()){let{name:x,type:d,value:f}=e;if(d==="image"){let m=x?`${x}.`:"";a.append(`${m}x`,"0"),a.append(`${m}y`,"0")}else x&&a.append(x,f)}}else{if(tu(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=qc,r=null,o=Wc,i=e}return a&&o==="text/plain"&&(i=a,a=void 0),{action:r,method:n.toLowerCase(),encType:o,formData:a,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function If(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function w5(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&os(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function C5(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function B5(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function A5(e,t,n){let r=await Promise.all(e.map(async o=>{let a=t.routes[o.route.id];if(a){let i=await C5(a,n);return i.links?i.links():[]}return[]}));return F5(r.flat(1).filter(B5).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function bg(e,t,n,r,o,a){let i=(c,x)=>n[x]?c.route.id!==n[x].route.id:!0,l=(c,x)=>{var d;return n[x].pathname!==c.pathname||((d=n[x].route.path)==null?void 0:d.endsWith("*"))&&n[x].params["*"]!==c.params["*"]};return a==="assets"?t.filter((c,x)=>i(c,x)||l(c,x)):a==="data"?t.filter((c,x)=>{var f;let d=r.routes[c.route.id];if(!d||!d.hasLoader)return!1;if(i(c,x)||l(c,x))return!0;if(c.route.shouldRevalidate){let m=c.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((f=n[0])==null?void 0:f.params)||{},nextUrl:new URL(e,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof m=="boolean")return m}return!0}):[]}function j5(e,t,{includeHydrateFallback:n}={}){return k5(e.map(r=>{let o=t.routes[r.route.id];if(!o)return[];let a=[o.module];return o.clientActionModule&&(a=a.concat(o.clientActionModule)),o.clientLoaderModule&&(a=a.concat(o.clientLoaderModule)),n&&o.hydrateFallbackModule&&(a=a.concat(o.hydrateFallbackModule)),o.imports&&(a=a.concat(o.imports)),a}).flat(1))}function k5(e){return[...new Set(e)]}function D5(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function F5(e,t){let n=new Set;return new Set(t),e.reduce((r,o)=>{let a=JSON.stringify(D5(o));return n.has(a)||(n.add(a),r.push({key:a,link:o})),r},[])}function V8(){let e=A.useContext(Ha);return If(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function N5(){let e=A.useContext(eu);return If(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Rf=A.createContext(void 0);Rf.displayName="FrameworkContext";function z8(){let e=A.useContext(Rf);return If(e,"You must render this element inside a <HydratedRouter> element"),e}function _5(e,t){let n=A.useContext(Rf),[r,o]=A.useState(!1),[a,i]=A.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:x,onMouseLeave:d,onTouchStart:f}=t,m=A.useRef(null);A.useEffect(()=>{if(e==="render"&&i(!0),e==="viewport"){let C=B=>{B.forEach(g=>{i(g.isIntersecting)})},P=new IntersectionObserver(C,{threshold:.5});return m.current&&P.observe(m.current),()=>{P.disconnect()}}},[e]),A.useEffect(()=>{if(r){let C=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(C)}}},[r]);let v=()=>{o(!0)},y=()=>{o(!1),i(!1)};return n?e!=="intent"?[a,m,{}]:[a,m,{onFocus:gi(l,v),onBlur:gi(c,y),onMouseEnter:gi(x,v),onMouseLeave:gi(d,y),onTouchStart:gi(f,v)}]:[!1,m,{}]}function gi(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function S5({page:e,...t}){let{router:n}=V8(),r=A.useMemo(()=>P8(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?A.createElement(T5,{page:e,matches:r,...t}):null}function P5(e){let{manifest:t,routeModules:n}=z8(),[r,o]=A.useState([]);return A.useEffect(()=>{let a=!1;return A5(e,t,n).then(i=>{a||o(i)}),()=>{a=!0}},[e,t,n]),r}function T5({page:e,matches:t,...n}){let r=Lr(),{manifest:o,routeModules:a}=z8(),{basename:i}=V8(),{loaderData:l,matches:c}=N5(),x=A.useMemo(()=>bg(e,t,c,o,r,"data"),[e,t,c,o,r]),d=A.useMemo(()=>bg(e,t,c,o,r,"assets"),[e,t,c,o,r]),f=A.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let y=new Set,C=!1;if(t.forEach(B=>{var b;let g=o.routes[B.route.id];!g||!g.hasLoader||(!x.some(j=>j.route.id===B.route.id)&&B.route.id in l&&((b=a[B.route.id])!=null&&b.shouldRevalidate)||g.hasClientLoader?C=!0:y.add(B.route.id))}),y.size===0)return[];let P=w5(e,i,"data");return C&&y.size>0&&P.searchParams.set("_routes",t.filter(B=>y.has(B.route.id)).map(B=>B.route.id).join(",")),[P.pathname+P.search]},[i,l,r,o,x,t,e,a]),m=A.useMemo(()=>j5(d,o),[d,o]),v=P5(d);return A.createElement(A.Fragment,null,f.map(y=>A.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...n})),m.map(y=>A.createElement("link",{key:y,rel:"modulepreload",href:y,...n})),v.map(({key:y,link:C})=>A.createElement("link",{key:y,...C})))}function I5(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var q8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{q8&&(window.__reactRouterVersion="7.7.0")}catch{}function R5({basename:e,children:t,window:n}){let r=A.useRef();r.current==null&&(r.current=Bw({window:n,v5Compat:!0}));let o=r.current,[a,i]=A.useState({action:o.action,location:o.location}),l=A.useCallback(c=>{A.startTransition(()=>i(c))},[i]);return A.useLayoutEffect(()=>o.listen(l),[o,l]),A.createElement(x5,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o})}var W8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,St=A.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:o,reloadDocument:a,replace:i,state:l,target:c,to:x,preventScrollReset:d,viewTransition:f,...m},v){let{basename:y}=A.useContext(Br),C=typeof x=="string"&&W8.test(x),P,B=!1;if(typeof x=="string"&&C&&(P=x,q8))try{let M=new URL(window.location.href),L=x.startsWith("//")?new URL(M.protocol+x):new URL(x),J=os(L.pathname,y);L.origin===M.origin&&J!=null?x=J+L.search+L.hash:B=!0}catch{ar(!1,`<Link to="${x}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let g=Xw(x,{relative:o}),[b,j,D]=_5(r,m),w=O5(x,{replace:i,state:l,target:c,preventScrollReset:d,relative:o,viewTransition:f});function E(M){t&&t(M),M.defaultPrevented||w(M)}let N=A.createElement("a",{...m,...D,href:P||g,onClick:B||a?t:E,ref:I5(v,j),target:c,"data-discover":!C&&n==="render"?"true":void 0});return b&&!C?A.createElement(A.Fragment,null,N,A.createElement(S5,{page:g})):N});St.displayName="Link";var M5=A.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:o=!1,style:a,to:i,viewTransition:l,children:c,...x},d){let f=Al(i,{relative:x.relative}),m=Lr(),v=A.useContext(eu),{navigator:y,basename:C}=A.useContext(Br),P=v!=null&&W5(f)&&l===!0,B=y.encodeLocation?y.encodeLocation(f).pathname:f.pathname,g=m.pathname,b=v&&v.navigation&&v.navigation.location?v.navigation.location.pathname:null;n||(g=g.toLowerCase(),b=b?b.toLowerCase():null,B=B.toLowerCase()),b&&C&&(b=os(b,C)||b);const j=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let D=g===B||!o&&g.startsWith(B)&&g.charAt(j)==="/",w=b!=null&&(b===B||!o&&b.startsWith(B)&&b.charAt(B.length)==="/"),E={isActive:D,isPending:w,isTransitioning:P},N=D?t:void 0,M;typeof r=="function"?M=r(E):M=[r,D?"active":null,w?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let L=typeof a=="function"?a(E):a;return A.createElement(St,{...x,"aria-current":N,className:M,ref:d,style:L,to:i,viewTransition:l},typeof c=="function"?c(E):c)});M5.displayName="NavLink";var L5=A.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:o,state:a,method:i=qc,action:l,onSubmit:c,relative:x,preventScrollReset:d,viewTransition:f,...m},v)=>{let y=z5(),C=q5(l,{relative:x}),P=i.toLowerCase()==="get"?"get":"post",B=typeof l=="string"&&W8.test(l),g=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let j=b.nativeEvent.submitter,D=(j==null?void 0:j.getAttribute("formmethod"))||i;y(j||b.currentTarget,{fetcherKey:t,method:D,navigate:n,replace:o,state:a,relative:x,preventScrollReset:d,viewTransition:f})};return A.createElement("form",{ref:v,method:P,action:C,onSubmit:r?c:g,...m,"data-discover":!B&&e==="render"?"true":void 0})});L5.displayName="Form";function $5(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function K8(e){let t=A.useContext(Ha);return _t(t,$5(e)),t}function O5(e,{target:t,replace:n,state:r,preventScrollReset:o,relative:a,viewTransition:i}={}){let l=ds(),c=Lr(),x=Al(e,{relative:a});return A.useCallback(d=>{if(g5(d,t)){d.preventDefault();let f=n!==void 0?n:ll(c)===ll(x);l(e,{replace:f,state:r,preventScrollReset:o,relative:a,viewTransition:i})}},[c,l,x,n,r,t,e,o,a,i])}function Xs(e){ar(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=A.useRef(Gx(e)),n=A.useRef(!1),r=Lr(),o=A.useMemo(()=>y5(r.search,n.current?null:t.current),[r.search]),a=ds(),i=A.useCallback((l,c)=>{const x=Gx(typeof l=="function"?l(new URLSearchParams(o)):l);n.current=!0,a("?"+x,c)},[a,o]);return[o,i]}var U5=0,V5=()=>`__${String(++U5)}__`;function z5(){let{router:e}=K8("useSubmit"),{basename:t}=A.useContext(Br),n=l5();return A.useCallback(async(r,o={})=>{let{action:a,method:i,encType:l,formData:c,body:x}=b5(r,t);if(o.navigate===!1){let d=o.fetcherKey||V5();await e.fetch(d,n,o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:x,formMethod:o.method||i,formEncType:o.encType||l,flushSync:o.flushSync})}else await e.navigate(o.action||a,{preventScrollReset:o.preventScrollReset,formData:c,body:x,formMethod:o.method||i,formEncType:o.encType||l,replace:o.replace,state:o.state,fromRouteId:n,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,t,n])}function q5(e,{relative:t}={}){let{basename:n}=A.useContext(Br),r=A.useContext(Ar);_t(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),a={...Al(e||".",{relative:t})},i=Lr();if(e==null){a.search=i.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(d=>d==="")){l.delete("index"),c.filter(f=>f).forEach(f=>l.append("index",f));let d=l.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&o.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:es([n,a.pathname])),ll(a)}function W5(e,t={}){let n=A.useContext(M8);_t(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=K8("useViewTransitionState"),o=Al(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=os(n.currentLocation.pathname,r)||n.currentLocation.pathname,i=os(n.nextLocation.pathname,r)||n.nextLocation.pathname;return w0(o.pathname,i)!=null||w0(o.pathname,a)!=null}let K5={data:""},H5=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||K5,G5=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Q5=/\/\*[^]*?\*\/|  +/g,wg=/\n+/g,Ns=(e,t)=>{let n="",r="",o="";for(let a in e){let i=e[a];a[0]=="@"?a[1]=="i"?n=a+" "+i+";":r+=a[1]=="f"?Ns(i,a):a+"{"+Ns(i,a[1]=="k"?"":t)+"}":typeof i=="object"?r+=Ns(i,t?t.replace(/([^,])+/g,l=>a.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):a):i!=null&&(a=/^--/.test(a)?a:a.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=Ns.p?Ns.p(a,i):a+":"+i+";")}return n+(t&&o?t+"{"+o+"}":o)+r},qr={},H8=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+H8(e[n]);return t}return e},Y5=(e,t,n,r,o)=>{let a=H8(e),i=qr[a]||(qr[a]=(c=>{let x=0,d=11;for(;x<c.length;)d=101*d+c.charCodeAt(x++)>>>0;return"go"+d})(a));if(!qr[i]){let c=a!==e?e:(x=>{let d,f,m=[{}];for(;d=G5.exec(x.replace(Q5,""));)d[4]?m.shift():d[3]?(f=d[3].replace(wg," ").trim(),m.unshift(m[0][f]=m[0][f]||{})):m[0][d[1]]=d[2].replace(wg," ").trim();return m[0]})(e);qr[i]=Ns(o?{["@keyframes "+i]:c}:c,n?"":"."+i)}let l=n&&qr.g?qr.g:null;return n&&(qr.g=qr[i]),((c,x,d,f)=>{f?x.data=x.data.replace(f,c):x.data.indexOf(c)===-1&&(x.data=d?c+x.data:x.data+c)})(qr[i],t,r,l),i},X5=(e,t,n)=>e.reduce((r,o,a)=>{let i=t[a];if(i&&i.call){let l=i(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;i=c?"."+c:l&&typeof l=="object"?l.props?"":Ns(l,""):l===!1?"":l}return r+o+(i??"")},"");function nu(e){let t=this||{},n=e.call?e(t.p):e;return Y5(n.unshift?n.raw?X5(n,[].slice.call(arguments,1),t.p):n.reduce((r,o)=>Object.assign(r,o&&o.call?o(t.p):o),{}):n,H5(t.target),t.g,t.o,t.k)}let G8,Qx,Yx;nu.bind({g:1});let as=nu.bind({k:1});function J5(e,t,n,r){Ns.p=t,G8=e,Qx=n,Yx=r}function Js(e,t){let n=this||{};return function(){let r=arguments;function o(a,i){let l=Object.assign({},a),c=l.className||o.className;n.p=Object.assign({theme:Qx&&Qx()},l),n.o=/ *go\d+/.test(c),l.className=nu.apply(n,r)+(c?" "+c:"");let x=e;return e[0]&&(x=l.as||e,delete l.as),Yx&&x[0]&&Yx(l),G8(x,l)}return o}}var Z5=e=>typeof e=="function",C0=(e,t)=>Z5(e)?e(t):e,eC=(()=>{let e=0;return()=>(++e).toString()})(),Q8=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),tC=20,Y8=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,tC)};case 1:return{...e,toasts:e.toasts.map(a=>a.id===t.toast.id?{...a,...t.toast}:a)};case 2:let{toast:n}=t;return Y8(e,{type:e.toasts.find(a=>a.id===n.id)?1:0,toast:n});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(a=>a.id===r||r===void 0?{...a,dismissed:!0,visible:!1}:a)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(a=>a.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(a=>({...a,pauseDuration:a.pauseDuration+o}))}}},Kc=[],Bo={toasts:[],pausedAt:void 0},$o=e=>{Bo=Y8(Bo,e),Kc.forEach(t=>{t(Bo)})},nC={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},rC=(e={})=>{let[t,n]=A.useState(Bo),r=A.useRef(Bo);A.useEffect(()=>(r.current!==Bo&&n(Bo),Kc.push(n),()=>{let a=Kc.indexOf(n);a>-1&&Kc.splice(a,1)}),[]);let o=t.toasts.map(a=>{var i,l,c;return{...e,...e[a.type],...a,removeDelay:a.removeDelay||((i=e[a.type])==null?void 0:i.removeDelay)||(e==null?void 0:e.removeDelay),duration:a.duration||((l=e[a.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||nC[a.type],style:{...e.style,...(c=e[a.type])==null?void 0:c.style,...a.style}}});return{...t,toasts:o}},sC=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||eC()}),jl=e=>(t,n)=>{let r=sC(t,e,n);return $o({type:2,toast:r}),r.id},En=(e,t)=>jl("blank")(e,t);En.error=jl("error");En.success=jl("success");En.loading=jl("loading");En.custom=jl("custom");En.dismiss=e=>{$o({type:3,toastId:e})};En.remove=e=>$o({type:4,toastId:e});En.promise=(e,t,n)=>{let r=En.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let a=t.success?C0(t.success,o):void 0;return a?En.success(a,{id:r,...n,...n==null?void 0:n.success}):En.dismiss(r),o}).catch(o=>{let a=t.error?C0(t.error,o):void 0;a?En.error(a,{id:r,...n,...n==null?void 0:n.error}):En.dismiss(r)}),e};var oC=(e,t)=>{$o({type:1,toast:{id:e,height:t}})},aC=()=>{$o({type:5,time:Date.now()})},Ii=new Map,iC=1e3,lC=(e,t=iC)=>{if(Ii.has(e))return;let n=setTimeout(()=>{Ii.delete(e),$o({type:4,toastId:e})},t);Ii.set(e,n)},cC=e=>{let{toasts:t,pausedAt:n}=rC(e);A.useEffect(()=>{if(n)return;let a=Date.now(),i=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(a-l.createdAt);if(c<0){l.visible&&En.dismiss(l.id);return}return setTimeout(()=>En.dismiss(l.id),c)});return()=>{i.forEach(l=>l&&clearTimeout(l))}},[t,n]);let r=A.useCallback(()=>{n&&$o({type:6,time:Date.now()})},[n]),o=A.useCallback((a,i)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:x}=i||{},d=t.filter(v=>(v.position||x)===(a.position||x)&&v.height),f=d.findIndex(v=>v.id===a.id),m=d.filter((v,y)=>y<f&&v.visible).length;return d.filter(v=>v.visible).slice(...l?[m+1]:[0,m]).reduce((v,y)=>v+(y.height||0)+c,0)},[t]);return A.useEffect(()=>{t.forEach(a=>{if(a.dismissed)lC(a.id,a.removeDelay);else{let i=Ii.get(a.id);i&&(clearTimeout(i),Ii.delete(a.id))}})},[t]),{toasts:t,handlers:{updateHeight:oC,startPause:aC,endPause:r,calculateOffset:o}}},uC=as`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,dC=as`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,xC=as`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,hC=Js("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${uC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${dC} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${xC} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,fC=as`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,mC=Js("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${fC} 1s linear infinite;
`,pC=as`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,gC=as`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,yC=Js("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${pC} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${gC} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,vC=Js("div")`
  position: absolute;
`,EC=Js("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,bC=as`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,wC=Js("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${bC} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,CC=({toast:e})=>{let{icon:t,type:n,iconTheme:r}=e;return t!==void 0?typeof t=="string"?A.createElement(wC,null,t):t:n==="blank"?null:A.createElement(EC,null,A.createElement(mC,{...r}),n!=="loading"&&A.createElement(vC,null,n==="error"?A.createElement(hC,{...r}):A.createElement(yC,{...r})))},BC=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,AC=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,jC="0%{opacity:0;} 100%{opacity:1;}",kC="0%{opacity:1;} 100%{opacity:0;}",DC=Js("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,FC=Js("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,NC=(e,t)=>{let n=e.includes("top")?1:-1,[r,o]=Q8()?[jC,kC]:[BC(n),AC(n)];return{animation:t?`${as(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${as(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},_C=A.memo(({toast:e,position:t,style:n,children:r})=>{let o=e.height?NC(e.position||t||"top-center",e.visible):{opacity:0},a=A.createElement(CC,{toast:e}),i=A.createElement(FC,{...e.ariaProps},C0(e.message,e));return A.createElement(DC,{className:e.className,style:{...o,...n,...e.style}},typeof r=="function"?r({icon:a,message:i}):A.createElement(A.Fragment,null,a,i))});J5(A.createElement);var SC=({id:e,className:t,style:n,onHeightUpdate:r,children:o})=>{let a=A.useCallback(i=>{if(i){let l=()=>{let c=i.getBoundingClientRect().height;r(e,c)};l(),new MutationObserver(l).observe(i,{subtree:!0,childList:!0,characterData:!0})}},[e,r]);return A.createElement("div",{ref:a,className:t,style:n},o)},PC=(e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},o=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Q8()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...r,...o}},TC=nu`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,bc=16,IC=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:r,children:o,containerStyle:a,containerClassName:i})=>{let{toasts:l,handlers:c}=cC(n);return A.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:bc,left:bc,right:bc,bottom:bc,pointerEvents:"none",...a},className:i,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(x=>{let d=x.position||t,f=c.calculateOffset(x,{reverseOrder:e,gutter:r,defaultPosition:t}),m=PC(d,f);return A.createElement(SC,{id:x.id,key:x.id,onHeightUpdate:c.updateHeight,className:x.visible?TC:"",style:m},x.type==="custom"?C0(x.message,x):o?o(x):A.createElement(_C,{toast:x,position:d}))}))},z=En;const RC="modulepreload",MC=function(e){return"/"+e},Cg={},kl=function(t,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));o=Promise.allSettled(n.map(c=>{if(c=MC(c),c in Cg)return;Cg[c]=!0;const x=c.endsWith(".css"),d=x?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const f=document.createElement("link");if(f.rel=x?"stylesheet":RC,x||(f.as="script"),f.crossOrigin="",f.href=c,l&&f.setAttribute("nonce",l),document.head.appendChild(f),x)return new Promise((m,v)=>{f.addEventListener("load",m),f.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return o.then(i=>{for(const l of i||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},LC=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>kl(async()=>{const{default:r}=await Promise.resolve().then(()=>Qa);return{default:r}},[]).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)};class Mf extends Error{constructor(t,n="FunctionsError",r){super(t),this.name=n,this.context=r}}class $C extends Mf{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Bg extends Mf{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class Ag extends Mf{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Xx;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Xx||(Xx={}));var OC=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};class UC{constructor(t,{headers:n={},customFetch:r,region:o=Xx.Any}={}){this.url=t,this.headers=n,this.region=o,this.fetch=LC(r)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,n={}){var r;return OC(this,void 0,void 0,function*(){try{const{headers:o,method:a,body:i}=n;let l={},{region:c}=n;c||(c=this.region);const x=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,x.searchParams.set("forceFunctionRegion",c));let d;i&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&(typeof Blob<"u"&&i instanceof Blob||i instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=i):typeof i=="string"?(l["Content-Type"]="text/plain",d=i):typeof FormData<"u"&&i instanceof FormData?d=i:(l["Content-Type"]="application/json",d=JSON.stringify(i)));const f=yield this.fetch(x.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),o),body:d}).catch(C=>{throw new $C(C)}),m=f.headers.get("x-relay-error");if(m&&m==="true")throw new Bg(f);if(!f.ok)throw new Ag(f);let v=((r=f.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return v==="application/json"?y=yield f.json():v==="application/octet-stream"?y=yield f.blob():v==="text/event-stream"?y=f:v==="multipart/form-data"?y=yield f.formData():y=yield f.text(),{data:y,error:null,response:f}}catch(o){return{data:null,error:o,response:o instanceof Ag||o instanceof Bg?o.context:void 0}}})}}var Fn={},Lf={},ru={},Dl={},su={},ou={},VC=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Pa=VC();const zC=Pa.fetch,X8=Pa.fetch.bind(Pa),J8=Pa.Headers,qC=Pa.Request,WC=Pa.Response,Qa=Object.freeze(Object.defineProperty({__proto__:null,Headers:J8,Request:qC,Response:WC,default:X8,fetch:zC},Symbol.toStringTag,{value:"Module"})),KC=Xb(Qa);var au={};Object.defineProperty(au,"__esModule",{value:!0});let HC=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};au.default=HC;var Z8=Cn&&Cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ou,"__esModule",{value:!0});const GC=Z8(KC),QC=Z8(au);let YC=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=GC.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,n){return this.headers=Object.assign({},this.headers),this.headers[t]=n,this}then(t,n){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let o=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var i,l,c;let x=null,d=null,f=null,m=a.status,v=a.statusText;if(a.ok){if(this.method!=="HEAD"){const B=await a.text();B===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=B:d=JSON.parse(B))}const C=(i=this.headers.Prefer)===null||i===void 0?void 0:i.match(/count=(exact|planned|estimated)/),P=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");C&&P&&P.length>1&&(f=parseInt(P[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(x={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,m=406,v="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const C=await a.text();try{x=JSON.parse(C),Array.isArray(x)&&a.status===404&&(d=[],x=null,m=200,v="OK")}catch{a.status===404&&C===""?(m=204,v="No Content"):x={message:C}}if(x&&this.isMaybeSingle&&(!((c=x==null?void 0:x.details)===null||c===void 0)&&c.includes("0 rows"))&&(x=null,m=200,v="OK"),x&&this.shouldThrowOnError)throw new QC.default(x)}return{error:x,data:d,count:f,status:m,statusText:v}});return this.shouldThrowOnError||(o=o.catch(a=>{var i,l,c;return{error:{message:`${(i=a==null?void 0:a.name)!==null&&i!==void 0?i:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),o.then(t,n)}returns(){return this}overrideTypes(){return this}};ou.default=YC;var XC=Cn&&Cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(su,"__esModule",{value:!0});const JC=XC(ou);let ZC=class extends JC.default{select(t){let n=!1;const r=(t??"*").split("").map(o=>/\s/.test(o)&&!n?"":(o==='"'&&(n=!n),o)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:n=!0,nullsFirst:r,foreignTable:o,referencedTable:a=o}={}){const i=a?`${a}.order`:"order",l=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${l?`${l},`:""}${t}.${n?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:n,referencedTable:r=n}={}){const o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(o,`${t}`),this}range(t,n,{foreignTable:r,referencedTable:o=r}={}){const a=typeof o>"u"?"offset":`${o}.offset`,i=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(i,`${n-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:n=!1,settings:r=!1,buffers:o=!1,wal:a=!1,format:i="text"}={}){var l;const c=[t?"analyze":null,n?"verbose":null,r?"settings":null,o?"buffers":null,a?"wal":null].filter(Boolean).join("|"),x=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${x}"; options=${c};`,i==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};su.default=ZC;var e4=Cn&&Cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dl,"__esModule",{value:!0});const t4=e4(su);let n4=class extends t4.default{eq(t,n){return this.url.searchParams.append(t,`eq.${n}`),this}neq(t,n){return this.url.searchParams.append(t,`neq.${n}`),this}gt(t,n){return this.url.searchParams.append(t,`gt.${n}`),this}gte(t,n){return this.url.searchParams.append(t,`gte.${n}`),this}lt(t,n){return this.url.searchParams.append(t,`lt.${n}`),this}lte(t,n){return this.url.searchParams.append(t,`lte.${n}`),this}like(t,n){return this.url.searchParams.append(t,`like.${n}`),this}likeAllOf(t,n){return this.url.searchParams.append(t,`like(all).{${n.join(",")}}`),this}likeAnyOf(t,n){return this.url.searchParams.append(t,`like(any).{${n.join(",")}}`),this}ilike(t,n){return this.url.searchParams.append(t,`ilike.${n}`),this}ilikeAllOf(t,n){return this.url.searchParams.append(t,`ilike(all).{${n.join(",")}}`),this}ilikeAnyOf(t,n){return this.url.searchParams.append(t,`ilike(any).{${n.join(",")}}`),this}is(t,n){return this.url.searchParams.append(t,`is.${n}`),this}in(t,n){const r=Array.from(new Set(n)).map(o=>typeof o=="string"&&new RegExp("[,()]").test(o)?`"${o}"`:`${o}`).join(",");return this.url.searchParams.append(t,`in.(${r})`),this}contains(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cs.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cs.{${n.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(n)}`),this}containedBy(t,n){return typeof n=="string"?this.url.searchParams.append(t,`cd.${n}`):Array.isArray(n)?this.url.searchParams.append(t,`cd.{${n.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(n)}`),this}rangeGt(t,n){return this.url.searchParams.append(t,`sr.${n}`),this}rangeGte(t,n){return this.url.searchParams.append(t,`nxl.${n}`),this}rangeLt(t,n){return this.url.searchParams.append(t,`sl.${n}`),this}rangeLte(t,n){return this.url.searchParams.append(t,`nxr.${n}`),this}rangeAdjacent(t,n){return this.url.searchParams.append(t,`adj.${n}`),this}overlaps(t,n){return typeof n=="string"?this.url.searchParams.append(t,`ov.${n}`):this.url.searchParams.append(t,`ov.{${n.join(",")}}`),this}textSearch(t,n,{config:r,type:o}={}){let a="";o==="plain"?a="pl":o==="phrase"?a="ph":o==="websearch"&&(a="w");const i=r===void 0?"":`(${r})`;return this.url.searchParams.append(t,`${a}fts${i}.${n}`),this}match(t){return Object.entries(t).forEach(([n,r])=>{this.url.searchParams.append(n,`eq.${r}`)}),this}not(t,n,r){return this.url.searchParams.append(t,`not.${n}.${r}`),this}or(t,{foreignTable:n,referencedTable:r=n}={}){const o=r?`${r}.or`:"or";return this.url.searchParams.append(o,`(${t})`),this}filter(t,n,r){return this.url.searchParams.append(t,`${n}.${r}`),this}};Dl.default=n4;var r4=Cn&&Cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ru,"__esModule",{value:!0});const yi=r4(Dl);let s4=class{constructor(t,{headers:n={},schema:r,fetch:o}){this.url=t,this.headers=n,this.schema=r,this.fetch=o}select(t,{head:n=!1,count:r}={}){const o=n?"HEAD":"GET";let a=!1;const i=(t??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",i),r&&(this.headers.Prefer=`count=${r}`),new yi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:n,defaultToNull:r=!0}={}){const o="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),n&&a.push(`count=${n}`),r||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){const i=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(i.length>0){const l=[...new Set(i)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new yi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:n,ignoreDuplicates:r=!1,count:o,defaultToNull:a=!0}={}){const i="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(n!==void 0&&this.url.searchParams.set("on_conflict",n),this.headers.Prefer&&l.push(this.headers.Prefer),o&&l.push(`count=${o}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((x,d)=>x.concat(Object.keys(d)),[]);if(c.length>0){const x=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",x.join(","))}}return new yi.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:n}={}){const r="PATCH",o=[];return this.headers.Prefer&&o.push(this.headers.Prefer),n&&o.push(`count=${n}`),this.headers.Prefer=o.join(","),new yi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const n="DELETE",r=[];return t&&r.push(`count=${t}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new yi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};ru.default=s4;var iu={},lu={};Object.defineProperty(lu,"__esModule",{value:!0});lu.version=void 0;lu.version="0.0.0-automated";Object.defineProperty(iu,"__esModule",{value:!0});iu.DEFAULT_HEADERS=void 0;const o4=lu;iu.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${o4.version}`};var e1=Cn&&Cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lf,"__esModule",{value:!0});const a4=e1(ru),i4=e1(Dl),l4=iu;let c4=class t1{constructor(t,{headers:n={},schema:r,fetch:o}={}){this.url=t,this.headers=Object.assign(Object.assign({},l4.DEFAULT_HEADERS),n),this.schemaName=r,this.fetch=o}from(t){const n=new URL(`${this.url}/${t}`);return new a4.default(n,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new t1(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,n={},{head:r=!1,get:o=!1,count:a}={}){let i;const l=new URL(`${this.url}/rpc/${t}`);let c;r||o?(i=r?"HEAD":"GET",Object.entries(n).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(i="POST",c=n);const x=Object.assign({},this.headers);return a&&(x.Prefer=`count=${a}`),new i4.default({method:i,url:l,headers:x,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Lf.default=c4;var Ya=Cn&&Cn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Fn,"__esModule",{value:!0});Fn.PostgrestError=Fn.PostgrestBuilder=Fn.PostgrestTransformBuilder=Fn.PostgrestFilterBuilder=Fn.PostgrestQueryBuilder=Fn.PostgrestClient=void 0;const n1=Ya(Lf);Fn.PostgrestClient=n1.default;const r1=Ya(ru);Fn.PostgrestQueryBuilder=r1.default;const s1=Ya(Dl);Fn.PostgrestFilterBuilder=s1.default;const o1=Ya(su);Fn.PostgrestTransformBuilder=o1.default;const a1=Ya(ou);Fn.PostgrestBuilder=a1.default;const i1=Ya(au);Fn.PostgrestError=i1.default;var u4=Fn.default={PostgrestClient:n1.default,PostgrestQueryBuilder:r1.default,PostgrestFilterBuilder:s1.default,PostgrestTransformBuilder:o1.default,PostgrestBuilder:a1.default,PostgrestError:i1.default};const{PostgrestClient:d4,PostgrestQueryBuilder:I_,PostgrestFilterBuilder:R_,PostgrestTransformBuilder:M_,PostgrestBuilder:L_,PostgrestError:$_}=u4;function x4(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const h4=x4(),f4="2.11.15",m4=`realtime-js/${f4}`,p4="1.0.0",l1=1e4,g4=1e3;var Ri;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Ri||(Ri={}));var hn;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(hn||(hn={}));var fr;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(fr||(fr={}));var Jx;(function(e){e.websocket="websocket"})(Jx||(Jx={}));var vo;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(vo||(vo={}));class y4{constructor(){this.HEADER_LENGTH=1}decode(t,n){return t.constructor===ArrayBuffer?n(this._binaryDecode(t)):n(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const n=new DataView(t),r=new TextDecoder;return this._decodeBroadcast(t,n,r)}_decodeBroadcast(t,n,r){const o=n.getUint8(1),a=n.getUint8(2);let i=this.HEADER_LENGTH+2;const l=r.decode(t.slice(i,i+o));i=i+o;const c=r.decode(t.slice(i,i+a));i=i+a;const x=JSON.parse(r.decode(t.slice(i,t.byteLength)));return{ref:null,topic:l,event:c,payload:x}}}class c1{constructor(t,n){this.callback=t,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ct;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(Ct||(Ct={}));const jg=(e,t,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(t).reduce((a,i)=>(a[i]=v4(i,e,t,o),a),{})},v4=(e,t,n,r)=>{const o=t.find(l=>l.name===e),a=o==null?void 0:o.type,i=n[e];return a&&!r.includes(a)?u1(a,i):Zx(i)},u1=(e,t)=>{if(e.charAt(0)==="_"){const n=e.slice(1,e.length);return C4(t,n)}switch(e){case Ct.bool:return E4(t);case Ct.float4:case Ct.float8:case Ct.int2:case Ct.int4:case Ct.int8:case Ct.numeric:case Ct.oid:return b4(t);case Ct.json:case Ct.jsonb:return w4(t);case Ct.timestamp:return B4(t);case Ct.abstime:case Ct.date:case Ct.daterange:case Ct.int4range:case Ct.int8range:case Ct.money:case Ct.reltime:case Ct.text:case Ct.time:case Ct.timestamptz:case Ct.timetz:case Ct.tsrange:case Ct.tstzrange:return Zx(t);default:return Zx(t)}},Zx=e=>e,E4=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},b4=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},w4=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},C4=(e,t)=>{if(typeof e!="string")return e;const n=e.length-1,r=e[n];if(e[0]==="{"&&r==="}"){let a;const i=e.slice(1,n);try{a=JSON.parse("["+i+"]")}catch{a=i?i.split(","):[]}return a.map(l=>u1(t,l))}return e},B4=e=>typeof e=="string"?e.replace(" ","T"):e,d1=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Bd{constructor(t,n,r={},o=l1){this.channel=t,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,n){var r;return this._hasReceived(t)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:t,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:n}){this.recHooks.filter(r=>r.status===t).forEach(r=>r.callback(n))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var kg;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(kg||(kg={}));class Mi{constructor(t,n){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Mi.syncState(this.state,o,a,i),this.pendingDiffs.forEach(c=>{this.state=Mi.syncDiff(this.state,c,a,i)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:i,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Mi.syncDiff(this.state,o,a,i),l())}),this.onJoin((o,a,i)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:i})}),this.onLeave((o,a,i)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:i})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,n,r,o){const a=this.cloneDeep(t),i=this.transformState(n),l={},c={};return this.map(a,(x,d)=>{i[x]||(c[x]=d)}),this.map(i,(x,d)=>{const f=a[x];if(f){const m=d.map(P=>P.presence_ref),v=f.map(P=>P.presence_ref),y=d.filter(P=>v.indexOf(P.presence_ref)<0),C=f.filter(P=>m.indexOf(P.presence_ref)<0);y.length>0&&(l[x]=y),C.length>0&&(c[x]=C)}else l[x]=d}),this.syncDiff(a,{joins:l,leaves:c},r,o)}static syncDiff(t,n,r,o){const{joins:a,leaves:i}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(l,c)=>{var x;const d=(x=t[l])!==null&&x!==void 0?x:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(v=>v.presence_ref),m=d.filter(v=>f.indexOf(v.presence_ref)<0);t[l].unshift(...m)}r(l,d,c)}),this.map(i,(l,c)=>{let x=t[l];if(!x)return;const d=c.map(f=>f.presence_ref);x=x.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=x,o(l,x,c),x.length===0&&delete t[l]}),t}static map(t,n){return Object.getOwnPropertyNames(t).map(r=>n(r,t[r]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((n,r)=>{const o=t[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Dg;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Dg||(Dg={}));var Fg;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Fg||(Fg={}));var Gr;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Gr||(Gr={}));class $f{constructor(t,n={config:{}},r){this.topic=t,this.params=n,this.socket=r,this.bindings={},this.state=hn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Bd(this,fr.join,this.params,this.timeout),this.rejoinTimer=new c1(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=hn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=hn.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=hn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(fr.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new Mi(this),this.broadcastEndpointURL=d1(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(t,n=this.timeout){var r,o;if(this.socket.isConnected()||this.socket.connect(),this.state==hn.closed){const{config:{broadcast:a,presence:i,private:l}}=this.params;this._onError(d=>t==null?void 0:t(Gr.CHANNEL_ERROR,d)),this._onClose(()=>t==null?void 0:t(Gr.CLOSED));const c={},x={broadcast:a,presence:i,postgres_changes:(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(d=>d.filter))!==null&&o!==void 0?o:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:x},c)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:d})=>{var f;if(this.socket.setAuth(),d===void 0){t==null||t(Gr.SUBSCRIBED);return}else{const m=this.bindings.postgres_changes,v=(f=m==null?void 0:m.length)!==null&&f!==void 0?f:0,y=[];for(let C=0;C<v;C++){const P=m[C],{filter:{event:B,schema:g,table:b,filter:j}}=P,D=d&&d[C];if(D&&D.event===B&&D.schema===g&&D.table===b&&D.filter===j)y.push(Object.assign(Object.assign({},P),{id:D.id}));else{this.unsubscribe(),this.state=hn.errored,t==null||t(Gr.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Gr.SUBSCRIBED);return}}).receive("error",d=>{this.state=hn.errored,t==null||t(Gr.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(d).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Gr.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,n={}){return await this.send({type:"presence",event:"track",payload:t},n.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,n,r){return this._on(t,n,r)}async send(t,n={}){var r,o;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:i}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const x=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=x.body)===null||o===void 0?void 0:o.cancel()),x.ok?"ok":"error"}catch(x){return x.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var i,l,c;const x=this._push(t.type,t,n.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(i=this.params)===null||i===void 0?void 0:i.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),x.receive("ok",()=>a("ok")),x.receive("error",()=>a("error")),x.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=hn.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(fr.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Bd(this,fr.leave,{},t),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(t,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),i=await this.socket.fetch(t,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),i}_push(t,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Bd(this,t,n,r);return this._canPush()?o.send():(o.startTimeout(),this.pushBuffer.push(o)),o}_onMessage(t,n,r){return n}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,n,r){var o,a;const i=t.toLocaleLowerCase(),{close:l,error:c,leave:x,join:d}=fr;if(r&&[l,c,x,d].indexOf(i)>=0&&r!==this._joinRef())return;let m=this._onMessage(i,n,r);if(n&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(v=>{var y,C,P;return((y=v.filter)===null||y===void 0?void 0:y.event)==="*"||((P=(C=v.filter)===null||C===void 0?void 0:C.event)===null||P===void 0?void 0:P.toLocaleLowerCase())===i}).map(v=>v.callback(m,r)):(a=this.bindings[i])===null||a===void 0||a.filter(v=>{var y,C,P,B,g,b;if(["broadcast","presence","postgres_changes"].includes(i))if("id"in v){const j=v.id,D=(y=v.filter)===null||y===void 0?void 0:y.event;return j&&((C=n.ids)===null||C===void 0?void 0:C.includes(j))&&(D==="*"||(D==null?void 0:D.toLocaleLowerCase())===((P=n.data)===null||P===void 0?void 0:P.type.toLocaleLowerCase()))}else{const j=(g=(B=v==null?void 0:v.filter)===null||B===void 0?void 0:B.event)===null||g===void 0?void 0:g.toLocaleLowerCase();return j==="*"||j===((b=n==null?void 0:n.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return v.type.toLocaleLowerCase()===i}).map(v=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:C,table:P,commit_timestamp:B,type:g,errors:b}=y;m=Object.assign(Object.assign({},{schema:C,table:P,commit_timestamp:B,eventType:g,new:{},old:{},errors:b}),this._getPayloadRecords(y))}v.callback(m,r)})}_isClosed(){return this.state===hn.closed}_isJoined(){return this.state===hn.joined}_isJoining(){return this.state===hn.joining}_isLeaving(){return this.state===hn.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,n,r){const o=t.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(t,n){const r=t.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&$f.isEqual(o.filter,n))}),this}static isEqual(t,n){if(Object.keys(t).length!==Object.keys(n).length)return!1;for(const r in t)if(t[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(fr.close,{},t)}_onError(t){this._on(fr.error,{},n=>t(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=hn.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const n={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(n.new=jg(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(n.old=jg(t.columns,t.old_record)),n}}const Ng=()=>{},A4=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class j4{constructor(t,n){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=l1,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ng,this.ref=0,this.logger=Ng,this.conn=null,this.sendBuffer=[],this.serializer=new y4,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...l)=>kl(async()=>{const{default:c}=await Promise.resolve().then(()=>Qa);return{default:c}},void 0).then(({default:c})=>c(...l)):i=fetch,(...l)=>i(...l)},this.endPoint=`${t}/${Jx.websocket}`,this.httpEndpoint=d1(t),n!=null&&n.transport?this.transport=n.transport:this.transport=null,n!=null&&n.params&&(this.params=n.params),n!=null&&n.timeout&&(this.timeout=n.timeout),n!=null&&n.logger&&(this.logger=n.logger),(n!=null&&n.logLevel||n!=null&&n.log_level)&&(this.logLevel=n.logLevel||n.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),n!=null&&n.heartbeatIntervalMs&&(this.heartbeatIntervalMs=n.heartbeatIntervalMs);const o=(r=n==null?void 0:n.params)===null||r===void 0?void 0:r.apikey;if(o&&(this.accessTokenValue=o,this.apiKey=o),this.reconnectAfterMs=n!=null&&n.reconnectAfterMs?n.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=n!=null&&n.encode?n.encode:(a,i)=>i(JSON.stringify(a)),this.decode=n!=null&&n.decode?n.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new c1(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(n==null?void 0:n.fetch),n!=null&&n.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(n==null?void 0:n.worker)||!1,this.workerUrl=n==null?void 0:n.workerUrl}this.accessToken=(n==null?void 0:n.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=h4),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:p4}))}disconnect(t,n){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,n??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(r=>r.teardown()))}getChannels(){return this.channels}async removeChannel(t){const n=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const t=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,n,r){this.logger(t,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Ri.connecting:return vo.Connecting;case Ri.open:return vo.Open;case Ri.closing:return vo.Closing;default:return vo.Closed}}isConnected(){return this.connectionState()===vo.Open}channel(t,n={config:{}}){const r=`realtime:${t}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new $f(`realtime:${t}`,n,this);return this.channels.push(a),a}}push(t){const{topic:n,event:r,payload:o,ref:a}=t,i=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(t=null){let n=t||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:m4};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(fr.access_token,{access_token:n})}))}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(t=this.conn)===null||t===void 0||t.close(g4,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let n=this.channels.find(r=>r.topic===t&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${t}"`),n.unsubscribe())}_remove(t){this.channels=this.channels.filter(n=>n.topic!==t.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_onConnMessage(t){this.decode(t.data,n=>{let{topic:r,event:o,payload:a,ref:i}=n;r==="phoenix"&&o==="phx_reply"&&this.heartbeatCallback(n.payload.status=="ok"?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${r} ${o} ${i&&"("+i+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(r)).forEach(l=>l._trigger(o,a,i)),this.stateChangeCallbacks.message.forEach(l=>l(n))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(t=>t())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(n=>n(t))}_onConnError(t){this.log("transport",`${t}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(n=>n(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(fr.error))}_appendParams(t,n){if(Object.keys(n).length===0)return t;const r=t.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${t}${r}${o}`}_workerObjectUrl(t){let n;if(t)n=t;else{const r=new Blob([A4],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}}class Of extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Zt(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class k4 extends Of{constructor(t,n){super(t),this.name="StorageApiError",this.status=n}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class eh extends Of{constructor(t,n){super(t),this.name="StorageUnknownError",this.originalError=n}}var D4=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};const x1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>kl(async()=>{const{default:r}=await Promise.resolve().then(()=>Qa);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},F4=()=>D4(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kl(()=>Promise.resolve().then(()=>Qa),void 0)).Response:Response}),th=e=>{if(Array.isArray(e))return e.map(n=>th(n));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[o]=th(r)}),t};var Oo=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};const Ad=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),N4=(e,t,n)=>Oo(void 0,void 0,void 0,function*(){const r=yield F4();e instanceof r&&!(n!=null&&n.noResolveJson)?e.json().then(o=>{t(new k4(Ad(o),e.status||500))}).catch(o=>{t(new eh(Ad(o),o))}):t(new eh(Ad(e),e))}),_4=(e,t,n,r)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),r&&(o.body=JSON.stringify(r)),Object.assign(Object.assign({},o),n))};function Fl(e,t,n,r,o,a){return Oo(this,void 0,void 0,function*(){return new Promise((i,l)=>{e(n,_4(t,r,o,a)).then(c=>{if(!c.ok)throw c;return r!=null&&r.noResolveJson?c:c.json()}).then(c=>i(c)).catch(c=>N4(c,l,r))})})}function B0(e,t,n,r){return Oo(this,void 0,void 0,function*(){return Fl(e,"GET",t,n,r)})}function ks(e,t,n,r,o){return Oo(this,void 0,void 0,function*(){return Fl(e,"POST",t,r,o,n)})}function S4(e,t,n,r,o){return Oo(this,void 0,void 0,function*(){return Fl(e,"PUT",t,r,o,n)})}function P4(e,t,n,r){return Oo(this,void 0,void 0,function*(){return Fl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function h1(e,t,n,r,o){return Oo(this,void 0,void 0,function*(){return Fl(e,"DELETE",t,r,o,n)})}var kn=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};const T4={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},_g={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class I4{constructor(t,n={},r,o){this.url=t,this.headers=n,this.bucketId=r,this.fetch=x1(o)}uploadOrUpdate(t,n,r,o){return kn(this,void 0,void 0,function*(){try{let a;const i=Object.assign(Object.assign({},_g),o);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(i.upsert)});const c=i.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",i.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=r,l["cache-control"]=`max-age=${i.cacheControl}`,l["content-type"]=i.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),o!=null&&o.headers&&(l=Object.assign(Object.assign({},l),o.headers));const x=this._removeEmptyFolders(n),d=this._getFinalPath(x),f=yield this.fetch(`${this.url}/object/${d}`,Object.assign({method:t,body:a,headers:l},i!=null&&i.duplex?{duplex:i.duplex}:{})),m=yield f.json();return f.ok?{data:{path:x,id:m.Id,fullPath:m.Key},error:null}:{data:null,error:m}}catch(a){if(Zt(a))return{data:null,error:a};throw a}})}upload(t,n,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,n,r)})}uploadToSignedUrl(t,n,r,o){return kn(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),i=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${i}`);l.searchParams.set("token",n);try{let c;const x=Object.assign({upsert:_g.upsert},o),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(x.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",x.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",x.cacheControl)):(c=r,d["cache-control"]=`max-age=${x.cacheControl}`,d["content-type"]=x.contentType);const f=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:d}),m=yield f.json();return f.ok?{data:{path:a,fullPath:m.Key},error:null}:{data:null,error:m}}catch(c){if(Zt(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,n){return kn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(t);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield ks(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),i=new URL(this.url+a.url),l=i.searchParams.get("token");if(!l)throw new Of("No token returned by API");return{data:{signedUrl:i.toString(),path:t,token:l},error:null}}catch(r){if(Zt(r))return{data:null,error:r};throw r}})}update(t,n,r){return kn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,n,r)})}move(t,n,r){return kn(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(Zt(o))return{data:null,error:o};throw o}})}copy(t,n,r){return kn(this,void 0,void 0,function*(){try{return{data:{path:(yield ks(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(Zt(o))return{data:null,error:o};throw o}})}createSignedUrl(t,n,r){return kn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),a=yield ks(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const i=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${i}`)},{data:a,error:null}}catch(o){if(Zt(o))return{data:null,error:o};throw o}})}createSignedUrls(t,n,r){return kn(this,void 0,void 0,function*(){try{const o=yield ks(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:t},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(i=>Object.assign(Object.assign({},i),{signedUrl:i.signedURL?encodeURI(`${this.url}${i.signedURL}${a}`):null})),error:null}}catch(o){if(Zt(o))return{data:null,error:o};throw o}})}download(t,n){return kn(this,void 0,void 0,function*(){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),i=a?`?${a}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield B0(this.fetch,`${this.url}/${o}/${l}${i}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Zt(l))return{data:null,error:l};throw l}})}info(t){return kn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{const r=yield B0(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:th(r),error:null}}catch(r){if(Zt(r))return{data:null,error:r};throw r}})}exists(t){return kn(this,void 0,void 0,function*(){const n=this._getFinalPath(t);try{return yield P4(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Zt(r)&&r instanceof eh){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(t,n){const r=this._getFinalPath(t),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const l=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});c!==""&&o.push(c);let x=o.join("&");return x!==""&&(x=`?${x}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${x}`)}}}remove(t){return kn(this,void 0,void 0,function*(){try{return{data:yield h1(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(n){if(Zt(n))return{data:null,error:n};throw n}})}list(t,n,r){return kn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},T4),n),{prefix:t||""});return{data:yield ks(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(Zt(o))return{data:null,error:o};throw o}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const n=[];return t.width&&n.push(`width=${t.width}`),t.height&&n.push(`height=${t.height}`),t.resize&&n.push(`resize=${t.resize}`),t.format&&n.push(`format=${t.format}`),t.quality&&n.push(`quality=${t.quality}`),n.join("&")}}const R4="2.7.1",M4={"X-Client-Info":`storage-js/${R4}`};var Ho=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};class L4{constructor(t,n={},r){this.url=t,this.headers=Object.assign(Object.assign({},M4),n),this.fetch=x1(r)}listBuckets(){return Ho(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(Zt(t))return{data:null,error:t};throw t}})}getBucket(t){return Ho(this,void 0,void 0,function*(){try{return{data:yield B0(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(n){if(Zt(n))return{data:null,error:n};throw n}})}createBucket(t,n={public:!1}){return Ho(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Zt(r))return{data:null,error:r};throw r}})}updateBucket(t,n){return Ho(this,void 0,void 0,function*(){try{return{data:yield S4(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Zt(r))return{data:null,error:r};throw r}})}emptyBucket(t){return Ho(this,void 0,void 0,function*(){try{return{data:yield ks(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(Zt(n))return{data:null,error:n};throw n}})}deleteBucket(t){return Ho(this,void 0,void 0,function*(){try{return{data:yield h1(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(n){if(Zt(n))return{data:null,error:n};throw n}})}}class $4 extends L4{constructor(t,n={},r){super(t,n,r)}from(t){return new I4(this.url,this.headers,t,this.fetch)}}const O4="2.52.0";let Bi="";typeof Deno<"u"?Bi="deno":typeof document<"u"?Bi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Bi="react-native":Bi="node";const U4={"X-Client-Info":`supabase-js-${Bi}/${O4}`},V4={headers:U4},z4={schema:"public"},q4={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},W4={};var K4=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};const H4=e=>{let t;return e?t=e:typeof fetch>"u"?t=X8:t=fetch,(...n)=>t(...n)},G4=()=>typeof Headers>"u"?J8:Headers,Q4=(e,t,n)=>{const r=H4(n),o=G4();return(a,i)=>K4(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let x=new o(i==null?void 0:i.headers);return x.has("apikey")||x.set("apikey",e),x.has("Authorization")||x.set("Authorization",`Bearer ${c}`),r(a,Object.assign(Object.assign({},i),{headers:x}))})};var Y4=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};function X4(e){return e.endsWith("/")?e:e+"/"}function J4(e,t){var n,r;const{db:o,auth:a,realtime:i,global:l}=e,{db:c,auth:x,realtime:d,global:f}=t,m={db:Object.assign(Object.assign({},c),o),auth:Object.assign(Object.assign({},x),a),realtime:Object.assign(Object.assign({},d),i),global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(n=f==null?void 0:f.headers)!==null&&n!==void 0?n:{}),(r=l==null?void 0:l.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>Y4(this,void 0,void 0,function*(){return""})};return e.accessToken?m.accessToken=e.accessToken:delete m.accessToken,m}const f1="2.71.1",Jo=30*1e3,nh=3,jd=nh*Jo,Z4="http://localhost:9999",e7="supabase.auth.token",t7={"X-Client-Info":`gotrue-js/${f1}`},rh="X-Supabase-Api-Version",m1={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},n7=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,r7=10*60*1e3;class Uf extends Error{constructor(t,n,r){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function tt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class s7 extends Uf{constructor(t,n,r){super(t,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function o7(e){return tt(e)&&e.name==="AuthApiError"}class p1 extends Uf{constructor(t,n){super(t),this.name="AuthUnknownError",this.originalError=n}}class Zs extends Uf{constructor(t,n,r,o){super(t,r,o),this.name=n,this.status=r}}class Cs extends Zs{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function a7(e){return tt(e)&&e.name==="AuthSessionMissingError"}class wc extends Zs{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cc extends Zs{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Bc extends Zs{constructor(t,n=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i7(e){return tt(e)&&e.name==="AuthImplicitGrantRedirectError"}class Sg extends Zs{constructor(t,n=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class sh extends Zs{constructor(t,n){super(t,"AuthRetryableFetchError",n,void 0)}}function kd(e){return tt(e)&&e.name==="AuthRetryableFetchError"}class Pg extends Zs{constructor(t,n,r){super(t,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class oh extends Zs{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const A0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Tg=` 	
\r=`.split(""),l7=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Tg.length;t+=1)e[Tg[t].charCodeAt(0)]=-2;for(let t=0;t<A0.length;t+=1)e[A0[t].charCodeAt(0)]=t;return e})();function Ig(e,t,n){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(A0[r]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const r=t.queue>>t.queuedBits-6&63;n(A0[r]),t.queuedBits-=6}}function g1(e,t,n){const r=l7[e];if(r>-1)for(t.queue=t.queue<<6|r,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Rg(e){const t=[],n=i=>{t.push(String.fromCodePoint(i))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=i=>{d7(i,r,n)};for(let i=0;i<e.length;i+=1)g1(e.charCodeAt(i),o,a);return t.join("")}function c7(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function u7(e,t){for(let n=0;n<e.length;n+=1){let r=e.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(e.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}c7(r,t)}}function d7(e,t,n){if(t.utf8seq===0){if(e<=127){n(e);return}for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&n(t.codepoint)}}function x7(e){const t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};for(let o=0;o<e.length;o+=1)g1(e.charCodeAt(o),n,r);return new Uint8Array(t)}function h7(e){const t=[];return u7(e,n=>t.push(n)),new Uint8Array(t)}function f7(e){const t=[],n={queue:0,queuedBits:0},r=o=>{t.push(o)};return e.forEach(o=>Ig(o,n,r)),Ig(null,n,r),t.join("")}function m7(e){return Math.round(Date.now()/1e3)+e}function p7(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ur=()=>typeof window<"u"&&typeof document<"u",co={tested:!1,writable:!1},y1=()=>{if(!ur())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(co.tested)return co.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),co.tested=!0,co.writable=!0}catch{co.tested=!0,co.writable=!1}return co.writable};function g7(e){const t={},n=new URL(e);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{t[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{t[o]=r}),t}const v1=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...n)=>kl(async()=>{const{default:r}=await Promise.resolve().then(()=>Qa);return{default:r}},void 0).then(({default:r})=>r(...n)):t=fetch,(...n)=>t(...n)},y7=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Zo=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},uo=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch{return n}},ws=async(e,t)=>{await e.removeItem(t)};class cu{constructor(){this.promise=new cu.promiseConstructor((t,n)=>{this.resolve=t,this.reject=n})}}cu.promiseConstructor=Promise;function Dd(e){const t=e.split(".");if(t.length!==3)throw new oh("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!n7.test(t[r]))throw new oh("JWT not in base64url format");return{header:JSON.parse(Rg(t[0])),payload:JSON.parse(Rg(t[1])),signature:x7(t[2]),raw:{header:t[0],payload:t[1]}}}async function v7(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function E7(e,t){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const i=await e(a);if(!t(a,null,i)){r(i);return}}catch(i){if(!t(a,i)){o(i);return}}})()})}function b7(e){return("0"+e.toString(16)).substr(-2)}function w7(){const t=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(t),Array.from(t,b7).join("")}async function C7(e){const n=new TextEncoder().encode(e),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function B7(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const n=await C7(e);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Go(e,t,n=!1){const r=w7();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Zo(e,`${t}-code-verifier`,o);const a=await B7(r);return[a,r===a?"plain":"s256"]}const A7=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function j7(e){const t=e.headers.get(rh);if(!t||!t.match(A7))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function k7(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function D7(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const F7=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Qo(e){if(!F7.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Fd(){const e={};return new Proxy(e,{get:(t,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Mg(e){return JSON.parse(JSON.stringify(e))}var N7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};const po=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_7=[502,503,504];async function Lg(e){var t;if(!y7(e))throw new sh(po(e),0);if(_7.includes(e.status))throw new sh(po(e),e.status);let n;try{n=await e.json()}catch(a){throw new p1(po(a),a)}let r;const o=j7(e);if(o&&o.getTime()>=m1["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new Pg(po(n),e.status,((t=n.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(r==="session_not_found")throw new Cs}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,i)=>a&&typeof i=="string",!0))throw new Pg(po(n),e.status,n.weak_password.reasons);throw new s7(po(n),e.status||500,r)}const S7=(e,t,n,r)=>{const o={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function ot(e,t,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[rh]||(a[rh]=m1["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const i=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(i.redirect_to=r.redirectTo);const l=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",c=await P7(e,t,n+l,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(c):{data:Object.assign({},c),error:null}}async function P7(e,t,n,r,o,a){const i=S7(t,r,o,a);let l;try{l=await e(n,Object.assign({},i))}catch(c){throw console.error(c),new sh(po(c),0)}if(l.ok||await Lg(l),r!=null&&r.noResolveJson)return l;try{return await l.json()}catch(c){await Lg(c)}}function Kr(e){var t;let n=null;M7(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=m7(e.expires_in)));const r=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:n,user:r},error:null}}function $g(e){const t=Kr(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(t.data.weak_password=e.weak_password),t}function _s(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function T7(e){return{data:e,error:null}}function I7(e){const{action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=e,i=N7(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},c=Object.assign({},i);return{data:{properties:l,user:c},error:null}}function R7(e){return e}function M7(e){return e.access_token&&e.refresh_token&&e.expires_in}const Nd=["global","local","others"];var L7=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]]);return n};class $7{constructor({url:t="",headers:n={},fetch:r}){this.url=t,this.headers=n,this.fetch=v1(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,n=Nd[0]){if(Nd.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nd.join(", ")}`);try{return await ot(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(t,n={}){try{return await ot(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:_s})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async generateLink(t){try{const{options:n}=t,r=L7(t,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await ot(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:I7,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(tt(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(t){try{return await ot(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:_s})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async listUsers(t){var n,r,o,a,i,l,c;try{const x={nextPage:null,lastPage:0,total:0},d=await ot(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=t==null?void 0:t.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:R7});if(d.error)throw d.error;const f=await d.json(),m=(i=d.headers.get("x-total-count"))!==null&&i!==void 0?i:0,v=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return v.length>0&&(v.forEach(y=>{const C=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),P=JSON.parse(y.split(";")[1].split("=")[1]);x[`${P}Page`]=C}),x.total=parseInt(m)),{data:Object.assign(Object.assign({},f),x),error:null}}catch(x){if(tt(x))return{data:{users:[]},error:x};throw x}}async getUserById(t){Qo(t);try{return await ot(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:_s})}catch(n){if(tt(n))return{data:{user:null},error:n};throw n}}async updateUserById(t,n){Qo(t);try{return await ot(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:n,headers:this.headers,xform:_s})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async deleteUser(t,n=!1){Qo(t);try{return await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:n},xform:_s})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async _listFactors(t){Qo(t.userId);try{const{data:n,error:r}=await ot(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _deleteFactor(t){Qo(t.userId),Qo(t.id);try{return{data:await ot(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}}function Og(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}function O7(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Yo={debug:!!(globalThis&&y1()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class E1 extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class U7 extends E1{}async function V7(e,t,n){Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const r=new globalThis.AbortController;return t>0&&setTimeout(()=>{r.abort(),Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,o.name);try{return await n()}finally{Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,o.name)}}else{if(t===0)throw Yo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new U7(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Yo.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}O7();const z7={url:Z4,storageKey:e7,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:t7,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ug(e,t,n){return await n()}const Xo={};class cl{constructor(t){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=cl.nextInstanceID,cl.nextInstanceID+=1,this.instanceID>0&&ur()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},z7),t);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new $7({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=v1(o.fetch),this.lock=o.lock||Ug,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:ur()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=V7:this.lock=Ug,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:y1()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Og(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Og(this.memoryStorage)),ur()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,n;return(n=(t=Xo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(t){Xo[this.storageKey]=Object.assign(Object.assign({},Xo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,n;return(n=(t=Xo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Xo[this.storageKey]=Object.assign(Object.assign({},Xo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${f1}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const n=g7(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),ur()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),i7(a)){const c=(t=a.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:i,redirectType:l}=o;return this._debug("#_initialize()","detected session in URL",i,"redirect type",l),await this._saveSession(i),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return tt(n)?{error:n}:{error:new p1("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var n,r,o;try{const a=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=t==null?void 0:t.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Kr}),{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,x=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:x,session:c},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var n,r,o;try{let a;if("email"in t){const{email:d,password:f,options:m}=t;let v=null,y=null;this.flowType==="pkce"&&([v,y]=await Go(this.storage,this.storageKey)),a=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m==null?void 0:m.emailRedirectTo,body:{email:d,password:f,data:(n=m==null?void 0:m.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken},code_challenge:v,code_challenge_method:y},xform:Kr})}else if("phone"in t){const{phone:d,password:f,options:m}=t;a=await ot(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(r=m==null?void 0:m.data)!==null&&r!==void 0?r:{},channel:(o=m==null?void 0:m.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:m==null?void 0:m.captchaToken}},xform:Kr})}else throw new Cc("You must provide either an email or phone number and a password");const{data:i,error:l}=a;if(l||!i)return{data:{user:null,session:null},error:l};const c=i.session,x=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:x,session:c},error:null}}catch(a){if(tt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let n;if("email"in t){const{email:a,password:i,options:l}=t;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$g})}else if("phone"in t){const{phone:a,password:i,options:l}=t;n=await ot(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:i,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:$g})}else throw new Cc("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new wc}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(t){var n,r,o,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(n=t.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=t.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:n}=t;if(n==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}async signInWithSolana(t){var n,r,o,a,i,l,c,x,d,f,m,v;let y,C;if("message"in t)y=t.message,C=t.signature;else{const{chain:P,wallet:B,statement:g,options:b}=t;let j;if(ur())if(typeof B=="object")j=B;else{const w=window;if("solana"in w&&typeof w.solana=="object"&&("signIn"in w.solana&&typeof w.solana.signIn=="function"||"signMessage"in w.solana&&typeof w.solana.signMessage=="function"))j=w.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=B}const D=new URL((n=b==null?void 0:b.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in j&&j.signIn){const w=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),g?{statement:g}:null));let E;if(Array.isArray(w)&&w[0]&&typeof w[0]=="object")E=w[0];else if(w&&typeof w=="object"&&"signedMessage"in w&&"signature"in w)E=w;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)y=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),C=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(o=(r=b==null?void 0:b.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((x=b==null?void 0:b.signInWithSolana)===null||x===void 0)&&x.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((f=(d=b==null?void 0:b.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const w=await j.signMessage(new TextEncoder().encode(y),"utf8");if(!w||!(w instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");C=w}}try{const{data:P,error:B}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:f7(C)},!((m=t.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:Kr});if(B)throw B;return!P||!P.session||!P.user?{data:{user:null,session:null},error:new wc}:(P.session&&(await this._saveSession(P.session),await this._notifyAllSubscribers("SIGNED_IN",P.session)),{data:Object.assign({},P),error:B})}catch(P){if(tt(P))return{data:{user:null,session:null},error:P};throw P}}async _exchangeCodeForSession(t){const n=await uo(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:a,error:i}=await ot(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:r},xform:Kr});if(await ws(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new wc}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:i})}catch(a){if(tt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:n,provider:r,token:o,access_token:a,nonce:i}=t,l=await ot(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:i,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Kr}),{data:c,error:x}=l;return x?{data:{user:null,session:null},error:x}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new wc}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:x})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(t){var n,r,o,a,i;try{if("email"in t){const{email:l,options:c}=t;let x=null,d=null;this.flowType==="pkce"&&([x,d]=await Go(this.storage,this.storageKey));const{error:f}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c==null?void 0:c.data)!==null&&n!==void 0?n:{},create_user:(r=c==null?void 0:c.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:x,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:x,error:d}=await ot(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(o=c==null?void 0:c.data)!==null&&o!==void 0?o:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(i=c==null?void 0:c.channel)!==null&&i!==void 0?i:"sms"}});return{data:{user:null,session:null,messageId:x==null?void 0:x.message_id},error:d}}throw new Cc("You must provide either an email or phone number.")}catch(l){if(tt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var n,r;try{let o,a;"options"in t&&(o=(n=t.options)===null||n===void 0?void 0:n.redirectTo,a=(r=t.options)===null||r===void 0?void 0:r.captchaToken);const{data:i,error:l}=await ot(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Kr});if(l)throw l;if(!i)throw new Error("An error occurred on token verification.");const c=i.session,x=i.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:x,session:c},error:null}}catch(o){if(tt(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(t){var n,r,o;try{let a=null,i=null;return this.flowType==="pkce"&&([a,i]=await Go(this.storage,this.storageKey)),await ot(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(r=(n=t.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:i}),headers:this.headers,xform:T7})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:n},error:r}=t;if(r)throw r;if(!n)throw new Cs;const{error:o}=await ot(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(t){if(tt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const n=`${this.url}/resend`;if("email"in t){const{email:r,type:o,options:a}=t,{error:i}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:i}}else if("phone"in t){const{phone:r,type:o,options:a}=t,{data:i,error:l}=await ot(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:i==null?void 0:i.message_id},error:l}}throw new Cc("You must provide either an email or phone number and a type")}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(t,n){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await t(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const n=await uo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?t=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const r=t.expires_at?t.expires_at*1e3-Date.now()<jd:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",t.expires_at),!r){if(this.userStorage){const i=await uo(this.userStorage,this.storageKey+"-user");i!=null&&i.user?t.user=i.user:t.user=Fd()}if(this.storage.isServer&&t.user){let i=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,x,d)=>(!i&&x==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),i=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,x,d))})}return{data:{session:t},error:null}}const{session:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:_s}):await this._useSession(async n=>{var r,o,a;const{data:i,error:l}=n;if(l)throw l;return!(!((r=i.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Cs}:await ot(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=i.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:_s})})}catch(n){if(tt(n))return a7(n)&&(await this._removeSession(),await ws(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(t,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,n))}async _updateUser(t,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Cs;const i=o.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await Go(this.storage,this.storageKey));const{data:x,error:d}=await ot(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:i.access_token,xform:_s});if(d)throw d;return i.user=x.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(r){if(tt(r))return{data:{user:null},error:r};throw r}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Cs;const n=Date.now()/1e3;let r=n,o=!0,a=null;const{payload:i}=Dd(t.access_token);if(i.exp&&(r=i.exp,o=r<=n),o){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(tt(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async n=>{var r;if(!t){const{data:i,error:l}=n;if(l)throw l;t=(r=i.session)!==null&&r!==void 0?r:void 0}if(!(t!=null&&t.refresh_token))throw new Cs;const{session:o,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(tt(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(t,n){try{if(!ur())throw new Bc("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Bc(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new Sg("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Bc("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Sg("No code detected.");const{data:g,error:b}=await this._exchangeCodeForSession(t.code);if(b)throw b;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:g.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:i,expires_in:l,expires_at:c,token_type:x}=t;if(!a||!l||!i||!x)throw new Bc("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let m=d+f;c&&(m=parseInt(c));const v=m-d;v*1e3<=Jo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${v}s, should have been closer to ${f}s`);const y=m-f;d-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,d):d-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,d);const{data:C,error:P}=await this._getUser(a);if(P)throw P;const B={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:f,expires_at:m,refresh_token:i,token_type:x,user:C.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:B,redirectType:t.type},error:null}}catch(r){if(tt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const n=await uo(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&n)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const i=(r=o.session)===null||r===void 0?void 0:r.access_token;if(i){const{error:l}=await this.admin.signOut(i,t);if(l&&!(o7(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await ws(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const n=p7(),r={id:n,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(t){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:i}=n;if(i)throw i;await((r=this.stateChangeEmitters.get(t))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await Go(this.storage,this.storageKey,!0));try{return await ot(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(tt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(t=n.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(n){if(tt(n))return{data:null,error:n};throw n}}async linkIdentity(t){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var i,l,c,x,d;const{data:f,error:m}=a;if(m)throw m;const v=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(i=t.options)===null||i===void 0?void 0:i.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ot(this.fetch,"GET",v,{headers:this.headers,jwt:(d=(x=f.session)===null||x===void 0?void 0:x.access_token)!==null&&d!==void 0?d:void 0})});if(o)throw o;return ur()&&!(!((n=t.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:t.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(tt(r))return{data:{provider:t.provider,url:null},error:r};throw r}}async unlinkIdentity(t){try{return await this._useSession(async n=>{var r,o;const{data:a,error:i}=n;if(i)throw i;return await ot(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _refreshAccessToken(t){const n=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await E7(async o=>(o>0&&await v7(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await ot(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Kr})),(o,a)=>{const i=200*Math.pow(2,o);return a&&kd(a)&&Date.now()+i-r<Jo})}catch(r){if(this._debug(n,"error",r),tt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",n,"url",r),ur()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:t,url:r},error:null}}async _recoverAndRefresh(){var t,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await uo(this.storage,this.storageKey);if(o&&this.userStorage){let i=await uo(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!i&&(i={user:o.user},await Zo(this.userStorage,this.storageKey+"-user",i)),o.user=(t=i==null?void 0:i.user)!==null&&t!==void 0?t:Fd()}else if(o&&!o.user&&!o.user){const i=await uo(this.storage,this.storageKey+"-user");i&&(i!=null&&i.user)?(o.user=i.user,await ws(this.storage,this.storageKey+"-user"),await Zo(this.storage,this.storageKey,o)):o.user=Fd()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<jd;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${jd}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:i}=await this._callRefreshToken(o.refresh_token);i&&(console.error(i),kd(i)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:i,error:l}=await this._getUser(o.access_token);!l&&(i!=null&&i.user)?(o.user=i.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(i){console.error("Error getting user data:",i),this._debug(r,"error getting user data, skipping SIGNED_IN notification",i)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(t){var n,r;if(!t)throw new Cs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new cu;const{data:a,error:i}=await this._refreshAccessToken(t);if(i)throw i;if(!a.session)throw new Cs;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(o,"error",a),tt(a)){const i={session:null,error:a};return kd(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(i),i}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,n,r=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:t,session:n});const a=[],i=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,n)}catch(c){a.push(c)}});if(await Promise.all(i),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const n=Object.assign({},t),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Zo(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=Mg(o);await Zo(this.storage,this.storageKey,a)}else{const o=Mg(n);await Zo(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await ws(this.storage,this.storageKey),await ws(this.storage,this.storageKey+"-code-verifier"),await ws(this.storage,this.storageKey+"-user"),this.userStorage&&await ws(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ur()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Jo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-t)/Jo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Jo}ms, refresh threshold is ${nh} ticks`),o<=nh&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof E1)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ur()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const n=`#_onVisibilityChanged(${t})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,i]=await Go(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(i)}`});o.push(l.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await ot(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _enroll(t){try{return await this._useSession(async n=>{var r,o;const{data:a,error:i}=n;if(i)return{data:null,error:i};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:x}=await ot(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return x?{data:null,error:x}:(t.factorType==="totp"&&(!((o=c==null?void 0:c.totp)===null||o===void 0)&&o.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(n){if(tt(n))return{data:null,error:n};throw n}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const{data:i,error:l}=await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:l})})}catch(n){if(tt(n))return{data:null,error:n};throw n}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await ot(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(tt(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(t){const{data:n,error:r}=await this._challenge({factorId:t.factorId});return r?{data:null,error:r}:await this._verify({factorId:t.factorId,challengeId:n.id,code:t.code})}async _listFactors(){const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const r=(t==null?void 0:t.factors)||[],o=r.filter(i=>i.factor_type==="totp"&&i.status==="verified"),a=r.filter(i=>i.factor_type==="phone"&&i.status==="verified");return{data:{all:r,totp:o,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var n,r;const{data:{session:o},error:a}=t;if(a)return{data:null,error:a};if(!o)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Dd(o.access_token);let l=null;i.aal&&(l=i.aal);let c=l;((r=(n=o.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const d=i.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,n={keys:[]}){let r=n.keys.find(l=>l.kid===t);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(l=>l.kid===t),r&&this.jwks_cached_at+r7>o)return r;const{data:a,error:i}=await ot(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(l=>l.kid===t),!r)?null:r}async getClaims(t,n={}){try{let r=t;if(!r){const{data:v,error:y}=await this.getSession();if(y||!v.session)return{data:null,error:y};r=v.session.access_token}const{header:o,payload:a,signature:i,raw:{header:l,payload:c}}=Dd(r);n!=null&&n.allowExpired||k7(a.exp);const x=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!x){const{error:v}=await this.getUser(r);if(v)throw v;return{data:{claims:a,header:o,signature:i},error:null}}const d=D7(o.alg),f=await crypto.subtle.importKey("jwk",x,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,i,h7(`${l}.${c}`)))throw new oh("Invalid JWT signature");return{data:{claims:a,header:o,signature:i},error:null}}catch(r){if(tt(r))return{data:null,error:r};throw r}}}cl.nextInstanceID=0;const q7=cl;class W7 extends q7{constructor(t){super(t)}}var K7=function(e,t,n,r){function o(a){return a instanceof n?a:new n(function(i){i(a)})}return new(n||(n=Promise))(function(a,i){function l(d){try{x(r.next(d))}catch(f){i(f)}}function c(d){try{x(r.throw(d))}catch(f){i(f)}}function x(d){d.done?a(d.value):o(d.value).then(l,c)}x((r=r.apply(e,t||[])).next())})};class H7{constructor(t,n,r){var o,a,i;if(this.supabaseUrl=t,this.supabaseKey=n,!t)throw new Error("supabaseUrl is required.");if(!n)throw new Error("supabaseKey is required.");const l=X4(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const x=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:z4,realtime:W4,auth:Object.assign(Object.assign({},q4),{storageKey:x}),global:V4},f=J4(r??{},d);this.storageKey=(o=f.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=f.global.headers)!==null&&a!==void 0?a:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(m,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((i=f.auth)!==null&&i!==void 0?i:{},this.headers,f.global.fetch),this.fetch=Q4(n,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new d4(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),f.accessToken||this._listenForAuthEvents()}get functions(){return new UC(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $4(this.storageUrl.href,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,n={},r={}){return this.rest.rpc(t,n,r)}channel(t,n={config:{}}){return this.realtime.channel(t,n)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,n;return K7(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(n=(t=r.session)===null||t===void 0?void 0:t.access_token)!==null&&n!==void 0?n:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:o,storageKey:a,flowType:i,lock:l,debug:c},x,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new W7({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),x),storageKey:a,autoRefreshToken:t,persistSession:n,detectSessionInUrl:r,storage:o,flowType:i,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new j4(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(t,n,r){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:t==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const G7=(e,t,n)=>new H7(e,t,n),b1="https://fylfbymwfymtcumpfcvf.supabase.co",Q7="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5bGZieW13ZnltdGN1bXBmY3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODkyOTAsImV4cCI6MjA2OTM2NTI5MH0.k7sy5m9jucYj_8NRBXCFkOm17rVjAKLAR12dAv59pP4",le=G7(b1,Q7,{auth:{persistSession:!0,autoRefreshToken:!0},realtime:{params:{eventsPerSecond:10}}}),Tt=(e,t="images")=>e?e.startsWith("http://")||e.startsWith("https://")||e.startsWith("blob:")||e.startsWith("data:")?e:`${b1}/storage/v1/object/public/${t}/${e}`:"",Y7={},Vg=e=>{let t;const n=new Set,r=(d,f)=>{const m=typeof d=="function"?d(t):d;if(!Object.is(m,t)){const v=t;t=f??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(y=>y(t,v))}},o=()=>t,c={setState:r,getState:o,getInitialState:()=>x,subscribe:d=>(n.add(d),()=>n.delete(d)),destroy:()=>{(Y7?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},x=t=e(r,o,c);return c},X7=e=>e?Vg(e):Vg;var w1={exports:{}},C1={},B1={exports:{}},A1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta=A;function J7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Z7=typeof Object.is=="function"?Object.is:J7,e3=Ta.useState,t3=Ta.useEffect,n3=Ta.useLayoutEffect,r3=Ta.useDebugValue;function s3(e,t){var n=t(),r=e3({inst:{value:n,getSnapshot:t}}),o=r[0].inst,a=r[1];return n3(function(){o.value=n,o.getSnapshot=t,_d(o)&&a({inst:o})},[e,n,t]),t3(function(){return _d(o)&&a({inst:o}),e(function(){_d(o)&&a({inst:o})})},[e]),r3(n),n}function _d(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Z7(e,n)}catch{return!0}}function o3(e,t){return t()}var a3=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?o3:s3;A1.useSyncExternalStore=Ta.useSyncExternalStore!==void 0?Ta.useSyncExternalStore:a3;B1.exports=A1;var i3=B1.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uu=A,l3=i3;function c3(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var u3=typeof Object.is=="function"?Object.is:c3,d3=l3.useSyncExternalStore,x3=uu.useRef,h3=uu.useEffect,f3=uu.useMemo,m3=uu.useDebugValue;C1.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var a=x3(null);if(a.current===null){var i={hasValue:!1,value:null};a.current=i}else i=a.current;a=f3(function(){function c(v){if(!x){if(x=!0,d=v,v=r(v),o!==void 0&&i.hasValue){var y=i.value;if(o(y,v))return f=y}return f=v}if(y=f,u3(d,v))return y;var C=r(v);return o!==void 0&&o(y,C)?(d=v,y):(d=v,f=C)}var x=!1,d,f,m=n===void 0?null:n;return[function(){return c(t())},m===null?void 0:function(){return c(m())}]},[t,n,r,o]);var l=d3(e,a[0],a[1]);return h3(function(){i.hasValue=!0,i.value=l},[l]),m3(l),l};w1.exports=C1;var p3=w1.exports;const g3=M0(p3),j1={},{useDebugValue:y3}=Lh,{useSyncExternalStoreWithSelector:v3}=g3;let zg=!1;const E3=e=>e;function b3(e,t=E3,n){(j1?"production":void 0)!=="production"&&n&&!zg&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),zg=!0);const r=v3(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return y3(r),r}const qg=e=>{(j1?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?X7(e):e,n=(r,o)=>b3(t,r,o);return Object.assign(n,t),n},Vf=e=>e?qg(e):qg,w3={};function C3(e,t){let n;try{n=e()}catch{return}return{getItem:o=>{var a;const i=c=>c===null?null:JSON.parse(c,void 0),l=(a=n.getItem(o))!=null?a:null;return l instanceof Promise?l.then(i):i(l)},setItem:(o,a)=>n.setItem(o,JSON.stringify(a,void 0)),removeItem:o=>n.removeItem(o)}}const ul=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ul(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ul(r)(n)}}}},B3=(e,t)=>(n,r,o)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:P=>P,version:0,merge:(P,B)=>({...B,...P}),...t},i=!1;const l=new Set,c=new Set;let x;try{x=a.getStorage()}catch{}if(!x)return e((...P)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...P)},r,o);const d=ul(a.serialize),f=()=>{const P=a.partialize({...r()});let B;const g=d({state:P,version:a.version}).then(b=>x.setItem(a.name,b)).catch(b=>{B=b});if(B)throw B;return g},m=o.setState;o.setState=(P,B)=>{m(P,B),f()};const v=e((...P)=>{n(...P),f()},r,o);let y;const C=()=>{var P;if(!x)return;i=!1,l.forEach(g=>g(r()));const B=((P=a.onRehydrateStorage)==null?void 0:P.call(a,r()))||void 0;return ul(x.getItem.bind(x))(a.name).then(g=>{if(g)return a.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return a.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var b;return y=a.merge(g,(b=r())!=null?b:v),n(y,!0),f()}).then(()=>{B==null||B(y,void 0),i=!0,c.forEach(g=>g(y))}).catch(g=>{B==null||B(void 0,g)})};return o.persist={setOptions:P=>{a={...a,...P},P.getStorage&&(x=P.getStorage())},clearStorage:()=>{x==null||x.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>C(),hasHydrated:()=>i,onHydrate:P=>(l.add(P),()=>{l.delete(P)}),onFinishHydration:P=>(c.add(P),()=>{c.delete(P)})},C(),y||v},A3=(e,t)=>(n,r,o)=>{let a={storage:C3(()=>localStorage),partialize:C=>C,version:0,merge:(C,P)=>({...P,...C}),...t},i=!1;const l=new Set,c=new Set;let x=a.storage;if(!x)return e((...C)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...C)},r,o);const d=()=>{const C=a.partialize({...r()});return x.setItem(a.name,{state:C,version:a.version})},f=o.setState;o.setState=(C,P)=>{f(C,P),d()};const m=e((...C)=>{n(...C),d()},r,o);o.getInitialState=()=>m;let v;const y=()=>{var C,P;if(!x)return;i=!1,l.forEach(g=>{var b;return g((b=r())!=null?b:m)});const B=((P=a.onRehydrateStorage)==null?void 0:P.call(a,(C=r())!=null?C:m))||void 0;return ul(x.getItem.bind(x))(a.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==a.version){if(a.migrate)return[!0,a.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var b;const[j,D]=g;if(v=a.merge(D,(b=r())!=null?b:m),n(v,!0),j)return d()}).then(()=>{B==null||B(v,void 0),v=r(),i=!0,c.forEach(g=>g(v))}).catch(g=>{B==null||B(void 0,g)})};return o.persist={setOptions:C=>{a={...a,...C},C.storage&&(x=C.storage)},clearStorage:()=>{x==null||x.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>y(),hasHydrated:()=>i,onHydrate:C=>(l.add(C),()=>{l.delete(C)}),onFinishHydration:C=>(c.add(C),()=>{c.delete(C)})},a.skipHydration||y(),v||m},j3=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((w3?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),B3(e,t)):A3(e,t),k3=j3,D3=[{id:"superadmin-offline",type:"superadmin",name:"Super Admin",email:"admin@offline",companyId:"offline-company"},{id:"admin-offline",type:"admin",name:"Admin User",email:"admin@offline.com",companyId:"offline-company"},{id:"guest-offline",type:"guest",name:"Guest User",email:"guest@offline.com",eventId:"offline-event"}],zf=Vf()(k3((e,t)=>({isOfflineMode:!1,currentUser:null,offlineUsers:D3,setIsOfflineMode:n=>e({isOfflineMode:n}),setCurrentUser:n=>e({currentUser:n}),addOfflineUser:n=>e(r=>({offlineUsers:[...r.offlineUsers,n]})),removeOfflineUser:n=>e(r=>({offlineUsers:r.offlineUsers.filter(o=>o.id!==n)})),loginOffline:(n,r)=>{const{offlineUsers:o}=t(),a=o.find(i=>i.email===n);return a?(e({currentUser:a}),a):null},logoutOffline:()=>e({currentUser:null})}),{name:"offline-auth-storage",partialize:e=>({currentUser:e.currentUser,offlineUsers:e.offlineUsers,isOfflineMode:e.isOfflineMode})}));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F3=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),N3=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),Wg=e=>{const t=N3(e);return t.charAt(0).toUpperCase()+t.slice(1)},k1=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim(),_3=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var S3={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P3=A.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:o="",children:a,iconNode:i,...l},c)=>A.createElement("svg",{ref:c,...S3,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:k1("lucide",o),...!a&&!_3(l)&&{"aria-hidden":"true"},...l},[...i.map(([x,d])=>A.createElement(x,d)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Le=(e,t)=>{const n=A.forwardRef(({className:r,...o},a)=>A.createElement(P3,{ref:a,iconNode:t,className:k1(`lucide-${F3(Wg(e))}`,`lucide-${e}`,r),...o}));return n.displayName=Wg(e),n};/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T3=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],I3=Le("activity",T3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R3=[["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 18H5",key:"18s9l3"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],M3=Le("align-center",R3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L3=[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],$3=Le("align-left",L3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O3=[["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 18H7",key:"1ygte8"}],["path",{d:"M21 6H3",key:"1jwq7v"}]],U3=Le("align-right",O3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V3=[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]],z3=Le("arrow-down",V3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q3=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],W3=Le("arrow-left",q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K3=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Ac=Le("arrow-right",K3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H3=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],G3=Le("arrow-up",H3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q3=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],Kg=Le("award",Q3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y3=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],Sn=Le("building-2",Y3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X3=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],j0=Le("building",X3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J3=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],bt=Le("calendar",J3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z3=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],gr=Le("camera",Z3);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eB=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],Er=Le("chart-column",eB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tB=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Hg=Le("chevron-left",tB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nB=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Gg=Le("chevron-right",nB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],D1=Le("circle-alert",rB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sB=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],br=Le("circle-check-big",sB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oB=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Nl=Le("clock",oB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aB=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],iB=Le("copy",aB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lB=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],cB=Le("database",lB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uB=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ia=Le("download",uB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],Qg=Le("external-link",dB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xB=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],hB=Le("eye",xB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fB=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],Jr=Le("gift",fB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mB=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],pB=Le("globe",mB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],Yg=Le("grid-3x3",gB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yB=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],qf=Le("hash",yB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vB=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Nn=Le("image",vB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],Xg=Le("lock-open",EB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bB=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Sd=Le("lock",bB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wB=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Jg=Le("log-out",wB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CB=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],BB=Le("mail",CB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AB=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],tn=Le("map-pin",AB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jB=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],kB=Le("maximize-2",jB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DB=[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]],F1=Le("maximize",DB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FB=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],NB=Le("menu",FB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _B=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],SB=Le("minimize-2",_B);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PB=[["path",{d:"M5 12h14",key:"1ays0h"}]],TB=Le("minus",PB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IB=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],wr=Le("monitor",IB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RB=[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]],MB=Le("mouse-pointer",RB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LB=[["path",{d:"M12 2v20",key:"t6zp3m"}],["path",{d:"m15 19-3 3-3-3",key:"11eu04"}],["path",{d:"m19 9 3 3-3 3",key:"1mg7y2"}],["path",{d:"M2 12h20",key:"9i4pu4"}],["path",{d:"m5 9-3 3 3 3",key:"j64kie"}],["path",{d:"m9 5 3-3 3 3",key:"l8vdw6"}]],$B=Le("move",LB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OB=[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]],UB=Le("pause",OB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VB=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],zB=Le("phone",VB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qB=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],Hc=Le("play",qB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WB=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Sr=Le("plus",WB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KB=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],Qt=Le("qr-code",KB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HB=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_l=Le("refresh-cw",HB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GB=[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]],QB=Le("rocket",GB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YB=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ba=Le("rotate-ccw",YB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XB=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Zg=Le("rotate-cw",XB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JB=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xa=Le("search",JB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZB=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],du=Le("settings",ZB);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eA=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],N1=Le("shuffle",eA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tA=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Aa=Le("sparkles",tA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nA=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],pr=Le("square-pen",nA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rA=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],ah=Le("star",rA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sA=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],oA=Le("table",sA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aA=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ih=Le("target",aA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iA=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],is=Le("trash-2",iA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lA=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],go=Le("trending-up",lA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cA=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Wr=Le("trophy",cA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uA=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],xu=Le("upload",uA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dA=[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],Li=Le("user-check",dA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Pd=Le("user-plus",xA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hA=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],k0=Le("user",hA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fA=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],vt=Le("users",fA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mA=[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]],Vn=Le("vote",mA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],gA=Le("wifi-off",pA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yA=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],_1=Le("wifi",yA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vA=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ra=Le("x",vA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EA=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],ey=Le("zap",EA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],wA=Le("zoom-in",bA);/**
 * @license lucide-react v0.525.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]],BA=Le("zoom-out",CA);function AA(){return console.log("DemoNotice component rendered"),s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:s.jsx("div",{className:"max-w-2xl w-full",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx("div",{className:"bg-blue-100 p-3 rounded-full",children:s.jsx(cB,{className:"h-12 w-12 text-blue-600"})})}),s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Event Management System"}),s.jsx("p",{className:"text-gray-600",children:"A comprehensive solution for managing events, attendees, and more"})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6 mb-8",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(D1,{className:"h-6 w-6 text-yellow-600 mr-3 mt-0.5"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Database Configuration Required"}),s.jsx("p",{className:"text-yellow-700 mb-4",children:"This application requires a Supabase database to function. To get started:"}),s.jsxs("ol",{className:"list-decimal list-inside text-yellow-700 space-y-2 text-sm",children:[s.jsxs("li",{children:["Create a free account at ",s.jsx("a",{href:"https://supabase.com",target:"_blank",rel:"noopener noreferrer",className:"underline",children:"supabase.com"})]}),s.jsx("li",{children:"Create a new project"}),s.jsx("li",{children:"Get your project URL and anon key from the API settings"}),s.jsx("li",{children:"Configure the environment variables in your deployment"})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:" Features"}),s.jsxs("ul",{className:"text-gray-600 space-y-2 text-sm",children:[s.jsx("li",{children:" Company & Event Management"}),s.jsx("li",{children:" Attendee Registration & Check-in"}),s.jsx("li",{children:" QR Code Generation"}),s.jsx("li",{children:" Seating Arrangements"}),s.jsx("li",{children:" Photo Gallery & Voting"}),s.jsx("li",{children:" Lucky Draw System"}),s.jsx("li",{children:" Real-time Monitoring"})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:" Tech Stack"}),s.jsxs("ul",{className:"text-gray-600 space-y-2 text-sm",children:[s.jsx("li",{children:" React + TypeScript"}),s.jsx("li",{children:" Tailwind CSS"}),s.jsx("li",{children:" Supabase (Database & Auth)"}),s.jsx("li",{children:" QR Code Generation"}),s.jsx("li",{children:" Real-time Updates"}),s.jsx("li",{children:" Responsive Design"}),s.jsx("li",{children:" PWA Ready"})]})]})]}),s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[s.jsx(du,{className:"h-8 w-8 text-blue-600 mx-auto mb-3"}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Ready to Deploy?"}),s.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"Set up your Supabase database and configure the environment variables to start using this application."}),s.jsxs("div",{className:"text-xs text-gray-500",children:[s.jsx("p",{children:"Environment variables needed:"}),s.jsx("p",{className:"font-mono bg-gray-100 px-2 py-1 rounded mt-1",children:"VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY"})]})]})})]})})})}const jA=()=>{const e=localStorage.getItem("hybridMode");return e==="offline"||e==="online"||e==="hybrid"?e:"online"},Sl=Vf(e=>({mode:jA(),setMode:t=>{localStorage.setItem("hybridMode",t),e({mode:t})}})),ty=[{key:"events",label:"Events",icon:bt,color:"text-green-600",route:"/admin/events"},{key:"attendees",label:"Attendees",icon:vt,color:"text-blue-600",route:"/admin/attendees"},{key:"companies",label:"Companies",icon:Sn,color:"text-purple-600",route:"/admin/companies"},{key:"checkin",label:"Check-in",icon:Qt,color:"text-indigo-600",route:"/admin/checkin"},{key:"gallery",label:"Gallery",icon:Nn,color:"text-teal-600",route:"/admin/gallery"},{key:"voting",label:"Voting",icon:Vn,color:"text-violet-600",route:"/admin/voting"},{key:"luckydraw",label:"Lucky Draw",icon:Jr,color:"text-orange-600",route:"/admin/lucky-draw"},{key:"seating",label:"Seating",icon:tn,color:"text-pink-600",route:"/admin/seating"}];function kA({userCompany:e}){const[t,n]=A.useState(!1),[r,o]=A.useState(""),[a,i]=A.useState([]),[l,c]=A.useState(!1),x=A.useRef(null),d=A.useRef(null),f=ds();A.useEffect(()=>{const C=P=>{x.current&&!x.current.contains(P.target)&&n(!1)};return document.addEventListener("mousedown",C),()=>document.removeEventListener("mousedown",C)},[]),A.useEffect(()=>{t&&d.current&&d.current.focus()},[t]),A.useEffect(()=>{r.trim()?m():i([])},[r]);const m=async()=>{c(!0);const C=r.toLowerCase().trim(),P=[];try{if(C.length>=2){let B=le.from("events").select("id, name, company:companies(name)").ilike("name",`%${C}%`);e&&(B=B.eq("company_id",e.company_id));const{data:g}=await B;g&&g.forEach(b=>{var D,w;const j=Array.isArray(b.company)?(D=b.company[0])==null?void 0:D.name:(w=b.company)==null?void 0:w.name;P.push({id:b.id,type:"event",title:b.name,subtitle:`Event  ${j||"Unknown Company"}`,route:"/admin/events",icon:bt,color:"text-green-600"})})}if(C.length>=2){let B=le.from("attendees").select("id, name, event:events(name, company:companies(name))").ilike("name",`%${C}%`);e&&(B=B.eq("event.company_id",e.company_id));const{data:g}=await B;g&&g.forEach(b=>{var D,w;const j=Array.isArray(b.event)?(D=b.event[0])==null?void 0:D.name:(w=b.event)==null?void 0:w.name;P.push({id:b.id,type:"attendee",title:b.name,subtitle:`Attendee  ${j||"Unknown Event"}`,route:"/admin/attendees",icon:vt,color:"text-blue-600"})})}if(!e&&C.length>=2){const{data:B}=await le.from("companies").select("id, name").ilike("name",`%${C}%`);B&&B.forEach(g=>{P.push({id:g.id,type:"company",title:g.name,subtitle:"Company",route:"/admin/companies",icon:Sn,color:"text-purple-600"})})}ty.forEach(B=>{B.label.toLowerCase().includes(C)&&P.push({id:B.key,type:"section",title:B.label,subtitle:"Navigation Section",route:B.route,icon:B.icon,color:B.color})}),i(P.slice(0,10))}catch(B){z.error("Search error: "+B.message)}finally{c(!1)}},v=C=>{f(C.route),n(!1),o("")},y=C=>{C.key==="Escape"&&(n(!1),o(""))};return s.jsxs("div",{className:"relative",ref:x,children:[s.jsxs("button",{onClick:()=>n(!0),className:"flex items-center px-3 py-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:[s.jsx(xa,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"hidden md:inline",children:"Search..."})]}),t&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-start justify-center pt-20",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl mx-4 max-h-[80vh] overflow-hidden",children:[s.jsx("div",{className:"p-4 border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(xa,{className:"h-5 w-5 text-gray-400 mr-3"}),s.jsx("input",{ref:d,type:"text",value:r,onChange:C=>o(C.target.value),onKeyDown:y,placeholder:"Search events, attendees, companies, or sections...",className:"flex-1 outline-none text-lg"}),s.jsx("button",{onClick:()=>n(!1),className:"ml-3 p-1 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(Ra,{className:"h-5 w-5 text-gray-400"})})]})}),s.jsx("div",{className:"max-h-[60vh] overflow-y-auto",children:l?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"text-gray-500 mt-2",children:"Searching..."})]}):a.length>0?s.jsx("div",{className:"p-2",children:a.map((C,P)=>{const B=C.icon;return s.jsx("button",{onClick:()=>v(C),className:"w-full text-left p-3 hover:bg-gray-50 rounded-lg transition-colors group",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:`p-2 rounded-lg mr-3 ${C.color} bg-gray-100 group-hover:bg-gray-200`,children:s.jsx(B,{className:"h-5 w-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-semibold text-gray-900",children:C.title}),s.jsx("div",{className:"text-sm text-gray-500",children:C.subtitle})]}),s.jsx("div",{className:"text-xs text-gray-400 group-hover:text-gray-600",children:C.type})]})},`${C.type}-${C.id}-${P}`)})}):r?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(xa,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsxs("p",{className:"text-gray-500",children:['No results found for "',r,'"']}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Try different keywords"})]}):s.jsxs("div",{className:"p-8 text-center",children:[s.jsx(xa,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-500",children:"Start typing to search..."}),s.jsx("p",{className:"text-sm text-gray-400 mt-1",children:"Search events, attendees, companies, or sections"})]})}),!r&&s.jsxs("div",{className:"p-4 border-t border-gray-200",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Quick Actions"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:ty.map(C=>{const P=C.icon;return s.jsxs("button",{onClick:()=>v({id:C.key,title:C.label,route:C.route,icon:C.icon,color:C.color}),className:"flex items-center p-2 hover:bg-gray-50 rounded-lg transition-colors text-left",children:[s.jsx(P,{className:`h-4 w-4 mr-2 ${C.color}`}),s.jsx("span",{className:"text-sm font-medium",children:C.label})]},C.key)})})]})]})})]})}var S1={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Cn,function(){var n=function(u,h){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,k){p.__proto__=k}||function(p,k){for(var F in k)Object.prototype.hasOwnProperty.call(k,F)&&(p[F]=k[F])})(u,h)},r=function(){return(r=Object.assign||function(u){for(var h,p=1,k=arguments.length;p<k;p++)for(var F in h=arguments[p])Object.prototype.hasOwnProperty.call(h,F)&&(u[F]=h[F]);return u}).apply(this,arguments)};function o(u,h,p){for(var k,F=0,T=h.length;F<T;F++)!k&&F in h||((k=k||Array.prototype.slice.call(h,0,F))[F]=h[F]);return u.concat(k||Array.prototype.slice.call(h))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Cn,i=Object.keys,l=Array.isArray;function c(u,h){return typeof h!="object"||i(h).forEach(function(p){u[p]=h[p]}),u}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var x=Object.getPrototypeOf,d={}.hasOwnProperty;function f(u,h){return d.call(u,h)}function m(u,h){typeof h=="function"&&(h=h(x(u))),(typeof Reflect>"u"?i:Reflect.ownKeys)(h).forEach(function(p){y(u,p,h[p])})}var v=Object.defineProperty;function y(u,h,p,k){v(u,h,c(p&&f(p,"get")&&typeof p.get=="function"?{get:p.get,set:p.set,configurable:!0}:{value:p,configurable:!0,writable:!0},k))}function C(u){return{from:function(h){return u.prototype=Object.create(h.prototype),y(u.prototype,"constructor",u),{extend:m.bind(null,u.prototype)}}}}var P=Object.getOwnPropertyDescriptor,B=[].slice;function g(u,h,p){return B.call(u,h,p)}function b(u,h){return h(u)}function j(u){if(!u)throw new Error("Assertion Failed")}function D(u){a.setImmediate?setImmediate(u):setTimeout(u,0)}function w(u,h){if(typeof h=="string"&&f(u,h))return u[h];if(!h)return u;if(typeof h!="string"){for(var p=[],k=0,F=h.length;k<F;++k){var T=w(u,h[k]);p.push(T)}return p}var O=h.indexOf(".");if(O!==-1){var q=u[h.substr(0,O)];return q==null?void 0:w(q,h.substr(O+1))}}function E(u,h,p){if(u&&h!==void 0&&!("isFrozen"in Object&&Object.isFrozen(u)))if(typeof h!="string"&&"length"in h){j(typeof p!="string"&&"length"in p);for(var k=0,F=h.length;k<F;++k)E(u,h[k],p[k])}else{var T,O,q=h.indexOf(".");q!==-1?(T=h.substr(0,q),(O=h.substr(q+1))===""?p===void 0?l(u)&&!isNaN(parseInt(T))?u.splice(T,1):delete u[T]:u[T]=p:E(q=!(q=u[T])||!f(u,T)?u[T]={}:q,O,p)):p===void 0?l(u)&&!isNaN(parseInt(h))?u.splice(h,1):delete u[h]:u[h]=p}}function N(u){var h,p={};for(h in u)f(u,h)&&(p[h]=u[h]);return p}var M=[].concat;function L(u){return M.apply([],u)}var ut="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(u){return["Int","Uint","Float"].map(function(h){return h+u+"Array"})}))).filter(function(u){return a[u]}),J=new Set(ut.map(function(u){return a[u]})),se=null;function X(u){return se=new WeakMap,u=function h(p){if(!p||typeof p!="object")return p;var k=se.get(p);if(k)return k;if(l(p)){k=[],se.set(p,k);for(var F=0,T=p.length;F<T;++F)k.push(h(p[F]))}else if(J.has(p.constructor))k=p;else{var O,q=x(p);for(O in k=q===Object.prototype?{}:Object.create(q),se.set(p,k),p)f(p,O)&&(k[O]=h(p[O]))}return k}(u),se=null,u}var Q={}.toString;function ce(u){return Q.call(u).slice(8,-1)}var V=typeof Symbol<"u"?Symbol.iterator:"@@iterator",xe=typeof V=="symbol"?function(u){var h;return u!=null&&(h=u[V])&&h.apply(u)}:function(){return null};function ne(u,h){return h=u.indexOf(h),0<=h&&u.splice(h,1),0<=h}var _={};function S(u){var h,p,k,F;if(arguments.length===1){if(l(u))return u.slice();if(this===_&&typeof u=="string")return[u];if(F=xe(u)){for(p=[];!(k=F.next()).done;)p.push(k.value);return p}if(u==null)return[u];if(typeof(h=u.length)!="number")return[u];for(p=new Array(h);h--;)p[h]=u[h];return p}for(h=arguments.length,p=new Array(h);h--;)p[h]=arguments[h];return p}var U=typeof Symbol<"u"?function(u){return u[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},Ot=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Yn=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(Ot),$={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function R(u,h){this.name=u,this.message=h}function H(u,h){return u+". Errors: "+Object.keys(h).map(function(p){return h[p].toString()}).filter(function(p,k,F){return F.indexOf(p)===k}).join(`
`)}function me(u,h,p,k){this.failures=h,this.failedKeys=k,this.successCount=p,this.message=H(u,h)}function W(u,h){this.name="BulkError",this.failures=Object.keys(h).map(function(p){return h[p]}),this.failuresByPos=h,this.message=H(u,this.failures)}C(R).from(Error).extend({toString:function(){return this.name+": "+this.message}}),C(me).from(R),C(W).from(R);var I=Yn.reduce(function(u,h){return u[h]=h+"Error",u},{}),Ee=R,pe=Yn.reduce(function(u,h){var p=h+"Error";function k(F,T){this.name=p,F?typeof F=="string"?(this.message="".concat(F).concat(T?`
 `+T:""),this.inner=T||null):typeof F=="object"&&(this.message="".concat(F.name," ").concat(F.message),this.inner=F):(this.message=$[h]||p,this.inner=null)}return C(k).from(Ee),u[h]=k,u},{});pe.Syntax=SyntaxError,pe.Type=TypeError,pe.Range=RangeError;var Ce=Ot.reduce(function(u,h){return u[h+"Error"]=pe[h],u},{}),ge=Yn.reduce(function(u,h){return["Syntax","Type","Range"].indexOf(h)===-1&&(u[h+"Error"]=pe[h]),u},{});function be(){}function Be(u){return u}function Re(u,h){return u==null||u===Be?h:function(p){return h(u(p))}}function Ke(u,h){return function(){u.apply(this,arguments),h.apply(this,arguments)}}function He(u,h){return u===be?h:function(){var p=u.apply(this,arguments);p!==void 0&&(arguments[0]=p);var k=this.onsuccess,F=this.onerror;this.onsuccess=null,this.onerror=null;var T=h.apply(this,arguments);return k&&(this.onsuccess=this.onsuccess?Ke(k,this.onsuccess):k),F&&(this.onerror=this.onerror?Ke(F,this.onerror):F),T!==void 0?T:p}}function nt(u,h){return u===be?h:function(){u.apply(this,arguments);var p=this.onsuccess,k=this.onerror;this.onsuccess=this.onerror=null,h.apply(this,arguments),p&&(this.onsuccess=this.onsuccess?Ke(p,this.onsuccess):p),k&&(this.onerror=this.onerror?Ke(k,this.onerror):k)}}function mt(u,h){return u===be?h:function(p){var k=u.apply(this,arguments);c(p,k);var F=this.onsuccess,T=this.onerror;return this.onsuccess=null,this.onerror=null,p=h.apply(this,arguments),F&&(this.onsuccess=this.onsuccess?Ke(F,this.onsuccess):F),T&&(this.onerror=this.onerror?Ke(T,this.onerror):T),k===void 0?p===void 0?void 0:p:c(k,p)}}function pt(u,h){return u===be?h:function(){return h.apply(this,arguments)!==!1&&u.apply(this,arguments)}}function ie(u,h){return u===be?h:function(){var p=u.apply(this,arguments);if(p&&typeof p.then=="function"){for(var k=this,F=arguments.length,T=new Array(F);F--;)T[F]=arguments[F];return p.then(function(){return h.apply(k,T)})}return h.apply(this,arguments)}}ge.ModifyError=me,ge.DexieError=R,ge.BulkError=W;var Ne=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function ze(u){Ne=u}var Me={},ct=100,ut=typeof Promise>"u"?[]:function(){var u=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[u,x(u),u];var h=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[h,x(h),u]}(),Ot=ut[0],Yn=ut[1],ut=ut[2],Yn=Yn&&Yn.then,Et=Ot&&Ot.constructor,ir=!!ut,jn=function(u,h){Ur.push([u,h]),Gn&&(queueMicrotask(ft),Gn=!1)},no=!0,Gn=!0,Qn=[],Or=[],xs=Be,gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:be,pgp:!1,env:{},finalize:be},qe=gn,Ur=[],lr=0,hs=[];function K(u){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var h=this._PSD=qe;if(typeof u!="function"){if(u!==Me)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&Se(this,this._value))}this._state=null,this._value=null,++h.ref,function p(k,F){try{F(function(T){if(k._state===null){if(T===k)throw new TypeError("A promise cannot be resolved with itself.");var O=k._lib&&xt();T&&typeof T.then=="function"?p(k,function(q,Z){T instanceof K?T._then(q,Z):T.then(q,Z)}):(k._state=!0,k._value=T,We(k)),O&&wt()}},Se.bind(null,k))}catch(T){Se(k,T)}}(this,u)}var je={get:function(){var u=qe,h=Ut;function p(k,F){var T=this,O=!u.global&&(u!==qe||h!==Ut),q=O&&!ps(),Z=new K(function(te,ae){Xe(T,new $e(Pm(k,u,O,q),Pm(F,u,O,q),te,ae,u))});return this._consoleTask&&(Z._consoleTask=this._consoleTask),Z}return p.prototype=Me,p},set:function(u){y(this,"then",u&&u.prototype===Me?je:{get:function(){return u},set:je.set})}};function $e(u,h,p,k,F){this.onFulfilled=typeof u=="function"?u:null,this.onRejected=typeof h=="function"?h:null,this.resolve=p,this.reject=k,this.psd=F}function Se(u,h){var p,k;Or.push(h),u._state===null&&(p=u._lib&&xt(),h=xs(h),u._state=!1,u._value=h,k=u,Qn.some(function(F){return F._value===k._value})||Qn.push(k),We(u),p&&wt())}function We(u){var h=u._listeners;u._listeners=[];for(var p=0,k=h.length;p<k;++p)Xe(u,h[p]);var F=u._PSD;--F.ref||F.finalize(),lr===0&&(++lr,jn(function(){--lr==0&&Xt()},[]))}function Xe(u,h){if(u._state!==null){var p=u._state?h.onFulfilled:h.onRejected;if(p===null)return(u._state?h.resolve:h.reject)(u._value);++h.psd.ref,++lr,jn(lt,[p,u,h])}else u._listeners.push(h)}function lt(u,h,p){try{var k,F=h._value;!h._state&&Or.length&&(Or=[]),k=Ne&&h._consoleTask?h._consoleTask.run(function(){return u(F)}):u(F),h._state||Or.indexOf(F)!==-1||function(T){for(var O=Qn.length;O;)if(Qn[--O]._value===T._value)return Qn.splice(O,1)}(h),p.resolve(k)}catch(T){p.reject(T)}finally{--lr==0&&Xt(),--p.psd.ref||p.psd.finalize()}}function ft(){ro(gn,function(){xt()&&wt()})}function xt(){var u=no;return Gn=no=!1,u}function wt(){var u,h,p;do for(;0<Ur.length;)for(u=Ur,Ur=[],p=u.length,h=0;h<p;++h){var k=u[h];k[0].apply(null,k[1])}while(0<Ur.length);Gn=no=!0}function Xt(){var u=Qn;Qn=[],u.forEach(function(k){k._PSD.onunhandled.call(null,k._value,k)});for(var h=hs.slice(0),p=h.length;p;)h[--p]()}function Y(u){return new K(Me,!1,u)}function he(u,h){var p=qe;return function(){var k=xt(),F=qe;try{return gs(p,!0),u.apply(this,arguments)}catch(T){h&&h(T)}finally{gs(F,!1),k&&wt()}}}m(K.prototype,{then:je,_then:function(u,h){Xe(this,new $e(null,null,u,h,qe))},catch:function(u){if(arguments.length===1)return this.then(null,u);var h=u,p=arguments[1];return typeof h=="function"?this.then(null,function(k){return(k instanceof h?p:Y)(k)}):this.then(null,function(k){return(k&&k.name===h?p:Y)(k)})},finally:function(u){return this.then(function(h){return K.resolve(u()).then(function(){return h})},function(h){return K.resolve(u()).then(function(){return Y(h)})})},timeout:function(u,h){var p=this;return u<1/0?new K(function(k,F){var T=setTimeout(function(){return F(new pe.Timeout(h))},u);p.then(k,F).finally(clearTimeout.bind(null,T))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&y(K.prototype,Symbol.toStringTag,"Dexie.Promise"),gn.env=Sm(),m(K,{all:function(){var u=S.apply(null,arguments).map(Ll);return new K(function(h,p){u.length===0&&h([]);var k=u.length;u.forEach(function(F,T){return K.resolve(F).then(function(O){u[T]=O,--k||h(u)},p)})})},resolve:function(u){return u instanceof K?u:u&&typeof u.then=="function"?new K(function(h,p){u.then(h,p)}):new K(Me,!0,u)},reject:Y,race:function(){var u=S.apply(null,arguments).map(Ll);return new K(function(h,p){u.map(function(k){return K.resolve(k).then(h,p)})})},PSD:{get:function(){return qe},set:function(u){return qe=u}},totalEchoes:{get:function(){return Ut}},newPSD:ms,usePSD:ro,scheduler:{get:function(){return jn},set:function(u){jn=u}},rejectionMapper:{get:function(){return xs},set:function(u){xs=u}},follow:function(u,h){return new K(function(p,k){return ms(function(F,T){var O=qe;O.unhandleds=[],O.onunhandled=T,O.finalize=Ke(function(){var q,Z=this;q=function(){Z.unhandleds.length===0?F():T(Z.unhandleds[0])},hs.push(function te(){q(),hs.splice(hs.indexOf(te),1)}),++lr,jn(function(){--lr==0&&Xt()},[])},O.finalize),u()},h,p,k)})}}),Et&&(Et.allSettled&&y(K,"allSettled",function(){var u=S.apply(null,arguments).map(Ll);return new K(function(h){u.length===0&&h([]);var p=u.length,k=new Array(p);u.forEach(function(F,T){return K.resolve(F).then(function(O){return k[T]={status:"fulfilled",value:O}},function(O){return k[T]={status:"rejected",reason:O}}).then(function(){return--p||h(k)})})})}),Et.any&&typeof AggregateError<"u"&&y(K,"any",function(){var u=S.apply(null,arguments).map(Ll);return new K(function(h,p){u.length===0&&p(new AggregateError([]));var k=u.length,F=new Array(k);u.forEach(function(T,O){return K.resolve(T).then(function(q){return h(q)},function(q){F[O]=q,--k||p(new AggregateError(F))})})})}),Et.withResolvers&&(K.withResolvers=Et.withResolvers));var Ae={awaits:0,echoes:0,id:0},Ge=0,Je=[],Qe=0,Ut=0,fs=0;function ms(u,h,p,k){var F=qe,T=Object.create(F);return T.parent=F,T.ref=0,T.global=!1,T.id=++fs,gn.env,T.env=ir?{Promise:K,PromiseProp:{value:K,configurable:!0,writable:!0},all:K.all,race:K.race,allSettled:K.allSettled,any:K.any,resolve:K.resolve,reject:K.reject}:{},h&&c(T,h),++F.ref,T.finalize=function(){--this.parent.ref||this.parent.finalize()},k=ro(T,u,p,k),T.ref===0&&T.finalize(),k}function Uo(){return Ae.id||(Ae.id=++Ge),++Ae.awaits,Ae.echoes+=ct,Ae.id}function ps(){return!!Ae.awaits&&(--Ae.awaits==0&&(Ae.id=0),Ae.echoes=Ae.awaits*ct,!0)}function Ll(u){return Ae.echoes&&u&&u.constructor===Et?(Uo(),u.then(function(h){return ps(),h},function(h){return ps(),Vt(h)})):u}function Db(){var u=Je[Je.length-1];Je.pop(),gs(u,!1)}function gs(u,h){var p,k=qe;(h?!Ae.echoes||Qe++&&u===qe:!Qe||--Qe&&u===qe)||queueMicrotask(h?(function(F){++Ut,Ae.echoes&&--Ae.echoes!=0||(Ae.echoes=Ae.awaits=Ae.id=0),Je.push(qe),gs(F,!0)}).bind(null,u):Db),u!==qe&&(qe=u,k===gn&&(gn.env=Sm()),ir&&(p=gn.env.Promise,h=u.env,(k.global||u.global)&&(Object.defineProperty(a,"Promise",h.PromiseProp),p.all=h.all,p.race=h.race,p.resolve=h.resolve,p.reject=h.reject,h.allSettled&&(p.allSettled=h.allSettled),h.any&&(p.any=h.any))))}function Sm(){var u=a.Promise;return ir?{Promise:u,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:u.all,race:u.race,allSettled:u.allSettled,any:u.any,resolve:u.resolve,reject:u.reject}:{}}function ro(u,h,p,k,F){var T=qe;try{return gs(u,!0),h(p,k,F)}finally{gs(T,!1)}}function Pm(u,h,p,k){return typeof u!="function"?u:function(){var F=qe;p&&Uo(),gs(h,!0);try{return u.apply(this,arguments)}finally{gs(F,!1),k&&queueMicrotask(ps)}}}function bu(u){Promise===Et&&Ae.echoes===0?Qe===0?u():enqueueNativeMicroTask(u):setTimeout(u,0)}(""+Yn).indexOf("[native code]")===-1&&(Uo=ps=be);var Vt=K.reject,so="",Vr="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",Tm="String expected.",Vo=[],$l="__dbnames",wu="readonly",Cu="readwrite";function oo(u,h){return u?h?function(){return u.apply(this,arguments)&&h.apply(this,arguments)}:u:h}var Im={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function Ol(u){return typeof u!="string"||/\./.test(u)?function(h){return h}:function(h){return h[u]===void 0&&u in h&&delete(h=X(h))[u],h}}function Rm(){throw pe.Type()}function it(u,h){try{var p=Mm(u),k=Mm(h);if(p!==k)return p==="Array"?1:k==="Array"?-1:p==="binary"?1:k==="binary"?-1:p==="string"?1:k==="string"?-1:p==="Date"?1:k!=="Date"?NaN:-1;switch(p){case"number":case"Date":case"string":return h<u?1:u<h?-1:0;case"binary":return function(F,T){for(var O=F.length,q=T.length,Z=O<q?O:q,te=0;te<Z;++te)if(F[te]!==T[te])return F[te]<T[te]?-1:1;return O===q?0:O<q?-1:1}(Lm(u),Lm(h));case"Array":return function(F,T){for(var O=F.length,q=T.length,Z=O<q?O:q,te=0;te<Z;++te){var ae=it(F[te],T[te]);if(ae!==0)return ae}return O===q?0:O<q?-1:1}(u,h)}}catch{}return NaN}function Mm(u){var h=typeof u;return h!="object"?h:ArrayBuffer.isView(u)?"binary":(u=ce(u),u==="ArrayBuffer"?"binary":u)}function Lm(u){return u instanceof Uint8Array?u:ArrayBuffer.isView(u)?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):new Uint8Array(u)}var $m=(At.prototype._trans=function(u,h,p){var k=this._tx||qe.trans,F=this.name,T=Ne&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(u==="readonly"?"read":"write"," ").concat(this.name));function O(te,ae,G){if(!G.schema[F])throw new pe.NotFound("Table "+F+" not part of transaction");return h(G.idbtrans,G)}var q=xt();try{var Z=k&&k.db._novip===this.db._novip?k===qe.trans?k._promise(u,O,p):ms(function(){return k._promise(u,O,p)},{trans:k,transless:qe.transless||qe}):function te(ae,G,de,ee){if(ae.idbdb&&(ae._state.openComplete||qe.letThrough||ae._vip)){var oe=ae._createTransaction(G,de,ae._dbSchema);try{oe.create(),ae._state.PR1398_maxLoop=3}catch(ue){return ue.name===I.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return te(ae,G,de,ee)})):Vt(ue)}return oe._promise(G,function(ue,re){return ms(function(){return qe.trans=oe,ee(ue,re,oe)})}).then(function(ue){if(G==="readwrite")try{oe.idbtrans.commit()}catch{}return G==="readonly"?ue:oe._completion.then(function(){return ue})})}if(ae._state.openComplete)return Vt(new pe.DatabaseClosed(ae._state.dbOpenError));if(!ae._state.isBeingOpened){if(!ae._state.autoOpen)return Vt(new pe.DatabaseClosed);ae.open().catch(be)}return ae._state.dbReadyPromise.then(function(){return te(ae,G,de,ee)})}(this.db,u,[this.name],O);return T&&(Z._consoleTask=T,Z=Z.catch(function(te){return console.trace(te),Vt(te)})),Z}finally{q&&wt()}},At.prototype.get=function(u,h){var p=this;return u&&u.constructor===Object?this.where(u).first(h):u==null?Vt(new pe.Type("Invalid argument to Table.get()")):this._trans("readonly",function(k){return p.core.get({trans:k,key:u}).then(function(F){return p.hook.reading.fire(F)})}).then(h)},At.prototype.where=function(u){if(typeof u=="string")return new this.db.WhereClause(this,u);if(l(u))return new this.db.WhereClause(this,"[".concat(u.join("+"),"]"));var h=i(u);if(h.length===1)return this.where(h[0]).equals(u[h[0]]);var p=this.schema.indexes.concat(this.schema.primKey).filter(function(q){if(q.compound&&h.every(function(te){return 0<=q.keyPath.indexOf(te)})){for(var Z=0;Z<h.length;++Z)if(h.indexOf(q.keyPath[Z])===-1)return!1;return!0}return!1}).sort(function(q,Z){return q.keyPath.length-Z.keyPath.length})[0];if(p&&this.db._maxKey!==so){var T=p.keyPath.slice(0,h.length);return this.where(T).equals(T.map(function(Z){return u[Z]}))}!p&&Ne&&console.warn("The query ".concat(JSON.stringify(u)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(h.join("+"),"]"));var k=this.schema.idxByName;function F(q,Z){return it(q,Z)===0}var O=h.reduce(function(G,Z){var te=G[0],ae=G[1],G=k[Z],de=u[Z];return[te||G,te||!G?oo(ae,G&&G.multi?function(ee){return ee=w(ee,Z),l(ee)&&ee.some(function(oe){return F(de,oe)})}:function(ee){return F(de,w(ee,Z))}):ae]},[null,null]),T=O[0],O=O[1];return T?this.where(T.name).equals(u[T.keyPath]).filter(O):p?this.filter(O):this.where(h).equals("")},At.prototype.filter=function(u){return this.toCollection().and(u)},At.prototype.count=function(u){return this.toCollection().count(u)},At.prototype.offset=function(u){return this.toCollection().offset(u)},At.prototype.limit=function(u){return this.toCollection().limit(u)},At.prototype.each=function(u){return this.toCollection().each(u)},At.prototype.toArray=function(u){return this.toCollection().toArray(u)},At.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},At.prototype.orderBy=function(u){return new this.db.Collection(new this.db.WhereClause(this,l(u)?"[".concat(u.join("+"),"]"):u))},At.prototype.reverse=function(){return this.toCollection().reverse()},At.prototype.mapToClass=function(u){var h,p=this.db,k=this.name;function F(){return h!==null&&h.apply(this,arguments)||this}(this.schema.mappedClass=u).prototype instanceof Rm&&(function(Z,te){if(typeof te!="function"&&te!==null)throw new TypeError("Class extends value "+String(te)+" is not a constructor or null");function ae(){this.constructor=Z}n(Z,te),Z.prototype=te===null?Object.create(te):(ae.prototype=te.prototype,new ae)}(F,h=u),Object.defineProperty(F.prototype,"db",{get:function(){return p},enumerable:!1,configurable:!0}),F.prototype.table=function(){return k},u=F);for(var T=new Set,O=u.prototype;O;O=x(O))Object.getOwnPropertyNames(O).forEach(function(Z){return T.add(Z)});function q(Z){if(!Z)return Z;var te,ae=Object.create(u.prototype);for(te in Z)if(!T.has(te))try{ae[te]=Z[te]}catch{}return ae}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=q,this.hook("reading",q),u},At.prototype.defineClass=function(){return this.mapToClass(function(u){c(this,u)})},At.prototype.add=function(u,h){var p=this,k=this.schema.primKey,F=k.auto,T=k.keyPath,O=u;return T&&F&&(O=Ol(T)(u)),this._trans("readwrite",function(q){return p.core.mutate({trans:q,type:"add",keys:h!=null?[h]:null,values:[O]})}).then(function(q){return q.numFailures?K.reject(q.failures[0]):q.lastResult}).then(function(q){if(T)try{E(u,T,q)}catch{}return q})},At.prototype.update=function(u,h){return typeof u!="object"||l(u)?this.where(":id").equals(u).modify(h):(u=w(u,this.schema.primKey.keyPath),u===void 0?Vt(new pe.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(u).modify(h))},At.prototype.put=function(u,h){var p=this,k=this.schema.primKey,F=k.auto,T=k.keyPath,O=u;return T&&F&&(O=Ol(T)(u)),this._trans("readwrite",function(q){return p.core.mutate({trans:q,type:"put",values:[O],keys:h!=null?[h]:null})}).then(function(q){return q.numFailures?K.reject(q.failures[0]):q.lastResult}).then(function(q){if(T)try{E(u,T,q)}catch{}return q})},At.prototype.delete=function(u){var h=this;return this._trans("readwrite",function(p){return h.core.mutate({trans:p,type:"delete",keys:[u]})}).then(function(p){return p.numFailures?K.reject(p.failures[0]):void 0})},At.prototype.clear=function(){var u=this;return this._trans("readwrite",function(h){return u.core.mutate({trans:h,type:"deleteRange",range:Im})}).then(function(h){return h.numFailures?K.reject(h.failures[0]):void 0})},At.prototype.bulkGet=function(u){var h=this;return this._trans("readonly",function(p){return h.core.getMany({keys:u,trans:p}).then(function(k){return k.map(function(F){return h.hook.reading.fire(F)})})})},At.prototype.bulkAdd=function(u,h,p){var k=this,F=Array.isArray(h)?h:void 0,T=(p=p||(F?void 0:h))?p.allKeys:void 0;return this._trans("readwrite",function(O){var te=k.schema.primKey,q=te.auto,te=te.keyPath;if(te&&F)throw new pe.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(F&&F.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var Z=u.length,te=te&&q?u.map(Ol(te)):u;return k.core.mutate({trans:O,type:"add",keys:F,values:te,wantResults:T}).then(function(oe){var G=oe.numFailures,de=oe.results,ee=oe.lastResult,oe=oe.failures;if(G===0)return T?de:ee;throw new W("".concat(k.name,".bulkAdd(): ").concat(G," of ").concat(Z," operations failed"),oe)})})},At.prototype.bulkPut=function(u,h,p){var k=this,F=Array.isArray(h)?h:void 0,T=(p=p||(F?void 0:h))?p.allKeys:void 0;return this._trans("readwrite",function(O){var te=k.schema.primKey,q=te.auto,te=te.keyPath;if(te&&F)throw new pe.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(F&&F.length!==u.length)throw new pe.InvalidArgument("Arguments objects and keys must have the same length");var Z=u.length,te=te&&q?u.map(Ol(te)):u;return k.core.mutate({trans:O,type:"put",keys:F,values:te,wantResults:T}).then(function(oe){var G=oe.numFailures,de=oe.results,ee=oe.lastResult,oe=oe.failures;if(G===0)return T?de:ee;throw new W("".concat(k.name,".bulkPut(): ").concat(G," of ").concat(Z," operations failed"),oe)})})},At.prototype.bulkUpdate=function(u){var h=this,p=this.core,k=u.map(function(O){return O.key}),F=u.map(function(O){return O.changes}),T=[];return this._trans("readwrite",function(O){return p.getMany({trans:O,keys:k,cache:"clone"}).then(function(q){var Z=[],te=[];u.forEach(function(G,de){var ee=G.key,oe=G.changes,ue=q[de];if(ue){for(var re=0,fe=Object.keys(oe);re<fe.length;re++){var ye=fe[re],ve=oe[ye];if(ye===h.schema.primKey.keyPath){if(it(ve,ee)!==0)throw new pe.Constraint("Cannot update primary key in bulkUpdate()")}else E(ue,ye,ve)}T.push(de),Z.push(ee),te.push(ue)}});var ae=Z.length;return p.mutate({trans:O,type:"put",keys:Z,values:te,updates:{keys:k,changeSpecs:F}}).then(function(G){var de=G.numFailures,ee=G.failures;if(de===0)return ae;for(var oe=0,ue=Object.keys(ee);oe<ue.length;oe++){var re,fe=ue[oe],ye=T[Number(fe)];ye!=null&&(re=ee[fe],delete ee[fe],ee[ye]=re)}throw new W("".concat(h.name,".bulkUpdate(): ").concat(de," of ").concat(ae," operations failed"),ee)})})})},At.prototype.bulkDelete=function(u){var h=this,p=u.length;return this._trans("readwrite",function(k){return h.core.mutate({trans:k,type:"delete",keys:u})}).then(function(O){var F=O.numFailures,T=O.lastResult,O=O.failures;if(F===0)return T;throw new W("".concat(h.name,".bulkDelete(): ").concat(F," of ").concat(p," operations failed"),O)})},At);function At(){}function ei(u){function h(O,q){if(q){for(var Z=arguments.length,te=new Array(Z-1);--Z;)te[Z-1]=arguments[Z];return p[O].subscribe.apply(null,te),u}if(typeof O=="string")return p[O]}var p={};h.addEventType=T;for(var k=1,F=arguments.length;k<F;++k)T(arguments[k]);return h;function T(O,q,Z){if(typeof O!="object"){var te;q=q||pt;var ae={subscribers:[],fire:Z=Z||be,subscribe:function(G){ae.subscribers.indexOf(G)===-1&&(ae.subscribers.push(G),ae.fire=q(ae.fire,G))},unsubscribe:function(G){ae.subscribers=ae.subscribers.filter(function(de){return de!==G}),ae.fire=ae.subscribers.reduce(q,Z)}};return p[O]=h[O]=ae}i(te=O).forEach(function(G){var de=te[G];if(l(de))T(G,te[G][0],te[G][1]);else{if(de!=="asap")throw new pe.InvalidArgument("Invalid event config");var ee=T(G,Be,function(){for(var oe=arguments.length,ue=new Array(oe);oe--;)ue[oe]=arguments[oe];ee.subscribers.forEach(function(re){D(function(){re.apply(null,ue)})})})}})}}function ti(u,h){return C(h).from({prototype:u}),h}function zo(u,h){return!(u.filter||u.algorithm||u.or)&&(h?u.justLimit:!u.replayFilter)}function Bu(u,h){u.filter=oo(u.filter,h)}function Au(u,h,p){var k=u.replayFilter;u.replayFilter=k?function(){return oo(k(),h())}:h,u.justLimit=p&&!k}function Ul(u,h){if(u.isPrimKey)return h.primaryKey;var p=h.getIndexByKeyPath(u.index);if(!p)throw new pe.Schema("KeyPath "+u.index+" on object store "+h.name+" is not indexed");return p}function Om(u,h,p){var k=Ul(u,h.schema);return h.openCursor({trans:p,values:!u.keysOnly,reverse:u.dir==="prev",unique:!!u.unique,query:{index:k,range:u.range}})}function Vl(u,h,p,k){var F=u.replayFilter?oo(u.filter,u.replayFilter()):u.filter;if(u.or){var T={},O=function(q,Z,te){var ae,G;F&&!F(Z,te,function(de){return Z.stop(de)},function(de){return Z.fail(de)})||((G=""+(ae=Z.primaryKey))=="[object ArrayBuffer]"&&(G=""+new Uint8Array(ae)),f(T,G)||(T[G]=!0,h(q,Z,te)))};return Promise.all([u.or._iterate(O,p),Um(Om(u,k,p),u.algorithm,O,!u.keysOnly&&u.valueMapper)])}return Um(Om(u,k,p),oo(u.algorithm,F),h,!u.keysOnly&&u.valueMapper)}function Um(u,h,p,k){var F=he(k?function(T,O,q){return p(k(T),O,q)}:p);return u.then(function(T){if(T)return T.start(function(){var O=function(){return T.continue()};h&&!h(T,function(q){return O=q},function(q){T.stop(q),O=be},function(q){T.fail(q),O=be})||F(T.value,T,function(q){return O=q}),O()})})}var ni=(Vm.prototype.execute=function(u){var h=this["@@propmod"];if(h.add!==void 0){var p=h.add;if(l(p))return o(o([],l(u)?u:[],!0),p).sort();if(typeof p=="number")return(Number(u)||0)+p;if(typeof p=="bigint")try{return BigInt(u)+p}catch{return BigInt(0)+p}throw new TypeError("Invalid term ".concat(p))}if(h.remove!==void 0){var k=h.remove;if(l(k))return l(u)?u.filter(function(F){return!k.includes(F)}).sort():[];if(typeof k=="number")return Number(u)-k;if(typeof k=="bigint")try{return BigInt(u)-k}catch{return BigInt(0)-k}throw new TypeError("Invalid subtrahend ".concat(k))}return p=(p=h.replacePrefix)===null||p===void 0?void 0:p[0],p&&typeof u=="string"&&u.startsWith(p)?h.replacePrefix[1]+u.substring(p.length):u},Vm);function Vm(u){this["@@propmod"]=u}var Fb=(ht.prototype._read=function(u,h){var p=this._ctx;return p.error?p.table._trans(null,Vt.bind(null,p.error)):p.table._trans("readonly",u).then(h)},ht.prototype._write=function(u){var h=this._ctx;return h.error?h.table._trans(null,Vt.bind(null,h.error)):h.table._trans("readwrite",u,"locked")},ht.prototype._addAlgorithm=function(u){var h=this._ctx;h.algorithm=oo(h.algorithm,u)},ht.prototype._iterate=function(u,h){return Vl(this._ctx,u,h,this._ctx.table.core)},ht.prototype.clone=function(u){var h=Object.create(this.constructor.prototype),p=Object.create(this._ctx);return u&&c(p,u),h._ctx=p,h},ht.prototype.raw=function(){return this._ctx.valueMapper=null,this},ht.prototype.each=function(u){var h=this._ctx;return this._read(function(p){return Vl(h,u,p,h.table.core)})},ht.prototype.count=function(u){var h=this;return this._read(function(p){var k=h._ctx,F=k.table.core;if(zo(k,!0))return F.count({trans:p,query:{index:Ul(k,F.schema),range:k.range}}).then(function(O){return Math.min(O,k.limit)});var T=0;return Vl(k,function(){return++T,!1},p,F).then(function(){return T})}).then(u)},ht.prototype.sortBy=function(u,h){var p=u.split(".").reverse(),k=p[0],F=p.length-1;function T(Z,te){return te?T(Z[p[te]],te-1):Z[k]}var O=this._ctx.dir==="next"?1:-1;function q(Z,te){return it(T(Z,F),T(te,F))*O}return this.toArray(function(Z){return Z.sort(q)}).then(h)},ht.prototype.toArray=function(u){var h=this;return this._read(function(p){var k=h._ctx;if(k.dir==="next"&&zo(k,!0)&&0<k.limit){var F=k.valueMapper,T=Ul(k,k.table.core.schema);return k.table.core.query({trans:p,limit:k.limit,values:!0,query:{index:T,range:k.range}}).then(function(q){return q=q.result,F?q.map(F):q})}var O=[];return Vl(k,function(q){return O.push(q)},p,k.table.core).then(function(){return O})},u)},ht.prototype.offset=function(u){var h=this._ctx;return u<=0||(h.offset+=u,zo(h)?Au(h,function(){var p=u;return function(k,F){return p===0||(p===1?--p:F(function(){k.advance(p),p=0}),!1)}}):Au(h,function(){var p=u;return function(){return--p<0}})),this},ht.prototype.limit=function(u){return this._ctx.limit=Math.min(this._ctx.limit,u),Au(this._ctx,function(){var h=u;return function(p,k,F){return--h<=0&&k(F),0<=h}},!0),this},ht.prototype.until=function(u,h){return Bu(this._ctx,function(p,k,F){return!u(p.value)||(k(F),h)}),this},ht.prototype.first=function(u){return this.limit(1).toArray(function(h){return h[0]}).then(u)},ht.prototype.last=function(u){return this.reverse().first(u)},ht.prototype.filter=function(u){var h;return Bu(this._ctx,function(p){return u(p.value)}),(h=this._ctx).isMatch=oo(h.isMatch,u),this},ht.prototype.and=function(u){return this.filter(u)},ht.prototype.or=function(u){return new this.db.WhereClause(this._ctx.table,u,this)},ht.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},ht.prototype.desc=function(){return this.reverse()},ht.prototype.eachKey=function(u){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(p,k){u(k.key,k)})},ht.prototype.eachUniqueKey=function(u){return this._ctx.unique="unique",this.eachKey(u)},ht.prototype.eachPrimaryKey=function(u){var h=this._ctx;return h.keysOnly=!h.isMatch,this.each(function(p,k){u(k.primaryKey,k)})},ht.prototype.keys=function(u){var h=this._ctx;h.keysOnly=!h.isMatch;var p=[];return this.each(function(k,F){p.push(F.key)}).then(function(){return p}).then(u)},ht.prototype.primaryKeys=function(u){var h=this._ctx;if(h.dir==="next"&&zo(h,!0)&&0<h.limit)return this._read(function(k){var F=Ul(h,h.table.core.schema);return h.table.core.query({trans:k,values:!1,limit:h.limit,query:{index:F,range:h.range}})}).then(function(k){return k.result}).then(u);h.keysOnly=!h.isMatch;var p=[];return this.each(function(k,F){p.push(F.primaryKey)}).then(function(){return p}).then(u)},ht.prototype.uniqueKeys=function(u){return this._ctx.unique="unique",this.keys(u)},ht.prototype.firstKey=function(u){return this.limit(1).keys(function(h){return h[0]}).then(u)},ht.prototype.lastKey=function(u){return this.reverse().firstKey(u)},ht.prototype.distinct=function(){var u=this._ctx,u=u.index&&u.table.schema.idxByName[u.index];if(!u||!u.multi)return this;var h={};return Bu(this._ctx,function(F){var k=F.primaryKey.toString(),F=f(h,k);return h[k]=!0,!F}),this},ht.prototype.modify=function(u){var h=this,p=this._ctx;return this._write(function(k){var F,T,O;O=typeof u=="function"?u:(F=i(u),T=F.length,function(re){for(var fe=!1,ye=0;ye<T;++ye){var ve=F[ye],we=u[ve],De=w(re,ve);we instanceof ni?(E(re,ve,we.execute(De)),fe=!0):De!==we&&(E(re,ve,we),fe=!0)}return fe});var q=p.table.core,G=q.schema.primaryKey,Z=G.outbound,te=G.extractKey,ae=200,G=h.db._options.modifyChunkSize;G&&(ae=typeof G=="object"?G[q.name]||G["*"]||200:G);function de(re,ve){var ye=ve.failures,ve=ve.numFailures;oe+=re-ve;for(var we=0,De=i(ye);we<De.length;we++){var Te=De[we];ee.push(ye[Te])}}var ee=[],oe=0,ue=[];return h.clone().primaryKeys().then(function(re){function fe(ve){var we=Math.min(ae,re.length-ve);return q.getMany({trans:k,keys:re.slice(ve,ve+we),cache:"immutable"}).then(function(De){for(var Te=[],Fe=[],_e=Z?[]:null,Ie=[],Pe=0;Pe<we;++Pe){var Oe=De[Pe],et={value:X(Oe),primKey:re[ve+Pe]};O.call(et,et.value,et)!==!1&&(et.value==null?Ie.push(re[ve+Pe]):Z||it(te(Oe),te(et.value))===0?(Fe.push(et.value),Z&&_e.push(re[ve+Pe])):(Ie.push(re[ve+Pe]),Te.push(et.value)))}return Promise.resolve(0<Te.length&&q.mutate({trans:k,type:"add",values:Te}).then(function(rt){for(var st in rt.failures)Ie.splice(parseInt(st),1);de(Te.length,rt)})).then(function(){return(0<Fe.length||ye&&typeof u=="object")&&q.mutate({trans:k,type:"put",keys:_e,values:Fe,criteria:ye,changeSpec:typeof u!="function"&&u,isAdditionalChunk:0<ve}).then(function(rt){return de(Fe.length,rt)})}).then(function(){return(0<Ie.length||ye&&u===ju)&&q.mutate({trans:k,type:"delete",keys:Ie,criteria:ye,isAdditionalChunk:0<ve}).then(function(rt){return de(Ie.length,rt)})}).then(function(){return re.length>ve+we&&fe(ve+ae)})})}var ye=zo(p)&&p.limit===1/0&&(typeof u!="function"||u===ju)&&{index:p.index,range:p.range};return fe(0).then(function(){if(0<ee.length)throw new me("Error modifying one or more objects",ee,oe,ue);return re.length})})})},ht.prototype.delete=function(){var u=this._ctx,h=u.range;return zo(u)&&(u.isPrimKey||h.type===3)?this._write(function(p){var k=u.table.core.schema.primaryKey,F=h;return u.table.core.count({trans:p,query:{index:k,range:F}}).then(function(T){return u.table.core.mutate({trans:p,type:"deleteRange",range:F}).then(function(O){var q=O.failures;if(O.lastResult,O.results,O=O.numFailures,O)throw new me("Could not delete some values",Object.keys(q).map(function(Z){return q[Z]}),T-O);return T-O})})}):this.modify(ju)},ht);function ht(){}var ju=function(u,h){return h.value=null};function Nb(u,h){return u<h?-1:u===h?0:1}function _b(u,h){return h<u?-1:u===h?0:1}function Mn(u,h,p){return u=u instanceof qm?new u.Collection(u):u,u._ctx.error=new(p||TypeError)(h),u}function qo(u){return new u.Collection(u,function(){return zm("")}).limit(0)}function zl(u,h,p,k){var F,T,O,q,Z,te,ae,G=p.length;if(!p.every(function(oe){return typeof oe=="string"}))return Mn(u,Tm);function de(oe){F=oe==="next"?function(re){return re.toUpperCase()}:function(re){return re.toLowerCase()},T=oe==="next"?function(re){return re.toLowerCase()}:function(re){return re.toUpperCase()},O=oe==="next"?Nb:_b;var ue=p.map(function(re){return{lower:T(re),upper:F(re)}}).sort(function(re,fe){return O(re.lower,fe.lower)});q=ue.map(function(re){return re.upper}),Z=ue.map(function(re){return re.lower}),ae=(te=oe)==="next"?"":k}de("next"),u=new u.Collection(u,function(){return ys(q[0],Z[G-1]+k)}),u._ondirectionchange=function(oe){de(oe)};var ee=0;return u._addAlgorithm(function(oe,ue,re){var fe=oe.key;if(typeof fe!="string")return!1;var ye=T(fe);if(h(ye,Z,ee))return!0;for(var ve=null,we=ee;we<G;++we){var De=function(Te,Fe,_e,Ie,Pe,Oe){for(var et=Math.min(Te.length,Ie.length),rt=-1,st=0;st<et;++st){var Ln=Fe[st];if(Ln!==Ie[st])return Pe(Te[st],_e[st])<0?Te.substr(0,st)+_e[st]+_e.substr(st+1):Pe(Te[st],Ie[st])<0?Te.substr(0,st)+Ie[st]+_e.substr(st+1):0<=rt?Te.substr(0,rt)+Fe[rt]+_e.substr(rt+1):null;Pe(Te[st],Ln)<0&&(rt=st)}return et<Ie.length&&Oe==="next"?Te+_e.substr(Te.length):et<Te.length&&Oe==="prev"?Te.substr(0,_e.length):rt<0?null:Te.substr(0,rt)+Ie[rt]+_e.substr(rt+1)}(fe,ye,q[we],Z[we],O,te);De===null&&ve===null?ee=we+1:(ve===null||0<O(ve,De))&&(ve=De)}return ue(ve!==null?function(){oe.continue(ve+ae)}:re),!1}),u}function ys(u,h,p,k){return{type:2,lower:u,upper:h,lowerOpen:p,upperOpen:k}}function zm(u){return{type:1,lower:u,upper:u}}var qm=(Object.defineProperty(Jt.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Jt.prototype.between=function(u,h,p,k){p=p!==!1,k=k===!0;try{return 0<this._cmp(u,h)||this._cmp(u,h)===0&&(p||k)&&(!p||!k)?qo(this):new this.Collection(this,function(){return ys(u,h,!p,!k)})}catch{return Mn(this,Vr)}},Jt.prototype.equals=function(u){return u==null?Mn(this,Vr):new this.Collection(this,function(){return zm(u)})},Jt.prototype.above=function(u){return u==null?Mn(this,Vr):new this.Collection(this,function(){return ys(u,void 0,!0)})},Jt.prototype.aboveOrEqual=function(u){return u==null?Mn(this,Vr):new this.Collection(this,function(){return ys(u,void 0,!1)})},Jt.prototype.below=function(u){return u==null?Mn(this,Vr):new this.Collection(this,function(){return ys(void 0,u,!1,!0)})},Jt.prototype.belowOrEqual=function(u){return u==null?Mn(this,Vr):new this.Collection(this,function(){return ys(void 0,u)})},Jt.prototype.startsWith=function(u){return typeof u!="string"?Mn(this,Tm):this.between(u,u+so,!0,!0)},Jt.prototype.startsWithIgnoreCase=function(u){return u===""?this.startsWith(u):zl(this,function(h,p){return h.indexOf(p[0])===0},[u],so)},Jt.prototype.equalsIgnoreCase=function(u){return zl(this,function(h,p){return h===p[0]},[u],"")},Jt.prototype.anyOfIgnoreCase=function(){var u=S.apply(_,arguments);return u.length===0?qo(this):zl(this,function(h,p){return p.indexOf(h)!==-1},u,"")},Jt.prototype.startsWithAnyOfIgnoreCase=function(){var u=S.apply(_,arguments);return u.length===0?qo(this):zl(this,function(h,p){return p.some(function(k){return h.indexOf(k)===0})},u,so)},Jt.prototype.anyOf=function(){var u=this,h=S.apply(_,arguments),p=this._cmp;try{h.sort(p)}catch{return Mn(this,Vr)}if(h.length===0)return qo(this);var k=new this.Collection(this,function(){return ys(h[0],h[h.length-1])});k._ondirectionchange=function(T){p=T==="next"?u._ascending:u._descending,h.sort(p)};var F=0;return k._addAlgorithm(function(T,O,q){for(var Z=T.key;0<p(Z,h[F]);)if(++F===h.length)return O(q),!1;return p(Z,h[F])===0||(O(function(){T.continue(h[F])}),!1)}),k},Jt.prototype.notEqual=function(u){return this.inAnyRange([[-1/0,u],[u,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Jt.prototype.noneOf=function(){var u=S.apply(_,arguments);if(u.length===0)return new this.Collection(this);try{u.sort(this._ascending)}catch{return Mn(this,Vr)}var h=u.reduce(function(p,k){return p?p.concat([[p[p.length-1][1],k]]):[[-1/0,k]]},null);return h.push([u[u.length-1],this.db._maxKey]),this.inAnyRange(h,{includeLowers:!1,includeUppers:!1})},Jt.prototype.inAnyRange=function(fe,h){var p=this,k=this._cmp,F=this._ascending,T=this._descending,O=this._min,q=this._max;if(fe.length===0)return qo(this);if(!fe.every(function(ye){return ye[0]!==void 0&&ye[1]!==void 0&&F(ye[0],ye[1])<=0}))return Mn(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",pe.InvalidArgument);var Z=!h||h.includeLowers!==!1,te=h&&h.includeUppers===!0,ae,G=F;function de(ye,ve){return G(ye[0],ve[0])}try{(ae=fe.reduce(function(ye,ve){for(var we=0,De=ye.length;we<De;++we){var Te=ye[we];if(k(ve[0],Te[1])<0&&0<k(ve[1],Te[0])){Te[0]=O(Te[0],ve[0]),Te[1]=q(Te[1],ve[1]);break}}return we===De&&ye.push(ve),ye},[])).sort(de)}catch{return Mn(this,Vr)}var ee=0,oe=te?function(ye){return 0<F(ye,ae[ee][1])}:function(ye){return 0<=F(ye,ae[ee][1])},ue=Z?function(ye){return 0<T(ye,ae[ee][0])}:function(ye){return 0<=T(ye,ae[ee][0])},re=oe,fe=new this.Collection(this,function(){return ys(ae[0][0],ae[ae.length-1][1],!Z,!te)});return fe._ondirectionchange=function(ye){G=ye==="next"?(re=oe,F):(re=ue,T),ae.sort(de)},fe._addAlgorithm(function(ye,ve,we){for(var De,Te=ye.key;re(Te);)if(++ee===ae.length)return ve(we),!1;return!oe(De=Te)&&!ue(De)||(p._cmp(Te,ae[ee][1])===0||p._cmp(Te,ae[ee][0])===0||ve(function(){G===F?ye.continue(ae[ee][0]):ye.continue(ae[ee][1])}),!1)}),fe},Jt.prototype.startsWithAnyOf=function(){var u=S.apply(_,arguments);return u.every(function(h){return typeof h=="string"})?u.length===0?qo(this):this.inAnyRange(u.map(function(h){return[h,h+so]})):Mn(this,"startsWithAnyOf() only works with strings")},Jt);function Jt(){}function jr(u){return he(function(h){return ri(h),u(h.target.error),!1})}function ri(u){u.stopPropagation&&u.stopPropagation(),u.preventDefault&&u.preventDefault()}var si="storagemutated",ku="x-storagemutated-1",vs=ei(null,si),Sb=(kr.prototype._lock=function(){return j(!qe.global),++this._reculock,this._reculock!==1||qe.global||(qe.lockOwnerFor=this),this},kr.prototype._unlock=function(){if(j(!qe.global),--this._reculock==0)for(qe.global||(qe.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var u=this._blockedFuncs.shift();try{ro(u[1],u[0])}catch{}}return this},kr.prototype._locked=function(){return this._reculock&&qe.lockOwnerFor!==this},kr.prototype.create=function(u){var h=this;if(!this.mode)return this;var p=this.db.idbdb,k=this.db._state.dbOpenError;if(j(!this.idbtrans),!u&&!p)switch(k&&k.name){case"DatabaseClosedError":throw new pe.DatabaseClosed(k);case"MissingAPIError":throw new pe.MissingAPI(k.message,k);default:throw new pe.OpenFailed(k)}if(!this.active)throw new pe.TransactionInactive;return j(this._completion._state===null),(u=this.idbtrans=u||(this.db.core||p).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=he(function(F){ri(F),h._reject(u.error)}),u.onabort=he(function(F){ri(F),h.active&&h._reject(new pe.Abort(u.error)),h.active=!1,h.on("abort").fire(F)}),u.oncomplete=he(function(){h.active=!1,h._resolve(),"mutatedParts"in u&&vs.storagemutated.fire(u.mutatedParts)}),this},kr.prototype._promise=function(u,h,p){var k=this;if(u==="readwrite"&&this.mode!=="readwrite")return Vt(new pe.ReadOnly("Transaction is readonly"));if(!this.active)return Vt(new pe.TransactionInactive);if(this._locked())return new K(function(T,O){k._blockedFuncs.push([function(){k._promise(u,h,p).then(T,O)},qe])});if(p)return ms(function(){var T=new K(function(O,q){k._lock();var Z=h(O,q,k);Z&&Z.then&&Z.then(O,q)});return T.finally(function(){return k._unlock()}),T._lib=!0,T});var F=new K(function(T,O){var q=h(T,O,k);q&&q.then&&q.then(T,O)});return F._lib=!0,F},kr.prototype._root=function(){return this.parent?this.parent._root():this},kr.prototype.waitFor=function(u){var h,p=this._root(),k=K.resolve(u);p._waitingFor?p._waitingFor=p._waitingFor.then(function(){return k}):(p._waitingFor=k,p._waitingQueue=[],h=p.idbtrans.objectStore(p.storeNames[0]),function T(){for(++p._spinCount;p._waitingQueue.length;)p._waitingQueue.shift()();p._waitingFor&&(h.get(-1/0).onsuccess=T)}());var F=p._waitingFor;return new K(function(T,O){k.then(function(q){return p._waitingQueue.push(he(T.bind(null,q)))},function(q){return p._waitingQueue.push(he(O.bind(null,q)))}).finally(function(){p._waitingFor===F&&(p._waitingFor=null)})})},kr.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new pe.Abort))},kr.prototype.table=function(u){var h=this._memoizedTables||(this._memoizedTables={});if(f(h,u))return h[u];var p=this.schema[u];if(!p)throw new pe.NotFound("Table "+u+" not part of transaction");return p=new this.db.Table(u,p,this),p.core=this.db.core.table(u),h[u]=p},kr);function kr(){}function Du(u,h,p,k,F,T,O){return{name:u,keyPath:h,unique:p,multi:k,auto:F,compound:T,src:(p&&!O?"&":"")+(k?"*":"")+(F?"++":"")+Wm(h)}}function Wm(u){return typeof u=="string"?u:u?"["+[].join.call(u,"+")+"]":""}function Fu(u,h,p){return{name:u,primKey:h,indexes:p,mappedClass:null,idxByName:(k=function(F){return[F.name,F]},p.reduce(function(F,T,O){return O=k(T,O),O&&(F[O[0]]=O[1]),F},{}))};var k}var oi=function(u){try{return u.only([[]]),oi=function(){return[[]]},[[]]}catch{return oi=function(){return so},so}};function Nu(u){return u==null?function(){}:typeof u=="string"?(h=u).split(".").length===1?function(p){return p[h]}:function(p){return w(p,h)}:function(p){return w(p,u)};var h}function Km(u){return[].slice.call(u)}var Pb=0;function ai(u){return u==null?":id":typeof u=="string"?u:"[".concat(u.join("+"),"]")}function Tb(u,h,Z){function k(re){if(re.type===3)return null;if(re.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var ee=re.lower,oe=re.upper,ue=re.lowerOpen,re=re.upperOpen;return ee===void 0?oe===void 0?null:h.upperBound(oe,!!re):oe===void 0?h.lowerBound(ee,!!ue):h.bound(ee,oe,!!ue,!!re)}function F(de){var ee,oe=de.name;return{name:oe,schema:de,mutate:function(ue){var re=ue.trans,fe=ue.type,ye=ue.keys,ve=ue.values,we=ue.range;return new Promise(function(De,Te){De=he(De);var Fe=re.objectStore(oe),_e=Fe.keyPath==null,Ie=fe==="put"||fe==="add";if(!Ie&&fe!=="delete"&&fe!=="deleteRange")throw new Error("Invalid operation type: "+fe);var Pe,Oe=(ye||ve||{length:1}).length;if(ye&&ve&&ye.length!==ve.length)throw new Error("Given keys array must have same length as given values array.");if(Oe===0)return De({numFailures:0,failures:{},results:[],lastResult:void 0});function et(yn){++Ln,ri(yn)}var rt=[],st=[],Ln=0;if(fe==="deleteRange"){if(we.type===4)return De({numFailures:Ln,failures:st,results:[],lastResult:void 0});we.type===3?rt.push(Pe=Fe.clear()):rt.push(Pe=Fe.delete(k(we)))}else{var _e=Ie?_e?[ve,ye]:[ve,null]:[ye,null],Ze=_e[0],cn=_e[1];if(Ie)for(var un=0;un<Oe;++un)rt.push(Pe=cn&&cn[un]!==void 0?Fe[fe](Ze[un],cn[un]):Fe[fe](Ze[un])),Pe.onerror=et;else for(un=0;un<Oe;++un)rt.push(Pe=Fe[fe](Ze[un])),Pe.onerror=et}function nc(yn){yn=yn.target.result,rt.forEach(function(lo,Gu){return lo.error!=null&&(st[Gu]=lo.error)}),De({numFailures:Ln,failures:st,results:fe==="delete"?ye:rt.map(function(lo){return lo.result}),lastResult:yn})}Pe.onerror=function(yn){et(yn),nc(yn)},Pe.onsuccess=nc})},getMany:function(ue){var re=ue.trans,fe=ue.keys;return new Promise(function(ye,ve){ye=he(ye);for(var we,De=re.objectStore(oe),Te=fe.length,Fe=new Array(Te),_e=0,Ie=0,Pe=function(rt){rt=rt.target,Fe[rt._pos]=rt.result,++Ie===_e&&ye(Fe)},Oe=jr(ve),et=0;et<Te;++et)fe[et]!=null&&((we=De.get(fe[et]))._pos=et,we.onsuccess=Pe,we.onerror=Oe,++_e);_e===0&&ye(Fe)})},get:function(ue){var re=ue.trans,fe=ue.key;return new Promise(function(ye,ve){ye=he(ye);var we=re.objectStore(oe).get(fe);we.onsuccess=function(De){return ye(De.target.result)},we.onerror=jr(ve)})},query:(ee=te,function(ue){return new Promise(function(re,fe){re=he(re);var ye,ve,we,_e=ue.trans,De=ue.values,Te=ue.limit,Pe=ue.query,Fe=Te===1/0?void 0:Te,Ie=Pe.index,Pe=Pe.range,_e=_e.objectStore(oe),Ie=Ie.isPrimaryKey?_e:_e.index(Ie.name),Pe=k(Pe);if(Te===0)return re({result:[]});ee?((Fe=De?Ie.getAll(Pe,Fe):Ie.getAllKeys(Pe,Fe)).onsuccess=function(Oe){return re({result:Oe.target.result})},Fe.onerror=jr(fe)):(ye=0,ve=!De&&"openKeyCursor"in Ie?Ie.openKeyCursor(Pe):Ie.openCursor(Pe),we=[],ve.onsuccess=function(Oe){var et=ve.result;return et?(we.push(De?et.value:et.primaryKey),++ye===Te?re({result:we}):void et.continue()):re({result:we})},ve.onerror=jr(fe))})}),openCursor:function(ue){var re=ue.trans,fe=ue.values,ye=ue.query,ve=ue.reverse,we=ue.unique;return new Promise(function(De,Te){De=he(De);var Ie=ye.index,Fe=ye.range,_e=re.objectStore(oe),_e=Ie.isPrimaryKey?_e:_e.index(Ie.name),Ie=ve?we?"prevunique":"prev":we?"nextunique":"next",Pe=!fe&&"openKeyCursor"in _e?_e.openKeyCursor(k(Fe),Ie):_e.openCursor(k(Fe),Ie);Pe.onerror=jr(Te),Pe.onsuccess=he(function(Oe){var et,rt,st,Ln,Ze=Pe.result;Ze?(Ze.___id=++Pb,Ze.done=!1,et=Ze.continue.bind(Ze),rt=(rt=Ze.continuePrimaryKey)&&rt.bind(Ze),st=Ze.advance.bind(Ze),Ln=function(){throw new Error("Cursor not stopped")},Ze.trans=re,Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=function(){throw new Error("Cursor not started")},Ze.fail=he(Te),Ze.next=function(){var cn=this,un=1;return this.start(function(){return un--?cn.continue():cn.stop()}).then(function(){return cn})},Ze.start=function(cn){function un(){if(Pe.result)try{cn()}catch(yn){Ze.fail(yn)}else Ze.done=!0,Ze.start=function(){throw new Error("Cursor behind last entry")},Ze.stop()}var nc=new Promise(function(yn,lo){yn=he(yn),Pe.onerror=jr(lo),Ze.fail=lo,Ze.stop=function(Gu){Ze.stop=Ze.continue=Ze.continuePrimaryKey=Ze.advance=Ln,yn(Gu)}});return Pe.onsuccess=he(function(yn){Pe.onsuccess=un,un()}),Ze.continue=et,Ze.continuePrimaryKey=rt,Ze.advance=st,un(),nc},De(Ze)):De(null)},Te)})},count:function(ue){var re=ue.query,fe=ue.trans,ye=re.index,ve=re.range;return new Promise(function(we,De){var Te=fe.objectStore(oe),Fe=ye.isPrimaryKey?Te:Te.index(ye.name),Te=k(ve),Fe=Te?Fe.count(Te):Fe.count();Fe.onsuccess=he(function(_e){return we(_e.target.result)}),Fe.onerror=jr(De)})}}}var T,O,q,ae=(O=Z,q=Km((T=u).objectStoreNames),{schema:{name:T.name,tables:q.map(function(de){return O.objectStore(de)}).map(function(de){var ee=de.keyPath,re=de.autoIncrement,oe=l(ee),ue={},re={name:de.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:ee==null,compound:oe,keyPath:ee,autoIncrement:re,unique:!0,extractKey:Nu(ee)},indexes:Km(de.indexNames).map(function(fe){return de.index(fe)}).map(function(we){var ye=we.name,ve=we.unique,De=we.multiEntry,we=we.keyPath,De={name:ye,compound:l(we),keyPath:we,unique:ve,multiEntry:De,extractKey:Nu(we)};return ue[ai(we)]=De}),getIndexByKeyPath:function(fe){return ue[ai(fe)]}};return ue[":id"]=re.primaryKey,ee!=null&&(ue[ai(ee)]=re.primaryKey),re})},hasGetAll:0<q.length&&"getAll"in O.objectStore(q[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),Z=ae.schema,te=ae.hasGetAll,ae=Z.tables.map(F),G={};return ae.forEach(function(de){return G[de.name]=de}),{stack:"dbcore",transaction:u.transaction.bind(u),table:function(de){if(!G[de])throw new Error("Table '".concat(de,"' not found"));return G[de]},MIN_KEY:-1/0,MAX_KEY:oi(h),schema:Z}}function Ib(u,h,p,k){var F=p.IDBKeyRange;return p.indexedDB,{dbcore:(k=Tb(h,F,k),u.dbcore.reduce(function(T,O){return O=O.create,r(r({},T),O(T))},k))}}function ql(u,k){var p=k.db,k=Ib(u._middlewares,p,u._deps,k);u.core=k.dbcore,u.tables.forEach(function(F){var T=F.name;u.core.schema.tables.some(function(O){return O.name===T})&&(F.core=u.core.table(T),u[T]instanceof u.Table&&(u[T].core=F.core))})}function Wl(u,h,p,k){p.forEach(function(F){var T=k[F];h.forEach(function(O){var q=function Z(te,ae){return P(te,ae)||(te=x(te))&&Z(te,ae)}(O,F);(!q||"value"in q&&q.value===void 0)&&(O===u.Transaction.prototype||O instanceof u.Transaction?y(O,F,{get:function(){return this.table(F)},set:function(Z){v(this,F,{value:Z,writable:!0,configurable:!0,enumerable:!0})}}):O[F]=new u.Table(F,T))})})}function _u(u,h){h.forEach(function(p){for(var k in p)p[k]instanceof u.Table&&delete p[k]})}function Rb(u,h){return u._cfg.version-h._cfg.version}function Mb(u,h,p,k){var F=u._dbSchema;p.objectStoreNames.contains("$meta")&&!F.$meta&&(F.$meta=Fu("$meta",Gm("")[0],[]),u._storeNames.push("$meta"));var T=u._createTransaction("readwrite",u._storeNames,F);T.create(p),T._completion.catch(k);var O=T._reject.bind(T),q=qe.transless||qe;ms(function(){return qe.trans=T,qe.transless=q,h!==0?(ql(u,p),te=h,((Z=T).storeNames.includes("$meta")?Z.table("$meta").get("version").then(function(ae){return ae??te}):K.resolve(te)).then(function(ae){return de=ae,ee=T,oe=p,ue=[],ae=(G=u)._versions,re=G._dbSchema=Hl(0,G.idbdb,oe),(ae=ae.filter(function(fe){return fe._cfg.version>=de})).length!==0?(ae.forEach(function(fe){ue.push(function(){var ye=re,ve=fe._cfg.dbschema;Gl(G,ye,oe),Gl(G,ve,oe),re=G._dbSchema=ve;var we=Su(ye,ve);we.add.forEach(function(Ie){Pu(oe,Ie[0],Ie[1].primKey,Ie[1].indexes)}),we.change.forEach(function(Ie){if(Ie.recreate)throw new pe.Upgrade("Not yet support for changing primary key");var Pe=oe.objectStore(Ie.name);Ie.add.forEach(function(Oe){return Kl(Pe,Oe)}),Ie.change.forEach(function(Oe){Pe.deleteIndex(Oe.name),Kl(Pe,Oe)}),Ie.del.forEach(function(Oe){return Pe.deleteIndex(Oe)})});var De=fe._cfg.contentUpgrade;if(De&&fe._cfg.version>de){ql(G,oe),ee._memoizedTables={};var Te=N(ve);we.del.forEach(function(Ie){Te[Ie]=ye[Ie]}),_u(G,[G.Transaction.prototype]),Wl(G,[G.Transaction.prototype],i(Te),Te),ee.schema=Te;var Fe,_e=U(De);return _e&&Uo(),we=K.follow(function(){var Ie;(Fe=De(ee))&&_e&&(Ie=ps.bind(null,null),Fe.then(Ie,Ie))}),Fe&&typeof Fe.then=="function"?K.resolve(Fe):we.then(function(){return Fe})}}),ue.push(function(ye){var ve,we,De=fe._cfg.dbschema;ve=De,we=ye,[].slice.call(we.db.objectStoreNames).forEach(function(Te){return ve[Te]==null&&we.db.deleteObjectStore(Te)}),_u(G,[G.Transaction.prototype]),Wl(G,[G.Transaction.prototype],G._storeNames,G._dbSchema),ee.schema=G._dbSchema}),ue.push(function(ye){G.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(G.idbdb.version/10)===fe._cfg.version?(G.idbdb.deleteObjectStore("$meta"),delete G._dbSchema.$meta,G._storeNames=G._storeNames.filter(function(ve){return ve!=="$meta"})):ye.objectStore("$meta").put(fe._cfg.version,"version"))})}),function fe(){return ue.length?K.resolve(ue.shift()(ee.idbtrans)).then(fe):K.resolve()}().then(function(){Hm(re,oe)})):K.resolve();var G,de,ee,oe,ue,re}).catch(O)):(i(F).forEach(function(ae){Pu(p,ae,F[ae].primKey,F[ae].indexes)}),ql(u,p),void K.follow(function(){return u.on.populate.fire(T)}).catch(O));var Z,te})}function Lb(u,h){Hm(u._dbSchema,h),h.db.version%10!=0||h.objectStoreNames.contains("$meta")||h.db.createObjectStore("$meta").add(Math.ceil(h.db.version/10-1),"version");var p=Hl(0,u.idbdb,h);Gl(u,u._dbSchema,h);for(var k=0,F=Su(p,u._dbSchema).change;k<F.length;k++){var T=function(O){if(O.change.length||O.recreate)return console.warn("Unable to patch indexes of table ".concat(O.name," because it has changes on the type of index or primary key.")),{value:void 0};var q=h.objectStore(O.name);O.add.forEach(function(Z){Ne&&console.debug("Dexie upgrade patch: Creating missing index ".concat(O.name,".").concat(Z.src)),Kl(q,Z)})}(F[k]);if(typeof T=="object")return T.value}}function Su(u,h){var p,k={del:[],add:[],change:[]};for(p in u)h[p]||k.del.push(p);for(p in h){var F=u[p],T=h[p];if(F){var O={name:p,def:T,recreate:!1,del:[],add:[],change:[]};if(""+(F.primKey.keyPath||"")!=""+(T.primKey.keyPath||"")||F.primKey.auto!==T.primKey.auto)O.recreate=!0,k.change.push(O);else{var q=F.idxByName,Z=T.idxByName,te=void 0;for(te in q)Z[te]||O.del.push(te);for(te in Z){var ae=q[te],G=Z[te];ae?ae.src!==G.src&&O.change.push(G):O.add.push(G)}(0<O.del.length||0<O.add.length||0<O.change.length)&&k.change.push(O)}}else k.add.push([p,T])}return k}function Pu(u,h,p,k){var F=u.db.createObjectStore(h,p.keyPath?{keyPath:p.keyPath,autoIncrement:p.auto}:{autoIncrement:p.auto});return k.forEach(function(T){return Kl(F,T)}),F}function Hm(u,h){i(u).forEach(function(p){h.db.objectStoreNames.contains(p)||(Ne&&console.debug("Dexie: Creating missing table",p),Pu(h,p,u[p].primKey,u[p].indexes))})}function Kl(u,h){u.createIndex(h.name,h.keyPath,{unique:h.unique,multiEntry:h.multi})}function Hl(u,h,p){var k={};return g(h.objectStoreNames,0).forEach(function(F){for(var T=p.objectStore(F),O=Du(Wm(te=T.keyPath),te||"",!0,!1,!!T.autoIncrement,te&&typeof te!="string",!0),q=[],Z=0;Z<T.indexNames.length;++Z){var ae=T.index(T.indexNames[Z]),te=ae.keyPath,ae=Du(ae.name,te,!!ae.unique,!!ae.multiEntry,!1,te&&typeof te!="string",!1);q.push(ae)}k[F]=Fu(F,O,q)}),k}function Gl(u,h,p){for(var k=p.db.objectStoreNames,F=0;F<k.length;++F){var T=k[F],O=p.objectStore(T);u._hasGetAll="getAll"in O;for(var q=0;q<O.indexNames.length;++q){var Z=O.indexNames[q],te=O.index(Z).keyPath,ae=typeof te=="string"?te:"["+g(te).join("+")+"]";!h[T]||(te=h[T].idxByName[ae])&&(te.name=Z,delete h[T].idxByName[ae],h[T].idxByName[Z]=te)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(u._hasGetAll=!1)}function Gm(u){return u.split(",").map(function(h,p){var k=(h=h.trim()).replace(/([&*]|\+\+)/g,""),F=/^\[/.test(k)?k.match(/^\[(.*)\]$/)[1].split("+"):k;return Du(k,F||null,/\&/.test(h),/\*/.test(h),/\+\+/.test(h),l(F),p===0)})}var $b=(Ql.prototype._parseStoresSpec=function(u,h){i(u).forEach(function(p){if(u[p]!==null){var k=Gm(u[p]),F=k.shift();if(F.unique=!0,F.multi)throw new pe.Schema("Primary key cannot be multi-valued");k.forEach(function(T){if(T.auto)throw new pe.Schema("Only primary key can be marked as autoIncrement (++)");if(!T.keyPath)throw new pe.Schema("Index must have a name and cannot be an empty string")}),h[p]=Fu(p,F,k)}})},Ql.prototype.stores=function(p){var h=this.db;this._cfg.storesSource=this._cfg.storesSource?c(this._cfg.storesSource,p):p;var p=h._versions,k={},F={};return p.forEach(function(T){c(k,T._cfg.storesSource),F=T._cfg.dbschema={},T._parseStoresSpec(k,F)}),h._dbSchema=F,_u(h,[h._allTables,h,h.Transaction.prototype]),Wl(h,[h._allTables,h,h.Transaction.prototype,this._cfg.tables],i(F),F),h._storeNames=i(F),this},Ql.prototype.upgrade=function(u){return this._cfg.contentUpgrade=ie(this._cfg.contentUpgrade||be,u),this},Ql);function Ql(){}function Tu(u,h){var p=u._dbNamesDB;return p||(p=u._dbNamesDB=new zr($l,{addons:[],indexedDB:u,IDBKeyRange:h})).version(1).stores({dbnames:"name"}),p.table("dbnames")}function Iu(u){return u&&typeof u.databases=="function"}function Ru(u){return ms(function(){return qe.letThrough=!0,u()})}function Mu(u){return!("from"in u)}var ln=function(u,h){if(!this){var p=new ln;return u&&"d"in u&&c(p,u),p}c(this,arguments.length?{d:1,from:u,to:1<arguments.length?h:u}:{d:0})};function ii(u,h,p){var k=it(h,p);if(!isNaN(k)){if(0<k)throw RangeError();if(Mu(u))return c(u,{from:h,to:p,d:1});var F=u.l,k=u.r;if(it(p,u.from)<0)return F?ii(F,h,p):u.l={from:h,to:p,d:1,l:null,r:null},Ym(u);if(0<it(h,u.to))return k?ii(k,h,p):u.r={from:h,to:p,d:1,l:null,r:null},Ym(u);it(h,u.from)<0&&(u.from=h,u.l=null,u.d=k?k.d+1:1),0<it(p,u.to)&&(u.to=p,u.r=null,u.d=u.l?u.l.d+1:1),p=!u.r,F&&!u.l&&li(u,F),k&&p&&li(u,k)}}function li(u,h){Mu(h)||function p(k,Z){var T=Z.from,O=Z.to,q=Z.l,Z=Z.r;ii(k,T,O),q&&p(k,q),Z&&p(k,Z)}(u,h)}function Qm(u,h){var p=Yl(h),k=p.next();if(k.done)return!1;for(var F=k.value,T=Yl(u),O=T.next(F.from),q=O.value;!k.done&&!O.done;){if(it(q.from,F.to)<=0&&0<=it(q.to,F.from))return!0;it(F.from,q.from)<0?F=(k=p.next(q.from)).value:q=(O=T.next(F.from)).value}return!1}function Yl(u){var h=Mu(u)?null:{s:0,n:u};return{next:function(p){for(var k=0<arguments.length;h;)switch(h.s){case 0:if(h.s=1,k)for(;h.n.l&&it(p,h.n.from)<0;)h={up:h,n:h.n.l,s:1};else for(;h.n.l;)h={up:h,n:h.n.l,s:1};case 1:if(h.s=2,!k||it(p,h.n.to)<=0)return{value:h.n,done:!1};case 2:if(h.n.r){h.s=3,h={up:h,n:h.n.r,s:0};continue}case 3:h=h.up}return{done:!0}}}}function Ym(u){var h,p,k=(((h=u.r)===null||h===void 0?void 0:h.d)||0)-(((p=u.l)===null||p===void 0?void 0:p.d)||0),F=1<k?"r":k<-1?"l":"";F&&(h=F=="r"?"l":"r",p=r({},u),k=u[F],u.from=k.from,u.to=k.to,u[F]=k[F],p[F]=k[h],(u[h]=p).d=Xm(p)),u.d=Xm(u)}function Xm(p){var h=p.r,p=p.l;return(h?p?Math.max(h.d,p.d):h.d:p?p.d:0)+1}function Xl(u,h){return i(h).forEach(function(p){u[p]?li(u[p],h[p]):u[p]=function k(F){var T,O,q={};for(T in F)f(F,T)&&(O=F[T],q[T]=!O||typeof O!="object"||J.has(O.constructor)?O:k(O));return q}(h[p])}),u}function Lu(u,h){return u.all||h.all||Object.keys(u).some(function(p){return h[p]&&Qm(h[p],u[p])})}m(ln.prototype,((Yn={add:function(u){return li(this,u),this},addKey:function(u){return ii(this,u,u),this},addKeys:function(u){var h=this;return u.forEach(function(p){return ii(h,p,p)}),this},hasKey:function(u){var h=Yl(this).next(u).value;return h&&it(h.from,u)<=0&&0<=it(h.to,u)}})[V]=function(){return Yl(this)},Yn));var ao={},$u={},Ou=!1;function Jl(u){Xl($u,u),Ou||(Ou=!0,setTimeout(function(){Ou=!1,Uu($u,!($u={}))},0))}function Uu(u,h){h===void 0&&(h=!1);var p=new Set;if(u.all)for(var k=0,F=Object.values(ao);k<F.length;k++)Jm(O=F[k],u,p,h);else for(var T in u){var O,q=/^idb\:\/\/(.*)\/(.*)\//.exec(T);q&&(T=q[1],q=q[2],(O=ao["idb://".concat(T,"/").concat(q)])&&Jm(O,u,p,h))}p.forEach(function(Z){return Z()})}function Jm(u,h,p,k){for(var F=[],T=0,O=Object.entries(u.queries.query);T<O.length;T++){for(var q=O[T],Z=q[0],te=[],ae=0,G=q[1];ae<G.length;ae++){var de=G[ae];Lu(h,de.obsSet)?de.subscribers.forEach(function(re){return p.add(re)}):k&&te.push(de)}k&&F.push([Z,te])}if(k)for(var ee=0,oe=F;ee<oe.length;ee++){var ue=oe[ee],Z=ue[0],te=ue[1];u.queries.query[Z]=te}}function Ob(u){var h=u._state,p=u._deps.indexedDB;if(h.isBeingOpened||u.idbdb)return h.dbReadyPromise.then(function(){return h.dbOpenError?Vt(h.dbOpenError):u});h.isBeingOpened=!0,h.dbOpenError=null,h.openComplete=!1;var k=h.openCanceller,F=Math.round(10*u.verno),T=!1;function O(){if(h.openCanceller!==k)throw new pe.DatabaseClosed("db.open() was cancelled")}function q(){return new K(function(de,ee){if(O(),!p)throw new pe.MissingAPI;var oe=u.name,ue=h.autoSchema||!F?p.open(oe):p.open(oe,F);if(!ue)throw new pe.MissingAPI;ue.onerror=jr(ee),ue.onblocked=he(u._fireOnBlocked),ue.onupgradeneeded=he(function(re){var fe;ae=ue.transaction,h.autoSchema&&!u._options.allowEmptyDB?(ue.onerror=ri,ae.abort(),ue.result.close(),(fe=p.deleteDatabase(oe)).onsuccess=fe.onerror=he(function(){ee(new pe.NoSuchDatabase("Database ".concat(oe," doesnt exist")))})):(ae.onerror=jr(ee),re=re.oldVersion>Math.pow(2,62)?0:re.oldVersion,G=re<1,u.idbdb=ue.result,T&&Lb(u,ae),Mb(u,re/10,ae,ee))},ee),ue.onsuccess=he(function(){ae=null;var re,fe,ye,ve,we,De=u.idbdb=ue.result,Te=g(De.objectStoreNames);if(0<Te.length)try{var Fe=De.transaction((ve=Te).length===1?ve[0]:ve,"readonly");if(h.autoSchema)fe=De,ye=Fe,(re=u).verno=fe.version/10,ye=re._dbSchema=Hl(0,fe,ye),re._storeNames=g(fe.objectStoreNames,0),Wl(re,[re._allTables],i(ye),ye);else if(Gl(u,u._dbSchema,Fe),((we=Su(Hl(0,(we=u).idbdb,Fe),we._dbSchema)).add.length||we.change.some(function(_e){return _e.add.length||_e.change.length}))&&!T)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),De.close(),F=De.version+1,T=!0,de(q());ql(u,Fe)}catch{}Vo.push(u),De.onversionchange=he(function(_e){h.vcFired=!0,u.on("versionchange").fire(_e)}),De.onclose=he(function(_e){u.on("close").fire(_e)}),G&&(we=u._deps,Fe=oe,De=we.indexedDB,we=we.IDBKeyRange,Iu(De)||Fe===$l||Tu(De,we).put({name:Fe}).catch(be)),de()},ee)}).catch(function(de){switch(de==null?void 0:de.name){case"UnknownError":if(0<h.PR1398_maxLoop)return h.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),q();break;case"VersionError":if(0<F)return F=0,q()}return K.reject(de)})}var Z,te=h.dbReadyResolve,ae=null,G=!1;return K.race([k,(typeof navigator>"u"?K.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(de){function ee(){return indexedDB.databases().finally(de)}Z=setInterval(ee,100),ee()}).finally(function(){return clearInterval(Z)}):Promise.resolve()).then(q)]).then(function(){return O(),h.onReadyBeingFired=[],K.resolve(Ru(function(){return u.on.ready.fire(u.vip)})).then(function de(){if(0<h.onReadyBeingFired.length){var ee=h.onReadyBeingFired.reduce(ie,be);return h.onReadyBeingFired=[],K.resolve(Ru(function(){return ee(u.vip)})).then(de)}})}).finally(function(){h.openCanceller===k&&(h.onReadyBeingFired=null,h.isBeingOpened=!1)}).catch(function(de){h.dbOpenError=de;try{ae&&ae.abort()}catch{}return k===h.openCanceller&&u._close(),Vt(de)}).finally(function(){h.openComplete=!0,te()}).then(function(){var de;return G&&(de={},u.tables.forEach(function(ee){ee.schema.indexes.forEach(function(oe){oe.name&&(de["idb://".concat(u.name,"/").concat(ee.name,"/").concat(oe.name)]=new ln(-1/0,[[[]]]))}),de["idb://".concat(u.name,"/").concat(ee.name,"/")]=de["idb://".concat(u.name,"/").concat(ee.name,"/:dels")]=new ln(-1/0,[[[]]])}),vs(si).fire(de),Uu(de,!0)),u})}function Vu(u){function h(T){return u.next(T)}var p=F(h),k=F(function(T){return u.throw(T)});function F(T){return function(Z){var q=T(Z),Z=q.value;return q.done?Z:Z&&typeof Z.then=="function"?Z.then(p,k):l(Z)?Promise.all(Z).then(p,k):p(Z)}}return F(h)()}function Zl(u,h,p){for(var k=l(u)?u.slice():[u],F=0;F<p;++F)k.push(h);return k}var Ub={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(u){return r(r({},u),{table:function(h){var p=u.table(h),k=p.schema,F={},T=[];function O(G,de,ee){var oe=ai(G),ue=F[oe]=F[oe]||[],re=G==null?0:typeof G=="string"?1:G.length,fe=0<de,fe=r(r({},ee),{name:fe?"".concat(oe,"(virtual-from:").concat(ee.name,")"):ee.name,lowLevelIndex:ee,isVirtual:fe,keyTail:de,keyLength:re,extractKey:Nu(G),unique:!fe&&ee.unique});return ue.push(fe),fe.isPrimaryKey||T.push(fe),1<re&&O(re===2?G[0]:G.slice(0,re-1),de+1,ee),ue.sort(function(ye,ve){return ye.keyTail-ve.keyTail}),fe}h=O(k.primaryKey.keyPath,0,k.primaryKey),F[":id"]=[h];for(var q=0,Z=k.indexes;q<Z.length;q++){var te=Z[q];O(te.keyPath,0,te)}function ae(G){var de,ee=G.query.index;return ee.isVirtual?r(r({},G),{query:{index:ee.lowLevelIndex,range:(de=G.query.range,ee=ee.keyTail,{type:de.type===1?2:de.type,lower:Zl(de.lower,de.lowerOpen?u.MAX_KEY:u.MIN_KEY,ee),lowerOpen:!0,upper:Zl(de.upper,de.upperOpen?u.MIN_KEY:u.MAX_KEY,ee),upperOpen:!0})}}):G}return r(r({},p),{schema:r(r({},k),{primaryKey:h,indexes:T,getIndexByKeyPath:function(G){return(G=F[ai(G)])&&G[0]}}),count:function(G){return p.count(ae(G))},query:function(G){return p.query(ae(G))},openCursor:function(G){var de=G.query.index,ee=de.keyTail,oe=de.isVirtual,ue=de.keyLength;return oe?p.openCursor(ae(G)).then(function(fe){return fe&&re(fe)}):p.openCursor(G);function re(fe){return Object.create(fe,{continue:{value:function(ye){ye!=null?fe.continue(Zl(ye,G.reverse?u.MAX_KEY:u.MIN_KEY,ee)):G.unique?fe.continue(fe.key.slice(0,ue).concat(G.reverse?u.MIN_KEY:u.MAX_KEY,ee)):fe.continue()}},continuePrimaryKey:{value:function(ye,ve){fe.continuePrimaryKey(Zl(ye,u.MAX_KEY,ee),ve)}},primaryKey:{get:function(){return fe.primaryKey}},key:{get:function(){var ye=fe.key;return ue===1?ye[0]:ye.slice(0,ue)}},value:{get:function(){return fe.value}}})}}})}})}};function zu(u,h,p,k){return p=p||{},k=k||"",i(u).forEach(function(F){var T,O,q;f(h,F)?(T=u[F],O=h[F],typeof T=="object"&&typeof O=="object"&&T&&O?(q=ce(T))!==ce(O)?p[k+F]=h[F]:q==="Object"?zu(T,O,p,k+F+"."):T!==O&&(p[k+F]=h[F]):T!==O&&(p[k+F]=h[F])):p[k+F]=void 0}),i(h).forEach(function(F){f(u,F)||(p[k+F]=h[F])}),p}function qu(u,h){return h.type==="delete"?h.keys:h.keys||h.values.map(u.extractKey)}var Vb={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(u){return r(r({},u),{table:function(h){var p=u.table(h),k=p.schema.primaryKey;return r(r({},p),{mutate:function(F){var T=qe.trans,O=T.table(h).hook,q=O.deleting,Z=O.creating,te=O.updating;switch(F.type){case"add":if(Z.fire===be)break;return T._promise("readwrite",function(){return ae(F)},!0);case"put":if(Z.fire===be&&te.fire===be)break;return T._promise("readwrite",function(){return ae(F)},!0);case"delete":if(q.fire===be)break;return T._promise("readwrite",function(){return ae(F)},!0);case"deleteRange":if(q.fire===be)break;return T._promise("readwrite",function(){return function G(de,ee,oe){return p.query({trans:de,values:!1,query:{index:k,range:ee},limit:oe}).then(function(ue){var re=ue.result;return ae({type:"delete",keys:re,trans:de}).then(function(fe){return 0<fe.numFailures?Promise.reject(fe.failures[0]):re.length<oe?{failures:[],numFailures:0,lastResult:void 0}:G(de,r(r({},ee),{lower:re[re.length-1],lowerOpen:!0}),oe)})})}(F.trans,F.range,1e4)},!0)}return p.mutate(F);function ae(G){var de,ee,oe,ue=qe.trans,re=G.keys||qu(k,G);if(!re)throw new Error("Keys missing");return(G=G.type==="add"||G.type==="put"?r(r({},G),{keys:re}):r({},G)).type!=="delete"&&(G.values=o([],G.values)),G.keys&&(G.keys=o([],G.keys)),de=p,oe=re,((ee=G).type==="add"?Promise.resolve([]):de.getMany({trans:ee.trans,keys:oe,cache:"immutable"})).then(function(fe){var ye=re.map(function(ve,we){var De,Te,Fe,_e=fe[we],Ie={onerror:null,onsuccess:null};return G.type==="delete"?q.fire.call(Ie,ve,_e,ue):G.type==="add"||_e===void 0?(De=Z.fire.call(Ie,ve,G.values[we],ue),ve==null&&De!=null&&(G.keys[we]=ve=De,k.outbound||E(G.values[we],k.keyPath,ve))):(De=zu(_e,G.values[we]),(Te=te.fire.call(Ie,De,ve,_e,ue))&&(Fe=G.values[we],Object.keys(Te).forEach(function(Pe){f(Fe,Pe)?Fe[Pe]=Te[Pe]:E(Fe,Pe,Te[Pe])}))),Ie});return p.mutate(G).then(function(ve){for(var we=ve.failures,De=ve.results,Te=ve.numFailures,ve=ve.lastResult,Fe=0;Fe<re.length;++Fe){var _e=(De||re)[Fe],Ie=ye[Fe];_e==null?Ie.onerror&&Ie.onerror(we[Fe]):Ie.onsuccess&&Ie.onsuccess(G.type==="put"&&fe[Fe]?G.values[Fe]:_e)}return{failures:we,results:De,numFailures:Te,lastResult:ve}}).catch(function(ve){return ye.forEach(function(we){return we.onerror&&we.onerror(ve)}),Promise.reject(ve)})})}}})}})}};function Zm(u,h,p){try{if(!h||h.keys.length<u.length)return null;for(var k=[],F=0,T=0;F<h.keys.length&&T<u.length;++F)it(h.keys[F],u[T])===0&&(k.push(p?X(h.values[F]):h.values[F]),++T);return k.length===u.length?k:null}catch{return null}}var zb={stack:"dbcore",level:-1,create:function(u){return{table:function(h){var p=u.table(h);return r(r({},p),{getMany:function(k){if(!k.cache)return p.getMany(k);var F=Zm(k.keys,k.trans._cache,k.cache==="clone");return F?K.resolve(F):p.getMany(k).then(function(T){return k.trans._cache={keys:k.keys,values:k.cache==="clone"?X(T):T},T})},mutate:function(k){return k.type!=="add"&&(k.trans._cache=null),p.mutate(k)}})}}}};function ep(u,h){return u.trans.mode==="readonly"&&!!u.subscr&&!u.trans.explicit&&u.trans.db._options.cache!=="disabled"&&!h.schema.primaryKey.outbound}function tp(u,h){switch(u){case"query":return h.values&&!h.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var qb={stack:"dbcore",level:0,name:"Observability",create:function(u){var h=u.schema.name,p=new ln(u.MIN_KEY,u.MAX_KEY);return r(r({},u),{transaction:function(k,F,T){if(qe.subscr&&F!=="readonly")throw new pe.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(qe.querier));return u.transaction(k,F,T)},table:function(k){var F=u.table(k),T=F.schema,O=T.primaryKey,G=T.indexes,q=O.extractKey,Z=O.outbound,te=O.autoIncrement&&G.filter(function(ee){return ee.compound&&ee.keyPath.includes(O.keyPath)}),ae=r(r({},F),{mutate:function(ee){function oe(Pe){return Pe="idb://".concat(h,"/").concat(k,"/").concat(Pe),ve[Pe]||(ve[Pe]=new ln)}var ue,re,fe,ye=ee.trans,ve=ee.mutatedParts||(ee.mutatedParts={}),we=oe(""),De=oe(":dels"),Te=ee.type,Ie=ee.type==="deleteRange"?[ee.range]:ee.type==="delete"?[ee.keys]:ee.values.length<50?[qu(O,ee).filter(function(Pe){return Pe}),ee.values]:[],Fe=Ie[0],_e=Ie[1],Ie=ee.trans._cache;return l(Fe)?(we.addKeys(Fe),(Ie=Te==="delete"||Fe.length===_e.length?Zm(Fe,Ie):null)||De.addKeys(Fe),(Ie||_e)&&(ue=oe,re=Ie,fe=_e,T.indexes.forEach(function(Pe){var Oe=ue(Pe.name||"");function et(st){return st!=null?Pe.extractKey(st):null}function rt(st){return Pe.multiEntry&&l(st)?st.forEach(function(Ln){return Oe.addKey(Ln)}):Oe.addKey(st)}(re||fe).forEach(function(st,cn){var Ze=re&&et(re[cn]),cn=fe&&et(fe[cn]);it(Ze,cn)!==0&&(Ze!=null&&rt(Ze),cn!=null&&rt(cn))})}))):Fe?(_e={from:(_e=Fe.lower)!==null&&_e!==void 0?_e:u.MIN_KEY,to:(_e=Fe.upper)!==null&&_e!==void 0?_e:u.MAX_KEY},De.add(_e),we.add(_e)):(we.add(p),De.add(p),T.indexes.forEach(function(Pe){return oe(Pe.name).add(p)})),F.mutate(ee).then(function(Pe){return!Fe||ee.type!=="add"&&ee.type!=="put"||(we.addKeys(Pe.results),te&&te.forEach(function(Oe){for(var et=ee.values.map(function(Ze){return Oe.extractKey(Ze)}),rt=Oe.keyPath.findIndex(function(Ze){return Ze===O.keyPath}),st=0,Ln=Pe.results.length;st<Ln;++st)et[st][rt]=Pe.results[st];oe(Oe.name).addKeys(et)})),ye.mutatedParts=Xl(ye.mutatedParts||{},ve),Pe})}}),G=function(oe){var ue=oe.query,oe=ue.index,ue=ue.range;return[oe,new ln((oe=ue.lower)!==null&&oe!==void 0?oe:u.MIN_KEY,(ue=ue.upper)!==null&&ue!==void 0?ue:u.MAX_KEY)]},de={get:function(ee){return[O,new ln(ee.key)]},getMany:function(ee){return[O,new ln().addKeys(ee.keys)]},count:G,query:G,openCursor:G};return i(de).forEach(function(ee){ae[ee]=function(oe){var ue=qe.subscr,re=!!ue,fe=ep(qe,F)&&tp(ee,oe)?oe.obsSet={}:ue;if(re){var ye=function(_e){return _e="idb://".concat(h,"/").concat(k,"/").concat(_e),fe[_e]||(fe[_e]=new ln)},ve=ye(""),we=ye(":dels"),ue=de[ee](oe),re=ue[0],ue=ue[1];if((ee==="query"&&re.isPrimaryKey&&!oe.values?we:ye(re.name||"")).add(ue),!re.isPrimaryKey){if(ee!=="count"){var De=ee==="query"&&Z&&oe.values&&F.query(r(r({},oe),{values:!1}));return F[ee].apply(this,arguments).then(function(_e){if(ee==="query"){if(Z&&oe.values)return De.then(function(et){return et=et.result,ve.addKeys(et),_e});var Ie=oe.values?_e.result.map(q):_e.result;(oe.values?ve:we).addKeys(Ie)}else if(ee==="openCursor"){var Pe=_e,Oe=oe.values;return Pe&&Object.create(Pe,{key:{get:function(){return we.addKey(Pe.primaryKey),Pe.key}},primaryKey:{get:function(){var et=Pe.primaryKey;return we.addKey(et),et}},value:{get:function(){return Oe&&ve.addKey(Pe.primaryKey),Pe.value}}})}return _e})}we.add(p)}}return F[ee].apply(this,arguments)}}),ae}})}};function np(u,h,p){if(p.numFailures===0)return h;if(h.type==="deleteRange")return null;var k=h.keys?h.keys.length:"values"in h&&h.values?h.values.length:1;return p.numFailures===k?null:(h=r({},h),l(h.keys)&&(h.keys=h.keys.filter(function(F,T){return!(T in p.failures)})),"values"in h&&l(h.values)&&(h.values=h.values.filter(function(F,T){return!(T in p.failures)})),h)}function Wu(u,h){return p=u,((k=h).lower===void 0||(k.lowerOpen?0<it(p,k.lower):0<=it(p,k.lower)))&&(u=u,(h=h).upper===void 0||(h.upperOpen?it(u,h.upper)<0:it(u,h.upper)<=0));var p,k}function rp(u,h,de,k,F,T){if(!de||de.length===0)return u;var O=h.query.index,q=O.multiEntry,Z=h.query.range,te=k.schema.primaryKey.extractKey,ae=O.extractKey,G=(O.lowLevelIndex||O).extractKey,de=de.reduce(function(ee,oe){var ue=ee,re=[];if(oe.type==="add"||oe.type==="put")for(var fe=new ln,ye=oe.values.length-1;0<=ye;--ye){var ve,we=oe.values[ye],De=te(we);fe.hasKey(De)||(ve=ae(we),(q&&l(ve)?ve.some(function(Pe){return Wu(Pe,Z)}):Wu(ve,Z))&&(fe.addKey(De),re.push(we)))}switch(oe.type){case"add":var Te=new ln().addKeys(h.values?ee.map(function(Oe){return te(Oe)}):ee),ue=ee.concat(h.values?re.filter(function(Oe){return Oe=te(Oe),!Te.hasKey(Oe)&&(Te.addKey(Oe),!0)}):re.map(function(Oe){return te(Oe)}).filter(function(Oe){return!Te.hasKey(Oe)&&(Te.addKey(Oe),!0)}));break;case"put":var Fe=new ln().addKeys(oe.values.map(function(Oe){return te(Oe)}));ue=ee.filter(function(Oe){return!Fe.hasKey(h.values?te(Oe):Oe)}).concat(h.values?re:re.map(function(Oe){return te(Oe)}));break;case"delete":var _e=new ln().addKeys(oe.keys);ue=ee.filter(function(Oe){return!_e.hasKey(h.values?te(Oe):Oe)});break;case"deleteRange":var Ie=oe.range;ue=ee.filter(function(Oe){return!Wu(te(Oe),Ie)})}return ue},u);return de===u?u:(de.sort(function(ee,oe){return it(G(ee),G(oe))||it(te(ee),te(oe))}),h.limit&&h.limit<1/0&&(de.length>h.limit?de.length=h.limit:u.length===h.limit&&de.length<h.limit&&(F.dirty=!0)),T?Object.freeze(de):de)}function sp(u,h){return it(u.lower,h.lower)===0&&it(u.upper,h.upper)===0&&!!u.lowerOpen==!!h.lowerOpen&&!!u.upperOpen==!!h.upperOpen}function Wb(u,h){return function(p,k,F,T){if(p===void 0)return k!==void 0?-1:0;if(k===void 0)return 1;if((k=it(p,k))===0){if(F&&T)return 0;if(F)return 1;if(T)return-1}return k}(u.lower,h.lower,u.lowerOpen,h.lowerOpen)<=0&&0<=function(p,k,F,T){if(p===void 0)return k!==void 0?1:0;if(k===void 0)return-1;if((k=it(p,k))===0){if(F&&T)return 0;if(F)return-1;if(T)return 1}return k}(u.upper,h.upper,u.upperOpen,h.upperOpen)}function Kb(u,h,p,k){u.subscribers.add(p),k.addEventListener("abort",function(){var F,T;u.subscribers.delete(p),u.subscribers.size===0&&(F=u,T=h,setTimeout(function(){F.subscribers.size===0&&ne(T,F)},3e3))})}var Hb={stack:"dbcore",level:0,name:"Cache",create:function(u){var h=u.schema.name;return r(r({},u),{transaction:function(p,k,F){var T,O,q=u.transaction(p,k,F);return k==="readwrite"&&(O=(T=new AbortController).signal,F=function(Z){return function(){if(T.abort(),k==="readwrite"){for(var te=new Set,ae=0,G=p;ae<G.length;ae++){var de=G[ae],ee=ao["idb://".concat(h,"/").concat(de)];if(ee){var oe=u.table(de),ue=ee.optimisticOps.filter(function(Oe){return Oe.trans===q});if(q._explicit&&Z&&q.mutatedParts)for(var re=0,fe=Object.values(ee.queries.query);re<fe.length;re++)for(var ye=0,ve=(Te=fe[re]).slice();ye<ve.length;ye++)Lu((Fe=ve[ye]).obsSet,q.mutatedParts)&&(ne(Te,Fe),Fe.subscribers.forEach(function(Oe){return te.add(Oe)}));else if(0<ue.length){ee.optimisticOps=ee.optimisticOps.filter(function(Oe){return Oe.trans!==q});for(var we=0,De=Object.values(ee.queries.query);we<De.length;we++)for(var Te,Fe,_e,Ie=0,Pe=(Te=De[we]).slice();Ie<Pe.length;Ie++)(Fe=Pe[Ie]).res!=null&&q.mutatedParts&&(Z&&!Fe.dirty?(_e=Object.isFrozen(Fe.res),_e=rp(Fe.res,Fe.req,ue,oe,Fe,_e),Fe.dirty?(ne(Te,Fe),Fe.subscribers.forEach(function(Oe){return te.add(Oe)})):_e!==Fe.res&&(Fe.res=_e,Fe.promise=K.resolve({result:_e}))):(Fe.dirty&&ne(Te,Fe),Fe.subscribers.forEach(function(Oe){return te.add(Oe)})))}}}te.forEach(function(Oe){return Oe()})}}},q.addEventListener("abort",F(!1),{signal:O}),q.addEventListener("error",F(!1),{signal:O}),q.addEventListener("complete",F(!0),{signal:O})),q},table:function(p){var k=u.table(p),F=k.schema.primaryKey;return r(r({},k),{mutate:function(T){var O=qe.trans;if(F.outbound||O.db._options.cache==="disabled"||O.explicit||O.idbtrans.mode!=="readwrite")return k.mutate(T);var q=ao["idb://".concat(h,"/").concat(p)];return q?(O=k.mutate(T),T.type!=="add"&&T.type!=="put"||!(50<=T.values.length||qu(F,T).some(function(Z){return Z==null}))?(q.optimisticOps.push(T),T.mutatedParts&&Jl(T.mutatedParts),O.then(function(Z){0<Z.numFailures&&(ne(q.optimisticOps,T),(Z=np(0,T,Z))&&q.optimisticOps.push(Z),T.mutatedParts&&Jl(T.mutatedParts))}),O.catch(function(){ne(q.optimisticOps,T),T.mutatedParts&&Jl(T.mutatedParts)})):O.then(function(Z){var te=np(0,r(r({},T),{values:T.values.map(function(ae,G){var de;return Z.failures[G]?ae:(ae=(de=F.keyPath)!==null&&de!==void 0&&de.includes(".")?X(ae):r({},ae),E(ae,F.keyPath,Z.results[G]),ae)})}),Z);q.optimisticOps.push(te),queueMicrotask(function(){return T.mutatedParts&&Jl(T.mutatedParts)})}),O):k.mutate(T)},query:function(T){if(!ep(qe,k)||!tp("query",T))return k.query(T);var O=((te=qe.trans)===null||te===void 0?void 0:te.db._options.cache)==="immutable",G=qe,q=G.requery,Z=G.signal,te=function(oe,ue,re,fe){var ye=ao["idb://".concat(oe,"/").concat(ue)];if(!ye)return[];if(!(ue=ye.queries[re]))return[null,!1,ye,null];var ve=ue[(fe.query?fe.query.index.name:null)||""];if(!ve)return[null,!1,ye,null];switch(re){case"query":var we=ve.find(function(De){return De.req.limit===fe.limit&&De.req.values===fe.values&&sp(De.req.query.range,fe.query.range)});return we?[we,!0,ye,ve]:[ve.find(function(De){return("limit"in De.req?De.req.limit:1/0)>=fe.limit&&(!fe.values||De.req.values)&&Wb(De.req.query.range,fe.query.range)}),!1,ye,ve];case"count":return we=ve.find(function(De){return sp(De.req.query.range,fe.query.range)}),[we,!!we,ye,ve]}}(h,p,"query",T),ae=te[0],G=te[1],de=te[2],ee=te[3];return ae&&G?ae.obsSet=T.obsSet:(G=k.query(T).then(function(oe){var ue=oe.result;if(ae&&(ae.res=ue),O){for(var re=0,fe=ue.length;re<fe;++re)Object.freeze(ue[re]);Object.freeze(ue)}else oe.result=X(ue);return oe}).catch(function(oe){return ee&&ae&&ne(ee,ae),Promise.reject(oe)}),ae={obsSet:T.obsSet,promise:G,subscribers:new Set,type:"query",req:T,dirty:!1},ee?ee.push(ae):(ee=[ae],(de=de||(ao["idb://".concat(h,"/").concat(p)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[T.query.index.name||""]=ee)),Kb(ae,ee,q,Z),ae.promise.then(function(oe){return{result:rp(oe.result,T,de==null?void 0:de.optimisticOps,k,ae,O)}})}})}})}};function ec(u,h){return new Proxy(u,{get:function(p,k,F){return k==="db"?h:Reflect.get(p,k,F)}})}var zr=(zt.prototype.version=function(u){if(isNaN(u)||u<.1)throw new pe.Type("Given version is not a positive number");if(u=Math.round(10*u)/10,this.idbdb||this._state.isBeingOpened)throw new pe.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,u);var h=this._versions,p=h.filter(function(k){return k._cfg.version===u})[0];return p||(p=new this.Version(u),h.push(p),h.sort(Rb),p.stores({}),this._state.autoSchema=!1,p)},zt.prototype._whenReady=function(u){var h=this;return this.idbdb&&(this._state.openComplete||qe.letThrough||this._vip)?u():new K(function(p,k){if(h._state.openComplete)return k(new pe.DatabaseClosed(h._state.dbOpenError));if(!h._state.isBeingOpened){if(!h._state.autoOpen)return void k(new pe.DatabaseClosed);h.open().catch(be)}h._state.dbReadyPromise.then(p,k)}).then(u)},zt.prototype.use=function(u){var h=u.stack,p=u.create,k=u.level,F=u.name;return F&&this.unuse({stack:h,name:F}),u=this._middlewares[h]||(this._middlewares[h]=[]),u.push({stack:h,create:p,level:k??10,name:F}),u.sort(function(T,O){return T.level-O.level}),this},zt.prototype.unuse=function(u){var h=u.stack,p=u.name,k=u.create;return h&&this._middlewares[h]&&(this._middlewares[h]=this._middlewares[h].filter(function(F){return k?F.create!==k:!!p&&F.name!==p})),this},zt.prototype.open=function(){var u=this;return ro(gn,function(){return Ob(u)})},zt.prototype._close=function(){var u=this._state,h=Vo.indexOf(this);if(0<=h&&Vo.splice(h,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}u.isBeingOpened||(u.dbReadyPromise=new K(function(p){u.dbReadyResolve=p}),u.openCanceller=new K(function(p,k){u.cancelOpen=k}))},zt.prototype.close=function(p){var h=(p===void 0?{disableAutoOpen:!0}:p).disableAutoOpen,p=this._state;h?(p.isBeingOpened&&p.cancelOpen(new pe.DatabaseClosed),this._close(),p.autoOpen=!1,p.dbOpenError=new pe.DatabaseClosed):(this._close(),p.autoOpen=this._options.autoOpen||p.isBeingOpened,p.openComplete=!1,p.dbOpenError=null)},zt.prototype.delete=function(u){var h=this;u===void 0&&(u={disableAutoOpen:!0});var p=0<arguments.length&&typeof arguments[0]!="object",k=this._state;return new K(function(F,T){function O(){h.close(u);var q=h._deps.indexedDB.deleteDatabase(h.name);q.onsuccess=he(function(){var Z,te,ae;Z=h._deps,te=h.name,ae=Z.indexedDB,Z=Z.IDBKeyRange,Iu(ae)||te===$l||Tu(ae,Z).delete(te).catch(be),F()}),q.onerror=jr(T),q.onblocked=h._fireOnBlocked}if(p)throw new pe.InvalidArgument("Invalid closeOptions argument to db.delete()");k.isBeingOpened?k.dbReadyPromise.then(O):O()})},zt.prototype.backendDB=function(){return this.idbdb},zt.prototype.isOpen=function(){return this.idbdb!==null},zt.prototype.hasBeenClosed=function(){var u=this._state.dbOpenError;return u&&u.name==="DatabaseClosed"},zt.prototype.hasFailed=function(){return this._state.dbOpenError!==null},zt.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(zt.prototype,"tables",{get:function(){var u=this;return i(this._allTables).map(function(h){return u._allTables[h]})},enumerable:!1,configurable:!0}),zt.prototype.transaction=function(){var u=(function(h,p,k){var F=arguments.length;if(F<2)throw new pe.InvalidArgument("Too few arguments");for(var T=new Array(F-1);--F;)T[F-1]=arguments[F];return k=T.pop(),[h,L(T),k]}).apply(this,arguments);return this._transaction.apply(this,u)},zt.prototype._transaction=function(u,h,p){var k=this,F=qe.trans;F&&F.db===this&&u.indexOf("!")===-1||(F=null);var T,O,q=u.indexOf("?")!==-1;u=u.replace("!","").replace("?","");try{if(O=h.map(function(te){if(te=te instanceof k.Table?te.name:te,typeof te!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return te}),u=="r"||u===wu)T=wu;else{if(u!="rw"&&u!=Cu)throw new pe.InvalidArgument("Invalid transaction mode: "+u);T=Cu}if(F){if(F.mode===wu&&T===Cu){if(!q)throw new pe.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");F=null}F&&O.forEach(function(te){if(F&&F.storeNames.indexOf(te)===-1){if(!q)throw new pe.SubTransaction("Table "+te+" not included in parent transaction.");F=null}}),q&&F&&!F.active&&(F=null)}}catch(te){return F?F._promise(null,function(ae,G){G(te)}):Vt(te)}var Z=(function te(ae,G,de,ee,oe){return K.resolve().then(function(){var ue=qe.transless||qe,re=ae._createTransaction(G,de,ae._dbSchema,ee);if(re.explicit=!0,ue={trans:re,transless:ue},ee)re.idbtrans=ee.idbtrans;else try{re.create(),re.idbtrans._explicit=!0,ae._state.PR1398_maxLoop=3}catch(ve){return ve.name===I.InvalidState&&ae.isOpen()&&0<--ae._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),ae.close({disableAutoOpen:!1}),ae.open().then(function(){return te(ae,G,de,null,oe)})):Vt(ve)}var fe,ye=U(oe);return ye&&Uo(),ue=K.follow(function(){var ve;(fe=oe.call(re,re))&&(ye?(ve=ps.bind(null,null),fe.then(ve,ve)):typeof fe.next=="function"&&typeof fe.throw=="function"&&(fe=Vu(fe)))},ue),(fe&&typeof fe.then=="function"?K.resolve(fe).then(function(ve){return re.active?ve:Vt(new pe.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):ue.then(function(){return fe})).then(function(ve){return ee&&re._resolve(),re._completion.then(function(){return ve})}).catch(function(ve){return re._reject(ve),Vt(ve)})})}).bind(null,this,T,O,F,p);return F?F._promise(T,Z,"lock"):qe.trans?ro(qe.transless,function(){return k._whenReady(Z)}):this._whenReady(Z)},zt.prototype.table=function(u){if(!f(this._allTables,u))throw new pe.InvalidTable("Table ".concat(u," does not exist"));return this._allTables[u]},zt);function zt(u,h){var p=this;this._middlewares={},this.verno=0;var k=zt.dependencies;this._options=h=r({addons:zt.addons,autoOpen:!0,indexedDB:k.indexedDB,IDBKeyRange:k.IDBKeyRange,cache:"cloned"},h),this._deps={indexedDB:h.indexedDB,IDBKeyRange:h.IDBKeyRange},k=h.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var F,T,O,q,Z,te={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:be,dbReadyPromise:null,cancelOpen:be,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:h.autoOpen};te.dbReadyPromise=new K(function(G){te.dbReadyResolve=G}),te.openCanceller=new K(function(G,de){te.cancelOpen=de}),this._state=te,this.name=u,this.on=ei(this,"populate","blocked","versionchange","close",{ready:[ie,be]}),this.on.ready.subscribe=b(this.on.ready.subscribe,function(G){return function(de,ee){zt.vip(function(){var oe,ue=p._state;ue.openComplete?(ue.dbOpenError||K.resolve().then(de),ee&&G(de)):ue.onReadyBeingFired?(ue.onReadyBeingFired.push(de),ee&&G(de)):(G(de),oe=p,ee||G(function re(){oe.on.ready.unsubscribe(de),oe.on.ready.unsubscribe(re)}))})}}),this.Collection=(F=this,ti(Fb.prototype,function(fe,re){this.db=F;var ee=Im,oe=null;if(re)try{ee=re()}catch(ye){oe=ye}var ue=fe._ctx,re=ue.table,fe=re.hook.reading.fire;this._ctx={table:re,index:ue.index,isPrimKey:!ue.index||re.schema.primKey.keyPath&&ue.index===re.schema.primKey.name,range:ee,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:oe,or:ue.or,valueMapper:fe!==Be?fe:null}})),this.Table=(T=this,ti($m.prototype,function(G,de,ee){this.db=T,this._tx=ee,this.name=G,this.schema=de,this.hook=T._allTables[G]?T._allTables[G].hook:ei(null,{creating:[He,be],reading:[Re,Be],updating:[mt,be],deleting:[nt,be]})})),this.Transaction=(O=this,ti(Sb.prototype,function(G,de,ee,oe,ue){var re=this;this.db=O,this.mode=G,this.storeNames=de,this.schema=ee,this.chromeTransactionDurability=oe,this.idbtrans=null,this.on=ei(this,"complete","error","abort"),this.parent=ue||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new K(function(fe,ye){re._resolve=fe,re._reject=ye}),this._completion.then(function(){re.active=!1,re.on.complete.fire()},function(fe){var ye=re.active;return re.active=!1,re.on.error.fire(fe),re.parent?re.parent._reject(fe):ye&&re.idbtrans&&re.idbtrans.abort(),Vt(fe)})})),this.Version=(q=this,ti($b.prototype,function(G){this.db=q,this._cfg={version:G,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(Z=this,ti(qm.prototype,function(G,de,ee){if(this.db=Z,this._ctx={table:G,index:de===":id"?null:de,or:ee},this._cmp=this._ascending=it,this._descending=function(oe,ue){return it(ue,oe)},this._max=function(oe,ue){return 0<it(oe,ue)?oe:ue},this._min=function(oe,ue){return it(oe,ue)<0?oe:ue},this._IDBKeyRange=Z._deps.IDBKeyRange,!this._IDBKeyRange)throw new pe.MissingAPI})),this.on("versionchange",function(G){0<G.newVersion?console.warn("Another connection wants to upgrade database '".concat(p.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(p.name,"'. Closing db now to resume the delete request.")),p.close({disableAutoOpen:!1})}),this.on("blocked",function(G){!G.newVersion||G.newVersion<G.oldVersion?console.warn("Dexie.delete('".concat(p.name,"') was blocked")):console.warn("Upgrade '".concat(p.name,"' blocked by other connection holding version ").concat(G.oldVersion/10))}),this._maxKey=oi(h.IDBKeyRange),this._createTransaction=function(G,de,ee,oe){return new p.Transaction(G,de,ee,p._options.chromeTransactionDurability,oe)},this._fireOnBlocked=function(G){p.on("blocked").fire(G),Vo.filter(function(de){return de.name===p.name&&de!==p&&!de._state.vcFired}).map(function(de){return de.on("versionchange").fire(G)})},this.use(zb),this.use(Hb),this.use(qb),this.use(Ub),this.use(Vb);var ae=new Proxy(this,{get:function(G,de,ee){if(de==="_vip")return!0;if(de==="table")return function(ue){return ec(p.table(ue),ae)};var oe=Reflect.get(G,de,ee);return oe instanceof $m?ec(oe,ae):de==="tables"?oe.map(function(ue){return ec(ue,ae)}):de==="_createTransaction"?function(){return ec(oe.apply(this,arguments),ae)}:oe}});this.vip=ae,k.forEach(function(G){return G(p)})}var tc,Yn=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",Gb=(Ku.prototype.subscribe=function(u,h,p){return this._subscribe(u&&typeof u!="function"?u:{next:u,error:h,complete:p})},Ku.prototype[Yn]=function(){return this},Ku);function Ku(u){this._subscribe=u}try{tc={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{tc={indexedDB:null,IDBKeyRange:null}}function op(u){var h,p=!1,k=new Gb(function(F){var T=U(u),O,q=!1,Z={},te={},ae={get closed(){return q},unsubscribe:function(){q||(q=!0,O&&O.abort(),G&&vs.storagemutated.unsubscribe(ee))}};F.start&&F.start(ae);var G=!1,de=function(){return bu(oe)},ee=function(ue){Xl(Z,ue),Lu(te,Z)&&de()},oe=function(){var ue,re,fe;!q&&tc.indexedDB&&(Z={},ue={},O&&O.abort(),O=new AbortController,fe=function(ye){var ve=xt();try{T&&Uo();var we=ms(u,ye);return we=T?we.finally(ps):we}finally{ve&&wt()}}(re={subscr:ue,signal:O.signal,requery:de,querier:u,trans:null}),Promise.resolve(fe).then(function(ye){p=!0,h=ye,q||re.signal.aborted||(Z={},function(ve){for(var we in ve)if(f(ve,we))return;return 1}(te=ue)||G||(vs(si,ee),G=!0),bu(function(){return!q&&F.next&&F.next(ye)}))},function(ye){p=!1,["DatabaseClosedError","AbortError"].includes(ye==null?void 0:ye.name)||q||bu(function(){q||F.error&&F.error(ye)})}))};return setTimeout(de,0),ae});return k.hasValue=function(){return p},k.getValue=function(){return h},k}var io=zr;function Hu(u){var h=Es;try{Es=!0,vs.storagemutated.fire(u),Uu(u,!0)}finally{Es=h}}m(io,r(r({},ge),{delete:function(u){return new io(u,{addons:[]}).delete()},exists:function(u){return new io(u,{addons:[]}).open().then(function(h){return h.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(u){try{return h=io.dependencies,p=h.indexedDB,h=h.IDBKeyRange,(Iu(p)?Promise.resolve(p.databases()).then(function(k){return k.map(function(F){return F.name}).filter(function(F){return F!==$l})}):Tu(p,h).toCollection().primaryKeys()).then(u)}catch{return Vt(new pe.MissingAPI)}var h,p},defineClass:function(){return function(u){c(this,u)}},ignoreTransaction:function(u){return qe.trans?ro(qe.transless,u):u()},vip:Ru,async:function(u){return function(){try{var h=Vu(u.apply(this,arguments));return h&&typeof h.then=="function"?h:K.resolve(h)}catch(p){return Vt(p)}}},spawn:function(u,h,p){try{var k=Vu(u.apply(p,h||[]));return k&&typeof k.then=="function"?k:K.resolve(k)}catch(F){return Vt(F)}},currentTransaction:{get:function(){return qe.trans||null}},waitFor:function(u,h){return h=K.resolve(typeof u=="function"?io.ignoreTransaction(u):u).timeout(h||6e4),qe.trans?qe.trans.waitFor(h):h},Promise:K,debug:{get:function(){return Ne},set:function(u){ze(u)}},derive:C,extend:c,props:m,override:b,Events:ei,on:vs,liveQuery:op,extendObservabilitySet:Xl,getByKeyPath:w,setByKeyPath:E,delByKeyPath:function(u,h){typeof h=="string"?E(u,h,void 0):"length"in h&&[].map.call(h,function(p){E(u,p,void 0)})},shallowClone:N,deepClone:X,getObjectDiff:zu,cmp:it,asap:D,minKey:-1/0,addons:[],connections:Vo,errnames:I,dependencies:tc,cache:ao,semVer:"4.0.11",version:"4.0.11".split(".").map(function(u){return parseInt(u)}).reduce(function(u,h,p){return u+h/Math.pow(10,2*p)})})),io.maxKey=oi(io.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(vs(si,function(u){Es||(u=new CustomEvent(ku,{detail:u}),Es=!0,dispatchEvent(u),Es=!1)}),addEventListener(ku,function(u){u=u.detail,Es||Hu(u)}));var Wo,Es=!1,ap=function(){};return typeof BroadcastChannel<"u"&&((ap=function(){(Wo=new BroadcastChannel(ku)).onmessage=function(u){return u.data&&Hu(u.data)}})(),typeof Wo.unref=="function"&&Wo.unref(),vs(si,function(u){Es||Wo.postMessage(u)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(u){if(!zr.disableBfCache&&u.persisted){Ne&&console.debug("Dexie: handling persisted pagehide"),Wo!=null&&Wo.close();for(var h=0,p=Vo;h<p.length;h++)p[h].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(u){!zr.disableBfCache&&u.persisted&&(Ne&&console.debug("Dexie: handling persisted pageshow"),ap(),Hu({all:new ln(-1/0,[[]])}))})),K.rejectionMapper=function(u,h){return!u||u instanceof R||u instanceof TypeError||u instanceof SyntaxError||!u.name||!Ce[u.name]?u:(h=new Ce[u.name](h||u.message,u),"stack"in u&&y(h,"stack",{get:function(){return this.inner.stack}}),h)},ze(Ne),r(zr,Object.freeze({__proto__:null,Dexie:zr,liveQuery:op,Entity:Rm,cmp:it,PropModification:ni,replacePrefix:function(u,h){return new ni({replacePrefix:[u,h]})},add:function(u){return new ni({add:u})},remove:function(u){return new ni({remove:u})},default:zr,RangeSet:ln,mergeRanges:li,rangesOverlap:Qm}),{default:zr}),zr})})(S1);var DA=S1.exports;const lh=M0(DA),ny=Symbol.for("Dexie"),D0=globalThis[ny]||(globalThis[ny]=lh);if(lh.semVer!==D0.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${lh.semVer} and ${D0.semVer}`);const{liveQuery:O_,mergeRanges:U_,rangesOverlap:V_,RangeSet:z_,cmp:q_,Entity:W_,PropModification:K_,replacePrefix:H_,add:G_,remove:Q_}=D0,zs=Vf(e=>({status:"idle",lastSync:null,isOnline:!0,pendingChanges:0,setSyncStatus:t=>e({status:t}),setLastSyncTime:t=>e({lastSync:t}),setIsOnline:t=>e({isOnline:t}),setPendingChanges:t=>e({pendingChanges:t})}));class FA extends D0{constructor(){super("HybridDB");Dr(this,"events");Dr(this,"attendees");Dr(this,"luckyDrawWinners");Dr(this,"companies");Dr(this,"company_logos");Dr(this,"syncQueue");this.version(5).stores({events:"id, company_id, name, date, mode, lastSynced, syncStatus",attendees:"id, event_id, name, email, checked_in, lastSynced, syncStatus",luckyDrawWinners:"id, event_id, winner_name, lastSynced, syncStatus",companies:"id, name, lastSynced, syncStatus",company_logos:"id",syncQueue:"id, table, action, timestamp"})}}const gt=new FA,Eo=class Eo{constructor(){Dr(this,"onlineStatus",null);Dr(this,"listeners",[]);this.setupListeners()}static getInstance(){return Eo.instance||(Eo.instance=new Eo),Eo.instance}setupListeners(){window.addEventListener("online",()=>this.setOnlineStatus(!0)),window.addEventListener("offline",()=>this.setOnlineStatus(!1)),setInterval(()=>{this.checkConnectivity()},3e4),this.checkConnectivity()}async checkConnectivity(){try{const{data:t,error:n}=await le.from("events").select("id").limit(1);this.setOnlineStatus(!n)}catch{this.setOnlineStatus(!1)}}setOnlineStatus(t){this.onlineStatus!==t&&(this.onlineStatus=t,this.notifyListeners(t))}isOnline(){return navigator.onLine?this.onlineStatus===null?!1:this.onlineStatus:(this.onlineStatus!==!1&&this.setOnlineStatus(!1),!1)}addListener(t){this.listeners.push(t)}removeListener(t){const n=this.listeners.indexOf(t);n>-1&&this.listeners.splice(n,1)}notifyListeners(t){this.listeners.forEach(n=>n(t))}};Dr(Eo,"instance");let F0=Eo;class xo{static async addToQueue(t,n,r){const o={id:crypto.randomUUID(),table:t,action:n,data:r,timestamp:new Date().toISOString()};await gt.syncQueue.add(o),zs.getState().setPendingChanges(await gt.syncQueue.count())}static async processQueue(){const t=await gt.syncQueue.toArray(),{setSyncStatus:n,setLastSyncTime:r}=zs.getState();if(t.length!==0){n("syncing");try{for(const o of t)try{switch(o.action){case"create":await le.from(o.table).insert([o.data]);break;case"update":await le.from(o.table).update(o.data).eq("id",o.data.id);break;case"delete":await le.from(o.table).delete().eq("id",o.data.id);break}await gt.syncQueue.delete(o.id)}catch(a){console.error(`Failed to sync ${o.action} on ${o.table}:`,a)}n("success"),r(new Date().toISOString()),zs.getState().setPendingChanges(await gt.syncQueue.count())}catch(o){n("error"),console.error("Sync queue processing failed:",o)}}}}const Wf=()=>{const{mode:e,setMode:t}=Sl(),n=F0.getInstance(),r=async(w,E)=>{if(n.isOnline())try{const M=await E.where("syncStatus").anyOf(["pending","error"]).toArray();for(const se of M)try{const{error:X}=await le.from(w).upsert([se],{onConflict:"id"});X||await E.update(se.id,{syncStatus:"synced",lastSynced:new Date().toISOString()})}catch(X){console.error(`Failed to sync ${w} record:`,X)}const{data:L,error:J}=await le.from(w).select("*").order("created_at",{ascending:!1});if(!J&&L)for(const se of L){const X=await E.get(se.id);(!X||se.lastSynced&&(!X.lastSynced||se.lastSynced>X.lastSynced))&&await E.put({...se,syncStatus:"synced",lastSynced:new Date().toISOString()})}}catch(M){console.error(`Error syncing ${w}:`,M)}},o=async()=>{const{setSyncStatus:w,setLastSyncTime:E}=zs.getState();if(!n.isOnline()){w("offline");return}w("syncing");try{await xo.processQueue(),await Promise.all([r("events",gt.events),r("attendees",gt.attendees),r("lucky_draw_winners",gt.luckyDrawWinners),r("companies",gt.companies)]),w("success"),E(new Date().toISOString())}catch(N){w("error"),console.error("Sync failed:",N)}},a=async(w,E)=>{const N=n.isOnline(),M={...E,id:E.id||crypto.randomUUID(),created_at:E.created_at||new Date().toISOString(),syncStatus:N?"synced":"pending",lastSynced:N?new Date().toISOString():null,isLocal:!N},L=gt.table(w);if(await L.add(M),N)try{await le.from(w).insert([M]),await L.update(M.id,{syncStatus:"synced"})}catch{await L.update(M.id,{syncStatus:"error"}),await xo.addToQueue(w,"create",M)}else await xo.addToQueue(w,"create",M);return M},i=async(w,E,N)=>{const M=n.isOnline(),L={...N,lastSynced:M?new Date().toISOString():null,syncStatus:M?"synced":"pending"},J=gt.table(w);if(await J.update(E,L),M)try{await le.from(w).update(L).eq("id",E),await J.update(E,{syncStatus:"synced"})}catch{await J.update(E,{syncStatus:"error"}),await xo.addToQueue(w,"update",{id:E,...L})}else await xo.addToQueue(w,"update",{id:E,...L});return L},l=async(w,E)=>{const N=n.isOnline();if(await gt.table(w).delete(E),N)try{await le.from(w).delete().eq("id",E)}catch{await xo.addToQueue(w,"delete",{id:E})}else await xo.addToQueue(w,"delete",{id:E})};return{syncAllData:o,isOnline:()=>n.isOnline(),getEvents:async w=>{try{if(e==="online"&&n.isOnline()){const{data:N,error:M}=await le.from("events").select("*").order("created_at",{ascending:!1});if(!M&&N){for(const L of N)await gt.events.put({...L,syncStatus:"synced",lastSynced:new Date().toISOString()});return w?N.filter(L=>L.company_id===w):N}}const E=await gt.events.toArray();return w?E.filter(N=>N.company_id===w):E}catch(E){console.warn("Error fetching events, using local data:",E);const N=await gt.events.toArray();return w?N.filter(M=>M.company_id===w):N}},createEvent:async w=>await a("events",w),updateEvent:async(w,E)=>await i("events",w,E),deleteEvent:async w=>l("events",w),getAttendees:async w=>{try{if(e==="online"&&n.isOnline()){const{data:N,error:M}=await le.from("attendees").select("*").order("created_at",{ascending:!1});if(!M&&N){for(const L of N)await gt.attendees.put({...L,syncStatus:"synced",lastSynced:new Date().toISOString()});return w?N.filter(L=>L.event_id===w):N}}const E=await gt.attendees.toArray();return w?E.filter(N=>N.event_id===w):E}catch(E){console.warn("Error fetching attendees, using local data:",E);const N=await gt.attendees.toArray();return w?N.filter(M=>M.event_id===w):N}},createAttendee:async w=>await a("attendees",w),updateAttendee:async(w,E)=>await i("attendees",w,E),deleteAttendee:async w=>l("attendees",w),getLuckyDrawWinners:async w=>{try{if(e==="online"&&n.isOnline()){const{data:N,error:M}=await le.from("lucky_draw_winners").select("*").order("created_at",{ascending:!1});if(!M&&N){for(const L of N)await gt.luckyDrawWinners.put({...L,syncStatus:"synced",lastSynced:new Date().toISOString()});return w?N.filter(L=>L.event_id===w):N}}const E=await gt.luckyDrawWinners.toArray();return w?E.filter(N=>N.event_id===w):E}catch(E){console.warn("Error fetching lucky draw winners, using local data:",E);const N=await gt.luckyDrawWinners.toArray();return w?N.filter(M=>M.event_id===w):N}},createLuckyDrawWinner:async w=>await a("lucky_draw_winners",w),getCompanies:async()=>{try{if(e==="online"&&n.isOnline()){const{data:E,error:N}=await le.from("companies").select("*").order("created_at",{ascending:!1});if(!N&&E){for(const M of E)await gt.companies.put({...M,syncStatus:"synced",lastSynced:new Date().toISOString()});return E}}return await gt.companies.toArray()}catch(w){return console.warn("Error fetching companies, using local data:",w),await gt.companies.toArray()}},createCompany:async w=>await a("companies",w),updateCompany:async(w,E)=>await i("companies",w,E),deleteCompany:async w=>l("companies",w),createRecord:a,updateRecord:i,deleteRecord:l}};function NA(){const{status:e,isOnline:t,pendingChanges:n,lastSync:r}=zs(),{mode:o,setMode:a}=Sl(),i=()=>{if(!t)return s.jsx(gA,{className:"h-4 w-4 text-red-500"});switch(e){case"syncing":return s.jsx(_l,{className:"h-4 w-4 text-blue-500 animate-spin"});case"success":return s.jsx(br,{className:"h-4 w-4 text-green-500"});case"error":return s.jsx(D1,{className:"h-4 w-4 text-red-500"});case"offline":return s.jsx(Nl,{className:"h-4 w-4 text-yellow-500"});default:return s.jsx(_1,{className:"h-4 w-4 text-gray-500"})}},l=()=>{if(!t)return"Offline";switch(e){case"syncing":return"Syncing...";case"success":return"Synced";case"error":return"Sync Error";case"offline":return"Offline Mode";default:return"Idle"}},c=()=>{switch(o){case"online":return"text-green-600";case"offline":return"text-red-600";case"hybrid":return"text-blue-600";default:return"text-gray-600"}},x=()=>{if(!r)return"Never";const d=new Date(r),m=new Date().getTime()-d.getTime(),v=Math.floor(m/6e4);if(v<1)return"Just now";if(v<60)return`${v}m ago`;const y=Math.floor(v/60);return y<24?`${y}h ago`:d.toLocaleDateString()};return s.jsxs("div",{className:"fixed bottom-4 right-4 bg-white rounded-lg shadow-lg border p-3 min-w-[200px] z-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i(),s.jsx("span",{className:"text-sm font-medium",children:l()})]}),s.jsx("div",{className:`text-xs font-medium ${c()}`,children:o.toUpperCase()})]}),s.jsxs("div",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("div",{children:["Last sync: ",x()]}),n>0&&s.jsxs("div",{className:"text-orange-600",children:[n," pending changes"]})]}),s.jsx("div",{className:"mt-2 flex gap-1",children:s.jsxs("select",{value:o,onChange:d=>a(d.target.value),className:"text-xs border rounded px-2 py-1",children:[s.jsx("option",{value:"online",children:"Online"}),s.jsx("option",{value:"offline",children:"Offline"}),s.jsx("option",{value:"hybrid",children:"Hybrid"})]})})]})}const _A=[{name:"Dashboard",href:"/admin",icon:Er,color:"from-purple-500 to-pink-500"},{name:"Companies",href:"/admin/companies",icon:Sn,color:"from-blue-500 to-cyan-500"},{name:"Events",href:"/admin/events",icon:bt,color:"from-green-500 to-emerald-500"},{name:"QR Generator",href:"/admin/qr-generator",icon:Qt,color:"from-emerald-500 to-green-500"},{name:"Seating",href:"/admin/seating",icon:tn,color:"from-pink-500 to-rose-500"},{name:"Attendees",href:"/admin/attendees",icon:vt,color:"from-orange-500 to-red-500"},{name:"Check-in",href:"/admin/checkin",icon:Qt,color:"from-indigo-500 to-purple-500"},{name:"Welcome Monitor",href:"/admin/welcome-monitor",icon:wr,color:"from-blue-500 to-indigo-500"},{name:"Welcome Scanner",href:"/admin/welcome-monitor-scanner",icon:wr,color:"from-green-500 to-blue-500"},{name:"Voting",href:"/admin/voting",icon:Vn,color:"from-violet-500 to-purple-500"},{name:"Voting Monitor",href:"/admin/voting-monitor",icon:wr,color:"from-purple-500 to-indigo-500"},{name:"Lucky Draw",href:"/admin/lucky-draw",icon:Jr,color:"from-yellow-500 to-orange-500"},{name:"Gallery",href:"/admin/gallery",icon:Nn,color:"from-teal-500 to-cyan-500"}];function SA({children:e,userCompany:t}){const n=Lr(),r=ds(),{mode:o,setMode:a}=Sl(),{currentUser:i,logoutOffline:l}=zf(),[c,x]=A.useState(!1),d=async()=>{i?(l(),r("/")):(await le.auth.signOut(),r("/"))},f=()=>{x(!1)};return s.jsxs("div",{className:"flex min-h-screen bg-gray-50",children:[c&&s.jsx("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:f}),s.jsx("div",{className:`fixed inset-y-0 left-0 z-50 w-72 transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 ${c?"translate-x-0":"-translate-x-full"}`,children:s.jsxs("div",{className:"flex h-full flex-col bg-white border-r border-gray-200 shadow-lg",children:[s.jsxs("div",{className:"flex h-20 items-center justify-between border-b border-gray-200 bg-blue-600 px-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Aa,{className:"h-8 w-8 text-white mr-2"}),s.jsxs("div",{children:[s.jsx("a",{href:"/",children:s.jsx("h1",{className:"text-xl font-bold text-white",children:"EventPro"})}),t&&s.jsx("p",{className:"text-xs text-blue-100 truncate font-medium",children:t.company.name}),i&&s.jsxs("p",{className:"text-xs text-blue-100 truncate font-medium",children:[i.name," (",i.type,")"]}),s.jsxs("h6",{className:"text-xs text-blue-100 truncate font-small",children:["powered by ",s.jsx("i",{children:"sangtenuk"})]})]})]}),s.jsx("button",{onClick:f,className:"lg:hidden p-2 text-white hover:bg-blue-700 rounded-lg transition-colors",children:s.jsx(Ra,{className:"h-5 w-5"})})]}),!t&&s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-white",children:[s.jsx("label",{htmlFor:"hybrid-mode-select",className:"block text-xs font-bold text-gray-700 mb-1",children:"Data Mode"}),s.jsxs("select",{id:"hybrid-mode-select",value:o,onChange:m=>a(m.target.value),className:"w-full px-2 py-1 border border-gray-300 rounded-md text-gray-900 text-xs",children:[s.jsx("option",{value:"online",children:"Online (Supabase)"}),s.jsx("option",{value:"offline",children:"Offline (Local Only)"}),s.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),s.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:s.jsx(kA,{userCompany:t})}),s.jsx("nav",{className:"flex-1 space-y-2 p-4 overflow-y-auto",children:_A.filter(m=>{if(t&&m.href==="/admin/companies")return!1;if(i){if(i.type==="guest")return["/admin","/admin/attendees","/admin/checkin"].includes(m.href);if(i.type==="admin")return!["/admin/companies"].includes(m.href)}return!0}).map(m=>{const v=m.icon,y=n.pathname===m.href||m.href!=="/admin"&&n.pathname.startsWith(m.href);return s.jsxs(St,{to:m.href,onClick:f,className:`group flex items-center px-4 py-3 text-sm font-semibold rounded-xl transition-all duration-300 ${y?"bg-blue-600 text-white":"text-gray-700 hover:bg-gray-100 hover:text-gray-900"}`,children:[s.jsx("div",{className:`p-2 rounded-lg mr-3 transition-colors ${y?"bg-white bg-opacity-20":"bg-gray-100 group-hover:bg-white"}`,children:s.jsx(v,{className:`h-5 w-5 ${y?"text-white":"text-gray-600 group-hover:text-gray-800"}`})}),s.jsx("span",{className:"truncate",children:m.name})]},m.name)})}),s.jsx("div",{className:"p-4 border-t border-gray-200/50",children:s.jsxs("button",{onClick:d,className:"flex items-center w-full px-4 py-3 text-sm font-semibold text-gray-700 rounded-xl hover:bg-gradient-to-r hover:from-red-50 hover:to-pink-50 hover:text-red-600 transition-all duration-300 group",children:[s.jsx("div",{className:"p-2 rounded-lg mr-3 bg-gray-100 group-hover:bg-red-100 transition-all duration-300",children:s.jsx(Jg,{className:"h-5 w-5 text-gray-600 group-hover:text-red-600"})}),"Sign Out"]})})]})}),s.jsx("div",{className:"lg:hidden fixed top-0 left-0 right-0 z-30 bg-white shadow-lg border-b border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between px-4 py-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("button",{onClick:()=>x(!0),className:"p-2 mr-3 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(NB,{className:"h-5 w-5"})}),s.jsx(Aa,{className:"h-6 w-6 text-blue-600 mr-2"}),s.jsxs("div",{children:[s.jsx("a",{href:"/",children:s.jsx("h1",{className:"text-lg font-bold text-blue-600",children:"EventPro"})}),t&&s.jsx("p",{className:"text-xs text-blue-600 font-medium truncate",children:t.company.name})]})]}),s.jsxs("button",{onClick:d,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-red-50 hover:text-red-600 transition-all duration-300",children:[s.jsx(Jg,{className:"h-4 w-4 mr-2"}),"Sign Out"]})]})}),s.jsx("div",{className:"flex-1 lg:ml-30",children:s.jsx("main",{className:"flex-1 p-4 md:p-8 pt-20 lg:pt-8",children:e})}),s.jsx(NA,{})]})}function PA(){const{setSyncStatus:e,setIsOnline:t}=zs(),{mode:n,setMode:r}=Sl(),o=A.useRef(!1),a=A.useRef(null);return A.useEffect(()=>{if(o.current)return;o.current=!0,a.current=F0.getInstance();const i=a.current,l=f=>{t(f),(!f&&n==="online"||f&&n==="offline")&&r("hybrid"),f&&n!=="offline"&&setTimeout(()=>{x()},1e3)};i.addListener(l);const c=async()=>{try{const f=i.isOnline();t(f),f&&n!=="offline"?await x():e("offline")}catch(f){console.error("Error initializing hybrid database:",f),e("error")}},x=async()=>{try{e("syncing");try{const{data:f,error:m}=await le.from("events").select("*").order("created_at",{ascending:!1});if(!m&&f)for(const v of f)await gt.events.put({...v,syncStatus:"synced",lastSynced:new Date().toISOString()})}catch(f){console.warn("Failed to sync events:",f)}try{const{data:f,error:m}=await le.from("attendees").select("*").order("created_at",{ascending:!1});if(!m&&f)for(const v of f)await gt.attendees.put({...v,syncStatus:"synced",lastSynced:new Date().toISOString()})}catch(f){console.warn("Failed to sync attendees:",f)}try{const{data:f,error:m}=await le.from("lucky_draw_winners").select("*").order("created_at",{ascending:!1});if(!m&&f)for(const v of f)await gt.luckyDrawWinners.put({...v,syncStatus:"synced",lastSynced:new Date().toISOString()})}catch(f){console.warn("Failed to sync lucky draw winners:",f)}try{const{data:f,error:m}=await le.from("companies").select("*").order("created_at",{ascending:!1});if(!m&&f)for(const v of f)await gt.companies.put({...v,syncStatus:"synced",lastSynced:new Date().toISOString()})}catch(f){console.warn("Failed to sync companies:",f)}e("success")}catch(f){console.error("Initial sync failed:",f),e("error")}};c();const d=setInterval(async()=>{if(i.isOnline()&&n!=="offline")try{await x()}catch(f){console.error("Periodic sync failed:",f)}},5*60*1e3);return()=>{clearInterval(d),a.current&&a.current.removeListener(l)}},[]),A.useEffect(()=>{if(!a.current)return;const i=a.current;if(n!=="offline"&&i.isOnline()){const l=setTimeout(async()=>{try{e("syncing"),e("success")}catch(c){console.error("Mode change sync failed:",c),e("error")}},1e3);return()=>clearTimeout(l)}},[n,e]),null}function TA(){const[e,t]=A.useState(""),[n,r]=A.useState(""),[o,a]=A.useState(!1),[i,l]=A.useState(!1),[c,x]=A.useState(!1),d=ds(),{isOnline:f}=zs(),{isOfflineMode:m,setIsOfflineMode:v,loginOffline:y,logoutOffline:C,currentUser:P}=zf();A.useEffect(()=>{f?(x(!1),v(!1)):(x(!0),v(!0))},[f,v]);const B=async g=>{g.preventDefault(),a(!0);try{if(m){const b=y(e,"");b?(v(!0),z.success(`Welcome ${b.name}!`),d("/admin")):z.error("Invalid offline credentials")}else if(i){const{error:b}=await le.auth.signUp({email:e,password:n});if(b)throw b;z.success("Account created successfully!")}else{const{error:b}=await le.auth.signInWithPassword({email:e,password:n});if(b)throw b;d("/admin")}}catch(b){z.error(b.message)}finally{a(!1)}};return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:m?"Offline Mode":i?"Create your account":"Sign in to your account"}),s.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:m?"No internet connection detected":"Event Management System"}),c&&!m&&s.jsxs("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-md",children:[s.jsx("p",{className:"text-sm text-yellow-800",children:"No internet connection. You can use offline mode with these accounts:"}),s.jsxs("div",{className:"mt-2 text-xs text-yellow-700",children:[s.jsxs("p",{children:[s.jsx("strong",{children:"Super Admin:"})," admin@offline (no password)"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Admin:"})," admin@offline.com (no password)"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Guest:"})," guest@offline.com (no password)"]})]}),s.jsx("button",{onClick:()=>v(!0),className:"mt-2 px-3 py-1 bg-yellow-600 text-white text-xs rounded hover:bg-yellow-700",children:"Switch to Offline Mode"}),s.jsx("button",{onClick:()=>v(!1),className:"mt-2 ml-2 px-3 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Switch to Online Mode"})]})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:B,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),s.jsx("input",{id:"email",name:"email",type:"email",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Email address",value:e,onChange:g=>t(g.target.value)})]}),!m&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),s.jsx("input",{id:"password",name:"password",type:"password",required:!0,className:"relative block w-full px-3 py-2 border border-gray-300 rounded-md placeholder-gray-500 text-gray-900 focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Password",value:n,onChange:g=>r(g.target.value)})]})]}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:o,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:o?"Loading...":i?"Sign up":"Sign in"})}),s.jsx("div",{className:"text-center",children:s.jsx("button",{type:"button",onClick:()=>l(!i),className:"text-blue-600 hover:text-blue-500 text-sm",children:i?"Already have an account? Sign in":"Don't have an account? Sign up"})})]})]})})}function IA({userCompany:e}){var ne,_;const t=ds(),[n,r]=A.useState(null),[o,a]=A.useState(null),[i,l]=A.useState(!0),[c,x]=A.useState(""),[d,f]=A.useState(null),[m,v]=A.useState(!1),[y,C]=A.useState(new Date),[P,B]=A.useState([]),{mode:g,setMode:b}=Sl(),{status:j,lastSync:D}=zs();A.useMemo(()=>!e,[e]);const w=A.useMemo(()=>d&&(d.companies.length>0||d.users.length>0||d.events.length>0),[d]);A.useEffect(()=>{(async()=>{e?await V():await ce(),await M()})()},[e]),A.useEffect(()=>{if(c&&!e){const S=setTimeout(()=>{E()},300);return()=>clearTimeout(S)}else f(null)},[c,e]),A.useEffect(()=>{const S=U=>{const $=document.querySelector("[data-search-container]");$&&!$.contains(U.target)&&(f(null),x(""))};if(d)return document.addEventListener("mousedown",S),()=>document.removeEventListener("mousedown",S)},[d]);const E=A.useCallback(async()=>{if(!c.trim()){f(null);return}v(!0);try{const S=`%${c.toLowerCase()}%`,[U,$,R]=await Promise.all([le.from("companies").select("id, name, created_at").ilike("name",S).limit(5),le.from("company_users").select(`
            id,
            email,
            company:companies(name)
          `).ilike("email",S).limit(5),le.from("events").select(`
            id,
            name,
            date,
            company:companies(name)
          `).ilike("name",S).limit(5)]);f({companies:U.data||[],users:($.data||[]).map(H=>({...H,company:Array.isArray(H.company)?H.company[0]:H.company})),events:(R.data||[]).map(H=>({...H,company:Array.isArray(H.company)?H.company[0]:H.company}))})}catch(S){console.error("Search error:",S)}finally{v(!1)}},[c]),N=A.useCallback((S,U)=>{f(null),x("");const $={company:"/admin/companies",user:"/admin/companies",event:U?`/admin/events/${U}`:"/admin/events"};t($[S])},[t]),M=async()=>{try{let S=le.from("events").select(`
          id,
          name,
          date,
          company:companies(id, name),
          attendees(id, checked_in)
        `).order("date",{ascending:!0});e&&(S=S.eq("company_id",e.company_id));const{data:U,error:$}=await S;if($)throw $;const R=(U==null?void 0:U.map(H=>{var me,W;return{...H,company:Array.isArray(H.company)?H.company[0]:H.company,attendee_count:((me=H.attendees)==null?void 0:me.length)||0,checked_in_count:((W=H.attendees)==null?void 0:W.filter(I=>I.checked_in).length)||0}}))||[];B(R)}catch(S){console.error("Error fetching events:",S)}},L=A.useCallback(S=>{let U=0;for(let R=0;R<S.length;R++)U=S.charCodeAt(R)+((U<<5)-U);return`#${(U>>24&255).toString(16).padStart(2,"0")}${(U>>16&255).toString(16).padStart(2,"0")}${(U>>8&255).toString(16).padStart(2,"0")}`},[]),J=A.useCallback(S=>new Date(S.getFullYear(),S.getMonth()+1,0).getDate(),[]),se=A.useCallback(S=>new Date(S.getFullYear(),S.getMonth(),1).getDay(),[]),X=A.useCallback(S=>{const U=S.toISOString().split("T")[0];return P.filter($=>$.date?$.date.split("T")[0]===U:!1)},[P]),Q=A.useCallback(()=>{const S=J(y),U=se(y),$=[];for(let R=0;R<U;R++)$.push(s.jsx("div",{className:"p-1 text-gray-300"},`empty-${R}`));for(let R=1;R<=S;R++){const H=new Date(y.getFullYear(),y.getMonth(),R),me=X(H),W=H.toDateString()===new Date().toDateString();$.push(s.jsxs("div",{className:`p-1 min-h-[60px] border border-gray-200 ${W?"bg-blue-50 border-blue-300":"hover:bg-gray-50"}`,children:[s.jsx("div",{className:"text-xs font-medium mb-1",children:R}),s.jsx("div",{className:"space-y-0.5",children:me.length===0?s.jsx("div",{className:"text-xs text-gray-400 text-center",children:"No events"}):s.jsxs(s.Fragment,{children:[me.slice(0,1).map(I=>{const Ee=L(I.company.id);return s.jsxs(St,{to:`/admin/events/${I.id}`,className:"block text-xs p-1 rounded hover:shadow-sm transition-all cursor-pointer text-white font-medium",style:{backgroundColor:Ee},title:`${I.name} - ${I.checked_in_count}/${I.attendee_count} checked in`,children:[s.jsx("div",{className:"truncate text-xs",title:I.name,children:I.name}),s.jsxs("div",{className:"text-white/80 text-xs",children:[I.checked_in_count,"/",I.attendee_count]})]},I.id)}),me.length>1&&s.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["+",me.length-1," more"]})]})})]},R))}return $},[y,J,se,X,L]),ce=async()=>{try{l(!0);const{data:S}=await le.from("companies").select("id, created_at"),{data:U}=await le.from("events").select(`
          id,
          name,
          date,
          created_at,
          company:companies(name)
        `).order("created_at",{ascending:!1}),{data:$}=await le.from("attendees").select("id, event_id, checked_in, created_at"),{data:R}=await le.from("company_users").select(`
          id,
          email,
          created_at,
          company:companies(name)
        `).order("created_at",{ascending:!1}),H=(S==null?void 0:S.length)||0,me=(U==null?void 0:U.length)||0,W=($==null?void 0:$.length)||0,I=($==null?void 0:$.filter(Be=>Be.checked_in).length)||0,Ee=(R==null?void 0:R.length)||0,pe=await Promise.all(((U==null?void 0:U.slice(0,5))||[]).map(async Be=>{const Re=($==null?void 0:$.filter(Ke=>Ke.event_id===Be.id))||[];return{...Be,company:Array.isArray(Be.company)?Be.company[0]:Be.company,attendee_count:Re.length,checked_in_count:Re.filter(Ke=>Ke.checked_in).length}})),Ce=((R==null?void 0:R.slice(0,5))||[]).map(Be=>({...Be,company:Array.isArray(Be.company)?Be.company[0]:Be.company,last_sign_in_at:null})),ge=new Date;ge.setDate(ge.getDate()-30);const be={companies:(S==null?void 0:S.filter(Be=>new Date(Be.created_at)>ge).length)||0,events:(U==null?void 0:U.filter(Be=>new Date(Be.created_at)>ge).length)||0,attendees:($==null?void 0:$.filter(Be=>new Date(Be.created_at)>ge).length)||0,users:(R==null?void 0:R.filter(Be=>new Date(Be.created_at)>ge).length)||0};r({totalCompanies:H,totalEvents:me,totalAttendees:W,totalCheckedIn:I,totalUsers:Ee,recentEvents:pe,recentUsers:Ce,monthlyGrowth:be,searchResults:{companies:[],users:[],events:[]}})}catch(S){console.error("Error fetching admin stats:",S)}finally{l(!1)}},V=async()=>{try{l(!0);const{data:S}=await le.from("events").select("id, name, date, created_at").eq("company_id",e.company_id).order("created_at",{ascending:!1}),U=(S==null?void 0:S.map(ge=>ge.id))||[],{data:$}=await le.from("attendees").select("id, event_id, checked_in, created_at").in("event_id",U),R=(S==null?void 0:S.length)||0,H=($==null?void 0:$.length)||0,me=($==null?void 0:$.filter(ge=>ge.checked_in).length)||0,W=new Date,I=(S==null?void 0:S.filter(ge=>ge.date&&new Date(ge.date)>W).length)||0,Ee=((S==null?void 0:S.slice(0,5))||[]).map(ge=>{const be=($==null?void 0:$.filter(Be=>Be.event_id===ge.id))||[];return{...ge,attendee_count:be.length,checked_in_count:be.filter(Be=>Be.checked_in).length}}),pe=[];for(let ge=5;ge>=0;ge--){const be=new Date;be.setMonth(be.getMonth()-ge);const Be=new Date(be.getFullYear(),be.getMonth(),1),Re=new Date(be.getFullYear(),be.getMonth()+1,0),Ke=(S==null?void 0:S.filter(nt=>{const mt=new Date(nt.created_at);return mt>=Be&&mt<=Re}))||[],He=($==null?void 0:$.filter(nt=>{const mt=new Date(nt.created_at);return mt>=Be&&mt<=Re}))||[];pe.push({month:be.toLocaleDateString("en-US",{month:"short"}),events:Ke.length,attendees:He.length,checkedIn:He.filter(nt=>nt.checked_in).length})}a({totalEvents:R,totalAttendees:H,totalCheckedIn:me,upcomingEvents:I,recentEvents:Ee,quickActions:[{name:"Create Event",path:"/admin/events",icon:bt,description:"Set up a new event",color:"bg-gradient-to-br from-blue-500 to-cyan-500",gradient:"from-blue-500 to-cyan-500"},{name:"Manage Attendees",path:"/admin/attendees",icon:vt,description:"View and manage registrations",color:"bg-gradient-to-br from-green-500 to-emerald-500",gradient:"from-green-500 to-emerald-500"},{name:"Seating Arrangement",path:"/admin/seating",icon:tn,description:"Arrange tables and seats",color:"bg-gradient-to-br from-orange-500 to-red-500",gradient:"from-orange-500 to-red-500"},{name:"Check-in System",path:"/admin/checkin",icon:Qt,description:"Scan QR codes for check-in",color:"bg-gradient-to-br from-purple-500 to-indigo-500",gradient:"from-purple-500 to-indigo-500"},{name:"Event Gallery",path:"/admin/gallery",icon:Nn,description:"Manage photo uploads",color:"bg-gradient-to-br from-pink-500 to-rose-500",gradient:"from-pink-500 to-rose-500"},{name:"Voting System",path:"/admin/voting",icon:Vn,description:"Create voting sessions",color:"bg-gradient-to-br from-violet-500 to-purple-500",gradient:"from-violet-500 to-purple-500"}],monthlyData:pe})}catch(S){console.error("Error fetching company stats:",S)}finally{l(!1)}},xe=A.useMemo(()=>s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin"}),s.jsx(Aa,{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 h-6 w-6 text-purple-600 animate-pulse"})]})}),[]);return i?xe:!e&&n?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl shadow-lg",children:s.jsx(Er,{className:"h-8 w-8 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 via-pink-600 to-red-600 bg-clip-text text-transparent mb-2",children:"Admin Dashboard"}),s.jsx("p",{className:"text-gray-600 text-lg",children:"System-wide analytics and management overview"})]}),s.jsxs("div",{style:{marginBottom:16},children:[s.jsx("label",{htmlFor:"admin-hybrid-mode-select",style:{fontWeight:"bold",marginRight:8},children:"Data Mode:"}),s.jsxs("select",{id:"admin-hybrid-mode-select",value:g,onChange:S=>b(S.target.value),style:{padding:4,borderRadius:4},children:[s.jsx("option",{value:"online",children:"Online (Supabase)"}),s.jsx("option",{value:"offline",children:"Offline (Local Only)"}),s.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[s.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-white font-semibold text-xs ${j==="idle"?"bg-gray-400":j==="syncing"?"bg-blue-500":j==="success"?"bg-green-500":"bg-red-500"}`,title:`Sync status: ${j}`,children:["Sync: ",j.charAt(0).toUpperCase()+j.slice(1)]}),s.jsxs("div",{className:`flex items-center px-3 py-1 rounded-full text-white font-semibold text-xs ${g==="online"?"bg-blue-500":g==="offline"?"bg-yellow-500":"bg-green-500"}`,title:`Database mode: ${g}`,children:["DB: ",g.charAt(0).toUpperCase()+g.slice(1)]}),D&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Last Sync: ",new Date(D).toLocaleString()]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6","data-search-container":!0,children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none",children:s.jsx(xa,{className:"h-5 w-5 text-gray-400"})}),s.jsx("input",{type:"text",value:c,onChange:S=>x(S.target.value),className:"block w-full pl-12 pr-12 py-4 border-0 rounded-xl bg-gray-50/50 placeholder-gray-500 focus:ring-2 focus:ring-purple-500 focus:bg-white transition-all duration-300 text-lg",placeholder:"Search companies, users, or events..."}),m&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-4 flex items-center",children:s.jsx("div",{className:"w-5 h-5 border-2 border-purple-300 border-t-purple-600 rounded-full animate-spin"})})]}),w&&d&&s.jsxs("div",{className:"mt-6 space-y-6",children:[d.companies.length>0&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[s.jsx(Sn,{className:"h-5 w-5 text-blue-500 mr-2"}),"Companies"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.companies.map(S=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-xl border border-blue-100 hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>N("company"),title:"Click to view company details",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg mr-3",children:s.jsx(Sn,{className:"h-4 w-4 text-white"})}),s.jsx("span",{className:"font-medium text-gray-900",children:S.name})]}),s.jsx("span",{className:"text-sm text-gray-500 bg-white px-3 py-1 rounded-full",children:new Date(S.created_at).toLocaleDateString()})]},S.id))})]}),d.users.length>0&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[s.jsx(vt,{className:"h-5 w-5 text-green-500 mr-2"}),"Users"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.users.map(S=>{var U;return s.jsx("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-xl border border-green-100 hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>N("user"),title:"Click to view user details",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg mr-3",children:s.jsx(vt,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900 block",children:S.email}),s.jsx("span",{className:"text-sm text-gray-500",children:((U=S.company)==null?void 0:U.name)||"Unknown Company"})]})]})},S.id)})})]}),d.events.length>0&&s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("h3",{className:"font-semibold text-gray-900 mb-3 flex items-center",children:[s.jsx(bt,{className:"h-5 w-5 text-purple-500 mr-2"}),"Events"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:d.events.map(S=>{var U;return s.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl border border-purple-100 hover:shadow-md transition-all duration-300 cursor-pointer",onClick:()=>N("event",S.id),title:"Click to view event details",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg mr-3",children:s.jsx(bt,{className:"h-4 w-4 text-white"})}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-gray-900 block",children:S.name}),s.jsx("span",{className:"text-sm text-gray-500",children:((U=S.company)==null?void 0:U.name)||"Unknown Company"})]})]}),S.date&&s.jsx("span",{className:"text-sm text-gray-500 bg-white px-3 py-1 rounded-full",children:new Date(S.date).toLocaleDateString()})]},S.id)})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-600 rounded-lg mr-4",children:s.jsx(Sn,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.totalCompanies}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Companies"}),n.monthlyGrowth.companies>0&&s.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(go,{className:"h-3 w-3 mr-1"}),"+",n.monthlyGrowth.companies," this month"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-600 rounded-lg mr-4",children:s.jsx(bt,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.totalEvents}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Events"}),n.monthlyGrowth.events>0&&s.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(go,{className:"h-3 w-3 mr-1"}),"+",n.monthlyGrowth.events," this month"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-600 rounded-lg mr-4",children:s.jsx(vt,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.totalAttendees}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Attendees"}),n.monthlyGrowth.attendees>0&&s.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(go,{className:"h-3 w-3 mr-1"}),"+",n.monthlyGrowth.attendees," this month"]})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-600 rounded-lg mr-4",children:s.jsx(Li,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.totalCheckedIn}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Check-ins"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:n.totalAttendees>0?`${Math.round(n.totalCheckedIn/n.totalAttendees*100)}% rate`:"0% rate"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-indigo-600 rounded-lg mr-4",children:s.jsx(hB,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:n.totalUsers}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Users"}),n.monthlyGrowth.users>0&&s.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(go,{className:"h-3 w-3 mr-1"}),"+",n.monthlyGrowth.users," this month"]})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-6 flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-500 rounded-lg mr-3",children:s.jsx(QB,{className:"h-6 w-6 text-white"})}),"System Management"]}),s.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[s.jsx(St,{to:"/admin/companies",className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-blue-300 hover:bg-gradient-to-br hover:from-blue-50 hover:to-cyan-50 transition-all duration-300 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg mr-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(Sn,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:"Companies"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Manage organizations"})]})]})}),s.jsx(St,{to:"/admin/progress",className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-green-300 hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50 transition-all duration-300 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl shadow-lg mr-4 group-hover:scale-110 transition-transform duration-300",children:s.jsx(I3,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:"Analytics"}),s.jsx("div",{className:"text-sm text-gray-600",children:"Monthly progress"})]})]})})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg mr-3",children:s.jsx(bt,{className:"h-6 w-6 text-white"})}),"Recent Events"]}),s.jsxs(St,{to:"/admin/events",className:"text-purple-600 hover:text-purple-700 flex items-center text-sm font-medium bg-purple-50 px-3 py-2 rounded-lg hover:bg-purple-100 transition-all duration-300",children:["View All ",s.jsx(Ac,{className:"h-4 w-4 ml-1"})]})]}),s.jsxs("div",{className:"space-y-3",children:[n.recentEvents.map((S,U)=>{var $;return s.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${U*.1}s`},children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:S.name}),s.jsx("div",{className:"text-sm text-gray-600",children:(($=S.company)==null?void 0:$.name)||"Unknown Company"}),S.date&&s.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full mt-1 inline-block",children:new Date(S.date).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-lg font-bold text-gray-900",children:[S.checked_in_count,"/",S.attendee_count]}),s.jsx("div",{className:"text-xs text-gray-500",children:"checked in"}),s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${S.attendee_count>0?S.checked_in_count/S.attendee_count*100:0}%`}})})]})]},S.id)}),n.recentEvents.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(bt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No recent events"})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg mr-3",children:s.jsx(vt,{className:"h-6 w-6 text-white"})}),"Recent Users"]}),s.jsxs(St,{to:"/admin/companies",className:"text-indigo-600 hover:text-indigo-700 flex items-center text-sm font-medium bg-indigo-50 px-3 py-2 rounded-lg hover:bg-indigo-100 transition-all duration-300",children:["View All ",s.jsx(Ac,{className:"h-4 w-4 ml-1"})]})]}),s.jsxs("div",{className:"space-y-3",children:[n.recentUsers.map((S,U)=>{var $;return s.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${U*.1}s`},children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:S.email}),s.jsx("div",{className:"text-sm text-gray-600",children:(($=S.company)==null?void 0:$.name)||"Unknown Company"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:new Date(S.created_at).toLocaleDateString()}),S.last_sign_in_at&&s.jsxs("div",{className:"text-xs text-green-600 flex items-center mt-1",children:[s.jsx(Nl,{className:"h-3 w-3 mr-1"}),"Active"]})]})]},S.id)}),n.recentUsers.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(vt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No recent users"})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-lg font-semibold flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg mr-3",children:s.jsx(bt,{className:"h-5 w-5 text-white"})}),"Event Calendar"]}),s.jsxs("div",{className:"text-xs text-gray-500",children:[P.length," events"]}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx("button",{onClick:()=>C(new Date(y.getFullYear(),y.getMonth()-1)),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:s.jsx(Hg,{className:"h-4 w-4"})}),s.jsx("span",{className:"text-sm font-semibold",children:y.toLocaleDateString("en-US",{month:"short",year:"numeric"})}),s.jsx("button",{onClick:()=>C(new Date(y.getFullYear(),y.getMonth()+1)),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:s.jsx(Gg,{className:"h-4 w-4"})})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-0.5 mb-2",children:["S","M","T","W","T","F","S"].map((S,U)=>s.jsx("div",{className:"p-1 text-center text-xs font-medium text-gray-500",children:S},`${S}-${U}`))}),s.jsx("div",{className:"grid grid-cols-7 gap-0.5",children:Q()})]})]})]}):e&&o?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl shadow-lg",children:s.jsx(ah,{className:"h-8 w-8 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Welcome Back!"}),s.jsxs("p",{className:"text-gray-600 text-lg",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:((ne=e==null?void 0:e.company)==null?void 0:ne.name)||"Company"})," Dashboard"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-600 rounded-lg mr-4",children:s.jsx(bt,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.totalEvents}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Events"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-600 rounded-lg mr-4",children:s.jsx(vt,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.totalAttendees}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Attendees"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-600 rounded-lg mr-4",children:s.jsx(Li,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.totalCheckedIn}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Check-ins"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:o.totalAttendees>0?`${Math.round(o.totalCheckedIn/o.totalAttendees*100)}% rate`:"0% rate"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-600 rounded-lg mr-4",children:s.jsx(go,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.upcomingEvents}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Upcoming Events"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg mr-3",children:s.jsx(ey,{className:"h-6 w-6 text-white"})}),"Quick Actions"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.quickActions.map((S,U)=>{const $=S.icon;return s.jsxs(St,{to:S.path,className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-transparent hover:shadow-xl transition-all duration-300 card-hover animate-scale-in",style:{animationDelay:`${U*.1}s`},children:[s.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${S.gradient} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:s.jsx($,{className:"h-6 w-6 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:S.name}),s.jsx("div",{className:"text-sm text-gray-600",children:S.description})]},S.name)})})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg mr-3",children:s.jsx(bt,{className:"h-6 w-6 text-white"})}),"Recent Events"]}),s.jsxs(St,{to:"/admin/events",className:"text-green-600 hover:text-green-700 flex items-center text-sm font-medium bg-green-50 px-3 py-2 rounded-lg hover:bg-green-100 transition-all duration-300",children:["View All ",s.jsx(Ac,{className:"h-4 w-4 ml-1"})]})]}),s.jsxs("div",{className:"space-y-4",children:[o.recentEvents.map((S,U)=>s.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${U*.1}s`},children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:S.name}),S.date&&s.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full mt-1 inline-block",children:new Date(S.date).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[S.checked_in_count,"/",S.attendee_count]}),s.jsx("div",{className:"text-xs text-gray-500",children:"attendees"}),s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${S.attendee_count>0?S.checked_in_count/S.attendee_count*100:0}%`}})})]})]},S.id)),o.recentEvents.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(bt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No events yet"}),s.jsx(St,{to:"/admin/events",className:"text-green-600 hover:text-green-700 text-sm font-medium bg-green-50 px-4 py-2 rounded-lg hover:bg-green-100 transition-all duration-300 inline-block mt-2",children:"Create your first event"})]})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg mr-3",children:s.jsx(ih,{className:"h-6 w-6 text-white"})}),"Event Tools & Monitors"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(St,{to:"/admin/lucky-draw",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-yellow-300 hover:bg-gradient-to-br hover:from-yellow-50 hover:to-orange-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(Jr,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Lucky Draw"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Random winner selection"})]}),s.jsxs(St,{to:"/admin/welcome-monitor",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-blue-300 hover:bg-gradient-to-br hover:from-blue-50 hover:to-cyan-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(wr,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Welcome Monitor"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Live check-in display"})]}),s.jsxs(St,{to:"/admin/voting-monitor",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-purple-300 hover:bg-gradient-to-br hover:from-purple-50 hover:to-pink-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(Er,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Voting Monitor"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Live voting results"})]}),s.jsxs(St,{to:"/admin/progress",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-green-300 hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(Kg,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Analytics"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Performance insights"})]})]})]})]}):e&&o?s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"p-3 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-2xl shadow-lg",children:s.jsx(ah,{className:"h-8 w-8 text-white"})})}),s.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Welcome Back!"}),s.jsxs("p",{className:"text-gray-600 text-lg",children:[s.jsx("span",{className:"font-semibold text-indigo-600",children:((_=e==null?void 0:e.company)==null?void 0:_.name)||"Company"})," Dashboard"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-600 rounded-lg mr-4",children:s.jsx(bt,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.totalEvents}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Events"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-600 rounded-lg mr-4",children:s.jsx(vt,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.totalAttendees}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Attendees"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-600 rounded-lg mr-4",children:s.jsx(Li,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.totalCheckedIn}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Total Check-ins"}),s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:o.totalAttendees>0?`${Math.round(o.totalCheckedIn/o.totalAttendees*100)}% rate`:"0% rate"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md border p-6 card-hover",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-600 rounded-lg mr-4",children:s.jsx(go,{className:"h-8 w-8 text-white"})}),s.jsxs("div",{children:[s.jsx("div",{className:"text-3xl font-bold text-gray-900",children:o.upcomingEvents}),s.jsx("div",{className:"text-sm text-gray-600 font-medium",children:"Upcoming Events"})]})]})})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-indigo-500 to-purple-500 rounded-lg mr-3",children:s.jsx(bt,{className:"h-6 w-6 text-white"})}),"Event Calendar"]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>C(new Date(y.getFullYear(),y.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded transition-colors",children:s.jsx(Hg,{className:"h-5 w-5"})}),s.jsx("span",{className:"text-base font-semibold",children:y.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),s.jsx("button",{onClick:()=>C(new Date(y.getFullYear(),y.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded transition-colors",children:s.jsx(Gg,{className:"h-5 w-5"})})]})]}),s.jsx("div",{className:"grid grid-cols-7 gap-1 mb-3",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(S=>s.jsx("div",{className:"p-2 text-center text-sm font-medium text-gray-600",children:S},S))}),s.jsx("div",{className:"grid grid-cols-7 gap-1",children:Q()})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg mr-3",children:s.jsx(ey,{className:"h-6 w-6 text-white"})}),"Quick Actions"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:o.quickActions.map((S,U)=>{const $=S.icon;return s.jsxs(St,{to:S.path,className:"group p-6 border-2 border-gray-100 rounded-xl hover:border-transparent hover:shadow-xl transition-all duration-300 card-hover animate-scale-in",style:{animationDelay:`${U*.1}s`},children:[s.jsx("div",{className:`w-12 h-12 bg-gradient-to-br ${S.gradient} rounded-xl flex items-center justify-center mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg`,children:s.jsx($,{className:"h-6 w-6 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900 text-lg mb-1",children:S.name}),s.jsx("div",{className:"text-sm text-gray-600",children:S.description})]},S.name)})})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-green-500 to-emerald-500 rounded-lg mr-3",children:s.jsx(bt,{className:"h-6 w-6 text-white"})}),"Recent Events"]}),s.jsxs(St,{to:"/admin/events",className:"text-green-600 hover:text-green-700 flex items-center text-sm font-medium bg-green-50 px-3 py-2 rounded-lg hover:bg-green-100 transition-all duration-300",children:["View All ",s.jsx(Ac,{className:"h-4 w-4 ml-1"})]})]}),s.jsxs("div",{className:"space-y-4",children:[o.recentEvents.map((S,U)=>s.jsxs("div",{className:"flex justify-between items-center p-4 bg-gradient-to-r from-gray-50 to-white rounded-xl border border-gray-100 hover:shadow-md transition-all duration-300 animate-slide-in",style:{animationDelay:`${U*.1}s`},children:[s.jsxs("div",{children:[s.jsx("div",{className:"font-semibold text-gray-900 text-lg",children:S.name}),S.date&&s.jsx("div",{className:"text-sm text-gray-600 bg-gray-100 px-3 py-1 rounded-full mt-1 inline-block",children:new Date(S.date).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right",children:[s.jsxs("div",{className:"text-xl font-bold text-gray-900",children:[S.checked_in_count,"/",S.attendee_count]}),s.jsx("div",{className:"text-xs text-gray-500",children:"attendees"}),s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${S.attendee_count>0?S.checked_in_count/S.attendee_count*100:0}%`}})})]})]},S.id)),o.recentEvents.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(bt,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),s.jsx("p",{className:"font-medium",children:"No events yet"}),s.jsx(St,{to:"/admin/events",className:"text-green-600 hover:text-green-700 text-sm font-medium bg-green-50 px-4 py-2 rounded-lg hover:bg-green-100 transition-all duration-300 inline-block mt-2",children:"Create your first event"})]})]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-6",children:[s.jsxs("h2",{className:"text-2xl font-semibold mb-6 flex items-center",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-pink-500 to-rose-500 rounded-lg mr-3",children:s.jsx(ih,{className:"h-6 w-6 text-white"})}),"Event Tools & Monitors"]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs(St,{to:"/admin/lucky-draw",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-yellow-300 hover:bg-gradient-to-br hover:from-yellow-50 hover:to-orange-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(Jr,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Lucky Draw"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Random winner selection"})]}),s.jsxs(St,{to:"/admin/welcome-monitor",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-blue-300 hover:bg-gradient-to-br hover:from-blue-50 hover:to-cyan-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(wr,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Welcome Monitor"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Live check-in display"})]}),s.jsxs(St,{to:"/admin/voting-monitor",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-purple-300 hover:bg-gradient-to-br hover:from-purple-50 hover:to-pink-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500 to-pink-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(Er,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Voting Monitor"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Live voting results"})]}),s.jsxs(St,{to:"/admin/progress",className:"group p-6 text-center border-2 border-gray-100 rounded-xl hover:border-green-300 hover:bg-gradient-to-br hover:from-green-50 hover:to-emerald-50 transition-all duration-300 card-hover",children:[s.jsx("div",{className:"p-3 bg-gradient-to-br from-green-500 to-emerald-500 rounded-xl shadow-lg mx-auto mb-3 w-fit group-hover:scale-110 transition-transform duration-300",children:s.jsx(Kg,{className:"h-8 w-8 text-white"})}),s.jsx("div",{className:"font-semibold text-gray-900",children:"Analytics"}),s.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Performance insights"})]})]})]})]}):null}function RA(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return`#${(t>>24&255).toString(16).padStart(2,"0")}${(t>>16&255).toString(16).padStart(2,"0")}${(t>>8&255).toString(16).padStart(2,"0")}`}function MA(e){return{from:e+"20",to:e+"10",border:e+"30"}}function LA(){const{getCompanies:e,createCompany:t,updateCompany:n,deleteCompany:r}=Wf(),[o,a]=A.useState([]),[i,l]=A.useState([]),[c,x]=A.useState(!1),[d,f]=A.useState(!1),[m,v]=A.useState(null),[y,C]=A.useState(null),[P,B]=A.useState(""),[g,b]=A.useState({email:"",password:"",company_id:"",newPassword:""}),[j,D]=A.useState(!0),[w,E]=A.useState({name:"",person_in_charge:"",contact_number:"",email:"",logo:""}),[N,M]=A.useState(!1);A.useEffect(()=>{L(),J()},[]);const L=async()=>{try{const $=await e(),R=await Promise.all($.map(async H=>{try{const{data:me}=await le.from("events").select(`
                id,
                name,
                date,
                attendees(id, checked_in)
              `).eq("company_id",H.id).order("date",{ascending:!1}),W=(me==null?void 0:me.flatMap(I=>I.attendees||[]))||[];return{...H,event_count:(me==null?void 0:me.length)||0,attendee_count:W.length,events:(me==null?void 0:me.map(I=>{var Ee,pe;return{id:I.id,name:I.name,date:I.date,attendee_count:((Ee=I.attendees)==null?void 0:Ee.length)||0,checked_in_count:((pe=I.attendees)==null?void 0:pe.filter(Ce=>Ce.checked_in).length)||0}}))||[]}}catch{return{...H,event_count:0,attendee_count:0,events:[]}}}));a(R)}catch($){z.error("Error fetching companies: "+$.message)}finally{D(!1)}},J=async()=>{try{const{data:$,error:R}=await le.from("company_users").select(`
          *,
          company:companies(name)
        `).order("created_at",{ascending:!1});if(R)throw R;l($||[])}catch($){console.error("Error fetching company users:",$)}},se=async $=>{if($.preventDefault(),!!w.name.trim())try{await t({...w}),z.success("Company created successfully!"),E({name:"",person_in_charge:"",contact_number:"",email:"",logo:""}),x(!1),L()}catch(R){z.error("Error creating company: "+R.message)}},X=async $=>{if($.preventDefault(),!(!w.name.trim()||!m))try{await n(m.id,{...w}),z.success("Company updated successfully!"),E({name:"",person_in_charge:"",contact_number:"",email:"",logo:""}),v(null),x(!1),L()}catch(R){z.error("Error updating company: "+R.message)}},Q=async $=>{if(confirm("Are you sure you want to delete this company? This will also delete all events and attendees."))try{await r($),z.success("Company deleted successfully!"),L(),J()}catch(R){z.error("Error deleting company: "+R.message)}},ce=$=>{v($),E({name:$.name||"",person_in_charge:$.person_in_charge||"",contact_number:$.contact_number||"",email:$.email||"",logo:$.logo||""}),x(!0)},V=$=>{C($),b({email:$.email,password:"",company_id:$.company_id,newPassword:""}),f(!0)},xe=async $=>{if($.preventDefault(),!(!g.email.trim()||!g.password.trim()||!g.company_id))try{const{data:{session:R}}=await le.auth.getSession();if(!R)throw new Error("Not authenticated");const H=await fetch("https://fylfbymwfymtcumpfcvf.supabase.co/functions/v1/create-company-user",{method:"POST",headers:{Authorization:`Bearer ${R.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:g.email,password:g.password,company_id:g.company_id})}),me=await H.json();if(!H.ok)throw new Error(me.error||"Failed to create user");z.success("Company user created successfully!"),b({email:"",password:"",company_id:"",newPassword:""}),f(!1),J()}catch(R){z.error("Error creating user: "+R.message)}},ne=async $=>{if($.preventDefault(),!(!g.email.trim()||!y))try{const{error:R}=await le.from("company_users").update({email:g.email}).eq("id",y.id);if(R)throw R;if(g.newPassword.trim()){const{data:{session:H}}=await le.auth.getSession();if(!H)throw new Error("Not authenticated");const me=await fetch("https://fylfbymwfymtcumpfcvf.supabase.co/functions/v1/update-company-user-password",{method:"POST",headers:{Authorization:`Bearer ${H.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({user_id:y.id,new_password:g.newPassword})}),W=await me.json();if(!me.ok)throw new Error(W.error||"Failed to update password")}z.success("User updated successfully!"),b({email:"",password:"",company_id:"",newPassword:""}),C(null),f(!1),J()}catch(R){z.error("Error updating user: "+R.message)}},_=async $=>{if(confirm("Are you sure you want to delete this user?"))try{const{error:R}=await le.from("company_users").delete().eq("id",$);if(R)throw R;z.success("User deleted successfully!"),J()}catch(R){z.error("Error deleting user: "+R.message)}},S=()=>{B(""),v(null),C(null),x(!1),f(!1)},U=async $=>{var H;const R=(H=$.target.files)==null?void 0:H[0];if(R){M(!0);try{const me=R.name.split(".").pop(),W=`logo/${crypto.randomUUID()}.${me}`,{data:I,error:Ee}=await le.storage.from("bucket").upload(W,R,{cacheControl:"3600",upsert:!0});if(Ee)throw Ee;const{data:pe}=le.storage.from("bucket").getPublicUrl(W),Ce=pe.publicUrl;E({...w,logo:Ce});const ge=new FileReader;ge.onload=async be=>{var Re;const Be=(Re=be.target)==null?void 0:Re.result;await gt.table("company_logos").put({id:W,base64:Be})},ge.readAsDataURL(R),z.success("Logo uploaded!")}catch(me){z.error("Error uploading logo: "+me.message)}finally{M(!1)}}};return j?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Company Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage companies, events, and user access"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>f(!0),className:"bg-gradient-to-r from-green-500 to-emerald-600 text-white px-4 py-2 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[s.jsx(Pd,{className:"h-5 w-5 mr-2"}),"Add User"]}),s.jsxs("button",{onClick:()=>x(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-4 py-2 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[s.jsx(Sr,{className:"h-5 w-5 mr-2"}),"Add Company"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-blue-100 rounded-xl",children:s.jsx(Sn,{className:"h-6 w-6 text-blue-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Companies"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.length})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-green-100 rounded-xl",children:s.jsx(bt,{className:"h-6 w-6 text-green-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.reduce(($,R)=>$+(R.event_count||0),0)})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-purple-100 rounded-xl",children:s.jsx(vt,{className:"h-6 w-6 text-purple-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Attendees"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.reduce(($,R)=>$+(R.attendee_count||0),0)})]})]})}),s.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-3 bg-orange-100 rounded-xl",children:s.jsx(Pd,{className:"h-6 w-6 text-orange-600"})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:i.length})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:o.map($=>{const R=i.filter(W=>W.company_id===$.id),H=RA($.id),me=MA(H);return s.jsxs("div",{className:"group bg-white rounded-xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 overflow-hidden",children:[s.jsxs("div",{className:"p-4 text-white relative overflow-hidden",style:{background:`linear-gradient(135deg, ${H}, ${H}dd)`},children:[s.jsx("div",{className:"absolute inset-0 bg-black opacity-10"}),s.jsxs("div",{className:"relative z-10",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[s.jsx("div",{className:"p-2 bg-white bg-opacity-20 rounded-xl mr-3",children:s.jsx(Sn,{className:"h-6 w-6"})}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("h3",{className:"text-lg font-bold truncate",children:$.name}),s.jsxs("p",{className:"text-sm opacity-90",children:["Created ",$.created_at?new Date($.created_at).toLocaleDateString():"Recently"]})]})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>ce($),className:"p-2 bg-white bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-all duration-200",children:s.jsx(pr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Q($.id),className:"p-2 bg-red-500 bg-opacity-20 rounded-lg hover:bg-opacity-30 transition-all duration-200",children:s.jsx(is,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:$.event_count}),s.jsx("div",{className:"text-xs opacity-90",children:"Events"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:$.attendee_count}),s.jsx("div",{className:"text-xs opacity-90",children:"Attendees"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-2xl font-bold",children:R.length}),s.jsx("div",{className:"text-xs opacity-90",children:"Users"})]})]})]})]}),s.jsxs("div",{className:"p-4",children:[($.person_in_charge||$.contact_number||$.email)&&s.jsxs("div",{className:"mb-3 p-3 bg-gray-50 rounded-xl",children:[$.person_in_charge&&s.jsxs("div",{className:"flex items-center text-gray-700 mb-2",children:[s.jsx(ah,{className:"h-4 w-4 mr-2 text-yellow-500"}),s.jsx("span",{className:"text-sm font-medium",children:$.person_in_charge})]}),$.contact_number&&s.jsxs("div",{className:"flex items-center text-gray-600 mb-2",children:[s.jsx(zB,{className:"h-4 w-4 mr-2 text-blue-500"}),s.jsx("span",{className:"text-sm",children:$.contact_number})]}),$.email&&s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(BB,{className:"h-4 w-4 mr-2 text-green-500"}),s.jsx("span",{className:"text-sm",children:$.email})]})]}),$.events&&$.events.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(bt,{className:"h-4 w-4 mr-2 text-blue-500"}),"Events"]}),s.jsx("div",{className:"space-y-2",children:$.events.map(W=>s.jsx(St,{to:`/admin/events/${W.id}`,className:"block p-2 rounded-lg hover:bg-gray-50 transition-all duration-200 border border-gray-100 hover:border-gray-200",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-semibold text-gray-900 px-3 py-1 rounded-lg text-sm inline-block",style:{backgroundColor:me.from,color:H,border:`1px solid ${me.border}`},children:W.name}),W.date&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(W.date).toLocaleDateString()})]}),s.jsxs("div",{className:"text-right ml-3",children:[s.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[W.checked_in_count,"/",W.attendee_count]}),s.jsx("div",{className:"w-16 bg-gray-200 rounded-full h-2 mt-1",children:s.jsx("div",{className:"h-2 rounded-full transition-all duration-500",style:{width:`${W.attendee_count>0?W.checked_in_count/W.attendee_count*100:0}%`,backgroundColor:H}})})]})]})},W.id))})]}),R.length>0&&s.jsxs("div",{children:[s.jsxs("h4",{className:"font-semibold text-gray-900 mb-2 flex items-center",children:[s.jsx(Pd,{className:"h-4 w-4 mr-2 text-purple-500"}),"Users (",R.length,")"]}),s.jsx("div",{className:"space-y-2",children:R.map(W=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-gradient-to-r from-gray-50 to-gray-100 rounded-lg border border-gray-200",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"font-medium text-gray-900 text-sm truncate",children:W.email}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(W.created_at).toLocaleDateString()})]}),s.jsxs("div",{className:"flex space-x-1 ml-3",children:[s.jsx("button",{onClick:()=>V(W),className:"p-1.5 bg-blue-100 text-blue-600 rounded-lg hover:bg-blue-200 transition-colors",children:s.jsx(pr,{className:"h-3 w-3"})}),s.jsx("button",{onClick:()=>_(W.id),className:"p-1.5 bg-red-100 text-red-600 rounded-lg hover:bg-red-200 transition-colors",children:s.jsx(is,{className:"h-3 w-3"})})]})]},W.id))})]})]})]},$.id)})}),o.length===0&&i.length===0&&s.jsx("div",{className:"text-center py-16",children:s.jsxs("div",{className:"bg-white rounded-2xl p-12 shadow-lg border border-gray-100 max-w-md mx-auto",children:[s.jsx(Sn,{className:"h-16 w-16 text-gray-400 mx-auto mb-6"}),s.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"No companies found"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first company"}),s.jsx("button",{onClick:()=>x(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:"Add Company"})]})}),d&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:y?"Edit Company User":"Create Company User"}),s.jsxs("form",{onSubmit:y?ne:xe,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company *"}),s.jsxs("select",{value:g.company_id,onChange:$=>b({...g,company_id:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0,disabled:!!y,children:[s.jsx("option",{value:"",children:"Select a company"}),o.map($=>s.jsx("option",{value:$.id,children:$.name},$.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email *"}),s.jsx("input",{type:"email",value:g.email,onChange:$=>b({...g,email:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter email address",required:!0})]}),!y&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Password *"}),s.jsx("input",{type:"password",value:g.password,onChange:$=>b({...g,password:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter password",required:!0,minLength:6})]}),y&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"New Password (leave blank to keep current)"}),s.jsx("input",{type:"password",value:g.newPassword,onChange:$=>b({...g,newPassword:$.target.value}),className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter new password",minLength:6})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[s.jsx("button",{type:"button",onClick:()=>{f(!1),C(null),b({email:"",password:"",company_id:"",newPassword:""})},className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors font-medium",children:"Cancel"}),s.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 font-medium",children:y?"Update User":"Create User"})]})]})]})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl p-8 w-full max-w-md shadow-2xl",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 text-gray-900",children:m?"Edit Company":"Create New Company"}),s.jsxs("form",{onSubmit:m?X:se,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Company Name *"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:w.name,onChange:$=>E({...w,name:$.target.value}),required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Person in Charge"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:w.person_in_charge,onChange:$=>E({...w,person_in_charge:$.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Contact Number"}),s.jsx("input",{type:"text",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:w.contact_number,onChange:$=>E({...w,contact_number:$.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email"}),s.jsx("input",{type:"email",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",value:w.email,onChange:$=>E({...w,email:$.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:U,disabled:N,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),N&&s.jsx("div",{className:"text-sm text-blue-500 mt-2",children:"Uploading..."}),w.logo&&s.jsx("img",{src:Tt(w.logo),alt:"Logo Preview",className:"w-16 h-16 rounded-xl object-cover mt-2"})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-8",children:[s.jsx("button",{type:"button",onClick:S,className:"px-6 py-3 text-gray-600 hover:text-gray-800 transition-colors font-medium",children:"Cancel"}),s.jsx("button",{type:"submit",className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-indigo-700 transition-all duration-200 font-medium",children:m?"Update Company":"Create Company"})]})]})]})})]})})}var qn={},$A=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},P1={},Hn={};let Kf;const OA=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Hn.getSymbolSize=function(t){if(!t)throw new Error('"version" cannot be null or undefined');if(t<1||t>40)throw new Error('"version" should be in range from 1 to 40');return t*4+17};Hn.getSymbolTotalCodewords=function(t){return OA[t]};Hn.getBCHDigit=function(e){let t=0;for(;e!==0;)t++,e>>>=1;return t};Hn.setToSJISFunction=function(t){if(typeof t!="function")throw new Error('"toSJISFunc" is not a valid function.');Kf=t};Hn.isKanjiModeEnabled=function(){return typeof Kf<"u"};Hn.toSJIS=function(t){return Kf(t)};var hu={};(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+n)}}e.isValid=function(r){return r&&typeof r.bit<"u"&&r.bit>=0&&r.bit<4},e.from=function(r,o){if(e.isValid(r))return r;try{return t(r)}catch{return o}}})(hu);function T1(){this.buffer=[],this.length=0}T1.prototype={get:function(e){const t=Math.floor(e/8);return(this.buffer[t]>>>7-e%8&1)===1},put:function(e,t){for(let n=0;n<t;n++)this.putBit((e>>>t-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(e){const t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}};var UA=T1;function Pl(e){if(!e||e<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=e,this.data=new Uint8Array(e*e),this.reservedBit=new Uint8Array(e*e)}Pl.prototype.set=function(e,t,n,r){const o=e*this.size+t;this.data[o]=n,r&&(this.reservedBit[o]=!0)};Pl.prototype.get=function(e,t){return this.data[e*this.size+t]};Pl.prototype.xor=function(e,t,n){this.data[e*this.size+t]^=n};Pl.prototype.isReserved=function(e,t){return this.reservedBit[e*this.size+t]};var VA=Pl,I1={};(function(e){const t=Hn.getSymbolSize;e.getRowColCoords=function(r){if(r===1)return[];const o=Math.floor(r/7)+2,a=t(r),i=a===145?26:Math.ceil((a-13)/(2*o-2))*2,l=[a-7];for(let c=1;c<o-1;c++)l[c]=l[c-1]-i;return l.push(6),l.reverse()},e.getPositions=function(r){const o=[],a=e.getRowColCoords(r),i=a.length;for(let l=0;l<i;l++)for(let c=0;c<i;c++)l===0&&c===0||l===0&&c===i-1||l===i-1&&c===0||o.push([a[l],a[c]]);return o}})(I1);var R1={};const zA=Hn.getSymbolSize,ry=7;R1.getPositions=function(t){const n=zA(t);return[[0,0],[n-ry,0],[0,n-ry]]};var M1={};(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(o){return o!=null&&o!==""&&!isNaN(o)&&o>=0&&o<=7},e.from=function(o){return e.isValid(o)?parseInt(o,10):void 0},e.getPenaltyN1=function(o){const a=o.size;let i=0,l=0,c=0,x=null,d=null;for(let f=0;f<a;f++){l=c=0,x=d=null;for(let m=0;m<a;m++){let v=o.get(f,m);v===x?l++:(l>=5&&(i+=t.N1+(l-5)),x=v,l=1),v=o.get(m,f),v===d?c++:(c>=5&&(i+=t.N1+(c-5)),d=v,c=1)}l>=5&&(i+=t.N1+(l-5)),c>=5&&(i+=t.N1+(c-5))}return i},e.getPenaltyN2=function(o){const a=o.size;let i=0;for(let l=0;l<a-1;l++)for(let c=0;c<a-1;c++){const x=o.get(l,c)+o.get(l,c+1)+o.get(l+1,c)+o.get(l+1,c+1);(x===4||x===0)&&i++}return i*t.N2},e.getPenaltyN3=function(o){const a=o.size;let i=0,l=0,c=0;for(let x=0;x<a;x++){l=c=0;for(let d=0;d<a;d++)l=l<<1&2047|o.get(x,d),d>=10&&(l===1488||l===93)&&i++,c=c<<1&2047|o.get(d,x),d>=10&&(c===1488||c===93)&&i++}return i*t.N3},e.getPenaltyN4=function(o){let a=0;const i=o.data.length;for(let c=0;c<i;c++)a+=o.data[c];return Math.abs(Math.ceil(a*100/i/5)-10)*t.N4};function n(r,o,a){switch(r){case e.Patterns.PATTERN000:return(o+a)%2===0;case e.Patterns.PATTERN001:return o%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(o+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(o/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return o*a%2+o*a%3===0;case e.Patterns.PATTERN110:return(o*a%2+o*a%3)%2===0;case e.Patterns.PATTERN111:return(o*a%3+(o+a)%2)%2===0;default:throw new Error("bad maskPattern:"+r)}}e.applyMask=function(o,a){const i=a.size;for(let l=0;l<i;l++)for(let c=0;c<i;c++)a.isReserved(c,l)||a.xor(c,l,n(o,c,l))},e.getBestMask=function(o,a){const i=Object.keys(e.Patterns).length;let l=0,c=1/0;for(let x=0;x<i;x++){a(x),e.applyMask(x,o);const d=e.getPenaltyN1(o)+e.getPenaltyN2(o)+e.getPenaltyN3(o)+e.getPenaltyN4(o);e.applyMask(x,o),d<c&&(c=d,l=x)}return l}})(M1);var fu={};const Ts=hu,jc=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],kc=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];fu.getBlocksCount=function(t,n){switch(n){case Ts.L:return jc[(t-1)*4+0];case Ts.M:return jc[(t-1)*4+1];case Ts.Q:return jc[(t-1)*4+2];case Ts.H:return jc[(t-1)*4+3];default:return}};fu.getTotalCodewordsCount=function(t,n){switch(n){case Ts.L:return kc[(t-1)*4+0];case Ts.M:return kc[(t-1)*4+1];case Ts.Q:return kc[(t-1)*4+2];case Ts.H:return kc[(t-1)*4+3];default:return}};var L1={},mu={};const $i=new Uint8Array(512),N0=new Uint8Array(256);(function(){let t=1;for(let n=0;n<255;n++)$i[n]=t,N0[t]=n,t<<=1,t&256&&(t^=285);for(let n=255;n<512;n++)$i[n]=$i[n-255]})();mu.log=function(t){if(t<1)throw new Error("log("+t+")");return N0[t]};mu.exp=function(t){return $i[t]};mu.mul=function(t,n){return t===0||n===0?0:$i[N0[t]+N0[n]]};(function(e){const t=mu;e.mul=function(r,o){const a=new Uint8Array(r.length+o.length-1);for(let i=0;i<r.length;i++)for(let l=0;l<o.length;l++)a[i+l]^=t.mul(r[i],o[l]);return a},e.mod=function(r,o){let a=new Uint8Array(r);for(;a.length-o.length>=0;){const i=a[0];for(let c=0;c<o.length;c++)a[c]^=t.mul(o[c],i);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},e.generateECPolynomial=function(r){let o=new Uint8Array([1]);for(let a=0;a<r;a++)o=e.mul(o,new Uint8Array([1,t.exp(a)]));return o}})(L1);const $1=L1;function Hf(e){this.genPoly=void 0,this.degree=e,this.degree&&this.initialize(this.degree)}Hf.prototype.initialize=function(t){this.degree=t,this.genPoly=$1.generateECPolynomial(this.degree)};Hf.prototype.encode=function(t){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(t.length+this.degree);n.set(t);const r=$1.mod(n,this.genPoly),o=this.degree-r.length;if(o>0){const a=new Uint8Array(this.degree);return a.set(r,o),a}return r};var qA=Hf,O1={},eo={},Gf={};Gf.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40};var $r={};const U1="[0-9]+",WA="[A-Z $%*+\\-./:]+";let dl="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";dl=dl.replace(/u/g,"\\u");const KA="(?:(?![A-Z0-9 $%*+\\-./:]|"+dl+`)(?:.|[\r
]))+`;$r.KANJI=new RegExp(dl,"g");$r.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");$r.BYTE=new RegExp(KA,"g");$r.NUMERIC=new RegExp(U1,"g");$r.ALPHANUMERIC=new RegExp(WA,"g");const HA=new RegExp("^"+dl+"$"),GA=new RegExp("^"+U1+"$"),QA=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");$r.testKanji=function(t){return HA.test(t)};$r.testNumeric=function(t){return GA.test(t)};$r.testAlphanumeric=function(t){return QA.test(t)};(function(e){const t=Gf,n=$r;e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,i){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(i))throw new Error("Invalid version: "+i);return i>=1&&i<10?a.ccBits[0]:i<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return n.testNumeric(a)?e.NUMERIC:n.testAlphanumeric(a)?e.ALPHANUMERIC:n.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function r(o){if(typeof o!="string")throw new Error("Param is not a string");switch(o.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+o)}}e.from=function(a,i){if(e.isValid(a))return a;try{return r(a)}catch{return i}}})(eo);(function(e){const t=Hn,n=fu,r=hu,o=eo,a=Gf,i=7973,l=t.getBCHDigit(i);function c(m,v,y){for(let C=1;C<=40;C++)if(v<=e.getCapacity(C,y,m))return C}function x(m,v){return o.getCharCountIndicator(m,v)+4}function d(m,v){let y=0;return m.forEach(function(C){const P=x(C.mode,v);y+=P+C.getBitsLength()}),y}function f(m,v){for(let y=1;y<=40;y++)if(d(m,y)<=e.getCapacity(y,v,o.MIXED))return y}e.from=function(v,y){return a.isValid(v)?parseInt(v,10):y},e.getCapacity=function(v,y,C){if(!a.isValid(v))throw new Error("Invalid QR Code version");typeof C>"u"&&(C=o.BYTE);const P=t.getSymbolTotalCodewords(v),B=n.getTotalCodewordsCount(v,y),g=(P-B)*8;if(C===o.MIXED)return g;const b=g-x(C,v);switch(C){case o.NUMERIC:return Math.floor(b/10*3);case o.ALPHANUMERIC:return Math.floor(b/11*2);case o.KANJI:return Math.floor(b/13);case o.BYTE:default:return Math.floor(b/8)}},e.getBestVersionForData=function(v,y){let C;const P=r.from(y,r.M);if(Array.isArray(v)){if(v.length>1)return f(v,P);if(v.length===0)return 1;C=v[0]}else C=v;return c(C.mode,C.getLength(),P)},e.getEncodedBits=function(v){if(!a.isValid(v)||v<7)throw new Error("Invalid QR Code version");let y=v<<12;for(;t.getBCHDigit(y)-l>=0;)y^=i<<t.getBCHDigit(y)-l;return v<<12|y}})(O1);var V1={};const ch=Hn,z1=1335,YA=21522,sy=ch.getBCHDigit(z1);V1.getEncodedBits=function(t,n){const r=t.bit<<3|n;let o=r<<10;for(;ch.getBCHDigit(o)-sy>=0;)o^=z1<<ch.getBCHDigit(o)-sy;return(r<<10|o)^YA};var q1={};const XA=eo;function Ma(e){this.mode=XA.NUMERIC,this.data=e.toString()}Ma.getBitsLength=function(t){return 10*Math.floor(t/3)+(t%3?t%3*3+1:0)};Ma.prototype.getLength=function(){return this.data.length};Ma.prototype.getBitsLength=function(){return Ma.getBitsLength(this.data.length)};Ma.prototype.write=function(t){let n,r,o;for(n=0;n+3<=this.data.length;n+=3)r=this.data.substr(n,3),o=parseInt(r,10),t.put(o,10);const a=this.data.length-n;a>0&&(r=this.data.substr(n),o=parseInt(r,10),t.put(o,a*3+1))};var JA=Ma;const ZA=eo,Td=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function La(e){this.mode=ZA.ALPHANUMERIC,this.data=e}La.getBitsLength=function(t){return 11*Math.floor(t/2)+6*(t%2)};La.prototype.getLength=function(){return this.data.length};La.prototype.getBitsLength=function(){return La.getBitsLength(this.data.length)};La.prototype.write=function(t){let n;for(n=0;n+2<=this.data.length;n+=2){let r=Td.indexOf(this.data[n])*45;r+=Td.indexOf(this.data[n+1]),t.put(r,11)}this.data.length%2&&t.put(Td.indexOf(this.data[n]),6)};var ej=La;const tj=eo;function $a(e){this.mode=tj.BYTE,typeof e=="string"?this.data=new TextEncoder().encode(e):this.data=new Uint8Array(e)}$a.getBitsLength=function(t){return t*8};$a.prototype.getLength=function(){return this.data.length};$a.prototype.getBitsLength=function(){return $a.getBitsLength(this.data.length)};$a.prototype.write=function(e){for(let t=0,n=this.data.length;t<n;t++)e.put(this.data[t],8)};var nj=$a;const rj=eo,sj=Hn;function Oa(e){this.mode=rj.KANJI,this.data=e}Oa.getBitsLength=function(t){return t*13};Oa.prototype.getLength=function(){return this.data.length};Oa.prototype.getBitsLength=function(){return Oa.getBitsLength(this.data.length)};Oa.prototype.write=function(e){let t;for(t=0;t<this.data.length;t++){let n=sj.toSJIS(this.data[t]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[t]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),e.put(n,13)}};var oj=Oa,W1={exports:{}};(function(e){var t={single_source_shortest_paths:function(n,r,o){var a={},i={};i[r]=0;var l=t.PriorityQueue.make();l.push(r,0);for(var c,x,d,f,m,v,y,C,P;!l.empty();){c=l.pop(),x=c.value,f=c.cost,m=n[x]||{};for(d in m)m.hasOwnProperty(d)&&(v=m[d],y=f+v,C=i[d],P=typeof i[d]>"u",(P||C>y)&&(i[d]=y,l.push(d,y),a[d]=x))}if(typeof o<"u"&&typeof i[o]>"u"){var B=["Could not find a path from ",r," to ",o,"."].join("");throw new Error(B)}return a},extract_shortest_path_from_predecessor_list:function(n,r){for(var o=[],a=r;a;)o.push(a),n[a],a=n[a];return o.reverse(),o},find_path:function(n,r,o){var a=t.single_source_shortest_paths(n,r,o);return t.extract_shortest_path_from_predecessor_list(a,o)},PriorityQueue:{make:function(n){var r=t.PriorityQueue,o={},a;n=n||{};for(a in r)r.hasOwnProperty(a)&&(o[a]=r[a]);return o.queue=[],o.sorter=n.sorter||r.default_sorter,o},default_sorter:function(n,r){return n.cost-r.cost},push:function(n,r){var o={value:n,cost:r};this.queue.push(o),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(W1);var aj=W1.exports;(function(e){const t=eo,n=JA,r=ej,o=nj,a=oj,i=$r,l=Hn,c=aj;function x(B){return unescape(encodeURIComponent(B)).length}function d(B,g,b){const j=[];let D;for(;(D=B.exec(b))!==null;)j.push({data:D[0],index:D.index,mode:g,length:D[0].length});return j}function f(B){const g=d(i.NUMERIC,t.NUMERIC,B),b=d(i.ALPHANUMERIC,t.ALPHANUMERIC,B);let j,D;return l.isKanjiModeEnabled()?(j=d(i.BYTE,t.BYTE,B),D=d(i.KANJI,t.KANJI,B)):(j=d(i.BYTE_KANJI,t.BYTE,B),D=[]),g.concat(b,j,D).sort(function(E,N){return E.index-N.index}).map(function(E){return{data:E.data,mode:E.mode,length:E.length}})}function m(B,g){switch(g){case t.NUMERIC:return n.getBitsLength(B);case t.ALPHANUMERIC:return r.getBitsLength(B);case t.KANJI:return a.getBitsLength(B);case t.BYTE:return o.getBitsLength(B)}}function v(B){return B.reduce(function(g,b){const j=g.length-1>=0?g[g.length-1]:null;return j&&j.mode===b.mode?(g[g.length-1].data+=b.data,g):(g.push(b),g)},[])}function y(B){const g=[];for(let b=0;b<B.length;b++){const j=B[b];switch(j.mode){case t.NUMERIC:g.push([j,{data:j.data,mode:t.ALPHANUMERIC,length:j.length},{data:j.data,mode:t.BYTE,length:j.length}]);break;case t.ALPHANUMERIC:g.push([j,{data:j.data,mode:t.BYTE,length:j.length}]);break;case t.KANJI:g.push([j,{data:j.data,mode:t.BYTE,length:x(j.data)}]);break;case t.BYTE:g.push([{data:j.data,mode:t.BYTE,length:x(j.data)}])}}return g}function C(B,g){const b={},j={start:{}};let D=["start"];for(let w=0;w<B.length;w++){const E=B[w],N=[];for(let M=0;M<E.length;M++){const L=E[M],J=""+w+M;N.push(J),b[J]={node:L,lastCount:0},j[J]={};for(let se=0;se<D.length;se++){const X=D[se];b[X]&&b[X].node.mode===L.mode?(j[X][J]=m(b[X].lastCount+L.length,L.mode)-m(b[X].lastCount,L.mode),b[X].lastCount+=L.length):(b[X]&&(b[X].lastCount=L.length),j[X][J]=m(L.length,L.mode)+4+t.getCharCountIndicator(L.mode,g))}}D=N}for(let w=0;w<D.length;w++)j[D[w]].end=0;return{map:j,table:b}}function P(B,g){let b;const j=t.getBestModeForData(B);if(b=t.from(g,j),b!==t.BYTE&&b.bit<j.bit)throw new Error('"'+B+'" cannot be encoded with mode '+t.toString(b)+`.
 Suggested mode is: `+t.toString(j));switch(b===t.KANJI&&!l.isKanjiModeEnabled()&&(b=t.BYTE),b){case t.NUMERIC:return new n(B);case t.ALPHANUMERIC:return new r(B);case t.KANJI:return new a(B);case t.BYTE:return new o(B)}}e.fromArray=function(g){return g.reduce(function(b,j){return typeof j=="string"?b.push(P(j,null)):j.data&&b.push(P(j.data,j.mode)),b},[])},e.fromString=function(g,b){const j=f(g,l.isKanjiModeEnabled()),D=y(j),w=C(D,b),E=c.find_path(w.map,"start","end"),N=[];for(let M=1;M<E.length-1;M++)N.push(w.table[E[M]].node);return e.fromArray(v(N))},e.rawSplit=function(g){return e.fromArray(f(g,l.isKanjiModeEnabled()))}})(q1);const pu=Hn,Id=hu,ij=UA,lj=VA,cj=I1,uj=R1,uh=M1,dh=fu,dj=qA,_0=O1,xj=V1,hj=eo,Rd=q1;function fj(e,t){const n=e.size,r=uj.getPositions(t);for(let o=0;o<r.length;o++){const a=r[o][0],i=r[o][1];for(let l=-1;l<=7;l++)if(!(a+l<=-1||n<=a+l))for(let c=-1;c<=7;c++)i+c<=-1||n<=i+c||(l>=0&&l<=6&&(c===0||c===6)||c>=0&&c<=6&&(l===0||l===6)||l>=2&&l<=4&&c>=2&&c<=4?e.set(a+l,i+c,!0,!0):e.set(a+l,i+c,!1,!0))}}function mj(e){const t=e.size;for(let n=8;n<t-8;n++){const r=n%2===0;e.set(n,6,r,!0),e.set(6,n,r,!0)}}function pj(e,t){const n=cj.getPositions(t);for(let r=0;r<n.length;r++){const o=n[r][0],a=n[r][1];for(let i=-2;i<=2;i++)for(let l=-2;l<=2;l++)i===-2||i===2||l===-2||l===2||i===0&&l===0?e.set(o+i,a+l,!0,!0):e.set(o+i,a+l,!1,!0)}}function gj(e,t){const n=e.size,r=_0.getEncodedBits(t);let o,a,i;for(let l=0;l<18;l++)o=Math.floor(l/3),a=l%3+n-8-3,i=(r>>l&1)===1,e.set(o,a,i,!0),e.set(a,o,i,!0)}function Md(e,t,n){const r=e.size,o=xj.getEncodedBits(t,n);let a,i;for(a=0;a<15;a++)i=(o>>a&1)===1,a<6?e.set(a,8,i,!0):a<8?e.set(a+1,8,i,!0):e.set(r-15+a,8,i,!0),a<8?e.set(8,r-a-1,i,!0):a<9?e.set(8,15-a-1+1,i,!0):e.set(8,15-a-1,i,!0);e.set(r-8,8,1,!0)}function yj(e,t){const n=e.size;let r=-1,o=n-1,a=7,i=0;for(let l=n-1;l>0;l-=2)for(l===6&&l--;;){for(let c=0;c<2;c++)if(!e.isReserved(o,l-c)){let x=!1;i<t.length&&(x=(t[i]>>>a&1)===1),e.set(o,l-c,x),a--,a===-1&&(i++,a=7)}if(o+=r,o<0||n<=o){o-=r,r=-r;break}}}function vj(e,t,n){const r=new ij;n.forEach(function(c){r.put(c.mode.bit,4),r.put(c.getLength(),hj.getCharCountIndicator(c.mode,e)),c.write(r)});const o=pu.getSymbolTotalCodewords(e),a=dh.getTotalCodewordsCount(e,t),i=(o-a)*8;for(r.getLengthInBits()+4<=i&&r.put(0,4);r.getLengthInBits()%8!==0;)r.putBit(0);const l=(i-r.getLengthInBits())/8;for(let c=0;c<l;c++)r.put(c%2?17:236,8);return Ej(r,e,t)}function Ej(e,t,n){const r=pu.getSymbolTotalCodewords(t),o=dh.getTotalCodewordsCount(t,n),a=r-o,i=dh.getBlocksCount(t,n),l=r%i,c=i-l,x=Math.floor(r/i),d=Math.floor(a/i),f=d+1,m=x-d,v=new dj(m);let y=0;const C=new Array(i),P=new Array(i);let B=0;const g=new Uint8Array(e.buffer);for(let E=0;E<i;E++){const N=E<c?d:f;C[E]=g.slice(y,y+N),P[E]=v.encode(C[E]),y+=N,B=Math.max(B,N)}const b=new Uint8Array(r);let j=0,D,w;for(D=0;D<B;D++)for(w=0;w<i;w++)D<C[w].length&&(b[j++]=C[w][D]);for(D=0;D<m;D++)for(w=0;w<i;w++)b[j++]=P[w][D];return b}function bj(e,t,n,r){let o;if(Array.isArray(e))o=Rd.fromArray(e);else if(typeof e=="string"){let x=t;if(!x){const d=Rd.rawSplit(e);x=_0.getBestVersionForData(d,n)}o=Rd.fromString(e,x||40)}else throw new Error("Invalid data");const a=_0.getBestVersionForData(o,n);if(!a)throw new Error("The amount of data is too big to be stored in a QR Code");if(!t)t=a;else if(t<a)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+a+`.
`);const i=vj(t,n,o),l=pu.getSymbolSize(t),c=new lj(l);return fj(c,t),mj(c),pj(c,t),Md(c,n,0),t>=7&&gj(c,t),yj(c,i),isNaN(r)&&(r=uh.getBestMask(c,Md.bind(null,c,n))),uh.applyMask(r,c),Md(c,n,r),{modules:c,version:t,errorCorrectionLevel:n,maskPattern:r,segments:o}}P1.create=function(t,n){if(typeof t>"u"||t==="")throw new Error("No input text");let r=Id.M,o,a;return typeof n<"u"&&(r=Id.from(n.errorCorrectionLevel,Id.M),o=_0.from(n.version),a=uh.from(n.maskPattern),n.toSJISFunc&&pu.setToSJISFunction(n.toSJISFunc)),bj(t,o,r,a)};var K1={},Qf={};(function(e){function t(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let r=n.slice().replace("#","").split("");if(r.length<3||r.length===5||r.length>8)throw new Error("Invalid hex color: "+n);(r.length===3||r.length===4)&&(r=Array.prototype.concat.apply([],r.map(function(a){return[a,a]}))),r.length===6&&r.push("F","F");const o=parseInt(r.join(""),16);return{r:o>>24&255,g:o>>16&255,b:o>>8&255,a:o&255,hex:"#"+r.slice(0,6).join("")}}e.getOptions=function(r){r||(r={}),r.color||(r.color={});const o=typeof r.margin>"u"||r.margin===null||r.margin<0?4:r.margin,a=r.width&&r.width>=21?r.width:void 0,i=r.scale||4;return{width:a,scale:a?4:i,margin:o,color:{dark:t(r.color.dark||"#000000ff"),light:t(r.color.light||"#ffffffff")},type:r.type,rendererOpts:r.rendererOpts||{}}},e.getScale=function(r,o){return o.width&&o.width>=r+o.margin*2?o.width/(r+o.margin*2):o.scale},e.getImageWidth=function(r,o){const a=e.getScale(r,o);return Math.floor((r+o.margin*2)*a)},e.qrToImageData=function(r,o,a){const i=o.modules.size,l=o.modules.data,c=e.getScale(i,a),x=Math.floor((i+a.margin*2)*c),d=a.margin*c,f=[a.color.light,a.color.dark];for(let m=0;m<x;m++)for(let v=0;v<x;v++){let y=(m*x+v)*4,C=a.color.light;if(m>=d&&v>=d&&m<x-d&&v<x-d){const P=Math.floor((m-d)/c),B=Math.floor((v-d)/c);C=f[l[P*i+B]?1:0]}r[y++]=C.r,r[y++]=C.g,r[y++]=C.b,r[y]=C.a}}})(Qf);(function(e){const t=Qf;function n(o,a,i){o.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=i,a.width=i,a.style.height=i+"px",a.style.width=i+"px"}function r(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,i,l){let c=l,x=i;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),i||(x=r()),c=t.getOptions(c);const d=t.getImageWidth(a.modules.size,c),f=x.getContext("2d"),m=f.createImageData(d,d);return t.qrToImageData(m.data,a,c),n(f,x,d),f.putImageData(m,0,0),x},e.renderToDataURL=function(a,i,l){let c=l;typeof c>"u"&&(!i||!i.getContext)&&(c=i,i=void 0),c||(c={});const x=e.render(a,i,c),d=c.type||"image/png",f=c.rendererOpts||{};return x.toDataURL(d,f.quality)}})(K1);var H1={};const wj=Qf;function oy(e,t){const n=e.a/255,r=t+'="'+e.hex+'"';return n<1?r+" "+t+'-opacity="'+n.toFixed(2).slice(1)+'"':r}function Ld(e,t,n){let r=e+t;return typeof n<"u"&&(r+=" "+n),r}function Cj(e,t,n){let r="",o=0,a=!1,i=0;for(let l=0;l<e.length;l++){const c=Math.floor(l%t),x=Math.floor(l/t);!c&&!a&&(a=!0),e[l]?(i++,l>0&&c>0&&e[l-1]||(r+=a?Ld("M",c+n,.5+x+n):Ld("m",o,0),o=0,a=!1),c+1<t&&e[l+1]||(r+=Ld("h",i),i=0)):o++}return r}H1.render=function(t,n,r){const o=wj.getOptions(n),a=t.modules.size,i=t.modules.data,l=a+o.margin*2,c=o.color.light.a?"<path "+oy(o.color.light,"fill")+' d="M0 0h'+l+"v"+l+'H0z"/>':"",x="<path "+oy(o.color.dark,"stroke")+' d="'+Cj(i,a,o.margin)+'"/>',d='viewBox="0 0 '+l+" "+l+'"',m='<svg xmlns="http://www.w3.org/2000/svg" '+(o.width?'width="'+o.width+'" height="'+o.width+'" ':"")+d+' shape-rendering="crispEdges">'+c+x+`</svg>
`;return typeof r=="function"&&r(null,m),m};const Bj=$A,xh=P1,G1=K1,Aj=H1;function Yf(e,t,n,r,o){const a=[].slice.call(arguments,1),i=a.length,l=typeof a[i-1]=="function";if(!l&&!Bj())throw new Error("Callback required as last argument");if(l){if(i<2)throw new Error("Too few arguments provided");i===2?(o=n,n=t,t=r=void 0):i===3&&(t.getContext&&typeof o>"u"?(o=r,r=void 0):(o=r,r=n,n=t,t=void 0))}else{if(i<1)throw new Error("Too few arguments provided");return i===1?(n=t,t=r=void 0):i===2&&!t.getContext&&(r=n,n=t,t=void 0),new Promise(function(c,x){try{const d=xh.create(n,r);c(e(d,t,r))}catch(d){x(d)}})}try{const c=xh.create(n,r);o(null,e(c,t,r))}catch(c){o(c)}}qn.create=xh.create;qn.toCanvas=Yf.bind(null,G1.render);qn.toDataURL=Yf.bind(null,G1.renderToDataURL);qn.toString=Yf.bind(null,function(e,t,n){return Aj.render(e,n)});function jj(e){let t=0;for(let r=0;r<e.length;r++)t=e.charCodeAt(r)+((t<<5)-t);return`#${(t>>24&255).toString(16).padStart(2,"0")}${(t>>16&255).toString(16).padStart(2,"0")}${(t>>8&255).toString(16).padStart(2,"0")}`}const kj=async(e,t,n)=>{try{const r=e.name.split(".").pop(),o=`${n}_${Date.now()}.${r}`,a=`${t}/${o}`,{error:i}=await le.storage.from("event-assets").upload(a,e);return i?(console.error("Supabase upload error:",i),null):a}catch(r){return console.error("Error uploading to Supabase:",r),null}},Dj=(e,t,n)=>{try{const r=e.name.split(".").pop(),o=`${t}_${n}_${Date.now()}.${r}`,a=URL.createObjectURL(e),i=`event_${t}_${n}`;return localStorage.setItem(i,JSON.stringify({url:a,fileName:o,timestamp:Date.now()})),a}catch(r){return console.error("Error storing file locally:",r),URL.createObjectURL(e)}};function ay({userCompany:e}){var W;const{getEvents:t,createEvent:n,updateEvent:r,deleteEvent:o}=Wf(),{eventId:a}=Lo(),i=ds(),[l,c]=A.useState([]),[x,d]=A.useState([]),[f,m]=A.useState(!1),[v,y]=A.useState(null),[C,P]=A.useState(null),[B,g]=A.useState(!0),[b,j]=A.useState(!1),[D,w]=A.useState(null),[E,N]=A.useState({company_id:"",name:"",description:"",date:"",location:"",max_attendees:1e3,max_gallery_uploads:2,mode:"online",custom_background:"",custom_logo:""});A.useEffect(()=>{J()},[]),A.useEffect(()=>{a?M(a):L()},[a]);const M=async I=>{g(!0);try{const{data:Ee,error:pe}=await le.from("events").select(`
          id,
          name,
          description,
          date,
          location,
          max_attendees,
          max_gallery_uploads,
          registration_qr,
          created_at,
          company_id,
          custom_background,
          custom_logo,
          company:companies(name, logo_url)
        `).eq("id",I).single();if(pe)throw pe;const{data:Ce,error:ge}=await le.from("attendees").select("id, event_id, checked_in, name, email, phone, created_at").eq("event_id",I);if(ge)throw ge;const be={...Ee,company:Array.isArray(Ee.company)?Ee.company[0]:Ee.company,attendee_count:(Ce==null?void 0:Ce.length)||0,checked_in_count:(Ce==null?void 0:Ce.filter(Be=>Be.checked_in).length)||0,description:Ee.description??null,date:Ee.date??null,location:Ee.location??null,max_attendees:Ee.max_attendees??null,max_gallery_uploads:Ee.max_gallery_uploads??2,registration_qr:Ee.registration_qr??null,created_at:Ee.created_at??"",custom_background:Ee.custom_background??null,custom_logo:Ee.custom_logo??null};P(be)}catch(Ee){z.error("Error fetching event details: "+Ee.message)}finally{g(!1)}},L=async()=>{g(!0);try{const I=await t(e==null?void 0:e.company_id),Ee=(I==null?void 0:I.map(ge=>ge.id))||[];let pe=[];try{const{data:ge,error:be}=await le.from("attendees").select("id, event_id, checked_in").in("event_id",Ee);be||(pe=ge||[])}catch{console.warn("Could not fetch attendees, using local data")}const Ce=(I||[]).map(ge=>{const be=(pe==null?void 0:pe.filter(Ke=>Ke.event_id===ge.id))||[],Be=be.length,Re=be.filter(Ke=>Ke.checked_in).length;return{...ge,company:{name:"Company",logo_url:null},attendee_count:Be,checked_in_count:Re,description:ge.description??null,date:ge.date??null,location:ge.location??null,max_attendees:ge.max_attendees??null,max_gallery_uploads:ge.max_gallery_uploads??2,registration_qr:ge.registration_qr??null,created_at:ge.created_at??""}});c(Ce)}catch(I){z.error("Error fetching events: "+I.message)}finally{g(!1)}},J=async()=>{try{let I=le.from("companies").select("id, name, logo_url").order("name");e&&(I=I.eq("id",e.company_id));const{data:Ee,error:pe}=await I;if(pe)throw pe;d(Ee)}catch(I){z.error("Error fetching companies: "+I.message)}},se=async(I,Ee,pe)=>{j(!0);try{let Ce=null,ge="";return pe&&(Ce=await kj(I,Ee==="background"?"backgrounds":"logos",pe)),ge=Dj(I,pe||"temp",Ee),Ce?(z.success(`${Ee==="background"?"Background":"Logo"} uploaded to cloud storage`),Ce):(z.error(`${Ee==="background"?"Background":"Logo"} stored locally (cloud upload failed)`),ge)}catch(Ce){return console.error(`Error uploading ${Ee}:`,Ce),z.error(`Error uploading ${Ee}: ${Ce.message}`),URL.createObjectURL(I)}finally{j(!1)}},X=async I=>{var Ee,pe;if(I.preventDefault(),!(!E.name.trim()||!E.company_id)){j(!0);try{let Ce;if(v)await r(v.id,E),Ce=v.id,z.success("Event updated successfully!");else{Ce=(await n(E)).id;const Be=window.location.port||"5174",Ke=`${window.location.port?`${window.location.protocol}//${window.location.hostname}:${Be}`:window.location.origin}/public/register/${Ce}`,He=await qn.toDataURL(Ke,{width:300,margin:2,errorCorrectionLevel:"M"});await r(Ce,{registration_qr:He}),z.success("Event created successfully!")}const ge={...E};if(E.custom_background&&E.custom_background.startsWith("blob:")){const be=document.getElementById("background-upload"),Be=(Ee=be==null?void 0:be.files)==null?void 0:Ee[0];if(Be){const Re=await se(Be,"background",Ce);ge.custom_background=Re}}if(E.custom_logo&&E.custom_logo.startsWith("blob:")){const be=document.getElementById("logo-upload"),Be=(pe=be==null?void 0:be.files)==null?void 0:pe[0];if(Be){const Re=await se(Be,"logo",Ce);ge.custom_logo=Re}}(v||ge.custom_background!==E.custom_background||ge.custom_logo!==E.custom_logo)&&await r(Ce,{custom_background:ge.custom_background,custom_logo:ge.custom_logo}),ce(),L()}catch(Ce){z.error("Error saving event: "+Ce.message)}finally{j(!1)}}},Q=async I=>{if(confirm("Are you sure you want to delete this event? This will also delete all attendees."))try{await o(I),z.success("Event deleted successfully!"),L()}catch(Ee){z.error("Error deleting event: "+Ee.message)}},ce=()=>{N({company_id:e?e.company_id:"",name:"",description:"",date:"",location:"",max_attendees:1e3,max_gallery_uploads:2,mode:"online",custom_background:"",custom_logo:""}),y(null),m(!1)},V=I=>{y(I),N({company_id:e?e.company_id:I.company_id,name:I.name,description:I.description||"",date:I.date?new Date(I.date).toISOString().slice(0,16):"",location:I.location||"",max_attendees:I.max_attendees||1e3,max_gallery_uploads:I.max_gallery_uploads||2,mode:I.mode||"online",custom_background:I.custom_background||"",custom_logo:I.custom_logo||""}),m(!0)},xe=I=>{const Ee=window.location.port||"5174";return`${window.location.port?`${window.location.protocol}//${window.location.hostname}:${Ee}`:window.location.origin}/public/register/${I}`},ne=I=>{if(!I.registration_qr)return;const Ee=document.createElement("a");Ee.href=I.registration_qr,Ee.download=`${I.name}-registration-qr.png`,document.body.appendChild(Ee),Ee.click(),document.body.removeChild(Ee)},_=async I=>{try{const Ee=window.location.port||"5174",Ce=`${window.location.port?`${window.location.protocol}//${window.location.hostname}:${Ee}`:window.location.origin}/public/register/${I.id}`,ge=await qn.toDataURL(Ce,{width:300,margin:2,errorCorrectionLevel:"M"}),{error:be}=await le.from("events").update({registration_qr:ge}).eq("id",I.id);if(be)throw be;z.success("QR Code regenerated successfully!"),L()}catch(Ee){z.error("Error generating QR code: "+Ee.message)}},S=I=>I?I.includes("/")&&!I.startsWith("blob:")?Tt(I):(I.startsWith("blob:"),I):"",U=(I,Ee)=>{w({field:I,value:Ee,originalValue:Ee})},$=async()=>{if(!(!D||!C))try{const{error:I}=await le.from("events").update({[D.field]:D.value}).eq("id",C.id);if(I)throw I;P({...C,[D.field]:D.value}),z.success("Event updated successfully"),w(null)}catch(I){z.error("Error updating event: "+I.message),w({...D,value:D.originalValue})}},R=()=>{w(null)},H=I=>{I.key==="Enter"?(I.preventDefault(),$()):I.key==="Escape"&&(I.preventDefault(),R())},me=async I=>{try{const{data:Ee,error:pe}=await le.from("events").select(`
          id,
          name,
          date,
          description,
          location
        `).eq("id",I.id).single();if(pe){z.error("Error fetching event details");return}const{data:Ce,error:ge}=await le.from("attendees").select(`
          id,
          name,
          email,
          phone,
          checked_in,
          created_at,
          check_in_time,
          company,
          staff_id,
          identification_number,
          table_number,
          seat_number,
          table_assignment
        `).eq("event_id",I.id);if(ge){z.error("Error fetching attendees");return}let be="";be+=` EVENT EXPORT REPORT
`,be+="=".repeat(80)+`
`,be+=` Report Generated: ${new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}
`,be+=` Event: ${Ee.name}
`,be+=` Event Date: ${Ee.date||"N/A"}
`,be+=` Location: ${Ee.location||"N/A"}
`,be+=` Description: ${Ee.description||"N/A"}
`,be+="=".repeat(80)+`

`,be+=` EVENT OVERVIEW
`,be+="-".repeat(40)+`
`,be+=`Total Attendees,${(Ce==null?void 0:Ce.length)||0}
`,be+=`Checked In,${(Ce==null?void 0:Ce.filter(He=>He.checked_in).length)||0}
`,be+=`Check-in Rate,${(Ce==null?void 0:Ce.length)>0?Math.round((Ce==null?void 0:Ce.filter(He=>He.checked_in).length)/(Ce==null?void 0:Ce.length)*100):0}%
`,be+=`
`,Ce&&Ce.length>0&&(be+=` ATTENDEE DETAILS
`,be+="-".repeat(40)+`
`,be+=`Name,Email,Phone,Company,Staff ID,ID Number,Status,Registration Date,Check-in Time,Table Info
`,Ce.forEach(He=>{const nt=He.checked_in?" Checked In":" Not Checked",mt=new Date(He.created_at).toLocaleDateString(),pt=He.check_in_time?new Date(He.check_in_time).toLocaleString():"N/A";let ie="N/A";He.table_number?(ie=`Table ${He.table_number}`,He.seat_number&&(ie+=` - Seat ${He.seat_number}`)):He.table_assignment&&(ie=He.table_assignment),be+=`${He.name||"N/A"},${He.email||"N/A"},${He.phone||"N/A"},${He.company||"N/A"},${He.staff_id||"N/A"},${He.identification_number||"N/A"},${nt},${mt},${pt},${ie}
`}),be+=`
`),be+="=".repeat(80)+`
`,be+=` Report Summary
`,be+="-".repeat(40)+`
`,be+=` Total Records: ${(Ce==null?void 0:Ce.length)||0}
`,be+=` Report Type: Event Export Report
`,be+=` Generated By: Event Management System
`,be+=` Format: CSV (Comma Separated Values)
`,be+="=".repeat(80)+`
`;const Be=new Blob([be],{type:"text/csv;charset=utf-8;"}),Re=URL.createObjectURL(Be),Ke=document.createElement("a");Ke.href=Re,Ke.download=`event-export-${Ee.name.replace(/[^a-zA-Z0-9]/g,"-")}.csv`,document.body.appendChild(Ke),Ke.click(),document.body.removeChild(Ke),URL.revokeObjectURL(Re),z.success("Event CSV exported successfully!")}catch(Ee){z.error("Error exporting event: "+Ee.message)}};return B?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):a&&C?s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center mb-6",children:[s.jsx("button",{onClick:()=>i("/admin/events"),className:"mr-4 p-2 hover:bg-gray-100 rounded-lg transition-colors",children:s.jsx(W3,{className:"h-5 w-5"})}),s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Event Details"}),s.jsxs("p",{className:"text-gray-600",children:["Detailed view of ",C.name]})]})]}),s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-2xl shadow-xl border border-white/20 p-8",children:[s.jsxs("div",{className:"flex justify-between items-start mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:C.name}),s.jsx("p",{className:"text-gray-600",children:C.company.name})]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>V(C),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[s.jsx(pr,{className:"h-4 w-4 mr-2"}),"Edit Event"]}),s.jsxs("button",{onClick:()=>Q(C.id),className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center",children:[s.jsx(is,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Event Information"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Event Name"}),(D==null?void 0:D.field)==="name"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:D.value,onChange:I=>w({...D,value:I.target.value}),className:"flex-1 bg-white p-3 rounded border focus:ring-2 focus:ring-blue-500",autoFocus:!0}),s.jsx("button",{onClick:$,className:"bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700 transition-colors",children:"Save"}),s.jsx("button",{onClick:R,className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition-colors",children:"Cancel"})]}):s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border group",children:[s.jsx("span",{className:"text-gray-900 font-medium",children:C.name}),s.jsx("button",{onClick:()=>U("name",C.name),className:"opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-700 transition-all",children:s.jsx(pr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(D==null?void 0:D.field)==="description"?s.jsxs("div",{className:"space-y-2",children:[s.jsx("textarea",{value:D.value,onChange:I=>w({...D,value:I.target.value}),onKeyDown:H,className:"w-full bg-white p-3 rounded border focus:ring-2 focus:ring-blue-500",rows:3,autoFocus:!0}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:$,className:"bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700 transition-colors",children:"Save"}),s.jsx("button",{onClick:R,className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition-colors",children:"Cancel"})]})]}):s.jsxs("div",{className:"flex items-start justify-between bg-white p-3 rounded border group",children:[s.jsx("span",{className:"text-gray-900 flex-1",children:C.description||"No description"}),s.jsx("button",{onClick:()=>U("description",C.description||""),className:"opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-700 transition-all ml-2",children:s.jsx(pr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Date & Time"}),(D==null?void 0:D.field)==="date"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"datetime-local",value:D.value,onChange:I=>w({...D,value:I.target.value}),onKeyDown:H,className:"flex-1 bg-white p-3 rounded border focus:ring-2 focus:ring-blue-500",autoFocus:!0}),s.jsx("button",{onClick:$,className:"bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700 transition-colors",children:"Save"}),s.jsx("button",{onClick:R,className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition-colors",children:"Cancel"})]}):s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border group",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(bt,{className:"h-4 w-4 mr-2 text-blue-600"}),s.jsx("span",{children:C.date?new Date(C.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}):"No date set"})]}),s.jsx("button",{onClick:()=>U("date",C.date||""),className:"opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-700 transition-all",children:s.jsx(pr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(D==null?void 0:D.field)==="location"?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"text",value:D.value,onChange:I=>w({...D,value:I.target.value}),onKeyDown:H,className:"flex-1 bg-white p-3 rounded border focus:ring-2 focus:ring-blue-500",autoFocus:!0}),s.jsx("button",{onClick:$,className:"bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700 transition-colors",children:"Save"}),s.jsx("button",{onClick:R,className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700 transition-colors",children:"Cancel"})]}):s.jsxs("div",{className:"flex items-center justify-between bg-white p-3 rounded border group",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(tn,{className:"h-4 w-4 mr-2 text-green-600"}),s.jsx("span",{children:C.location||"No location set"})]}),s.jsx("button",{onClick:()=>U("location",C.location||""),className:"opacity-0 group-hover:opacity-100 text-blue-600 hover:text-blue-700 transition-all",children:s.jsx(pr,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Attendees"}),s.jsx("div",{className:"bg-white p-3 rounded border text-center",children:s.jsx("span",{className:"text-lg font-semibold",children:C.max_attendees})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Max Gallery Uploads"}),s.jsx("div",{className:"bg-white p-3 rounded border text-center",children:s.jsx("span",{className:"text-lg font-semibold",children:C.max_gallery_uploads})})]})]})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Attendee Statistics"}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-600",children:C.attendee_count}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Registered"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-3xl font-bold text-green-600",children:C.checked_in_count}),s.jsx("div",{className:"text-sm text-gray-600",children:"Checked In"})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[s.jsx("span",{children:"Check-in Rate"}),s.jsxs("span",{children:[C.attendee_count>0?Math.round(C.checked_in_count/C.attendee_count*100):0,"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:s.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-500",style:{width:`${C.attendee_count>0?C.checked_in_count/C.attendee_count*100:0}%`}})})]})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Registration QR Code"}),s.jsx("div",{className:"text-center",children:C.registration_qr?s.jsxs("div",{children:[s.jsx("img",{src:S(C.registration_qr),alt:"Registration QR Code",className:"w-48 h-48 mx-auto border border-gray-200 rounded-lg shadow-sm"}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsxs("button",{onClick:()=>ne(C),className:"w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center",children:[s.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Download QR Code"]}),s.jsxs("button",{onClick:()=>_(C),className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[s.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Regenerate QR Code"]})]})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Qt,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"No QR code generated yet"}),s.jsx("button",{onClick:()=>_(C),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors",children:"Generate QR Code"})]})})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("button",{onClick:()=>navigator.clipboard.writeText(xe(C.id)),className:"bg-blue-600 text-white px-3 py-2 rounded text-sm hover:bg-blue-700 transition-colors flex items-center justify-center",title:"Copy registration link",children:[s.jsx(Qg,{className:"h-3 w-3 mr-1"}),"Copy Link"]}),s.jsxs("button",{onClick:()=>i(`/admin/attendees?eventId=${C.id}`),className:"bg-purple-600 text-white px-3 py-2 rounded text-sm hover:bg-purple-700 transition-colors flex items-center justify-center",title:"View and manage attendees",children:[s.jsx(vt,{className:"h-3 w-3 mr-1"}),"Attendees"]}),s.jsxs("button",{onClick:()=>i(`/admin/checkin?eventId=${C.id}`),className:"bg-green-600 text-white px-3 py-2 rounded text-sm hover:bg-green-700 transition-colors flex items-center justify-center",title:"Check-in system",children:[s.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Check-in"]}),s.jsxs("button",{onClick:()=>i(`/admin/seating?eventId=${C.id}`),className:"bg-orange-600 text-white px-3 py-2 rounded text-sm hover:bg-orange-700 transition-colors flex items-center justify-center",title:"Manage seating arrangement",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),"Seating"]}),s.jsxs("button",{onClick:()=>i(`/admin/gallery?eventId=${C.id}`),className:"bg-pink-600 text-white px-3 py-2 rounded text-sm hover:bg-pink-700 transition-colors flex items-center justify-center",title:"Event gallery management",children:[s.jsx(Nn,{className:"h-3 w-3 mr-1"}),"Gallery"]}),s.jsxs("button",{onClick:()=>i(`/admin/voting?eventId=${C.id}`),className:"bg-indigo-600 text-white px-3 py-2 rounded text-sm hover:bg-indigo-700 transition-colors flex items-center justify-center",title:"Voting system",children:[s.jsx(Vn,{className:"h-3 w-3 mr-1"}),"Voting"]}),s.jsxs("button",{onClick:()=>i(`/admin/lucky-draw?eventId=${C.id}`),className:"bg-yellow-600 text-white px-3 py-2 rounded text-sm hover:bg-yellow-700 transition-colors flex items-center justify-center",title:"Lucky draw system",children:[s.jsx(Jr,{className:"h-3 w-3 mr-1"}),"Lucky Draw"]}),s.jsxs("button",{onClick:()=>i(`/admin/welcome-monitor?eventId=${C.id}`),className:"bg-cyan-600 text-white px-3 py-2 rounded text-sm hover:bg-cyan-700 transition-colors flex items-center justify-center",title:"Welcome monitor display",children:[s.jsx(wr,{className:"h-3 w-3 mr-1"}),"Welcome"]}),s.jsxs("button",{onClick:()=>i(`/admin/voting-monitor?eventId=${C.id}`),className:"bg-violet-600 text-white px-3 py-2 rounded text-sm hover:bg-violet-700 transition-colors flex items-center justify-center",title:"Voting monitor display",children:[s.jsx(Er,{className:"h-3 w-3 mr-1"}),"Monitor"]}),s.jsxs("button",{onClick:()=>me(C),className:"bg-emerald-600 text-white px-3 py-2 rounded text-sm hover:bg-emerald-700 transition-colors flex items-center justify-center",title:"Export event data to CSV",children:[s.jsx(Ia,{className:"h-3 w-3 mr-1"}),"Export"]})]})]})]})]})]})]}):s.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-blue-50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:"Event Management"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Manage events across all companies"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>i("/admin/events/quick-tools"),className:"bg-gradient-to-r from-purple-500 to-pink-600 text-white px-4 py-2 rounded-xl hover:from-purple-600 hover:to-pink-700 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[s.jsx(Er,{className:"h-5 w-5 mr-2"}),"Quick Tools"]}),s.jsxs("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-4 py-2 rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-200 flex items-center shadow-lg hover:shadow-xl transform hover:-translate-y-0.5",children:[s.jsx(Sr,{className:"h-5 w-5 mr-2"}),"Add Event"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:s.jsx(bt,{className:"h-5 w-5 text-green-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Events"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:l.length})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:s.jsx(vt,{className:"h-5 w-5 text-blue-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Attendees"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:l.reduce((I,Ee)=>I+Ee.attendee_count,0)})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(Qt,{className:"h-5 w-5 text-purple-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Checked In"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:l.reduce((I,Ee)=>I+Ee.checked_in_count,0)})]})]})}),s.jsx("div",{className:"bg-white rounded-xl p-4 shadow-lg border border-gray-100",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:s.jsx(Sn,{className:"h-5 w-5 text-orange-600"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Companies"}),s.jsx("p",{className:"text-xl font-bold text-gray-900",children:new Set(l.map(I=>I.company_id)).size})]})]})})]}),s.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:l.map(I=>s.jsxs("div",{className:"bg-white/80 backdrop-blur-xl rounded-xl shadow-lg border border-white/20 p-4 hover:shadow-xl transition-all duration-300 card-hover",children:[s.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-bold px-2 py-1 rounded text-white text-sm",style:{backgroundColor:jj(I.company_id)},children:I.name}),I.company.logo_url&&s.jsx("img",{src:Tt(I.company.logo_url),alt:"Company Logo",className:"h-6 w-6 object-contain rounded",onError:Ee=>Ee.currentTarget.style.display="none"})]}),s.jsx("p",{className:"text-xs font-semibold bg-gradient-to-r from-blue-500 to-cyan-500 bg-clip-text text-transparent",children:I.company.name}),I.description&&s.jsx("p",{className:"text-gray-600 text-xs mb-3 line-clamp-2 bg-gray-50 p-2 rounded",children:I.description}),s.jsxs("div",{className:"space-y-2 mb-3",children:[I.date&&s.jsxs("div",{className:"flex items-center text-gray-600 text-xs bg-blue-50 p-1.5 rounded",children:[s.jsx(bt,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:new Date(I.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),I.location&&s.jsxs("div",{className:"flex items-center text-gray-600 text-xs bg-green-50 p-1.5 rounded",children:[s.jsx(tn,{className:"h-3 w-3 mr-1"}),s.jsx("span",{className:"truncate",children:I.location})]}),s.jsxs("div",{className:"flex items-center text-gray-600 text-xs bg-purple-50 p-1.5 rounded",children:[s.jsx(vt,{className:"h-3 w-3 mr-1"}),s.jsxs("span",{children:[I.attendee_count," registered  ",I.checked_in_count," checked in"]})]})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-3 mb-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[I.registration_qr&&s.jsxs("div",{className:"flex-shrink-0",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Registration QR"}),s.jsx("img",{src:Tt(I.registration_qr),alt:"Registration QR Code",className:"w-24 h-24 border border-blue-200 rounded shadow-sm"})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:()=>navigator.clipboard.writeText(xe(I.id)),className:"text-blue-600 hover:text-blue-700 text-xs font-semibold flex items-center bg-blue-50 px-2 py-1 rounded hover:bg-blue-100 transition-all duration-300",children:[s.jsx(Qg,{className:"h-3 w-3 mr-1"}),"Copy Link"]}),I.registration_qr&&s.jsxs("button",{onClick:()=>ne(I),className:"text-blue-600 hover:text-blue-700 text-xs font-semibold flex items-center bg-blue-50 px-2 py-1 rounded hover:bg-blue-100 transition-all duration-300",children:[s.jsx(Qt,{className:"h-3 w-3 mr-1"}),"Download QR"]}),s.jsxs("button",{onClick:()=>_(I),className:"text-green-600 hover:text-green-700 text-xs font-semibold flex items-center bg-green-50 px-2 py-1 rounded hover:bg-green-100 transition-all duration-300",title:"Generate/Refresh QR Code",children:[s.jsx(Qt,{className:"h-3 w-3 mr-1"}),I.registration_qr?"Refresh QR":"Generate QR"]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["Mode: ",I.mode||"online"]}),s.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["Max: ",I.max_attendees]}),I.max_gallery_uploads&&s.jsxs("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-1 rounded-full",children:["Gallery: ",I.max_gallery_uploads]})]})]})]}),s.jsxs("div",{className:"flex justify-end space-x-2 mt-3 pt-2 border-t border-gray-100",children:[s.jsxs("button",{onClick:()=>me(I),className:"text-emerald-600 hover:text-emerald-700 text-xs font-semibold flex items-center bg-emerald-50 px-2 py-1 rounded hover:bg-emerald-100 transition-all duration-300",title:"Export event data to CSV",children:[s.jsx(Ia,{className:"h-3 w-3 mr-1"}),"Export"]}),s.jsxs("button",{onClick:()=>V(I),className:"text-blue-600 hover:text-blue-700 text-xs font-semibold flex items-center bg-blue-50 px-2 py-1 rounded hover:bg-blue-100 transition-all duration-300",children:[s.jsx(pr,{className:"h-3 w-3 mr-1"}),"Edit"]}),s.jsxs("button",{onClick:()=>Q(I.id),className:"text-red-600 hover:text-red-700 text-xs font-semibold flex items-center bg-red-50 px-2 py-1 rounded hover:bg-red-100 transition-all duration-300",children:[s.jsx(is,{className:"h-3 w-3 mr-1"}),"Delete"]})]})]})]},I.id))}),!B&&l.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"p-4 bg-gradient-to-br from-gray-100 to-gray-200 rounded-2xl w-fit mx-auto mb-6",children:s.jsx(bt,{className:"h-16 w-16 text-gray-400"})}),s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3",children:"No events found"}),s.jsx("p",{className:"text-gray-600 mb-6 text-lg",children:e?"Create your first event for your company":"Create your first event to get started"}),s.jsx("button",{onClick:()=>m(!0),className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white px-6 py-3 rounded-xl hover:from-blue-600 hover:to-cyan-600 transition-all duration-300 shadow-lg font-semibold",children:"Add Event"})]}),B&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading events..."})]}),f&&s.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/20 p-8 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-2xl font-bold mb-6 bg-gradient-to-r from-green-600 to-emerald-600 bg-clip-text text-transparent",children:v?"Edit Event":"Create New Event"}),s.jsxs("form",{onSubmit:X,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e?"Company":"Company *"}),e?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:((W=x.find(I=>I.id===e.company_id))==null?void 0:W.name)||"Your Company"}):s.jsxs("select",{value:E.company_id,onChange:I=>N({...E,company_id:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",required:!0,children:[s.jsx("option",{value:"",children:"Select a company"}),x.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Name *"}),s.jsx("input",{type:"text",value:E.name,onChange:I=>N({...E,name:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",placeholder:"Enter event name",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:E.description,onChange:I=>N({...E,description:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",rows:3,placeholder:"Enter event description"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),s.jsx("input",{type:"datetime-local",value:E.date,onChange:I=>N({...E,date:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attendees"}),s.jsx("input",{type:"number",value:E.max_attendees,onChange:I=>N({...E,max_attendees:parseInt(I.target.value)||1e3}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",min:"1"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Gallery Uploads"}),s.jsx("input",{type:"number",value:E.max_gallery_uploads,onChange:I=>N({...E,max_gallery_uploads:parseInt(I.target.value)||2}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",min:"1",max:"10"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),s.jsx("input",{type:"text",value:E.location,onChange:I=>N({...E,location:I.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-all duration-300",placeholder:"Enter event location"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Data Mode"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900",value:E.mode,onChange:I=>N({...E,mode:I.target.value}),required:!0,children:[s.jsx("option",{value:"online",children:"Online (Supabase)"}),s.jsx("option",{value:"offline",children:"Offline (Local Only)"}),s.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Background (Optional)"}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors",children:E.custom_background?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:S(E.custom_background),alt:"Background Preview",className:"max-w-full h-32 object-cover mx-auto rounded-lg",onError:I=>{console.error("Error loading background:",I),I.currentTarget.style.display="none"}}),s.jsx("button",{type:"button",onClick:()=>N({...E,custom_background:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Remove Background"})]}):s.jsxs("div",{children:[s.jsx(Nn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Upload custom background"}),s.jsx("input",{type:"file",accept:"image/*",onChange:I=>{var pe;const Ee=(pe=I.target.files)==null?void 0:pe[0];if(Ee){const Ce=URL.createObjectURL(Ee);N({...E,custom_background:Ce})}},className:"hidden",id:"background-upload"}),s.jsx("label",{htmlFor:"background-upload",className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Image"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Logo (Optional)"}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors",children:E.custom_logo?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:S(E.custom_logo),alt:"Logo Preview",className:"max-w-full h-32 object-contain mx-auto rounded-lg",onError:I=>{console.error("Error loading logo:",I),I.currentTarget.style.display="none"}}),s.jsx("button",{type:"button",onClick:()=>N({...E,custom_logo:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Remove Logo"})]}):s.jsxs("div",{children:[s.jsx(Nn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Upload custom logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:I=>{var pe;const Ee=(pe=I.target.files)==null?void 0:pe[0];if(Ee){const Ce=URL.createObjectURL(Ee);N({...E,custom_logo:Ce})}},className:"hidden",id:"logo-upload"}),s.jsx("label",{htmlFor:"logo-upload",className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Image"})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:ce,className:"px-6 py-3 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-300 font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:b,className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[b&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),v?"Update Event":"Create Event"]})]})]})]})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("div",{className:"p-6 border-b border-gray-200",children:s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:v?"Edit Event":"Create New Event"})}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:X,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Name"}),s.jsx("input",{type:"text",value:E.name,onChange:I=>N({...E,name:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Company"}),s.jsxs("select",{value:E.company_id,onChange:I=>N({...E,company_id:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900",required:!0,children:[s.jsx("option",{value:"",children:"Select Company"}),x.map(I=>s.jsx("option",{value:I.id,children:I.name},I.id))]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:E.description||"",onChange:I=>N({...E,description:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900",rows:3})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date & Time"}),s.jsx("input",{type:"datetime-local",value:E.date||"",onChange:I=>N({...E,date:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),s.jsx("input",{type:"text",value:E.location||"",onChange:I=>N({...E,location:I.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Attendees"}),s.jsx("input",{type:"number",value:E.max_attendees||"",onChange:I=>N({...E,max_attendees:parseInt(I.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Gallery Uploads"}),s.jsx("input",{type:"number",value:E.max_gallery_uploads||2,onChange:I=>N({...E,max_gallery_uploads:parseInt(I.target.value)||2}),className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Event Data Mode"}),s.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md text-gray-900",value:E.mode,onChange:I=>N({...E,mode:I.target.value}),required:!0,children:[s.jsx("option",{value:"online",children:"Online (Supabase)"}),s.jsx("option",{value:"offline",children:"Offline (Local Only)"}),s.jsx("option",{value:"hybrid",children:"Hybrid (Sync)"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Background (Optional)"}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors",children:E.custom_background?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:S(E.custom_background),alt:"Background Preview",className:"max-w-full h-32 object-cover mx-auto rounded-lg",onError:I=>{console.error("Error loading background:",I),I.currentTarget.style.display="none"}}),s.jsx("button",{type:"button",onClick:()=>N({...E,custom_background:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Remove Background"})]}):s.jsxs("div",{children:[s.jsx(Nn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Upload custom background"}),s.jsx("input",{type:"file",accept:"image/*",onChange:I=>{var pe;const Ee=(pe=I.target.files)==null?void 0:pe[0];if(Ee){const Ce=URL.createObjectURL(Ee);N({...E,custom_background:Ce})}},className:"hidden",id:"background-upload"}),s.jsx("label",{htmlFor:"background-upload",className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Image"})]})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Custom Logo (Optional)"}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center hover:border-blue-400 transition-colors",children:E.custom_logo?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:S(E.custom_logo),alt:"Logo Preview",className:"max-w-full h-32 object-contain mx-auto rounded-lg",onError:I=>{console.error("Error loading logo:",I),I.currentTarget.style.display="none"}}),s.jsx("button",{type:"button",onClick:()=>N({...E,custom_logo:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Remove Logo"})]}):s.jsxs("div",{children:[s.jsx(Nn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm mb-2",children:"Upload custom logo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:I=>{var pe;const Ee=(pe=I.target.files)==null?void 0:pe[0];if(Ee){const Ce=URL.createObjectURL(Ee);N({...E,custom_logo:Ce})}},className:"hidden",id:"logo-upload"}),s.jsx("label",{htmlFor:"logo-upload",className:"inline-block bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Image"})]})})]})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:ce,className:"px-6 py-3 text-gray-600 hover:text-gray-800 bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-300 font-medium",children:"Cancel"}),s.jsxs("button",{type:"submit",disabled:b,className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white px-6 py-3 rounded-xl hover:from-green-600 hover:to-emerald-600 transition-all duration-300 font-semibold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[b&&s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),v?"Update Event":"Create Event"]})]})]})})]})})]})})}function Fj({userCompany:e}){const{getEvents:t,getAttendees:n,createAttendee:r,updateAttendee:o,deleteAttendee:a}=Wf(),[i]=Xs(),[l,c]=A.useState([]),[x,d]=A.useState(""),[f,m]=A.useState([]),[v,y]=A.useState(!0),[C,P]=A.useState(!1),[B,g]=A.useState(""),[b,j]=A.useState("all"),[D,w]=A.useState(!1),[E,N]=A.useState(null),[M,L]=A.useState({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_type:"Regular"});A.useEffect(()=>{J()},[]),A.useEffect(()=>{const W=i.get("eventId");W&&l.length>0&&d(W)},[i,l]),A.useEffect(()=>{x&&se()},[x]);const J=async()=>{try{y(!0);const W=await t(e==null?void 0:e.company_id),I=(W==null?void 0:W.map(Ee=>({...Ee,company:{name:"Company"}})))||[];c(I),e&&I&&I.length>0&&d(I[0].id)}catch(W){z.error("Error fetching events: "+W.message)}finally{y(!1)}},se=async()=>{try{P(!0);const W=await n(x);m(W||[])}catch(W){z.error("Error fetching attendees: "+W.message)}finally{P(!1)}},X=()=>{N(null),L({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_type:"Regular"}),w(!0)},Q=W=>{N(W),L({name:W.name,email:W.email||"",phone:W.phone||"",identification_number:W.identification_number,staff_id:W.staff_id||"",table_type:W.table_type||"Regular"}),w(!0)},ce=async W=>{if(W.preventDefault(),!M.name.trim()||!M.identification_number.trim()){z.error("Name and Identification Number are required");return}try{const I=await U(M.name,M.identification_number,M.staff_id,E==null?void 0:E.id);if(I.length>0){z.error(`Validation failed: ${I.join(", ")}`);return}E?(await o(E.id,{name:M.name,email:M.email||null,phone:M.phone||null,identification_number:M.identification_number,staff_id:M.staff_id||null,table_type:M.table_type}),z.success("Attendee updated successfully!")):(await r({...M,event_id:x,checked_in:!1,check_in_time:null,table_type:M.table_type}),z.success("Attendee created successfully!")),w(!1),se()}catch(I){z.error("Error saving attendee: "+I.message)}},V=async W=>{if(confirm("Are you sure you want to delete this attendee?"))try{await a(W),z.success("Attendee deleted successfully!"),se()}catch(I){z.error("Error deleting attendee: "+I.message)}},xe=async W=>{try{const{error:I}=await le.from("attendees").update({checked_in:!1,check_in_time:null}).eq("id",W);if(I)throw I;z.success("Check-in status reset!"),se()}catch(I){z.error("Error resetting check-in: "+I.message)}},ne=async W=>{try{const I=window.location.port||"5174",pe=`${window.location.port?`${window.location.protocol}//${window.location.hostname}:${I}`:window.location.origin}/public/checkin?event=${x}&attendee=${W.id}`,Ce=await qn.toDataURL(pe,{width:200,margin:2,errorCorrectionLevel:"M"}),{error:ge}=await le.from("attendees").update({qr_code:Ce}).eq("id",W.id);if(ge)throw ge;z.success("QR Code generated successfully!"),se()}catch(I){z.error("Error generating QR code: "+I.message)}},_=W=>{if(!W.qr_code)return;const I=document.createElement("a");I.href=W.qr_code,I.download=`${W.name}-qr-code.png`,document.body.appendChild(I),I.click(),document.body.removeChild(I)},S=async()=>{try{const W=f.filter(I=>!I.qr_code);if(W.length===0){z.success("All attendees already have QR codes!");return}z.loading(`Generating QR codes for ${W.length} attendees...`);for(const I of W)await ne(I),await new Promise(Ee=>setTimeout(Ee,100));z.success(`Generated QR codes for ${W.length} attendees!`)}catch(W){z.error("Error generating QR codes: "+W.message)}},U=async(W,I,Ee,pe)=>{try{let Ce=le.from("attendees").select("id, name, identification_number, staff_id").eq("event_id",x).or(`name.eq.${W},identification_number.eq.${I}`);Ee&&(Ce=Ce.or(`staff_id.eq.${Ee}`)),pe&&(Ce=Ce.neq("id",pe));const{data:ge,error:be}=await Ce;if(be)throw be;const Be=[];return ge&&ge.forEach(Re=>{Re.name.toLowerCase()===W.toLowerCase()&&Be.push("Name already exists"),Re.identification_number===I&&Be.push("Identification number already exists"),Ee&&Re.staff_id===Ee&&Be.push("Staff ID already exists")}),Be}catch(Ce){return console.error("Error checking uniqueness:",Ce),["Error checking uniqueness"]}},$=async W=>{var Ee;const I=(Ee=W.target.files)==null?void 0:Ee[0];if(I){if(!x){z.error("Please select an event first");return}try{const Ce=(await I.text()).split(`
`),ge=Ce[0].split(",").map(ie=>ie.trim()),be=ge.findIndex(ie=>ie.toLowerCase().includes("name")),Be=ge.findIndex(ie=>ie.toLowerCase().includes("email")),Re=ge.findIndex(ie=>ie.toLowerCase().includes("phone")),Ke=ge.findIndex(ie=>ie.toLowerCase().includes("id")&&!ie.toLowerCase().includes("staff")),He=ge.findIndex(ie=>ie.toLowerCase().includes("staff")),nt=ge.findIndex(ie=>ie.toLowerCase().includes("table"));if(be===-1||Ke===-1){z.error("CSV must contain Name and ID Number columns");return}const mt=[];for(let ie=1;ie<Ce.length;ie++){const Ne=Ce[ie].trim();if(!Ne)continue;const ze=Ne.split(",").map(ct=>ct.trim()),Me={name:ze[be]||"",email:ze[Be]||null,phone:ze[Re]||null,identification_number:ze[Ke]||"",staff_id:ze[He]||null,table_type:ze[nt]||"Regular",event_id:x,checked_in:!1,check_in_time:null};Me.name&&Me.identification_number&&mt.push(Me)}if(mt.length===0){z.error("No valid attendees found in CSV");return}const{error:pt}=await le.from("attendees").insert(mt);if(pt)throw pt;z.success(`${mt.length} attendees imported successfully!`),se()}catch(pe){z.error("Error importing CSV: "+pe.message)}W.target.value=""}},R=()=>{const W=H(),I=[["Name","Email","Phone","ID Number","Staff ID","Table Type","Checked In","Check-in Time"],...W.map(ge=>[ge.name,ge.email||"",ge.phone||"",ge.identification_number,ge.staff_id||"",ge.table_type||"Regular",ge.checked_in?"Yes":"No",ge.check_in_time?new Date(ge.check_in_time).toLocaleString():""])].map(ge=>ge.join(",")).join(`
`),Ee=new Blob([I],{type:"text/csv"}),pe=window.URL.createObjectURL(Ee),Ce=document.createElement("a");Ce.href=pe,Ce.download=`attendees-${x}.csv`,Ce.click(),window.URL.revokeObjectURL(pe)},H=()=>{let W=f;return B&&(W=W.filter(I=>I.name.toLowerCase().includes(B.toLowerCase())||I.identification_number.toLowerCase().includes(B.toLowerCase())||I.staff_id&&I.staff_id.toLowerCase().includes(B.toLowerCase())||I.email&&I.email.toLowerCase().includes(B.toLowerCase()))),b==="checked-in"?W=W.filter(I=>I.checked_in):b==="not-checked-in"&&(W=W.filter(I=>!I.checked_in)),W},me=H();return v?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Attendee Management"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage attendees for your events"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:X,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[s.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add Attendee"]}),s.jsxs("label",{className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center cursor-pointer",children:[s.jsx(xu,{className:"h-4 w-4 mr-2"}),"Import CSV",s.jsx("input",{type:"file",accept:".csv",onChange:$,className:"hidden"})]}),s.jsxs("button",{onClick:S,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",title:"Generate QR codes for all attendees",children:[s.jsx(Qt,{className:"h-4 w-4 mr-2"}),"Generate All QR"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),l.length===0?s.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:"No events found. Create an event first."}):s.jsxs("select",{value:x,onChange:W=>d(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Choose an event"}),l.map(W=>s.jsx("option",{value:W.id,children:e?W.name:`${W.name} (${W.company.name})`},W.id))]})]}),x&&s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Attendee Summary"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[f.length," total"]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[f.filter(W=>W.checked_in).length," checked in"]})]})})]})}),x&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Attendees"}),s.jsxs("div",{className:"relative",children:[s.jsx(xa,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),s.jsx("input",{type:"text",value:B,onChange:W=>g(W.target.value),placeholder:"Search by name, ID, email...",className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter Status"}),s.jsxs("select",{value:b,onChange:W=>j(W.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"all",children:"All Attendees"}),s.jsx("option",{value:"checked-in",children:"Checked In"}),s.jsx("option",{value:"not-checked-in",children:"Not Checked In"})]})]}),s.jsx("div",{className:"flex items-end",children:s.jsxs("button",{onClick:R,className:"w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center justify-center",children:[s.jsx(Ia,{className:"h-4 w-4 mr-2"}),"Export CSV"]})})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsxs("h2",{className:"text-lg font-semibold",children:["Attendees (",me.length,")"]})}),C?s.jsxs("div",{className:"p-8 text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Loading attendees..."})]}):me.length===0?s.jsxs("div",{className:"p-8 text-center text-gray-500",children:[s.jsx(vt,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No attendees found"}),s.jsx("p",{className:"text-sm mt-2",children:"Add attendees or adjust your search/filter"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Attendee"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Table Type"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"QR Code"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:me.map(W=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:W.name}),s.jsxs("div",{className:"text-sm text-gray-500",children:["ID: ",W.identification_number]}),W.staff_id&&s.jsxs("div",{className:"text-sm text-gray-500",children:["Staff: ",W.staff_id]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"text-sm text-gray-900",children:[W.email&&s.jsx("div",{children:W.email}),W.phone&&s.jsx("div",{children:W.phone})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"text-sm text-gray-900",children:W.table_type||"Regular"})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${W.checked_in?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:W.checked_in?"Checked In":"Not Checked In"}),W.check_in_time&&s.jsx("div",{className:"text-xs text-gray-500 mt-1",children:new Date(W.check_in_time).toLocaleString()})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("div",{className:"flex space-x-2",children:W.qr_code?s.jsx("img",{src:W.qr_code,alt:"QR Code",className:"w-8 h-8 border rounded",title:"Click to download",onClick:()=>_(W),style:{cursor:"pointer"}}):s.jsx("button",{onClick:()=>ne(W),className:"text-blue-600 hover:text-blue-700 text-xs font-semibold flex items-center bg-blue-50 px-2 py-1 rounded hover:bg-blue-100 transition-all duration-300",title:"Generate QR Code",children:s.jsx(Qt,{className:"h-3 w-3"})})})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{onClick:()=>Q(W),className:"text-blue-600 hover:text-blue-900",children:s.jsx(pr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>V(W.id),className:"text-red-600 hover:text-red-900",children:s.jsx(is,{className:"h-4 w-4"})}),W.checked_in&&s.jsx("button",{onClick:()=>xe(W.id),className:"text-orange-600 hover:text-orange-900",title:"Reset Check-in",children:s.jsx(vt,{className:"h-4 w-4"})})]})})]},W.id))})]})})]})]}),D&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:E?"Edit Attendee":"Add Attendee"}),s.jsxs("form",{onSubmit:ce,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Name *"}),s.jsx("input",{type:"text",value:M.name,onChange:W=>L({...M,name:W.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Email"}),s.jsx("input",{type:"email",value:M.email,onChange:W=>L({...M,email:W.target.value}),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone"}),s.jsx("input",{type:"tel",value:M.phone,onChange:W=>L({...M,phone:W.target.value}),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Identification Number *"}),s.jsx("input",{type:"text",value:M.identification_number,onChange:W=>L({...M,identification_number:W.target.value}),className:"w-full border rounded px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Staff ID"}),s.jsx("input",{type:"text",value:M.staff_id,onChange:W=>L({...M,staff_id:W.target.value}),className:"w-full border rounded px-3 py-2"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Type"}),s.jsxs("select",{value:M.table_type,onChange:W=>L({...M,table_type:W.target.value}),className:"w-full border rounded px-3 py-2",children:[s.jsx("option",{value:"Regular",children:"Regular"}),s.jsx("option",{value:"VIP",children:"VIP"}),s.jsx("option",{value:"VVIP",children:"VVIP"}),s.jsx("option",{value:"Staff",children:"Staff"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:E?"Update":"Create"})]})]})]})})]})}var Q1={exports:{}};(function(e,t){(function(r,o){e.exports=o()})(typeof self<"u"?self:Cn,function(){return function(n){var r={};function o(a){if(r[a])return r[a].exports;var i=r[a]={i:a,l:!1,exports:{}};return n[a].call(i.exports,i,i.exports,o),i.l=!0,i.exports}return o.m=n,o.c=r,o.d=function(a,i,l){o.o(a,i)||Object.defineProperty(a,i,{configurable:!1,enumerable:!0,get:l})},o.n=function(a){var i=a&&a.__esModule?function(){return a.default}:function(){return a};return o.d(i,"a",i),i},o.o=function(a,i){return Object.prototype.hasOwnProperty.call(a,i)},o.p="",o(o.s=3)}([function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function i(l,c){this.width=c,this.height=l.length/c,this.data=l}return i.createEmpty=function(l,c){return new i(new Uint8ClampedArray(l*c),l)},i.prototype.get=function(l,c){return l<0||l>=this.width||c<0||c>=this.height?!1:!!this.data[c*this.width+l]},i.prototype.set=function(l,c,x){this.data[c*this.width+l]=x?1:0},i.prototype.setRegion=function(l,c,x,d,f){for(var m=c;m<c+d;m++)for(var v=l;v<l+x;v++)this.set(v,m,!!f)},i}();r.BitMatrix=a},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(2);function i(c,x){return c^x}r.addOrSubtractGF=i;var l=function(){function c(x,d,f){this.primitive=x,this.size=d,this.generatorBase=f,this.expTable=new Array(this.size),this.logTable=new Array(this.size);for(var m=1,v=0;v<this.size;v++)this.expTable[v]=m,m=m*2,m>=this.size&&(m=(m^this.primitive)&this.size-1);for(var v=0;v<this.size-1;v++)this.logTable[this.expTable[v]]=v;this.zero=new a.default(this,Uint8ClampedArray.from([0])),this.one=new a.default(this,Uint8ClampedArray.from([1]))}return c.prototype.multiply=function(x,d){return x===0||d===0?0:this.expTable[(this.logTable[x]+this.logTable[d])%(this.size-1)]},c.prototype.inverse=function(x){if(x===0)throw new Error("Can't invert 0");return this.expTable[this.size-this.logTable[x]-1]},c.prototype.buildMonomial=function(x,d){if(x<0)throw new Error("Invalid monomial degree less than 0");if(d===0)return this.zero;var f=new Uint8ClampedArray(x+1);return f[0]=d,new a.default(this,f)},c.prototype.log=function(x){if(x===0)throw new Error("Can't take log(0)");return this.logTable[x]},c.prototype.exp=function(x){return this.expTable[x]},c}();r.default=l},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(1),i=function(){function l(c,x){if(x.length===0)throw new Error("No coefficients.");this.field=c;var d=x.length;if(d>1&&x[0]===0){for(var f=1;f<d&&x[f]===0;)f++;if(f===d)this.coefficients=c.zero.coefficients;else{this.coefficients=new Uint8ClampedArray(d-f);for(var m=0;m<this.coefficients.length;m++)this.coefficients[m]=x[f+m]}}else this.coefficients=x}return l.prototype.degree=function(){return this.coefficients.length-1},l.prototype.isZero=function(){return this.coefficients[0]===0},l.prototype.getCoefficient=function(c){return this.coefficients[this.coefficients.length-1-c]},l.prototype.addOrSubtract=function(c){var x;if(this.isZero())return c;if(c.isZero())return this;var d=this.coefficients,f=c.coefficients;d.length>f.length&&(x=[f,d],d=x[0],f=x[1]);for(var m=new Uint8ClampedArray(f.length),v=f.length-d.length,y=0;y<v;y++)m[y]=f[y];for(var y=v;y<f.length;y++)m[y]=a.addOrSubtractGF(d[y-v],f[y]);return new l(this.field,m)},l.prototype.multiply=function(c){if(c===0)return this.field.zero;if(c===1)return this;for(var x=this.coefficients.length,d=new Uint8ClampedArray(x),f=0;f<x;f++)d[f]=this.field.multiply(this.coefficients[f],c);return new l(this.field,d)},l.prototype.multiplyPoly=function(c){if(this.isZero()||c.isZero())return this.field.zero;for(var x=this.coefficients,d=x.length,f=c.coefficients,m=f.length,v=new Uint8ClampedArray(d+m-1),y=0;y<d;y++)for(var C=x[y],P=0;P<m;P++)v[y+P]=a.addOrSubtractGF(v[y+P],this.field.multiply(C,f[P]));return new l(this.field,v)},l.prototype.multiplyByMonomial=function(c,x){if(c<0)throw new Error("Invalid degree less than 0");if(x===0)return this.field.zero;for(var d=this.coefficients.length,f=new Uint8ClampedArray(d+c),m=0;m<d;m++)f[m]=this.field.multiply(this.coefficients[m],x);return new l(this.field,f)},l.prototype.evaluateAt=function(c){var x=0;if(c===0)return this.getCoefficient(0);var d=this.coefficients.length;if(c===1)return this.coefficients.forEach(function(m){x=a.addOrSubtractGF(x,m)}),x;x=this.coefficients[0];for(var f=1;f<d;f++)x=a.addOrSubtractGF(this.field.multiply(c,x),this.coefficients[f]);return x},l}();r.default=i},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(4),i=o(5),l=o(11),c=o(12);function x(m){var v=c.locate(m);if(!v)return null;for(var y=0,C=v;y<C.length;y++){var P=C[y],B=l.extract(m,P),g=i.decode(B.matrix);if(g)return{binaryData:g.bytes,data:g.text,chunks:g.chunks,version:g.version,location:{topRightCorner:B.mappingFunction(P.dimension,0),topLeftCorner:B.mappingFunction(0,0),bottomRightCorner:B.mappingFunction(P.dimension,P.dimension),bottomLeftCorner:B.mappingFunction(0,P.dimension),topRightFinderPattern:P.topRight,topLeftFinderPattern:P.topLeft,bottomLeftFinderPattern:P.bottomLeft,bottomRightAlignmentPattern:P.alignmentPattern}}}return null}var d={inversionAttempts:"attemptBoth"};function f(m,v,y,C){C===void 0&&(C={});var P=d;Object.keys(P||{}).forEach(function(E){P[E]=C[E]||P[E]});var B=P.inversionAttempts==="attemptBoth"||P.inversionAttempts==="invertFirst",g=P.inversionAttempts==="onlyInvert"||P.inversionAttempts==="invertFirst",b=a.binarize(m,v,y,B),j=b.binarized,D=b.inverted,w=x(g?D:j);return!w&&(P.inversionAttempts==="attemptBoth"||P.inversionAttempts==="invertFirst")&&(w=x(g?j:D)),w}f.default=f,r.default=f},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(0),i=8,l=24;function c(f,m,v){return f<m?m:f>v?v:f}var x=function(){function f(m,v){this.width=m,this.data=new Uint8ClampedArray(m*v)}return f.prototype.get=function(m,v){return this.data[v*this.width+m]},f.prototype.set=function(m,v,y){this.data[v*this.width+m]=y},f}();function d(f,m,v,y){if(f.length!==m*v*4)throw new Error("Malformed data passed to binarizer.");for(var C=new x(m,v),P=0;P<m;P++)for(var B=0;B<v;B++){var g=f[(B*m+P)*4+0],b=f[(B*m+P)*4+1],j=f[(B*m+P)*4+2];C.set(P,B,.2126*g+.7152*b+.0722*j)}for(var D=Math.ceil(m/i),w=Math.ceil(v/i),E=new x(D,w),N=0;N<w;N++)for(var M=0;M<D;M++){for(var L=0,J=1/0,se=0,B=0;B<i;B++)for(var P=0;P<i;P++){var X=C.get(M*i+P,N*i+B);L+=X,J=Math.min(J,X),se=Math.max(se,X)}var Q=L/Math.pow(i,2);if(se-J<=l&&(Q=J/2,N>0&&M>0)){var ce=(E.get(M,N-1)+2*E.get(M-1,N)+E.get(M-1,N-1))/4;J<ce&&(Q=ce)}E.set(M,N,Q)}var V=a.BitMatrix.createEmpty(m,v),xe=null;y&&(xe=a.BitMatrix.createEmpty(m,v));for(var N=0;N<w;N++)for(var M=0;M<D;M++){for(var ne=c(M,2,D-3),_=c(N,2,w-3),L=0,S=-2;S<=2;S++)for(var U=-2;U<=2;U++)L+=E.get(ne+S,_+U);for(var $=L/25,S=0;S<i;S++)for(var U=0;U<i;U++){var P=M*i+S,B=N*i+U,R=C.get(P,B);V.set(P,B,R<=$),y&&xe.set(P,B,!(R<=$))}}return y?{binarized:V,inverted:xe}:{binarized:V}}r.binarize=d},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(0),i=o(6),l=o(9),c=o(10);function x(j,D){for(var w=j^D,E=0;w;)E++,w&=w-1;return E}function d(j,D){return D<<1|j}var f=[{bits:21522,formatInfo:{errorCorrectionLevel:1,dataMask:0}},{bits:20773,formatInfo:{errorCorrectionLevel:1,dataMask:1}},{bits:24188,formatInfo:{errorCorrectionLevel:1,dataMask:2}},{bits:23371,formatInfo:{errorCorrectionLevel:1,dataMask:3}},{bits:17913,formatInfo:{errorCorrectionLevel:1,dataMask:4}},{bits:16590,formatInfo:{errorCorrectionLevel:1,dataMask:5}},{bits:20375,formatInfo:{errorCorrectionLevel:1,dataMask:6}},{bits:19104,formatInfo:{errorCorrectionLevel:1,dataMask:7}},{bits:30660,formatInfo:{errorCorrectionLevel:0,dataMask:0}},{bits:29427,formatInfo:{errorCorrectionLevel:0,dataMask:1}},{bits:32170,formatInfo:{errorCorrectionLevel:0,dataMask:2}},{bits:30877,formatInfo:{errorCorrectionLevel:0,dataMask:3}},{bits:26159,formatInfo:{errorCorrectionLevel:0,dataMask:4}},{bits:25368,formatInfo:{errorCorrectionLevel:0,dataMask:5}},{bits:27713,formatInfo:{errorCorrectionLevel:0,dataMask:6}},{bits:26998,formatInfo:{errorCorrectionLevel:0,dataMask:7}},{bits:5769,formatInfo:{errorCorrectionLevel:3,dataMask:0}},{bits:5054,formatInfo:{errorCorrectionLevel:3,dataMask:1}},{bits:7399,formatInfo:{errorCorrectionLevel:3,dataMask:2}},{bits:6608,formatInfo:{errorCorrectionLevel:3,dataMask:3}},{bits:1890,formatInfo:{errorCorrectionLevel:3,dataMask:4}},{bits:597,formatInfo:{errorCorrectionLevel:3,dataMask:5}},{bits:3340,formatInfo:{errorCorrectionLevel:3,dataMask:6}},{bits:2107,formatInfo:{errorCorrectionLevel:3,dataMask:7}},{bits:13663,formatInfo:{errorCorrectionLevel:2,dataMask:0}},{bits:12392,formatInfo:{errorCorrectionLevel:2,dataMask:1}},{bits:16177,formatInfo:{errorCorrectionLevel:2,dataMask:2}},{bits:14854,formatInfo:{errorCorrectionLevel:2,dataMask:3}},{bits:9396,formatInfo:{errorCorrectionLevel:2,dataMask:4}},{bits:8579,formatInfo:{errorCorrectionLevel:2,dataMask:5}},{bits:11994,formatInfo:{errorCorrectionLevel:2,dataMask:6}},{bits:11245,formatInfo:{errorCorrectionLevel:2,dataMask:7}}],m=[function(j){return(j.y+j.x)%2===0},function(j){return j.y%2===0},function(j){return j.x%3===0},function(j){return(j.y+j.x)%3===0},function(j){return(Math.floor(j.y/2)+Math.floor(j.x/3))%2===0},function(j){return j.x*j.y%2+j.x*j.y%3===0},function(j){return(j.y*j.x%2+j.y*j.x%3)%2===0},function(j){return((j.y+j.x)%2+j.y*j.x%3)%2===0}];function v(j){var D=17+4*j.versionNumber,w=a.BitMatrix.createEmpty(D,D);w.setRegion(0,0,9,9,!0),w.setRegion(D-8,0,8,9,!0),w.setRegion(0,D-8,9,8,!0);for(var E=0,N=j.alignmentPatternCenters;E<N.length;E++)for(var M=N[E],L=0,J=j.alignmentPatternCenters;L<J.length;L++){var se=J[L];M===6&&se===6||M===6&&se===D-7||M===D-7&&se===6||w.setRegion(M-2,se-2,5,5,!0)}return w.setRegion(6,9,1,D-17,!0),w.setRegion(9,6,D-17,1,!0),j.versionNumber>6&&(w.setRegion(D-11,0,3,6,!0),w.setRegion(0,D-11,6,3,!0)),w}function y(j,D,w){for(var E=m[w.dataMask],N=j.height,M=v(D),L=[],J=0,se=0,X=!0,Q=N-1;Q>0;Q-=2){Q===6&&Q--;for(var ce=0;ce<N;ce++)for(var V=X?N-1-ce:ce,xe=0;xe<2;xe++){var ne=Q-xe;if(!M.get(ne,V)){se++;var _=j.get(ne,V);E({y:V,x:ne})&&(_=!_),J=d(_,J),se===8&&(L.push(J),se=0,J=0)}}X=!X}return L}function C(j){var D=j.height,w=Math.floor((D-17)/4);if(w<=6)return c.VERSIONS[w-1];for(var E=0,N=5;N>=0;N--)for(var M=D-9;M>=D-11;M--)E=d(j.get(M,N),E);for(var L=0,M=5;M>=0;M--)for(var N=D-9;N>=D-11;N--)L=d(j.get(M,N),L);for(var J=1/0,se,X=0,Q=c.VERSIONS;X<Q.length;X++){var ce=Q[X];if(ce.infoBits===E||ce.infoBits===L)return ce;var V=x(E,ce.infoBits);V<J&&(se=ce,J=V),V=x(L,ce.infoBits),V<J&&(se=ce,J=V)}if(J<=3)return se}function P(j){for(var D=0,w=0;w<=8;w++)w!==6&&(D=d(j.get(w,8),D));for(var E=7;E>=0;E--)E!==6&&(D=d(j.get(8,E),D));for(var N=j.height,M=0,E=N-1;E>=N-7;E--)M=d(j.get(8,E),M);for(var w=N-8;w<N;w++)M=d(j.get(w,8),M);for(var L=1/0,J=null,se=0,X=f;se<X.length;se++){var Q=X[se],ce=Q.bits,V=Q.formatInfo;if(ce===D||ce===M)return V;var xe=x(D,ce);xe<L&&(J=V,L=xe),D!==M&&(xe=x(M,ce),xe<L&&(J=V,L=xe))}return L<=3?J:null}function B(j,D,w){var E=D.errorCorrectionLevels[w],N=[],M=0;if(E.ecBlocks.forEach(function(_){for(var S=0;S<_.numBlocks;S++)N.push({numDataCodewords:_.dataCodewordsPerBlock,codewords:[]}),M+=_.dataCodewordsPerBlock+E.ecCodewordsPerBlock}),j.length<M)return null;j=j.slice(0,M);for(var L=E.ecBlocks[0].dataCodewordsPerBlock,J=0;J<L;J++)for(var se=0,X=N;se<X.length;se++){var Q=X[se];Q.codewords.push(j.shift())}if(E.ecBlocks.length>1)for(var ce=E.ecBlocks[0].numBlocks,V=E.ecBlocks[1].numBlocks,J=0;J<V;J++)N[ce+J].codewords.push(j.shift());for(;j.length>0;)for(var xe=0,ne=N;xe<ne.length;xe++){var Q=ne[xe];Q.codewords.push(j.shift())}return N}function g(j){var D=C(j);if(!D)return null;var w=P(j);if(!w)return null;var E=y(j,D,w),N=B(E,D,w.errorCorrectionLevel);if(!N)return null;for(var M=N.reduce(function(xe,ne){return xe+ne.numDataCodewords},0),L=new Uint8ClampedArray(M),J=0,se=0,X=N;se<X.length;se++){var Q=X[se],ce=l.decode(Q.codewords,Q.codewords.length-Q.numDataCodewords);if(!ce)return null;for(var V=0;V<Q.numDataCodewords;V++)L[J++]=ce[V]}try{return i.decode(L,D.versionNumber)}catch{return null}}function b(j){if(j==null)return null;var D=g(j);if(D)return D;for(var w=0;w<j.width;w++)for(var E=w+1;E<j.height;E++)j.get(w,E)!==j.get(E,w)&&(j.set(w,E,!j.get(w,E)),j.set(E,w,!j.get(E,w)));return g(j)}r.decode=b},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(7),i=o(8),l;(function(C){C.Numeric="numeric",C.Alphanumeric="alphanumeric",C.Byte="byte",C.Kanji="kanji",C.ECI="eci"})(l=r.Mode||(r.Mode={}));var c;(function(C){C[C.Terminator=0]="Terminator",C[C.Numeric=1]="Numeric",C[C.Alphanumeric=2]="Alphanumeric",C[C.Byte=4]="Byte",C[C.Kanji=8]="Kanji",C[C.ECI=7]="ECI"})(c||(c={}));function x(C,P){for(var B=[],g="",b=[10,12,14][P],j=C.readBits(b);j>=3;){var D=C.readBits(10);if(D>=1e3)throw new Error("Invalid numeric value above 999");var w=Math.floor(D/100),E=Math.floor(D/10)%10,N=D%10;B.push(48+w,48+E,48+N),g+=w.toString()+E.toString()+N.toString(),j-=3}if(j===2){var D=C.readBits(7);if(D>=100)throw new Error("Invalid numeric value above 99");var w=Math.floor(D/10),E=D%10;B.push(48+w,48+E),g+=w.toString()+E.toString()}else if(j===1){var D=C.readBits(4);if(D>=10)throw new Error("Invalid numeric value above 9");B.push(48+D),g+=D.toString()}return{bytes:B,text:g}}var d=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function f(C,P){for(var B=[],g="",b=[9,11,13][P],j=C.readBits(b);j>=2;){var D=C.readBits(11),w=Math.floor(D/45),E=D%45;B.push(d[w].charCodeAt(0),d[E].charCodeAt(0)),g+=d[w]+d[E],j-=2}if(j===1){var w=C.readBits(6);B.push(d[w].charCodeAt(0)),g+=d[w]}return{bytes:B,text:g}}function m(C,P){for(var B=[],g="",b=[8,16,16][P],j=C.readBits(b),D=0;D<j;D++){var w=C.readBits(8);B.push(w)}try{g+=decodeURIComponent(B.map(function(E){return"%"+("0"+E.toString(16)).substr(-2)}).join(""))}catch{}return{bytes:B,text:g}}function v(C,P){for(var B=[],g="",b=[8,10,12][P],j=C.readBits(b),D=0;D<j;D++){var w=C.readBits(13),E=Math.floor(w/192)<<8|w%192;E<7936?E+=33088:E+=49472,B.push(E>>8,E&255),g+=String.fromCharCode(i.shiftJISTable[E])}return{bytes:B,text:g}}function y(C,P){for(var B,g,b,j,D=new a.BitStream(C),w=P<=9?0:P<=26?1:2,E={text:"",bytes:[],chunks:[],version:P};D.available()>=4;){var N=D.readBits(4);if(N===c.Terminator)return E;if(N===c.ECI)D.readBits(1)===0?E.chunks.push({type:l.ECI,assignmentNumber:D.readBits(7)}):D.readBits(1)===0?E.chunks.push({type:l.ECI,assignmentNumber:D.readBits(14)}):D.readBits(1)===0?E.chunks.push({type:l.ECI,assignmentNumber:D.readBits(21)}):E.chunks.push({type:l.ECI,assignmentNumber:-1});else if(N===c.Numeric){var M=x(D,w);E.text+=M.text,(B=E.bytes).push.apply(B,M.bytes),E.chunks.push({type:l.Numeric,text:M.text})}else if(N===c.Alphanumeric){var L=f(D,w);E.text+=L.text,(g=E.bytes).push.apply(g,L.bytes),E.chunks.push({type:l.Alphanumeric,text:L.text})}else if(N===c.Byte){var J=m(D,w);E.text+=J.text,(b=E.bytes).push.apply(b,J.bytes),E.chunks.push({type:l.Byte,bytes:J.bytes,text:J.text})}else if(N===c.Kanji){var se=v(D,w);E.text+=se.text,(j=E.bytes).push.apply(j,se.bytes),E.chunks.push({type:l.Kanji,bytes:se.bytes,text:se.text})}}if(D.available()===0||D.readBits(D.available())===0)return E}r.decode=y},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=function(){function i(l){this.byteOffset=0,this.bitOffset=0,this.bytes=l}return i.prototype.readBits=function(l){if(l<1||l>32||l>this.available())throw new Error("Cannot read "+l.toString()+" bits");var c=0;if(this.bitOffset>0){var x=8-this.bitOffset,d=l<x?l:x,f=x-d,m=255>>8-d<<f;c=(this.bytes[this.byteOffset]&m)>>f,l-=d,this.bitOffset+=d,this.bitOffset===8&&(this.bitOffset=0,this.byteOffset++)}if(l>0){for(;l>=8;)c=c<<8|this.bytes[this.byteOffset]&255,this.byteOffset++,l-=8;if(l>0){var f=8-l,m=255>>f<<f;c=c<<l|(this.bytes[this.byteOffset]&m)>>f,this.bitOffset+=l}}return c},i.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},i}();r.BitStream=a},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.shiftJISTable={32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:165,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:8254,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:92,33120:12316,33121:8214,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:8722,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:162,33170:163,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:172,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081}},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(1),i=o(2);function l(f,m,v,y){var C;m.degree()<v.degree()&&(C=[v,m],m=C[0],v=C[1]);for(var P=m,B=v,g=f.zero,b=f.one;B.degree()>=y/2;){var j=P,D=g;if(P=B,g=b,P.isZero())return null;B=j;for(var w=f.zero,E=P.getCoefficient(P.degree()),N=f.inverse(E);B.degree()>=P.degree()&&!B.isZero();){var M=B.degree()-P.degree(),L=f.multiply(B.getCoefficient(B.degree()),N);w=w.addOrSubtract(f.buildMonomial(M,L)),B=B.addOrSubtract(P.multiplyByMonomial(M,L))}if(b=w.multiplyPoly(g).addOrSubtract(D),B.degree()>=P.degree())return null}var J=b.getCoefficient(0);if(J===0)return null;var se=f.inverse(J);return[b.multiply(se),B.multiply(se)]}function c(f,m){var v=m.degree();if(v===1)return[m.getCoefficient(1)];for(var y=new Array(v),C=0,P=1;P<f.size&&C<v;P++)m.evaluateAt(P)===0&&(y[C]=f.inverse(P),C++);return C!==v?null:y}function x(f,m,v){for(var y=v.length,C=new Array(y),P=0;P<y;P++){for(var B=f.inverse(v[P]),g=1,b=0;b<y;b++)P!==b&&(g=f.multiply(g,a.addOrSubtractGF(1,f.multiply(v[b],B))));C[P]=f.multiply(m.evaluateAt(B),f.inverse(g)),f.generatorBase!==0&&(C[P]=f.multiply(C[P],B))}return C}function d(f,m){var v=new Uint8ClampedArray(f.length);v.set(f);for(var y=new a.default(285,256,0),C=new i.default(y,v),P=new Uint8ClampedArray(m),B=!1,g=0;g<m;g++){var b=C.evaluateAt(y.exp(g+y.generatorBase));P[P.length-1-g]=b,b!==0&&(B=!0)}if(!B)return v;var j=new i.default(y,P),D=l(y,y.buildMonomial(m,1),j,m);if(D===null)return null;var w=c(y,D[0]);if(w==null)return null;for(var E=x(y,D[1],w),N=0;N<w.length;N++){var M=v.length-1-y.log(w[N]);if(M<0)return null;v[M]=a.addOrSubtractGF(v[M],E[N])}return v}r.decode=d},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0}),r.VERSIONS=[{infoBits:null,versionNumber:1,alignmentPatternCenters:[],errorCorrectionLevels:[{ecCodewordsPerBlock:7,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:13,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:13}]},{ecCodewordsPerBlock:17,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:2,alignmentPatternCenters:[6,18],errorCorrectionLevels:[{ecCodewordsPerBlock:10,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:34}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:28}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:16}]}]},{infoBits:null,versionNumber:3,alignmentPatternCenters:[6,22],errorCorrectionLevels:[{ecCodewordsPerBlock:15,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:55}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:13}]}]},{infoBits:null,versionNumber:4,alignmentPatternCenters:[6,26],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:80}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:32}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:9}]}]},{infoBits:null,versionNumber:5,alignmentPatternCenters:[6,30],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:43}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:11},{numBlocks:2,dataCodewordsPerBlock:12}]}]},{infoBits:null,versionNumber:6,alignmentPatternCenters:[6,34],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68}]},{ecCodewordsPerBlock:16,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:27}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:31892,versionNumber:7,alignmentPatternCenters:[6,22,38],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:78}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:31}]},{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:13},{numBlocks:1,dataCodewordsPerBlock:14}]}]},{infoBits:34236,versionNumber:8,alignmentPatternCenters:[6,24,42],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:97}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:38},{numBlocks:2,dataCodewordsPerBlock:39}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:18},{numBlocks:2,dataCodewordsPerBlock:19}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:14},{numBlocks:2,dataCodewordsPerBlock:15}]}]},{infoBits:39577,versionNumber:9,alignmentPatternCenters:[6,26,46],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:12},{numBlocks:4,dataCodewordsPerBlock:13}]}]},{infoBits:42195,versionNumber:10,alignmentPatternCenters:[6,28,50],errorCorrectionLevels:[{ecCodewordsPerBlock:18,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:68},{numBlocks:2,dataCodewordsPerBlock:69}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:43},{numBlocks:1,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:15},{numBlocks:2,dataCodewordsPerBlock:16}]}]},{infoBits:48118,versionNumber:11,alignmentPatternCenters:[6,30,54],errorCorrectionLevels:[{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:81}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:50},{numBlocks:4,dataCodewordsPerBlock:51}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:22},{numBlocks:4,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:12},{numBlocks:8,dataCodewordsPerBlock:13}]}]},{infoBits:51042,versionNumber:12,alignmentPatternCenters:[6,32,58],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:92},{numBlocks:2,dataCodewordsPerBlock:93}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:36},{numBlocks:2,dataCodewordsPerBlock:37}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:20},{numBlocks:6,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:14},{numBlocks:4,dataCodewordsPerBlock:15}]}]},{infoBits:55367,versionNumber:13,alignmentPatternCenters:[6,34,62],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:37},{numBlocks:1,dataCodewordsPerBlock:38}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:20},{numBlocks:4,dataCodewordsPerBlock:21}]},{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:11},{numBlocks:4,dataCodewordsPerBlock:12}]}]},{infoBits:58893,versionNumber:14,alignmentPatternCenters:[6,26,46,66],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:40},{numBlocks:5,dataCodewordsPerBlock:41}]},{ecCodewordsPerBlock:20,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:16},{numBlocks:5,dataCodewordsPerBlock:17}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:5,dataCodewordsPerBlock:13}]}]},{infoBits:63784,versionNumber:15,alignmentPatternCenters:[6,26,48,70],errorCorrectionLevels:[{ecCodewordsPerBlock:22,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:87},{numBlocks:1,dataCodewordsPerBlock:88}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:41},{numBlocks:5,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:12},{numBlocks:7,dataCodewordsPerBlock:13}]}]},{infoBits:68472,versionNumber:16,alignmentPatternCenters:[6,26,50,74],errorCorrectionLevels:[{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:98},{numBlocks:1,dataCodewordsPerBlock:99}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:19},{numBlocks:2,dataCodewordsPerBlock:20}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:70749,versionNumber:17,alignmentPatternCenters:[6,30,54,78],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:1,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:22},{numBlocks:15,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:17,dataCodewordsPerBlock:15}]}]},{infoBits:76311,versionNumber:18,alignmentPatternCenters:[6,30,56,82],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:120},{numBlocks:1,dataCodewordsPerBlock:121}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:43},{numBlocks:4,dataCodewordsPerBlock:44}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:1,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:14},{numBlocks:19,dataCodewordsPerBlock:15}]}]},{infoBits:79154,versionNumber:19,alignmentPatternCenters:[6,30,58,86],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:113},{numBlocks:4,dataCodewordsPerBlock:114}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:44},{numBlocks:11,dataCodewordsPerBlock:45}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:21},{numBlocks:4,dataCodewordsPerBlock:22}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:9,dataCodewordsPerBlock:13},{numBlocks:16,dataCodewordsPerBlock:14}]}]},{infoBits:84390,versionNumber:20,alignmentPatternCenters:[6,34,62,90],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:107},{numBlocks:5,dataCodewordsPerBlock:108}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:41},{numBlocks:13,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:5,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:15},{numBlocks:10,dataCodewordsPerBlock:16}]}]},{infoBits:87683,versionNumber:21,alignmentPatternCenters:[6,28,50,72,94],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:116},{numBlocks:4,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:42}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:16},{numBlocks:6,dataCodewordsPerBlock:17}]}]},{infoBits:92361,versionNumber:22,alignmentPatternCenters:[6,26,50,74,98],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:111},{numBlocks:7,dataCodewordsPerBlock:112}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:24,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:13}]}]},{infoBits:96236,versionNumber:23,alignmentPatternCenters:[6,30,54,74,102],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:121},{numBlocks:5,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:47},{numBlocks:14,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:16,dataCodewordsPerBlock:15},{numBlocks:14,dataCodewordsPerBlock:16}]}]},{infoBits:102084,versionNumber:24,alignmentPatternCenters:[6,28,54,80,106],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:45},{numBlocks:14,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:24},{numBlocks:16,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:30,dataCodewordsPerBlock:16},{numBlocks:2,dataCodewordsPerBlock:17}]}]},{infoBits:102881,versionNumber:25,alignmentPatternCenters:[6,32,58,84,110],errorCorrectionLevels:[{ecCodewordsPerBlock:26,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:106},{numBlocks:4,dataCodewordsPerBlock:107}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:47},{numBlocks:13,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:13,dataCodewordsPerBlock:16}]}]},{infoBits:110507,versionNumber:26,alignmentPatternCenters:[6,30,58,86,114],errorCorrectionLevels:[{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:114},{numBlocks:2,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:46},{numBlocks:4,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:28,dataCodewordsPerBlock:22},{numBlocks:6,dataCodewordsPerBlock:23}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:33,dataCodewordsPerBlock:16},{numBlocks:4,dataCodewordsPerBlock:17}]}]},{infoBits:110734,versionNumber:27,alignmentPatternCenters:[6,34,62,90,118],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:45},{numBlocks:3,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:8,dataCodewordsPerBlock:23},{numBlocks:26,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:117786,versionNumber:28,alignmentPatternCenters:[6,26,50,74,98,122],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:117},{numBlocks:10,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:3,dataCodewordsPerBlock:45},{numBlocks:23,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:24},{numBlocks:31,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:31,dataCodewordsPerBlock:16}]}]},{infoBits:119615,versionNumber:29,alignmentPatternCenters:[6,30,54,78,102,126],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:7,dataCodewordsPerBlock:116},{numBlocks:7,dataCodewordsPerBlock:117}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:21,dataCodewordsPerBlock:45},{numBlocks:7,dataCodewordsPerBlock:46}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:1,dataCodewordsPerBlock:23},{numBlocks:37,dataCodewordsPerBlock:24}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:26,dataCodewordsPerBlock:16}]}]},{infoBits:126325,versionNumber:30,alignmentPatternCenters:[6,26,52,78,104,130],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:5,dataCodewordsPerBlock:115},{numBlocks:10,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:47},{numBlocks:10,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:15,dataCodewordsPerBlock:24},{numBlocks:25,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:25,dataCodewordsPerBlock:16}]}]},{infoBits:127568,versionNumber:31,alignmentPatternCenters:[6,30,56,82,108,134],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:3,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:46},{numBlocks:29,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:24},{numBlocks:1,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:23,dataCodewordsPerBlock:15},{numBlocks:28,dataCodewordsPerBlock:16}]}]},{infoBits:133589,versionNumber:32,alignmentPatternCenters:[6,34,60,86,112,138],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:24},{numBlocks:35,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:15},{numBlocks:35,dataCodewordsPerBlock:16}]}]},{infoBits:136944,versionNumber:33,alignmentPatternCenters:[6,30,58,86,114,142],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:115},{numBlocks:1,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:21,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:24},{numBlocks:19,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:11,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:141498,versionNumber:34,alignmentPatternCenters:[6,34,62,90,118,146],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:115},{numBlocks:6,dataCodewordsPerBlock:116}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:14,dataCodewordsPerBlock:46},{numBlocks:23,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:44,dataCodewordsPerBlock:24},{numBlocks:7,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:59,dataCodewordsPerBlock:16},{numBlocks:1,dataCodewordsPerBlock:17}]}]},{infoBits:145311,versionNumber:35,alignmentPatternCenters:[6,30,54,78,102,126,150],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:121},{numBlocks:7,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:12,dataCodewordsPerBlock:47},{numBlocks:26,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:39,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:22,dataCodewordsPerBlock:15},{numBlocks:41,dataCodewordsPerBlock:16}]}]},{infoBits:150283,versionNumber:36,alignmentPatternCenters:[6,24,50,76,102,128,154],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:121},{numBlocks:14,dataCodewordsPerBlock:122}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:6,dataCodewordsPerBlock:47},{numBlocks:34,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:46,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:2,dataCodewordsPerBlock:15},{numBlocks:64,dataCodewordsPerBlock:16}]}]},{infoBits:152622,versionNumber:37,alignmentPatternCenters:[6,28,54,80,106,132,158],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:17,dataCodewordsPerBlock:122},{numBlocks:4,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:29,dataCodewordsPerBlock:46},{numBlocks:14,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:49,dataCodewordsPerBlock:24},{numBlocks:10,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:24,dataCodewordsPerBlock:15},{numBlocks:46,dataCodewordsPerBlock:16}]}]},{infoBits:158308,versionNumber:38,alignmentPatternCenters:[6,32,58,84,110,136,162],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:4,dataCodewordsPerBlock:122},{numBlocks:18,dataCodewordsPerBlock:123}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:13,dataCodewordsPerBlock:46},{numBlocks:32,dataCodewordsPerBlock:47}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:48,dataCodewordsPerBlock:24},{numBlocks:14,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:42,dataCodewordsPerBlock:15},{numBlocks:32,dataCodewordsPerBlock:16}]}]},{infoBits:161089,versionNumber:39,alignmentPatternCenters:[6,26,54,82,110,138,166],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:117},{numBlocks:4,dataCodewordsPerBlock:118}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:40,dataCodewordsPerBlock:47},{numBlocks:7,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:43,dataCodewordsPerBlock:24},{numBlocks:22,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:10,dataCodewordsPerBlock:15},{numBlocks:67,dataCodewordsPerBlock:16}]}]},{infoBits:167017,versionNumber:40,alignmentPatternCenters:[6,30,58,86,114,142,170],errorCorrectionLevels:[{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:19,dataCodewordsPerBlock:118},{numBlocks:6,dataCodewordsPerBlock:119}]},{ecCodewordsPerBlock:28,ecBlocks:[{numBlocks:18,dataCodewordsPerBlock:47},{numBlocks:31,dataCodewordsPerBlock:48}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:34,dataCodewordsPerBlock:24},{numBlocks:34,dataCodewordsPerBlock:25}]},{ecCodewordsPerBlock:30,ecBlocks:[{numBlocks:20,dataCodewordsPerBlock:15},{numBlocks:61,dataCodewordsPerBlock:16}]}]}]},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=o(0);function i(d,f,m,v){var y=d.x-f.x+m.x-v.x,C=d.y-f.y+m.y-v.y;if(y===0&&C===0)return{a11:f.x-d.x,a12:f.y-d.y,a13:0,a21:m.x-f.x,a22:m.y-f.y,a23:0,a31:d.x,a32:d.y,a33:1};var P=f.x-m.x,B=v.x-m.x,g=f.y-m.y,b=v.y-m.y,j=P*b-B*g,D=(y*b-B*C)/j,w=(P*C-y*g)/j;return{a11:f.x-d.x+D*f.x,a12:f.y-d.y+D*f.y,a13:D,a21:v.x-d.x+w*v.x,a22:v.y-d.y+w*v.y,a23:w,a31:d.x,a32:d.y,a33:1}}function l(d,f,m,v){var y=i(d,f,m,v);return{a11:y.a22*y.a33-y.a23*y.a32,a12:y.a13*y.a32-y.a12*y.a33,a13:y.a12*y.a23-y.a13*y.a22,a21:y.a23*y.a31-y.a21*y.a33,a22:y.a11*y.a33-y.a13*y.a31,a23:y.a13*y.a21-y.a11*y.a23,a31:y.a21*y.a32-y.a22*y.a31,a32:y.a12*y.a31-y.a11*y.a32,a33:y.a11*y.a22-y.a12*y.a21}}function c(d,f){return{a11:d.a11*f.a11+d.a21*f.a12+d.a31*f.a13,a12:d.a12*f.a11+d.a22*f.a12+d.a32*f.a13,a13:d.a13*f.a11+d.a23*f.a12+d.a33*f.a13,a21:d.a11*f.a21+d.a21*f.a22+d.a31*f.a23,a22:d.a12*f.a21+d.a22*f.a22+d.a32*f.a23,a23:d.a13*f.a21+d.a23*f.a22+d.a33*f.a23,a31:d.a11*f.a31+d.a21*f.a32+d.a31*f.a33,a32:d.a12*f.a31+d.a22*f.a32+d.a32*f.a33,a33:d.a13*f.a31+d.a23*f.a32+d.a33*f.a33}}function x(d,f){for(var m=l({x:3.5,y:3.5},{x:f.dimension-3.5,y:3.5},{x:f.dimension-6.5,y:f.dimension-6.5},{x:3.5,y:f.dimension-3.5}),v=i(f.topLeft,f.topRight,f.alignmentPattern,f.bottomLeft),y=c(v,m),C=a.BitMatrix.createEmpty(f.dimension,f.dimension),P=function(w,E){var N=y.a13*w+y.a23*E+y.a33;return{x:(y.a11*w+y.a21*E+y.a31)/N,y:(y.a12*w+y.a22*E+y.a32)/N}},B=0;B<f.dimension;B++)for(var g=0;g<f.dimension;g++){var b=g+.5,j=B+.5,D=P(b,j);C.set(g,B,d.get(Math.floor(D.x),Math.floor(D.y)))}return{matrix:C,mappingFunction:P}}r.extract=x},function(n,r,o){Object.defineProperty(r,"__esModule",{value:!0});var a=4,i=.5,l=1.5,c=function(b,j){return Math.sqrt(Math.pow(j.x-b.x,2)+Math.pow(j.y-b.y,2))};function x(b){return b.reduce(function(j,D){return j+D})}function d(b,j,D){var w,E,N,M,L=c(b,j),J=c(j,D),se=c(b,D),X,Q,ce;return J>=L&&J>=se?(w=[j,b,D],X=w[0],Q=w[1],ce=w[2]):se>=J&&se>=L?(E=[b,j,D],X=E[0],Q=E[1],ce=E[2]):(N=[b,D,j],X=N[0],Q=N[1],ce=N[2]),(ce.x-Q.x)*(X.y-Q.y)-(ce.y-Q.y)*(X.x-Q.x)<0&&(M=[ce,X],X=M[0],ce=M[1]),{bottomLeft:X,topLeft:Q,topRight:ce}}function f(b,j,D,w){var E=(x(v(b,D,w,5))/7+x(v(b,j,w,5))/7+x(v(D,b,w,5))/7+x(v(j,b,w,5))/7)/4;if(E<1)throw new Error("Invalid module size");var N=Math.round(c(b,j)/E),M=Math.round(c(b,D)/E),L=Math.floor((N+M)/2)+7;switch(L%4){case 0:L++;break;case 2:L--;break}return{dimension:L,moduleSize:E}}function m(b,j,D,w){var E=[{x:Math.floor(b.x),y:Math.floor(b.y)}],N=Math.abs(j.y-b.y)>Math.abs(j.x-b.x),M,L,J,se;N?(M=Math.floor(b.y),L=Math.floor(b.x),J=Math.floor(j.y),se=Math.floor(j.x)):(M=Math.floor(b.x),L=Math.floor(b.y),J=Math.floor(j.x),se=Math.floor(j.y));for(var X=Math.abs(J-M),Q=Math.abs(se-L),ce=Math.floor(-X/2),V=M<J?1:-1,xe=L<se?1:-1,ne=!0,_=M,S=L;_!==J+V;_+=V){var U=N?S:_,$=N?_:S;if(D.get(U,$)!==ne&&(ne=!ne,E.push({x:U,y:$}),E.length===w+1))break;if(ce+=Q,ce>0){if(S===se)break;S+=xe,ce-=X}}for(var R=[],H=0;H<w;H++)E[H]&&E[H+1]?R.push(c(E[H],E[H+1])):R.push(0);return R}function v(b,j,D,w){var E,N=j.y-b.y,M=j.x-b.x,L=m(b,j,D,Math.ceil(w/2)),J=m(b,{x:b.x-M,y:b.y-N},D,Math.ceil(w/2)),se=L.shift()+J.shift()-1;return(E=J.concat(se)).concat.apply(E,L)}function y(b,j){var D=x(b)/x(j),w=0;return j.forEach(function(E,N){w+=Math.pow(b[N]-E*D,2)}),{averageSize:D,error:w}}function C(b,j,D){try{var w=v(b,{x:-1,y:b.y},D,j.length),E=v(b,{x:b.x,y:-1},D,j.length),N={x:Math.max(0,b.x-b.y)-1,y:Math.max(0,b.y-b.x)-1},M=v(b,N,D,j.length),L={x:Math.min(D.width,b.x+b.y)+1,y:Math.min(D.height,b.y+b.x)+1},J=v(b,L,D,j.length),se=y(w,j),X=y(E,j),Q=y(M,j),ce=y(J,j),V=Math.sqrt(se.error*se.error+X.error*X.error+Q.error*Q.error+ce.error*ce.error),xe=(se.averageSize+X.averageSize+Q.averageSize+ce.averageSize)/4,ne=(Math.pow(se.averageSize-xe,2)+Math.pow(X.averageSize-xe,2)+Math.pow(Q.averageSize-xe,2)+Math.pow(ce.averageSize-xe,2))/xe;return V+ne}catch{return 1/0}}function P(b,j){for(var D=Math.round(j.x);b.get(D,Math.round(j.y));)D--;for(var w=Math.round(j.x);b.get(w,Math.round(j.y));)w++;for(var E=(D+w)/2,N=Math.round(j.y);b.get(Math.round(E),N);)N--;for(var M=Math.round(j.y);b.get(Math.round(E),M);)M++;var L=(N+M)/2;return{x:E,y:L}}function B(b){for(var j=[],D=[],w=[],E=[],N=function(U){for(var $=0,R=!1,H=[0,0,0,0,0],me=function(I){var Ee=b.get(I,U);if(Ee===R)$++;else{H=[H[1],H[2],H[3],H[4],$],$=1,R=Ee;var pe=x(H)/7,Ce=Math.abs(H[0]-pe)<pe&&Math.abs(H[1]-pe)<pe&&Math.abs(H[2]-3*pe)<3*pe&&Math.abs(H[3]-pe)<pe&&Math.abs(H[4]-pe)<pe&&!Ee,ge=x(H.slice(-3))/3,be=Math.abs(H[2]-ge)<ge&&Math.abs(H[3]-ge)<ge&&Math.abs(H[4]-ge)<ge&&Ee;if(Ce){var Be=I-H[3]-H[4],Re=Be-H[2],Ke={startX:Re,endX:Be,y:U},He=D.filter(function(pt){return Re>=pt.bottom.startX&&Re<=pt.bottom.endX||Be>=pt.bottom.startX&&Re<=pt.bottom.endX||Re<=pt.bottom.startX&&Be>=pt.bottom.endX&&H[2]/(pt.bottom.endX-pt.bottom.startX)<l&&H[2]/(pt.bottom.endX-pt.bottom.startX)>i});He.length>0?He[0].bottom=Ke:D.push({top:Ke,bottom:Ke})}if(be){var nt=I-H[4],mt=nt-H[3],Ke={startX:mt,y:U,endX:nt},He=E.filter(function(Ne){return mt>=Ne.bottom.startX&&mt<=Ne.bottom.endX||nt>=Ne.bottom.startX&&mt<=Ne.bottom.endX||mt<=Ne.bottom.startX&&nt>=Ne.bottom.endX&&H[2]/(Ne.bottom.endX-Ne.bottom.startX)<l&&H[2]/(Ne.bottom.endX-Ne.bottom.startX)>i});He.length>0?He[0].bottom=Ke:E.push({top:Ke,bottom:Ke})}}},W=-1;W<=b.width;W++)me(W);j.push.apply(j,D.filter(function(I){return I.bottom.y!==U&&I.bottom.y-I.top.y>=2})),D=D.filter(function(I){return I.bottom.y===U}),w.push.apply(w,E.filter(function(I){return I.bottom.y!==U})),E=E.filter(function(I){return I.bottom.y===U})},M=0;M<=b.height;M++)N(M);j.push.apply(j,D.filter(function(U){return U.bottom.y-U.top.y>=2})),w.push.apply(w,E);var L=j.filter(function(U){return U.bottom.y-U.top.y>=2}).map(function(U){var $=(U.top.startX+U.top.endX+U.bottom.startX+U.bottom.endX)/4,R=(U.top.y+U.bottom.y+1)/2;if(b.get(Math.round($),Math.round(R))){var H=[U.top.endX-U.top.startX,U.bottom.endX-U.bottom.startX,U.bottom.y-U.top.y+1],me=x(H)/H.length,W=C({x:Math.round($),y:Math.round(R)},[1,1,3,1,1],b);return{score:W,x:$,y:R,size:me}}}).filter(function(U){return!!U}).sort(function(U,$){return U.score-$.score}).map(function(U,$,R){if($>a)return null;var H=R.filter(function(W,I){return $!==I}).map(function(W){return{x:W.x,y:W.y,score:W.score+Math.pow(W.size-U.size,2)/U.size,size:W.size}}).sort(function(W,I){return W.score-I.score});if(H.length<2)return null;var me=U.score+H[0].score+H[1].score;return{points:[U].concat(H.slice(0,2)),score:me}}).filter(function(U){return!!U}).sort(function(U,$){return U.score-$.score});if(L.length===0)return null;var J=d(L[0].points[0],L[0].points[1],L[0].points[2]),se=J.topRight,X=J.topLeft,Q=J.bottomLeft,ce=g(b,w,se,X,Q),V=[];ce&&V.push({alignmentPattern:{x:ce.alignmentPattern.x,y:ce.alignmentPattern.y},bottomLeft:{x:Q.x,y:Q.y},dimension:ce.dimension,topLeft:{x:X.x,y:X.y},topRight:{x:se.x,y:se.y}});var xe=P(b,se),ne=P(b,X),_=P(b,Q),S=g(b,w,xe,ne,_);return S&&V.push({alignmentPattern:{x:S.alignmentPattern.x,y:S.alignmentPattern.y},bottomLeft:{x:_.x,y:_.y},topLeft:{x:ne.x,y:ne.y},topRight:{x:xe.x,y:xe.y},dimension:S.dimension}),V.length===0?null:V}r.locate=B;function g(b,j,D,w,E){var N,M,L;try{N=f(w,D,E,b),M=N.dimension,L=N.moduleSize}catch{return null}var J={x:D.x-w.x+E.x,y:D.y-w.y+E.y},se=(c(w,E)+c(w,D))/2/L,X=1-3/se,Q={x:w.x+X*(J.x-w.x),y:w.y+X*(J.y-w.y)},ce=j.map(function(xe){var ne=(xe.top.startX+xe.top.endX+xe.bottom.startX+xe.bottom.endX)/4,_=(xe.top.y+xe.bottom.y+1)/2;if(b.get(Math.floor(ne),Math.floor(_))){var S=[xe.top.endX-xe.top.startX,xe.bottom.endX-xe.bottom.startX,xe.bottom.y-xe.top.y+1];x(S)/S.length;var U=C({x:Math.floor(ne),y:Math.floor(_)},[1,1,1],b),$=U+c({x:ne,y:_},Q);return{x:ne,y:_,score:$}}}).filter(function(xe){return!!xe}).sort(function(xe,ne){return xe.score-ne.score}),V=se>=15&&ce.length?ce[0]:Q;return{alignmentPattern:V,dimension:M}}}]).default})})(Q1);var Nj=Q1.exports;const iy=M0(Nj);function hh({onScan:e,onError:t,autoStart:n=!0,eventSelected:r=!1}){const[o,a]=A.useState(!1),[i,l]=A.useState(!1),[c,x]=A.useState(null),[d,f]=A.useState(null),[m,v]=A.useState(!1),[y,C]=A.useState(!1),[P,B]=A.useState(0),g=A.useRef(null),b=A.useRef(null),j=A.useRef(),D=async()=>{var se;if(o)return;l(!0),x(null);const J=async X=>{try{return await navigator.mediaDevices.getUserMedia(X)}catch(Q){throw console.error("Camera access attempt failed:",Q),Q}};try{let X=await J({video:{facingMode:"environment",width:{ideal:1280,min:320},height:{ideal:720,min:240},frameRate:{ideal:30,min:10},aspectRatio:{ideal:1.3333333333333333}}});X||(X=await J({video:{facingMode:"environment",width:{min:320},height:{min:240}}})),X||(X=await J({video:{width:{min:320},height:{min:240}}})),f(X),g.current&&(g.current.srcObject=X,g.current.onloadedmetadata=()=>{g.current&&(g.current.play(),a(!0),l(!1),setTimeout(()=>{g.current&&!g.current.paused?N():setTimeout(()=>{g.current&&!g.current.paused&&N()},1e3)},2e3))})}catch(X){l(!1),console.error("Camera access error:",X);let Q="Camera access failed";X.name==="NotAllowedError"?Q="Camera permission denied. Please allow camera access in your browser settings.":X.name==="NotFoundError"?Q="No camera found on this device.":X.name==="NotSupportedError"?Q="Camera not supported on this device.":X.name==="NotReadableError"?Q="Camera is in use by another application.":(se=X.message)!=null&&se.includes("HTTPS")&&(Q="Camera access requires HTTPS. Please use a secure connection."),x(Q),t==null||t(Q),z.error(Q)}},w=()=>{d&&(d.getTracks().forEach(J=>J.stop()),f(null)),a(!1),x(null),v(!1),C(!1),j.current&&cancelAnimationFrame(j.current)},E=()=>{w(),setTimeout(()=>D(),100)},N=()=>{if(!g.current||!b.current)return;let J=0,se=!0;const X=()=>{const Q=g.current&&!g.current.paused&&g.current.readyState>=2;if(!(!g.current||!b.current||!Q||!se)){if(g.current.paused||g.current.readyState<2){j.current=requestAnimationFrame(X);return}if(J++,B(J),J%15!==0){j.current=requestAnimationFrame(X);return}try{const ce=g.current,V=b.current,xe=V.getContext("2d");if(xe&&ce.videoWidth>0&&ce.videoHeight>0){V.width=ce.videoWidth,V.height=ce.videoHeight,xe.drawImage(ce,0,0,V.width,V.height);const ne=xe.getImageData(0,0,V.width,V.height),_=iy(ne.data,ne.width,ne.height,{inversionAttempts:"attemptBoth"});if(_){se=!1,M(_.data);return}}}catch(ce){console.error("Error during auto-scanning:",ce)}j.current=requestAnimationFrame(X)}};C(!0),j.current=requestAnimationFrame(X)},M=J=>{v(!0),z.success("QR Code detected!"),e(J),j.current&&cancelAnimationFrame(j.current),setTimeout(()=>{v(!1),E()},2e3)},L=()=>{if(!g.current||!b.current)return;const J=g.current,se=b.current,X=se.getContext("2d");if(X&&J.videoWidth>0&&J.videoHeight>0){se.width=J.videoWidth,se.height=J.videoHeight,X.drawImage(J,0,0,se.width,se.height);const Q=X.getImageData(0,0,se.width,se.height);console.log("Manual scan:",{canvasWidth:se.width,canvasHeight:se.height,imageDataWidth:Q.width,imageDataHeight:Q.height,dataLength:Q.data.length});const ce=iy(Q.data,Q.width,Q.height,{inversionAttempts:"attemptBoth"});ce?(console.log("Manual QR Code detected:",ce.data),M(ce.data)):(console.log("No QR code found in manual scan"),z.error("No QR code detected in current frame"))}};return A.useEffect(()=>(r&&!o?D():!r&&o&&w(),()=>w()),[r]),c?s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-4 md:p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-red-100 rounded-full p-3 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:s.jsx(gr,{className:"h-8 w-8 text-red-500"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Camera Error"}),s.jsx("p",{className:"text-gray-600 mb-4 text-sm",children:c}),s.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3 mb-4 border border-yellow-200",children:[s.jsx("p",{className:"text-xs text-yellow-800 mb-2",children:" Mobile Troubleshooting:"}),s.jsxs("ul",{className:"text-xs text-yellow-700 space-y-1 text-left",children:[s.jsx("li",{children:" Ensure you're using HTTPS (secure connection)"}),s.jsx("li",{children:" Allow camera permissions when prompted"}),s.jsx("li",{children:" Try refreshing the page and try again"}),s.jsx("li",{children:" Check if camera is being used by another app"})]})]}),s.jsx("button",{onClick:D,className:"bg-red-600 text-white px-6 py-3 rounded-lg hover:bg-red-700 transition-colors font-medium",children:"Retry Camera"})]})}):r?s.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[s.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 px-4 md:px-6 py-3 md:py-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center space-x-2 md:space-x-3",children:[s.jsx("div",{className:"bg-white bg-opacity-20 rounded-full p-1.5 md:p-2",children:s.jsx(gr,{className:"h-4 w-4 md:h-5 md:w-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-semibold text-sm md:text-base",children:"QR Code Scanner"}),s.jsx("p",{className:"text-blue-100 text-xs md:text-sm",children:"Real-time QR code detection"})]})]}),o&&s.jsxs("div",{className:"bg-green-500 text-white px-2 md:px-3 py-1 rounded-full text-xs font-medium flex items-center space-x-1 md:space-x-2",children:[s.jsx("div",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-white rounded-full animate-pulse"}),s.jsxs("span",{className:"text-xs",children:["Live  ",y?`Auto-Scanning (${P})`:"Ready"]})]})]})}),s.jsxs("div",{className:"relative bg-black",children:[s.jsx("video",{ref:g,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover",style:{objectFit:"cover",objectPosition:"center",imageRendering:"crisp-edges"}}),s.jsx("canvas",{ref:b,className:"hidden"}),i&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-75 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),s.jsx("p",{className:"text-white text-sm font-medium",children:"Starting camera..."})]})}),o&&s.jsx("div",{className:"absolute inset-0 pointer-events-none",children:s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"w-64 h-64 md:w-80 md:h-80 border-3 border-white rounded-2xl shadow-2xl relative bg-black bg-opacity-5",children:[s.jsx("div",{className:"absolute -top-3 -left-3 w-10 h-10 border-t-4 border-l-4 border-blue-500 rounded-tl-xl"}),s.jsx("div",{className:"absolute -top-3 -right-3 w-10 h-10 border-t-4 border-r-4 border-blue-500 rounded-tr-xl"}),s.jsx("div",{className:"absolute -bottom-3 -left-3 w-10 h-10 border-b-4 border-l-4 border-blue-500 rounded-bl-xl"}),s.jsx("div",{className:"absolute -bottom-3 -right-3 w-10 h-10 border-b-4 border-r-4 border-blue-500 rounded-br-xl"}),s.jsx("div",{className:"absolute top-0 left-0 w-full h-1.5 bg-gradient-to-r from-transparent via-blue-500 to-transparent animate-pulse"}),s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-blue-500 rounded-full"})]}),m&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"bg-green-600 text-white px-8 py-4 rounded-2xl shadow-2xl border border-green-400",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(br,{className:"h-6 w-6 mr-3"}),s.jsx("span",{className:"font-semibold text-lg",children:"QR Code Detected!"})]})})})]})})}),s.jsx("div",{className:"absolute bottom-4 md:bottom-6 left-1/2 transform -translate-x-1/2 flex items-center space-x-2 md:space-x-4",children:o?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:E,className:"bg-white bg-opacity-90 text-gray-800 p-3 md:p-4 rounded-full hover:bg-opacity-100 transition-all shadow-lg backdrop-blur-sm",title:"Refresh Camera",children:s.jsx(_l,{className:"h-5 w-5 md:h-6 md:w-6"})}),s.jsx("button",{onClick:L,className:"bg-green-500 text-white p-3 md:p-4 rounded-full hover:bg-green-600 transition-all shadow-lg",title:"Manual Scan",children:" Scan"}),s.jsx("button",{onClick:w,className:"bg-red-600 text-white p-3 md:p-4 rounded-full hover:bg-red-700 transition-all shadow-lg",title:"Stop Camera",children:s.jsx(Ra,{className:"h-5 w-5 md:h-6 md:w-6"})})]}):s.jsxs("button",{onClick:D,className:"bg-blue-600 text-white px-8 py-4 rounded-xl hover:bg-blue-700 transition-all flex items-center shadow-lg font-medium",children:[s.jsx(gr,{className:"h-6 w-6 mr-3"}),"Start Camera"]})})]}),!o&&!i&&r&&s.jsx("div",{className:"p-4 md:p-6 bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-white rounded-full p-3 md:p-4 w-16 h-16 md:w-20 md:h-20 mx-auto mb-3 md:mb-4 flex items-center justify-center shadow-sm",children:s.jsx(gr,{className:"h-8 w-8 md:h-10 md:w-10 text-gray-400"})}),s.jsx("h4",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2",children:"Ready to Scan"}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-3 md:p-4 border border-blue-200 max-w-md mx-auto",children:s.jsxs("div",{className:"space-y-1 md:space-y-2 text-xs md:text-sm text-blue-800",children:[s.jsxs("p",{className:"flex items-center",children:[s.jsx("span",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-blue-500 rounded-full mr-2 md:mr-3"}),"Position QR code within the scanning frame"]}),s.jsxs("p",{className:"flex items-center",children:[s.jsx("span",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-blue-500 rounded-full mr-2 md:mr-3"}),"Hold steady for best detection results"]}),s.jsxs("p",{className:"flex items-center",children:[s.jsx("span",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-blue-500 rounded-full mr-2 md:mr-3"}),"Real-time QR code detection active"]}),s.jsxs("p",{className:"flex items-center text-xs text-blue-600 mt-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 md:w-2 md:h-2 bg-blue-400 rounded-full mr-2 md:mr-3"})," Mobile optimized - Back camera enabled"]})]})})]})}),o&&s.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:s.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-600",children:[s.jsxs("span",{children:[" powered by ",s.jsx("i",{children:"Event Management System"})]}),s.jsx("span",{children:" Real-time QR detection"})]})})]}):s.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"bg-gray-100 rounded-full p-3 w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:s.jsx(gr,{className:"h-8 w-8 text-gray-500"})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"QR Code Scanner"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Select an event to start scanning"}),s.jsx("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:s.jsx("p",{className:"text-sm text-blue-700",children:" Camera will activate when an event is selected"})})]})})}class _j extends Lh.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("ErrorBoundary caught error:",t,n)}render(){return this.state.hasError?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-red-50",children:s.jsxs("div",{className:"bg-white border border-red-300 rounded-lg p-8 max-w-lg w-full text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-red-700 mb-4",children:"Something went wrong"}),s.jsx("pre",{className:"text-sm text-red-600 mb-4 whitespace-pre-wrap",children:String(this.state.error)}),s.jsx("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Reload Page"})]})}):this.props.children}}function Sj({userCompany:e}){const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState(""),[c,x]=A.useState([]),[d,f]=A.useState({total:0,checkedIn:0}),[m,v]=A.useState(""),[y,C]=A.useState(null),[P,B]=A.useState(null),[g,b]=A.useState([]),[j,D]=A.useState(!1),[w,E]=A.useState(null),[N,M]=A.useState(!1),[L,J]=A.useState({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_assignment:""}),[se,X]=A.useState(!1),[Q,ce]=A.useState(null),[V,xe]=A.useState(null),[ne,_]=A.useState(!1),S=A.useRef(null),U=A.useRef(null);A.useEffect(()=>{$()},[]),A.useEffect(()=>{const ie=t.get("eventId");ie&&n.length>0&&a(ie)},[t,n]),A.useEffect(()=>{o&&(H(),me(),R())},[o]),A.useEffect(()=>{o&&W()},[o]),A.useEffect(()=>()=>{S.current&&S.current.srcObject&&(S.current.srcObject.getTracks().forEach(Ne=>Ne.stop()),S.current.srcObject=null)},[]),A.useEffect(()=>()=>{S.current&&S.current.srcObject&&(S.current.srcObject.getTracks().forEach(Ne=>Ne.stop()),S.current.srcObject=null)},[]);const $=async()=>{try{let ie=le.from("events").select(`
          id,
          name,
          company_id,
          registration_qr,
          custom_logo,
          custom_background,
          company:companies(name)
        `);e&&(ie=ie.eq("company_id",e.company_id));const{data:Ne,error:ze}=await ie.order("created_at",{ascending:!1});if(ze)throw ze;const Me=(Ne==null?void 0:Ne.map(ct=>({...ct,company:Array.isArray(ct.company)?ct.company[0]:ct.company})))||[];r(Me),e&&Me&&Me.length>0&&a(Me[0].id)}catch(ie){z.error("Error fetching events: "+ie.message)}},R=async()=>{try{if(!o)return;const ie=`${window.location.origin}/admin/checkin?event=${o}`,Ne=await qn.toDataURL(ie,{width:200,margin:2,errorCorrectionLevel:"M"});v(Ne)}catch(ie){console.error("Error generating QR code:",ie),v("")}},H=async()=>{try{const{data:ie,error:Ne}=await le.from("attendees").select("id, checked_in").eq("event_id",o);if(Ne)throw Ne;f({total:ie.length,checkedIn:ie.filter(ze=>ze.checked_in).length})}catch(ie){console.error("Error fetching stats:",ie)}},me=async()=>{try{const{data:ie,error:Ne}=await le.from("attendees").select(`
          id,
          name,
          identification_number,
          staff_id,
          table_assignment,
          table_number,
          seat_number,
          company,
          email,
          phone,
          check_in_time,
          event:events(name)
        `).eq("event_id",o).eq("checked_in",!0).order("check_in_time",{ascending:!1}).limit(10);if(Ne)throw Ne;const ze=(ie||[]).map(Me=>{let ct="";return Me.table_number?(ct=`Table ${Me.table_number}`,Me.seat_number&&(ct+=` - Seat ${Me.seat_number}`)):Me.table_assignment&&(ct=Me.table_assignment),{...Me,table_assignment:ct||null}});x(ze)}catch(ie){console.error("Error fetching recent check-ins:",ie)}},W=async()=>{D(!0);try{const{data:ie,error:Ne}=await le.from("attendees").select("*").eq("event_id",o).order("created_at",{ascending:!1});if(Ne)throw Ne;b(ie)}catch(ie){z.error("Error fetching attendees: "+ie.message)}finally{D(!1)}},I=()=>{E(null),J({name:"",email:"",phone:"",identification_number:"",staff_id:"",table_assignment:""}),M(!0)},Ee=ie=>{E(ie),J({name:ie.name||"",email:ie.email||"",phone:ie.phone||"",identification_number:ie.identification_number||"",staff_id:ie.staff_id||"",table_assignment:ie.table_assignment||""}),M(!0)},pe=ie=>{if(ie.preventDefault(),!(!L.name.trim()||!L.identification_number.trim()))if(w)le.from("attendees").update(L).eq("id",w.id).then(({error:Ne})=>{Ne?z.error("Error updating attendee: "+Ne.message):z.success("Attendee updated!"),M(!1),W()});else{const Ne=crypto.randomUUID();le.from("attendees").insert([{...L,id:Ne,event_id:o}]).then(({error:ze})=>{ze?z.error("Error adding attendee: "+ze.message):z.success("Attendee added!"),M(!1),W()})}},Ce=ie=>{confirm("Delete this attendee?")&&le.from("attendees").delete().eq("id",ie).then(({error:Ne})=>{Ne?z.error("Error deleting attendee: "+Ne.message):z.success("Attendee deleted!"),W()})},ge=ie=>{le.from("attendees").update({checked_in:!1,check_in_time:null}).eq("id",ie).then(({error:Ne})=>{Ne?z.error("Error resetting check-in: "+Ne.message):z.success("Check-in reset!"),W()})},be=()=>{confirm("Reset check-in for all attendees?")&&le.from("attendees").update({checked_in:!1,check_in_time:null}).eq("event_id",o).then(({error:ie})=>{ie?z.error("Error resetting all: "+ie.message):z.success("All check-ins reset!"),W()})},Be=async ie=>{var Ne,ze;try{const Me=await Re(ie);Me.success?(z.success(Me.message),H(),me(),C(((Ne=Me.attendee)==null?void 0:Ne.name)||null),B(((ze=Me.attendee)==null?void 0:ze.table_assignment)||null)):z.error(Me.message)}catch(Me){z.error("Error processing QR scan: "+Me.message)}},Re=async ie=>{try{if(ie.includes("|")){const Ne=ie.split("|");if(Ne.length!==3)return{success:!1,message:"Invalid QR code format"};const ze=Ne[0],{data:Me,error:ct}=await le.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            table_assignment,
            table_number,
            seat_number,
            company,
            email,
            phone,
            face_photo_url,
            event:events(name)
          `).eq("id",ze).single();if(ct||!Me)return{success:!1,message:"Attendee not found"};if(Me.event_id!==o)return{success:!1,message:"This ticket is not valid for the selected event"};if(Me.checked_in)return{success:!1,message:`${Me.name} is already checked in`};const{error:Ot}=await le.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",Me.id);if(Ot)throw Ot;const{data:ut}=await le.from("attendees").select("id, name, identification_number, staff_id, table_assignment, table_number, seat_number, company, event:events(name)").eq("id",Me.id).single();let Et="",ir=Me;if(ut){ut.table_number?(Et=`Table ${ut.table_number}`,ut.seat_number&&(Et+=` - Seat ${ut.seat_number}`)):ut.table_assignment&&(Et=ut.table_assignment),ir={...Me,...ut};let jn=`${Me.name} checked in successfully!`;Et&&(jn+=` Assigned to ${Et}`),ut.staff_id&&(jn+=` (Staff ID: ${ut.staff_id})`),ut.company&&(jn+=` from ${ut.company}`),z.success(jn)}else z.success(`${Me.name} checked in! No table assigned`);return{success:!0,attendee:ir,message:`${Me.name} checked in successfully!${Et?` | Table: ${Et}`:""}`}}else{const{data:Ne,error:ze}=await le.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            table_assignment,
            table_number,
            seat_number,
            company,
            email,
            phone,
            event:events(name)
          `).eq("event_id",o).or(`identification_number.eq.${ie},staff_id.eq.${ie}`);if(ze)throw ze;if(!Ne||Ne.length===0)return{success:!1,message:"No attendee found with this ID"};const Me=Ne[0];if(Me.checked_in)return{success:!1,message:`${Me.name} is already checked in`};const{error:ct}=await le.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",Me.id);if(ct)throw ct;let Ot="";Me.table_number?(Ot=`Table ${Me.table_number}`,Me.seat_number&&(Ot+=` - Seat ${Me.seat_number}`)):Me.table_assignment&&(Ot=Me.table_assignment);let ut=`${Me.name} checked in successfully!`;return Ot&&(ut+=` Assigned to ${Ot}`),Me.staff_id&&(ut+=` (Staff ID: ${Me.staff_id})`),Me.company&&(ut+=` from ${Me.company}`),z.success(ut),{success:!0,attendee:Me,message:`${Me.name} checked in successfully!${Ot?` | Table: ${Ot}`:""}`}}}catch(Ne){return{success:!1,message:"Error processing check-in: "+Ne.message}}},Ke=async ie=>{var ze,Me;if(ie.preventDefault(),!o){z.error("Please select an event first");return}if(!i.trim())return;C(null),B(null);const Ne=await Re(i);Ne.success?(z.success(Ne.message),l(""),H(),me(),C(((ze=Ne.attendee)==null?void 0:ze.name)||null),B(((Me=Ne.attendee)==null?void 0:Me.table_assignment)||null)):z.error(Ne.message)},He=async()=>{try{const ie=await navigator.mediaDevices.getUserMedia({video:!0});S.current&&(S.current.srcObject=ie,_(!0))}catch(ie){console.error("Error accessing camera:",ie),z.error("Unable to access camera"),_(!1)}},nt=()=>{S.current&&S.current.srcObject&&(S.current.srcObject.getTracks().forEach(Ne=>Ne.stop()),S.current.srcObject=null),_(!1)},mt=()=>{try{if(S.current&&U.current){const ie=S.current,Ne=U.current,ze=Ne.getContext("2d");if(ze&&ie.videoWidth>0&&ie.videoHeight>0){Ne.width=ie.videoWidth,Ne.height=ie.videoHeight,ze.drawImage(ie,0,0);const Me=Ne.toDataURL("image/jpeg");xe(Me),nt()}else z.error("Camera not ready. Please wait a moment and try again.")}}catch(ie){console.error("Error capturing face:",ie),z.error("Error capturing photo")}},pt=async()=>{if(Q)try{const ie=await Re(Q.identification_number);ie.success?(z.success(ie.message),X(!1),ce(null),xe(null),H(),me()):z.error(ie.message)}catch{z.error("Error during face verification check-in")}};return s.jsx(_j,{children:s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Check-In System"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Scan QR codes to check in attendees"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:ie=>a(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&s.jsx("option",{value:"",children:"Choose an event to start check-in"}),n.map(ie=>s.jsx("option",{value:ie.id,children:e?ie.name:`${ie.name} (${ie.company.name})`},ie.id))]})]}),o&&s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Check-in Progress"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[d.checkedIn," / ",d.total]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[d.total>0?Math.round(d.checkedIn/d.total*100):0,"% complete"]})]})})]})}),o&&(()=>{var ze,Me;const ie=n.find(ct=>ct.id===o),Ne=ie!=null&&ie.custom_background?{backgroundImage:ie.custom_background.startsWith("blob:")?`url(${ie.custom_background})`:`url(${Tt(ie.custom_background)})`,backgroundSize:"cover",backgroundPosition:"center"}:{};return s.jsx("div",{style:Ne,className:"min-h-[200px] rounded-lg mb-6 p-6 relative",children:s.jsxs("div",{className:"bg-white/80 rounded-lg shadow-md p-6 max-w-xl mx-auto",children:[(ie==null?void 0:ie.custom_logo)&&s.jsx("div",{className:"flex justify-center mb-2",children:s.jsx("img",{src:Tt(ie.custom_logo),alt:"Event Logo",className:"h-20 object-contain"})}),s.jsx("h2",{className:"text-2xl font-bold mb-1 text-center",children:ie==null?void 0:ie.name}),s.jsx("div",{className:"text-gray-600 text-sm mb-1 text-center",children:(ze=ie==null?void 0:ie.company)==null?void 0:ze.name}),y&&s.jsxs("div",{className:"text-center text-green-600 font-bold text-xl mb-4",children:["Welcome, ",y,"!",s.jsx("br",{}),P&&s.jsxs("span",{className:"block text-lg text-blue-700 mt-2",children:["Your Table: ",P]}),s.jsx("div",{className:"mt-4",children:s.jsxs("a",{href:`/public/venue/${o}/${y?(Me=g.find(ct=>ct.name===y))==null?void 0:Me.id:""}`,target:"_blank",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),"View Venue Layout"]})})]})]})})})(),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(gr,{className:"h-6 w-6 mr-2"}),"Check-In System"]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Camera Scanner"}),s.jsx(hh,{onScan:Be,onError:ie=>z.error(ie),autoStart:!0,eventSelected:!!o})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Manual ID Entry"}),s.jsxs("form",{onSubmit:Ke,className:"space-y-3",children:[s.jsx("input",{type:"text",value:i,onChange:ie=>l(ie.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter ID number or Staff ID",autoFocus:!0}),s.jsxs("button",{type:"submit",className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",disabled:!o,children:[s.jsx(Li,{className:"h-4 w-4 mr-2"}),"Check In"]})]})]})]})]}),m&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Qt,{className:"h-6 w-6 mr-2"}),"Event QR Code"]}),s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:m,alt:"Event QR Code",className:"w-48 h-48 mx-auto border border-gray-200 rounded-lg mb-3"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Event Check-in QR Code"}),s.jsx("p",{className:"text-xs text-gray-500",children:"Share this QR code for quick access to check-in"})]})]}),o&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-lg font-bold",children:"Attendee Management"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:I,className:"bg-blue-600 text-white px-3 py-1 rounded hover:bg-blue-700",children:"Add Attendee"}),s.jsx("button",{onClick:be,className:"bg-orange-500 text-white px-3 py-1 rounded hover:bg-orange-600",children:"Reset All Check-In"})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full text-sm",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"bg-gray-100",children:[s.jsx("th",{className:"p-2",children:"Name"}),s.jsx("th",{className:"p-2",children:"ID"}),s.jsx("th",{className:"p-2",children:"Staff ID"}),s.jsx("th",{className:"p-2",children:"Table"}),s.jsx("th",{className:"p-2",children:"Checked In"}),s.jsx("th",{className:"p-2",children:"Actions"})]})}),s.jsx("tbody",{children:j?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center p-4",children:"Loading..."})}):g.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:6,className:"text-center p-4",children:"No attendees"})}):g.map(ie=>s.jsxs("tr",{className:"border-b",children:[s.jsx("td",{className:"p-2",children:ie.name}),s.jsx("td",{className:"p-2",children:ie.identification_number}),s.jsx("td",{className:"p-2",children:ie.staff_id}),s.jsx("td",{className:"p-2",children:ie.table_assignment}),s.jsx("td",{className:"p-2",children:ie.checked_in?s.jsx("span",{className:"text-green-600 font-bold",children:"Yes"}):"No"}),s.jsxs("td",{className:"p-2 flex gap-2",children:[s.jsx("button",{onClick:()=>Ee(ie),className:"text-blue-600 hover:underline",children:"Edit"}),s.jsx("button",{onClick:()=>Ce(ie.id),className:"text-red-600 hover:underline",children:"Delete"}),s.jsx("button",{onClick:()=>ge(ie.id),className:"text-orange-600 hover:underline",children:"Reset Check-In"})]})]},ie.id))})]})}),N&&s.jsx("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:w?"Edit Attendee":"Add Attendee"}),s.jsxs("form",{onSubmit:pe,className:"space-y-3",children:[s.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Name",value:L.name,onChange:ie=>J({...L,name:ie.target.value}),required:!0}),s.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Identification Number",value:L.identification_number,onChange:ie=>J({...L,identification_number:ie.target.value}),required:!0}),s.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Staff ID",value:L.staff_id,onChange:ie=>J({...L,staff_id:ie.target.value})}),s.jsx("input",{type:"text",className:"w-full border px-3 py-2 rounded",placeholder:"Table Assignment",value:L.table_assignment,onChange:ie=>J({...L,table_assignment:ie.target.value})}),s.jsx("input",{type:"email",className:"w-full border px-3 py-2 rounded",placeholder:"Email",value:L.email,onChange:ie=>J({...L,email:ie.target.value})}),s.jsx("input",{type:"tel",className:"w-full border px-3 py-2 rounded",placeholder:"Phone",value:L.phone,onChange:ie=>J({...L,phone:ie.target.value})}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsx("button",{type:"button",onClick:()=>M(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:w?"Update":"Add"})]})]})]})})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mt-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(vt,{className:"h-6 w-6 mr-2"}),"Recent Check-ins"]}),s.jsxs("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:[c.map(ie=>s.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg",children:[s.jsx(br,{className:"h-5 w-5 text-green-600 mr-3"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:ie.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",ie.identification_number]}),ie.staff_id&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Staff ID: ",ie.staff_id]}),ie.company&&s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:ie.company}),ie.table_assignment&&s.jsxs("div",{className:"text-sm text-blue-700 font-semibold",children:["Table: ",ie.table_assignment]}),(ie.email||ie.phone)&&s.jsxs("div",{className:"text-xs text-gray-500",children:[ie.email&&s.jsxs("div",{children:[" ",ie.email]}),ie.phone&&s.jsxs("div",{children:[" ",ie.phone]})]}),s.jsx("div",{className:"text-xs text-gray-500",children:new Date(ie.check_in_time).toLocaleTimeString()})]})]},ie.id)),c.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(vt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No check-ins yet"})]})]})]}),se&&(()=>{try{return console.log("FaceDetectionModal:",{showFaceDetection:se,currentAttendee:Q,facePhoto:V,showCamera:ne}),Q?s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Face Detection Required"}),s.jsxs("p",{className:"text-gray-600 mb-4",children:["Please look at the camera to verify your identity for ",Q.name]}),Q.face_photo_url&&s.jsxs("div",{className:"mb-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Registered Photo:"}),s.jsx("img",{src:Tt(Q.face_photo_url),alt:"Registered photo",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-300"})]}),!ne&&!V&&s.jsxs("button",{onClick:He,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[s.jsx(gr,{className:"h-5 w-5 mr-2"}),"Start Camera"]}),ne&&s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[s.jsx("video",{ref:S,autoPlay:!0,playsInline:!0,className:"w-full h-64 object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-48 h-48 border-4 border-white rounded-full opacity-80"})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:s.jsxs("button",{type:"button",onClick:mt,className:"bg-white text-black px-6 py-2 rounded-full hover:bg-gray-100 flex items-center",children:[s.jsx(gr,{className:"h-4 w-4 mr-2"}),"Capture"]})}),s.jsx("button",{type:"button",onClick:()=>{nt(),X(!1),ce(null)},className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:s.jsx(Ra,{className:"h-4 w-4"})})]}),s.jsx("canvas",{ref:U,className:"hidden"})]}),V&&s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Captured Photo:"}),s.jsx("img",{src:V,alt:"Captured photo",className:"w-24 h-24 object-cover rounded-lg border-2 border-gray-300 mx-auto mb-4"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{xe(null),He()},className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700",children:"Retake"}),s.jsx("button",{onClick:pt,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700",children:"Confirm Check-in"})]})]})]})}):s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md text-center",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Face Detection Error"}),s.jsx("p",{className:"text-red-600",children:"No attendee data found. Please try again."}),s.jsx("button",{onClick:()=>{X(!1),ce(null),xe(null)},className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Close"})]})})}catch(ie){return console.error("FaceDetectionModal error:",ie),s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md text-center",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:"Face Detection Error"}),s.jsx("p",{className:"text-red-600",children:"An error occurred. Please try again."}),s.jsx("button",{onClick:()=>{X(!1),ce(null),xe(null)},className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg",children:"Close"})]})})}})()]})})}const Xf=A.createContext({});function Jf(e){const t=A.useRef(null);return t.current===null&&(t.current=e()),t.current}const Zf=typeof window<"u",Y1=Zf?A.useLayoutEffect:A.useEffect,gu=A.createContext(null);function em(e,t){e.indexOf(t)===-1&&e.push(t)}function tm(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const ls=(e,t,n)=>n>t?t:n<e?e:n;let nm=()=>{};const cs={},X1=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function J1(e){return typeof e=="object"&&e!==null}const Z1=e=>/^0[^.\s]+$/u.test(e);function rm(e){let t;return()=>(t===void 0&&(t=e()),t)}const rr=e=>e,Pj=(e,t)=>n=>t(e(n)),Tl=(...e)=>e.reduce(Pj),xl=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class sm{constructor(){this.subscriptions=[]}add(t){return em(this.subscriptions,t),()=>tm(this.subscriptions,t)}notify(t,n,r){const o=this.subscriptions.length;if(o)if(o===1)this.subscriptions[0](t,n,r);else for(let a=0;a<o;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ir=e=>e*1e3,Rr=e=>e/1e3;function eE(e,t){return t?e*(1e3/t):0}const tE=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Tj=1e-7,Ij=12;function Rj(e,t,n,r,o){let a,i,l=0;do i=t+(n-t)/2,a=tE(i,r,o)-e,a>0?n=i:t=i;while(Math.abs(a)>Tj&&++l<Ij);return i}function Il(e,t,n,r){if(e===t&&n===r)return rr;const o=a=>Rj(a,0,1,e,n);return a=>a===0||a===1?a:tE(o(a),t,r)}const nE=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,rE=e=>t=>1-e(1-t),sE=Il(.33,1.53,.69,.99),om=rE(sE),oE=nE(om),aE=e=>(e*=2)<1?.5*om(e):.5*(2-Math.pow(2,-10*(e-1))),am=e=>1-Math.sin(Math.acos(e)),iE=rE(am),lE=nE(am),Mj=Il(.42,0,1,1),Lj=Il(0,0,.58,1),cE=Il(.42,0,.58,1),$j=e=>Array.isArray(e)&&typeof e[0]!="number",uE=e=>Array.isArray(e)&&typeof e[0]=="number",Oj={linear:rr,easeIn:Mj,easeInOut:cE,easeOut:Lj,circIn:am,circInOut:lE,circOut:iE,backIn:om,backInOut:oE,backOut:sE,anticipate:aE},Uj=e=>typeof e=="string",ly=e=>{if(uE(e)){nm(e.length===4);const[t,n,r,o]=e;return Il(t,n,r,o)}else if(Uj(e))return Oj[e];return e},Dc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Vj(e,t){let n=new Set,r=new Set,o=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(d){i.has(d)&&(x.schedule(d),e()),d(l)}const x={schedule:(d,f=!1,m=!1)=>{const y=m&&o?n:r;return f&&i.add(d),y.has(d)||y.add(d),d},cancel:d=>{r.delete(d),i.delete(d)},process:d=>{if(l=d,o){a=!0;return}o=!0,[n,r]=[r,n],n.forEach(c),n.clear(),o=!1,a&&(a=!1,x.process(d))}};return x}const zj=40;function dE(e,t){let n=!1,r=!0;const o={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=Dc.reduce((b,j)=>(b[j]=Vj(a),b),{}),{setup:l,read:c,resolveKeyframes:x,preUpdate:d,update:f,preRender:m,render:v,postRender:y}=i,C=()=>{const b=cs.useManualTiming?o.timestamp:performance.now();n=!1,cs.useManualTiming||(o.delta=r?1e3/60:Math.max(Math.min(b-o.timestamp,zj),1)),o.timestamp=b,o.isProcessing=!0,l.process(o),c.process(o),x.process(o),d.process(o),f.process(o),m.process(o),v.process(o),y.process(o),o.isProcessing=!1,n&&t&&(r=!1,e(C))},P=()=>{n=!0,r=!0,o.isProcessing||e(C)};return{schedule:Dc.reduce((b,j)=>{const D=i[j];return b[j]=(w,E=!1,N=!1)=>(n||P(),D.schedule(w,E,N)),b},{}),cancel:b=>{for(let j=0;j<Dc.length;j++)i[Dc[j]].cancel(b)},state:o,steps:i}}const{schedule:Nt,cancel:Ks,state:sn,steps:$d}=dE(typeof requestAnimationFrame<"u"?requestAnimationFrame:rr,!0);let Gc;function qj(){Gc=void 0}const Pn={now:()=>(Gc===void 0&&Pn.set(sn.isProcessing||cs.useManualTiming?sn.timestamp:performance.now()),Gc),set:e=>{Gc=e,queueMicrotask(qj)}},xE=e=>t=>typeof t=="string"&&t.startsWith(e),im=xE("--"),Wj=xE("var(--"),lm=e=>Wj(e)?Kj.test(e.split("/*")[0].trim()):!1,Kj=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Xa={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hl={...Xa,transform:e=>ls(0,1,e)},Fc={...Xa,default:1},Oi=e=>Math.round(e*1e5)/1e5,cm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Hj(e){return e==null}const Gj=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,um=(e,t)=>n=>!!(typeof n=="string"&&Gj.test(n)&&n.startsWith(e)||t&&!Hj(n)&&Object.prototype.hasOwnProperty.call(n,t)),hE=(e,t,n)=>r=>{if(typeof r!="string")return r;const[o,a,i,l]=r.match(cm);return{[e]:parseFloat(o),[t]:parseFloat(a),[n]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},Qj=e=>ls(0,255,e),Od={...Xa,transform:e=>Math.round(Qj(e))},Ao={test:um("rgb","red"),parse:hE("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Od.transform(e)+", "+Od.transform(t)+", "+Od.transform(n)+", "+Oi(hl.transform(r))+")"};function Yj(e){let t="",n="",r="",o="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),o=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),o=e.substring(4,5),t+=t,n+=n,r+=r,o+=o),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:o?parseInt(o,16)/255:1}}const fh={test:um("#"),parse:Yj,transform:Ao.transform},Rl=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Bs=Rl("deg"),Mr=Rl("%"),Ye=Rl("px"),Xj=Rl("vh"),Jj=Rl("vw"),cy={...Mr,parse:e=>Mr.parse(e)/100,transform:e=>Mr.transform(e*100)},ha={test:um("hsl","hue"),parse:hE("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Mr.transform(Oi(t))+", "+Mr.transform(Oi(n))+", "+Oi(hl.transform(r))+")"},Kt={test:e=>Ao.test(e)||fh.test(e)||ha.test(e),parse:e=>Ao.test(e)?Ao.parse(e):ha.test(e)?ha.parse(e):fh.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ao.transform(e):ha.transform(e),getAnimatableNone:e=>{const t=Kt.parse(e);return t.alpha=0,Kt.transform(t)}},Zj=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ek(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(cm))==null?void 0:t.length)||0)+(((n=e.match(Zj))==null?void 0:n.length)||0)>0}const fE="number",mE="color",tk="var",nk="var(",uy="${}",rk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fl(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},o=[];let a=0;const l=t.replace(rk,c=>(Kt.test(c)?(r.color.push(a),o.push(mE),n.push(Kt.parse(c))):c.startsWith(nk)?(r.var.push(a),o.push(tk),n.push(c)):(r.number.push(a),o.push(fE),n.push(parseFloat(c))),++a,uy)).split(uy);return{values:n,split:l,indexes:r,types:o}}function pE(e){return fl(e).values}function gE(e){const{split:t,types:n}=fl(e),r=t.length;return o=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],o[i]!==void 0){const l=n[i];l===fE?a+=Oi(o[i]):l===mE?a+=Kt.transform(o[i]):a+=o[i]}return a}}const sk=e=>typeof e=="number"?0:Kt.test(e)?Kt.getAnimatableNone(e):e;function ok(e){const t=pE(e);return gE(e)(t.map(sk))}const Hs={test:ek,parse:pE,createTransformer:gE,getAnimatableNone:ok};function Ud(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ak({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let o=0,a=0,i=0;if(!t)o=a=i=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;o=Ud(c,l,e+1/3),a=Ud(c,l,e),i=Ud(c,l,e-1/3)}return{red:Math.round(o*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function S0(e,t){return n=>n>0?t:e}const It=(e,t,n)=>e+(t-e)*n,Vd=(e,t,n)=>{const r=e*e,o=n*(t*t-r)+r;return o<0?0:Math.sqrt(o)},ik=[fh,Ao,ha],lk=e=>ik.find(t=>t.test(e));function dy(e){const t=lk(e);if(!t)return!1;let n=t.parse(e);return t===ha&&(n=ak(n)),n}const xy=(e,t)=>{const n=dy(e),r=dy(t);if(!n||!r)return S0(e,t);const o={...n};return a=>(o.red=Vd(n.red,r.red,a),o.green=Vd(n.green,r.green,a),o.blue=Vd(n.blue,r.blue,a),o.alpha=It(n.alpha,r.alpha,a),Ao.transform(o))},mh=new Set(["none","hidden"]);function ck(e,t){return mh.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function uk(e,t){return n=>It(e,t,n)}function dm(e){return typeof e=="number"?uk:typeof e=="string"?lm(e)?S0:Kt.test(e)?xy:hk:Array.isArray(e)?yE:typeof e=="object"?Kt.test(e)?xy:dk:S0}function yE(e,t){const n=[...e],r=n.length,o=e.map((a,i)=>dm(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=o[i](a);return n}}function dk(e,t){const n={...e,...t},r={};for(const o in n)e[o]!==void 0&&t[o]!==void 0&&(r[o]=dm(e[o])(e[o],t[o]));return o=>{for(const a in r)n[a]=r[a](o);return n}}function xk(e,t){const n=[],r={color:0,var:0,number:0};for(let o=0;o<t.values.length;o++){const a=t.types[o],i=e.indexes[a][r[a]],l=e.values[i]??0;n[o]=l,r[a]++}return n}const hk=(e,t)=>{const n=Hs.createTransformer(t),r=fl(e),o=fl(t);return r.indexes.var.length===o.indexes.var.length&&r.indexes.color.length===o.indexes.color.length&&r.indexes.number.length>=o.indexes.number.length?mh.has(e)&&!o.values.length||mh.has(t)&&!r.values.length?ck(e,t):Tl(yE(xk(r,o),o.values),n):S0(e,t)};function vE(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?It(e,t,n):dm(e)(e,t)}const fk=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Nt.update(t,n),stop:()=>Ks(t),now:()=>sn.isProcessing?sn.timestamp:Pn.now()}},EE=(e,t,n=10)=>{let r="";const o=Math.max(Math.round(t/n),2);for(let a=0;a<o;a++)r+=Math.round(e(a/(o-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},P0=2e4;function xm(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<P0;)t+=n,r=e.next(t);return t>=P0?1/0:t}function mk(e,t=100,n){const r=n({...e,keyframes:[0,t]}),o=Math.min(xm(r),P0);return{type:"keyframes",ease:a=>r.next(o*a).value/t,duration:Rr(o)}}const pk=5;function bE(e,t,n){const r=Math.max(t-pk,0);return eE(n-e(r),t-r)}const Lt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},zd=.001;function gk({duration:e=Lt.duration,bounce:t=Lt.bounce,velocity:n=Lt.velocity,mass:r=Lt.mass}){let o,a,i=1-t;i=ls(Lt.minDamping,Lt.maxDamping,i),e=ls(Lt.minDuration,Lt.maxDuration,Rr(e)),i<1?(o=x=>{const d=x*i,f=d*e,m=d-n,v=ph(x,i),y=Math.exp(-f);return zd-m/v*y},a=x=>{const f=x*i*e,m=f*n+n,v=Math.pow(i,2)*Math.pow(x,2)*e,y=Math.exp(-f),C=ph(Math.pow(x,2),i);return(-o(x)+zd>0?-1:1)*((m-v)*y)/C}):(o=x=>{const d=Math.exp(-x*e),f=(x-n)*e+1;return-zd+d*f},a=x=>{const d=Math.exp(-x*e),f=(n-x)*(e*e);return d*f});const l=5/e,c=vk(o,a,l);if(e=Ir(e),isNaN(c))return{stiffness:Lt.stiffness,damping:Lt.damping,duration:e};{const x=Math.pow(c,2)*r;return{stiffness:x,damping:i*2*Math.sqrt(r*x),duration:e}}}const yk=12;function vk(e,t,n){let r=n;for(let o=1;o<yk;o++)r=r-e(r)/t(r);return r}function ph(e,t){return e*Math.sqrt(1-t*t)}const Ek=["duration","bounce"],bk=["stiffness","damping","mass"];function hy(e,t){return t.some(n=>e[n]!==void 0)}function wk(e){let t={velocity:Lt.velocity,stiffness:Lt.stiffness,damping:Lt.damping,mass:Lt.mass,isResolvedFromDuration:!1,...e};if(!hy(e,bk)&&hy(e,Ek))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),o=r*r,a=2*ls(.05,1,1-(e.bounce||0))*Math.sqrt(o);t={...t,mass:Lt.mass,stiffness:o,damping:a}}else{const n=gk(e);t={...t,...n,mass:Lt.mass},t.isResolvedFromDuration=!0}return t}function T0(e=Lt.visualDuration,t=Lt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:o}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:x,mass:d,duration:f,velocity:m,isResolvedFromDuration:v}=wk({...n,velocity:-Rr(n.velocity||0)}),y=m||0,C=x/(2*Math.sqrt(c*d)),P=i-a,B=Rr(Math.sqrt(c/d)),g=Math.abs(P)<5;r||(r=g?Lt.restSpeed.granular:Lt.restSpeed.default),o||(o=g?Lt.restDelta.granular:Lt.restDelta.default);let b;if(C<1){const D=ph(B,C);b=w=>{const E=Math.exp(-C*B*w);return i-E*((y+C*B*P)/D*Math.sin(D*w)+P*Math.cos(D*w))}}else if(C===1)b=D=>i-Math.exp(-B*D)*(P+(y+B*P)*D);else{const D=B*Math.sqrt(C*C-1);b=w=>{const E=Math.exp(-C*B*w),N=Math.min(D*w,300);return i-E*((y+C*B*P)*Math.sinh(N)+D*P*Math.cosh(N))/D}}const j={calculatedDuration:v&&f||null,next:D=>{const w=b(D);if(v)l.done=D>=f;else{let E=D===0?y:0;C<1&&(E=D===0?Ir(y):bE(b,D,w));const N=Math.abs(E)<=r,M=Math.abs(i-w)<=o;l.done=N&&M}return l.value=l.done?i:w,l},toString:()=>{const D=Math.min(xm(j),P0),w=EE(E=>j.next(D*E).value,D,30);return D+"ms "+w},toTransition:()=>{}};return j}T0.applyToOptions=e=>{const t=mk(e,100,T0);return e.ease=t.ease,e.duration=Ir(t.duration),e.type="keyframes",e};function gh({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:o=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:x=.5,restSpeed:d}){const f=e[0],m={done:!1,value:f},v=N=>l!==void 0&&N<l||c!==void 0&&N>c,y=N=>l===void 0?c:c===void 0||Math.abs(l-N)<Math.abs(c-N)?l:c;let C=n*t;const P=f+C,B=i===void 0?P:i(P);B!==P&&(C=B-f);const g=N=>-C*Math.exp(-N/r),b=N=>B+g(N),j=N=>{const M=g(N),L=b(N);m.done=Math.abs(M)<=x,m.value=m.done?B:L};let D,w;const E=N=>{v(m.value)&&(D=N,w=T0({keyframes:[m.value,y(m.value)],velocity:bE(b,N,m.value),damping:o,stiffness:a,restDelta:x,restSpeed:d}))};return E(0),{calculatedDuration:null,next:N=>{let M=!1;return!w&&D===void 0&&(M=!0,j(N),E(N)),D!==void 0&&N>=D?w.next(N-D):(!M&&j(N),m)}}}function Ck(e,t,n){const r=[],o=n||cs.mix||vE,a=e.length-1;for(let i=0;i<a;i++){let l=o(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||rr:t;l=Tl(c,l)}r.push(l)}return r}function Bk(e,t,{clamp:n=!0,ease:r,mixer:o}={}){const a=e.length;if(nm(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=Ck(t,r,o),c=l.length,x=d=>{if(i&&d<e[0])return t[0];let f=0;if(c>1)for(;f<e.length-2&&!(d<e[f+1]);f++);const m=xl(e[f],e[f+1],d);return l[f](m)};return n?d=>x(ls(e[0],e[a-1],d)):x}function Ak(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const o=xl(0,t,r);e.push(It(n,1,o))}}function jk(e){const t=[0];return Ak(t,e.length-1),t}function kk(e,t){return e.map(n=>n*t)}function Dk(e,t){return e.map(()=>t||cE).splice(0,e.length-1)}function Ui({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const o=$j(r)?r.map(ly):ly(r),a={done:!1,value:t[0]},i=kk(n&&n.length===t.length?n:jk(t),e),l=Bk(i,t,{ease:Array.isArray(o)?o:Dk(t,o)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const Fk=e=>e!==null;function hm(e,{repeat:t,repeatType:n="loop"},r,o=1){const a=e.filter(Fk),l=o<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const Nk={decay:gh,inertia:gh,tween:Ui,keyframes:Ui,spring:T0};function wE(e){typeof e.type=="string"&&(e.type=Nk[e.type])}class fm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const _k=e=>e/100;class mm extends fm{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var r,o;const{motionValue:n}=this.options;n&&n.updatedAt!==Pn.now()&&this.tick(Pn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(o=(r=this.options).onStop)==null||o.call(r))},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;wE(t);const{type:n=Ui,repeat:r=0,repeatDelay:o=0,repeatType:a,velocity:i=0}=t;let{keyframes:l}=t;const c=n||Ui;c!==Ui&&typeof l[0]!="number"&&(this.mixKeyframes=Tl(_k,vE(l[0],l[1])),l=[0,100]);const x=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-i})),x.calculatedDuration===null&&(x.calculatedDuration=xm(x));const{calculatedDuration:d}=x;this.calculatedDuration=d,this.resolvedDuration=d+o,this.totalDuration=this.resolvedDuration*(r+1)-o,this.generator=x}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:o,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:x=0,keyframes:d,repeat:f,repeatType:m,repeatDelay:v,type:y,onUpdate:C,finalKeyframe:P}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-o/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const B=this.currentTime-x*(this.playbackSpeed>=0?1:-1),g=this.playbackSpeed>=0?B<0:B>o;this.currentTime=Math.max(B,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=o);let b=this.currentTime,j=r;if(f){const N=Math.min(this.currentTime,o)/l;let M=Math.floor(N),L=N%1;!L&&N>=1&&(L=1),L===1&&M--,M=Math.min(M,f+1),!!(M%2)&&(m==="reverse"?(L=1-L,v&&(L-=v/l)):m==="mirror"&&(j=i)),b=ls(0,1,L)*l}const D=g?{done:!1,value:d[0]}:j.next(b);a&&(D.value=a(D.value));let{done:w}=D;!g&&c!==null&&(w=this.playbackSpeed>=0?this.currentTime>=o:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&w);return E&&y!==gh&&(D.value=hm(d,this.options,P,this.speed)),C&&C(D.value),E&&this.finish(),D}then(t,n){return this.finished.then(t,n)}get duration(){return Rr(this.calculatedDuration)}get time(){return Rr(this.currentTime)}set time(t){var n;t=Ir(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Pn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Rr(this.currentTime))}play(){var o,a;if(this.isStopped)return;const{driver:t=fk,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),(a=(o=this.options).onPlay)==null||a.call(o);const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Pn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var t,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(t=this.options).onComplete)==null||n.call(t)}cancel(){var t,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(t=this.options).onCancel)==null||n.call(t)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),t.observe(this)}}function Sk(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const jo=e=>e*180/Math.PI,yh=e=>{const t=jo(Math.atan2(e[1],e[0]));return vh(t)},Pk={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:yh,rotateZ:yh,skewX:e=>jo(Math.atan(e[1])),skewY:e=>jo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},vh=e=>(e=e%360,e<0&&(e+=360),e),fy=yh,my=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),py=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Tk={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:my,scaleY:py,scale:e=>(my(e)+py(e))/2,rotateX:e=>vh(jo(Math.atan2(e[6],e[5]))),rotateY:e=>vh(jo(Math.atan2(-e[2],e[0]))),rotateZ:fy,rotate:fy,skewX:e=>jo(Math.atan(e[4])),skewY:e=>jo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Eh(e){return e.includes("scale")?1:0}function bh(e,t){if(!e||e==="none")return Eh(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,o;if(n)r=Tk,o=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Pk,o=l}if(!o)return Eh(t);const a=r[t],i=o[1].split(",").map(Rk);return typeof a=="function"?a(i):i[a]}const Ik=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return bh(n,t)};function Rk(e){return parseFloat(e.trim())}const Ja=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Za=new Set(Ja),gy=e=>e===Xa||e===Ye,Mk=new Set(["x","y","z"]),Lk=Ja.filter(e=>!Mk.has(e));function $k(e){const t=[];return Lk.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Fo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>bh(t,"x"),y:(e,{transform:t})=>bh(t,"y")};Fo.translateX=Fo.x;Fo.translateY=Fo.y;const No=new Set;let wh=!1,Ch=!1,Bh=!1;function CE(){if(Ch){const e=Array.from(No).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const o=$k(r);o.length&&(n.set(r,o),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const o=n.get(r);o&&o.forEach(([a,i])=>{var l;(l=r.getValue(a))==null||l.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}Ch=!1,wh=!1,No.forEach(e=>e.complete(Bh)),No.clear()}function BE(){No.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Ch=!0)})}function Ok(){Bh=!0,BE(),CE(),Bh=!1}class pm{constructor(t,n,r,o,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=o,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(No.add(this),wh||(wh=!0,Nt.read(BE),Nt.resolveKeyframes(CE))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:o}=this;if(t[0]===null){const a=o==null?void 0:o.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,i);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=i),o&&a===void 0&&o.set(t[0])}Sk(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),No.delete(this)}cancel(){this.state==="scheduled"&&(No.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Uk=e=>e.startsWith("--");function Vk(e,t,n){Uk(t)?e.style.setProperty(t,n):e.style[t]=n}const zk=rm(()=>window.ScrollTimeline!==void 0),qk={};function Wk(e,t){const n=rm(e);return()=>qk[t]??n()}const AE=Wk(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ai=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,yy={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ai([0,.65,.55,1]),circOut:Ai([.55,0,1,.45]),backIn:Ai([.31,.01,.66,-.59]),backOut:Ai([.33,1.53,.69,.99])};function jE(e,t){if(e)return typeof e=="function"?AE()?EE(e,t):"ease-out":uE(e)?Ai(e):Array.isArray(e)?e.map(n=>jE(n,t)||yy.easeOut):yy[e]}function Kk(e,t,n,{delay:r=0,duration:o=300,repeat:a=0,repeatType:i="loop",ease:l="easeOut",times:c}={},x=void 0){const d={[t]:n};c&&(d.offset=c);const f=jE(l,o);Array.isArray(f)&&(d.easing=f);const m={delay:r,duration:o,easing:Array.isArray(f)?"linear":f,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return x&&(m.pseudoElement=x),e.animate(d,m)}function kE(e){return typeof e=="function"&&"applyToOptions"in e}function Hk({type:e,...t}){return kE(e)&&AE()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class Gk extends fm{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:o,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,nm(typeof t.type!="string");const x=Hk(t);this.animation=Kk(n,r,o,x,a),x.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const d=hm(o,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(d):Vk(n,r,d),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var t,n;(n=(t=this.animation).finish)==null||n.call(t)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var t,n;this.isPseudoElement||(n=(t=this.animation).commitStyles)==null||n.call(t)}get duration(){var n,r;const t=((r=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:r.call(n).duration)||0;return Rr(Number(t))}get time(){return Rr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Ir(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){var r;return this.allowFlatten&&((r=this.animation.effect)==null||r.updateTiming({easing:"linear"})),this.animation.onfinish=null,t&&zk()?(this.animation.timeline=t,rr):n(this)}}const DE={anticipate:aE,backInOut:oE,circInOut:lE};function Qk(e){return e in DE}function Yk(e){typeof e.ease=="string"&&Qk(e.ease)&&(e.ease=DE[e.ease])}const vy=10;class Xk extends Gk{constructor(t){Yk(t),wE(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:o,element:a,...i}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new mm({...i,autoplay:!1}),c=Ir(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-vy).value,l.sample(c).value,vy),l.stop()}}const Ey=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hs.test(e)||e==="0")&&!e.startsWith("url("));function Jk(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Zk(e,t,n,r){const o=e[0];if(o===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=Ey(o,t),l=Ey(a,t);return!i||!l?!1:Jk(e)||(n==="spring"||kE(n))&&r}const eD=new Set(["opacity","clipPath","filter","transform"]),tD=rm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nD(e){var d;const{motionValue:t,name:n,repeatDelay:r,repeatType:o,damping:a,type:i}=e;if(!(((d=t==null?void 0:t.owner)==null?void 0:d.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:x}=t.owner.getProps();return tD()&&n&&eD.has(n)&&(n!=="transform"||!x)&&!c&&!r&&o!=="mirror"&&a!==0&&i!=="inertia"}const rD=40;class sD extends fm{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:o=0,repeatDelay:a=0,repeatType:i="loop",keyframes:l,name:c,motionValue:x,element:d,...f}){var y;super(),this.stop=()=>{var C,P;this._animation&&(this._animation.stop(),(C=this.stopTimeline)==null||C.call(this)),(P=this.keyframeResolver)==null||P.cancel()},this.createdAt=Pn.now();const m={autoplay:t,delay:n,type:r,repeat:o,repeatDelay:a,repeatType:i,name:c,motionValue:x,element:d,...f},v=(d==null?void 0:d.KeyframeResolver)||pm;this.keyframeResolver=new v(l,(C,P,B)=>this.onKeyframesResolved(C,P,m,!B),c,x,d),(y=this.keyframeResolver)==null||y.scheduleResolve()}onKeyframesResolved(t,n,r,o){this.keyframeResolver=void 0;const{name:a,type:i,velocity:l,delay:c,isHandoff:x,onUpdate:d}=r;this.resolvedAt=Pn.now(),Zk(t,a,i,l)||((cs.instantAnimations||!c)&&(d==null||d(hm(t,r,n))),t[0]=t[t.length-1],r.duration=0,r.repeat=0);const m={startTime:o?this.resolvedAt?this.resolvedAt-this.createdAt>rD?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},v=!x&&nD(m)?new Xk({...m,element:m.motionValue.owner.current}):new mm(m);v.finished.then(()=>this.notifyFinished()).catch(rr),this.pendingTimeline&&(this.stopTimeline=v.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=v}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){var t;return this._animation||((t=this.keyframeResolver)==null||t.resume(),Ok()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var t;this._animation&&this.animation.cancel(),(t=this.keyframeResolver)==null||t.cancel()}}const oD=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function aD(e){const t=oD.exec(e);if(!t)return[,];const[,n,r,o]=t;return[`--${n??r}`,o]}function FE(e,t,n=1){const[r,o]=aD(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return X1(i)?parseFloat(i):i}return lm(o)?FE(o,t,n+1):o}function gm(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const NE=new Set(["width","height","top","left","right","bottom",...Ja]),iD={test:e=>e==="auto",parse:e=>e},_E=e=>t=>t.test(e),SE=[Xa,Ye,Mr,Bs,Jj,Xj,iD],by=e=>SE.find(_E(e));function lD(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||Z1(e):!0}const cD=new Set(["brightness","contrast","saturate","opacity"]);function uD(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(cm)||[];if(!r)return e;const o=n.replace(r,"");let a=cD.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+o+")"}const dD=/\b([a-z-]*)\(.*?\)/gu,Ah={...Hs,getAnimatableNone:e=>{const t=e.match(dD);return t?t.map(uD).join(" "):e}},wy={...Xa,transform:Math.round},xD={rotate:Bs,rotateX:Bs,rotateY:Bs,rotateZ:Bs,scale:Fc,scaleX:Fc,scaleY:Fc,scaleZ:Fc,skew:Bs,skewX:Bs,skewY:Bs,distance:Ye,translateX:Ye,translateY:Ye,translateZ:Ye,x:Ye,y:Ye,z:Ye,perspective:Ye,transformPerspective:Ye,opacity:hl,originX:cy,originY:cy,originZ:Ye},ym={borderWidth:Ye,borderTopWidth:Ye,borderRightWidth:Ye,borderBottomWidth:Ye,borderLeftWidth:Ye,borderRadius:Ye,radius:Ye,borderTopLeftRadius:Ye,borderTopRightRadius:Ye,borderBottomRightRadius:Ye,borderBottomLeftRadius:Ye,width:Ye,maxWidth:Ye,height:Ye,maxHeight:Ye,top:Ye,right:Ye,bottom:Ye,left:Ye,padding:Ye,paddingTop:Ye,paddingRight:Ye,paddingBottom:Ye,paddingLeft:Ye,margin:Ye,marginTop:Ye,marginRight:Ye,marginBottom:Ye,marginLeft:Ye,backgroundPositionX:Ye,backgroundPositionY:Ye,...xD,zIndex:wy,fillOpacity:hl,strokeOpacity:hl,numOctaves:wy},hD={...ym,color:Kt,backgroundColor:Kt,outlineColor:Kt,fill:Kt,stroke:Kt,borderColor:Kt,borderTopColor:Kt,borderRightColor:Kt,borderBottomColor:Kt,borderLeftColor:Kt,filter:Ah,WebkitFilter:Ah},PE=e=>hD[e];function TE(e,t){let n=PE(e);return n!==Ah&&(n=Hs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const fD=new Set(["auto","none","0"]);function mD(e,t,n){let r=0,o;for(;r<e.length&&!o;){const a=e[r];typeof a=="string"&&!fD.has(a)&&fl(a).values.length&&(o=e[r]),r++}if(o&&n)for(const a of t)e[a]=TE(n,o)}class pD extends pm{constructor(t,n,r,o,a){super(t,n,r,o,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let x=t[c];if(typeof x=="string"&&(x=x.trim(),lm(x))){const d=FE(x,n.current);d!==void 0&&(t[c]=d),c===t.length-1&&(this.finalKeyframe=x)}}if(this.resolveNoneKeyframes(),!NE.has(r)||t.length!==2)return;const[o,a]=t,i=by(o),l=by(a);if(i!==l)if(gy(i)&&gy(l))for(let c=0;c<t.length;c++){const x=t[c];typeof x=="string"&&(t[c]=parseFloat(x))}else Fo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let o=0;o<t.length;o++)(t[o]===null||lD(t[o]))&&r.push(o);r.length&&mD(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Fo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const o=n[n.length-1];o!==void 0&&t.getValue(r,o).jump(o,!1)}measureEndState(){var l;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const o=t.getValue(n);o&&o.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=Fo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),(l=this.removedTransforms)!=null&&l.length&&this.removedTransforms.forEach(([c,x])=>{t.getValue(c).set(x)}),this.resolveNoneKeyframes()}}function gD(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const o=(n==null?void 0:n[e])??r.querySelectorAll(e);return o?Array.from(o):[]}return Array.from(e)}const IE=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function RE(e){return J1(e)&&"offsetHeight"in e}const Cy=30,yD=e=>!isNaN(parseFloat(e));class vD{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,o=!0)=>{var i,l;const a=Pn.now();if(this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const c of this.dependents)c.dirty();o&&((l=this.events.renderRequest)==null||l.notify(this.current))},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Pn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=yD(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new sm);const r=this.events[t].add(n);return t==="change"?()=>{r(),Nt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var t;(t=this.events.change)==null||t.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>Cy)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,Cy);return eE(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var t,n;(t=this.dependents)==null||t.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ua(e,t){return new vD(e,t)}const{schedule:vm}=dE(queueMicrotask,!1),dr={x:!1,y:!1};function ME(){return dr.x||dr.y}function ED(e){return e==="x"||e==="y"?dr[e]?null:(dr[e]=!0,()=>{dr[e]=!1}):dr.x||dr.y?null:(dr.x=dr.y=!0,()=>{dr.x=dr.y=!1})}function LE(e,t){const n=gD(e),r=new AbortController,o={passive:!0,...t,signal:r.signal};return[n,o,()=>r.abort()]}function By(e){return!(e.pointerType==="touch"||ME())}function bD(e,t,n={}){const[r,o,a]=LE(e,n),i=l=>{if(!By(l))return;const{target:c}=l,x=t(c,l);if(typeof x!="function"||!c)return;const d=f=>{By(f)&&(x(f),c.removeEventListener("pointerleave",d))};c.addEventListener("pointerleave",d,o)};return r.forEach(l=>{l.addEventListener("pointerenter",i,o)}),a}const $E=(e,t)=>t?e===t?!0:$E(e,t.parentElement):!1,Em=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,wD=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function CD(e){return wD.has(e.tagName)||e.tabIndex!==-1}const Qc=new WeakSet;function Ay(e){return t=>{t.key==="Enter"&&e(t)}}function qd(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const BD=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=Ay(()=>{if(Qc.has(n))return;qd(n,"down");const o=Ay(()=>{qd(n,"up")}),a=()=>qd(n,"cancel");n.addEventListener("keyup",o,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function jy(e){return Em(e)&&!ME()}function AD(e,t,n={}){const[r,o,a]=LE(e,n),i=l=>{const c=l.currentTarget;if(!jy(l))return;Qc.add(c);const x=t(c,l),d=(v,y)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),Qc.has(c)&&Qc.delete(c),jy(v)&&typeof x=="function"&&x(v,{success:y})},f=v=>{d(v,c===window||c===document||n.useGlobalTarget||$E(c,v.target))},m=v=>{d(v,!1)};window.addEventListener("pointerup",f,o),window.addEventListener("pointercancel",m,o)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",i,o),RE(l)&&(l.addEventListener("focus",x=>BD(x,o)),!CD(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function OE(e){return J1(e)&&"ownerSVGElement"in e}function jD(e){return OE(e)&&e.tagName==="svg"}const mn=e=>!!(e&&e.getVelocity),kD=[...SE,Kt,Hs],DD=e=>kD.find(_E(e)),bm=A.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class FD extends A.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,o=RE(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=o-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function ND({children:e,isPresent:t,anchorX:n,root:r}){const o=A.useId(),a=A.useRef(null),i=A.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=A.useContext(bm);return A.useInsertionEffect(()=>{const{width:c,height:x,top:d,left:f,right:m}=i.current;if(t||!a.current||!c||!x)return;const v=n==="left"?`left: ${f}`:`right: ${m}`;a.current.dataset.motionPopId=o;const y=document.createElement("style");l&&(y.nonce=l);const C=r??document.head;return C.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${o}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${x}px !important;
            ${v}px !important;
            top: ${d}px !important;
          }
        `),()=>{C.removeChild(y),C.contains(y)&&C.removeChild(y)}},[t]),s.jsx(FD,{isPresent:t,childRef:a,sizeRef:i,children:A.cloneElement(e,{ref:a})})}const _D=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:o,presenceAffectsLayout:a,mode:i,anchorX:l,root:c})=>{const x=Jf(SD),d=A.useId();let f=!0,m=A.useMemo(()=>(f=!1,{id:d,initial:t,isPresent:n,custom:o,onExitComplete:v=>{x.set(v,!0);for(const y of x.values())if(!y)return;r&&r()},register:v=>(x.set(v,!1),()=>x.delete(v))}),[n,x,r]);return a&&f&&(m={...m}),A.useMemo(()=>{x.forEach((v,y)=>x.set(y,!1))},[n]),A.useEffect(()=>{!n&&!x.size&&r&&r()},[n]),i==="popLayout"&&(e=s.jsx(ND,{isPresent:n,anchorX:l,root:c,children:e})),s.jsx(gu.Provider,{value:m,children:e})};function SD(){return new Map}function UE(e=!0){const t=A.useContext(gu);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:o}=t,a=A.useId();A.useEffect(()=>{if(e)return o(a)},[e]);const i=A.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const Nc=e=>e.key||"";function ky(e){const t=[];return A.Children.forEach(e,n=>{A.isValidElement(n)&&t.push(n)}),t}const wm=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:o=!0,mode:a="sync",propagate:i=!1,anchorX:l="left",root:c})=>{const[x,d]=UE(i),f=A.useMemo(()=>ky(e),[e]),m=i&&!x?[]:f.map(Nc),v=A.useRef(!0),y=A.useRef(f),C=Jf(()=>new Map),[P,B]=A.useState(f),[g,b]=A.useState(f);Y1(()=>{v.current=!1,y.current=f;for(let w=0;w<g.length;w++){const E=Nc(g[w]);m.includes(E)?C.delete(E):C.get(E)!==!0&&C.set(E,!1)}},[g,m.length,m.join("-")]);const j=[];if(f!==P){let w=[...f];for(let E=0;E<g.length;E++){const N=g[E],M=Nc(N);m.includes(M)||(w.splice(E,0,N),j.push(N))}return a==="wait"&&j.length&&(w=j),b(ky(w)),B(f),null}const{forceRender:D}=A.useContext(Xf);return s.jsx(s.Fragment,{children:g.map(w=>{const E=Nc(w),N=i&&!x?!1:f===g||m.includes(E),M=()=>{if(C.has(E))C.set(E,!0);else return;let L=!0;C.forEach(J=>{J||(L=!1)}),L&&(D==null||D(),b(y.current),i&&(d==null||d()),r&&r())};return s.jsx(_D,{isPresent:N,initial:!v.current||n?void 0:!1,custom:t,presenceAffectsLayout:o,mode:a,root:c,onExitComplete:N?void 0:M,anchorX:l,children:w},E)})})},VE=A.createContext({strict:!1}),Dy={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Va={};for(const e in Dy)Va[e]={isEnabled:t=>Dy[e].some(n=>!!t[n])};function PD(e){for(const t in e)Va[t]={...Va[t],...e[t]}}const TD=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function I0(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||TD.has(e)}let zE=e=>!I0(e);function ID(e){typeof e=="function"&&(zE=t=>t.startsWith("on")?!I0(t):e(t))}try{ID(require("@emotion/is-prop-valid").default)}catch{}function RD(e,t,n){const r={};for(const o in e)o==="values"&&typeof e.values=="object"||(zE(o)||n===!0&&I0(o)||!t&&!I0(o)||e.draggable&&o.startsWith("onDrag"))&&(r[o]=e[o]);return r}const yu=A.createContext({});function vu(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function ml(e){return typeof e=="string"||Array.isArray(e)}const Cm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bm=["initial",...Cm];function Eu(e){return vu(e.animate)||Bm.some(t=>ml(e[t]))}function qE(e){return!!(Eu(e)||e.variants)}function MD(e,t){if(Eu(e)){const{initial:n,animate:r}=e;return{initial:n===!1||ml(n)?n:void 0,animate:ml(r)?r:void 0}}return e.inherit!==!1?t:{}}function LD(e){const{initial:t,animate:n}=MD(e,A.useContext(yu));return A.useMemo(()=>({initial:t,animate:n}),[Fy(t),Fy(n)])}function Fy(e){return Array.isArray(e)?e.join(" "):e}const pl={};function $D(e){for(const t in e)pl[t]=e[t],im(t)&&(pl[t].isCSSVariable=!0)}function WE(e,{layout:t,layoutId:n}){return Za.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!pl[e]||e==="opacity")}const OD={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},UD=Ja.length;function VD(e,t,n){let r="",o=!0;for(let a=0;a<UD;a++){const i=Ja[a],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const x=IE(l,ym[i]);if(!c){o=!1;const d=OD[i]||i;r+=`${d}(${x}) `}n&&(t[i]=x)}}return r=r.trim(),n?r=n(t,o?"":r):o&&(r="none"),r}function Am(e,t,n){const{style:r,vars:o,transformOrigin:a}=e;let i=!1,l=!1;for(const c in t){const x=t[c];if(Za.has(c)){i=!0;continue}else if(im(c)){o[c]=x;continue}else{const d=IE(x,ym[c]);c.startsWith("origin")?(l=!0,a[c]=d):r[c]=d}}if(t.transform||(i||n?r.transform=VD(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:x="50%",originZ:d=0}=a;r.transformOrigin=`${c} ${x} ${d}`}}const jm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function KE(e,t,n){for(const r in t)!mn(t[r])&&!WE(r,n)&&(e[r]=t[r])}function zD({transformTemplate:e},t){return A.useMemo(()=>{const n=jm();return Am(n,t,e),Object.assign({},n.vars,n.style)},[t])}function qD(e,t){const n=e.style||{},r={};return KE(r,n,e),Object.assign(r,zD(e,t)),r}function WD(e,t){const n={},r=qD(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const KD={offset:"stroke-dashoffset",array:"stroke-dasharray"},HD={offset:"strokeDashoffset",array:"strokeDasharray"};function GD(e,t,n=1,r=0,o=!0){e.pathLength=1;const a=o?KD:HD;e[a.offset]=Ye.transform(-r);const i=Ye.transform(t),l=Ye.transform(n);e[a.array]=`${i} ${l}`}function HE(e,{attrX:t,attrY:n,attrScale:r,pathLength:o,pathSpacing:a=1,pathOffset:i=0,...l},c,x,d){if(Am(e,l,x),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:f,style:m}=e;f.transform&&(m.transform=f.transform,delete f.transform),(m.transform||f.transformOrigin)&&(m.transformOrigin=f.transformOrigin??"50% 50%",delete f.transformOrigin),m.transform&&(m.transformBox=(d==null?void 0:d.transformBox)??"fill-box",delete f.transformBox),t!==void 0&&(f.x=t),n!==void 0&&(f.y=n),r!==void 0&&(f.scale=r),o!==void 0&&GD(f,o,a,i,!1)}const GE=()=>({...jm(),attrs:{}}),QE=e=>typeof e=="string"&&e.toLowerCase()==="svg";function QD(e,t,n,r){const o=A.useMemo(()=>{const a=GE();return HE(a,t,QE(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};KE(a,e.style,e),o.style={...a,...o.style}}return o}const YD=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function km(e){return typeof e!="string"||e.includes("-")?!1:!!(YD.indexOf(e)>-1||/[A-Z]/u.test(e))}function XD(e,t,n,{latestValues:r},o,a=!1){const l=(km(e)?QD:WD)(t,r,o,e),c=RD(t,typeof e=="string",a),x=e!==A.Fragment?{...c,...l,ref:n}:{},{children:d}=t,f=A.useMemo(()=>mn(d)?d.get():d,[d]);return A.createElement(e,{...x,children:f})}function Ny(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function Dm(e,t,n,r){if(typeof t=="function"){const[o,a]=Ny(r);t=t(n!==void 0?n:e.custom,o,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[o,a]=Ny(r);t=t(n!==void 0?n:e.custom,o,a)}return t}function Yc(e){return mn(e)?e.get():e}function JD({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,o){return{latestValues:ZD(n,r,o,e),renderState:t()}}function ZD(e,t,n,r){const o={},a=r(e,{});for(const m in a)o[m]=Yc(a[m]);let{initial:i,animate:l}=e;const c=Eu(e),x=qE(e);t&&x&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let d=n?n.initial===!1:!1;d=d||i===!1;const f=d?l:i;if(f&&typeof f!="boolean"&&!vu(f)){const m=Array.isArray(f)?f:[f];for(let v=0;v<m.length;v++){const y=Dm(e,m[v]);if(y){const{transitionEnd:C,transition:P,...B}=y;for(const g in B){let b=B[g];if(Array.isArray(b)){const j=d?b.length-1:0;b=b[j]}b!==null&&(o[g]=b)}for(const g in C)o[g]=C[g]}}}return o}const YE=e=>(t,n)=>{const r=A.useContext(yu),o=A.useContext(gu),a=()=>JD(e,t,r,o);return n?a():Jf(a)};function Fm(e,t,n){var a;const{style:r}=e,o={};for(const i in r)(mn(r[i])||t.style&&mn(t.style[i])||WE(i,e)||((a=n==null?void 0:n.getValue(i))==null?void 0:a.liveStyle)!==void 0)&&(o[i]=r[i]);return o}const eF=YE({scrapeMotionValuesFromProps:Fm,createRenderState:jm});function XE(e,t,n){const r=Fm(e,t,n);for(const o in e)if(mn(e[o])||mn(t[o])){const a=Ja.indexOf(o)!==-1?"attr"+o.charAt(0).toUpperCase()+o.substring(1):o;r[a]=e[o]}return r}const tF=YE({scrapeMotionValuesFromProps:XE,createRenderState:GE}),nF=Symbol.for("motionComponentSymbol");function fa(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function rF(e,t,n){return A.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):fa(n)&&(n.current=r))},[t])}const Nm=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),sF="framerAppearId",JE="data-"+Nm(sF),ZE=A.createContext({});function oF(e,t,n,r,o){var C,P;const{visualElement:a}=A.useContext(yu),i=A.useContext(VE),l=A.useContext(gu),c=A.useContext(bm).reducedMotion,x=A.useRef(null);r=r||i.renderer,!x.current&&r&&(x.current=r(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const d=x.current,f=A.useContext(ZE);d&&!d.projection&&o&&(d.type==="html"||d.type==="svg")&&aF(x.current,n,o,f);const m=A.useRef(!1);A.useInsertionEffect(()=>{d&&m.current&&d.update(n,l)});const v=n[JE],y=A.useRef(!!v&&!((C=window.MotionHandoffIsComplete)!=null&&C.call(window,v))&&((P=window.MotionHasOptimisedAnimation)==null?void 0:P.call(window,v)));return Y1(()=>{d&&(m.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),d.scheduleRenderMicrotask(),y.current&&d.animationState&&d.animationState.animateChanges())}),A.useEffect(()=>{d&&(!y.current&&d.animationState&&d.animationState.animateChanges(),y.current&&(queueMicrotask(()=>{var B;(B=window.MotionHandoffMarkAsComplete)==null||B.call(window,v)}),y.current=!1))}),d}function aF(e,t,n,r){const{layoutId:o,layout:a,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:x,layoutCrossfade:d}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:eb(e.parent)),e.projection.setOptions({layoutId:o,layout:a,alwaysMeasureLayout:!!i||l&&fa(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:d,layoutScroll:c,layoutRoot:x})}function eb(e){if(e)return e.options.allowProjection!==!1?e.projection:eb(e.parent)}function Wd(e,{forwardMotionProps:t=!1}={},n,r){n&&PD(n);const o=km(e)?tF:eF;function a(l,c){let x;const d={...A.useContext(bm),...l,layoutId:iF(l)},{isStatic:f}=d,m=LD(l),v=o(l,f);if(!f&&Zf){lF();const y=cF(d);x=y.MeasureLayout,m.visualElement=oF(e,v,d,r,y.ProjectionNode)}return s.jsxs(yu.Provider,{value:m,children:[x&&m.visualElement?s.jsx(x,{visualElement:m.visualElement,...d}):null,XD(e,l,rF(v,m.visualElement,c),v,f,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=A.forwardRef(a);return i[nF]=e,i}function iF({layoutId:e}){const t=A.useContext(Xf).id;return t&&e!==void 0?t+"-"+e:e}function lF(e,t){A.useContext(VE).strict}function cF(e){const{drag:t,layout:n}=Va;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function uF(e,t){if(typeof Proxy>"u")return Wd;const n=new Map,r=(a,i)=>Wd(a,i,e,t),o=(a,i)=>r(a,i);return new Proxy(o,{get:(a,i)=>i==="create"?r:(n.has(i)||n.set(i,Wd(i,void 0,e,t)),n.get(i))})}function tb({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function dF({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function xF(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function Kd(e){return e===void 0||e===1}function jh({scale:e,scaleX:t,scaleY:n}){return!Kd(e)||!Kd(t)||!Kd(n)}function yo(e){return jh(e)||nb(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function nb(e){return _y(e.x)||_y(e.y)}function _y(e){return e&&e!=="0%"}function R0(e,t,n){const r=e-n,o=t*r;return n+o}function Sy(e,t,n,r,o){return o!==void 0&&(e=R0(e,o,r)),R0(e,n,r)+t}function kh(e,t=0,n=1,r,o){e.min=Sy(e.min,t,n,r,o),e.max=Sy(e.max,t,n,r,o)}function rb(e,{x:t,y:n}){kh(e.x,t.translate,t.scale,t.originPoint),kh(e.y,n.translate,n.scale,n.originPoint)}const Py=.999999999999,Ty=1.0000000000001;function hF(e,t,n,r=!1){const o=n.length;if(!o)return;t.x=t.y=1;let a,i;for(let l=0;l<o;l++){a=n[l],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&pa(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,rb(e,i)),r&&yo(a.latestValues)&&pa(e,a.latestValues))}t.x<Ty&&t.x>Py&&(t.x=1),t.y<Ty&&t.y>Py&&(t.y=1)}function ma(e,t){e.min=e.min+t,e.max=e.max+t}function Iy(e,t,n,r,o=.5){const a=It(e.min,e.max,o);kh(e,t,n,a,r)}function pa(e,t){Iy(e.x,t.x,t.scaleX,t.scale,t.originX),Iy(e.y,t.y,t.scaleY,t.scale,t.originY)}function sb(e,t){return tb(xF(e.getBoundingClientRect(),t))}function fF(e,t,n){const r=sb(e,n),{scroll:o}=t;return o&&(ma(r.x,o.offset.x),ma(r.y,o.offset.y)),r}const Ry=()=>({translate:0,scale:1,origin:0,originPoint:0}),ga=()=>({x:Ry(),y:Ry()}),My=()=>({min:0,max:0}),qt=()=>({x:My(),y:My()}),Dh={current:null},ob={current:!1};function mF(){if(ob.current=!0,!!Zf)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>Dh.current=e.matches;e.addEventListener("change",t),t()}else Dh.current=!1}const pF=new WeakMap;function gF(e,t,n){for(const r in t){const o=t[r],a=n[r];if(mn(o))e.addValue(r,o);else if(mn(a))e.addValue(r,Ua(o,{owner:e}));else if(a!==o)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(o):i.hasAnimated||i.set(o)}else{const i=e.getStaticValue(r);e.addValue(r,Ua(i!==void 0?i:o,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Ly=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class yF{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:o,blockInitialAnimation:a,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pm,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Pn.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Nt.render(this.render,!1,!0))};const{latestValues:c,renderState:x}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=x,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=o,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=Eu(n),this.isVariantNode=qE(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:d,...f}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in f){const v=f[m];c[m]!==void 0&&mn(v)&&v.set(c[m],!1)}}mount(t){this.current=t,pF.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ob.current||mF(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Dh.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Ks(this.notifyUpdate),Ks(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Za.has(t);r&&this.onBindTransform&&this.onBindTransform();const o=n.on("change",l=>{this.latestValues[t]=l,this.props.onUpdate&&Nt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{o(),a(),i&&i(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Va){const n=Va[t];if(!n)continue;const{isEnabled:r,Feature:o}=n;if(!this.features[t]&&o&&r(this.props)&&(this.features[t]=new o(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):qt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Ly.length;r++){const o=Ly[r];this.propEventSubscriptions[o]&&(this.propEventSubscriptions[o](),delete this.propEventSubscriptions[o]);const a="on"+o,i=t[a];i&&(this.propEventSubscriptions[o]=this.on(o,i))}this.prevMotionValues=gF(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ua(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(X1(r)||Z1(r))?r=parseFloat(r):!DD(r)&&Hs.test(n)&&(r=TE(t,n)),this.setBaseTarget(t,mn(r)?r.get():r)),mn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const i=Dm(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);i&&(r=i[t])}if(n&&r!==void 0)return r;const o=this.getBaseTargetFromProps(this.props,t);return o!==void 0&&!mn(o)?o:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new sm),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){vm.render(this.render)}}class ab extends yF{constructor(){super(...arguments),this.KeyframeResolver=pD}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;mn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function ib(e,{style:t,vars:n},r,o){const a=e.style;let i;for(i in t)a[i]=t[i];o==null||o.applyProjectionStyles(a,r);for(i in n)a.setProperty(i,n[i])}function vF(e){return window.getComputedStyle(e)}class EF extends ab{constructor(){super(...arguments),this.type="html",this.renderInstance=ib}readValueFromInstance(t,n){var r;if(Za.has(n))return(r=this.projection)!=null&&r.isProjecting?Eh(n):Ik(t,n);{const o=vF(t),a=(im(n)?o.getPropertyValue(n):o[n])||0;return typeof a=="string"?a.trim():a}}measureInstanceViewportBox(t,{transformPagePoint:n}){return sb(t,n)}build(t,n,r){Am(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return Fm(t,n,r)}}const lb=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bF(e,t,n,r){ib(e,t,void 0,r);for(const o in t.attrs)e.setAttribute(lb.has(o)?o:Nm(o),t.attrs[o])}class wF extends ab{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=qt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Za.has(n)){const r=PE(n);return r&&r.default||0}return n=lb.has(n)?n:Nm(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return XE(t,n,r)}build(t,n,r){HE(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,o){bF(t,n,r,o)}mount(t){this.isSVGTag=QE(t.tagName),super.mount(t)}}const CF=(e,t)=>km(e)?new wF(t):new EF(t,{allowProjection:e!==A.Fragment});function gl(e,t,n){const r=e.getProps();return Dm(r,t,n!==void 0?n:r.custom,e)}const Fh=e=>Array.isArray(e);function BF(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ua(n))}function AF(e){return Fh(e)?e[e.length-1]||0:e}function jF(e,t){const n=gl(e,t);let{transitionEnd:r={},transition:o={},...a}=n||{};a={...a,...r};for(const i in a){const l=AF(a[i]);BF(e,i,l)}}function kF(e){return!!(mn(e)&&e.add)}function Nh(e,t){const n=e.getValue("willChange");if(kF(n))return n.add(t);if(!n&&cs.WillChange){const r=new cs.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function cb(e){return e.props[JE]}const DF=e=>e!==null;function FF(e,{repeat:t,repeatType:n="loop"},r){const o=e.filter(DF),a=t&&n!=="loop"&&t%2===1?0:o.length-1;return o[a]}const NF={type:"spring",stiffness:500,damping:25,restSpeed:10},_F=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),SF={type:"keyframes",duration:.8},PF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},TF=(e,{keyframes:t})=>t.length>2?SF:Za.has(e)?e.startsWith("scale")?_F(t[1]):NF:PF;function IF({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:o,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:x,...d}){return!!Object.keys(d).length}const _m=(e,t,n,r={},o,a)=>i=>{const l=gm(r,e)||{},c=l.delay||r.delay||0;let{elapsed:x=0}=r;x=x-Ir(c);const d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-x,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:o};IF(l)||Object.assign(d,TF(e,d)),d.duration&&(d.duration=Ir(d.duration)),d.repeatDelay&&(d.repeatDelay=Ir(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let f=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(f=!0)),(cs.instantAnimations||cs.skipAnimations)&&(f=!0,d.duration=0,d.delay=0),d.allowFlatten=!l.type&&!l.ease,f&&!a&&t.get()!==void 0){const m=FF(d.keyframes,l);if(m!==void 0){Nt.update(()=>{d.onUpdate(m),d.onComplete()});return}}return l.isSync?new mm(d):new sD(d)};function RF({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function ub(e,t,{delay:n=0,transitionOverride:r,type:o}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...l}=t;r&&(a=r);const c=[],x=o&&e.animationState&&e.animationState.getState()[o];for(const d in l){const f=e.getValue(d,e.latestValues[d]??null),m=l[d];if(m===void 0||x&&RF(x,d))continue;const v={delay:n,...gm(a||{},d)},y=f.get();if(y!==void 0&&!f.isAnimating&&!Array.isArray(m)&&m===y&&!v.velocity)continue;let C=!1;if(window.MotionHandoffAnimation){const B=cb(e);if(B){const g=window.MotionHandoffAnimation(B,d,Nt);g!==null&&(v.startTime=g,C=!0)}}Nh(e,d),f.start(_m(d,f,m,e.shouldReduceMotion&&NE.has(d)?{type:!1}:v,e,C));const P=f.animation;P&&c.push(P)}return i&&Promise.all(c).then(()=>{Nt.update(()=>{i&&jF(e,i)})}),c}function _h(e,t,n={}){var c;const r=gl(e,t,n.type==="exit"?(c=e.presenceContext)==null?void 0:c.custom:void 0);let{transition:o=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(o=n.transitionOverride);const a=r?()=>Promise.all(ub(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(x=0)=>{const{delayChildren:d=0,staggerChildren:f,staggerDirection:m}=o;return MF(e,t,x,d,f,m,n)}:()=>Promise.resolve(),{when:l}=o;if(l){const[x,d]=l==="beforeChildren"?[a,i]:[i,a];return x().then(()=>d())}else return Promise.all([a(),i(n.delay)])}function MF(e,t,n=0,r=0,o=0,a=1,i){const l=[],c=e.variantChildren.size,x=(c-1)*o,d=typeof r=="function",f=d?m=>r(m,c):a===1?(m=0)=>m*o:(m=0)=>x-m*o;return Array.from(e.variantChildren).sort(LF).forEach((m,v)=>{m.notify("AnimationStart",t),l.push(_h(m,t,{...i,delay:n+(d?0:r)+f(v)}).then(()=>m.notify("AnimationComplete",t)))}),Promise.all(l)}function LF(e,t){return e.sortNodePosition(t)}function $F(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const o=t.map(a=>_h(e,a,n));r=Promise.all(o)}else if(typeof t=="string")r=_h(e,t,n);else{const o=typeof t=="function"?gl(e,t,n.custom):t;r=Promise.all(ub(e,o,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function db(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const OF=Bm.length;function xb(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?xb(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<OF;n++){const r=Bm[n],o=e.props[r];(ml(o)||o===!1)&&(t[r]=o)}return t}const UF=[...Cm].reverse(),VF=Cm.length;function zF(e){return t=>Promise.all(t.map(({animation:n,options:r})=>$F(e,n,r)))}function qF(e){let t=zF(e),n=$y(),r=!0;const o=c=>(x,d)=>{var m;const f=gl(e,d,c==="exit"?(m=e.presenceContext)==null?void 0:m.custom:void 0);if(f){const{transition:v,transitionEnd:y,...C}=f;x={...x,...C,...y}}return x};function a(c){t=c(e)}function i(c){const{props:x}=e,d=xb(e.parent)||{},f=[],m=new Set;let v={},y=1/0;for(let P=0;P<VF;P++){const B=UF[P],g=n[B],b=x[B]!==void 0?x[B]:d[B],j=ml(b),D=B===c?g.isActive:null;D===!1&&(y=P);let w=b===d[B]&&b!==x[B]&&j;if(w&&r&&e.manuallyAnimateOnMount&&(w=!1),g.protectedKeys={...v},!g.isActive&&D===null||!b&&!g.prevProp||vu(b)||typeof b=="boolean")continue;const E=WF(g.prevProp,b);let N=E||B===c&&g.isActive&&!w&&j||P>y&&j,M=!1;const L=Array.isArray(b)?b:[b];let J=L.reduce(o(B),{});D===!1&&(J={});const{prevResolvedValues:se={}}=g,X={...se,...J},Q=xe=>{N=!0,m.has(xe)&&(M=!0,m.delete(xe)),g.needsAnimating[xe]=!0;const ne=e.getValue(xe);ne&&(ne.liveStyle=!1)};for(const xe in X){const ne=J[xe],_=se[xe];if(v.hasOwnProperty(xe))continue;let S=!1;Fh(ne)&&Fh(_)?S=!db(ne,_):S=ne!==_,S?ne!=null?Q(xe):m.add(xe):ne!==void 0&&m.has(xe)?Q(xe):g.protectedKeys[xe]=!0}g.prevProp=b,g.prevResolvedValues=J,g.isActive&&(v={...v,...J}),r&&e.blockInitialAnimation&&(N=!1),N&&(!(w&&E)||M)&&f.push(...L.map(xe=>({animation:xe,options:{type:B}})))}if(m.size){const P={};if(typeof x.initial!="boolean"){const B=gl(e,Array.isArray(x.initial)?x.initial[0]:x.initial);B&&B.transition&&(P.transition=B.transition)}m.forEach(B=>{const g=e.getBaseTarget(B),b=e.getValue(B);b&&(b.liveStyle=!0),P[B]=g??null}),f.push({animation:P})}let C=!!f.length;return r&&(x.initial===!1||x.initial===x.animate)&&!e.manuallyAnimateOnMount&&(C=!1),r=!1,C?t(f):Promise.resolve()}function l(c,x){var f;if(n[c].isActive===x)return Promise.resolve();(f=e.variantChildren)==null||f.forEach(m=>{var v;return(v=m.animationState)==null?void 0:v.setActive(c,x)}),n[c].isActive=x;const d=i(c);for(const m in n)n[m].protectedKeys={};return d}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=$y(),r=!0}}}function WF(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!db(t,e):!1}function ho(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $y(){return{animate:ho(!0),whileInView:ho(),whileHover:ho(),whileTap:ho(),whileDrag:ho(),whileFocus:ho(),exit:ho()}}class to{constructor(t){this.isMounted=!1,this.node=t}update(){}}class KF extends to{constructor(t){super(t),t.animationState||(t.animationState=qF(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();vu(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let HF=0;class GF extends to{constructor(){super(...arguments),this.id=HF++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const o=this.node.animationState.setActive("exit",!t);n&&!t&&o.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const QF={animation:{Feature:KF},exit:{Feature:GF}};function yl(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Ml(e){return{point:{x:e.pageX,y:e.pageY}}}const YF=e=>t=>Em(t)&&e(t,Ml(t));function Vi(e,t,n,r){return yl(e,t,YF(n),r)}const hb=1e-4,XF=1-hb,JF=1+hb,fb=.01,ZF=0-fb,eN=0+fb;function bn(e){return e.max-e.min}function tN(e,t,n){return Math.abs(e-t)<=n}function Oy(e,t,n,r=.5){e.origin=r,e.originPoint=It(t.min,t.max,e.origin),e.scale=bn(n)/bn(t),e.translate=It(n.min,n.max,e.origin)-e.originPoint,(e.scale>=XF&&e.scale<=JF||isNaN(e.scale))&&(e.scale=1),(e.translate>=ZF&&e.translate<=eN||isNaN(e.translate))&&(e.translate=0)}function zi(e,t,n,r){Oy(e.x,t.x,n.x,r?r.originX:void 0),Oy(e.y,t.y,n.y,r?r.originY:void 0)}function Uy(e,t,n){e.min=n.min+t.min,e.max=e.min+bn(t)}function nN(e,t,n){Uy(e.x,t.x,n.x),Uy(e.y,t.y,n.y)}function Vy(e,t,n){e.min=t.min-n.min,e.max=e.min+bn(t)}function qi(e,t,n){Vy(e.x,t.x,n.x),Vy(e.y,t.y,n.y)}function Jn(e){return[e("x"),e("y")]}const mb=({current:e})=>e?e.ownerDocument.defaultView:null,zy=(e,t)=>Math.abs(e-t);function rN(e,t){const n=zy(e.x,t.x),r=zy(e.y,t.y);return Math.sqrt(n**2+r**2)}class pb{constructor(t,n,{transformPagePoint:r,contextWindow:o=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=Gd(this.lastMoveEventInfo,this.history),v=this.startEvent!==null,y=rN(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!v&&!y)return;const{point:C}=m,{timestamp:P}=sn;this.history.push({...C,timestamp:P});const{onStart:B,onMove:g}=this.handlers;v||(B&&B(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),g&&g(this.lastMoveEvent,m)},this.handlePointerMove=(m,v)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=Hd(v,this.transformPagePoint),Nt.update(this.updatePoint,!0)},this.handlePointerUp=(m,v)=>{this.end();const{onEnd:y,onSessionEnd:C,resumeAnimation:P}=this.handlers;if(this.dragSnapToOrigin&&P&&P(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const B=Gd(m.type==="pointercancel"?this.lastMoveEventInfo:Hd(v,this.transformPagePoint),this.history);this.startEvent&&y&&y(m,B),C&&C(m,B)},!Em(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=o||window;const l=Ml(t),c=Hd(l,this.transformPagePoint),{point:x}=c,{timestamp:d}=sn;this.history=[{...x,timestamp:d}];const{onSessionStart:f}=n;f&&f(t,Gd(c,this.history)),this.removeListeners=Tl(Vi(this.contextWindow,"pointermove",this.handlePointerMove),Vi(this.contextWindow,"pointerup",this.handlePointerUp),Vi(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Ks(this.updatePoint)}}function Hd(e,t){return t?{point:t(e.point)}:e}function qy(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Gd({point:e},t){return{point:e,delta:qy(e,gb(t)),offset:qy(e,sN(t)),velocity:oN(t,.1)}}function sN(e){return e[0]}function gb(e){return e[e.length-1]}function oN(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const o=gb(e);for(;n>=0&&(r=e[n],!(o.timestamp-r.timestamp>Ir(t)));)n--;if(!r)return{x:0,y:0};const a=Rr(o.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(o.x-r.x)/a,y:(o.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function aN(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?It(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?It(n,e,r.max):Math.min(e,n)),e}function Wy(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function iN(e,{top:t,left:n,bottom:r,right:o}){return{x:Wy(e.x,n,o),y:Wy(e.y,t,r)}}function Ky(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function lN(e,t){return{x:Ky(e.x,t.x),y:Ky(e.y,t.y)}}function cN(e,t){let n=.5;const r=bn(e),o=bn(t);return o>r?n=xl(t.min,t.max-r,e.min):r>o&&(n=xl(e.min,e.max-o,t.min)),ls(0,1,n)}function uN(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const Sh=.35;function dN(e=Sh){return e===!1?e=0:e===!0&&(e=Sh),{x:Hy(e,"left","right"),y:Hy(e,"top","bottom")}}function Hy(e,t,n){return{min:Gy(e,t),max:Gy(e,n)}}function Gy(e,t){return typeof e=="number"?e:e[t]||0}const xN=new WeakMap;class hN{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=qt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:o}=this.visualElement;if(o&&o.isPresent===!1)return;const a=f=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Ml(f).point)},i=(f,m)=>{const{drag:v,dragPropagation:y,onDragStart:C}=this.getProps();if(v&&!y&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ED(v),!this.openDragLock))return;this.latestPointerEvent=f,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Jn(B=>{let g=this.getAxisMotionValue(B).get()||0;if(Mr.test(g)){const{projection:b}=this.visualElement;if(b&&b.layout){const j=b.layout.layoutBox[B];j&&(g=bn(j)*(parseFloat(g)/100))}}this.originPoint[B]=g}),C&&Nt.postRender(()=>C(f,m)),Nh(this.visualElement,"transform");const{animationState:P}=this.visualElement;P&&P.setActive("whileDrag",!0)},l=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m;const{dragPropagation:v,dragDirectionLock:y,onDirectionLock:C,onDrag:P}=this.getProps();if(!v&&!this.openDragLock)return;const{offset:B}=m;if(y&&this.currentDirection===null){this.currentDirection=fN(B),this.currentDirection!==null&&C&&C(this.currentDirection);return}this.updateAxis("x",m.point,B),this.updateAxis("y",m.point,B),this.visualElement.render(),P&&P(f,m)},c=(f,m)=>{this.latestPointerEvent=f,this.latestPanInfo=m,this.stop(f,m),this.latestPointerEvent=null,this.latestPanInfo=null},x=()=>Jn(f=>{var m;return this.getAnimationState(f)==="paused"&&((m=this.getAxisMotionValue(f).animation)==null?void 0:m.play())}),{dragSnapToOrigin:d}=this.getProps();this.panSession=new pb(t,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:c,resumeAnimation:x},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:d,distanceThreshold:r,contextWindow:mb(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,o=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!o||!r)return;const{velocity:i}=o;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&Nt.postRender(()=>l(r,o))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:o}=this.getProps();if(!r||!_c(t,o,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=aN(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,o=this.constraints;t&&fa(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=iN(r.layoutBox,t):this.constraints=!1,this.elastic=dN(n),o!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Jn(i=>{this.constraints!==!1&&this.getAxisMotionValue(i)&&(this.constraints[i]=uN(r.layoutBox[i],this.constraints[i]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!fa(t))return!1;const r=t.current,{projection:o}=this.visualElement;if(!o||!o.layout)return!1;const a=fF(r,o.root,this.visualElement.getTransformPagePoint());let i=lN(o.layout.layoutBox,a);if(n){const l=n(dF(i));this.hasMutatedConstraints=!!l,l&&(i=tb(l))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:o,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},x=Jn(d=>{if(!_c(d,n,this.currentDirection))return;let f=c&&c[d]||{};i&&(f={min:0,max:0});const m=o?200:1e6,v=o?40:1e7,y={type:"inertia",velocity:r?t[d]:0,bounceStiffness:m,bounceDamping:v,timeConstant:750,restDelta:1,restSpeed:10,...a,...f};return this.startAxisValueAnimation(d,y)});return Promise.all(x).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return Nh(this.visualElement,t),r.start(_m(t,r,0,n,this.visualElement,!1))}stopAnimation(){Jn(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Jn(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),o=r[n];return o||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Jn(n=>{const{drag:r}=this.getProps();if(!_c(n,r,this.currentDirection))return;const{projection:o}=this.visualElement,a=this.getAxisMotionValue(n);if(o&&o.layout){const{min:i,max:l}=o.layout.layoutBox[n];a.set(t[n]-It(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!fa(n)||!r||!this.constraints)return;this.stopAnimation();const o={x:0,y:0};Jn(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();o[i]=cN({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Jn(i=>{if(!_c(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:x}=this.constraints[i];l.set(It(c,x,o[i]))})}addListeners(){if(!this.visualElement.current)return;xN.set(this.visualElement,this);const t=this.visualElement.current,n=Vi(t,"pointerdown",c=>{const{drag:x,dragListener:d=!0}=this.getProps();x&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();fa(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:o}=this.visualElement,a=o.addEventListener("measure",r);o&&!o.layout&&(o.root&&o.root.updateScroll(),o.updateLayout()),Nt.read(r);const i=yl(window,"resize",()=>this.scalePositionWithinConstraints()),l=o.addEventListener("didUpdate",({delta:c,hasLayoutChanged:x})=>{this.isDragging&&x&&(Jn(d=>{const f=this.getAxisMotionValue(d);f&&(this.originPoint[d]+=c[d].translate,f.set(f.get()+c[d].translate))}),this.visualElement.render())});return()=>{i(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:o=!1,dragConstraints:a=!1,dragElastic:i=Sh,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:o,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function _c(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function fN(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class mN extends to{constructor(t){super(t),this.removeGroupControls=rr,this.removeListeners=rr,this.controls=new hN(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||rr}unmount(){this.removeGroupControls(),this.removeListeners()}}const Qy=e=>(t,n)=>{e&&Nt.postRender(()=>e(t,n))};class pN extends to{constructor(){super(...arguments),this.removePointerDownListener=rr}onPointerDown(t){this.session=new pb(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:mb(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:o}=this.node.getProps();return{onSessionStart:Qy(t),onStart:Qy(n),onMove:r,onEnd:(a,i)=>{delete this.session,o&&Nt.postRender(()=>o(a,i))}}}mount(){this.removePointerDownListener=Vi(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Yy(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const vi={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ye.test(e))e=parseFloat(e);else return e;const n=Yy(e,t.target.x),r=Yy(e,t.target.y);return`${n}% ${r}%`}},gN={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,o=Hs.parse(e);if(o.length>5)return r;const a=Hs.createTransformer(e),i=typeof o[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;o[0+i]/=l,o[1+i]/=c;const x=It(l,c,.5);return typeof o[2+i]=="number"&&(o[2+i]/=x),typeof o[3+i]=="number"&&(o[3+i]/=x),a(o)}};let Xy=!1;class yN extends A.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:o}=this.props,{projection:a}=t;$D(vN),a&&(n.group&&n.group.add(a),r&&r.register&&o&&r.register(a),Xy&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Xc.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:o,isPresent:a}=this.props,{projection:i}=r;return i&&(i.isPresent=a,Xy=!0,o||t.layoutDependency!==n||n===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||Nt.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),vm.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:o}=t;o&&(o.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(o),r&&r.deregister&&r.deregister(o))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function yb(e){const[t,n]=UE(),r=A.useContext(Xf);return s.jsx(yN,{...e,layoutGroup:r,switchLayoutGroup:A.useContext(ZE),isPresent:t,safeToRemove:n})}const vN={borderRadius:{...vi,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:vi,borderTopRightRadius:vi,borderBottomLeftRadius:vi,borderBottomRightRadius:vi,boxShadow:gN};function EN(e,t,n){const r=mn(e)?e:Ua(e);return r.start(_m("",r,t,n)),r.animation}const bN=(e,t)=>e.depth-t.depth;class wN{constructor(){this.children=[],this.isDirty=!1}add(t){em(this.children,t),this.isDirty=!0}remove(t){tm(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(bN),this.isDirty=!1,this.children.forEach(t)}}function CN(e,t){const n=Pn.now(),r=({timestamp:o})=>{const a=o-n;a>=t&&(Ks(r),e(a-t))};return Nt.setup(r,!0),()=>Ks(r)}const vb=["TopLeft","TopRight","BottomLeft","BottomRight"],BN=vb.length,Jy=e=>typeof e=="string"?parseFloat(e):e,Zy=e=>typeof e=="number"||Ye.test(e);function AN(e,t,n,r,o,a){o?(e.opacity=It(0,n.opacity??1,jN(r)),e.opacityExit=It(t.opacity??1,0,kN(r))):a&&(e.opacity=It(t.opacity??1,n.opacity??1,r));for(let i=0;i<BN;i++){const l=`border${vb[i]}Radius`;let c=ev(t,l),x=ev(n,l);if(c===void 0&&x===void 0)continue;c||(c=0),x||(x=0),c===0||x===0||Zy(c)===Zy(x)?(e[l]=Math.max(It(Jy(c),Jy(x),r),0),(Mr.test(x)||Mr.test(c))&&(e[l]+="%")):e[l]=x}(t.rotate||n.rotate)&&(e.rotate=It(t.rotate||0,n.rotate||0,r))}function ev(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const jN=Eb(0,.5,iE),kN=Eb(.5,.95,rr);function Eb(e,t,n){return r=>r<e?0:r>t?1:n(xl(e,t,r))}function tv(e,t){e.min=t.min,e.max=t.max}function Xn(e,t){tv(e.x,t.x),tv(e.y,t.y)}function nv(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function rv(e,t,n,r,o){return e-=t,e=R0(e,1/n,r),o!==void 0&&(e=R0(e,1/o,r)),e}function DN(e,t=0,n=1,r=.5,o,a=e,i=e){if(Mr.test(t)&&(t=parseFloat(t),t=It(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=It(a.min,a.max,r);e===a&&(l-=t),e.min=rv(e.min,t,n,l,o),e.max=rv(e.max,t,n,l,o)}function sv(e,t,[n,r,o],a,i){DN(e,t[n],t[r],t[o],t.scale,a,i)}const FN=["x","scaleX","originX"],NN=["y","scaleY","originY"];function ov(e,t,n,r){sv(e.x,t,FN,n?n.x:void 0,r?r.x:void 0),sv(e.y,t,NN,n?n.y:void 0,r?r.y:void 0)}function av(e){return e.translate===0&&e.scale===1}function bb(e){return av(e.x)&&av(e.y)}function iv(e,t){return e.min===t.min&&e.max===t.max}function _N(e,t){return iv(e.x,t.x)&&iv(e.y,t.y)}function lv(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function wb(e,t){return lv(e.x,t.x)&&lv(e.y,t.y)}function cv(e){return bn(e.x)/bn(e.y)}function uv(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class SN{constructor(){this.members=[]}add(t){em(this.members,t),t.scheduleRender()}remove(t){if(tm(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(o=>t===o);if(n===0)return!1;let r;for(let o=n;o>=0;o--){const a=this.members[o];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function PN(e,t,n){let r="";const o=e.x.translate/t.x,a=e.y.translate/t.y,i=(n==null?void 0:n.z)||0;if((o||a||i)&&(r=`translate3d(${o}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:x,rotate:d,rotateX:f,rotateY:m,skewX:v,skewY:y}=n;x&&(r=`perspective(${x}px) ${r}`),d&&(r+=`rotate(${d}deg) `),f&&(r+=`rotateX(${f}deg) `),m&&(r+=`rotateY(${m}deg) `),v&&(r+=`skewX(${v}deg) `),y&&(r+=`skewY(${y}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const Qd=["","X","Y","Z"],TN=1e3;let IN=0;function Yd(e,t,n,r){const{latestValues:o}=t;o[e]&&(n[e]=o[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Cb(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=cb(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:o,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Nt,!(o||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Cb(r)}function Bb({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:o}){return class{constructor(i={},l=t==null?void 0:t()){this.id=IN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(LN),this.nodes.forEach(VN),this.nodes.forEach(zN),this.nodes.forEach($N)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new wN)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new sm),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=OE(i)&&!jD(i),this.instance=i;const{layoutId:l,layout:c,visualElement:x}=this.options;if(x&&!x.current&&x.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let d,f=0;const m=()=>this.root.updateBlockedByResize=!1;Nt.read(()=>{f=window.innerWidth}),e(i,()=>{const v=window.innerWidth;v!==f&&(f=v,this.root.updateBlockedByResize=!0,d&&d(),d=CN(m,250),Xc.hasAnimatedSinceResize&&(Xc.hasAnimatedSinceResize=!1,this.nodes.forEach(hv)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&x&&(l||c)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeLayoutChanged:m,layout:v})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||x.getDefaultTransition()||GN,{onLayoutAnimationStart:C,onLayoutAnimationComplete:P}=x.getProps(),B=!this.targetLayout||!wb(this.targetLayout,v),g=!f&&m;if(this.options.layoutRoot||this.resumeFrom||g||f&&(B||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...gm(y,"layout"),onPlay:C,onComplete:P};(x.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(d,g)}else f||hv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=v})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Ks(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(qN),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Cb(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const f=this.path[d];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const x=this.getTransformTemplate();this.prevTransformTemplateValue=x?x(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(dv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(xv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(UN),this.nodes.forEach(RN),this.nodes.forEach(MN)):this.nodes.forEach(xv),this.clearAllSnapshots();const l=Pn.now();sn.delta=ls(0,1e3/60,l-sn.timestamp),sn.timestamp=l,sn.isProcessing=!0,$d.update.process(sn),$d.preRender.process(sn),$d.render.process(sn),sn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,vm.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(ON),this.sharedNodes.forEach(WN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Nt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Nt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!bn(this.snapshot.measuredBox.x)&&!bn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=qt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!o)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!bb(this.projectionDelta),c=this.getTransformTemplate(),x=c?c(this.latestValues,""):void 0,d=x!==this.prevTransformTemplateValue;i&&this.instance&&(l||yo(this.latestValues)||d)&&(o(this.instance,x),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),QN(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var x;const{visualElement:i}=this.options;if(!i)return qt();const l=i.measureViewportBox();if(!(((x=this.scroll)==null?void 0:x.wasRoot)||this.path.some(YN))){const{scroll:d}=this.root;d&&(ma(l.x,d.offset.x),ma(l.y,d.offset.y))}return l}removeElementScroll(i){var c;const l=qt();if(Xn(l,i),(c=this.scroll)!=null&&c.wasRoot)return l;for(let x=0;x<this.path.length;x++){const d=this.path[x],{scroll:f,options:m}=d;d!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Xn(l,i),ma(l.x,f.offset.x),ma(l.y,f.offset.y))}return l}applyTransform(i,l=!1){const c=qt();Xn(c,i);for(let x=0;x<this.path.length;x++){const d=this.path[x];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&pa(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),yo(d.latestValues)&&pa(c,d.latestValues)}return yo(this.latestValues)&&pa(c,this.latestValues),c}removeTransform(i){const l=qt();Xn(l,i);for(let c=0;c<this.path.length;c++){const x=this.path[c];if(!x.instance||!yo(x.latestValues))continue;jh(x.latestValues)&&x.updateSnapshot();const d=qt(),f=x.measurePageBox();Xn(d,f),ov(l,x.latestValues,x.snapshot?x.snapshot.layoutBox:void 0,d)}return yo(this.latestValues)&&ov(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){var m;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=sn.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),qi(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=qt(),this.targetWithTransforms=qt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),nN(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Xn(this.target,this.layout.layoutBox),rb(this.target,this.targetDelta)):Xn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=qt(),this.relativeTargetOrigin=qt(),qi(this.relativeTargetOrigin,this.target,v.target),Xn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||jh(this.parent.latestValues)||nb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var y;const i=this.getLead(),l=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||(y=this.parent)!=null&&y.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===sn.timestamp&&(c=!1),c)return;const{layout:x,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(x||d))return;Xn(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,m=this.treeScale.y;hF(this.layoutCorrected,this.treeScale,this.path,l),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=qt());const{target:v}=i;if(!v){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(nv(this.prevProjectionDelta.x,this.projectionDelta.x),nv(this.prevProjectionDelta.y,this.projectionDelta.y)),zi(this.projectionDelta,this.layoutCorrected,v,this.latestValues),(this.treeScale.x!==f||this.treeScale.y!==m||!uv(this.projectionDelta.x,this.prevProjectionDelta.x)||!uv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",v))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){var l;if((l=this.options.visualElement)==null||l.scheduleRender(),i){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ga(),this.projectionDelta=ga(),this.projectionDeltaWithTransform=ga()}setAnimationOrigin(i,l=!1){const c=this.snapshot,x=c?c.latestValues:{},d={...this.latestValues},f=ga();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=qt(),v=c?c.source:void 0,y=this.layout?this.layout.source:void 0,C=v!==y,P=this.getStack(),B=!P||P.members.length<=1,g=!!(C&&!B&&this.options.crossfade===!0&&!this.path.some(HN));this.animationProgress=0;let b;this.mixTargetDelta=j=>{const D=j/1e3;fv(f.x,i.x,D),fv(f.y,i.y,D),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qi(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),KN(this.relativeTarget,this.relativeTargetOrigin,m,D),b&&_N(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=qt()),Xn(b,this.relativeTarget)),C&&(this.animationValues=d,AN(d,x,this.latestValues,D,g,B)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=D},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){var l,c,x;this.notifyListeners("animationStart"),(l=this.currentAnimation)==null||l.stop(),(x=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||x.stop(),this.pendingAnimation&&(Ks(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Nt.update(()=>{Xc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ua(0)),this.currentAnimation=EN(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),i.onUpdate&&i.onUpdate(d)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(TN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:x,latestValues:d}=i;if(!(!l||!c||!x)){if(this!==i&&this.layout&&x&&Ab(this.options.animationType,this.layout.layoutBox,x.layoutBox)){c=this.target||qt();const f=bn(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+f;const m=bn(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+m}Xn(l,c),pa(l,d),zi(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new SN),this.sharedNodes.get(i).add(l);const x=l.options.initialPromotionConfig;l.promote({transition:x?x.transition:void 0,preserveFollowOpacity:x&&x.shouldPreserveFollowOpacity?x.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){var l;const{layoutId:i}=this.options;return i?((l=this.getStack())==null?void 0:l.lead)||this:this}getPrevLead(){var l;const{layoutId:i}=this.options;return i?(l=this.getStack())==null?void 0:l.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const x=this.getStack();x&&x.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const x={};c.z&&Yd("z",i,x,this.animationValues);for(let d=0;d<Qd.length;d++)Yd(`rotate${Qd[d]}`,i,x,this.animationValues),Yd(`skew${Qd[d]}`,i,x,this.animationValues);i.render();for(const d in x)i.setStaticValue(d,x[d]),this.animationValues&&(this.animationValues[d]=x[d]);i.scheduleRender()}applyProjectionStyles(i,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=Yc(l==null?void 0:l.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const x=this.getLead();if(!this.projectionDelta||!this.layout||!x.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=Yc(l==null?void 0:l.pointerEvents)||""),this.hasProjected&&!yo(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const d=x.animationValues||x.latestValues;this.applyTransformsToTarget();let f=PN(this.projectionDeltaWithTransform,this.treeScale,d);c&&(f=c(d,f)),i.transform=f;const{x:m,y:v}=this.projectionDelta;i.transformOrigin=`${m.origin*100}% ${v.origin*100}% 0`,x.animationValues?i.opacity=x===this?d.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:d.opacityExit:i.opacity=x===this?d.opacity!==void 0?d.opacity:"":d.opacityExit!==void 0?d.opacityExit:0;for(const y in pl){if(d[y]===void 0)continue;const{correct:C,applyTo:P,isCSSVariable:B}=pl[y],g=f==="none"?d[y]:C(d[y],x);if(P){const b=P.length;for(let j=0;j<b;j++)i[P[j]]=g}else B?this.options.visualElement.renderState.vars[y]=g:i[y]=g}this.options.layoutId&&(i.pointerEvents=x===this?Yc(l==null?void 0:l.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>{var l;return(l=i.currentAnimation)==null?void 0:l.stop()}),this.root.nodes.forEach(dv),this.root.sharedNodes.clear()}}}function RN(e){e.updateLayout()}function MN(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:o}=e.layout,{animationType:a}=e.options,i=t.source!==e.layout.source;a==="size"?Jn(f=>{const m=i?t.measuredBox[f]:t.layoutBox[f],v=bn(m);m.min=r[f].min,m.max=m.min+v}):Ab(a,t.layoutBox,r)&&Jn(f=>{const m=i?t.measuredBox[f]:t.layoutBox[f],v=bn(r[f]);m.max=m.min+v,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+v)});const l=ga();zi(l,r,t.layoutBox);const c=ga();i?zi(c,e.applyTransform(o,!0),t.measuredBox):zi(c,r,t.layoutBox);const x=!bb(l);let d=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:v}=f;if(m&&v){const y=qt();qi(y,t.layoutBox,m.layoutBox);const C=qt();qi(C,r,v.layoutBox),wb(y,C)||(d=!0),f.options.layoutRoot&&(e.relativeTarget=C,e.relativeTargetOrigin=y,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:c,layoutDelta:l,hasLayoutChanged:x,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function LN(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function $N(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function ON(e){e.clearSnapshot()}function dv(e){e.clearMeasurements()}function xv(e){e.isLayoutDirty=!1}function UN(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function hv(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function VN(e){e.resolveTargetDelta()}function zN(e){e.calcProjection()}function qN(e){e.resetSkewAndRotation()}function WN(e){e.removeLeadSnapshot()}function fv(e,t,n){e.translate=It(t.translate,0,n),e.scale=It(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function mv(e,t,n,r){e.min=It(t.min,n.min,r),e.max=It(t.max,n.max,r)}function KN(e,t,n,r){mv(e.x,t.x,n.x,r),mv(e.y,t.y,n.y,r)}function HN(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const GN={duration:.45,ease:[.4,0,.1,1]},pv=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),gv=pv("applewebkit/")&&!pv("chrome/")?Math.round:rr;function yv(e){e.min=gv(e.min),e.max=gv(e.max)}function QN(e){yv(e.x),yv(e.y)}function Ab(e,t,n){return e==="position"||e==="preserve-aspect"&&!tN(cv(t),cv(n),.2)}function YN(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const XN=Bb({attachResizeListener:(e,t)=>yl(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Xd={current:void 0},jb=Bb({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Xd.current){const e=new XN({});e.mount(window),e.setOptions({layoutScroll:!0}),Xd.current=e}return Xd.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),JN={pan:{Feature:pN},drag:{Feature:mN,ProjectionNode:jb,MeasureLayout:yb}};function vv(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const o="onHover"+n,a=r[o];a&&Nt.postRender(()=>a(t,Ml(t)))}class ZN extends to{mount(){const{current:t}=this.node;t&&(this.unmount=bD(t,(n,r)=>(vv(this.node,r,"Start"),o=>vv(this.node,o,"End"))))}unmount(){}}class e_ extends to{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Tl(yl(this.node.current,"focus",()=>this.onFocus()),yl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ev(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const o="onTap"+(n==="End"?"":n),a=r[o];a&&Nt.postRender(()=>a(t,Ml(t)))}class t_ extends to{mount(){const{current:t}=this.node;t&&(this.unmount=AD(t,(n,r)=>(Ev(this.node,r,"Start"),(o,{success:a})=>Ev(this.node,o,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ph=new WeakMap,Jd=new WeakMap,n_=e=>{const t=Ph.get(e.target);t&&t(e)},r_=e=>{e.forEach(n_)};function s_({root:e,...t}){const n=e||document;Jd.has(n)||Jd.set(n,{});const r=Jd.get(n),o=JSON.stringify(t);return r[o]||(r[o]=new IntersectionObserver(r_,{root:e,...t})),r[o]}function o_(e,t,n){const r=s_(t);return Ph.set(e,n),r.observe(e),()=>{Ph.delete(e),r.unobserve(e)}}const a_={some:0,all:1};class i_ extends to{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:o="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof o=="number"?o:a_[o]},l=c=>{const{isIntersecting:x}=c;if(this.isInView===x||(this.isInView=x,a&&!x&&this.hasEnteredView))return;x&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",x);const{onViewportEnter:d,onViewportLeave:f}=this.node.getProps(),m=x?d:f;m&&m(c)};return o_(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(l_(t,n))&&this.startObserver()}unmount(){}}function l_({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const c_={inView:{Feature:i_},tap:{Feature:t_},focus:{Feature:e_},hover:{Feature:ZN}},u_={layout:{ProjectionNode:jb,MeasureLayout:yb}},d_={...QF,...c_,...JN,...u_},Ue=uF(d_,CF);function x_({userCompany:e}){const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState(null),[c,x]=A.useState(null),[d,f]=A.useState(!1),[m,v]=A.useState([]),[y,C]=A.useState({showCompany:!0,showTime:!0,showPhoto:!0,showTableInfo:!0,showContactInfo:!1,showStaffId:!0,showIdentificationNumber:!1,autoHide:!0,hideDelay:5e3,backgroundColor:"#1e40af",textColor:"#ffffff",showHistory:!1,maxHistoryItems:5,useCustomBackground:!0});A.useEffect(()=>{B()},[e]),A.useEffect(()=>{const D=t.get("eventId");D&&n.length>0&&a(D)},[t,n]),A.useEffect(()=>{if(o){const D=le.channel(`check-ins-${o}`).on("postgres_changes",{event:"*",schema:"public",table:"attendees"},w=>{setTimeout(()=>{P()},100)}).subscribe();return P(),()=>{D.unsubscribe()}}},[o]),A.useEffect(()=>{if(o){const D=setInterval(()=>{P()},1e4);return()=>clearInterval(D)}},[o]),A.useEffect(()=>{if(c&&y.autoHide){const D=setTimeout(()=>{const w=new Date(c.check_in_time);(new Date().getTime()-w.getTime())/1e3>30&&x(null)},y.hideDelay);return()=>clearTimeout(D)}},[c,y.autoHide,y.hideDelay]);const P=async()=>{try{const{data:D,error:w}=await le.from("attendees").select(`
          id,
          name,
          company,
          email,
          phone,
          table_number,
          seat_number,
          table_assignment,
          staff_id,
          identification_number,
          face_photo_url,
          check_in_time,
          created_at
        `).eq("event_id",o).eq("checked_in",!0).not("check_in_time","is",null).order("check_in_time",{ascending:!1}).limit(10);if(w){console.error("Error fetching recent check-ins:",w);return}if(D&&D.length>0){const E=D[0],N=new Date(E.check_in_time);if((new Date().getTime()-N.getTime())/1e3<30){let J="";E.table_number?(J=`Table ${E.table_number}`,E.seat_number&&(J+=` - Seat ${E.seat_number}`)):E.table_assignment&&(J=E.table_assignment);const se={id:E.id,name:E.name,company:E.company,check_in_time:E.check_in_time,face_photo_url:E.face_photo_url,table_number:E.table_number,table_position:J,staff_id:E.staff_id,identification_number:E.identification_number,email:E.email,phone:E.phone,registration_date:E.created_at};x(se),v(X=>[se,...X.slice(0,y.maxHistoryItems-1)])}}}catch(D){console.error("Error checking for new check-ins:",D)}},B=async()=>{try{let D=le.from("events").select(`
          id,
          name,
          company_id,
          custom_background,
          company:companies(name)
        `).order("created_at",{ascending:!1});e&&(D=D.eq("company_id",e.company_id));const{data:w,error:E}=await D;if(E)throw E;if(w){const N=w.map(M=>({...M,company:Array.isArray(M.company)?M.company[0]:M.company}));r(N),e&&N&&N.length>0&&(a(N[0].id),l(N[0]))}}catch(D){console.error("Error fetching events:",D)}},g=()=>{d?document.exitFullscreen():document.documentElement.requestFullscreen(),f(!d)},b=D=>new Date(D).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),j=()=>{const D=y.useCustomBackground&&(i!=null&&i.custom_background)?{backgroundImage:`url(${Tt(i.custom_background)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:y.backgroundColor};return s.jsxs("div",{className:"h-full flex items-center justify-center relative",style:{...D,color:y.textColor},children:[s.jsx(wm,{children:c?s.jsx(Ue.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",duration:.8},className:"text-center max-w-4xl mx-auto p-8",children:s.jsxs(Ue.div,{initial:{y:20},animate:{y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-6",children:"Welcome!"}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-8 mb-8",children:[y.showPhoto&&c.face_photo_url&&s.jsx(Ue.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring"},className:"flex-shrink-0",children:s.jsx("img",{src:c.face_photo_url,alt:c.name,className:"w-32 h-32 md:w-48 md:h-48 rounded-full border-4 border-white shadow-2xl object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-4xl md:text-6xl font-semibold mb-4",children:c.name}),y.showCompany&&c.company&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"text-2xl md:text-4xl opacity-80 mb-4 flex items-center justify-center",children:[s.jsx(j0,{className:"h-6 w-6 md:h-8 md:w-8 mr-2"}),c.company]}),y.showStaffId&&c.staff_id&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.45},className:"text-xl md:text-3xl opacity-80 mb-4 flex items-center justify-center",children:[s.jsx(qf,{className:"h-5 w-5 md:h-6 md:w-6 mr-2"}),"Staff ID: ",c.staff_id]}),y.showIdentificationNumber&&c.identification_number&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.47},className:"text-lg md:text-2xl opacity-70 mb-4 flex items-center justify-center",children:[s.jsx(k0,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),"ID: ",c.identification_number]}),y.showTableInfo&&c.table_position&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"text-xl md:text-3xl opacity-80 mb-4 flex items-center justify-center",children:[s.jsx(tn,{className:"h-5 w-5 md:h-6 md:w-6 mr-2"}),c.table_position]}),y.showTime&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"text-xl md:text-2xl opacity-60 flex items-center justify-center",children:[s.jsx(Nl,{className:"h-5 w-5 md:h-6 md:w-6 mr-2"}),b(c.check_in_time)]})]})]}),y.showContactInfo&&(c.email||c.phone)&&s.jsxs(Ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"text-lg md:text-xl opacity-70",children:[c.email&&s.jsx("div",{className:"mb-2",children:c.email}),c.phone&&s.jsx("div",{children:c.phone})]})]})}):s.jsxs(Ue.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[s.jsx(vt,{className:"h-32 w-32 mx-auto mb-8 opacity-50"}),s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Welcome to the Event"}),s.jsx("p",{className:"text-xl md:text-2xl opacity-80",children:"Waiting for check-ins..."})]})}),y.showHistory&&m.length>0&&s.jsx(Ue.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"absolute bottom-4 left-4 right-4",children:s.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recent Check-ins"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:m.map((w,E)=>s.jsxs(Ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:E*.1},className:"flex-shrink-0 bg-white bg-opacity-20 rounded-lg p-3 min-w-0",children:[w.face_photo_url&&s.jsx("img",{src:w.face_photo_url,alt:w.name,className:"w-8 h-8 rounded-full mr-2 object-cover"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-semibold truncate",children:w.name}),s.jsx("div",{className:"opacity-80 text-xs",children:b(w.check_in_time)}),w.staff_id&&s.jsxs("div",{className:"opacity-60 text-xs",children:["ID: ",w.staff_id]})]})]},w.id))})]})})]})};return d?s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx(j,{}),s.jsx("button",{onClick:g,className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-colors",children:"Exit Fullscreen"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome Monitor"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Display latest check-ins on external monitor with detailed attendee information"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{onClick:()=>P(),disabled:!o,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(_l,{className:"h-5 w-5 mr-2"}),"Refresh Check-ins"]}),s.jsxs("button",{onClick:g,disabled:!o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(F1,{className:"h-5 w-5 mr-2"}),"Fullscreen"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(du,{className:"h-6 w-6 mr-2"}),"Settings"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&n.length<=1?"Event":"Select Event"}),e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:D=>{a(D.target.value);const w=n.find(E=>E.id===D.target.value);l(w||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&s.jsx("option",{value:"",children:"Select an event"}),n.map(D=>s.jsx("option",{value:D.id,children:e?D.name:`${D.name} (${D.company.name})`},D.id))]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showPhoto,onChange:D=>C({...y,showPhoto:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Attendee Photo"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showCompany,onChange:D=>C({...y,showCompany:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Company"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showStaffId,onChange:D=>C({...y,showStaffId:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Staff ID"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showIdentificationNumber,onChange:D=>C({...y,showIdentificationNumber:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Identification Number"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showTableInfo,onChange:D=>C({...y,showTableInfo:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Table Information"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showTime,onChange:D=>C({...y,showTime:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Check-in Time"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showContactInfo,onChange:D=>C({...y,showContactInfo:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Contact Information"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.showHistory,onChange:D=>C({...y,showHistory:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Recent Check-ins"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.useCustomBackground,onChange:D=>C({...y,useCustomBackground:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Use Custom Background"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:y.autoHide,onChange:D=>C({...y,autoHide:D.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Auto Hide"})]})]}),y.autoHide&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Hide Delay (seconds)"}),s.jsx("input",{type:"number",value:y.hideDelay/1e3,onChange:D=>C({...y,hideDelay:parseInt(D.target.value)*1e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"30"})]}),y.showHistory&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max History Items"}),s.jsx("input",{type:"number",value:y.maxHistoryItems,onChange:D=>C({...y,maxHistoryItems:parseInt(D.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"10"})]}),!y.useCustomBackground&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),s.jsx("input",{type:"color",value:y.backgroundColor,onChange:D=>C({...y,backgroundColor:D.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),s.jsx("input",{type:"color",value:y.textColor,onChange:D=>C({...y,textColor:D.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]})]})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(wr,{className:"h-6 w-6 mr-2"}),"Preview"]}),s.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:o?s.jsx(j,{}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(wr,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an event to see preview"})]})})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[s.jsx("p",{children:" This preview shows how the welcome screen will appear"}),s.jsx("p",{children:' Click "Fullscreen" to display on external monitor'}),s.jsx("p",{children:" New check-ins will automatically appear in real-time"}),s.jsx("p",{children:" Shows detailed attendee information including photo, company, staff ID, and table assignment"}),(i==null?void 0:i.custom_background)&&s.jsx("p",{children:" Custom background available for this event"})]})]})})]})]})}function h_({userCompany:e}){var se;const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState(null),[c,x]=A.useState(null),[d,f]=A.useState(!1),[m,v]=A.useState([]),[y,C]=A.useState(null),[P,B]=A.useState(!1),[g,b]=A.useState(null),[j,D]=A.useState({showCompany:!0,showTime:!0,showPhoto:!0,showTableInfo:!0,showContactInfo:!1,showStaffId:!0,showIdentificationNumber:!1,autoHide:!0,hideDelay:5e3,backgroundColor:"#1e40af",textColor:"#ffffff",showHistory:!1,maxHistoryItems:5,useCustomBackground:!0,welcomeDisplayTime:5e3});A.useEffect(()=>{E()},[e]),A.useEffect(()=>{const X=t.get("eventId");X&&n.length>0&&a(X)},[t,n]),A.useEffect(()=>{},[o]),A.useEffect(()=>()=>{g&&clearTimeout(g)},[g]);const w=async X=>{try{if(X.includes("|")){const Q=X.split("|");if(Q.length!==3)return{success:!1,message:"Invalid QR code format"};const ce=Q[0],{data:V,error:xe}=await le.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            table_assignment,
            table_number,
            seat_number,
            company,
            email,
            phone,
            check_in_time,
            created_at,
            face_photo_url,
            event:events(name)
          `).eq("id",ce).single();if(xe||!V)return{success:!1,message:"Attendee not found"};if(V.event_id!==o)return{success:!1,message:"This ticket is not valid for the selected event"};if(V.checked_in)return{success:!1,message:`${V.name} is already checked in`};const{error:ne}=await le.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",V.id);if(ne)throw ne;let _="";return V.table_number?(_=`Table ${V.table_number}`,V.seat_number&&(_+=` - Seat ${V.seat_number}`)):V.table_assignment&&(_=V.table_assignment),{success:!0,attendee:{id:V.id,name:V.name,company:V.company,check_in_time:new Date().toISOString(),face_photo_url:V.face_photo_url||null,table_number:V.table_number,table_position:_,staff_id:V.staff_id,identification_number:V.identification_number,email:V.email,phone:V.phone,registration_date:V.created_at},message:`${V.name} checked in successfully!`}}else{const{data:Q,error:ce}=await le.from("attendees").select(`
            id,
            name,
            identification_number,
            staff_id,
            checked_in,
            event_id,
            table_assignment,
            table_number,
            seat_number,
            company,
            email,
            phone,
            check_in_time,
            created_at,
            face_photo_url,
            event:events(name)
          `).eq("event_id",o).or(`identification_number.eq.${X},staff_id.eq.${X}`);if(ce)throw ce;if(!Q||Q.length===0)return{success:!1,message:"No attendee found with this ID"};const V=Q[0];if(V.checked_in)return{success:!1,message:`${V.name} is already checked in`};const{error:xe}=await le.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",V.id);if(xe)throw xe;let ne="";return V.table_number?(ne=`Table ${V.table_number}`,V.seat_number&&(ne+=` - Seat ${V.seat_number}`)):V.table_assignment&&(ne=V.table_assignment),{success:!0,attendee:{id:V.id,name:V.name,company:V.company,check_in_time:new Date().toISOString(),face_photo_url:V.face_photo_url||null,table_number:V.table_number,table_position:ne,staff_id:V.staff_id,identification_number:V.identification_number,email:V.email,phone:V.phone,registration_date:V.created_at},message:`${V.name} checked in successfully!`}}}catch(Q){return{success:!1,message:"Error processing check-in: "+Q.message}}},E=async()=>{try{let X=le.from("events").select(`
          id,
          name,
          company_id,
          custom_background,
          company:companies(name)
        `).order("created_at",{ascending:!1});e&&(X=X.eq("company_id",e.company_id));const{data:Q,error:ce}=await X;if(ce)throw ce;if(Q){const V=Q.map(xe=>({...xe,company:Array.isArray(xe.company)?xe.company[0]:xe.company}));r(V),e&&V&&V.length>0&&(a(V[0].id),l(V[0]))}}catch(X){console.error("Error fetching events:",X)}},N=()=>{d?document.exitFullscreen():document.documentElement.requestFullscreen(),f(!d)},M=X=>new Date(X).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),L=()=>{const X=j.useCustomBackground&&(i!=null&&i.custom_background)?{backgroundImage:`url(${Tt(i.custom_background)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:j.backgroundColor};return s.jsxs("div",{className:"h-full flex items-center justify-center relative",style:{...X,color:j.textColor},children:[s.jsx(wm,{children:c?s.jsx(Ue.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",duration:.8},className:"text-center max-w-4xl mx-auto p-8",children:s.jsxs(Ue.div,{initial:{y:20},animate:{y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-6",children:"Welcome!"}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-8 mb-8",children:[j.showPhoto&&c.face_photo_url&&s.jsx(Ue.div,{initial:{scale:0,rotate:-180},animate:{scale:1,rotate:0},transition:{delay:.3,type:"spring"},className:"flex-shrink-0",children:s.jsx("img",{src:c.face_photo_url,alt:c.name,className:"w-32 h-32 md:w-48 md:h-48 rounded-full border-4 border-white shadow-2xl object-cover"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"text-4xl md:text-6xl font-semibold mb-4",children:c.name}),j.showCompany&&c.company&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},className:"text-2xl md:text-4xl opacity-80 mb-4 flex items-center justify-center",children:[s.jsx(j0,{className:"h-6 w-6 md:h-8 md:w-8 mr-2"}),c.company]}),j.showStaffId&&c.staff_id&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.45},className:"text-xl md:text-3xl opacity-80 mb-4 flex items-center justify-center",children:[s.jsx(qf,{className:"h-5 w-5 md:h-6 md:w-6 mr-2"}),"Staff ID: ",c.staff_id]}),j.showIdentificationNumber&&c.identification_number&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.47},className:"text-lg md:text-2xl opacity-70 mb-4 flex items-center justify-center",children:[s.jsx(k0,{className:"h-4 w-4 md:h-5 md:w-5 mr-2"}),"ID: ",c.identification_number]}),j.showTableInfo&&c.table_position&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},className:"text-xl md:text-3xl opacity-80 mb-4 flex items-center justify-center",children:[s.jsx(tn,{className:"h-5 w-5 md:h-6 md:w-6 mr-2"}),c.table_position]}),j.showTime&&s.jsxs(Ue.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},className:"text-xl md:text-2xl opacity-60 flex items-center justify-center",children:[s.jsx(Nl,{className:"h-5 w-5 md:h-6 md:w-6 mr-2"}),M(c.check_in_time)]})]})]}),j.showContactInfo&&(c.email||c.phone)&&s.jsxs(Ue.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},className:"text-lg md:text-xl opacity-70",children:[c.email&&s.jsx("div",{className:"mb-2",children:c.email}),c.phone&&s.jsx("div",{children:c.phone})]})]})}):s.jsxs(Ue.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center",children:[s.jsx(vt,{className:"h-32 w-32 mx-auto mb-8 opacity-50"}),s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-4",children:"Welcome to the Event"}),s.jsx("p",{className:"text-xl md:text-2xl opacity-80",children:"Waiting for check-ins..."})]})}),j.showHistory&&m.length>0&&s.jsx(Ue.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"absolute bottom-4 left-4 right-4",children:s.jsxs("div",{className:"bg-black bg-opacity-30 backdrop-blur-sm rounded-lg p-4",children:[s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recent Check-ins"}),s.jsx("div",{className:"flex gap-2 overflow-x-auto",children:m.map((Q,ce)=>s.jsxs(Ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:ce*.1},className:"flex-shrink-0 bg-white bg-opacity-20 rounded-lg p-3 min-w-0",children:[Q.face_photo_url&&s.jsx("img",{src:Q.face_photo_url,alt:Q.name,className:"w-8 h-8 rounded-full mr-2 object-cover"}),s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{className:"font-semibold truncate",children:Q.name}),s.jsx("div",{className:"opacity-80 text-xs",children:M(Q.check_in_time)}),Q.staff_id&&s.jsxs("div",{className:"opacity-60 text-xs",children:["ID: ",Q.staff_id]})]})]},Q.id))})]})})]})},J=()=>P?s.jsx(L,{}):s.jsx(hh,{onScan:async X=>{const Q=await w(X);Q.success&&Q.attendee?(x(Q.attendee),B(!0),v(ce=>[Q.attendee,...ce.slice(0,j.maxHistoryItems-1)]),setTimeout(()=>{B(!1),x(null)},j.welcomeDisplayTime)):z.error(Q.message)},onError:C,eventSelected:!!o});return d?s.jsxs("div",{className:"fixed inset-0 z-50 bg-black",children:[i&&s.jsxs("div",{className:"w-full flex flex-col items-center justify-center",style:i.custom_background&&j.useCustomBackground?{backgroundImage:`url(${Tt(i.custom_background)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",color:j.textColor}:{backgroundColor:j.backgroundColor,color:j.textColor},children:[s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-2 drop-shadow-lg",children:i.name}),((se=i.company)==null?void 0:se.name)&&s.jsxs("div",{className:"text-2xl md:text-3xl font-medium opacity-90 mb-2 drop-shadow-lg flex items-center justify-center",children:[s.jsx(j0,{className:"h-7 w-7 mr-2"}),i.company.name]})]}),s.jsx("div",{className:"flex-1 flex flex-col justify-center items-center w-full h-full ",children:P?s.jsx(L,{}):s.jsx("div",{className:"w-screen h-screen flex flex-col justify-center items-center pb-20",children:s.jsx(hh,{onScan:async X=>{const Q=await w(X);Q.success&&Q.attendee?(x(Q.attendee),B(!0),v(ce=>[Q.attendee,...ce.slice(0,j.maxHistoryItems-1)]),setTimeout(()=>{B(!1),x(null)},j.welcomeDisplayTime)):z.error(Q.message)},onError:C,eventSelected:!!o})})}),s.jsx("button",{onClick:N,className:"absolute top-4 right-4 bg-black bg-opacity-50 text-white p-2 rounded-lg hover:bg-opacity-70 transition-colors",children:"Exit Fullscreen"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Welcome Monitor Scanner"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Camera scanner with welcome display - scan QR codes to welcome attendees"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsxs("button",{onClick:N,disabled:!o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(F1,{className:"h-5 w-5 mr-2"}),"Fullscreen"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(du,{className:"h-6 w-6 mr-2"}),"Settings"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&n.length<=1?"Event":"Select Event"}),e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:X=>{a(X.target.value);const Q=n.find(ce=>ce.id===X.target.value);l(Q||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&s.jsx("option",{value:"",children:"Select an event"}),n.map(X=>s.jsx("option",{value:X.id,children:e?X.name:`${X.name} (${X.company.name})`},X.id))]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showPhoto,onChange:X=>D({...j,showPhoto:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Attendee Photo"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showCompany,onChange:X=>D({...j,showCompany:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Company"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showStaffId,onChange:X=>D({...j,showStaffId:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Staff ID"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showIdentificationNumber,onChange:X=>D({...j,showIdentificationNumber:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Identification Number"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showTableInfo,onChange:X=>D({...j,showTableInfo:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Table Information"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showTime,onChange:X=>D({...j,showTime:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Check-in Time"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showContactInfo,onChange:X=>D({...j,showContactInfo:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Contact Information"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.showHistory,onChange:X=>D({...j,showHistory:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Show Recent Check-ins"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:j.useCustomBackground,onChange:X=>D({...j,useCustomBackground:X.target.checked}),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Use Custom Background"})]})]}),j.showHistory&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max History Items"}),s.jsx("input",{type:"number",value:j.maxHistoryItems,onChange:X=>D({...j,maxHistoryItems:parseInt(X.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"10"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Welcome Display Time (seconds)"}),s.jsx("input",{type:"number",value:j.welcomeDisplayTime/1e3,onChange:X=>D({...j,welcomeDisplayTime:parseInt(X.target.value)*1e3}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",min:"1",max:"30"})]}),!j.useCustomBackground&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Background Color"}),s.jsx("input",{type:"color",value:j.backgroundColor,onChange:X=>D({...j,backgroundColor:X.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Text Color"}),s.jsx("input",{type:"color",value:j.textColor,onChange:X=>D({...j,textColor:X.target.value}),className:"w-full h-10 border border-gray-300 rounded-md"})]})]})]})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(wr,{className:"h-6 w-6 mr-2"}),"Preview"]}),s.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:o?P?s.jsx(L,{}):s.jsx(J,{}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(wr,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an event to see preview"})]})})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[s.jsx("p",{children:" This preview shows the scanner and welcome display"}),s.jsx("p",{children:' Click "Fullscreen" to display on external monitor'}),s.jsx("p",{children:" Camera scanner will automatically detect QR codes"}),s.jsx("p",{children:" Welcome message shows after successful check-in"}),s.jsx("p",{children:" Scanner returns automatically after welcome display"}),(i==null?void 0:i.custom_background)&&s.jsx("p",{children:" Custom background available for this event"})]})]})})]})]})}function f_({userCompany:e}){var We,Xe,lt,ft,xt,wt,Xt;const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState([]),[c,x]=A.useState(!1),[d,f]=A.useState(null),[m,v]=A.useState([]),[y,C]=A.useState(""),[P,B]=A.useState(!1),[g,b]=A.useState("regular"),[j,D]=A.useState(null),[w,E]=A.useState([]),[N,M]=A.useState([]),[L,J]=A.useState(5),[se,X]=A.useState([]),[Q,ce]=A.useState(!1),[V,xe]=A.useState([]),[ne,_]=A.useState(0),[S,U]=A.useState(!1),[$,R]=A.useState(null),[H,me]=A.useState(null),[W,I]=A.useState(!1),[Ee,pe]=A.useState(""),[Ce,ge]=A.useState([]),[be,Be]=A.useState(!1),[Re,Ke]=A.useState(!1),[He,nt]=A.useState(!1),[mt,pt]=A.useState(!0);A.useEffect(()=>{ie()},[]),A.useEffect(()=>{const Y=t.get("eventId");Y&&n.length>0&&a(Y)},[t,n]),A.useEffect(()=>{o&&(Ne(),ze(),Me())},[o]);const ie=async()=>{try{let Y=le.from("events").select(`
          id,
          name,
          company_id,
          custom_background,
          custom_logo,
          company:companies(name)
        `);e&&(Y=Y.eq("company_id",e.company_id));const{data:he,error:Ae}=await Y.order("created_at",{ascending:!1});if(Ae)throw Ae;const Ge=(he==null?void 0:he.map(Je=>({...Je,company:Array.isArray(Je.company)?Je.company[0]:Je.company})))||[];r(Ge),e&&Ge&&Ge.length>0&&a(Ge[0].id)}catch(Y){z.error("Error fetching events: "+Y.message)}},Ne=async()=>{try{const{data:Y,error:he}=await le.from("attendees").select("id, name, company, table_number").eq("event_id",o).eq("checked_in",!0);if(he)throw he;l(Y);const{data:Ae,error:Ge}=await le.from("tables").select("table_number, table_type, capacity").eq("event_id",o).order("table_number");if(Ge){console.error("Error fetching tables:",Ge);const Je=[...new Set(Y==null?void 0:Y.filter(Qe=>Qe.table_number).map(Qe=>Qe.table_number))].sort((Qe,Ut)=>Qe-Ut);E(Je.map(Qe=>({table_number:Qe,table_type:"Regular",capacity:8})))}else E(Ae||[])}catch(Y){z.error("Error fetching attendees: "+Y.message)}},ze=async()=>{try{const{data:Y,error:he}=await le.from("custom_prizes").select("*").eq("event_id",o).order("position",{ascending:!1});if(he)throw he;X(Y||[])}catch(Y){console.error("Error fetching custom prizes:",Y)}},Me=async()=>{try{const{data:Y,error:he}=await le.from("lucky_draw_winners").select("*").eq("event_id",o).order("created_at",{ascending:!1});if(he){if(console.error("Error fetching saved winners:",he),he.code==="42P01"){console.warn("Lucky draw winners table does not exist yet. Please run the migration."),ge([]);return}throw he}ge(Y||[])}catch(Y){console.error("Error fetching saved winners:",Y),ge([])}},ct=()=>{let Y=i.filter(he=>he.id&&he.id.trim()!==""&&!m.find(Ae=>Ae.id===he.id));return g==="table"&&j&&(Y=Y.filter(he=>he.table_number===j)),Y},Ot=()=>[...new Set(w.map(he=>he.table_type))].sort(),ut=()=>N.length===0?w:w.filter(Y=>N.includes(Y.table_type)),Et=()=>{g==="table"?ir():g==="custom"?(pt(!0),no()):jn()},ir=()=>{const Y=ut().filter(Qe=>!m.find(Ut=>Ut.id===`table-${Qe.table_number}`));if(Y.length===0){z.error("No tables available for drawing");return}const he=Y[Math.floor(Math.random()*Y.length)];D(he.table_number),x(!0),f(null);let Ae=0;const Ge=30,Je=setInterval(()=>{const Qe=Y[Math.floor(Math.random()*Y.length)];C(`Table ${Qe.table_number} (${Qe.table_type})`),Ae++,Ae>=Ge&&(clearInterval(Je),f({id:`table-${he.table_number}`,name:`Table ${he.table_number} (${he.table_type})`,company:null,table_number:he.table_number}),C(`Table ${he.table_number} (${he.table_type})`),x(!1),z.success(` Table ${he.table_number} (${he.table_type}) wins!`))},100)},jn=()=>{const Y=ct();if(Y.length===0){z.error("No eligible attendees available");return}x(!0),f(null);let he=0;const Ae=30,Ge=setInterval(()=>{const Je=Y[Math.floor(Math.random()*Y.length)];if(C(Je.name),he++,he>=Ae){clearInterval(Ge);const Qe=Y[Math.floor(Math.random()*Y.length)];f(Qe),C(Qe.name),x(!1),z.success(` ${Qe.name} wins!`)}},100)},no=()=>{const Y=ct();if(Y.length<L){z.error(`Not enough eligible attendees. Need ${L}, have ${Y.length}`);return}if(se.length===0){z.error("Please configure prizes first before starting custom draw");return}if(pe(crypto.randomUUID()),Ke(!1),mt)nt(!0),I(!1),me(null),setTimeout(()=>{const he=L-ne,Ae=se.find(Ge=>Ge.position===he);Ae?(me(Ae),I(!0),nt(!1),ce(!1)):(z.error("No prize found for this position"),nt(!1))},5e3);else{const he=L-ne,Ae=se.find(Ge=>Ge.position===he);Ae?(me(Ae),I(!1),nt(!1),Gn()):z.error("No prize found for this position")}},Gn=()=>{const Y=ct();if(Y.length===0){ce(!1),_(0),I(!1),me(null),z.error("No more eligible attendees available");return}ce(!0),I(!1);let he=0;const Ae=20,Ge=setInterval(()=>{const Je=Y[Math.floor(Math.random()*Y.length)];if(C(Je.name),he++,he>=Ae){clearInterval(Ge);const Qe=Y[Math.floor(Math.random()*Y.length)];C(Qe.name);const Ut=[...V,Qe];xe(Ut),H?z.success(` ${Qe.name} wins ${H.title}!`):z.success(` ${Qe.name} wins!`),ce(!1)}},100)},Qn=async()=>{if(d){Be(!0);let Y;g==="custom"&&H&&(Y=H),await Or(d,Y)?(v(Ae=>[...Ae,d]),z.success("Winner saved successfully!"),g==="custom"&&ne+1<L?setTimeout(()=>{f(null),C(""),D(null),Be(!1),gn()},2e3):g==="custom"&&ne+1>=L?setTimeout(()=>{f(null),C(""),D(null),Be(!1),Ke(!0)},2e3):(f(null),C(""),D(null),Be(!1)),await Me()):Be(!1)}},Or=async(Y,he)=>{var Ae,Ge;try{if(!o)throw new Error("No event selected");const Je=(Ae=Y.id)==null?void 0:Ae.startsWith("table-"),Qe={event_id:o,attendee_id:Je?null:Y.id,winner_name:Y.name||"Unknown Winner",winner_company:Y.company,table_number:Y.table_number,is_table_winner:Je,table_type:Je?"Table":void 0,prize_id:he==null?void 0:he.id,prize_title:he==null?void 0:he.title,prize_description:he==null?void 0:he.description,prize_position:he==null?void 0:he.position,draw_type:g,draw_session_id:Ee||crypto.randomUUID()};console.log("Saving winner data:",Qe),console.log("Winner name to save:",Qe.winner_name),console.log("Is table winner:",Je),console.log("Prize data being saved:",{prize_id:Qe.prize_id,prize_title:Qe.prize_title,prize_description:Qe.prize_description,prize_position:Qe.prize_position});const{data:Ut,error:fs}=await le.from("lucky_draw_winners").insert([Qe]).select();if(fs){if(console.error("Supabase error:",fs),fs.code==="42P01")return console.warn("Lucky draw winners table does not exist yet"),!0;throw fs}return console.log("Winner saved successfully:",Ut),console.log("Saved winner name:",(Ge=Ut==null?void 0:Ut[0])==null?void 0:Ge.winner_name),!0}catch(Je){return console.error("Error saving winner:",Je),z.error("Error saving winner: "+(Je.message||"Unknown error")),!1}},xs=async()=>{if(V.length>0){const Y=V.map((Ae,Ge)=>{const Je=L-Ge,Qe=se.find(Ut=>Ut.position===Je);return Or(Ae,Qe)});(await Promise.all(Y)).every(Ae=>Ae)&&(v(Ae=>[...Ae,...V]),xe([]),_(0),C(""),ne+1<L?gn():(me(null),I(!1),z.success("All winners saved successfully!")),await Me())}},gn=()=>{if(ne+1<L){_(ne+1),C("");const Y=L-(ne+1),he=se.find(Ae=>Ae.position===Y);he?(me(he),I(!0)):z.error("No prize found for this position")}else C(""),_(0),me(null),I(!1),Ke(!0),z.success(` All ${L} winners selected with prizes!`)},qe=()=>{f(null),C(""),D(null),ce(!0),g==="custom"&&pt(!1),Gn()},Ur=()=>{f(null),C(""),x(!1),g==="table"?v(Y=>Y.filter(he=>{var Ae;return!((Ae=he.id)!=null&&Ae.startsWith("table-"))})):g==="custom"?(v(Y=>Y.filter(he=>{var Ae;return(Ae=he.id)==null?void 0:Ae.startsWith("table-")})),xe([]),_(0)):v(Y=>Y.filter(he=>{var Ae;return(Ae=he.id)==null?void 0:Ae.startsWith("table-")})),ce(!1),D(null),me(null),I(!1),pe(""),Be(!1),Ke(!1),nt(!1),M([]),pt(!0)},lr=async()=>{v([]),xe([]),_(0),f(null),C("");try{if(o){const{error:Y}=await le.from("lucky_draw_winners").delete().eq("event_id",o);Y?(console.error("Error clearing saved winners:",Y),z.error("Error clearing saved winners")):(ge([]),z.success("All winners cleared successfully!"))}}catch(Y){console.error("Error clearing winners:",Y),z.error("Error clearing winners: "+Y.message)}},hs=async()=>{f(null),C(""),x(!1),v([]),xe([]),ce(!1),_(0),D(null),me(null),I(!1),pe(""),Be(!1),Ke(!1),nt(!1),M([]),pt(!0),b("regular"),J(5);try{if(o){const{error:Y}=await le.from("lucky_draw_winners").delete().eq("event_id",o);Y?console.error("Error clearing saved winners:",Y):ge([])}}catch(Y){console.error("Error clearing winners:",Y)}try{if(o){const{error:Y}=await le.from("custom_prizes").delete().eq("event_id",o);Y?console.error("Error clearing prizes:",Y):X([])}}catch(Y){console.error("Error clearing prizes:",Y)}z.success("Everything reset to default!")},K=()=>{P?document.exitFullscreen():document.documentElement.requestFullscreen(),B(!P)},je=async Y=>{try{const he=Object.fromEntries(Object.entries(Y).filter(([Ae,Ge])=>Ge!=null&&Ge!==""));if($!=null&&$.id){const{error:Ae}=await le.from("custom_prizes").update(he).eq("id",$.id);if(Ae)throw Ae;z.success("Prize updated!")}else{const{id:Ae,...Ge}=he,{error:Je}=await le.from("custom_prizes").insert([{...Ge,event_id:o}]);if(Je)throw Je;z.success("Prize created!")}U(!1),R(null),await ze()}catch(he){console.error("Error saving prize:",he),z.error("Error saving prize: "+he.message)}},$e=async Y=>{try{const{error:he}=await le.from("custom_prizes").delete().eq("id",Y);if(he)throw he;z.success("Prize deleted!"),ze()}catch(he){z.error("Error deleting prize: "+he.message)}},Se=()=>{const[Y,he]=A.useState($||{});A.useEffect(()=>{he($||{})},[$]);const Ae=(Qe,Ut)=>{he(fs=>({...fs,[Qe]:Ut}))},Ge=Qe=>{Qe.preventDefault(),je(Y)},Je=()=>{U(!1),R(null)};return S?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-xl font-semibold mb-4",children:Y!=null&&Y.id?"Edit Prize":"Add Prize"}),s.jsxs("form",{onSubmit:Ge,children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"prize-position",className:"block text-sm font-medium text-gray-700 mb-2",children:"Position (Descending Order)"}),s.jsx("input",{id:"prize-position",name:"position",type:"number",min:"1",max:L,value:(Y==null?void 0:Y.position)||1,onChange:Qe=>Ae("position",Number(Qe.target.value)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["1 = Highest, ",L," = Lowest"]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"prize-title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Prize Title"}),s.jsx("input",{id:"prize-title",name:"title",type:"text",value:(Y==null?void 0:Y.title)||"",onChange:Qe=>Ae("title",Qe.target.value),placeholder:"Enter prize title",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"prize-description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{id:"prize-description",name:"description",value:(Y==null?void 0:Y.description)||"",onChange:Qe=>Ae("description",Qe.target.value),placeholder:"Enter prize description",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"prize-image-url",className:"block text-sm font-medium text-gray-700 mb-2",children:"Image URL"}),s.jsx("input",{id:"prize-image-url",name:"image_url",type:"url",value:(Y==null?void 0:Y.image_url)||"",onChange:Qe=>Ae("image_url",Qe.target.value),placeholder:"Enter image URL",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),s.jsxs("div",{className:"flex space-x-3 mt-6",children:[s.jsx("button",{type:"submit",className:"flex-1 bg-purple-600 text-white py-2 px-4 rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:"Save Prize"}),s.jsx("button",{type:"button",onClick:Je,className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Cancel"})]})]})]})}):null};return P?s.jsxs("div",{className:"fixed inset-0 z-50",children:[s.jsx("div",{className:"h-full flex items-center justify-center relative overflow-hidden bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-600",children:s.jsx("div",{className:"text-center text-white z-10",children:s.jsxs(wm,{mode:"wait",children:[!c&&!d&&!Q&&V.length===0&&!W&&s.jsxs(Ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"space-y-8",children:[s.jsx(Jr,{className:"h-32 w-32 mx-auto mb-8"}),s.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:"Lucky Draw"}),s.jsx("p",{className:"text-2xl md:text-3xl opacity-80",children:g==="table"?"Random Table Selection":g==="custom"?`Custom Draw (${L} winners)`:g==="regular"?"Single Winner Selection":"Ready to pick a winner?"})]}),He&&s.jsxs(Ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"space-y-8",children:[s.jsx(Ue.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},children:s.jsx(Aa,{className:"h-32 w-32 mx-auto mb-8"})}),s.jsx("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:"Preparing Prize"}),s.jsx("div",{className:"text-2xl md:text-3xl opacity-80",children:"Loading prize information..."})]}),W&&H&&s.jsxs(Ue.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"space-y-8",children:[s.jsx(Wr,{className:"h-32 w-32 mx-auto mb-8 text-yellow-300"}),s.jsxs("h1",{className:"text-6xl md:text-8xl font-bold mb-4",children:["Prize #",H.position]}),s.jsx("div",{className:"text-4xl md:text-6xl font-bold bg-white bg-opacity-20 rounded-lg p-8",children:H.title}),H.description&&s.jsx("div",{className:"text-2xl md:text-3xl opacity-80",children:H.description}),s.jsxs("div",{className:"text-xl md:text-2xl opacity-80",children:["Position #",H.position,"  ",L-ne," of ",L," winners"]})]}),(c||Q)&&s.jsxs(Ue.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-8",children:[s.jsx(Ue.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:s.jsx(Aa,{className:"h-24 w-24 mx-auto mb-8"})}),s.jsx("h1",{className:"text-4xl md:text-6xl font-bold mb-8",children:Q?`Drawing Winner #${L-ne}...`:"Drawing..."}),Q&&s.jsx(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-xl md:text-2xl opacity-80 mb-4",children:(()=>{const Y=L-ne,he=se.find(Ae=>Ae.position===Y);return he?`Prize: ${he.title}`:`Position #${Y}`})()}),s.jsx(Ue.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},className:"text-3xl md:text-5xl font-semibold bg-white bg-opacity-20 rounded-lg p-6",children:y},`drawing-${Date.now()}-${y}`),Q&&V.length>0&&s.jsxs(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},className:"text-xl md:text-2xl opacity-80",children:["Previous Winners: ",V.map(Y=>Y.name).join(", ")]})]}),d&&s.jsxs(Ue.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{opacity:0},className:"space-y-8",children:[be&&s.jsxs(Ue.div,{initial:{opacity:0},animate:{opacity:1},className:"absolute top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[s.jsx(br,{className:"h-5 w-5"}),s.jsx("span",{children:"Saving winner..."})]}),s.jsx(Ue.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:s.jsx(Wr,{className:"h-32 w-32 mx-auto mb-8 text-yellow-300"})}),s.jsxs(Ue.h1,{className:"text-4xl md:text-6xl font-bold mb-4",animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},children:[" ",(We=d.id)!=null&&We.startsWith("table-")?"TABLE WINNER!":"WINNER!"," "]}),s.jsx(Ue.div,{initial:{y:20},animate:{y:0},className:"text-6xl md:text-8xl lg:text-9xl font-bold bg-white bg-opacity-20 rounded-lg p-12",children:d.name}),s.jsx(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"text-xl md:text-2xl opacity-80",children:g==="custom"?"Custom Draw":g==="table"?"Table Draw":"Regular Draw"}),d.company&&!((Xe=d.id)!=null&&Xe.startsWith("table-"))&&s.jsx(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.5},className:"text-2xl md:text-3xl opacity-80",children:d.company}),d.table_number&&!((lt=d.id)!=null&&lt.startsWith("table-"))&&s.jsxs(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.7},className:"text-xl md:text-2xl opacity-80",children:["Table ",d.table_number]}),g==="custom"&&H&&!((ft=d.id)!=null&&ft.startsWith("table-"))&&s.jsxs(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.9},className:"text-2xl md:text-3xl opacity-80 bg-yellow-500 bg-opacity-20 rounded-lg p-4",children:[" ",H.title,H.description&&s.jsx("div",{className:"text-lg opacity-80 mt-2",children:H.description}),s.jsxs("div",{className:"text-lg opacity-80 mt-1",children:["Position #",H.position]})]})]}),Re&&m.length>0&&s.jsxs(Ue.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{opacity:0},className:"space-y-8",children:[s.jsx(Ue.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:s.jsx(Wr,{className:"h-32 w-32 mx-auto mb-8 text-yellow-300"})}),s.jsx(Ue.h1,{className:"text-4xl md:text-6xl font-bold mb-4",animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},children:" ALL WINNERS! "}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl mx-auto",children:m.map((Y,he)=>{const Ae=he+1,Ge=se.find(Je=>Je.position===Ae);return s.jsxs(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:he*.2},className:"text-2xl md:text-3xl font-bold bg-white bg-opacity-20 rounded-lg p-6 relative",children:[s.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:Ae}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-2",children:Y.name}),Ge&&s.jsxs("div",{className:"text-sm opacity-80",children:[" ",Ge.title,Ge.description&&s.jsx("div",{className:"text-xs mt-1",children:Ge.description})]})]})]},Y.id||`winner-${he}-${Date.now()}`)})})]}),V.length>0&&!Re&&s.jsxs(Ue.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{opacity:0},className:"space-y-8",children:[s.jsx(Ue.div,{animate:{scale:[1,1.2,1],rotate:[0,10,-10,0]},transition:{duration:2,repeat:1/0},children:s.jsx(Wr,{className:"h-32 w-32 mx-auto mb-8 text-yellow-300"})}),s.jsx(Ue.h1,{className:"text-4xl md:text-6xl font-bold mb-4",animate:{scale:[1,1.05,1]},transition:{duration:1,repeat:1/0},children:" WINNERS! "}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-4xl mx-auto",children:V.map((Y,he)=>{const Ae=L-he,Ge=se.find(Je=>Je.position===Ae);return s.jsxs(Ue.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:he*.2},className:"text-3xl md:text-4xl lg:text-5xl font-bold bg-white bg-opacity-20 rounded-lg p-6 relative",children:[s.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 rounded-full w-8 h-8 flex items-center justify-center text-sm font-bold",children:Ae}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-2",children:Y.name}),Ge&&s.jsxs("div",{className:"text-sm opacity-80",children:[" ",Ge.title,Ge.description&&s.jsx("div",{className:"text-xs mt-1",children:Ge.description})]})]})]},Y.id||`custom-winner-${he}-${Date.now()}`)})})]})]})})}),s.jsxs("div",{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 flex space-x-4",children:[!c&&!d&&!Q&&V.length===0&&!W&&s.jsxs("button",{onClick:Et,className:"bg-white text-purple-600 px-8 py-4 rounded-lg font-bold text-xl hover:bg-gray-100 transition-colors",children:["Start ",g==="table"?"Table":g==="custom"?"Custom":"Regular"," Draw"]}),W&&H&&s.jsx("button",{onClick:Gn,className:"bg-white text-purple-600 px-8 py-4 rounded-lg font-bold text-xl hover:bg-gray-100 transition-colors",children:"Draw"}),d&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:Qn,className:"bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-green-700 transition-colors",children:"Confirm Winner"}),s.jsx("button",{onClick:qe,className:"bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-blue-700 transition-colors",children:"Draw Again"})]}),V.length>0&&!Q&&s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:xs,className:"bg-green-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-green-700 transition-colors",children:"Confirm Winners"}),ne+1<L&&s.jsx("button",{onClick:gn,className:"bg-blue-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-blue-700 transition-colors",children:"Continue Drawing"}),s.jsx("button",{onClick:Et,className:"bg-purple-600 text-white px-8 py-4 rounded-lg font-bold text-xl hover:bg-purple-700 transition-colors",children:"Draw Again"})]}),s.jsx("button",{onClick:K,className:"bg-gray-600 text-white px-6 py-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Exit"})]})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Lucky Draw"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Random winner selection from checked-in attendees"})]}),s.jsxs("button",{onClick:K,disabled:!o,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Jr,{className:"h-5 w-5 mr-2"}),"Fullscreen Draw"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Jr,{className:"h-6 w-6 mr-2"}),"Draw Controls"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"event-select",className:"block text-sm font-medium text-gray-700 mb-2",children:e&&n.length<=1?"Event":"Select Event"}),e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{id:"event-select",name:"event-select",value:o,onChange:Y=>a(Y.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[!e&&s.jsx("option",{value:"",children:"Select an event"}),n.map(Y=>s.jsx("option",{value:Y.id,children:e?Y.name:`${Y.name} (${Y.company.name})`},Y.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Draw Type"}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{type:"button",onClick:()=>b("regular"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${g==="regular"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(vt,{className:"h-4 w-4 mr-1 inline"}),"Regular"]}),s.jsxs("button",{type:"button",onClick:()=>b("table"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${g==="table"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(oA,{className:"h-4 w-4 mr-1 inline"}),"Table"]}),s.jsxs("button",{type:"button",onClick:()=>b("custom"),className:`px-3 py-2 rounded-md text-sm font-medium transition-colors ${g==="custom"?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[s.jsx(ih,{className:"h-4 w-4 mr-1 inline"}),"Custom"]})]})]}),g==="table"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Table Types to Include"}),s.jsxs("div",{className:"space-y-2",children:[Ot().map((Y,he)=>s.jsxs("label",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",checked:N.includes(Y),onChange:Ae=>{Ae.target.checked?M([...N,Y]):M(N.filter(Ge=>Ge!==Y))},className:"rounded border-gray-300 text-purple-600 focus:ring-purple-500"}),s.jsx("span",{className:"text-sm text-gray-700",children:Y}),s.jsxs("span",{className:"text-xs text-gray-500",children:["(",w.filter(Ae=>Ae.table_type===Y).length," tables)"]})]},`table-type-${Y}-${he}`)),Ot().length===0&&s.jsx("p",{className:"text-xs text-gray-500",children:"No table types found"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:N.length===0?"All table types will be included":`${ut().length} tables selected`})]}),g==="custom"&&s.jsxs("div",{children:[s.jsx("label",{htmlFor:"winner-count",className:"block text-sm font-medium text-gray-700 mb-2",children:"Number of Winners"}),s.jsx("input",{id:"winner-count",name:"winner-count",type:"number",min:"1",max:"20",value:L,onChange:Y=>J(Math.max(1,Math.min(20,Number(Y.target.value)))),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Winners will be drawn in descending order (highest to lowest)"})]}),g==="custom"&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Custom Prizes"}),s.jsx("button",{type:"button",onClick:()=>{R({position:1,title:"",description:"",image_url:""}),U(!0)},className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700",children:"+ Add Prize"})]}),s.jsxs("div",{className:"space-y-2 max-h-40 overflow-y-auto",children:[se.map(Y=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-2",children:s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs("span",{className:"bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs font-medium",children:["#",Y.position]}),s.jsx("span",{className:"font-medium text-gray-900 text-sm",children:Y.title})]}),Y.description&&s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:Y.description})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{type:"button",onClick:()=>{R(Y),U(!0)},className:"text-blue-600 hover:text-blue-800 text-xs",children:"Edit"}),s.jsx("button",{type:"button",onClick:()=>$e(Y.id),className:"text-red-600 hover:text-red-800 text-xs",children:"Delete"})]})]})},Y.id)),se.length===0&&s.jsx("p",{className:"text-gray-500 text-xs",children:"No prizes configured. Add prizes for specific positions."})]})]}),o&&s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-purple-700 mb-2",children:[s.jsx(vt,{className:"h-5 w-5 mr-2"}),s.jsx("span",{className:"font-medium",children:g==="table"?"Available Tables":"Eligible Participants"})]}),s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:g==="table"?ut().filter(Y=>!m.find(he=>he.id===`table-${Y.table_number}`)).length:ct().length}),s.jsx("div",{className:"text-sm text-purple-600",children:g==="table"?s.jsxs("span",{children:[ut().filter(Y=>!m.find(he=>he.id===`table-${Y.table_number}`)).length," available tables  ",m.filter(Y=>{var he;return(he=Y.id)==null?void 0:he.startsWith("table-")}).length," tables already won",N.length>0&&s.jsxs("span",{children:["  ",N.join(", ")," types selected"]})]}):g==="custom"?s.jsxs("span",{children:[i.length," total checked-in  ",m.filter(Y=>{var he;return!((he=Y.id)!=null&&he.startsWith("table-"))}).length," already won  ",L," winners with prizes  ",se.length," prizes configured"]}):s.jsxs("span",{children:[i.length," total checked-in  ",m.filter(Y=>{var he;return!((he=Y.id)!=null&&he.startsWith("table-"))}).length," already won"]})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{type:"button",onClick:Et,disabled:!o||c||Q||W||(g==="table"?ut().filter(Y=>!m.find(he=>he.id===`table-${Y.table_number}`)).length===0:g==="custom"?ct().length<L||se.length===0:ct().length===0),className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Hc,{className:"h-5 w-5 mr-2"}),c||Q?"Drawing...":"Start Lucky Draw"]}),W&&H&&s.jsxs("button",{type:"button",onClick:Gn,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg hover:bg-green-700 transition-colors flex items-center justify-center",children:[s.jsx(Hc,{className:"h-5 w-5 mr-2"}),"Start Drawing for ",H.title]}),d&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("button",{type:"button",onClick:Qn,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:"Confirm Winner"}),s.jsx("button",{type:"button",onClick:Et,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Draw Again"})]}),V.length>0&&!Q&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs("button",{type:"button",onClick:xs,className:"w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700 transition-colors",children:["Confirm ",V.length," Winners"]}),ne+1<L&&s.jsxs("button",{type:"button",onClick:gn,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:["Continue Drawing (",L-ne-1," more)"]})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsxs("button",{type:"button",onClick:Ur,className:"bg-gray-600 text-white py-1 px-2 rounded text-xs hover:bg-gray-700 transition-colors flex items-center justify-center",children:[s.jsx(Ba,{className:"h-3 w-3 mr-1"}),"Current"]}),s.jsxs("button",{type:"button",onClick:lr,className:"bg-orange-600 text-white py-1 px-2 rounded text-xs hover:bg-orange-700 transition-colors flex items-center justify-center",children:[s.jsx(Ba,{className:"h-3 w-3 mr-1"}),"Winners"]}),s.jsxs("button",{type:"button",onClick:hs,className:"bg-red-600 text-white py-1 px-2 rounded text-xs hover:bg-red-700 transition-colors flex items-center justify-center",children:[s.jsx(Ba,{className:"h-3 w-3 mr-1"}),"All"]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Hc,{className:"h-6 w-6 mr-2"}),"Preview"]}),s.jsx("div",{className:"bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-600 rounded-lg p-8 text-center text-white min-h-[400px] flex items-center justify-center",children:s.jsxs("div",{className:"space-y-6",children:[!c&&!d&&!Q&&V.length===0&&!W&&s.jsxs("div",{children:[s.jsx(Jr,{className:"h-24 w-24 mx-auto mb-6"}),s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Lucky Draw"}),s.jsx("p",{className:"text-xl opacity-80",children:g==="table"?"Random Table Selection":g==="custom"?`Custom Draw (${L} winners)`:"Ready to pick a winner?"})]}),W&&H&&s.jsxs("div",{children:[s.jsx(Wr,{className:"h-24 w-24 mx-auto mb-6 text-yellow-300"}),s.jsxs("h1",{className:"text-3xl font-bold mb-4",children:["Prize #",H.position]}),s.jsx("div",{className:"text-2xl font-bold bg-white bg-opacity-20 rounded-lg p-4 mb-4",children:H.title}),H.description&&s.jsx("div",{className:"text-lg opacity-80 mb-2",children:H.description}),s.jsxs("div",{className:"text-sm opacity-80",children:["Position #",H.position,"  ",L-ne," of ",L," winners"]})]}),(c||Q)&&s.jsxs("div",{children:[s.jsx("div",{className:"animate-spin mb-6",children:s.jsx(Aa,{className:"h-16 w-16 mx-auto"})}),s.jsx("h1",{className:"text-3xl font-bold mb-4",children:Q?`Drawing Winner #${L-ne}...`:"Drawing..."}),Q&&s.jsx("div",{className:"text-lg opacity-80 mb-4",children:(()=>{const Y=L-ne,he=se.find(Ae=>Ae.position===Y);return he?`Prize: ${he.title}`:`Position #${Y}`})()}),s.jsx("div",{className:"text-2xl font-semibold bg-white bg-opacity-20 rounded-lg p-4",children:y}),Q&&V.length>0&&s.jsxs("div",{className:"text-lg opacity-80 mt-4",children:["Previous Winners: ",V.map(Y=>Y.name).join(", ")]})]}),d&&s.jsxs("div",{children:[s.jsx("div",{className:"animate-bounce mb-6",children:s.jsx(Wr,{className:"h-24 w-24 mx-auto text-yellow-300"})}),s.jsxs("h1",{className:"text-3xl font-bold mb-4",children:[" ",(xt=d.id)!=null&&xt.startsWith("table-")?"TABLE WINNER!":"WINNER!"," "]}),s.jsx("div",{className:"text-4xl md:text-5xl font-bold bg-white bg-opacity-20 rounded-lg p-8",children:d.name}),d.company&&!((wt=d.id)!=null&&wt.startsWith("table-"))&&s.jsx("div",{className:"text-lg opacity-80 mt-2",children:d.company}),d.table_number&&!((Xt=d.id)!=null&&Xt.startsWith("table-"))&&s.jsxs("div",{className:"text-lg opacity-80 mt-1",children:["Table ",d.table_number]})]}),V.length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"animate-bounce mb-6",children:s.jsx(Wr,{className:"h-24 w-24 mx-auto text-yellow-300"})}),s.jsx("h1",{className:"text-3xl font-bold mb-4",children:" WINNERS! "}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto",children:V.map((Y,he)=>{const Ae=L-he,Ge=se.find(Je=>Je.position===Ae);return s.jsxs("div",{className:"text-xl md:text-2xl font-bold bg-white bg-opacity-20 rounded-lg p-4 relative",children:[s.jsx("div",{className:"absolute -top-2 -right-2 bg-yellow-400 text-yellow-900 rounded-full w-6 h-6 flex items-center justify-center text-xs font-bold",children:Ae}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mb-1",children:Y.name}),Ge&&s.jsxs("div",{className:"text-sm opacity-80",children:[" ",Ge.title]})]})]},Y.id)})})]})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[Ce.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Wr,{className:"h-6 w-6 mr-2 text-yellow-500"}),"Saved Winners"]}),s.jsx("div",{className:"space-y-2",children:Ce.map((Y,he)=>{const Ae=Y.is_table_winner;return s.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:he+1}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Y.winner_name}),Y.winner_company&&!Ae&&s.jsx("div",{className:"text-sm text-gray-600",children:Y.winner_company}),Y.table_number&&!Ae&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Table ",Y.table_number]}),Ae&&s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:" Table Winner"}),Y.prize_title&&!Ae&&s.jsxs("div",{className:"mt-2 p-2 bg-purple-50 rounded border-l-4 border-purple-400",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-purple-600 font-medium",children:""}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:Y.prize_title})]}),Y.prize_description&&s.jsx("div",{className:"text-xs text-purple-700 mt-1",children:Y.prize_description}),s.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Position #",Y.prize_position]})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[Y.draw_type,"  ",new Date(Y.created_at).toLocaleString()]})]})]},Y.id||`saved-winner-${he}-${Date.now()}`)})})]}),m.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Wr,{className:"h-6 w-6 mr-2 text-yellow-500"}),"Current Session Winners"]}),s.jsx("div",{className:"space-y-2",children:m.map((Y,he)=>{var Qe;const Ae=he+1,Ge=se.find(Ut=>Ut.position===Ae),Je=(Qe=Y.id)==null?void 0:Qe.startsWith("table-");return s.jsxs("div",{className:"flex items-center p-3 bg-yellow-50 rounded-lg",children:[s.jsx("div",{className:"w-8 h-8 bg-yellow-500 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:he+1}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:Y.name}),Y.company&&!Je&&s.jsx("div",{className:"text-sm text-gray-600",children:Y.company}),Y.table_number&&!Je&&s.jsxs("div",{className:"text-sm text-gray-600",children:["Table ",Y.table_number]}),Je&&s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:" Table Winner"}),Ge&&!Je&&s.jsxs("div",{className:"mt-2 p-2 bg-purple-50 rounded border-l-4 border-purple-400",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-purple-600 font-medium",children:""}),s.jsx("span",{className:"text-sm font-medium text-purple-900",children:Ge.title})]}),Ge.description&&s.jsx("div",{className:"text-xs text-purple-700 mt-1",children:Ge.description}),s.jsxs("div",{className:"text-xs text-purple-600 mt-1",children:["Position #",Ge.position]})]})]})]},Y.id||`session-winner-${he}-${Date.now()}`)})})]})]})]}),s.jsx(Se,{})]})}function m_({userCompany:e}){const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState([]),[c,x]=A.useState(0),[d,f]=A.useState(!1),[m,v]=A.useState(""),[y,C]=A.useState(!1),[P,B]=A.useState(!1),[g,b]=A.useState(2),[j,D]=A.useState(!1),[w,E]=A.useState(!0),[N,M]=A.useState(!0);A.useEffect(()=>{L()},[]),A.useEffect(()=>{const _=t.get("eventId");_&&n.length>0&&a(_)},[t,n]),A.useEffect(()=>{o&&(X(),Q(),J())},[o]),A.useEffect(()=>{let _;return d&&i.length>0&&(_=setInterval(()=>{x(S=>(S+1)%i.length)},3e3)),()=>clearInterval(_)},[d,i.length]);const L=async()=>{try{let _=le.from("events").select(`
          id,
          name,
          company_id,
          max_gallery_uploads,
          company:companies(name)
        `);e&&(_=_.eq("company_id",e.company_id));const{data:S,error:U}=await _.order("created_at",{ascending:!1});if(U)throw U;const $=S.map(R=>({...R,company:Array.isArray(R.company)?R.company[0]:R.company}));r($),e&&$&&$.length>0&&a($[0].id)}catch(_){z.error("Error fetching events: "+_.message)}},J=async()=>{if(o)try{const{data:_,error:S}=await le.from("events").select("max_gallery_uploads").eq("id",o).single();if(S)throw S;b(_.max_gallery_uploads||2)}catch(_){console.error("Error fetching event details:",_)}},se=async()=>{if(o)try{D(!0);const{error:_}=await le.from("events").update({max_gallery_uploads:g}).eq("id",o);if(_)throw _;z.success("Upload limit updated successfully")}catch(_){z.error("Error updating upload limit: "+_.message)}finally{D(!1)}},X=async()=>{try{B(!0);const{data:_,error:S}=await le.from("gallery_photos").select("*").eq("event_id",o).order("created_at",{ascending:!1});if(S)throw S;l(_)}catch(_){z.error("Error fetching photos: "+_.message)}finally{B(!1)}},Q=async()=>{try{const _=`${window.location.origin}/public/gallery/${o}`,S=await qn.toDataURL(_);v(S)}catch(_){console.error("Error generating QR code:",_)}},ce=async _=>{if(confirm("Are you sure you want to delete this photo?"))try{const{error:S}=await le.from("gallery_photos").delete().eq("id",_);if(S)throw S;z.success("Photo deleted successfully"),X()}catch(S){z.error("Error deleting photo: "+S.message)}},V=()=>{const _=[...i].sort(()=>Math.random()-.5);l(_),x(0)},xe=(_,S)=>{const U=document.createElement("a");U.href=_,U.download=`gallery-photo-${S+1}.jpg`,U.click()},ne=()=>{var _,S,U,$,R;return s.jsx("div",{className:"h-full bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 relative overflow-hidden",children:i.length>0?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"absolute inset-0",children:i.map((H,me)=>{const W=me/i.length*360,I=200+me%3*50,Ee=window.innerWidth/2,pe=window.innerHeight/2,Ce=Ee+Math.cos(W*Math.PI/180)*I,ge=pe+Math.sin(W*Math.PI/180)*I,be=me===c,Be=Math.abs(me-c)<=2;return s.jsx(Ue.div,{className:"absolute",initial:{x:Ee-100,y:pe-100,scale:.3,opacity:0,rotate:0},animate:{x:be?Ee-150:Ce,y:be?pe-150:ge,scale:be?1.2:Be?.8:.4,opacity:be?1:Be?.7:.3,rotate:be?0:W*.1},transition:{duration:.8,ease:"easeOut",delay:me*.1},whileHover:{scale:be?1.3:.9,zIndex:10},children:s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:Tt(H.photo_url),alt:"Gallery",className:"w-32 h-32 object-cover rounded-xl shadow-2xl border-2 border-white/30 hover:border-white/60 transition-all duration-300",style:{filter:"drop-shadow(0 10px 20px rgba(0,0,0,0.4))"}}),be&&(w||N)&&s.jsxs(Ue.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3,duration:.4},className:"absolute -bottom-16 left-1/2 transform -translate-x-1/2 bg-black/80 backdrop-blur-sm rounded-lg p-2 text-white text-center min-w-[140px]",children:[N&&s.jsx("div",{className:"text-sm font-semibold truncate",children:H.attendee_name||"Anonymous"}),w&&s.jsx("div",{className:"text-xs opacity-80",children:new Date(H.created_at).toLocaleDateString()})]}),be&&s.jsx(Ue.div,{className:"absolute -top-2 -right-2 w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",initial:{scale:0},animate:{scale:1},transition:{delay:.5,type:"spring",stiffness:300},children:s.jsx("svg",{className:"w-4 h-4 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]})},H.id)})}),i[c]&&s.jsx(Ue.div,{className:"absolute inset-0 flex items-center justify-center pointer-events-none",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5,ease:"easeOut"},children:s.jsxs("div",{className:"relative max-w-2xl max-h-96",children:[s.jsx(Ue.img,{src:Tt((_=i[c])==null?void 0:_.photo_url),alt:"Active Gallery",className:"w-full h-auto object-contain rounded-2xl shadow-2xl border-4 border-white/40",initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},transition:{duration:.6,ease:"easeOut"},style:{filter:"drop-shadow(0 20px 40px rgba(0,0,0,0.5))"}},c),(w||N)&&s.jsxs(Ue.div,{className:"absolute bottom-4 left-4 right-4 bg-black/80 backdrop-blur-sm rounded-lg p-4 text-white",initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3,duration:.4},children:[N&&s.jsx("div",{className:"text-lg font-semibold",children:((S=i[c])==null?void 0:S.attendee_name)||"Anonymous"}),w&&s.jsx("div",{className:"text-sm opacity-80",children:new Date((U=i[c])==null?void 0:U.created_at).toLocaleString()})]})]})}),(w||N)&&s.jsxs("div",{className:"absolute bottom-8 left-8 text-white bg-black/50 backdrop-blur-sm rounded-lg p-4",children:[N&&s.jsx("div",{className:"text-lg font-semibold",children:(($=i[c])==null?void 0:$.attendee_name)||"Anonymous"}),w&&s.jsx("div",{className:"text-sm opacity-80",children:new Date((R=i[c])==null?void 0:R.created_at).toLocaleString()})]}),s.jsxs("div",{className:"absolute bottom-8 right-8 text-white bg-black/50 backdrop-blur-sm rounded-lg px-4 py-2",children:[c+1," / ",i.length]}),s.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2 flex space-x-2",children:i.map((H,me)=>s.jsx("button",{onClick:()=>x(me),className:`w-3 h-3 rounded-full transition-all duration-200 ${me===c?"bg-white scale-125":"bg-white/50 hover:bg-white/75"}`},me))})]}):s.jsx("div",{className:"text-white text-center flex items-center justify-center h-full",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nn,{className:"h-24 w-24 mx-auto mb-4 opacity-50 animate-pulse"}),s.jsx("h2",{className:"text-2xl font-bold mb-2",children:"No Photos Yet"}),s.jsx("p",{className:"opacity-80",children:"Waiting for attendees to upload photos..."})]})})})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("div",{className:"flex items-center space-x-3",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Event Gallery"}),s.jsx("p",{className:"text-gray-600 text-sm",children:"Manage photo uploads and slideshow display"})]})}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsxs("button",{onClick:V,disabled:i.length===0,className:"bg-orange-600 text-white px-3 py-1.5 rounded text-sm hover:bg-orange-700 transition-colors flex items-center disabled:opacity-50",children:[s.jsx(N1,{className:"h-4 w-4 mr-1"}),"Shuffle"]}),s.jsxs("button",{onClick:()=>f(!d),disabled:i.length===0,className:"bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700 transition-colors disabled:opacity-50",children:[d?"Stop":"Start"," Slideshow"]}),s.jsxs("button",{onClick:()=>C(!y),disabled:i.length===0,className:"bg-green-600 text-white px-3 py-1.5 rounded text-sm hover:bg-green-700 transition-colors disabled:opacity-50",children:[y?s.jsx(SB,{className:"h-4 w-4 mr-1"}):s.jsx(kB,{className:"h-4 w-4 mr-1"}),y?"Exit":"Full"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[s.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center",children:[s.jsx(Qt,{className:"h-5 w-5 mr-2"}),"Gallery Setup"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&n.length<=1?"Event":"Select Event"}),e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&s.jsx("option",{value:"",children:"Select an event"}),n.map(_=>s.jsx("option",{value:_.id,children:e?_.name:`${_.name} (${_.company.name})`},_.id))]})]}),o&&m&&s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"font-medium mb-2",children:"Upload QR Code"}),s.jsx("img",{src:m,alt:"Gallery QR Code",className:"w-48 h-48 mx-auto border rounded-lg"}),s.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Attendees scan this to upload photos"}),s.jsx("button",{onClick:()=>navigator.clipboard.writeText(`${window.location.origin}/public/gallery/${o}`),className:"mt-2 text-blue-600 hover:text-blue-700 text-sm",children:"Copy Upload Link"})]}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-3",children:[s.jsx("div",{className:"text-blue-700 font-medium text-sm",children:"Gallery Stats"}),s.jsx("div",{className:"text-xl font-bold text-blue-900",children:i.length}),s.jsx("div",{className:"text-xs text-blue-600",children:"Photos uploaded"})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-green-700 font-medium text-sm mb-2",children:"Upload Limit"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"number",min:"1",max:"10",value:g,onChange:_=>b(parseInt(_.target.value)||2),className:"w-12 px-1 py-0.5 border border-gray-300 rounded text-center text-sm"}),s.jsx("span",{className:"text-xs text-green-600",children:"photos/attendee"}),s.jsx("button",{onClick:se,disabled:j,className:"ml-1 bg-green-600 text-white px-2 py-0.5 rounded text-xs hover:bg-green-700 disabled:opacity-50",children:j?"Saving...":"Save"})]}),s.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Default: 2 photos"})]}),s.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[s.jsx("div",{className:"text-purple-700 font-medium text-sm mb-2",children:"Display Options"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:w,onChange:_=>E(_.target.checked),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("span",{className:"text-xs text-purple-600",children:"Show captions"})]}),s.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:N,onChange:_=>M(_.target.checked),className:"w-4 h-4 text-purple-600 bg-gray-100 border-gray-300 rounded focus:ring-purple-500"}),s.jsx("span",{className:"text-xs text-purple-600",children:"Show sender details"})]})]})]})]})]})]}),s.jsxs("div",{className:`${y?"fixed inset-0 z-50 bg-black":"lg:col-span-3"}`,children:[s.jsxs("div",{className:`${y?"h-full":"bg-white rounded-lg shadow-md p-4"}`,children:[!y&&s.jsxs("h2",{className:"text-lg font-semibold mb-3 flex items-center",children:[s.jsx(Nn,{className:"h-5 w-5 mr-2"}),"Gallery Display"]}),s.jsx("div",{className:`${y?"h-full":"aspect-video bg-gray-100 rounded-lg overflow-hidden mb-3"}`,children:o?s.jsx(ne,{}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nn,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an event to see gallery"})]})})}),i.length>0&&s.jsxs("div",{className:"flex justify-center space-x-2",children:[s.jsx("button",{onClick:()=>x(Math.max(0,c-1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Previous"}),s.jsxs("span",{className:"px-3 py-1 bg-gray-100 rounded",children:[c+1," / ",i.length]}),s.jsx("button",{onClick:()=>x(Math.min(i.length-1,c+1)),className:"px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition-colors",children:"Next"})]})]}),i.length>0&&s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4 mt-4",children:[s.jsx("h2",{className:"text-lg font-semibold mb-3",children:"All Photos"}),P?s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsx("div",{className:"grid grid-cols-3 md:grid-cols-5 lg:grid-cols-8 gap-2",children:i.map((_,S)=>s.jsxs("div",{className:"relative group",children:[s.jsx("img",{src:_.photo_url,alt:"Gallery",className:"w-full h-20 object-cover rounded cursor-pointer hover:opacity-80 transition-opacity",onClick:()=>x(S)}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-50 transition-all rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"opacity-0 group-hover:opacity-100 flex space-x-2",children:[s.jsx("button",{onClick:()=>xe(_.photo_url,S),className:"text-white hover:text-blue-300 transition-colors",children:s.jsx(Ia,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>ce(_.id),className:"text-white hover:text-red-300 transition-colors",children:s.jsx(is,{className:"h-4 w-4"})})]})}),N&&_.attendee_name&&s.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white text-xs p-1 rounded-b-lg truncate",children:_.attendee_name})]},_.id))})]})]})]})]})}function kb({eventId:e,userCompany:t,isAttendeeView:n=!1,attendeeTable:r=null}){const[o,a]=A.useState([]),[i,l]=A.useState([]),[c,x]=A.useState(null),[d,f]=A.useState(new Set),[m,v]=A.useState(null),[y,C]=A.useState(!1),[P,B]=A.useState(!1),[g,b]=A.useState(null),[j,D]=A.useState(1),[w,E]=A.useState(!1),[N,M]=A.useState("free"),[L,J]=A.useState(20),[se,X]=A.useState(!0),[Q,ce]=A.useState({x:0,y:0}),[V,xe]=A.useState(!1),[ne,_]=A.useState({x:0,y:0}),[S,U]=A.useState({x:0,y:0}),[$,R]=A.useState({}),[H,me]=A.useState(!1),W=A.useRef(null),I=A.useRef({table_number:1,table_type:"Regular",capacity:8,x:100,y:100,rotation:0,is_locked:!1}),Ee=["VVIP","VIP","Regular","Staff"],pe={VVIP:"bg-purple-500",VIP:"bg-yellow-500",Regular:"bg-blue-500",Staff:"bg-gray-500"};A.useEffect(()=>{console.log("VenueLayout: eventId changed to:",e),e&&(Ce(),ge())},[e]);const Ce=async()=>{try{console.log("VenueLayout: Fetching tables for event:",e);const{data:K,error:je}=await le.from("tables").select("*").eq("event_id",e).order("table_number");if(je)throw je;const $e=(K==null?void 0:K.map((Se,We)=>({...Se,x:Se.x||100+We*150,y:Se.y||100+We*100,rotation:Se.rotation||0})))||[];console.log("VenueLayout: Fetched tables:",$e),a($e)}catch(K){console.error("VenueLayout: Error fetching tables:",K),z.error("Error fetching tables: "+K.message)}},ge=async()=>{try{const{data:K,error:je}=await le.from("attendees").select("id, name, table_assignment").eq("event_id",e);if(je)throw je;l(K||[])}catch(K){z.error("Error fetching attendees: "+K.message)}},be=A.useCallback((K,je)=>N==="grid"?{x:Math.round(K/L)*L,y:Math.round(je/L)*L}:{x:K,y:je},[N,L]),Be=A.useCallback(()=>o.filter(K=>d.has(K.id)),[o,d]),Re=async K=>{K.preventDefault();try{if(g){const{data:je,error:$e}=await le.from("tables").update({table_number:I.current.table_number,table_type:I.current.table_type,capacity:I.current.capacity,x:I.current.x,y:I.current.y,rotation:I.current.rotation}).eq("id",g.id).select();if($e)throw $e;if(je&&je.length>0){const Se=je[0];a(We=>We.map(Xe=>Xe.id===g.id?Se:Xe)),z.success("Table updated successfully!")}else Ce(),z.success("Table updated successfully!")}else{const{data:je,error:$e}=await le.from("tables").insert([{event_id:e,table_number:I.current.table_number,table_type:I.current.table_type,capacity:I.current.capacity,x:I.current.x,y:I.current.y,rotation:I.current.rotation,is_locked:!1}]).select();if($e)throw $e;if(je&&je.length>0){const Se=je[0];a(We=>[...We,Se]),z.success("Table created successfully!")}else Ce(),z.success("Table created successfully!")}B(!1),Ce()}catch(je){z.error("Error saving table: "+je.message)}},Ke=async K=>{if(confirm("Are you sure you want to delete this table?"))try{const je=o.find(Se=>Se.id===K);je&&await le.from("attendees").update({table_assignment:null}).eq("table_assignment",je.table_number.toString());const{error:$e}=await le.from("tables").delete().eq("id",K);if($e)throw $e;z.success("Table deleted successfully!"),Ce()}catch(je){z.error("Error deleting table: "+je.message)}},He=async()=>{if(d.size!==0&&confirm(`Are you sure you want to delete ${d.size} selected table(s)?`))try{const K=Array.from(d),je=o.filter(Se=>K.includes(Se.id)).map(Se=>Se.table_number.toString());je.length>0&&await le.from("attendees").update({table_assignment:null}).in("table_assignment",je);const{error:$e}=await le.from("tables").delete().in("id",K);if($e)throw $e;z.success(`${d.size} table(s) deleted successfully!`),f(new Set),Ce()}catch(K){z.error("Error deleting tables: "+K.message)}},nt=(K,je)=>{if(n)return;if(je.is_locked){K.preventDefault(),z.error("This table is locked and cannot be moved");return}if(w){K.preventDefault();const Xe=Be();if(Xe.some(xt=>xt.is_locked)){z.error("Cannot move group: some tables are locked");return}if(d.has(je.id)&&d.size>1){const xt=K.currentTarget.getBoundingClientRect(),wt=K.clientX-xt.left,Xt=K.clientY-xt.top;ce({x:wt,y:Xt}),v(je),me(!0);const Y={};Xe.forEach(he=>{he.id!==je.id&&(Y[he.id]={x:he.x-je.x,y:he.y-je.y})}),R(Y),K.dataTransfer.setData("text/plain","group-drag"),K.dataTransfer.effectAllowed="move";return}const ft=new Set(d);ft.has(je.id)?ft.delete(je.id):ft.add(je.id),f(ft);return}const $e=K.currentTarget.getBoundingClientRect(),Se=K.clientX-$e.left,We=K.clientY-$e.top;ce({x:Se,y:We}),v(je),C(!0),K.dataTransfer.setData("text/plain",je.id),K.dataTransfer.effectAllowed="move"},mt=K=>{K.preventDefault(),K.dataTransfer.dropEffect="move"},pt=async K=>{var xt;if(K.preventDefault(),!m||n)return;const je=(xt=W.current)==null?void 0:xt.getBoundingClientRect();if(!je)return;const $e=(K.clientX-je.left-Q.x)/j,Se=(K.clientY-je.top-Q.y)/j,{x:We,y:Xe}=be($e,Se),lt=Math.round(Math.max(0,Math.min(We,je.width/j-120))),ft=Math.round(Math.max(0,Math.min(Xe,je.height/j-80)));try{if(H&&d.size>1){const wt=Be(),Xt=[];for(const Y of wt)if(Y.id===m.id)Xt.push({id:Y.id,x:lt,y:ft});else{const he=$[Y.id];if(he){const Ae=Math.round(Math.max(0,Math.min(lt+he.x,je.width/j-120))),Ge=Math.round(Math.max(0,Math.min(ft+he.y,je.height/j-80)));Xt.push({id:Y.id,x:Ae,y:Ge})}}for(const Y of Xt)await le.from("tables").update({x:Y.x,y:Y.y}).eq("id",Y.id);a(Y=>Y.map(he=>{const Ae=Xt.find(Ge=>Ge.id===he.id);return Ae?{...he,x:Ae.x,y:Ae.y}:he})),z.success(`${Xt.length} tables moved successfully!`)}else{const{error:wt}=await le.from("tables").update({x:lt,y:ft}).eq("id",m.id);if(wt)throw wt;a(Xt=>Xt.map(Y=>Y.id===m.id?{...Y,x:lt,y:ft}:Y)),z.success("Table position updated!")}}catch(wt){z.error("Error updating table position: "+wt.message)}v(null),C(!1),me(!1),ce({x:0,y:0}),R({})},ie=K=>{(K.button===1||K.button===0&&K.altKey)&&(K.preventDefault(),xe(!0),U({x:K.clientX,y:K.clientY}))},Ne=K=>{if(V){const je=K.clientX-S.x,$e=K.clientY-S.y;_(Se=>({x:Se.x+je,y:Se.y+$e})),U({x:K.clientX,y:K.clientY})}},ze=()=>{xe(!1)},Me=async K=>{const je=o.find(Se=>Se.id===K);if(!je)return;if(je.is_locked){z.error("This table is locked and cannot be rotated");return}const $e=(je.rotation+45)%360;try{const{error:Se}=await le.from("tables").update({rotation:$e}).eq("id",K);if(Se)throw Se;a(We=>We.map(Xe=>Xe.id===K?{...Xe,rotation:$e}:Xe))}catch(Se){z.error("Error rotating table: "+Se.message)}},ct=async K=>{const je=o.find(Se=>Se.id===K);if(!je)return;const $e=!je.is_locked;try{const{error:Se}=await le.from("tables").update({is_locked:$e}).eq("id",K);if(Se)throw Se;a(We=>We.map(Xe=>Xe.id===K?{...Xe,is_locked:$e}:Xe)),z.success(`Table ${$e?"locked":"unlocked"} successfully!`)}catch(Se){z.error("Error updating table lock: "+Se.message)}},Ot=async()=>{if(d.size===0){z.error("No tables selected");return}try{const{error:K}=await le.from("tables").update({is_locked:!0}).in("id",Array.from(d));if(K)throw K;a(je=>je.map($e=>d.has($e.id)?{...$e,is_locked:!0}:$e)),z.success(`${d.size} table(s) locked successfully!`)}catch(K){z.error("Error locking tables: "+K.message)}},ut=async()=>{if(d.size===0){z.error("No tables selected");return}try{const{error:K}=await le.from("tables").update({is_locked:!1}).in("id",Array.from(d));if(K)throw K;a(je=>je.map($e=>d.has($e.id)?{...$e,is_locked:!1}:$e)),z.success(`${d.size} table(s) unlocked successfully!`)}catch(K){z.error("Error unlocking tables: "+K.message)}},Et=async K=>{if(d.size<2){z.error("Select at least 2 tables to align");return}const je=Be(),$e=[];if(K==="left"){const Se=Math.min(...je.map(We=>We.x));for(const We of je)$e.push({id:We.id,x:Math.round(Se)})}else if(K==="center"){const Se=je.reduce((We,Xe)=>We+Xe.x,0)/je.length;for(const We of je)$e.push({id:We.id,x:Math.round(Se)})}else if(K==="right"){const Se=Math.max(...je.map(We=>We.x));for(const We of je)$e.push({id:We.id,x:Math.round(Se)})}else if(K==="top"){const Se=Math.min(...je.map(We=>We.y));for(const We of je)$e.push({id:We.id,y:Math.round(Se)})}else if(K==="middle"){const Se=je.reduce((We,Xe)=>We+Xe.y,0)/je.length;for(const We of je)$e.push({id:We.id,y:Math.round(Se)})}else if(K==="bottom"){const Se=Math.max(...je.map(We=>We.y));for(const We of je)$e.push({id:We.id,y:Math.round(Se)})}try{for(const Se of $e)await le.from("tables").update(Se).eq("id",Se.id);a(Se=>Se.map(We=>{const Xe=$e.find(lt=>lt.id===We.id);return Xe?{...We,...Xe}:We})),z.success(`Tables aligned to ${K}!`)}catch(Se){z.error("Error aligning tables: "+Se.message)}},ir=async K=>{const je=Be();if(je.length<3){z.error("Select at least 3 tables to distribute");return}const $e=[...je].sort((lt,ft)=>K==="horizontal"?lt.x-ft.x:lt.y-ft.y),Se=[],We=$e[0],Xe=$e[$e.length-1];if(K==="horizontal"){const ft=(Xe.x-We.x)/($e.length-1);for(let xt=1;xt<$e.length-1;xt++){const wt=We.x+ft*xt;Se.push({id:$e[xt].id,x:Math.round(wt)})}}else{const ft=(Xe.y-We.y)/($e.length-1);for(let xt=1;xt<$e.length-1;xt++){const wt=We.y+ft*xt;Se.push({id:$e[xt].id,y:Math.round(wt)})}}try{for(const lt of Se)await le.from("tables").update(lt).eq("id",lt.id);a(lt=>lt.map(ft=>{const xt=Se.find(wt=>wt.id===ft.id);return xt?{...ft,...xt}:ft})),z.success(`Tables distributed ${K}ly!`)}catch(lt){z.error("Error distributing tables: "+lt.message)}},jn=K=>i.filter(je=>je.table_assignment===K.toString()),no=K=>{b(K),I.current={table_number:K.table_number,table_type:K.table_type,capacity:K.capacity,x:K.x,y:K.y,rotation:K.rotation,is_locked:K.is_locked||!1},B(!0)},Gn=()=>{I.current={table_number:Math.max(...o.map(K=>K.table_number),0)+1,table_type:"Regular",capacity:8,x:100,y:100,rotation:0,is_locked:!1},b(null),B(!1)},Qn=()=>{D(K=>Math.min(K+.2,3))},Or=()=>{D(K=>Math.max(K-.2,.3))},xs=()=>{D(1),_({x:0,y:0})},gn=()=>{const K=o.filter(lt=>!lt.is_locked),je=o.filter(lt=>lt.is_locked);if(K.length===0){z.error("No movable tables found. All tables are locked.");return}const $e=K.map((lt,ft)=>{const xt=Math.floor(ft/4),wt=ft%4,{x:Xt,y:Y}=be(50+wt*200,50+xt*150);return{...lt,x:Xt,y:Y}}),Se=[...$e,...je];a(Se),$e.forEach(async lt=>{try{await le.from("tables").update({x:lt.x,y:lt.y}).eq("id",lt.id)}catch(ft){console.error("Error updating table position:",ft)}});const We=je.length,Xe=$e.length;We>0?z.success(`${Xe} tables arranged in grid. ${We} locked table(s) were not moved.`):z.success(`${Xe} tables arranged in grid successfully!`)},qe=K=>{if(w){const je=new Set(d);je.has(K.id)?je.delete(K.id):je.add(K.id),f(je)}else x(K)},Ur=K=>d.has(K),lr=()=>{f(new Set)},hs=()=>{if(!se)return null;const K=[],je=800,$e=600;for(let Se=0;Se<=je;Se+=L)K.push(s.jsx("line",{x1:Se,y1:0,x2:Se,y2:$e,stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.5"},`v${Se}`));for(let Se=0;Se<=$e;Se+=L)K.push(s.jsx("line",{x1:0,y1:Se,x2:je,y2:Se,stroke:"#e5e7eb",strokeWidth:"1",opacity:"0.5"},`h${Se}`));return s.jsx("svg",{className:"absolute inset-0 pointer-events-none",width:"100%",height:"100%",style:{transform:`translate(${ne.x}px, ${ne.y}px) scale(${j})`,transformOrigin:"top left"},children:K})};return Be(),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Venue Layout"}),s.jsx("div",{className:"flex gap-2",children:!n&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>E(!w),className:`px-3 py-2 rounded-lg flex items-center ${w?"bg-purple-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Toggle multi-select mode",children:[s.jsx(MB,{className:"h-4 w-4 mr-2"}),"Multi-Select"]}),w&&d.size>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex gap-1 border-l border-gray-300 pl-2",children:[s.jsx("button",{onClick:()=>Et("left"),className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",title:"Align left",children:s.jsx($3,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Et("center"),className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",title:"Align center",children:s.jsx(M3,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Et("right"),className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",title:"Align right",children:s.jsx(U3,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Et("top"),className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",title:"Align top",children:s.jsx(G3,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Et("middle"),className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",title:"Align middle",children:s.jsx(TB,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>Et("bottom"),className:"bg-blue-600 text-white px-2 py-2 rounded hover:bg-blue-700",title:"Align bottom",children:s.jsx(z3,{className:"h-4 w-4"})})]}),s.jsx("button",{onClick:()=>ir("horizontal"),className:"bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",title:"Distribute horizontally",children:"Distribute H"}),s.jsx("button",{onClick:()=>ir("vertical"),className:"bg-green-600 text-white px-3 py-2 rounded hover:bg-green-700",title:"Distribute vertically",children:"Distribute V"}),s.jsxs("button",{onClick:Ot,className:"bg-orange-600 text-white px-3 py-2 rounded hover:bg-orange-700",title:"Lock selected tables",children:[s.jsx(Sd,{className:"h-4 w-4 mr-1"}),"Lock"]}),s.jsxs("button",{onClick:ut,className:"bg-yellow-600 text-white px-3 py-2 rounded hover:bg-yellow-700",title:"Unlock selected tables",children:[s.jsx(Xg,{className:"h-4 w-4 mr-1"}),"Unlock"]}),s.jsxs("button",{onClick:He,className:"bg-red-600 text-white px-3 py-2 rounded hover:bg-red-700",title:"Delete selected tables",children:["Delete (",d.size,")"]}),s.jsx("button",{onClick:lr,className:"bg-gray-600 text-white px-3 py-2 rounded hover:bg-gray-700",title:"Clear selection",children:"Clear"})]}),s.jsxs("button",{onClick:()=>M(N==="free"?"grid":"free"),className:`px-3 py-2 rounded-lg flex items-center ${N==="grid"?"bg-green-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Toggle grid snapping",children:[s.jsx(Yg,{className:"h-4 w-4 mr-2"}),N==="grid"?"Grid On":"Grid Off"]}),s.jsxs("button",{onClick:()=>X(!se),className:`px-3 py-2 rounded-lg flex items-center ${se?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,title:"Toggle grid visibility",children:[s.jsx(Yg,{className:"h-4 w-4 mr-2"}),"Grid"]}),s.jsxs("button",{onClick:gn,className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 flex items-center",title:"Arrange tables in grid",children:[s.jsx($B,{className:"h-4 w-4 mr-2"}),"Arrange Grid"]}),s.jsxs("button",{onClick:xs,className:"bg-gray-600 text-white px-3 py-2 rounded-lg hover:bg-gray-700 flex items-center",title:"Reset view",children:[s.jsx(Zg,{className:"h-4 w-4 mr-2"}),"Reset"]}),s.jsx("button",{onClick:Qn,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 flex items-center",title:"Zoom in",children:s.jsx(wA,{className:"h-4 w-4"})}),s.jsx("button",{onClick:Or,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 flex items-center",title:"Zoom out",children:s.jsx(BA,{className:"h-4 w-4"})}),s.jsxs("button",{onClick:()=>{b(null),Gn(),B(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",title:"Add new table",children:[s.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add Table"]})]})})]}),s.jsx("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("span",{children:["Zoom: ",Math.round(j*100),"%"]}),s.jsxs("span",{children:["Grid: ",N==="grid"?"On":"Off"]}),s.jsxs("span",{children:["Grid Size: ",L,"px"]}),w&&s.jsxs("span",{className:"text-purple-600 font-medium",children:["Multi-Select: ",d.size," table(s) selected"]})]}),s.jsx("div",{className:"text-xs mt-1 text-blue-600",children:s.jsx("span",{children:w?"Click to select/deselect  Drag selected table to move group  Use alignment tools":"Drag to move tables  Alt+Click to pan  Middle click to pan  Grid snapping: "+(N==="grid"?"Enabled":"Disabled")})})]})}),s.jsxs("div",{ref:W,className:"relative w-full h-96 bg-gray-100 border-2 border-dashed border-gray-300 rounded-lg overflow-hidden",onDragOver:mt,onDrop:pt,onMouseDown:ie,onMouseMove:Ne,onMouseUp:ze,onMouseLeave:ze,style:{cursor:V?"grabbing":"grab"},children:[hs(),s.jsx("div",{style:{transform:`translate(${ne.x}px, ${ne.y}px) scale(${j})`,transformOrigin:"top left"},children:o.map(K=>{const je=jn(K.table_number),$e=n&&r===K.table_number.toString(),Se=Ur(K.id),We=(m==null?void 0:m.id)===K.id;return s.jsx("div",{draggable:!n,onDragStart:Xe=>nt(Xe,K),onClick:()=>qe(K),className:`absolute transition-all duration-200 ${$e?"ring-4 ring-green-500 ring-opacity-75":""} ${Se?"ring-4 ring-purple-500 ring-opacity-75":""} ${We?"opacity-50 scale-105":""}`,style:{left:K.x,top:K.y,transform:`rotate(${K.rotation}deg)`,width:120,height:80,zIndex:We?1e3:Se?100:1},children:s.jsxs("div",{className:`${pe[K.table_type]} text-white rounded-lg p-3 shadow-lg h-full relative hover:shadow-xl transition-shadow ${K.is_locked?"ring-2 ring-yellow-400 ring-opacity-75":""}`,children:[s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"font-bold text-lg flex items-center justify-center gap-1",children:["Table ",K.table_number,K.is_locked&&s.jsx(Sd,{className:"h-3 w-3 text-yellow-300"})]}),s.jsx("div",{className:"text-xs opacity-90",children:K.table_type}),s.jsxs("div",{className:"text-xs mt-1",children:[je.length,"/",K.capacity," guests"]})]}),!n&&s.jsxs("div",{className:"flex justify-center gap-1 mt-2",children:[s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),ct(K.id)},className:`rounded p-1 transition-colors ${K.is_locked?"bg-yellow-500/30 hover:bg-yellow-500/50":"bg-white/20 hover:bg-white/30"}`,title:K.is_locked?"Unlock Table":"Lock Table",children:K.is_locked?s.jsx(Xg,{className:"h-3 w-3"}):s.jsx(Sd,{className:"h-3 w-3"})}),s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),no(K)},className:"bg-white/20 hover:bg-white/30 rounded p-1 transition-colors",title:"Edit Table",children:s.jsx(pr,{className:"h-3 w-3"})}),s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),Me(K.id)},className:"bg-white/20 hover:bg-white/30 rounded p-1 transition-colors",title:"Rotate Table",children:s.jsx(Zg,{className:"h-3 w-3"})}),s.jsx("button",{onClick:Xe=>{Xe.stopPropagation(),Ke(K.id)},className:"bg-white/20 hover:bg-white/30 rounded p-1 transition-colors",title:"Delete Table",children:s.jsx(is,{className:"h-3 w-3"})})]})]})},K.id)})}),n&&r&&s.jsx("div",{className:"absolute top-4 left-4 bg-green-500 text-white px-3 py-2 rounded-lg z-10",children:s.jsxs("div",{className:"font-bold",children:["Your Table: ",r]})})]}),w&&d.size>0&&s.jsx("div",{className:"mt-2 p-2 bg-purple-100 rounded-lg",children:s.jsxs("p",{className:"text-sm text-purple-800",children:[d.size," table(s) selected  Drag any selected table to move the entire group"]})})]}),P&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:g?"Edit Table":"Add Table"}),s.jsxs("form",{onSubmit:Re,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Number"}),s.jsx("input",{type:"number",value:I.current.table_number,onChange:K=>I.current.table_number=parseInt(K.target.value),className:"w-full border rounded px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Type"}),s.jsx("select",{value:I.current.table_type,onChange:K=>I.current.table_type=K.target.value,className:"w-full border rounded px-3 py-2",children:Ee.map(K=>s.jsx("option",{value:K,children:K},K))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Capacity"}),s.jsx("input",{type:"number",value:I.current.capacity,onChange:K=>I.current.capacity=parseInt(K.target.value),className:"w-full border rounded px-3 py-2",min:"1",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>B(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:g?"Update":"Create"})]})]})]})})]})}function p_({userCompany:e}){const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState([]),[c,x]=A.useState([]),[d,f]=A.useState(!1),[m,v]=A.useState(null),[y,C]=A.useState(null),[P,B]=A.useState(!0),[g,b]=A.useState({table_number:1,table_type:"Regular",capacity:8,quantity:1}),j=["VVIP","VIP","Regular","Staff"],D={VVIP:"bg-purple-500",VIP:"bg-yellow-500",Regular:"bg-blue-500",Staff:"bg-gray-500"};A.useEffect(()=>{w()},[]),A.useEffect(()=>{const _=t.get("eventId");_&&n.length>0&&a(_)},[t,n]),A.useEffect(()=>{console.log("Selected event changed:",o),o&&(E(),N())},[o]);const w=async()=>{try{B(!0);let _=le.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(_=_.eq("company_id",e.company_id));const{data:S,error:U}=await _.order("created_at",{ascending:!1});if(U)throw U;const $=(S==null?void 0:S.map(R=>({...R,company:Array.isArray(R.company)?R.company[0]:R.company})))||[];console.log("Fetched events:",$),r($),e&&$&&$.length>0&&a($[0].id)}catch(_){console.error("Error fetching events:",_),z.error("Error fetching events: "+_.message)}finally{B(!1)}},E=async()=>{try{console.log("Fetching tables for event:",o);const{data:_,error:S}=await le.from("tables").select("*").eq("event_id",o).order("table_number");if(S)throw S;console.log("Fetched tables:",_),l(_||[])}catch(_){console.error("Error fetching tables:",_),z.error("Error fetching tables: "+_.message)}},N=async()=>{try{console.log("Fetching attendees for event:",o);const{data:_,error:S}=await le.from("attendees").select("*").eq("event_id",o).order("name");if(S)throw S;console.log("Fetched attendees:",_),x(_||[])}catch(_){console.error("Error fetching attendees:",_),z.error("Error fetching attendees: "+_.message)}},M=async _=>{_.preventDefault();try{if(m){const{error:S}=await le.from("tables").update({table_number:g.table_number,table_type:g.table_type,capacity:g.capacity}).eq("id",m.id);if(S)throw S;z.success("Table updated successfully!")}else{const S=[];for(let $=0;$<g.quantity;$++)S.push({event_id:o,table_number:g.table_number+$,table_type:g.table_type,capacity:g.capacity,x:100+$*150,y:100+$*100,rotation:0});const{error:U}=await le.from("tables").insert(S);if(U)throw U;z.success(`${g.quantity} table(s) created successfully!`)}f(!1),E()}catch(S){z.error("Error saving table: "+S.message)}},L=async(_,S)=>{try{const{error:U}=await le.from("attendees").update({table_assignment:(S==null?void 0:S.toString())||null}).eq("id",_);if(U)throw U;N()}catch(U){z.error("Error assigning attendee: "+U.message)}},J=()=>{b({table_number:Math.max(...i.map(_=>_.table_number),0)+1,table_type:"Regular",capacity:8,quantity:1}),v(null),f(!1)},se=_=>c.filter(S=>S.table_assignment===_.toString()),X=c.filter(_=>!_.table_assignment),Q=async()=>{if(confirm("This will randomly assign all unassigned attendees to available regular tables. Continue?"))try{const _=i.filter(me=>me.table_type==="Regular"),S=[];if(_.forEach(me=>{const W=se(me.table_number),I=me.capacity-W.length;I>0&&S.push({tableNumber:me.table_number,availableSeats:I})}),S.length===0){z.error("No available seats in regular tables");return}const U=[...X].sort(()=>Math.random()-.5),$=[];let R=0,H=0;for(const me of U){if(R>=S.length)break;const W=S[R];$.push({attendeeId:me.id,tableNumber:W.tableNumber}),H++,H>=W.availableSeats&&(R++,H=0)}for(const me of $)await le.from("attendees").update({table_assignment:me.tableNumber.toString()}).eq("id",me.attendeeId);z.success(`${$.length} attendees randomly assigned to tables`),N()}catch(_){z.error("Error randomizing seating: "+_.message)}},ce=(_,S)=>{C(S),_.dataTransfer.setData("text/plain",S.id)},V=_=>{_.preventDefault()},xe=async(_,S)=>{_.preventDefault(),y&&(await L(y.id,S),C(null))},ne=async _=>{_.preventDefault(),y&&(await L(y.id,null),C(null))};return P?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):o?s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seating Arrangement"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage table layouts and assign attendees to tables"})]})}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[s.jsx("h3",{className:"font-semibold text-yellow-800",children:"Debug Info:"}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Selected Event ID: ",o]}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Tables Count: ",i.length]}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Attendees Count: ",c.length]}),s.jsxs("p",{className:"text-sm text-yellow-700",children:["Events Count: ",n.length]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),n.length===0?s.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"No events found. ",e?"Create an event first to manage seating.":"Please create events to manage seating arrangements."]})}):e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Choose an event to manage seating"}),n.map(_=>s.jsx("option",{value:_.id,children:e?_.name:`${_.name} (${_.company.name})`},_.id))]}),n.length>0&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.length," event",n.length!==1?"s":""," available"]})]}),o&&s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 w-full",children:[s.jsx("div",{className:"text-sm text-blue-600 font-medium",children:"Seating Summary"}),s.jsxs("div",{className:"text-2xl font-bold text-blue-900",children:[i.length," tables"]}),s.jsxs("div",{className:"text-sm text-blue-600",children:[c.filter(_=>_.table_assignment).length," assigned"]})]})})]})}),o&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-bold",children:"Venue Layout"}),s.jsxs("button",{onClick:()=>{v(null),J(),f(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[s.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add Table"]})]}),o?s.jsx(kb,{eventId:o,userCompany:e,isAttendeeView:!1}):s.jsx("div",{className:"min-h-[400px] bg-gray-50 rounded-lg border-2 border-dashed border-gray-300 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(tn,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Please select an event to view venue layout"})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-xl font-semibold",children:"Unassigned Attendees"}),s.jsxs("div",{className:"flex gap-2",children:[c.length===0&&s.jsxs("button",{onClick:()=>window.open("/admin/checkin","_blank"),className:"bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700 flex items-center text-sm",children:[s.jsx(Sr,{className:"h-3 w-3 mr-1"}),"Add Attendees"]}),s.jsxs("button",{onClick:Q,disabled:c.length===0,className:"bg-purple-600 text-white px-3 py-1 rounded hover:bg-purple-700 flex items-center text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(N1,{className:"h-3 w-3 mr-1"}),"Randomize"]})]})]}),s.jsx("div",{className:"min-h-[200px] border-2 border-dashed border-gray-300 rounded-lg p-4",onDragOver:V,onDrop:ne,children:c.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(vt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No attendees found for this event"}),s.jsx("p",{className:"text-sm mt-2",children:"Attendees will appear here when they register"}),s.jsxs("div",{className:"mt-4 space-y-2",children:[s.jsx("p",{className:"text-xs text-gray-400",children:"You can:"}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("a",{href:"/admin/checkin",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Add attendees manually in Check-In System"}),s.jsx("a",{href:`/public/register/${o}`,target:"_blank",className:"text-blue-600 hover:text-blue-700 text-sm underline",children:"Share registration link with attendees"})]})]})]}):X.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(vt,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"All attendees assigned"})]}):X.map(_=>s.jsxs("div",{draggable:!0,onDragStart:S=>ce(S,_),className:"bg-gray-50 p-3 rounded-lg mb-2 cursor-move hover:bg-gray-100",children:[s.jsx("div",{className:"font-medium",children:_.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:["ID: ",_.identification_number]})]},_.id))})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Table Assignments"}),s.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:i.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(tn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No tables created yet"}),s.jsx("p",{className:"text-sm mt-2",children:"Create tables to start assigning attendees"}),s.jsxs("button",{onClick:()=>f(!0),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center mx-auto",children:[s.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Add Table"]})]}):i.map(_=>{const S=se(_.table_number);return s.jsxs("div",{className:`${D[_.table_type]} text-white rounded-lg p-4`,onDragOver:V,onDrop:U=>xe(U,_.table_number),children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-bold text-lg",children:["Table ",_.table_number]}),s.jsx("div",{className:"text-sm opacity-90",children:_.table_type})]}),s.jsxs("div",{className:"text-sm",children:[S.length,"/",_.capacity]})]}),s.jsxs("div",{className:"space-y-2",children:[S.map(U=>s.jsxs("div",{draggable:!0,onDragStart:$=>ce($,U),className:"bg-white/20 p-2 rounded cursor-move hover:bg-white/30",children:[s.jsx("div",{className:"font-medium",children:U.name}),s.jsxs("div",{className:"text-xs opacity-90",children:["ID: ",U.identification_number]})]},U.id)),S.length===0&&s.jsx("div",{className:"text-center py-4 text-white/70",children:s.jsx("p",{children:"No attendees assigned"})})]})]},_.id)})})]})]})]}),d&&s.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h3",{className:"text-lg font-bold mb-4",children:m?"Edit Table":"Add Table"}),s.jsxs("form",{onSubmit:M,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Number"}),s.jsx("input",{type:"number",value:g.table_number,onChange:_=>b({...g,table_number:parseInt(_.target.value)}),className:"w-full border rounded px-3 py-2",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Table Type"}),s.jsx("select",{value:g.table_type,onChange:_=>b({...g,table_type:_.target.value}),className:"w-full border rounded px-3 py-2",children:j.map(_=>s.jsx("option",{value:_,children:_},_))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Capacity"}),s.jsx("input",{type:"number",value:g.capacity,onChange:_=>b({...g,capacity:parseInt(_.target.value)}),className:"w-full border rounded px-3 py-2",min:"1",required:!0})]}),!m&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity"}),s.jsx("input",{type:"number",value:g.quantity,onChange:_=>b({...g,quantity:parseInt(_.target.value)}),className:"w-full border rounded px-3 py-2",min:"1",max:"10",required:!0})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2 bg-gray-200 rounded",children:"Cancel"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded",children:m?"Update":"Create"})]})]})]})})]}):s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Seating Arrangement"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage table layouts and assign attendees to tables"})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),n.length===0?s.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("svg",{className:"h-5 w-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"No events found. ",e?"Create an event first to manage seating.":"Please create events to manage seating arrangements."]})}):e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Choose an event to manage seating"}),n.map(_=>s.jsx("option",{value:_.id,children:e?_.name:`${_.name} (${_.company.name})`},_.id))]}),n.length>0&&s.jsxs("div",{className:"mt-2 text-sm text-gray-600",children:[n.length," event",n.length!==1?"s":""," available"]})]})})}),n.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Events Available"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"You need to create events first before managing seating arrangements."}),s.jsxs("a",{href:"/admin/events",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors inline-flex items-center",children:[s.jsx(Sr,{className:"h-4 w-4 mr-2"}),"Create Event"]})]}):s.jsxs("div",{className:"text-center py-12",children:[s.jsx(tn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select an Event"}),s.jsx("p",{className:"text-gray-600",children:"Choose an event from the dropdown above to manage seating arrangements"})]})]})}function g_(){const[e,t]=A.useState([]),[n,r]=A.useState([]),[o,a]=A.useState([]),[i,l]=A.useState(new Date().getFullYear()),[c,x]=A.useState(!0),[d,f]=A.useState("monthly"),[m,v]=A.useState(""),[y,C]=A.useState(!0),[P,B]=A.useState(!0),[g,b]=A.useState(!0);A.useEffect(()=>{j(),D(),w()},[i]);const j=async()=>{try{x(!0);const{data:_,error:S}=await le.from("events").select(`
          id,
          created_at,
          company_id
        `).gte("created_at",`${i}-01-01`).lt("created_at",`${i+1}-01-01`);if(S)throw S;const U=(_==null?void 0:_.map(I=>I.id))||[],{data:$,error:R}=await le.from("attendees").select("id, event_id, checked_in, created_at").in("event_id",U);if(R)throw R;const{data:H,error:me}=await le.from("companies").select("id, created_at").gte("created_at",`${i}-01-01`).lt("created_at",`${i+1}-01-01`);if(me)throw me;const W=[];for(let I=0;I<12;I++){const Ee=new Date(i,I,1),pe=new Date(i,I+1,0),Ce=(_==null?void 0:_.filter(Be=>{const Re=new Date(Be.created_at);return Re>=Ee&&Re<=pe}))||[],ge=($==null?void 0:$.filter(Be=>{const Re=new Date(Be.created_at);return Re>=Ee&&Re<=pe}))||[],be=(H==null?void 0:H.filter(Be=>{const Re=new Date(Be.created_at);return Re>=Ee&&Re<=pe}))||[];W.push({month:Ee.toLocaleDateString("en-US",{month:"short"}),events:Ce.length,attendees:ge.length,checkedIn:ge.filter(Be=>Be.checked_in).length,companies:be.length})}t(W)}catch(_){z.error("Error fetching monthly progress: "+_.message)}finally{x(!1)}},D=async()=>{try{const{data:_,error:S}=await le.from("companies").select(`
          id,
          name,
          events!inner(
            id,
            attendees(id, checked_in)
          )
        `);if(S)throw S;const U=(_==null?void 0:_.map($=>{const R=$.events||[],H=R.flatMap(me=>me.attendees||[]);return{id:$.id,name:$.name,events:R.length,attendees:H.length,checkedIn:H.filter(me=>me.checked_in).length}}))||[];r(U.sort(($,R)=>R.attendees-$.attendees))}catch(_){console.error("Error fetching company progress:",_)}},w=async()=>{try{const{data:_,error:S}=await le.from("events").select(`
          id,
          name,
          date,
          attendees(id, checked_in)
        `).order("date",{ascending:!1});if(S)throw S;const U=(_==null?void 0:_.map($=>{var R,H;return{id:$.id,name:$.name,date:$.date,attendees:((R=$.attendees)==null?void 0:R.length)||0,checkedIn:((H=$.attendees)==null?void 0:H.filter(me=>me.checked_in).length)||0}}))||[];a(U)}catch(_){console.error("Error fetching events:",_)}},E=async _=>{try{const S=[],{data:U,error:$}=await le.from("lucky_draw_winners").select("*").eq("event_id",_).order("prize_position",{ascending:!1});!$&&U&&U.forEach(me=>{S.push({id:me.id,name:me.winner_name||"Unknown Winner",type:"lucky_draw",prize:me.prize_title||"Unknown Prize",position:me.prize_position||1,company:me.winner_company,table_number:me.table_number})});const{data:R,error:H}=await le.from("voting_sessions").select(`
          id,
          title,
          voting_photos(
            id,
            title,
            photo_url,
            vote_count
          )
        `).eq("event_id",_);return!H&&R&&R.forEach(me=>{if(me.voting_photos&&me.voting_photos.length>0){const W=me.voting_photos.reduce((pe,Ce)=>pe.vote_count>Ce.vote_count?pe:Ce),I=me.voting_photos.reduce((pe,Ce)=>pe+Ce.vote_count,0),Ee=I>0?W.vote_count/I*100:0;S.push({id:`voting-${W.id}`,name:W.title,type:"voting",prize:`${me.title} Winner`,position:1})}}),S}catch(S){return console.error("Error fetching winners:",S),[]}},N=e.reduce((_,S)=>_+S.events,0),M=e.reduce((_,S)=>_+S.attendees,0),L=e.reduce((_,S)=>_+S.checkedIn,0),J=e.reduce((_,S)=>_+S.companies,0),se=Math.max(...e.map(_=>Math.max(_.events,_.attendees,_.checkedIn))),X=600,Q=300,ce=40,V=(_,S)=>_.length===0?"":`M ${_.map(($,R)=>{const H=ce+R*(X-2*ce)/(_.length-1),me=Q-ce-$/se*(Q-2*ce);return`${H},${me}`}).join(" ")}`,xe=(_,S,U)=>{var H,me,W,I,Ee,pe,Ce;const $=new Date().toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});let R="";if(R+=` EVENT MANAGEMENT SYSTEM - PREMIUM REPORT
`,R+="=".repeat(80)+`
`,R+=` Report Generated: ${$}
`,R+=` Event: ${_.name}
`,R+=` Event Date: ${_.date}
`,R+=` Location: ${_.location||"N/A"}
`,R+=` Description: ${_.description||"N/A"}
`,R+="=".repeat(80)+`

`,R+=` EVENT OVERVIEW
`,R+="-".repeat(40)+`
`,R+=`Total Attendees,${((H=_.attendees)==null?void 0:H.length)||0}
`,R+=`Checked In,${((me=_.attendees)==null?void 0:me.filter(ge=>ge.checked_in).length)||0}
`,R+=`Winners,${S.length}
`,R+=`Check-in Rate,${Math.round(((W=_.attendees)==null?void 0:W.filter(ge=>ge.checked_in).length)/(((I=_.attendees)==null?void 0:I.length)||1)*100)}%
`,R+=`
`,g){R+=` ANALYTICS SUMMARY
`,R+="-".repeat(40)+`
`;const ge=((Ee=_.attendees)==null?void 0:Ee.length)||0,be=((pe=_.attendees)==null?void 0:pe.filter(He=>He.checked_in).length)||0,Be=ge-be;R+=`Check-in Status:
`,R+=`  Checked In: ${be} (${ge>0?(be/ge*100).toFixed(1):"0"}%)
`,R+=`  Not Checked In: ${Be} (${ge>0?(Be/ge*100).toFixed(1):"0"}%)
`;const Re={};(Ce=_.attendees)==null||Ce.forEach(He=>{if(He.checked_in&&He.check_in_time){const nt=new Date(He.check_in_time).getHours();Re[nt]=(Re[nt]||0)+1}});const Ke=Object.entries(Re).map(([He,nt])=>({hour:parseInt(He),count:nt})).sort((He,nt)=>nt.count-He.count).slice(0,3);R+=`
Peak Check-in Hours:
`,Ke.forEach(He=>{R+=`  ${He.hour}:00 - ${He.count} check-ins
`}),R+=`
`}return S.length>0&&(R+=` WINNERS
`,R+="-".repeat(40)+`
`,R+=`Position,Type,Winner Name,Company,Table,Prize
`,S.forEach((ge,be)=>{const Be=ge.table_number?`Table ${ge.table_number}`:"N/A";R+=`${ge.position||be+1},${ge.type.toUpperCase()},${ge.name},${ge.company||"N/A"},${Be},${ge.prize||"N/A"}
`}),R+=`
`),U.length>0&&(R+=`
`+"=".repeat(80)+`
`,R+=` ATTENDEE LIST
`,R+="=".repeat(80)+`
`,R+=`Event: ${_.name}
`,R+=`Report Generated: ${$}
`,R+="=".repeat(80)+`

`,R+=`Name,Email,Phone,Status,Registration Date,Check-in Time,Table Info
`,U.forEach(ge=>{const be=ge.checked_in?" Checked In":" Not Checked",Be=new Date(ge.created_at).toLocaleDateString(),Re=ge.check_in_time?new Date(ge.check_in_time).toLocaleString():"N/A";let Ke="N/A";ge.table_number?(Ke=`Table ${ge.table_number}`,ge.seat_number&&(Ke+=` - Seat ${ge.seat_number}`)):ge.table_assignment&&(Ke=ge.table_assignment),R+=`${ge.name||"N/A"},${ge.email||"N/A"},${ge.phone||"N/A"},${be},${Be},${Re},${Ke}
`}),R+=`
`+"=".repeat(80)+`
`,R+=` Attendee List Summary
`,R+="-".repeat(40)+`
`,R+=` Total Attendees: ${U.length}
`,R+=` Checked In: ${U.filter(ge=>ge.checked_in).length}
`,R+=` Not Checked In: ${U.filter(ge=>!ge.checked_in).length}
`,R+="=".repeat(80)+`
`),R+=`
`+"=".repeat(80)+`
`,R+=` Report Summary
`,R+="-".repeat(40)+`
`,R+=` Total Records: ${U.length+S.length}
`,R+=` Report Type: Premium Event Report
`,R+=` Generated By: Event Management System
`,R+=` Format: Single CSV with Multiple Sections
`,R+=` Analytics Included: ${g?"Yes":"No"}
`,R+="=".repeat(80)+`
`,R},ne=async()=>{try{let _="",S="";switch(d){case"monthly":_=`Month,Events,Attendees,Checked In,New Companies
`,e.forEach(Re=>{_+=`${Re.month},${Re.events},${Re.attendees},${Re.checkedIn},${Re.companies}
`}),_+=`
SUMMARY
`,_+=`Total Events,${N}
`,_+=`Total Attendees,${M}
`,_+=`Total Checked In,${L}
`,_+=`Total New Companies,${J}
`,S=`monthly-report-${i}.csv`;break;case"annual":_=`Report Type,Annual Report
`,_+=`Year,${i}

`,_+=`SUMMARY
`,_+=`Metric,Value
`,_+=`Total Events,${N}
`,_+=`Total Attendees,${M}
`,_+=`Total Checked In,${L}
`,_+=`Total New Companies,${J}

`,_+=`MONTHLY BREAKDOWN
`,_+=`Month,Events,Attendees,Checked In,New Companies
`,e.forEach(Re=>{_+=`${Re.month},${Re.events},${Re.attendees},${Re.checkedIn},${Re.companies}
`}),_+=`
COMPANY PERFORMANCE
`,_+=`Rank,Company Name,Events,Attendees,Checked In
`,n.forEach((Re,Ke)=>{_+=`${Ke+1},${Re.name},${Re.events},${Re.attendees},${Re.checkedIn}
`}),S=`annual-report-${i}.csv`;break;case"event":if(!m){z.error("Please select an event");return}const{data:H,error:me}=await le.from("events").select(`
              id,
              name,
              date,
              description,
              location
            `).eq("id",m).single();if(me){z.error("Error fetching event details");return}const{data:W,error:I}=await le.from("attendees").select(`
              id,
              name,
              email,
              phone,
              checked_in,
              created_at,
              check_in_time
            `).eq("event_id",m);if(I){z.error("Error fetching attendees");return}const Ee={...H,attendees:W||[]};if(me){z.error("Error fetching event details");return}let pe=[];P&&(pe=await E(m));const Ce=xe(Ee,pe,y?Ee.attendees||[]:[]),ge=new Blob([Ce],{type:"text/csv;charset=utf-8;"}),be=URL.createObjectURL(ge),Be=document.createElement("a");Be.href=be,Be.download=`event-report-${H.name.replace(/[^a-zA-Z0-9]/g,"-")}.csv`,document.body.appendChild(Be),Be.click(),document.body.removeChild(Be),URL.revokeObjectURL(be),z.success("Premium CSV report exported successfully!");return}const U=new Blob([_],{type:"text/csv;charset=utf-8;"}),$=URL.createObjectURL(U),R=document.createElement("a");R.href=$,R.download=S,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL($),z.success("CSV report exported successfully!")}catch(_){z.error("Error exporting report: "+_.message)}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Monthly Progress"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Track monthly performance and growth"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsx("select",{value:i,onChange:_=>l(parseInt(_.target.value)),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:5},(_,S)=>new Date().getFullYear()-S).map(_=>s.jsx("option",{value:_,children:_},_))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("select",{value:d,onChange:_=>f(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"monthly",children:"Monthly Report"}),s.jsx("option",{value:"annual",children:"Annual Report"}),s.jsx("option",{value:"event",children:"Event Report"})]}),d==="event"&&s.jsxs(s.Fragment,{children:[s.jsxs("select",{value:m,onChange:_=>v(_.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select Event"}),o.map(_=>s.jsx("option",{value:_.id,children:_.name},_.id))]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"includeAttendees",checked:y,onChange:_=>C(_.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"includeAttendees",className:"text-sm text-gray-700",children:"Include Attendees"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"includeWinners",checked:P,onChange:_=>B(_.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"includeWinners",className:"text-sm text-gray-700",children:"Include Winners"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("input",{type:"checkbox",id:"includeCharts",checked:g,onChange:_=>b(_.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),s.jsx("label",{htmlFor:"includeCharts",className:"text-sm text-gray-700",children:"Include Charts"})]})]}),s.jsxs("button",{onClick:ne,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center gap-2",children:[s.jsx(Ia,{className:"h-4 w-4"}),"Export"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(bt,{className:"h-8 w-8 text-blue-600 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:N}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Events"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(vt,{className:"h-8 w-8 text-green-600 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:M}),s.jsx("div",{className:"text-sm text-gray-600",children:"Total Attendees"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(go,{className:"h-8 w-8 text-purple-600 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:L}),s.jsx("div",{className:"text-sm text-gray-600",children:"Checked In"})]})]})}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Sn,{className:"h-8 w-8 text-orange-600 mr-3"}),s.jsxs("div",{children:[s.jsx("div",{className:"text-2xl font-bold text-gray-900",children:J}),s.jsx("div",{className:"text-sm text-gray-600",children:"New Companies"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Er,{className:"h-6 w-6 mr-2"}),"Monthly Trends (",i,")"]}),c?s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):s.jsxs("div",{className:"relative",children:[s.jsxs("svg",{width:X,height:Q,className:"mx-auto",children:[Array.from({length:5},(_,S)=>s.jsx("line",{x1:ce,y1:ce+S*(Q-2*ce)/4,x2:X-ce,y2:ce+S*(Q-2*ce)/4,stroke:"#e5e7eb",strokeWidth:"1"},S)),Array.from({length:5},(_,S)=>s.jsx("text",{x:ce-10,y:ce+S*(Q-2*ce)/4,textAnchor:"end",className:"text-xs text-gray-500",dy:"0.35em",children:Math.round(se*(4-S)/4)},S)),e.map((_,S)=>s.jsx("text",{x:ce+S*(X-2*ce)/(e.length-1),y:Q-10,textAnchor:"middle",className:"text-xs text-gray-500",children:_.month},S)),s.jsx("path",{d:V(e.map(_=>_.events)),stroke:"#3b82f6",strokeWidth:"2",fill:"none"}),s.jsx("path",{d:V(e.map(_=>_.attendees)),stroke:"#10b981",strokeWidth:"2",fill:"none"}),s.jsx("path",{d:V(e.map(_=>_.checkedIn)),stroke:"#8b5cf6",strokeWidth:"2",fill:"none"}),e.map((_,S)=>{const U=ce+S*(X-2*ce)/(e.length-1);return s.jsxs("g",{children:[s.jsx("circle",{cx:U,cy:Q-ce-_.events/se*(Q-2*ce),r:"3",fill:"#3b82f6"}),s.jsx("circle",{cx:U,cy:Q-ce-_.attendees/se*(Q-2*ce),r:"3",fill:"#10b981"}),s.jsx("circle",{cx:U,cy:Q-ce-_.checkedIn/se*(Q-2*ce),r:"3",fill:"#8b5cf6"})]},S)})]}),s.jsxs("div",{className:"flex justify-center gap-6 mt-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-blue-600 rounded-full"}),s.jsx("span",{children:"Events"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-green-600 rounded-full"}),s.jsx("span",{children:"Attendees"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-3 h-3 bg-purple-600 rounded-full"}),s.jsx("span",{children:"Check-ins"})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Sn,{className:"h-6 w-6 mr-2"}),"Company Performance"]}),s.jsxs("div",{className:"space-y-4",children:[n.slice(0,10).map((_,S)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-8 h-8 bg-blue-600 text-white rounded-full flex items-center justify-center text-sm font-bold mr-3",children:S+1}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium text-gray-900",children:_.name}),s.jsxs("div",{className:"text-sm text-gray-600",children:[_.events," events  ",_.attendees," attendees"]})]})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("div",{className:"text-lg font-bold text-gray-900",children:_.checkedIn}),s.jsx("div",{className:"text-xs text-gray-600",children:"checked in"})]})]},_.id)),n.length===0&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Sn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No company data available"})]})]})]})]})]})}function y_({userCompany:e}){const[t]=Xs(),[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState([]),[c,x]=A.useState(""),[d,f]=A.useState([]),[m,v]=A.useState(!1),[y,C]=A.useState(!1),[P,B]=A.useState(null),[g,b]=A.useState(""),[j,D]=A.useState({title:"",description:"",timer_duration:0}),[w,E]=A.useState({title:"",photo_url:""});A.useEffect(()=>{N()},[]),A.useEffect(()=>{const R=t.get("eventId");R&&n.length>0&&a(R)},[t,n]),A.useEffect(()=>{o&&M()},[o]),A.useEffect(()=>{c&&(L(),J())},[c]);const N=async()=>{try{let R=le.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(R=R.eq("company_id",e.company_id));const{data:H,error:me}=await R.order("created_at",{ascending:!1});if(me)throw me;const W=(H==null?void 0:H.map(I=>({...I,company:Array.isArray(I.company)?I.company[0]:I.company})))||[];r(W),e&&W&&W.length>0&&a(W[0].id)}catch(R){z.error("Error fetching events: "+R.message)}},M=async()=>{try{const{data:R,error:H}=await le.from("voting_sessions").select("*").eq("event_id",o).order("created_at",{ascending:!1});if(H)throw H;l(R)}catch(R){z.error("Error fetching voting sessions: "+R.message)}},L=async()=>{try{const{data:R,error:H}=await le.from("voting_photos").select("*").eq("voting_session_id",c).order("created_at",{ascending:!1});if(H)throw H;const me=await Promise.all(R.map(async W=>{const{data:I}=await le.from("votes").select("id").eq("voting_photo_id",W.id);return{...W,vote_count:(I==null?void 0:I.length)||0}}));f(me)}catch(R){z.error("Error fetching photos: "+R.message)}},J=async()=>{try{const R=`${window.location.origin}/public/voting/${c}`,H=await qn.toDataURL(R);b(H)}catch(R){console.error("Error generating QR code:",R)}},se=async R=>{R.preventDefault();try{if(P){const{error:H}=await le.from("voting_sessions").update({title:j.title,description:j.description||null,timer_duration:j.timer_duration>0?j.timer_duration:null}).eq("id",P.id);if(H)throw H;z.success("Voting session updated successfully")}else{const{error:H}=await le.from("voting_sessions").insert([{event_id:o,title:j.title,description:j.description||null,timer_duration:j.timer_duration>0?j.timer_duration:null}]);if(H)throw H;z.success("Voting session created successfully")}_(),M()}catch(H){z.error("Error saving voting session: "+H.message)}},X=async R=>{R.preventDefault();try{const{error:H}=await le.from("voting_photos").insert([{voting_session_id:c,title:w.title,photo_url:w.photo_url}]);if(H)throw H;z.success("Photo added successfully"),S(),L()}catch(H){z.error("Error adding photo: "+H.message)}},Q=async(R,H)=>{try{H&&await le.from("voting_sessions").update({is_active:!1}).eq("event_id",o);const{error:me}=await le.from("voting_sessions").update({is_active:H,timer_start:H?new Date().toISOString():null}).eq("id",R);if(me)throw me;z.success(`Voting session ${H?"activated":"deactivated"}`),M()}catch(me){z.error("Error updating session status: "+me.message)}},ce=async R=>{if(confirm("Are you sure you want to delete this voting session? This will also delete all photos and votes."))try{const{error:H}=await le.from("voting_sessions").delete().eq("id",R);if(H)throw H;z.success("Voting session deleted successfully"),M(),c===R&&(x(""),f([]))}catch(H){z.error("Error deleting session: "+H.message)}},V=async R=>{if(confirm("Are you sure you want to delete this photo? This will also delete all votes for it."))try{const{error:H}=await le.from("voting_photos").delete().eq("id",R);if(H)throw H;z.success("Photo deleted successfully"),L()}catch(H){z.error("Error deleting photo: "+H.message)}},xe=async R=>{if(confirm("Are you sure you want to reset all votes for this voting session? This action cannot be undone."))try{const{data:H,error:me}=await le.from("voting_photos").select("id").eq("voting_session_id",R);if(me)throw me;if(H&&H.length>0){const W=H.map(Ee=>Ee.id),{error:I}=await le.from("votes").delete().in("voting_photo_id",W);if(I)throw I}z.success("All votes have been reset successfully"),L()}catch(H){z.error("Error resetting votes: "+H.message)}},ne=async(R,H)=>{if(confirm(`Are you sure you want to reset all votes for "${H}"? This action cannot be undone.`))try{const{error:me}=await le.from("votes").delete().eq("voting_photo_id",R);if(me)throw me;z.success(`Votes for "${H}" have been reset successfully`),L()}catch(me){z.error("Error resetting photo votes: "+me.message)}},_=()=>{D({title:"",description:"",timer_duration:0}),B(null),v(!1)},S=()=>{E({title:"",photo_url:""}),C(!1)},U=R=>{B(R),D({title:R.title,description:R.description||"",timer_duration:R.timer_duration||0}),v(!0)},$=async R=>{var me;const H=(me=R.target.files)==null?void 0:me[0];if(H){if(H.size>10*1024*1024){z.error("File size must be less than 10MB");return}if(!H.type.startsWith("image/")){z.error("Please select an image file");return}try{const W=new FileReader;W.onload=I=>{var pe;const Ee=(pe=I.target)==null?void 0:pe.result;E({...w,photo_url:Ee})},W.readAsDataURL(H)}catch(W){z.error("Error uploading file: "+W.message)}}};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voting Administration"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Manage voting sessions and photos"})]}),s.jsxs("button",{onClick:()=>v(!0),disabled:!o,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50",children:[s.jsx(Sr,{className:"h-5 w-5 mr-2"}),"New Voting Session"]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:e&&n.length<=1?"Event":"Select Event"}),e&&n.length===1?s.jsx("div",{className:"w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-md text-gray-900",children:n[0].name}):s.jsxs("select",{value:o,onChange:R=>a(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[!e&&s.jsx("option",{value:"",children:"Select an event"}),n.map(R=>s.jsx("option",{value:R.id,children:e?R.name:`${R.name} (${R.company.name})`},R.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Voting Session"}),s.jsxs("select",{value:c,onChange:R=>x(R.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Select a voting session"}),i.map(R=>s.jsxs("option",{value:R.id,children:[R.title," ",R.is_active&&"(Active)"]},R.id))]})]})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Vn,{className:"h-6 w-6 mr-2"}),"Voting Sessions"]}),s.jsxs("div",{className:"space-y-3",children:[i.map(R=>s.jsxs("div",{className:`p-4 border rounded-lg ${R.is_active?"border-green-500 bg-green-50":"border-gray-200"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-gray-900",children:R.title}),R.description&&s.jsx("p",{className:"text-sm text-gray-600",children:R.description})]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>Q(R.id,!R.is_active),className:`p-1 rounded ${R.is_active?"text-red-600 hover:text-red-700":"text-green-600 hover:text-green-700"}`,children:R.is_active?s.jsx(UB,{className:"h-4 w-4"}):s.jsx(Hc,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>U(R),className:"text-gray-400 hover:text-blue-600 transition-colors",children:s.jsx(pr,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>xe(R.id),className:"text-gray-400 hover:text-orange-600 transition-colors",title:"Reset all votes",children:s.jsx(Ba,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>ce(R.id),className:"text-gray-400 hover:text-red-600 transition-colors",children:s.jsx(is,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Created ",new Date(R.created_at).toLocaleDateString(),R.timer_duration&&R.timer_duration>0&&s.jsxs("span",{className:"ml-2 text-blue-600",children:[" Timer: ",R.timer_duration," minutes"]})]})]},R.id)),i.length===0&&o&&s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsx(Vn,{className:"h-12 w-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{children:"No voting sessions yet"})]})]})]}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h2",{className:"text-xl font-semibold flex items-center",children:[s.jsx(Nn,{className:"h-6 w-6 mr-2"}),"Voting Photos"]}),s.jsxs("div",{className:"flex space-x-2",children:[d.length>0&&s.jsxs("button",{onClick:()=>xe(c),className:"bg-orange-600 text-white px-4 py-2 rounded-lg hover:bg-orange-700 transition-colors flex items-center",title:"Reset all votes for this session",children:[s.jsx(Ba,{className:"h-5 w-5 mr-2"}),"Reset All Votes"]}),s.jsxs("button",{onClick:()=>C(!0),disabled:!c,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center disabled:opacity-50",children:[s.jsx(Sr,{className:"h-5 w-5 mr-2"}),"Add Photo"]})]})]}),c&&g&&s.jsx("div",{className:"mb-6 p-4 bg-blue-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"Voting QR Code"}),s.jsx("p",{className:"text-sm text-blue-700",children:"Share this QR code for attendees to vote"}),s.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["URL: ",window.location.origin,"/public/voting/",c]})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:g,alt:"Voting QR Code",className:"w-24 h-24 border rounded-lg mx-auto mb-2"}),s.jsx("button",{onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/public/voting/${c}`),z.success("Voting URL copied to clipboard!")},className:"text-xs bg-blue-600 text-white px-2 py-1 rounded hover:bg-blue-700",children:"Copy URL"})]})]})}),d.length>0?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.map(R=>s.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[s.jsx("img",{src:Tt(R.photo_url),alt:R.title,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h3",{className:"font-medium text-gray-900 mb-2",children:R.title}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-gray-600",children:[R.vote_count," votes"]}),s.jsxs("div",{className:"flex space-x-1",children:[s.jsx("button",{onClick:()=>ne(R.id,R.title),className:"text-orange-600 hover:text-orange-700",title:"Reset votes for this photo",children:s.jsx(Ba,{className:"h-4 w-4"})}),s.jsx("button",{onClick:()=>V(R.id),className:"text-red-600 hover:text-red-700",children:s.jsx(is,{className:"h-4 w-4"})})]})]})]})]},R.id))}):c?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Nn,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"No photos added yet"}),s.jsx("p",{className:"text-sm",children:"Add photos for attendees to vote on"})]}):s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Vn,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select a voting session to manage photos"})]})]})})]}),m&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:P?"Edit Voting Session":"Create Voting Session"}),s.jsxs("form",{onSubmit:se,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Title *"}),s.jsx("input",{type:"text",value:j.title,onChange:R=>D({...j,title:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter voting session title",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),s.jsx("textarea",{value:j.description,onChange:R=>D({...j,description:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3,placeholder:"Enter description (optional)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Timer Duration (minutes)"}),s.jsx("input",{type:"number",min:"0",value:j.timer_duration,onChange:R=>D({...j,timer_duration:parseInt(R.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter timer duration in minutes (0 = no timer)"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Set to 0 for no timer"})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:_,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:P?"Update Session":"Create Session"})]})]})]})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Add Voting Photo"}),s.jsxs("form",{onSubmit:X,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Photo Title *"}),s.jsx("input",{type:"text",value:w.title,onChange:R=>E({...w,title:R.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter photo title",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photo *"}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-4 text-center",children:w.photo_url?s.jsxs("div",{className:"space-y-2",children:[s.jsx("img",{src:w.photo_url,alt:"Preview",className:"max-w-full h-32 object-contain mx-auto rounded"}),s.jsx("button",{type:"button",onClick:()=>E({...w,photo_url:""}),className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):s.jsxs("div",{children:[s.jsx(xu,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Click to upload photo"}),s.jsx("input",{type:"file",accept:"image/*",onChange:$,className:"hidden",id:"photo-upload"}),s.jsx("label",{htmlFor:"photo-upload",className:"inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[s.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancel"}),s.jsx("button",{type:"submit",disabled:!w.photo_url,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:"Add Photo"})]})]})]})})]})}function v_({userCompany:e}){const[t,n]=A.useState([]),[r,o]=A.useState(""),[a,i]=A.useState([]),[l,c]=A.useState(0),[x,d]=A.useState(0),[f,m]=A.useState(!1),[v,y]=A.useState(0),[C,P]=A.useState(""),[B,g]=A.useState(null),[b,j]=A.useState(null),[D,w]=A.useState(!1),[E,N]=A.useState(!1);A.useEffect(()=>{M()},[]),A.useEffect(()=>{if(r&&(se(),!E)){const V=le.channel(`voting-${r}`).on("postgres_changes",{event:"*",schema:"public",table:"votes"},xe=>{console.log("Vote change detected:",xe),setTimeout(()=>{J(!1)},100)}).on("postgres_changes",{event:"*",schema:"public",table:"voting_photos"},xe=>{console.log("Photo change detected:",xe),setTimeout(()=>{J(!1)},100)}).subscribe();return()=>{V.unsubscribe()}}},[r,E]),A.useEffect(()=>{r&&X()},[r]),A.useEffect(()=>{if(a.length>0){const V=setInterval(()=>{y(xe=>(xe+1)%a.length)},5e3);return()=>clearInterval(V)}},[a.length]),A.useEffect(()=>{if(r){const V=t.find(xe=>xe.id===r);if(V!=null&&V.timer_duration&&(V!=null&&V.timer_start)){const xe=new Date(V.timer_start).getTime(),ne=V.timer_duration*60*1e3,_=xe+ne,S=Date.now();if(S<_){const U=Math.max(0,Math.floor((_-S)/1e3));g(U);const $=setInterval(()=>{const R=Date.now();if(R<_){const H=Math.max(0,Math.floor((_-R)/1e3));g(H)}else g(0),N(!0),clearInterval($)},1e3);return()=>clearInterval($)}else g(0),N(!0)}else g(null),N(!1)}},[r,t]),A.useEffect(()=>{},[E]),A.useEffect(()=>{a.length>0?L():d(0)},[a]),A.useEffect(()=>{const V=()=>{m(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",V),document.addEventListener("webkitfullscreenchange",V),document.addEventListener("mozfullscreenchange",V),()=>{document.removeEventListener("fullscreenchange",V),document.removeEventListener("webkitfullscreenchange",V),document.removeEventListener("mozfullscreenchange",V)}},[]),A.useEffect(()=>{if(r&&!E){const V=setInterval(()=>{console.log("Periodic refresh triggered"),J(!1)},5e3);return()=>clearInterval(V)}},[r,E]);const M=async()=>{try{let V=le.from("voting_sessions").select(`
          id,
          title,
          description,
          timer_duration,
          timer_start,
          event_id,
          events!inner(
            id,
            name,
            company_id,
            custom_background,
            custom_logo,
            companies!inner(name)
          )
        `).eq("is_active",!0);if(e){const{data:S}=await le.from("events").select("id").eq("company_id",e.company_id),U=(S==null?void 0:S.map($=>$.id))||[];U.length>0&&(V=V.in("event_id",U))}const{data:xe,error:ne}=await V.order("created_at",{ascending:!1});if(ne)throw ne;const _=(xe==null?void 0:xe.map(S=>{console.log("Raw session data:",S),console.log("Session events:",S.events);let U=S.events;return Array.isArray(U)&&(U=U[0]),console.log("Processed event data:",U),{...S,event:{id:U==null?void 0:U.id,name:U==null?void 0:U.name,custom_background:U==null?void 0:U.custom_background,custom_logo:U==null?void 0:U.custom_logo,company:Array.isArray(U==null?void 0:U.companies)?U.companies[0]:U==null?void 0:U.companies}}}))||[];n(_)}catch(V){console.error("Error fetching voting sessions:",V)}},L=async()=>{try{if(a.length===0){d(0);return}const{data:V,error:xe}=await le.from("votes").select("attendee_id").in("voting_photo_id",a.map(_=>_.id));if(xe)throw xe;const ne=new Set((V==null?void 0:V.map(_=>_.attendee_id))||[]);d(ne.size)}catch(V){console.error("Error fetching total participants:",V),d(0)}},J=async(V=!1)=>{try{V&&w(!0),console.log("Updating statistics for session:",r);const{data:xe,error:ne}=await le.from("voting_photos").select("*").eq("voting_session_id",r).order("created_at",{ascending:!1});if(ne)throw ne;if(!xe||xe.length===0){console.log("No photos found, clearing data"),i([]),c(0),d(0);return}console.log("Found photos:",xe.length);const _=await Promise.all(xe.map(async $=>{const{data:R,error:H}=await le.from("votes").select("id").eq("voting_photo_id",$.id);H&&console.error("Error fetching votes for photo:",$.id,H);const me=(R==null?void 0:R.length)||0;return console.log(`Photo ${$.title}: ${me} votes`),{...$,vote_count:me}})),S=_.reduce(($,R)=>$+R.vote_count,0);console.log("Total votes:",S);const U=_.map($=>({...$,vote_percentage:S>0?$.vote_count/S*100:0}));U.sort(($,R)=>R.vote_count-$.vote_count),console.log("Updated photos with percentages:",U),c($=>($!==S&&console.log(`Votes updated: ${$}  ${S}`),S)),i($=>(JSON.stringify($)!==JSON.stringify(U)&&console.log("Photos updated with smooth transition"),U)),await L(),j(new Date),console.log("Statistics updated successfully")}catch(xe){console.error("Error updating statistics:",xe)}finally{V&&w(!1)}},se=async()=>{if(r)try{const{data:V,error:xe}=await le.from("voting_photos").select("*").eq("voting_session_id",r).order("created_at",{ascending:!1});if(xe)throw xe;if(!V||V.length===0){console.log("No photos found, clearing data"),i([]),c(0),d(0);return}console.log("Found photos:",V.length);const ne=await Promise.all(V.map(async U=>{const{data:$,error:R}=await le.from("votes").select("id").eq("voting_photo_id",U.id);R&&console.error("Error fetching votes for photo:",U.id,R);const H=($==null?void 0:$.length)||0;return console.log(`Photo ${U.title}: ${H} votes`),{...U,vote_count:H}})),_=ne.reduce((U,$)=>U+$.vote_count,0);console.log("Total votes:",_);const S=ne.map(U=>({...U,vote_percentage:_>0?U.vote_count/_*100:0}));S.sort((U,$)=>$.vote_count-U.vote_count),console.log("Updated photos with percentages:",S),c(U=>(U!==_&&console.log(`Votes updated: ${U}  ${_}`),_)),i(U=>(JSON.stringify(U)!==JSON.stringify(S)&&console.log("Photos updated with smooth transition"),S)),await L(),j(new Date),console.log("Statistics updated successfully")}catch(V){console.error("Error updating statistics:",V)}},X=async()=>{try{const V=`${window.location.origin}/public/voting/${r}`,xe=await qn.toDataURL(V,{width:200,margin:2,errorCorrectionLevel:"M"});P(xe)}catch(V){console.error("Error generating QR code:",V),P("")}},Q=async()=>{try{f?(document.exitFullscreen?await document.exitFullscreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.mozCancelFullScreen&&await document.mozCancelFullScreen(),m(!1)):(document.documentElement.requestFullscreen?await document.documentElement.requestFullscreen():document.documentElement.webkitRequestFullscreen?await document.documentElement.webkitRequestFullscreen():document.documentElement.mozRequestFullScreen&&await document.documentElement.mozRequestFullScreen(),m(!0))}catch(V){console.error("Fullscreen error:",V),m(!f)}},ce=()=>{var ne,_,S,U,$,R,H,me,W,I,Ee,pe,Ce,ge,be,Be,Re,Ke,He,nt,mt,pt,ie,Ne;const V=t.find(ze=>ze.id===r);console.log("Session:",V),console.log("Event:",V==null?void 0:V.event),console.log("Custom background:",(ne=V==null?void 0:V.event)==null?void 0:ne.custom_background),console.log("Custom logo:",(_=V==null?void 0:V.event)==null?void 0:_.custom_logo);const xe=(S=V==null?void 0:V.event)!=null&&S.custom_background?{backgroundImage:V.event.custom_background.startsWith("blob:")?`url(${V.event.custom_background})`:`url(${Tt(V.event.custom_background)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{backgroundColor:"#f8fafc",background:"linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%)"};return s.jsxs("div",{className:"h-full text-gray-900 relative overflow-hidden",style:xe,children:[((U=V==null?void 0:V.event)==null?void 0:U.custom_background)&&s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-70"}),s.jsxs("div",{className:"relative z-10 h-full",children:[B===0&&E?s.jsx("div",{className:"flex justify-center items-center py-10",children:s.jsx("div",{className:"bg-white bg-opacity-95 rounded-2xl px-10 py-8 shadow-2xl border border-gray-200 flex flex-col items-center min-w-[320px] max-w-[420px]",children:s.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold mb-3 text-gray-900 tracking-tight text-center",children:(($=t.find(ze=>ze.id===r))==null?void 0:$.title)||"Voting Title"})})}):s.jsxs("div",{className:"flex justify-center items-center gap-12 py-10",children:[s.jsxs("div",{className:"bg-white bg-opacity-95 rounded-2xl px-10 py-8 shadow-2xl border border-gray-200 flex flex-col items-center min-w-[320px] max-w-[420px]",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-extrabold mb-3 text-gray-900 tracking-tight text-center",children:((R=V==null?void 0:V.event)==null?void 0:R.name)||"Event Name"}),s.jsx("div",{className:"text-lg md:text-2xl font-bold text-purple-600 mb-2 text-center",children:((H=t.find(ze=>ze.id===r))==null?void 0:H.title)||"Voting Title"}),((W=(me=V==null?void 0:V.event)==null?void 0:me.company)==null?void 0:W.name)&&s.jsx("div",{className:"text-base md:text-lg font-semibold text-gray-700 text-center opacity-80 mb-2",children:((Ee=(I=V.event)==null?void 0:I.company)==null?void 0:Ee.name)??"No Company"}),((pe=V==null?void 0:V.event)==null?void 0:pe.custom_logo)&&s.jsx("img",{src:Tt(V.event.custom_logo),alt:"Event Logo",className:"h-16 mt-2 object-contain mx-auto"})]}),C&&s.jsxs("div",{className:"bg-white bg-opacity-95 rounded-2xl px-10 py-8 shadow-2xl border border-gray-200 flex flex-col items-center min-w-[240px] max-w-[320px]",children:[s.jsx("div",{className:"mb-3 text-center",children:s.jsx("span",{className:"text-gray-900 font-bold text-lg tracking-wide",children:"Scan to Vote"})}),s.jsx("img",{src:C,alt:"Voting QR Code",className:"w-40 h-40 mx-auto border-2 border-gray-300 rounded-xl shadow-lg bg-white"}),s.jsx("p",{className:"text-gray-700 text-base mt-4 opacity-80 text-center font-medium",children:"Scan with your phone"})]})]}),B!==0&&!E&&s.jsx("div",{className:"mt-6",children:s.jsxs("div",{className:"flex justify-center space-x-12 text-lg md:text-xl",children:[s.jsxs("div",{className:"flex items-center space-x-3 bg-white bg-opacity-95 rounded-xl px-6 py-3 shadow-lg border border-gray-200",children:[s.jsx(Er,{className:"h-6 w-6 text-purple-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:"Votes: "}),s.jsx(Ue.span,{initial:{scale:1.2,color:"#8b5cf6"},animate:{scale:1,color:"#111827"},transition:{duration:.6,ease:"easeOut"},className:"font-bold text-purple-600",children:l},`votes-${l}`)]}),s.jsxs("div",{className:"flex items-center space-x-3 bg-white bg-opacity-95 rounded-xl px-6 py-3 shadow-lg border border-gray-200",children:[s.jsx(Vn,{className:"h-6 w-6 text-purple-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:"Participants: "}),s.jsx(Ue.span,{initial:{scale:1.2,color:"#8b5cf6"},animate:{scale:1,color:"#111827"},transition:{duration:.6,ease:"easeOut"},className:"font-bold text-purple-600",children:x},`participants-${x}`)]}),B!==null&&s.jsx("div",{className:"flex items-center space-x-3 bg-white bg-opacity-95 rounded-xl px-6 py-3 shadow-lg border border-gray-200",children:s.jsxs(Ue.span,{initial:{scale:1.2,color:"#8b5cf6"},animate:{scale:1,color:"#111827"},transition:{duration:.6,ease:"easeOut"},className:"font-bold text-purple-600",children:[Math.floor(B/60),":",(B%60).toString().padStart(2,"0")]},`timer-${B}`)})]})}),a.length>0&&s.jsx("div",{className:"mt-8 px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:B===0&&E&&a.length>=3?s.jsxs(Ue.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"mb-8",children:[s.jsx("h2",{className:"text-5xl font-bold text-center text-gray-900 mb-12",children:" FINAL RESULTS "}),s.jsxs("div",{className:"flex justify-center items-end space-x-8 h-96",children:[s.jsxs(Ue.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{duration:1,delay:.7,ease:"easeOut"},className:"flex flex-col items-center",children:[s.jsx("div",{className:"bg-gray-300 rounded-t-lg w-48 h-48 flex items-center justify-center shadow-xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-6xl mb-4",children:""}),s.jsx("div",{className:"text-2xl font-bold text-gray-700",children:"2nd PLACE"})]})}),s.jsxs("div",{className:"bg-white rounded-xl p-6 mt-4 shadow-xl border border-gray-200 w-48",children:[s.jsx("img",{src:Tt((Ce=a[1])==null?void 0:Ce.photo_url),alt:(ge=a[1])==null?void 0:ge.title,className:"w-full h-32 object-cover rounded-lg mb-4"}),s.jsx("div",{className:"text-lg font-bold text-gray-900 truncate mb-2",children:(be=a[1])==null?void 0:be.title}),s.jsxs("div",{className:"text-xl text-purple-600 font-bold",children:[(Be=a[1])==null?void 0:Be.vote_count," votes"]})]})]}),s.jsxs(Ue.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{duration:1,delay:1.5,ease:"easeOut"},className:"flex flex-col items-center",children:[s.jsx("div",{className:"bg-yellow-400 rounded-t-lg w-56 h-56 flex items-center justify-center shadow-xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-7xl mb-4",children:""}),s.jsx("div",{className:"text-3xl font-bold text-gray-700",children:"1st PLACE"})]})}),s.jsxs("div",{className:"bg-white rounded-xl p-6 mt-4 shadow-xl border border-gray-200 w-56",children:[s.jsx("img",{src:Tt((Re=a[0])==null?void 0:Re.photo_url),alt:(Ke=a[0])==null?void 0:Ke.title,className:"w-full h-40 object-cover rounded-lg mb-4"}),s.jsx("div",{className:"text-xl font-bold text-gray-900 truncate mb-2",children:(He=a[0])==null?void 0:He.title}),s.jsxs("div",{className:"text-2xl text-purple-600 font-bold",children:[(nt=a[0])==null?void 0:nt.vote_count," votes"]})]})]}),s.jsxs(Ue.div,{initial:{opacity:0,y:100},animate:{opacity:1,y:0},transition:{duration:1,delay:.3,ease:"easeOut"},className:"flex flex-col items-center",children:[s.jsx("div",{className:"bg-amber-600 rounded-t-lg w-48 h-32 flex items-center justify-center shadow-xl",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-5xl mb-2",children:""}),s.jsx("div",{className:"text-xl font-bold text-gray-700",children:"3rd PLACE"})]})}),s.jsxs("div",{className:"bg-white rounded-xl p-6 mt-4 shadow-xl border border-gray-200 w-48",children:[s.jsx("img",{src:Tt((mt=a[2])==null?void 0:mt.photo_url),alt:(pt=a[2])==null?void 0:pt.title,className:"w-full h-32 object-cover rounded-lg mb-4"}),s.jsx("div",{className:"text-lg font-bold text-gray-900 truncate mb-2",children:(ie=a[2])==null?void 0:ie.title}),s.jsxs("div",{className:"text-xl text-purple-600 font-bold",children:[(Ne=a[2])==null?void 0:Ne.vote_count," votes"]})]})]})]}),s.jsxs("div",{className:"flex justify-center space-x-12 text-lg md:text-xl mt-8",children:[s.jsxs("div",{className:"flex items-center space-x-3 bg-white bg-opacity-95 rounded-xl px-6 py-3 shadow-lg border border-gray-200",children:[s.jsx(Er,{className:"h-6 w-6 text-purple-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:"Total Votes: "}),s.jsx("span",{className:"font-bold text-purple-600",children:l})]}),s.jsxs("div",{className:"flex items-center space-x-3 bg-white bg-opacity-95 rounded-xl px-6 py-3 shadow-lg border border-gray-200",children:[s.jsx(Vn,{className:"h-6 w-6 text-purple-600"}),s.jsx("span",{className:"font-semibold text-gray-900",children:"Total Participants: "}),s.jsx("span",{className:"font-bold text-purple-600",children:x})]})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Voting Results"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:a.map((ze,Me)=>s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[s.jsx("img",{src:Tt(ze.photo_url),alt:ze.title,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:ze.title}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Votes"}),s.jsxs("div",{className:"flex items-center space-x-1",children:[s.jsx(Ue.span,{initial:{scale:1.2,color:"#8b5cf6"},animate:{scale:1,color:"#111827"},transition:{duration:.6,ease:"easeOut"},className:"text-sm font-bold text-purple-600",children:ze.vote_count},`vote-count-${ze.id}-${ze.vote_count}`),s.jsx("span",{className:"text-sm text-gray-500",children:"("}),s.jsx(Ue.span,{initial:{scale:1.2,color:"#8b5cf6"},animate:{scale:1,color:"#111827"},transition:{duration:.6,ease:"easeOut"},className:"text-sm font-bold text-purple-600",children:ze.vote_percentage.toFixed(1)},`vote-percentage-${ze.id}-${ze.vote_percentage}`),s.jsx("span",{className:"text-sm text-gray-500",children:"%)"})]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:s.jsx(Ue.div,{className:"h-3 rounded-full bg-purple-500",initial:{width:0},animate:{width:`${ze.vote_percentage}%`},transition:{duration:1.2,delay:.3,ease:"easeOut"}},`progress-${ze.id}-${ze.vote_percentage}`)})]})]})]},ze.id))})]})})})]})]})};return f?s.jsxs("div",{className:"fixed inset-0 z-50 bg-gray-900",children:[s.jsx(ce,{}),s.jsx("button",{onClick:Q,className:"absolute top-4 right-4 bg-black bg-opacity-70 text-white p-3 rounded-lg hover:bg-opacity-90 transition-colors z-10",children:"Exit Fullscreen"})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-8",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Voting Monitor"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Display live voting results"})]}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsxs("button",{onClick:()=>J(!0),disabled:!r||D,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(Ue.div,{animate:{rotate:D?360:0},transition:{duration:1,repeat:D?1/0:0,ease:"linear"},children:s.jsx(_l,{className:"h-5 w-5 mr-2"})}),D?"Refreshing...":"Refresh Data"]}),s.jsxs("button",{onClick:Q,disabled:!r,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 transition-colors flex items-center disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx(wr,{className:"h-5 w-5 mr-2"}),"Fullscreen Monitor"]})]})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-md p-6 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Active Voting Session"}),s.jsxs("select",{value:r,onChange:V=>o(V.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[s.jsx("option",{value:"",children:"Select an active voting session"}),t.map(V=>s.jsxs("option",{value:V.id,children:[V.title," - ",V.event.name]},V.id))]})]}),r&&s.jsx("div",{className:"flex items-end",children:s.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 w-full",children:[s.jsx("div",{className:"text-sm text-purple-600 font-medium",children:"Live Stats"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900",children:l}),s.jsx("div",{className:"text-sm text-purple-600",children:"Total Votes Cast"}),b&&s.jsxs("div",{className:"text-xs text-purple-500 mt-1",children:["Last updated: ",b.toLocaleTimeString()]})]})})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center",children:[s.jsx(Er,{className:"h-6 w-6 mr-2"}),"Monitor Preview"]}),s.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden",children:r?s.jsx(ce,{}):s.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Vn,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Select an active voting session to see preview"})]})})}),s.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[s.jsx("p",{children:" This preview shows how the voting monitor will appear"}),s.jsx("p",{children:' Click "Fullscreen Monitor" to display on external screen'}),s.jsx("p",{children:" Results update automatically in real-time"}),s.jsx("p",{children:" Photos rotate every 5 seconds in fullscreen mode"})]})]})]})}function E_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})}function b_(){const{eventId:e}=Lo(),t=ds(),[n,r]=A.useState(null),[o,a]=A.useState(!0),[i,l]=A.useState(!1),[c,x]=A.useState({name:"",email:"",phone:"",identification_number:"",staff_id:""}),[d,f]=A.useState(null),[m,v]=A.useState(!1),y=A.useRef(null),C=A.useRef(null),P=A.useRef(null);A.useEffect(()=>{e&&B()},[e]);const B=async()=>{try{const{data:N,error:M}=await le.from("events").select("*").eq("id",e).single();if(M)throw M;r(N)}catch{z.error("Event not found"),t("/")}finally{a(!1)}},g=async()=>{try{const N=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user",width:{ideal:640},height:{ideal:480}}});y.current&&(y.current.srcObject=N,v(!0))}catch{z.error("Camera access denied")}},b=()=>{var N;(N=y.current)!=null&&N.srcObject&&y.current.srcObject.getTracks().forEach(L=>L.stop()),v(!1)},j=()=>{if(y.current&&C.current){const N=y.current,M=C.current,L=M.getContext("2d");if(L){M.width=N.videoWidth,M.height=N.videoHeight,L.drawImage(N,0,0);const J=M.toDataURL("image/jpeg",.8);f(J),b()}}},D=N=>{var L;const M=(L=N.target.files)==null?void 0:L[0];if(M){const J=new FileReader;J.onload=se=>{var X;f((X=se.target)==null?void 0:X.result)},J.readAsDataURL(M)}},w=()=>{f(null)},E=async N=>{if(N.preventDefault(),!(!n||!c.name.trim()||!c.identification_number.trim())){l(!0);try{const{data:M,error:L}=await le.from("attendees").select("id, name").eq("event_id",n.id).eq("identification_number",c.identification_number).single();if(L&&L.code!=="PGRST116")throw L;if(M){z.error(`Registration failed: An attendee with ID ${c.identification_number} is already registered for this event.`),l(!1);return}const J=E_(),se=`${J}|${n.id}|${c.name}`,X=await qn.toDataURL(se,{width:200,margin:1,errorCorrectionLevel:"L"});let Q=null;if(d)try{const V=await fetch(d).then(_=>_.blob()),xe=`face_photos/${J}.jpg`,{error:ne}=await le.storage.from("attendee-photos").upload(xe,V,{contentType:"image/jpeg"});if(ne)console.error("Error uploading photo:",ne);else{const{data:{publicUrl:_}}=le.storage.from("attendee-photos").getPublicUrl(xe);Q=_}}catch(V){console.error("Error processing face photo:",V)}const{error:ce}=await le.from("attendees").insert([{id:J,event_id:n.id,name:c.name,email:c.email||null,phone:c.phone||null,identification_number:c.identification_number,staff_id:c.staff_id||null,table_type:"Regular",qr_code:X,face_photo_url:Q}]);if(ce)throw ce;z.success("Registration successful!"),t(`/public/ticket/${J}`)}catch(M){z.error("Registration failed: "+M.message)}finally{l(!1)}}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full",children:[s.jsx("h1",{className:"text-2xl font-bold text-center mb-2",children:"Event Registration"}),s.jsxs("div",{className:"mb-6 text-center",children:[s.jsx("div",{className:"text-lg font-semibold",children:n.name}),n.date&&s.jsxs("div",{className:"text-gray-500 flex items-center justify-center",children:[s.jsx(bt,{className:"h-4 w-4 mr-1"}),new Date(n.date).toLocaleString()]}),n.location&&s.jsxs("div",{className:"text-gray-500 flex items-center justify-center",children:[s.jsx(tn,{className:"h-4 w-4 mr-1"}),n.location]})]}),s.jsxs("form",{onSubmit:E,className:"space-y-4",children:[s.jsx("input",{type:"text",value:c.name,onChange:N=>x({...c,name:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Full Name *",required:!0}),s.jsx("input",{type:"email",value:c.email,onChange:N=>x({...c,email:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Email"}),s.jsx("input",{type:"tel",value:c.phone,onChange:N=>x({...c,phone:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Phone Number"}),s.jsx("input",{type:"text",value:c.identification_number,onChange:N=>x({...c,identification_number:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Identification Number *",required:!0}),s.jsx("input",{type:"text",value:c.staff_id,onChange:N=>x({...c,staff_id:N.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Staff ID (Optional)"}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Face Photo (Optional)"}),!d&&!m&&s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("button",{type:"button",onClick:g,className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center justify-center",children:[s.jsx(gr,{className:"h-4 w-4 mr-2"}),"Take Photo"]}),s.jsxs("button",{type:"button",onClick:()=>{var N;return(N=P.current)==null?void 0:N.click()},className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center justify-center",children:[s.jsx(xu,{className:"h-4 w-4 mr-2"}),"Upload Photo"]})]}),m&&s.jsxs("div",{className:"relative",children:[s.jsxs("div",{className:"relative bg-black rounded-lg overflow-hidden",children:[s.jsx("video",{ref:y,autoPlay:!0,playsInline:!0,className:"w-full h-64 object-cover"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsx("div",{className:"w-48 h-48 border-4 border-white rounded-full opacity-80"})}),s.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:s.jsxs("button",{type:"button",onClick:j,className:"bg-white text-black px-6 py-2 rounded-full hover:bg-gray-100 flex items-center",children:[s.jsx(gr,{className:"h-4 w-4 mr-2"}),"Capture"]})}),s.jsx("button",{type:"button",onClick:b,className:"absolute top-2 right-2 bg-red-600 text-white p-2 rounded-full hover:bg-red-700",children:s.jsx(Ra,{className:"h-4 w-4"})})]}),s.jsx("canvas",{ref:C,className:"hidden"})]}),d&&s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:d,alt:"Face photo",className:"w-32 h-32 object-cover rounded-lg border-2 border-gray-300"}),s.jsx("button",{type:"button",onClick:w,className:"absolute -top-2 -right-2 bg-red-600 text-white p-1 rounded-full hover:bg-red-700",children:s.jsx(Ra,{className:"h-3 w-3"})})]}),s.jsx("input",{ref:P,type:"file",accept:"image/*",onChange:D,className:"hidden"})]}),s.jsx("button",{type:"submit",className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors font-semibold",disabled:i,children:i?"Registering...":"Register for Event"})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Event Not Found"}),s.jsx("p",{className:"text-gray-600",children:"The event you're looking for doesn't exist."})]})})}function w_(){const{attendeeId:e}=Lo(),[t,n]=A.useState(null),[r,o]=A.useState(!0);A.useEffect(()=>{e&&a()},[e]);const a=async()=>{try{const{data:i,error:l}=await le.from("attendees").select(`
          *,
          event:events (
            name,
            description,
            date,
            location
          )
        `).eq("id",e).single();if(l)throw l;n(i)}catch{z.error("Ticket not found")}finally{o(!1)}};return r?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t?s.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-4 md:px-6 py-6 md:py-8 text-center",children:[s.jsx(Qt,{className:"h-12 w-12 mx-auto mb-4"}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold",children:"Event Ticket"}),t.checked_in&&s.jsxs("div",{className:"mt-4 flex items-center justify-center text-green-200",children:[s.jsx(br,{className:"h-5 w-5 mr-2"}),s.jsx("span",{children:"Checked In"})]})]}),s.jsxs("div",{className:"px-4 md:px-6 py-6 border-b border-gray-200",children:[s.jsx("h2",{className:"text-lg md:text-xl font-bold text-gray-900 mb-3",children:t.event.name}),t.event.description&&s.jsx("p",{className:"text-gray-600 mb-4",children:t.event.description}),s.jsxs("div",{className:"space-y-2",children:[t.event.date&&s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(bt,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-sm",children:new Date(t.event.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),t.event.location&&s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"text-sm",children:t.event.location})]})]})]}),s.jsxs("div",{className:"px-4 md:px-6 py-6 border-b border-gray-200",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Attendee Information"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[s.jsxs("div",{children:[s.jsx("strong",{children:"Name:"})," ",t.name]}),s.jsxs("div",{children:[s.jsx("strong",{children:"ID Number:"})," ",t.identification_number]}),t.staff_id&&s.jsxs("div",{children:[s.jsx("strong",{children:"Staff ID:"})," ",t.staff_id]}),t.email&&s.jsxs("div",{children:[s.jsx("strong",{children:"Email:"})," ",t.email]}),t.phone&&s.jsxs("div",{children:[s.jsx("strong",{children:"Phone:"})," ",t.phone]})]})]}),s.jsxs("div",{className:"px-4 md:px-6 py-6 md:py-8 text-center",children:[s.jsx("h3",{className:"font-semibold text-gray-900 mb-4",children:"Check-in QR Code"}),t.qr_code&&s.jsx("div",{className:"flex justify-center",children:s.jsx("img",{src:Tt(t.qr_code),alt:"QR Code for check-in",className:"w-40 h-40 md:w-48 md:h-48 border border-gray-200 rounded-lg"})}),s.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"Present this QR code at the event for check-in"})]}),t.checked_in&&t.check_in_time&&s.jsx("div",{className:"bg-green-50 px-4 md:px-6 py-4",children:s.jsxs("div",{className:"flex items-center justify-center text-green-800",children:[s.jsx(br,{className:"h-5 w-5 mr-2"}),s.jsxs("span",{className:"text-sm font-medium",children:["Checked in at ",new Date(t.check_in_time).toLocaleString()]})]})})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ticket Not Found"}),s.jsx("p",{className:"text-gray-600",children:"The ticket you're looking for doesn't exist."})]})})}function C_(){var w;const{eventId:e}=Lo(),[t,n]=A.useState(null),[r,o]=A.useState(!1),[a,i]=A.useState(!1),[l,c]=A.useState(""),[x,d]=A.useState(null),[f,m]=A.useState(null),[v,y]=A.useState(0),[C,P]=A.useState(2);A.useEffect(()=>{e&&B()},[e]);const B=async()=>{try{const{data:E,error:N}=await le.from("events").select(`
          id,
          name,
          description,
          max_gallery_uploads,
          company:companies(name)
        `).eq("id",e).single();if(N)throw N;const M={...E,company:Array.isArray(E.company)?E.company[0]??{name:""}:E.company};n(M),P(M.max_gallery_uploads||2),await g()}catch{z.error("Event not found")}},g=async()=>{if(e)try{const{data:E,error:N}=await le.from("gallery_photos").select("id").eq("event_id",e).eq("attendee_name",l.trim()||"Anonymous");if(N)throw N;y((E==null?void 0:E.length)||0)}catch(E){console.error("Error checking upload count:",E)}};A.useEffect(()=>{e&&l&&g()},[l,e]);const b=E=>{var M;const N=(M=E.target.files)==null?void 0:M[0];if(N){if(N.size>10*1024*1024){z.error("File size must be less than 10MB");return}if(!N.type.startsWith("image/")){z.error("Please select an image file");return}d(N);const L=URL.createObjectURL(N);m(L)}},j=async()=>{if(!(!x||!t)){if(v>=C){z.error(`You have reached the maximum upload limit of ${C} photos`);return}o(!0);try{const E=new FileReader;E.onload=async N=>{var J;const M=(J=N.target)==null?void 0:J.result,{error:L}=await le.from("gallery_photos").insert([{event_id:t.id,attendee_name:l.trim()||null,photo_url:M}]);if(L)throw L;z.success("Photo uploaded successfully!"),i(!0),d(null),m(null),c(""),y(se=>se+1)},E.readAsDataURL(x)}catch(E){z.error("Error uploading photo: "+E.message)}finally{o(!1)}}},D=()=>{i(!1),d(null),m(null),c("")};return t?a?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:s.jsx("div",{className:"max-w-md w-full text-center",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[s.jsx(br,{className:"h-16 w-16 text-green-500 mx-auto mb-4"}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Photo Uploaded!"}),s.jsxs("p",{className:"text-gray-600 mb-6",children:["Thank you for sharing your moment from ",t.name]}),s.jsx("button",{onClick:D,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Upload Another Photo"})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8 px-4",children:s.jsx("div",{className:"max-w-xl mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsxs("div",{className:"bg-blue-600 text-white px-4 md:px-6 py-4 md:py-6 text-center",children:[s.jsx("div",{className:"flex items-center justify-center mb-3",children:s.jsx(gr,{className:"h-8 w-8"})}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold mb-2",children:"Share Your Photo"}),s.jsx("p",{className:"text-blue-100 text-sm",children:t.name}),s.jsx("p",{className:"text-blue-200 text-xs",children:((w=t==null?void 0:t.company)==null?void 0:w.name)??"No Company"})]}),s.jsxs("div",{className:"px-4 md:px-6 py-4 md:py-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Name (Optional)"}),s.jsx("input",{type:"text",value:l,onChange:E=>c(E.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your name"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Photo"}),s.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-3 md:p-4 text-center hover:border-blue-400 transition-colors",children:f?s.jsxs("div",{className:"space-y-3",children:[s.jsx("img",{src:f,alt:"Preview",className:"max-w-full h-32 md:h-40 object-contain mx-auto rounded"}),s.jsx("button",{onClick:()=>{d(null),m(null)},className:"text-blue-600 hover:text-blue-700 text-sm",children:"Choose Different Photo"})]}):s.jsxs("div",{children:[s.jsx(Nn,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),s.jsx("p",{className:"text-gray-600 text-sm mb-1",children:"Click to select a photo"}),s.jsx("p",{className:"text-xs text-gray-500",children:"PNG, JPG up to 10MB"}),s.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden",id:"photo-upload"}),s.jsx("label",{htmlFor:"photo-upload",className:"mt-2 inline-block bg-blue-600 text-white px-3 py-1.5 rounded text-sm hover:bg-blue-700 transition-colors cursor-pointer",children:"Select Photo"})]})})]}),x&&s.jsxs("button",{onClick:j,disabled:r||v>=C,className:"w-full bg-green-600 text-white py-2 px-4 rounded text-sm hover:bg-green-700 transition-colors flex items-center justify-center disabled:opacity-50",children:[s.jsx(xu,{className:"h-4 w-4 mr-2"}),r?"Uploading...":v>=C?"Upload Limit Reached":"Upload Photo"]})]}),s.jsxs("div",{className:"mt-4 text-center text-xs text-gray-600",children:[s.jsx("p",{children:" Your photo will be added to the event gallery"}),s.jsx("p",{children:" Photos may be displayed during the event"}),s.jsx("p",{children:" By uploading, you consent to public display"}),s.jsxs("div",{className:"mt-2 p-2 bg-blue-50 rounded border border-blue-200",children:[s.jsxs("p",{className:"text-blue-800 font-medium text-sm",children:["Upload Limit: ",v,"/",C," photos"]}),v>=C&&s.jsx("p",{className:"text-red-600 text-xs mt-1",children:"You have reached the maximum upload limit"})]})]})]})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}function B_(){var L,J,se,X;const{sessionId:e}=Lo(),[t,n]=A.useState(null),[r,o]=A.useState([]),[a,i]=A.useState(null),[l,c]=A.useState(0),[x,d]=A.useState(!1),[f,m]=A.useState(!0),[v,y]=A.useState(!1),[C,P]=A.useState(!1),[B,g]=A.useState(""),[b,j]=A.useState(!0);A.useEffect(()=>{e&&D()},[e]),A.useEffect(()=>{if(e&&a){w(),E();const Q=le.channel("votes").on("postgres_changes",{event:"*",schema:"public",table:"votes"},()=>{w(),E()}).subscribe();return()=>{Q.unsubscribe()}}},[e,a]);const D=async()=>{try{const{data:Q,error:ce}=await le.from("voting_sessions").select(`
          id,
          title,
          description,
          event:events(
            id,
            name,
            company:companies(name)
          )
        `).eq("id",e).eq("is_active",!0).single();if(ce||!Q)throw ce;let V=Q.event;if(Array.isArray(V)&&(V=V[0]),!V)throw new Error("Event data not found");const xe={id:Q.id,title:Q.title,description:Q.description,event:{id:V.id,name:V.name,company:Array.isArray(V.company)?V.company[0]:V.company}};n(xe)}catch(Q){console.error("Error fetching session:",Q),z.error("Voting session not found or not active")}finally{m(!1)}},w=async()=>{try{const{data:Q,error:ce}=await le.from("voting_photos").select("*").eq("voting_session_id",e).order("created_at",{ascending:!1});if(ce)throw ce;const V=await Promise.all(Q.map(async _=>{const{data:S}=await le.from("votes").select("id, attendee_id").eq("voting_photo_id",_.id),U=a&&(S==null?void 0:S.some($=>$.attendee_id===a.id))||!1;return{..._,vote_count:(S==null?void 0:S.length)||0,user_voted:U}})),xe=V.reduce((_,S)=>_+S.vote_count,0);c(xe);const ne=V.map(_=>({..._,vote_percentage:xe>0?_.vote_count/xe*100:0}));o(ne)}catch(Q){console.error("Error fetching photos:",Q)}},E=async()=>{if(!(!a||r.length===0))try{const{data:Q,error:ce}=await le.from("votes").select("id").eq("attendee_id",a.id).in("voting_photo_id",r.map(V=>V.id));if(ce)throw ce;d(((Q==null?void 0:Q.length)||0)>0)}catch(Q){console.error("Error checking vote status:",Q)}},N=async Q=>{if(Q.preventDefault(),!!B.trim())try{m(!0);const{data:ce,error:V}=await le.from("attendees").select("id, name, identification_number, event_id").eq("identification_number",B.trim()).single();if(V||!ce){z.error("Attendee not found. Please check your identification number.");return}if(t&&ce.event_id!==t.event.id){z.error("You are not registered for this event.");return}i(ce),j(!1),z.success(`Welcome, ${ce.name}!`)}catch(ce){console.error("Login error:",ce),z.error("Error logging in: "+ce.message)}finally{m(!1)}},M=async Q=>{if(!(!a||v))try{y(!0);const{data:ce}=await le.from("votes").select("id").eq("attendee_id",a.id).in("voting_photo_id",r.map(xe=>xe.id));if(ce&&ce.length>0){z.error("You have already voted in this session"),d(!0);return}const{error:V}=await le.from("votes").insert([{voting_photo_id:Q,attendee_id:a.id}]);if(V)throw V;z.success("Vote cast successfully!"),d(!0),P(!0),w()}catch(ce){z.error("Error casting vote: "+ce.message)}finally{y(!1)}};return f?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600"})}):t?b?s.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-12 px-4",children:s.jsx("div",{className:"max-w-md mx-auto",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 md:p-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx(Vn,{className:"h-16 w-16 text-purple-600 mx-auto mb-4"}),s.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-2",children:"Join Voting"}),s.jsx("h2",{className:"text-lg md:text-xl text-purple-600 mb-2",children:t.title}),s.jsx("p",{className:"text-gray-600",children:t.event.name}),s.jsx("p",{className:"text-sm text-gray-500",children:((J=(L=t.event)==null?void 0:L.company)==null?void 0:J.name)??"No Company"})]}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Identification Number"}),s.jsx("input",{type:"text",value:B,onChange:Q=>g(Q.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"Enter your identification number",required:!0})]}),s.jsx("button",{type:"submit",disabled:f,className:"w-full bg-purple-600 text-white py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50",children:f?"Verifying...":"Join Voting"})]}),t.description&&s.jsx("div",{className:"mt-6 p-4 bg-purple-50 rounded-lg",children:s.jsx("p",{className:"text-sm text-purple-700",children:t.description})})]})})}):s.jsx("div",{className:"min-h-screen bg-gray-50 py-4 md:py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-4 md:p-6 mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:t.title}),s.jsx("p",{className:"text-base md:text-lg text-purple-600 mb-2",children:t.event.name}),s.jsx("p",{className:"text-gray-600",children:((X=(se=t.event)==null?void 0:se.company)==null?void 0:X.name)??"No Company"}),t.description&&s.jsx("p",{className:"text-gray-600 mt-2",children:t.description}),s.jsxs("div",{className:"mt-4 flex flex-col md:flex-row items-center justify-center space-y-2 md:space-y-0 md:space-x-4 text-sm text-gray-500",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(vt,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{children:["Welcome, ",a==null?void 0:a.name]})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Er,{className:"h-4 w-4 mr-1"}),s.jsxs("span",{children:[l," total votes"]})]})]})]})}),x&&s.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(br,{className:"h-5 w-5 text-green-600 mr-2"}),s.jsx("span",{className:"text-green-800 font-medium",children:"Thank you for voting!"})]})}),x&&s.jsx("div",{className:"text-center mb-6",children:s.jsx("button",{onClick:()=>P(!C),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition-colors",children:C?"Hide Results":"Show Results"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:r.map(Q=>s.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[s.jsx("img",{src:Tt(Q.photo_url),alt:Q.title,className:"w-full h-48 md:h-64 object-cover"}),s.jsxs("div",{className:"p-4 md:p-6",children:[s.jsx("h3",{className:"text-lg md:text-xl font-semibold text-gray-900 mb-4",children:Q.title}),x?C?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Votes"}),s.jsxs("span",{className:"text-sm font-bold text-gray-900",children:[Q.vote_count," (",Q.vote_percentage.toFixed(1),"%)"]})]}),s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 md:h-3",children:s.jsx("div",{className:`h-2 md:h-3 rounded-full transition-all duration-500 ${Q.user_voted?"bg-green-500":"bg-purple-500"}`,style:{width:`${Q.vote_percentage}%`}})}),Q.user_voted&&s.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[s.jsx(br,{className:"h-4 w-4 mr-1"}),s.jsx("span",{children:"You voted for this"})]})]}):s.jsxs("div",{className:"text-center py-2 md:py-3 text-gray-500",children:[s.jsx(br,{className:"h-8 w-8 mx-auto mb-2"}),s.jsx("p",{children:"Vote cast successfully!"})]}):s.jsxs("button",{onClick:()=>M(Q.id),disabled:v,className:"w-full bg-purple-600 text-white py-2 md:py-3 px-4 rounded-lg hover:bg-purple-700 transition-colors disabled:opacity-50 flex items-center justify-center text-sm md:text-base",children:[s.jsx(Vn,{className:"h-5 w-5 mr-2"}),v?"Voting...":"Vote for This"]})]})]},Q.id))}),r.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Vn,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Photos Available"}),s.jsx("p",{className:"text-gray-600",children:"No photos have been added to this voting session yet."})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Voting Session Not Found"}),s.jsx("p",{className:"text-gray-600",children:"The voting session may have ended or doesn't exist."})]})})}function A_(){const{eventId:e,attendeeId:t}=Lo(),[n,r]=A.useState(null),[o,a]=A.useState(!0);A.useEffect(()=>{t&&i()},[t]);const i=async()=>{try{const{data:l,error:c}=await le.from("attendees").select("id, name, table_assignment").eq("id",t).single();if(c)throw c;r(l)}catch(l){console.error("Error fetching attendee:",l)}finally{a(!1)}};return o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):n?s.jsx("div",{className:"min-h-screen bg-gray-50 p-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome, ",n.name,"!"]}),s.jsx("p",{className:"text-gray-600",children:"Here's your venue layout and seating information"})]})}),e&&s.jsx(kb,{eventId:e,isAttendeeView:!0,attendeeTable:n.table_assignment}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[s.jsx(tn,{className:"h-6 w-6 mr-2"}),"Your Seating Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"Attendee Details"}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Name:"})," ",n.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Attendee ID:"})," ",n.id]})]})]}),s.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[s.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Table Assignment"}),n.table_assignment?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"text-2xl font-bold text-green-700",children:["Table ",n.table_assignment]}),s.jsx("p",{className:"text-green-600",children:"Please find your table in the venue layout above."})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"text-gray-500",children:"No table assigned yet"}),s.jsx("p",{className:"text-sm text-gray-600",children:"Please check with event organizers for your seating assignment."})]})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mt-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center",children:[s.jsx(vt,{className:"h-6 w-6 mr-2"}),"Venue Instructions"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"1"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Find Your Table"}),s.jsx("p",{className:"text-gray-600",children:"Look for your highlighted table in the venue layout above."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Table Types"}),s.jsx("p",{className:"text-gray-600",children:"Different colored tables indicate different seating categories (VVIP, VIP, Regular, Staff)."})]})]}),s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"bg-blue-500 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-3 mt-0.5",children:"3"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Need Help?"}),s.jsx("p",{className:"text-gray-600",children:"If you can't find your table or need assistance, please contact event staff."})]})]})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Attendee Not Found"}),s.jsx("p",{className:"text-gray-600",children:"The attendee you're looking for doesn't exist."})]})})}function j_(){var C,P,B,g,b,j,D;const{eventId:e}=Lo(),[t,n]=A.useState(null),[r,o]=A.useState(!0),[a,i]=A.useState(""),[l,c]=A.useState(null),[x,d]=A.useState(!1);A.useEffect(()=>{e&&f()},[e]);const f=async()=>{try{const{data:w,error:E}=await le.from("events").select(`
          id,
          name,
          description,
          date,
          location,
          custom_logo,
          custom_background,
          company:companies(name)
        `).eq("id",e).single();if(E)throw E;let N=w;Array.isArray(N.company)&&(N={...N,company:N.company[0]}),n(N)}catch(w){z.error("Error fetching event: "+w.message)}finally{o(!1)}},m=async w=>{if(w.preventDefault(),!a.trim()){z.error("Please enter your identification number or staff ID");return}d(!0),c(null);try{const E=await v(a);c(E),E.success?(z.success(E.message),i("")):z.error(E.message)}catch(E){z.error("Error processing check-in: "+E.message)}finally{d(!1)}},v=async w=>{try{const{data:E,error:N}=await le.from("attendees").select(`
          id,
          name,
          identification_number,
          staff_id,
          checked_in,
          check_in_time,
          event_id,
          table_assignment,
          table_number,
          seat_number,
          face_photo_url,
          company,
          email,
          phone,
          created_at,
          event:events(name)
        `).eq("event_id",e).or(`identification_number.eq.${w},staff_id.eq.${w}`);if(N)throw N;if(!E||E.length===0)return{success:!1,message:"No attendee found with this ID number"};const M=E[0];if(M.checked_in)return{success:!1,message:`${M.name} is already checked in at ${new Date(M.check_in_time).toLocaleString()}`};console.log("Updating attendee check-in:",M.id,{checked_in:!0,check_in_time:new Date().toISOString()});const{error:L}=await le.from("attendees").update({checked_in:!0,check_in_time:new Date().toISOString()}).eq("id",M.id);if(L)throw console.error("Error updating attendee:",L),L;console.log("Successfully updated attendee check-in");let J="";return M.table_number?(J=`Table ${M.table_number}`,M.seat_number&&(J+=` - Seat ${M.seat_number}`)):M.table_assignment&&(J=M.table_assignment),{success:!0,attendee:{...M,table_position:J},message:`${M.name} checked in successfully!${J?` Your table assignment is: ${J}`:""}`}}catch(E){return{success:!1,message:"Error processing check-in: "+E.message}}};if(r)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(!t)return s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Event Not Found"}),s.jsx("p",{className:"text-gray-600",children:"The event you're looking for doesn't exist or has been removed."})]})});const y=t!=null&&t.custom_background?{backgroundImage:t.custom_background.startsWith("blob:")?`url(${t.custom_background})`:`url(${Tt(t.custom_background)})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat"}:{};return s.jsx("div",{className:"min-h-screen bg-gray-50",children:s.jsx("div",{style:y,className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-lg shadow-xl p-8 max-w-md w-full",children:[(t==null?void 0:t.custom_logo)&&s.jsx("div",{className:"flex justify-center mb-6",children:s.jsx("img",{src:Tt(t.custom_logo),alt:"Event Logo",className:"h-16 object-contain"})}),s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:t.name}),s.jsx("p",{className:"text-gray-600 mb-4",children:((C=t==null?void 0:t.company)==null?void 0:C.name)??"No Company"}),s.jsxs("div",{className:"space-y-2 text-sm text-gray-600",children:[t.date&&s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(bt,{className:"h-4 w-4 mr-2"}),new Date(t.date).toLocaleDateString()]}),t.location&&s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),t.location]})]})]}),l!=null&&l.success?s.jsxs("div",{className:"text-center space-y-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx("div",{className:"bg-green-100 rounded-full p-4",children:s.jsx(br,{className:"h-12 w-12 text-green-600"})})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-green-900 mb-2",children:"Welcome!"}),s.jsx("p",{className:"text-green-700 text-lg mb-4",children:(P=l.attendee)==null?void 0:P.name}),s.jsx("p",{className:"text-gray-600 mb-4",children:l.message}),s.jsxs("div",{className:"space-y-3",children:[((B=l.attendee)==null?void 0:B.staff_id)&&s.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center justify-center text-blue-800",children:[s.jsx(qf,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{className:"font-semibold",children:["Staff ID: ",l.attendee.staff_id]})]})}),((g=l.attendee)==null?void 0:g.company)&&s.jsx("div",{className:"bg-purple-50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center justify-center text-purple-800",children:[s.jsx(j0,{className:"h-4 w-4 mr-2"}),s.jsx("span",{className:"font-semibold",children:l.attendee.company})]})}),((b=l.attendee)==null?void 0:b.table_position)&&s.jsx("div",{className:"bg-green-50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center justify-center text-green-800",children:[s.jsx(tn,{className:"h-4 w-4 mr-2"}),s.jsxs("span",{className:"font-semibold",children:["Table: ",l.attendee.table_position]})]})}),(((j=l.attendee)==null?void 0:j.email)||((D=l.attendee)==null?void 0:D.phone))&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsxs("div",{className:"space-y-1 text-sm",children:[l.attendee.email&&s.jsxs("div",{className:"flex items-center justify-center text-gray-700",children:[s.jsx(k0,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:l.attendee.email})]}),l.attendee.phone&&s.jsxs("div",{className:"flex items-center justify-center text-gray-700",children:[s.jsx(k0,{className:"h-3 w-3 mr-1"}),s.jsx("span",{children:l.attendee.phone})]})]})})]}),s.jsxs("div",{className:"flex items-center justify-center text-gray-600 text-sm",children:[s.jsx(Nl,{className:"h-4 w-4 mr-2"}),"Checked in at ",new Date().toLocaleTimeString()]})]}),s.jsx("button",{onClick:()=>{c(null),i("")},className:"bg-gray-600 text-white py-2 px-4 rounded-lg hover:bg-gray-700 transition-colors",children:"Check In Another Person"})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Self Check-In"}),s.jsx("p",{className:"text-gray-600",children:"Enter your identification number or staff ID to check in"})]}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsx("div",{children:s.jsx("input",{type:"text",value:a,onChange:w=>i(w.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-center text-lg",placeholder:"Enter ID Number or Staff ID",autoFocus:!0,disabled:x})}),s.jsx("button",{type:"submit",disabled:x||!a.trim(),className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 transition-colors flex items-center justify-center font-semibold disabled:opacity-50 disabled:cursor-not-allowed",children:x?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Checking In..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Li,{className:"h-5 w-5 mr-2"}),"Check In"]})})]})]}),l&&!l.success&&s.jsx("div",{className:"mt-4 p-4 bg-red-50 rounded-lg",children:s.jsx("p",{className:"text-red-700 text-center",children:l.message})})]})})})}function k_({userCompany:e}){const t=()=>window.location.port||"5174",[n,r]=A.useState([]),[o,a]=A.useState(""),[i,l]=A.useState(""),[c,x]=A.useState(!0),[d,f]=A.useState({eventId:"",customUrl:"",qrType:"registration",useLocalIP:!1,localIP:"",publicIP:"",ipType:"localhost",port:t()});A.useEffect(()=>{v(),m()},[]);const m=async()=>{try{console.log("Starting network settings auto-detection...");const[w,E]=await Promise.allSettled([C(),y()]),N=t(),M=w.status==="fulfilled"?w.value:"192.168.1.100",L=E.status==="fulfilled"&&E.value||M;f(J=>({...J,localIP:M,publicIP:L,port:N})),console.log("Auto-detected network settings:",{networkIP:M,publicIP:L,port:N}),w.status==="fulfilled"&&E.status==="fulfilled"?console.log(" Both network and public IPs detected successfully"):w.status==="fulfilled"?console.log(" Network IP detected, public IP failed"):E.status==="fulfilled"?console.log(" Public IP detected, network IP failed"):console.log(" Both IP detections failed, using fallback")}catch(w){console.error("Error auto-detecting network settings:",w),f(E=>({...E,localIP:"192.168.1.100",publicIP:"192.168.1.100",port:t()}))}};A.useEffect(()=>{o&&f(w=>({...w,eventId:o}))},[o]);const v=async()=>{try{x(!0);let w=le.from("events").select(`
          id,
          name,
          company_id,
          company:companies(name)
        `);e&&(w=w.eq("company_id",e.company_id));const{data:E,error:N}=await w.order("created_at",{ascending:!1});if(N)throw N;const M=(E==null?void 0:E.map(L=>({...L,company:Array.isArray(L.company)?L.company[0]:L.company})))||[];r(M),e&&M&&M.length>0&&a(M[0].id)}catch(w){z.error("Error fetching events: "+w.message)}finally{x(!1)}},y=async()=>{try{const w=["https://api.ipify.org?format=json","https://api.myip.com","https://api64.ipify.org?format=json","https://ipapi.co/json","https://httpbin.org/ip"];for(const E of w)try{const N=new AbortController,M=setTimeout(()=>N.abort(),5e3),L=await fetch(E,{signal:N.signal,headers:{Accept:"application/json"}});if(clearTimeout(M),!L.ok)throw new Error(`HTTP ${L.status}`);const J=await L.json(),se=J.ip||J.query||J.origin;if(se&&typeof se=="string"&&se.match(/^(\d{1,3}\.){3}\d{1,3}$/))return console.log(`Successfully got IP from ${E}: ${se}`),se}catch(N){const M=N instanceof Error?N.message:"Unknown error";console.warn(`Failed to get IP from ${E}:`,M);continue}return console.warn("All public IP detection services failed"),null}catch(w){return console.error("Error getting public IP:",w),null}},C=async()=>{try{const w=new RTCPeerConnection({iceServers:[],iceCandidatePoolSize:0});return w.createDataChannel(""),new Promise(E=>{let N=!1;w.onicecandidate=M=>{if(M.candidate&&!N){const se=M.candidate.candidate.split(" ")[4];se&&se.match(/^(\d{1,3}\.){3}\d{1,3}$/)&&!se.startsWith("127.")&&!se.startsWith("169.254.")&&(N=!0,w.close(),console.log(`Detected local network IP: ${se}`),E(se))}},w.createOffer().then(M=>w.setLocalDescription(M)).catch(M=>{console.warn("WebRTC offer creation failed:",M),N||(N=!0,w.close(),E("192.168.1.100"))}),setTimeout(()=>{N||(N=!0,w.close(),console.warn("WebRTC timeout, using fallback IP"),E("192.168.1.100"))},3e3)})}catch(w){return console.error("Error detecting local network IP:",w),"192.168.1.100"}},P=async()=>{if(!d.eventId){z.error("Please select an event");return}try{let w="";d.useLocalIP?d.ipType==="localhost"?w=`http://localhost:${d.port}`:w=`http://${d.ipType==="public"?d.publicIP:d.localIP}:${d.port}`:w=window.location.origin;let E="";switch(d.qrType){case"registration":E=`/public/register/${d.eventId}`;break;case"checkin":E=`/public/checkin/${d.eventId}`;break;case"gallery":E=`/public/gallery/${d.eventId}`;break;case"voting":E=`/public/voting/${d.eventId}`;break;case"venue":E=`/public/venue/${d.eventId}`;break}const N=w+E,M=await qn.toDataURL(N,{width:300,margin:2,errorCorrectionLevel:"M",color:{dark:"#000000",light:"#FFFFFF"}});l(M),z.success("QR Code generated successfully!")}catch(w){z.error("Error generating QR code: "+w.message)}},B=()=>{if(!i)return;const w=document.createElement("a");w.download=`qr-${d.qrType}-${d.eventId}.png`,w.href=i,w.click()},g=async()=>{if(i)try{await navigator.clipboard.writeText(i),z.success("QR Code image URL copied to clipboard!")}catch{z.error("Failed to copy QR code")}},b=async()=>{if(!d.eventId)return;let w="";d.useLocalIP?d.ipType==="localhost"?w=`http://localhost:${d.port}`:w=`http://${d.ipType==="public"?d.publicIP:d.localIP}:${d.port}`:w=window.location.origin;let E="";switch(d.qrType){case"registration":E=`/public/register/${d.eventId}`;break;case"checkin":E=`/public/checkin/${d.eventId}`;break;case"gallery":E=`/public/gallery/${d.eventId}`;break;case"voting":E=`/public/voting/${d.eventId}`;break;case"venue":E=`/public/venue/${d.eventId}`;break}const N=w+E;try{await navigator.clipboard.writeText(N),z.success("URL copied to clipboard!")}catch{z.error("Failed to copy URL")}},j=async()=>{const w=await C(),E=await y(),N=t();f(M=>({...M,localIP:w,publicIP:E||w,port:N})),z.success(`Network detected: ${w}:${N}`)},D=async()=>{try{z.loading("Refreshing network settings..."),await m(),z.success("Network settings refreshed successfully!")}catch{z.error("Failed to refresh network settings")}};return c?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Loading events..."})]})}):s.jsxs("div",{children:[s.jsx("div",{className:"flex justify-between items-center mb-8",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"QR Code Generator"}),s.jsx("p",{className:"text-gray-600 mt-2",children:"Create custom QR codes for your events with local network support"})]})}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center",children:[s.jsx(du,{className:"h-5 w-5 mr-2"}),"QR Code Configuration"]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select Event"}),n.length===0?s.jsx("div",{className:"w-full px-3 py-2 bg-yellow-50 border border-yellow-300 rounded-md text-yellow-800",children:"No events found. Create an event first."}):s.jsxs("select",{value:o,onChange:w=>a(w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"",children:"Choose an event"}),n.map(w=>s.jsx("option",{value:w.id,children:e?w.name:`${w.name} (${w.company.name})`},w.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"QR Code Type"}),s.jsxs("select",{value:d.qrType,onChange:w=>f(E=>({...E,qrType:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"registration",children:"Registration"}),s.jsx("option",{value:"checkin",children:"Check-In"}),s.jsx("option",{value:"gallery",children:"Gallery Upload"}),s.jsx("option",{value:"voting",children:"Voting"}),s.jsx("option",{value:"venue",children:"Venue Layout"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"URL Configuration"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("input",{type:"checkbox",id:"useLocalIP",checked:d.useLocalIP,onChange:w=>f(E=>({...E,useLocalIP:w.target.checked})),className:"rounded"}),s.jsx("label",{htmlFor:"useLocalIP",className:"text-sm text-gray-700",children:"Use Custom IP Address"})]}),d.useLocalIP&&s.jsx("div",{className:"pl-6 space-y-3",children:s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"IP Type"}),s.jsxs("select",{value:d.ipType,onChange:w=>f(E=>({...E,ipType:w.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[s.jsx("option",{value:"network",children:"Network IP (Local Network)"}),s.jsx("option",{value:"public",children:"Public IP (Internet)"}),s.jsx("option",{value:"localhost",children:"Localhost"})]})]})})]}),d.useLocalIP&&s.jsxs("div",{className:"space-y-3 pl-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP Address"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("input",{type:"text",value:d.ipType==="public"?d.publicIP:d.localIP,onChange:w=>{d.ipType==="public"?f(E=>({...E,publicIP:w.target.value})):f(E=>({...E,localIP:w.target.value}))},placeholder:d.ipType==="public"?"Public IP":"192.168.1.100",className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),s.jsx("button",{onClick:j,className:"px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 flex items-center",title:"Detect IP Addresses",children:s.jsx(_1,{className:"h-4 w-4"})}),s.jsx("button",{onClick:D,className:"px-3 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 flex items-center",title:"Refresh Network Settings",children:s.jsx(_l,{className:"h-4 w-4"})})]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.ipType==="network"&&`Network IP: ${d.localIP}`,d.ipType==="public"&&`Public IP: ${d.publicIP}`,d.ipType==="localhost"&&"Using localhost"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Port Number"}),s.jsx("input",{type:"text",value:d.port,onChange:w=>f(E=>({...E,port:w.target.value})),placeholder:"3000",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[s.jsxs("p",{className:"text-sm text-gray-600",children:[s.jsx("strong",{children:"Generated URL:"}),s.jsx("br",{}),d.useLocalIP?d.ipType==="localhost"?`http://localhost:${d.port}/public/${d.qrType}/${d.eventId}`:`http://${d.ipType==="public"?d.publicIP:d.localIP}:${d.port}/public/${d.qrType}/${d.eventId}`:`${window.location.origin}/public/${d.qrType}/${d.eventId}`]}),s.jsxs("div",{className:"text-xs text-blue-600 mt-2 space-y-1",children:[s.jsxs("div",{children:[" Network IP: ",d.localIP]}),s.jsxs("div",{children:[" Public IP: ",d.publicIP||"Not detected"]}),s.jsxs("div",{children:[" Port: ",d.port]})]})]})]})]}),s.jsxs("button",{onClick:P,disabled:!o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:[s.jsx(Qt,{className:"h-5 w-5 mr-2"}),"Generate QR Code"]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[s.jsxs("h2",{className:"text-xl font-bold mb-6 flex items-center",children:[s.jsx(Qt,{className:"h-5 w-5 mr-2"}),"Generated QR Code"]}),i?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-center",children:s.jsx("img",{src:i,alt:"Generated QR Code",className:"mx-auto border-2 border-gray-200 rounded-lg shadow-lg"})}),s.jsxs("div",{className:"flex flex-wrap gap-2 justify-center",children:[s.jsxs("button",{onClick:B,className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 flex items-center",children:[s.jsx(Ia,{className:"h-4 w-4 mr-2"}),"Download"]}),s.jsxs("button",{onClick:g,className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 flex items-center",children:[s.jsx(iB,{className:"h-4 w-4 mr-2"}),"Copy Image URL"]}),s.jsxs("button",{onClick:b,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",children:[s.jsx(pB,{className:"h-4 w-4 mr-2"}),"Copy URL"]})]})]}):s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx(Qt,{className:"h-16 w-16 mx-auto mb-4 opacity-50"}),s.jsx("p",{children:"Generate a QR code to see it here"})]})]})]})]})}function D_(){const[e,t]=A.useState(null),[n,r]=A.useState(null),[o,a]=A.useState(!0),[i,l]=A.useState(!0),{currentUser:c,isOfflineMode:x}=zf();A.useEffect(()=>{if("https://fylfbymwfymtcumpfcvf.supabase.co".includes("your-project")||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ5bGZieW13ZnltdGN1bXBmY3ZmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM3ODkyOTAsImV4cCI6MjA2OTM2NTI5MH0.k7sy5m9jucYj_8NRBXCFkOm17rVjAKLAR12dAv59pP4".includes("your-anon-key")){l(!1),a(!1);return}le.auth.getSession().then(({data:{session:y}})=>{t((y==null?void 0:y.user)??null),a(!1)}).catch(()=>{l(!1),a(!1)});const{data:{subscription:v}}=le.auth.onAuthStateChange((y,C)=>{t((C==null?void 0:C.user)??null),C!=null&&C.user?d(C.user.id):r(null)});return()=>v.unsubscribe()},[]);const d=async f=>{try{const{data:m,error:v}=await le.from("company_users").select(`
          *,
          company:companies(*)
        `).eq("id",f).maybeSingle();if(v)return;r(m)}catch{}};return i?o?s.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):s.jsx(R5,{children:s.jsxs("div",{className:"App",children:[s.jsx(IC,{position:"top-right"}),s.jsx(PA,{}),s.jsxs(Eg,{children:[s.jsx(kt,{path:"/public/register/:eventId",element:s.jsx(b_,{})}),s.jsx(kt,{path:"/public/ticket/:attendeeId",element:s.jsx(w_,{})}),s.jsx(kt,{path:"/public/checkin/:eventId",element:s.jsx(j_,{})}),s.jsx(kt,{path:"/public/gallery/:eventId",element:s.jsx(C_,{})}),s.jsx(kt,{path:"/public/voting/:sessionId",element:s.jsx(B_,{})}),s.jsx(kt,{path:"/public/venue/:eventId/:attendeeId",element:s.jsx(A_,{})}),s.jsx(kt,{path:"/auth",element:!e&&!c?s.jsx(TA,{}):s.jsx(wd,{to:"/admin"})}),s.jsx(kt,{path:"/admin/*",element:e||c?s.jsx(SA,{userCompany:n,children:s.jsxs(Eg,{children:[s.jsx(kt,{path:"/",element:s.jsx(IA,{userCompany:n})}),(!c||c.type==="admin"||c.type==="superadmin")&&s.jsxs(s.Fragment,{children:[s.jsx(kt,{path:"/companies",element:s.jsx(LA,{})}),s.jsx(kt,{path:"/events",element:s.jsx(ay,{userCompany:n})}),s.jsx(kt,{path:"/events/:eventId",element:s.jsx(ay,{userCompany:n})}),s.jsx(kt,{path:"/progress",element:s.jsx(g_,{})}),s.jsx(kt,{path:"/gallery",element:s.jsx(m_,{userCompany:n})}),s.jsx(kt,{path:"/seating",element:s.jsx(p_,{userCompany:n})}),s.jsx(kt,{path:"/qr-generator",element:s.jsx(k_,{userCompany:n})}),s.jsx(kt,{path:"/voting",element:s.jsx(y_,{userCompany:n})}),s.jsx(kt,{path:"/voting-monitor",element:s.jsx(v_,{userCompany:n})})]}),s.jsx(kt,{path:"/attendees",element:s.jsx(Fj,{userCompany:n})}),s.jsx(kt,{path:"/checkin",element:s.jsx(Sj,{userCompany:n})}),s.jsx(kt,{path:"/welcome-monitor",element:s.jsx(x_,{userCompany:n})}),s.jsx(kt,{path:"/welcome-monitor-scanner",element:s.jsx(h_,{userCompany:n})}),s.jsx(kt,{path:"/lucky-draw",element:s.jsx(f_,{userCompany:n})})]})}):s.jsx(wd,{to:"/auth"})}),s.jsx(kt,{path:"/",element:s.jsx(wd,{to:e||c?"/admin":"/auth"})})]})]})}):s.jsx(AA,{})}Zd.createRoot(document.getElementById("root")).render(s.jsx(Lh.StrictMode,{children:s.jsx(D_,{})}));
